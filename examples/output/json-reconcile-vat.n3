@prefix ex: <http://example.org/> .
@prefix genid: <https://eyereasoner.github.io/.well-known/genid/> .
@prefix owl: <http://www.w3.org/2002/07/owl#> .

# ----------------------------------------------------------------------
# Proof for derived triple:
#   ex:checks ex:fragmentPointerWorks true .
# It holds because the following instance of the rule body is provable:
#   ex:feed ex:json """{
#     "meta~data": { "batch": "2025-12-18" },
#     "orders": [
#       {
#         "orderId": "A100",
#         "shipTo": { "country": "BE" },
#         "customer": { "email": "Ada@Example.ORG", "vatId": null },
#         "lines": [
#           { "sku": "wid-001", "qty": 2, "unitCents": 999 },
#           { "sku": "GAD-002", "qty": 1, "unitCents": 1500 }
#         ],
#         "declared": { "netCents": 3498, "vatCents": 509, "grossCents": 4007 }
#       },
#       {
#         "orderId": "A200",
#         "shipTo": { "country": "US" },
#         "customer": { "email": "bob@example.org", "vatId": null },
#         "lines": [
#           { "sku": "WID-001", "qty": 2, "unitCents": 999 },
#           { "sku": "GAD-002", "qty": 1, "unitCents": 1500 }
#         ],
#         "declared": { "netCents": 3498, "vatCents": 0, "grossCents": 3498 }
#       },
#       {
#         "orderId": "A300",
#         "shipTo": { "country": "NL" },
#         "customer": { "email": "acct@company.nl", "vatId": "NL999999999B01" },
#         "lines": [
#           { "sku": "WID-001", "qty": 2, "unitCents": 999 },
#           { "sku": "GAD-002", "qty": 1, "unitCents": 1500 }
#         ],
#         "declared": { "netCents": 3498, "vatCents": 0, "grossCents": 3498 }
#       },
#       {
#         "orderId": "A301",
#         "shipTo": { "country": "NL" },
#         "customer": { "email": "billing@company.nl", "vatId": "NL999999999B01" },
#         "lines": [
#           { "sku": "WID-001", "qty": 2, "unitCents": 999 },
#           { "sku": "GAD-002", "qty": 1, "unitCents": 1500 }
#         ],
#         "declared": { "netCents": 3498, "vatCents": 0, "grossCents": 3498 }
#       },
#       {
#         "orderId": "A400",
#         "shipTo": { "country": "BE" },
#         "customer": { "email": "ada@other.example", "vatId": null },
#         "lines": [
#           { "sku": "WID-001", "qty": 2, "unitCents": 999 },
#           { "sku": "GAD-002", "qty": 1, "unitCents": 1500 }
#         ],
#         "declared": { "netCents": 3498, "vatCents": 508, "grossCents": 4006 }
#       }
#     ]
#   }"""^^rdf:JSON .
#   ("""{
#     "meta~data": { "batch": "2025-12-18" },
#     "orders": [
#       {
#         "orderId": "A100",
#         "shipTo": { "country": "BE" },
#         "customer": { "email": "Ada@Example.ORG", "vatId": null },
#         "lines": [
#           { "sku": "wid-001", "qty": 2, "unitCents": 999 },
#           { "sku": "GAD-002", "qty": 1, "unitCents": 1500 }
#         ],
#         "declared": { "netCents": 3498, "vatCents": 509, "grossCents": 4007 }
#       },
#       {
#         "orderId": "A200",
#         "shipTo": { "country": "US" },
#         "customer": { "email": "bob@example.org", "vatId": null },
#         "lines": [
#           { "sku": "WID-001", "qty": 2, "unitCents": 999 },
#           { "sku": "GAD-002", "qty": 1, "unitCents": 1500 }
#         ],
#         "declared": { "netCents": 3498, "vatCents": 0, "grossCents": 3498 }
#       },
#       {
#         "orderId": "A300",
#         "shipTo": { "country": "NL" },
#         "customer": { "email": "acct@company.nl", "vatId": "NL999999999B01" },
#         "lines": [
#           { "sku": "WID-001", "qty": 2, "unitCents": 999 },
#           { "sku": "GAD-002", "qty": 1, "unitCents": 1500 }
#         ],
#         "declared": { "netCents": 3498, "vatCents": 0, "grossCents": 3498 }
#       },
#       {
#         "orderId": "A301",
#         "shipTo": { "country": "NL" },
#         "customer": { "email": "billing@company.nl", "vatId": "NL999999999B01" },
#         "lines": [
#           { "sku": "WID-001", "qty": 2, "unitCents": 999 },
#           { "sku": "GAD-002", "qty": 1, "unitCents": 1500 }
#         ],
#         "declared": { "netCents": 3498, "vatCents": 0, "grossCents": 3498 }
#       },
#       {
#         "orderId": "A400",
#         "shipTo": { "country": "BE" },
#         "customer": { "email": "ada@other.example", "vatId": null },
#         "lines": [
#           { "sku": "WID-001", "qty": 2, "unitCents": 999 },
#           { "sku": "GAD-002", "qty": 1, "unitCents": 1500 }
#         ],
#         "declared": { "netCents": 3498, "vatCents": 508, "grossCents": 4006 }
#       }
#     ]
#   }"""^^rdf:JSON "#/orders/0/shipTo/country") string:jsonPointer "BE" .
# via the schematic forward rule:
#   {
#     ex:feed ex:json ?J .
#     (?J "#/orders/0/shipTo/country") string:jsonPointer "BE" .
#   } => {
#     ex:checks ex:fragmentPointerWorks true .
#   } .
# with substitution (on rule variables):
#   ?J = """{
#     "meta~data": { "batch": "2025-12-18" },
#     "orders": [
#     {
#     "orderId": "A100",
#     "shipTo": { "country": "BE" },
#     "customer": { "email": "Ada@Example.ORG", "vatId": null },
#     "lines": [
#     { "sku": "wid-001", "qty": 2, "unitCents": 999 },
#     { "sku": "GAD-002", "qty": 1, "unitCents": 1500 }
#     ],
#     "declared": { "netCents": 3498, "vatCents": 509, "grossCents": 4007 }
#     },
#     {
#     "orderId": "A200",
#     "shipTo": { "country": "US" },
#     "customer": { "email": "bob@example.org", "vatId": null },
#     "lines": [
#     { "sku": "WID-001", "qty": 2, "unitCents": 999 },
#     { "sku": "GAD-002", "qty": 1, "unitCents": 1500 }
#     ],
#     "declared": { "netCents": 3498, "vatCents": 0, "grossCents": 3498 }
#     },
#     {
#     "orderId": "A300",
#     "shipTo": { "country": "NL" },
#     "customer": { "email": "acct@company.nl", "vatId": "NL999999999B01" },
#     "lines": [
#     { "sku": "WID-001", "qty": 2, "unitCents": 999 },
#     { "sku": "GAD-002", "qty": 1, "unitCents": 1500 }
#     ],
#     "declared": { "netCents": 3498, "vatCents": 0, "grossCents": 3498 }
#     },
#     {
#     "orderId": "A301",
#     "shipTo": { "country": "NL" },
#     "customer": { "email": "billing@company.nl", "vatId": "NL999999999B01" },
#     "lines": [
#     { "sku": "WID-001", "qty": 2, "unitCents": 999 },
#     { "sku": "GAD-002", "qty": 1, "unitCents": 1500 }
#     ],
#     "declared": { "netCents": 3498, "vatCents": 0, "grossCents": 3498 }
#     },
#     {
#     "orderId": "A400",
#     "shipTo": { "country": "BE" },
#     "customer": { "email": "ada@other.example", "vatId": null },
#     "lines": [
#     { "sku": "WID-001", "qty": 2, "unitCents": 999 },
#     { "sku": "GAD-002", "qty": 1, "unitCents": 1500 }
#     ],
#     "declared": { "netCents": 3498, "vatCents": 508, "grossCents": 4006 }
#     }
#     ]
#   }"""^^rdf:JSON
# Therefore the derived triple above is entailed by the rules and facts.
# ----------------------------------------------------------------------

ex:checks ex:fragmentPointerWorks true .

# ----------------------------------------------------------------------
# Proof for derived triple:
#   ex:checks ex:tildeEscapeWorks true .
# It holds because the following instance of the rule body is provable:
#   ex:feed ex:json """{
#     "meta~data": { "batch": "2025-12-18" },
#     "orders": [
#       {
#         "orderId": "A100",
#         "shipTo": { "country": "BE" },
#         "customer": { "email": "Ada@Example.ORG", "vatId": null },
#         "lines": [
#           { "sku": "wid-001", "qty": 2, "unitCents": 999 },
#           { "sku": "GAD-002", "qty": 1, "unitCents": 1500 }
#         ],
#         "declared": { "netCents": 3498, "vatCents": 509, "grossCents": 4007 }
#       },
#       {
#         "orderId": "A200",
#         "shipTo": { "country": "US" },
#         "customer": { "email": "bob@example.org", "vatId": null },
#         "lines": [
#           { "sku": "WID-001", "qty": 2, "unitCents": 999 },
#           { "sku": "GAD-002", "qty": 1, "unitCents": 1500 }
#         ],
#         "declared": { "netCents": 3498, "vatCents": 0, "grossCents": 3498 }
#       },
#       {
#         "orderId": "A300",
#         "shipTo": { "country": "NL" },
#         "customer": { "email": "acct@company.nl", "vatId": "NL999999999B01" },
#         "lines": [
#           { "sku": "WID-001", "qty": 2, "unitCents": 999 },
#           { "sku": "GAD-002", "qty": 1, "unitCents": 1500 }
#         ],
#         "declared": { "netCents": 3498, "vatCents": 0, "grossCents": 3498 }
#       },
#       {
#         "orderId": "A301",
#         "shipTo": { "country": "NL" },
#         "customer": { "email": "billing@company.nl", "vatId": "NL999999999B01" },
#         "lines": [
#           { "sku": "WID-001", "qty": 2, "unitCents": 999 },
#           { "sku": "GAD-002", "qty": 1, "unitCents": 1500 }
#         ],
#         "declared": { "netCents": 3498, "vatCents": 0, "grossCents": 3498 }
#       },
#       {
#         "orderId": "A400",
#         "shipTo": { "country": "BE" },
#         "customer": { "email": "ada@other.example", "vatId": null },
#         "lines": [
#           { "sku": "WID-001", "qty": 2, "unitCents": 999 },
#           { "sku": "GAD-002", "qty": 1, "unitCents": 1500 }
#         ],
#         "declared": { "netCents": 3498, "vatCents": 508, "grossCents": 4006 }
#       }
#     ]
#   }"""^^rdf:JSON .
#   ("""{
#     "meta~data": { "batch": "2025-12-18" },
#     "orders": [
#       {
#         "orderId": "A100",
#         "shipTo": { "country": "BE" },
#         "customer": { "email": "Ada@Example.ORG", "vatId": null },
#         "lines": [
#           { "sku": "wid-001", "qty": 2, "unitCents": 999 },
#           { "sku": "GAD-002", "qty": 1, "unitCents": 1500 }
#         ],
#         "declared": { "netCents": 3498, "vatCents": 509, "grossCents": 4007 }
#       },
#       {
#         "orderId": "A200",
#         "shipTo": { "country": "US" },
#         "customer": { "email": "bob@example.org", "vatId": null },
#         "lines": [
#           { "sku": "WID-001", "qty": 2, "unitCents": 999 },
#           { "sku": "GAD-002", "qty": 1, "unitCents": 1500 }
#         ],
#         "declared": { "netCents": 3498, "vatCents": 0, "grossCents": 3498 }
#       },
#       {
#         "orderId": "A300",
#         "shipTo": { "country": "NL" },
#         "customer": { "email": "acct@company.nl", "vatId": "NL999999999B01" },
#         "lines": [
#           { "sku": "WID-001", "qty": 2, "unitCents": 999 },
#           { "sku": "GAD-002", "qty": 1, "unitCents": 1500 }
#         ],
#         "declared": { "netCents": 3498, "vatCents": 0, "grossCents": 3498 }
#       },
#       {
#         "orderId": "A301",
#         "shipTo": { "country": "NL" },
#         "customer": { "email": "billing@company.nl", "vatId": "NL999999999B01" },
#         "lines": [
#           { "sku": "WID-001", "qty": 2, "unitCents": 999 },
#           { "sku": "GAD-002", "qty": 1, "unitCents": 1500 }
#         ],
#         "declared": { "netCents": 3498, "vatCents": 0, "grossCents": 3498 }
#       },
#       {
#         "orderId": "A400",
#         "shipTo": { "country": "BE" },
#         "customer": { "email": "ada@other.example", "vatId": null },
#         "lines": [
#           { "sku": "WID-001", "qty": 2, "unitCents": 999 },
#           { "sku": "GAD-002", "qty": 1, "unitCents": 1500 }
#         ],
#         "declared": { "netCents": 3498, "vatCents": 508, "grossCents": 4006 }
#       }
#     ]
#   }"""^^rdf:JSON "/meta~0data/batch") string:jsonPointer "2025-12-18" .
# via the schematic forward rule:
#   {
#     ex:feed ex:json ?J .
#     (?J "/meta~0data/batch") string:jsonPointer "2025-12-18" .
#   } => {
#     ex:checks ex:tildeEscapeWorks true .
#   } .
# with substitution (on rule variables):
#   ?J = """{
#     "meta~data": { "batch": "2025-12-18" },
#     "orders": [
#     {
#     "orderId": "A100",
#     "shipTo": { "country": "BE" },
#     "customer": { "email": "Ada@Example.ORG", "vatId": null },
#     "lines": [
#     { "sku": "wid-001", "qty": 2, "unitCents": 999 },
#     { "sku": "GAD-002", "qty": 1, "unitCents": 1500 }
#     ],
#     "declared": { "netCents": 3498, "vatCents": 509, "grossCents": 4007 }
#     },
#     {
#     "orderId": "A200",
#     "shipTo": { "country": "US" },
#     "customer": { "email": "bob@example.org", "vatId": null },
#     "lines": [
#     { "sku": "WID-001", "qty": 2, "unitCents": 999 },
#     { "sku": "GAD-002", "qty": 1, "unitCents": 1500 }
#     ],
#     "declared": { "netCents": 3498, "vatCents": 0, "grossCents": 3498 }
#     },
#     {
#     "orderId": "A300",
#     "shipTo": { "country": "NL" },
#     "customer": { "email": "acct@company.nl", "vatId": "NL999999999B01" },
#     "lines": [
#     { "sku": "WID-001", "qty": 2, "unitCents": 999 },
#     { "sku": "GAD-002", "qty": 1, "unitCents": 1500 }
#     ],
#     "declared": { "netCents": 3498, "vatCents": 0, "grossCents": 3498 }
#     },
#     {
#     "orderId": "A301",
#     "shipTo": { "country": "NL" },
#     "customer": { "email": "billing@company.nl", "vatId": "NL999999999B01" },
#     "lines": [
#     { "sku": "WID-001", "qty": 2, "unitCents": 999 },
#     { "sku": "GAD-002", "qty": 1, "unitCents": 1500 }
#     ],
#     "declared": { "netCents": 3498, "vatCents": 0, "grossCents": 3498 }
#     },
#     {
#     "orderId": "A400",
#     "shipTo": { "country": "BE" },
#     "customer": { "email": "ada@other.example", "vatId": null },
#     "lines": [
#     { "sku": "WID-001", "qty": 2, "unitCents": 999 },
#     { "sku": "GAD-002", "qty": 1, "unitCents": 1500 }
#     ],
#     "declared": { "netCents": 3498, "vatCents": 508, "grossCents": 4006 }
#     }
#     ]
#   }"""^^rdf:JSON
# Therefore the derived triple above is entailed by the rules and facts.
# ----------------------------------------------------------------------

ex:checks ex:tildeEscapeWorks true .

# ----------------------------------------------------------------------
# Proof for derived triple:
#   <urn:example:order:A400> a ex:Order .
# It holds because the following instance of the rule body is provable:
#   ex:feed ex:json """{
#     "meta~data": { "batch": "2025-12-18" },
#     "orders": [
#       {
#         "orderId": "A100",
#         "shipTo": { "country": "BE" },
#         "customer": { "email": "Ada@Example.ORG", "vatId": null },
#         "lines": [
#           { "sku": "wid-001", "qty": 2, "unitCents": 999 },
#           { "sku": "GAD-002", "qty": 1, "unitCents": 1500 }
#         ],
#         "declared": { "netCents": 3498, "vatCents": 509, "grossCents": 4007 }
#       },
#       {
#         "orderId": "A200",
#         "shipTo": { "country": "US" },
#         "customer": { "email": "bob@example.org", "vatId": null },
#         "lines": [
#           { "sku": "WID-001", "qty": 2, "unitCents": 999 },
#           { "sku": "GAD-002", "qty": 1, "unitCents": 1500 }
#         ],
#         "declared": { "netCents": 3498, "vatCents": 0, "grossCents": 3498 }
#       },
#       {
#         "orderId": "A300",
#         "shipTo": { "country": "NL" },
#         "customer": { "email": "acct@company.nl", "vatId": "NL999999999B01" },
#         "lines": [
#           { "sku": "WID-001", "qty": 2, "unitCents": 999 },
#           { "sku": "GAD-002", "qty": 1, "unitCents": 1500 }
#         ],
#         "declared": { "netCents": 3498, "vatCents": 0, "grossCents": 3498 }
#       },
#       {
#         "orderId": "A301",
#         "shipTo": { "country": "NL" },
#         "customer": { "email": "billing@company.nl", "vatId": "NL999999999B01" },
#         "lines": [
#           { "sku": "WID-001", "qty": 2, "unitCents": 999 },
#           { "sku": "GAD-002", "qty": 1, "unitCents": 1500 }
#         ],
#         "declared": { "netCents": 3498, "vatCents": 0, "grossCents": 3498 }
#       },
#       {
#         "orderId": "A400",
#         "shipTo": { "country": "BE" },
#         "customer": { "email": "ada@other.example", "vatId": null },
#         "lines": [
#           { "sku": "WID-001", "qty": 2, "unitCents": 999 },
#           { "sku": "GAD-002", "qty": 1, "unitCents": 1500 }
#         ],
#         "declared": { "netCents": 3498, "vatCents": 508, "grossCents": 4006 }
#       }
#     ]
#   }"""^^rdf:JSON .
#   ("""{
#     "meta~data": { "batch": "2025-12-18" },
#     "orders": [
#       {
#         "orderId": "A100",
#         "shipTo": { "country": "BE" },
#         "customer": { "email": "Ada@Example.ORG", "vatId": null },
#         "lines": [
#           { "sku": "wid-001", "qty": 2, "unitCents": 999 },
#           { "sku": "GAD-002", "qty": 1, "unitCents": 1500 }
#         ],
#         "declared": { "netCents": 3498, "vatCents": 509, "grossCents": 4007 }
#       },
#       {
#         "orderId": "A200",
#         "shipTo": { "country": "US" },
#         "customer": { "email": "bob@example.org", "vatId": null },
#         "lines": [
#           { "sku": "WID-001", "qty": 2, "unitCents": 999 },
#           { "sku": "GAD-002", "qty": 1, "unitCents": 1500 }
#         ],
#         "declared": { "netCents": 3498, "vatCents": 0, "grossCents": 3498 }
#       },
#       {
#         "orderId": "A300",
#         "shipTo": { "country": "NL" },
#         "customer": { "email": "acct@company.nl", "vatId": "NL999999999B01" },
#         "lines": [
#           { "sku": "WID-001", "qty": 2, "unitCents": 999 },
#           { "sku": "GAD-002", "qty": 1, "unitCents": 1500 }
#         ],
#         "declared": { "netCents": 3498, "vatCents": 0, "grossCents": 3498 }
#       },
#       {
#         "orderId": "A301",
#         "shipTo": { "country": "NL" },
#         "customer": { "email": "billing@company.nl", "vatId": "NL999999999B01" },
#         "lines": [
#           { "sku": "WID-001", "qty": 2, "unitCents": 999 },
#           { "sku": "GAD-002", "qty": 1, "unitCents": 1500 }
#         ],
#         "declared": { "netCents": 3498, "vatCents": 0, "grossCents": 3498 }
#       },
#       {
#         "orderId": "A400",
#         "shipTo": { "country": "BE" },
#         "customer": { "email": "ada@other.example", "vatId": null },
#         "lines": [
#           { "sku": "WID-001", "qty": 2, "unitCents": 999 },
#           { "sku": "GAD-002", "qty": 1, "unitCents": 1500 }
#         ],
#         "declared": { "netCents": 3498, "vatCents": 508, "grossCents": 4006 }
#       }
#     ]
#   }"""^^rdf:JSON "/orders") string:jsonPointer ("""{"orderId":"A100","shipTo":{"country":"BE"},"customer":{"email":"Ada@Example.ORG","vatId":null},"lines":[{"sku":"wid-001","qty":2,"unitCents":999},{"sku":"GAD-002","qty":1,"unitCents":1500}],"declared":{"netCents":3498,"vatCents":509,"grossCents":4007}}"""^^rdf:JSON """{"orderId":"A200","shipTo":{"country":"US"},"customer":{"email":"bob@example.org","vatId":null},"lines":[{"sku":"WID-001","qty":2,"unitCents":999},{"sku":"GAD-002","qty":1,"unitCents":1500}],"declared":{"netCents":3498,"vatCents":0,"grossCents":3498}}"""^^rdf:JSON """{"orderId":"A300","shipTo":{"country":"NL"},"customer":{"email":"acct@company.nl","vatId":"NL999999999B01"},"lines":[{"sku":"WID-001","qty":2,"unitCents":999},{"sku":"GAD-002","qty":1,"unitCents":1500}],"declared":{"netCents":3498,"vatCents":0,"grossCents":3498}}"""^^rdf:JSON """{"orderId":"A301","shipTo":{"country":"NL"},"customer":{"email":"billing@company.nl","vatId":"NL999999999B01"},"lines":[{"sku":"WID-001","qty":2,"unitCents":999},{"sku":"GAD-002","qty":1,"unitCents":1500}],"declared":{"netCents":3498,"vatCents":0,"grossCents":3498}}"""^^rdf:JSON """{"orderId":"A400","shipTo":{"country":"BE"},"customer":{"email":"ada@other.example","vatId":null},"lines":[{"sku":"WID-001","qty":2,"unitCents":999},{"sku":"GAD-002","qty":1,"unitCents":1500}],"declared":{"netCents":3498,"vatCents":508,"grossCents":4006}}"""^^rdf:JSON) .
#   ("""{"orderId":"A100","shipTo":{"country":"BE"},"customer":{"email":"Ada@Example.ORG","vatId":null},"lines":[{"sku":"wid-001","qty":2,"unitCents":999},{"sku":"GAD-002","qty":1,"unitCents":1500}],"declared":{"netCents":3498,"vatCents":509,"grossCents":4007}}"""^^rdf:JSON """{"orderId":"A200","shipTo":{"country":"US"},"customer":{"email":"bob@example.org","vatId":null},"lines":[{"sku":"WID-001","qty":2,"unitCents":999},{"sku":"GAD-002","qty":1,"unitCents":1500}],"declared":{"netCents":3498,"vatCents":0,"grossCents":3498}}"""^^rdf:JSON """{"orderId":"A300","shipTo":{"country":"NL"},"customer":{"email":"acct@company.nl","vatId":"NL999999999B01"},"lines":[{"sku":"WID-001","qty":2,"unitCents":999},{"sku":"GAD-002","qty":1,"unitCents":1500}],"declared":{"netCents":3498,"vatCents":0,"grossCents":3498}}"""^^rdf:JSON """{"orderId":"A301","shipTo":{"country":"NL"},"customer":{"email":"billing@company.nl","vatId":"NL999999999B01"},"lines":[{"sku":"WID-001","qty":2,"unitCents":999},{"sku":"GAD-002","qty":1,"unitCents":1500}],"declared":{"netCents":3498,"vatCents":0,"grossCents":3498}}"""^^rdf:JSON """{"orderId":"A400","shipTo":{"country":"BE"},"customer":{"email":"ada@other.example","vatId":null},"lines":[{"sku":"WID-001","qty":2,"unitCents":999},{"sku":"GAD-002","qty":1,"unitCents":1500}],"declared":{"netCents":3498,"vatCents":508,"grossCents":4006}}"""^^rdf:JSON) list:iterate (4 """{"orderId":"A400","shipTo":{"country":"BE"},"customer":{"email":"ada@other.example","vatId":null},"lines":[{"sku":"WID-001","qty":2,"unitCents":999},{"sku":"GAD-002","qty":1,"unitCents":1500}],"declared":{"netCents":3498,"vatCents":508,"grossCents":4006}}"""^^rdf:JSON) .
#   ("""{"orderId":"A400","shipTo":{"country":"BE"},"customer":{"email":"ada@other.example","vatId":null},"lines":[{"sku":"WID-001","qty":2,"unitCents":999},{"sku":"GAD-002","qty":1,"unitCents":1500}],"declared":{"netCents":3498,"vatCents":508,"grossCents":4006}}"""^^rdf:JSON "/orderId") string:jsonPointer "A400" .
#   ("""{"orderId":"A400","shipTo":{"country":"BE"},"customer":{"email":"ada@other.example","vatId":null},"lines":[{"sku":"WID-001","qty":2,"unitCents":999},{"sku":"GAD-002","qty":1,"unitCents":1500}],"declared":{"netCents":3498,"vatCents":508,"grossCents":4006}}"""^^rdf:JSON "/shipTo/country") string:jsonPointer "BE" .
#   ("""{"orderId":"A400","shipTo":{"country":"BE"},"customer":{"email":"ada@other.example","vatId":null},"lines":[{"sku":"WID-001","qty":2,"unitCents":999},{"sku":"GAD-002","qty":1,"unitCents":1500}],"declared":{"netCents":3498,"vatCents":508,"grossCents":4006}}"""^^rdf:JSON "/customer") string:jsonPointer """{"email":"ada@other.example","vatId":null}"""^^rdf:JSON .
#   ("""{"email":"ada@other.example","vatId":null}"""^^rdf:JSON "/email") string:jsonPointer "ada@other.example" .
#   ("""{"email":"ada@other.example","vatId":null}"""^^rdf:JSON "/vatId") string:jsonPointer "null" .
#   ("""{"orderId":"A400","shipTo":{"country":"BE"},"customer":{"email":"ada@other.example","vatId":null},"lines":[{"sku":"WID-001","qty":2,"unitCents":999},{"sku":"GAD-002","qty":1,"unitCents":1500}],"declared":{"netCents":3498,"vatCents":508,"grossCents":4006}}"""^^rdf:JSON "/declared") string:jsonPointer """{"netCents":3498,"vatCents":508,"grossCents":4006}"""^^rdf:JSON .
#   ("""{"netCents":3498,"vatCents":508,"grossCents":4006}"""^^rdf:JSON "/netCents") string:jsonPointer 3498 .
#   ("""{"netCents":3498,"vatCents":508,"grossCents":4006}"""^^rdf:JSON "/vatCents") string:jsonPointer 508 .
#   ("""{"netCents":3498,"vatCents":508,"grossCents":4006}"""^^rdf:JSON "/grossCents") string:jsonPointer 4006 .
#   ("urn:example:order:%s" "A400") string:format "urn:example:order:A400" .
#   <urn:example:order:A400> log:uri "urn:example:order:A400" .
# via the schematic forward rule:
#   {
#     ex:feed ex:json ?J .
#     (?J "/orders") string:jsonPointer ?Orders .
#     ?Orders list:iterate (?OrderIndex ?OrderJson) .
#     (?OrderJson "/orderId") string:jsonPointer ?OrderId .
#     (?OrderJson "/shipTo/country") string:jsonPointer ?Country .
#     (?OrderJson "/customer") string:jsonPointer ?CustJson .
#     (?CustJson "/email") string:jsonPointer ?Email .
#     (?CustJson "/vatId") string:jsonPointer ?VatIdRaw .
#     (?OrderJson "/declared") string:jsonPointer ?Decl .
#     (?Decl "/netCents") string:jsonPointer ?NetD .
#     (?Decl "/vatCents") string:jsonPointer ?VatD .
#     (?Decl "/grossCents") string:jsonPointer ?GrossD .
#     ("urn:example:order:%s" ?OrderId) string:format ?OrderUriStr .
#     ?Order log:uri ?OrderUriStr .
#   } => {
#     ?Order a ex:Order .
#     ?Order ex:orderId ?OrderId .
#     ?Order ex:orderIndex ?OrderIndex .
#     ?Order ex:shipCountry ?Country .
#     ?Order ex:email ?Email .
#     ?Order ex:vatIdRaw ?VatIdRaw .
#     ?Order ex:declaredNetCents ?NetD .
#     ?Order ex:declaredVatCents ?VatD .
#     ?Order ex:declaredGrossCents ?GrossD .
#   } .
# with substitution (on rule variables):
#   ?Country = "BE"
#   ?CustJson = """{"email":"ada@other.example","vatId":null}"""^^rdf:JSON
#   ?Decl = """{"netCents":3498,"vatCents":508,"grossCents":4006}"""^^rdf:JSON
#   ?Email = "ada@other.example"
#   ?GrossD = 4006
#   ?J = """{
#     "meta~data": { "batch": "2025-12-18" },
#     "orders": [
#     {
#     "orderId": "A100",
#     "shipTo": { "country": "BE" },
#     "customer": { "email": "Ada@Example.ORG", "vatId": null },
#     "lines": [
#     { "sku": "wid-001", "qty": 2, "unitCents": 999 },
#     { "sku": "GAD-002", "qty": 1, "unitCents": 1500 }
#     ],
#     "declared": { "netCents": 3498, "vatCents": 509, "grossCents": 4007 }
#     },
#     {
#     "orderId": "A200",
#     "shipTo": { "country": "US" },
#     "customer": { "email": "bob@example.org", "vatId": null },
#     "lines": [
#     { "sku": "WID-001", "qty": 2, "unitCents": 999 },
#     { "sku": "GAD-002", "qty": 1, "unitCents": 1500 }
#     ],
#     "declared": { "netCents": 3498, "vatCents": 0, "grossCents": 3498 }
#     },
#     {
#     "orderId": "A300",
#     "shipTo": { "country": "NL" },
#     "customer": { "email": "acct@company.nl", "vatId": "NL999999999B01" },
#     "lines": [
#     { "sku": "WID-001", "qty": 2, "unitCents": 999 },
#     { "sku": "GAD-002", "qty": 1, "unitCents": 1500 }
#     ],
#     "declared": { "netCents": 3498, "vatCents": 0, "grossCents": 3498 }
#     },
#     {
#     "orderId": "A301",
#     "shipTo": { "country": "NL" },
#     "customer": { "email": "billing@company.nl", "vatId": "NL999999999B01" },
#     "lines": [
#     { "sku": "WID-001", "qty": 2, "unitCents": 999 },
#     { "sku": "GAD-002", "qty": 1, "unitCents": 1500 }
#     ],
#     "declared": { "netCents": 3498, "vatCents": 0, "grossCents": 3498 }
#     },
#     {
#     "orderId": "A400",
#     "shipTo": { "country": "BE" },
#     "customer": { "email": "ada@other.example", "vatId": null },
#     "lines": [
#     { "sku": "WID-001", "qty": 2, "unitCents": 999 },
#     { "sku": "GAD-002", "qty": 1, "unitCents": 1500 }
#     ],
#     "declared": { "netCents": 3498, "vatCents": 508, "grossCents": 4006 }
#     }
#     ]
#   }"""^^rdf:JSON
#   ?NetD = 3498
#   ?Order = <urn:example:order:A400>
#   ?OrderId = "A400"
#   ?OrderIndex = 4
#   ?OrderJson = """{"orderId":"A400","shipTo":{"country":"BE"},"customer":{"email":"ada@other.example","vatId":null},"lines":[{"sku":"WID-001","qty":2,"unitCents":999},{"sku":"GAD-002","qty":1,"unitCents":1500}],"declared":{"netCents":3498,"vatCents":508,"grossCents":4006}}"""^^rdf:JSON
#   ?OrderUriStr = "urn:example:order:A400"
#   ?Orders = ("""{"orderId":"A100","shipTo":{"country":"BE"},"customer":{"email":"Ada@Example.ORG","vatId":null},"lines":[{"sku":"wid-001","qty":2,"unitCents":999},{"sku":"GAD-002","qty":1,"unitCents":1500}],"declared":{"netCents":3498,"vatCents":509,"grossCents":4007}}"""^^rdf:JSON """{"orderId":"A200","shipTo":{"country":"US"},"customer":{"email":"bob@example.org","vatId":null},"lines":[{"sku":"WID-001","qty":2,"unitCents":999},{"sku":"GAD-002","qty":1,"unitCents":1500}],"declared":{"netCents":3498,"vatCents":0,"grossCents":3498}}"""^^rdf:JSON """{"orderId":"A300","shipTo":{"country":"NL"},"customer":{"email":"acct@company.nl","vatId":"NL999999999B01"},"lines":[{"sku":"WID-001","qty":2,"unitCents":999},{"sku":"GAD-002","qty":1,"unitCents":1500}],"declared":{"netCents":3498,"vatCents":0,"grossCents":3498}}"""^^rdf:JSON """{"orderId":"A301","shipTo":{"country":"NL"},"customer":{"email":"billing@company.nl","vatId":"NL999999999B01"},"lines":[{"sku":"WID-001","qty":2,"unitCents":999},{"sku":"GAD-002","qty":1,"unitCents":1500}],"declared":{"netCents":3498,"vatCents":0,"grossCents":3498}}"""^^rdf:JSON """{"orderId":"A400","shipTo":{"country":"BE"},"customer":{"email":"ada@other.example","vatId":null},"lines":[{"sku":"WID-001","qty":2,"unitCents":999},{"sku":"GAD-002","qty":1,"unitCents":1500}],"declared":{"netCents":3498,"vatCents":508,"grossCents":4006}}"""^^rdf:JSON)
#   ?VatD = 508
#   ?VatIdRaw = "null"
# Therefore the derived triple above is entailed by the rules and facts.
# ----------------------------------------------------------------------

<urn:example:order:A400> a ex:Order .

# ----------------------------------------------------------------------
# Proof for derived triple:
#   <urn:example:order:A400> ex:orderId "A400" .
# It holds because the following instance of the rule body is provable:
#   ex:feed ex:json """{
#     "meta~data": { "batch": "2025-12-18" },
#     "orders": [
#       {
#         "orderId": "A100",
#         "shipTo": { "country": "BE" },
#         "customer": { "email": "Ada@Example.ORG", "vatId": null },
#         "lines": [
#           { "sku": "wid-001", "qty": 2, "unitCents": 999 },
#           { "sku": "GAD-002", "qty": 1, "unitCents": 1500 }
#         ],
#         "declared": { "netCents": 3498, "vatCents": 509, "grossCents": 4007 }
#       },
#       {
#         "orderId": "A200",
#         "shipTo": { "country": "US" },
#         "customer": { "email": "bob@example.org", "vatId": null },
#         "lines": [
#           { "sku": "WID-001", "qty": 2, "unitCents": 999 },
#           { "sku": "GAD-002", "qty": 1, "unitCents": 1500 }
#         ],
#         "declared": { "netCents": 3498, "vatCents": 0, "grossCents": 3498 }
#       },
#       {
#         "orderId": "A300",
#         "shipTo": { "country": "NL" },
#         "customer": { "email": "acct@company.nl", "vatId": "NL999999999B01" },
#         "lines": [
#           { "sku": "WID-001", "qty": 2, "unitCents": 999 },
#           { "sku": "GAD-002", "qty": 1, "unitCents": 1500 }
#         ],
#         "declared": { "netCents": 3498, "vatCents": 0, "grossCents": 3498 }
#       },
#       {
#         "orderId": "A301",
#         "shipTo": { "country": "NL" },
#         "customer": { "email": "billing@company.nl", "vatId": "NL999999999B01" },
#         "lines": [
#           { "sku": "WID-001", "qty": 2, "unitCents": 999 },
#           { "sku": "GAD-002", "qty": 1, "unitCents": 1500 }
#         ],
#         "declared": { "netCents": 3498, "vatCents": 0, "grossCents": 3498 }
#       },
#       {
#         "orderId": "A400",
#         "shipTo": { "country": "BE" },
#         "customer": { "email": "ada@other.example", "vatId": null },
#         "lines": [
#           { "sku": "WID-001", "qty": 2, "unitCents": 999 },
#           { "sku": "GAD-002", "qty": 1, "unitCents": 1500 }
#         ],
#         "declared": { "netCents": 3498, "vatCents": 508, "grossCents": 4006 }
#       }
#     ]
#   }"""^^rdf:JSON .
#   ("""{
#     "meta~data": { "batch": "2025-12-18" },
#     "orders": [
#       {
#         "orderId": "A100",
#         "shipTo": { "country": "BE" },
#         "customer": { "email": "Ada@Example.ORG", "vatId": null },
#         "lines": [
#           { "sku": "wid-001", "qty": 2, "unitCents": 999 },
#           { "sku": "GAD-002", "qty": 1, "unitCents": 1500 }
#         ],
#         "declared": { "netCents": 3498, "vatCents": 509, "grossCents": 4007 }
#       },
#       {
#         "orderId": "A200",
#         "shipTo": { "country": "US" },
#         "customer": { "email": "bob@example.org", "vatId": null },
#         "lines": [
#           { "sku": "WID-001", "qty": 2, "unitCents": 999 },
#           { "sku": "GAD-002", "qty": 1, "unitCents": 1500 }
#         ],
#         "declared": { "netCents": 3498, "vatCents": 0, "grossCents": 3498 }
#       },
#       {
#         "orderId": "A300",
#         "shipTo": { "country": "NL" },
#         "customer": { "email": "acct@company.nl", "vatId": "NL999999999B01" },
#         "lines": [
#           { "sku": "WID-001", "qty": 2, "unitCents": 999 },
#           { "sku": "GAD-002", "qty": 1, "unitCents": 1500 }
#         ],
#         "declared": { "netCents": 3498, "vatCents": 0, "grossCents": 3498 }
#       },
#       {
#         "orderId": "A301",
#         "shipTo": { "country": "NL" },
#         "customer": { "email": "billing@company.nl", "vatId": "NL999999999B01" },
#         "lines": [
#           { "sku": "WID-001", "qty": 2, "unitCents": 999 },
#           { "sku": "GAD-002", "qty": 1, "unitCents": 1500 }
#         ],
#         "declared": { "netCents": 3498, "vatCents": 0, "grossCents": 3498 }
#       },
#       {
#         "orderId": "A400",
#         "shipTo": { "country": "BE" },
#         "customer": { "email": "ada@other.example", "vatId": null },
#         "lines": [
#           { "sku": "WID-001", "qty": 2, "unitCents": 999 },
#           { "sku": "GAD-002", "qty": 1, "unitCents": 1500 }
#         ],
#         "declared": { "netCents": 3498, "vatCents": 508, "grossCents": 4006 }
#       }
#     ]
#   }"""^^rdf:JSON "/orders") string:jsonPointer ("""{"orderId":"A100","shipTo":{"country":"BE"},"customer":{"email":"Ada@Example.ORG","vatId":null},"lines":[{"sku":"wid-001","qty":2,"unitCents":999},{"sku":"GAD-002","qty":1,"unitCents":1500}],"declared":{"netCents":3498,"vatCents":509,"grossCents":4007}}"""^^rdf:JSON """{"orderId":"A200","shipTo":{"country":"US"},"customer":{"email":"bob@example.org","vatId":null},"lines":[{"sku":"WID-001","qty":2,"unitCents":999},{"sku":"GAD-002","qty":1,"unitCents":1500}],"declared":{"netCents":3498,"vatCents":0,"grossCents":3498}}"""^^rdf:JSON """{"orderId":"A300","shipTo":{"country":"NL"},"customer":{"email":"acct@company.nl","vatId":"NL999999999B01"},"lines":[{"sku":"WID-001","qty":2,"unitCents":999},{"sku":"GAD-002","qty":1,"unitCents":1500}],"declared":{"netCents":3498,"vatCents":0,"grossCents":3498}}"""^^rdf:JSON """{"orderId":"A301","shipTo":{"country":"NL"},"customer":{"email":"billing@company.nl","vatId":"NL999999999B01"},"lines":[{"sku":"WID-001","qty":2,"unitCents":999},{"sku":"GAD-002","qty":1,"unitCents":1500}],"declared":{"netCents":3498,"vatCents":0,"grossCents":3498}}"""^^rdf:JSON """{"orderId":"A400","shipTo":{"country":"BE"},"customer":{"email":"ada@other.example","vatId":null},"lines":[{"sku":"WID-001","qty":2,"unitCents":999},{"sku":"GAD-002","qty":1,"unitCents":1500}],"declared":{"netCents":3498,"vatCents":508,"grossCents":4006}}"""^^rdf:JSON) .
#   ("""{"orderId":"A100","shipTo":{"country":"BE"},"customer":{"email":"Ada@Example.ORG","vatId":null},"lines":[{"sku":"wid-001","qty":2,"unitCents":999},{"sku":"GAD-002","qty":1,"unitCents":1500}],"declared":{"netCents":3498,"vatCents":509,"grossCents":4007}}"""^^rdf:JSON """{"orderId":"A200","shipTo":{"country":"US"},"customer":{"email":"bob@example.org","vatId":null},"lines":[{"sku":"WID-001","qty":2,"unitCents":999},{"sku":"GAD-002","qty":1,"unitCents":1500}],"declared":{"netCents":3498,"vatCents":0,"grossCents":3498}}"""^^rdf:JSON """{"orderId":"A300","shipTo":{"country":"NL"},"customer":{"email":"acct@company.nl","vatId":"NL999999999B01"},"lines":[{"sku":"WID-001","qty":2,"unitCents":999},{"sku":"GAD-002","qty":1,"unitCents":1500}],"declared":{"netCents":3498,"vatCents":0,"grossCents":3498}}"""^^rdf:JSON """{"orderId":"A301","shipTo":{"country":"NL"},"customer":{"email":"billing@company.nl","vatId":"NL999999999B01"},"lines":[{"sku":"WID-001","qty":2,"unitCents":999},{"sku":"GAD-002","qty":1,"unitCents":1500}],"declared":{"netCents":3498,"vatCents":0,"grossCents":3498}}"""^^rdf:JSON """{"orderId":"A400","shipTo":{"country":"BE"},"customer":{"email":"ada@other.example","vatId":null},"lines":[{"sku":"WID-001","qty":2,"unitCents":999},{"sku":"GAD-002","qty":1,"unitCents":1500}],"declared":{"netCents":3498,"vatCents":508,"grossCents":4006}}"""^^rdf:JSON) list:iterate (4 """{"orderId":"A400","shipTo":{"country":"BE"},"customer":{"email":"ada@other.example","vatId":null},"lines":[{"sku":"WID-001","qty":2,"unitCents":999},{"sku":"GAD-002","qty":1,"unitCents":1500}],"declared":{"netCents":3498,"vatCents":508,"grossCents":4006}}"""^^rdf:JSON) .
#   ("""{"orderId":"A400","shipTo":{"country":"BE"},"customer":{"email":"ada@other.example","vatId":null},"lines":[{"sku":"WID-001","qty":2,"unitCents":999},{"sku":"GAD-002","qty":1,"unitCents":1500}],"declared":{"netCents":3498,"vatCents":508,"grossCents":4006}}"""^^rdf:JSON "/orderId") string:jsonPointer "A400" .
#   ("""{"orderId":"A400","shipTo":{"country":"BE"},"customer":{"email":"ada@other.example","vatId":null},"lines":[{"sku":"WID-001","qty":2,"unitCents":999},{"sku":"GAD-002","qty":1,"unitCents":1500}],"declared":{"netCents":3498,"vatCents":508,"grossCents":4006}}"""^^rdf:JSON "/shipTo/country") string:jsonPointer "BE" .
#   ("""{"orderId":"A400","shipTo":{"country":"BE"},"customer":{"email":"ada@other.example","vatId":null},"lines":[{"sku":"WID-001","qty":2,"unitCents":999},{"sku":"GAD-002","qty":1,"unitCents":1500}],"declared":{"netCents":3498,"vatCents":508,"grossCents":4006}}"""^^rdf:JSON "/customer") string:jsonPointer """{"email":"ada@other.example","vatId":null}"""^^rdf:JSON .
#   ("""{"email":"ada@other.example","vatId":null}"""^^rdf:JSON "/email") string:jsonPointer "ada@other.example" .
#   ("""{"email":"ada@other.example","vatId":null}"""^^rdf:JSON "/vatId") string:jsonPointer "null" .
#   ("""{"orderId":"A400","shipTo":{"country":"BE"},"customer":{"email":"ada@other.example","vatId":null},"lines":[{"sku":"WID-001","qty":2,"unitCents":999},{"sku":"GAD-002","qty":1,"unitCents":1500}],"declared":{"netCents":3498,"vatCents":508,"grossCents":4006}}"""^^rdf:JSON "/declared") string:jsonPointer """{"netCents":3498,"vatCents":508,"grossCents":4006}"""^^rdf:JSON .
#   ("""{"netCents":3498,"vatCents":508,"grossCents":4006}"""^^rdf:JSON "/netCents") string:jsonPointer 3498 .
#   ("""{"netCents":3498,"vatCents":508,"grossCents":4006}"""^^rdf:JSON "/vatCents") string:jsonPointer 508 .
#   ("""{"netCents":3498,"vatCents":508,"grossCents":4006}"""^^rdf:JSON "/grossCents") string:jsonPointer 4006 .
#   ("urn:example:order:%s" "A400") string:format "urn:example:order:A400" .
#   <urn:example:order:A400> log:uri "urn:example:order:A400" .
# via the schematic forward rule:
#   {
#     ex:feed ex:json ?J .
#     (?J "/orders") string:jsonPointer ?Orders .
#     ?Orders list:iterate (?OrderIndex ?OrderJson) .
#     (?OrderJson "/orderId") string:jsonPointer ?OrderId .
#     (?OrderJson "/shipTo/country") string:jsonPointer ?Country .
#     (?OrderJson "/customer") string:jsonPointer ?CustJson .
#     (?CustJson "/email") string:jsonPointer ?Email .
#     (?CustJson "/vatId") string:jsonPointer ?VatIdRaw .
#     (?OrderJson "/declared") string:jsonPointer ?Decl .
#     (?Decl "/netCents") string:jsonPointer ?NetD .
#     (?Decl "/vatCents") string:jsonPointer ?VatD .
#     (?Decl "/grossCents") string:jsonPointer ?GrossD .
#     ("urn:example:order:%s" ?OrderId) string:format ?OrderUriStr .
#     ?Order log:uri ?OrderUriStr .
#   } => {
#     ?Order a ex:Order .
#     ?Order ex:orderId ?OrderId .
#     ?Order ex:orderIndex ?OrderIndex .
#     ?Order ex:shipCountry ?Country .
#     ?Order ex:email ?Email .
#     ?Order ex:vatIdRaw ?VatIdRaw .
#     ?Order ex:declaredNetCents ?NetD .
#     ?Order ex:declaredVatCents ?VatD .
#     ?Order ex:declaredGrossCents ?GrossD .
#   } .
# with substitution (on rule variables):
#   ?Country = "BE"
#   ?CustJson = """{"email":"ada@other.example","vatId":null}"""^^rdf:JSON
#   ?Decl = """{"netCents":3498,"vatCents":508,"grossCents":4006}"""^^rdf:JSON
#   ?Email = "ada@other.example"
#   ?GrossD = 4006
#   ?J = """{
#     "meta~data": { "batch": "2025-12-18" },
#     "orders": [
#     {
#     "orderId": "A100",
#     "shipTo": { "country": "BE" },
#     "customer": { "email": "Ada@Example.ORG", "vatId": null },
#     "lines": [
#     { "sku": "wid-001", "qty": 2, "unitCents": 999 },
#     { "sku": "GAD-002", "qty": 1, "unitCents": 1500 }
#     ],
#     "declared": { "netCents": 3498, "vatCents": 509, "grossCents": 4007 }
#     },
#     {
#     "orderId": "A200",
#     "shipTo": { "country": "US" },
#     "customer": { "email": "bob@example.org", "vatId": null },
#     "lines": [
#     { "sku": "WID-001", "qty": 2, "unitCents": 999 },
#     { "sku": "GAD-002", "qty": 1, "unitCents": 1500 }
#     ],
#     "declared": { "netCents": 3498, "vatCents": 0, "grossCents": 3498 }
#     },
#     {
#     "orderId": "A300",
#     "shipTo": { "country": "NL" },
#     "customer": { "email": "acct@company.nl", "vatId": "NL999999999B01" },
#     "lines": [
#     { "sku": "WID-001", "qty": 2, "unitCents": 999 },
#     { "sku": "GAD-002", "qty": 1, "unitCents": 1500 }
#     ],
#     "declared": { "netCents": 3498, "vatCents": 0, "grossCents": 3498 }
#     },
#     {
#     "orderId": "A301",
#     "shipTo": { "country": "NL" },
#     "customer": { "email": "billing@company.nl", "vatId": "NL999999999B01" },
#     "lines": [
#     { "sku": "WID-001", "qty": 2, "unitCents": 999 },
#     { "sku": "GAD-002", "qty": 1, "unitCents": 1500 }
#     ],
#     "declared": { "netCents": 3498, "vatCents": 0, "grossCents": 3498 }
#     },
#     {
#     "orderId": "A400",
#     "shipTo": { "country": "BE" },
#     "customer": { "email": "ada@other.example", "vatId": null },
#     "lines": [
#     { "sku": "WID-001", "qty": 2, "unitCents": 999 },
#     { "sku": "GAD-002", "qty": 1, "unitCents": 1500 }
#     ],
#     "declared": { "netCents": 3498, "vatCents": 508, "grossCents": 4006 }
#     }
#     ]
#   }"""^^rdf:JSON
#   ?NetD = 3498
#   ?Order = <urn:example:order:A400>
#   ?OrderId = "A400"
#   ?OrderIndex = 4
#   ?OrderJson = """{"orderId":"A400","shipTo":{"country":"BE"},"customer":{"email":"ada@other.example","vatId":null},"lines":[{"sku":"WID-001","qty":2,"unitCents":999},{"sku":"GAD-002","qty":1,"unitCents":1500}],"declared":{"netCents":3498,"vatCents":508,"grossCents":4006}}"""^^rdf:JSON
#   ?OrderUriStr = "urn:example:order:A400"
#   ?Orders = ("""{"orderId":"A100","shipTo":{"country":"BE"},"customer":{"email":"Ada@Example.ORG","vatId":null},"lines":[{"sku":"wid-001","qty":2,"unitCents":999},{"sku":"GAD-002","qty":1,"unitCents":1500}],"declared":{"netCents":3498,"vatCents":509,"grossCents":4007}}"""^^rdf:JSON """{"orderId":"A200","shipTo":{"country":"US"},"customer":{"email":"bob@example.org","vatId":null},"lines":[{"sku":"WID-001","qty":2,"unitCents":999},{"sku":"GAD-002","qty":1,"unitCents":1500}],"declared":{"netCents":3498,"vatCents":0,"grossCents":3498}}"""^^rdf:JSON """{"orderId":"A300","shipTo":{"country":"NL"},"customer":{"email":"acct@company.nl","vatId":"NL999999999B01"},"lines":[{"sku":"WID-001","qty":2,"unitCents":999},{"sku":"GAD-002","qty":1,"unitCents":1500}],"declared":{"netCents":3498,"vatCents":0,"grossCents":3498}}"""^^rdf:JSON """{"orderId":"A301","shipTo":{"country":"NL"},"customer":{"email":"billing@company.nl","vatId":"NL999999999B01"},"lines":[{"sku":"WID-001","qty":2,"unitCents":999},{"sku":"GAD-002","qty":1,"unitCents":1500}],"declared":{"netCents":3498,"vatCents":0,"grossCents":3498}}"""^^rdf:JSON """{"orderId":"A400","shipTo":{"country":"BE"},"customer":{"email":"ada@other.example","vatId":null},"lines":[{"sku":"WID-001","qty":2,"unitCents":999},{"sku":"GAD-002","qty":1,"unitCents":1500}],"declared":{"netCents":3498,"vatCents":508,"grossCents":4006}}"""^^rdf:JSON)
#   ?VatD = 508
#   ?VatIdRaw = "null"
# Therefore the derived triple above is entailed by the rules and facts.
# ----------------------------------------------------------------------

<urn:example:order:A400> ex:orderId "A400" .

# ----------------------------------------------------------------------
# Proof for derived triple:
#   <urn:example:order:A400> ex:orderIndex 4 .
# It holds because the following instance of the rule body is provable:
#   ex:feed ex:json """{
#     "meta~data": { "batch": "2025-12-18" },
#     "orders": [
#       {
#         "orderId": "A100",
#         "shipTo": { "country": "BE" },
#         "customer": { "email": "Ada@Example.ORG", "vatId": null },
#         "lines": [
#           { "sku": "wid-001", "qty": 2, "unitCents": 999 },
#           { "sku": "GAD-002", "qty": 1, "unitCents": 1500 }
#         ],
#         "declared": { "netCents": 3498, "vatCents": 509, "grossCents": 4007 }
#       },
#       {
#         "orderId": "A200",
#         "shipTo": { "country": "US" },
#         "customer": { "email": "bob@example.org", "vatId": null },
#         "lines": [
#           { "sku": "WID-001", "qty": 2, "unitCents": 999 },
#           { "sku": "GAD-002", "qty": 1, "unitCents": 1500 }
#         ],
#         "declared": { "netCents": 3498, "vatCents": 0, "grossCents": 3498 }
#       },
#       {
#         "orderId": "A300",
#         "shipTo": { "country": "NL" },
#         "customer": { "email": "acct@company.nl", "vatId": "NL999999999B01" },
#         "lines": [
#           { "sku": "WID-001", "qty": 2, "unitCents": 999 },
#           { "sku": "GAD-002", "qty": 1, "unitCents": 1500 }
#         ],
#         "declared": { "netCents": 3498, "vatCents": 0, "grossCents": 3498 }
#       },
#       {
#         "orderId": "A301",
#         "shipTo": { "country": "NL" },
#         "customer": { "email": "billing@company.nl", "vatId": "NL999999999B01" },
#         "lines": [
#           { "sku": "WID-001", "qty": 2, "unitCents": 999 },
#           { "sku": "GAD-002", "qty": 1, "unitCents": 1500 }
#         ],
#         "declared": { "netCents": 3498, "vatCents": 0, "grossCents": 3498 }
#       },
#       {
#         "orderId": "A400",
#         "shipTo": { "country": "BE" },
#         "customer": { "email": "ada@other.example", "vatId": null },
#         "lines": [
#           { "sku": "WID-001", "qty": 2, "unitCents": 999 },
#           { "sku": "GAD-002", "qty": 1, "unitCents": 1500 }
#         ],
#         "declared": { "netCents": 3498, "vatCents": 508, "grossCents": 4006 }
#       }
#     ]
#   }"""^^rdf:JSON .
#   ("""{
#     "meta~data": { "batch": "2025-12-18" },
#     "orders": [
#       {
#         "orderId": "A100",
#         "shipTo": { "country": "BE" },
#         "customer": { "email": "Ada@Example.ORG", "vatId": null },
#         "lines": [
#           { "sku": "wid-001", "qty": 2, "unitCents": 999 },
#           { "sku": "GAD-002", "qty": 1, "unitCents": 1500 }
#         ],
#         "declared": { "netCents": 3498, "vatCents": 509, "grossCents": 4007 }
#       },
#       {
#         "orderId": "A200",
#         "shipTo": { "country": "US" },
#         "customer": { "email": "bob@example.org", "vatId": null },
#         "lines": [
#           { "sku": "WID-001", "qty": 2, "unitCents": 999 },
#           { "sku": "GAD-002", "qty": 1, "unitCents": 1500 }
#         ],
#         "declared": { "netCents": 3498, "vatCents": 0, "grossCents": 3498 }
#       },
#       {
#         "orderId": "A300",
#         "shipTo": { "country": "NL" },
#         "customer": { "email": "acct@company.nl", "vatId": "NL999999999B01" },
#         "lines": [
#           { "sku": "WID-001", "qty": 2, "unitCents": 999 },
#           { "sku": "GAD-002", "qty": 1, "unitCents": 1500 }
#         ],
#         "declared": { "netCents": 3498, "vatCents": 0, "grossCents": 3498 }
#       },
#       {
#         "orderId": "A301",
#         "shipTo": { "country": "NL" },
#         "customer": { "email": "billing@company.nl", "vatId": "NL999999999B01" },
#         "lines": [
#           { "sku": "WID-001", "qty": 2, "unitCents": 999 },
#           { "sku": "GAD-002", "qty": 1, "unitCents": 1500 }
#         ],
#         "declared": { "netCents": 3498, "vatCents": 0, "grossCents": 3498 }
#       },
#       {
#         "orderId": "A400",
#         "shipTo": { "country": "BE" },
#         "customer": { "email": "ada@other.example", "vatId": null },
#         "lines": [
#           { "sku": "WID-001", "qty": 2, "unitCents": 999 },
#           { "sku": "GAD-002", "qty": 1, "unitCents": 1500 }
#         ],
#         "declared": { "netCents": 3498, "vatCents": 508, "grossCents": 4006 }
#       }
#     ]
#   }"""^^rdf:JSON "/orders") string:jsonPointer ("""{"orderId":"A100","shipTo":{"country":"BE"},"customer":{"email":"Ada@Example.ORG","vatId":null},"lines":[{"sku":"wid-001","qty":2,"unitCents":999},{"sku":"GAD-002","qty":1,"unitCents":1500}],"declared":{"netCents":3498,"vatCents":509,"grossCents":4007}}"""^^rdf:JSON """{"orderId":"A200","shipTo":{"country":"US"},"customer":{"email":"bob@example.org","vatId":null},"lines":[{"sku":"WID-001","qty":2,"unitCents":999},{"sku":"GAD-002","qty":1,"unitCents":1500}],"declared":{"netCents":3498,"vatCents":0,"grossCents":3498}}"""^^rdf:JSON """{"orderId":"A300","shipTo":{"country":"NL"},"customer":{"email":"acct@company.nl","vatId":"NL999999999B01"},"lines":[{"sku":"WID-001","qty":2,"unitCents":999},{"sku":"GAD-002","qty":1,"unitCents":1500}],"declared":{"netCents":3498,"vatCents":0,"grossCents":3498}}"""^^rdf:JSON """{"orderId":"A301","shipTo":{"country":"NL"},"customer":{"email":"billing@company.nl","vatId":"NL999999999B01"},"lines":[{"sku":"WID-001","qty":2,"unitCents":999},{"sku":"GAD-002","qty":1,"unitCents":1500}],"declared":{"netCents":3498,"vatCents":0,"grossCents":3498}}"""^^rdf:JSON """{"orderId":"A400","shipTo":{"country":"BE"},"customer":{"email":"ada@other.example","vatId":null},"lines":[{"sku":"WID-001","qty":2,"unitCents":999},{"sku":"GAD-002","qty":1,"unitCents":1500}],"declared":{"netCents":3498,"vatCents":508,"grossCents":4006}}"""^^rdf:JSON) .
#   ("""{"orderId":"A100","shipTo":{"country":"BE"},"customer":{"email":"Ada@Example.ORG","vatId":null},"lines":[{"sku":"wid-001","qty":2,"unitCents":999},{"sku":"GAD-002","qty":1,"unitCents":1500}],"declared":{"netCents":3498,"vatCents":509,"grossCents":4007}}"""^^rdf:JSON """{"orderId":"A200","shipTo":{"country":"US"},"customer":{"email":"bob@example.org","vatId":null},"lines":[{"sku":"WID-001","qty":2,"unitCents":999},{"sku":"GAD-002","qty":1,"unitCents":1500}],"declared":{"netCents":3498,"vatCents":0,"grossCents":3498}}"""^^rdf:JSON """{"orderId":"A300","shipTo":{"country":"NL"},"customer":{"email":"acct@company.nl","vatId":"NL999999999B01"},"lines":[{"sku":"WID-001","qty":2,"unitCents":999},{"sku":"GAD-002","qty":1,"unitCents":1500}],"declared":{"netCents":3498,"vatCents":0,"grossCents":3498}}"""^^rdf:JSON """{"orderId":"A301","shipTo":{"country":"NL"},"customer":{"email":"billing@company.nl","vatId":"NL999999999B01"},"lines":[{"sku":"WID-001","qty":2,"unitCents":999},{"sku":"GAD-002","qty":1,"unitCents":1500}],"declared":{"netCents":3498,"vatCents":0,"grossCents":3498}}"""^^rdf:JSON """{"orderId":"A400","shipTo":{"country":"BE"},"customer":{"email":"ada@other.example","vatId":null},"lines":[{"sku":"WID-001","qty":2,"unitCents":999},{"sku":"GAD-002","qty":1,"unitCents":1500}],"declared":{"netCents":3498,"vatCents":508,"grossCents":4006}}"""^^rdf:JSON) list:iterate (4 """{"orderId":"A400","shipTo":{"country":"BE"},"customer":{"email":"ada@other.example","vatId":null},"lines":[{"sku":"WID-001","qty":2,"unitCents":999},{"sku":"GAD-002","qty":1,"unitCents":1500}],"declared":{"netCents":3498,"vatCents":508,"grossCents":4006}}"""^^rdf:JSON) .
#   ("""{"orderId":"A400","shipTo":{"country":"BE"},"customer":{"email":"ada@other.example","vatId":null},"lines":[{"sku":"WID-001","qty":2,"unitCents":999},{"sku":"GAD-002","qty":1,"unitCents":1500}],"declared":{"netCents":3498,"vatCents":508,"grossCents":4006}}"""^^rdf:JSON "/orderId") string:jsonPointer "A400" .
#   ("""{"orderId":"A400","shipTo":{"country":"BE"},"customer":{"email":"ada@other.example","vatId":null},"lines":[{"sku":"WID-001","qty":2,"unitCents":999},{"sku":"GAD-002","qty":1,"unitCents":1500}],"declared":{"netCents":3498,"vatCents":508,"grossCents":4006}}"""^^rdf:JSON "/shipTo/country") string:jsonPointer "BE" .
#   ("""{"orderId":"A400","shipTo":{"country":"BE"},"customer":{"email":"ada@other.example","vatId":null},"lines":[{"sku":"WID-001","qty":2,"unitCents":999},{"sku":"GAD-002","qty":1,"unitCents":1500}],"declared":{"netCents":3498,"vatCents":508,"grossCents":4006}}"""^^rdf:JSON "/customer") string:jsonPointer """{"email":"ada@other.example","vatId":null}"""^^rdf:JSON .
#   ("""{"email":"ada@other.example","vatId":null}"""^^rdf:JSON "/email") string:jsonPointer "ada@other.example" .
#   ("""{"email":"ada@other.example","vatId":null}"""^^rdf:JSON "/vatId") string:jsonPointer "null" .
#   ("""{"orderId":"A400","shipTo":{"country":"BE"},"customer":{"email":"ada@other.example","vatId":null},"lines":[{"sku":"WID-001","qty":2,"unitCents":999},{"sku":"GAD-002","qty":1,"unitCents":1500}],"declared":{"netCents":3498,"vatCents":508,"grossCents":4006}}"""^^rdf:JSON "/declared") string:jsonPointer """{"netCents":3498,"vatCents":508,"grossCents":4006}"""^^rdf:JSON .
#   ("""{"netCents":3498,"vatCents":508,"grossCents":4006}"""^^rdf:JSON "/netCents") string:jsonPointer 3498 .
#   ("""{"netCents":3498,"vatCents":508,"grossCents":4006}"""^^rdf:JSON "/vatCents") string:jsonPointer 508 .
#   ("""{"netCents":3498,"vatCents":508,"grossCents":4006}"""^^rdf:JSON "/grossCents") string:jsonPointer 4006 .
#   ("urn:example:order:%s" "A400") string:format "urn:example:order:A400" .
#   <urn:example:order:A400> log:uri "urn:example:order:A400" .
# via the schematic forward rule:
#   {
#     ex:feed ex:json ?J .
#     (?J "/orders") string:jsonPointer ?Orders .
#     ?Orders list:iterate (?OrderIndex ?OrderJson) .
#     (?OrderJson "/orderId") string:jsonPointer ?OrderId .
#     (?OrderJson "/shipTo/country") string:jsonPointer ?Country .
#     (?OrderJson "/customer") string:jsonPointer ?CustJson .
#     (?CustJson "/email") string:jsonPointer ?Email .
#     (?CustJson "/vatId") string:jsonPointer ?VatIdRaw .
#     (?OrderJson "/declared") string:jsonPointer ?Decl .
#     (?Decl "/netCents") string:jsonPointer ?NetD .
#     (?Decl "/vatCents") string:jsonPointer ?VatD .
#     (?Decl "/grossCents") string:jsonPointer ?GrossD .
#     ("urn:example:order:%s" ?OrderId) string:format ?OrderUriStr .
#     ?Order log:uri ?OrderUriStr .
#   } => {
#     ?Order a ex:Order .
#     ?Order ex:orderId ?OrderId .
#     ?Order ex:orderIndex ?OrderIndex .
#     ?Order ex:shipCountry ?Country .
#     ?Order ex:email ?Email .
#     ?Order ex:vatIdRaw ?VatIdRaw .
#     ?Order ex:declaredNetCents ?NetD .
#     ?Order ex:declaredVatCents ?VatD .
#     ?Order ex:declaredGrossCents ?GrossD .
#   } .
# with substitution (on rule variables):
#   ?Country = "BE"
#   ?CustJson = """{"email":"ada@other.example","vatId":null}"""^^rdf:JSON
#   ?Decl = """{"netCents":3498,"vatCents":508,"grossCents":4006}"""^^rdf:JSON
#   ?Email = "ada@other.example"
#   ?GrossD = 4006
#   ?J = """{
#     "meta~data": { "batch": "2025-12-18" },
#     "orders": [
#     {
#     "orderId": "A100",
#     "shipTo": { "country": "BE" },
#     "customer": { "email": "Ada@Example.ORG", "vatId": null },
#     "lines": [
#     { "sku": "wid-001", "qty": 2, "unitCents": 999 },
#     { "sku": "GAD-002", "qty": 1, "unitCents": 1500 }
#     ],
#     "declared": { "netCents": 3498, "vatCents": 509, "grossCents": 4007 }
#     },
#     {
#     "orderId": "A200",
#     "shipTo": { "country": "US" },
#     "customer": { "email": "bob@example.org", "vatId": null },
#     "lines": [
#     { "sku": "WID-001", "qty": 2, "unitCents": 999 },
#     { "sku": "GAD-002", "qty": 1, "unitCents": 1500 }
#     ],
#     "declared": { "netCents": 3498, "vatCents": 0, "grossCents": 3498 }
#     },
#     {
#     "orderId": "A300",
#     "shipTo": { "country": "NL" },
#     "customer": { "email": "acct@company.nl", "vatId": "NL999999999B01" },
#     "lines": [
#     { "sku": "WID-001", "qty": 2, "unitCents": 999 },
#     { "sku": "GAD-002", "qty": 1, "unitCents": 1500 }
#     ],
#     "declared": { "netCents": 3498, "vatCents": 0, "grossCents": 3498 }
#     },
#     {
#     "orderId": "A301",
#     "shipTo": { "country": "NL" },
#     "customer": { "email": "billing@company.nl", "vatId": "NL999999999B01" },
#     "lines": [
#     { "sku": "WID-001", "qty": 2, "unitCents": 999 },
#     { "sku": "GAD-002", "qty": 1, "unitCents": 1500 }
#     ],
#     "declared": { "netCents": 3498, "vatCents": 0, "grossCents": 3498 }
#     },
#     {
#     "orderId": "A400",
#     "shipTo": { "country": "BE" },
#     "customer": { "email": "ada@other.example", "vatId": null },
#     "lines": [
#     { "sku": "WID-001", "qty": 2, "unitCents": 999 },
#     { "sku": "GAD-002", "qty": 1, "unitCents": 1500 }
#     ],
#     "declared": { "netCents": 3498, "vatCents": 508, "grossCents": 4006 }
#     }
#     ]
#   }"""^^rdf:JSON
#   ?NetD = 3498
#   ?Order = <urn:example:order:A400>
#   ?OrderId = "A400"
#   ?OrderIndex = 4
#   ?OrderJson = """{"orderId":"A400","shipTo":{"country":"BE"},"customer":{"email":"ada@other.example","vatId":null},"lines":[{"sku":"WID-001","qty":2,"unitCents":999},{"sku":"GAD-002","qty":1,"unitCents":1500}],"declared":{"netCents":3498,"vatCents":508,"grossCents":4006}}"""^^rdf:JSON
#   ?OrderUriStr = "urn:example:order:A400"
#   ?Orders = ("""{"orderId":"A100","shipTo":{"country":"BE"},"customer":{"email":"Ada@Example.ORG","vatId":null},"lines":[{"sku":"wid-001","qty":2,"unitCents":999},{"sku":"GAD-002","qty":1,"unitCents":1500}],"declared":{"netCents":3498,"vatCents":509,"grossCents":4007}}"""^^rdf:JSON """{"orderId":"A200","shipTo":{"country":"US"},"customer":{"email":"bob@example.org","vatId":null},"lines":[{"sku":"WID-001","qty":2,"unitCents":999},{"sku":"GAD-002","qty":1,"unitCents":1500}],"declared":{"netCents":3498,"vatCents":0,"grossCents":3498}}"""^^rdf:JSON """{"orderId":"A300","shipTo":{"country":"NL"},"customer":{"email":"acct@company.nl","vatId":"NL999999999B01"},"lines":[{"sku":"WID-001","qty":2,"unitCents":999},{"sku":"GAD-002","qty":1,"unitCents":1500}],"declared":{"netCents":3498,"vatCents":0,"grossCents":3498}}"""^^rdf:JSON """{"orderId":"A301","shipTo":{"country":"NL"},"customer":{"email":"billing@company.nl","vatId":"NL999999999B01"},"lines":[{"sku":"WID-001","qty":2,"unitCents":999},{"sku":"GAD-002","qty":1,"unitCents":1500}],"declared":{"netCents":3498,"vatCents":0,"grossCents":3498}}"""^^rdf:JSON """{"orderId":"A400","shipTo":{"country":"BE"},"customer":{"email":"ada@other.example","vatId":null},"lines":[{"sku":"WID-001","qty":2,"unitCents":999},{"sku":"GAD-002","qty":1,"unitCents":1500}],"declared":{"netCents":3498,"vatCents":508,"grossCents":4006}}"""^^rdf:JSON)
#   ?VatD = 508
#   ?VatIdRaw = "null"
# Therefore the derived triple above is entailed by the rules and facts.
# ----------------------------------------------------------------------

<urn:example:order:A400> ex:orderIndex 4 .

# ----------------------------------------------------------------------
# Proof for derived triple:
#   <urn:example:order:A400> ex:shipCountry "BE" .
# It holds because the following instance of the rule body is provable:
#   ex:feed ex:json """{
#     "meta~data": { "batch": "2025-12-18" },
#     "orders": [
#       {
#         "orderId": "A100",
#         "shipTo": { "country": "BE" },
#         "customer": { "email": "Ada@Example.ORG", "vatId": null },
#         "lines": [
#           { "sku": "wid-001", "qty": 2, "unitCents": 999 },
#           { "sku": "GAD-002", "qty": 1, "unitCents": 1500 }
#         ],
#         "declared": { "netCents": 3498, "vatCents": 509, "grossCents": 4007 }
#       },
#       {
#         "orderId": "A200",
#         "shipTo": { "country": "US" },
#         "customer": { "email": "bob@example.org", "vatId": null },
#         "lines": [
#           { "sku": "WID-001", "qty": 2, "unitCents": 999 },
#           { "sku": "GAD-002", "qty": 1, "unitCents": 1500 }
#         ],
#         "declared": { "netCents": 3498, "vatCents": 0, "grossCents": 3498 }
#       },
#       {
#         "orderId": "A300",
#         "shipTo": { "country": "NL" },
#         "customer": { "email": "acct@company.nl", "vatId": "NL999999999B01" },
#         "lines": [
#           { "sku": "WID-001", "qty": 2, "unitCents": 999 },
#           { "sku": "GAD-002", "qty": 1, "unitCents": 1500 }
#         ],
#         "declared": { "netCents": 3498, "vatCents": 0, "grossCents": 3498 }
#       },
#       {
#         "orderId": "A301",
#         "shipTo": { "country": "NL" },
#         "customer": { "email": "billing@company.nl", "vatId": "NL999999999B01" },
#         "lines": [
#           { "sku": "WID-001", "qty": 2, "unitCents": 999 },
#           { "sku": "GAD-002", "qty": 1, "unitCents": 1500 }
#         ],
#         "declared": { "netCents": 3498, "vatCents": 0, "grossCents": 3498 }
#       },
#       {
#         "orderId": "A400",
#         "shipTo": { "country": "BE" },
#         "customer": { "email": "ada@other.example", "vatId": null },
#         "lines": [
#           { "sku": "WID-001", "qty": 2, "unitCents": 999 },
#           { "sku": "GAD-002", "qty": 1, "unitCents": 1500 }
#         ],
#         "declared": { "netCents": 3498, "vatCents": 508, "grossCents": 4006 }
#       }
#     ]
#   }"""^^rdf:JSON .
#   ("""{
#     "meta~data": { "batch": "2025-12-18" },
#     "orders": [
#       {
#         "orderId": "A100",
#         "shipTo": { "country": "BE" },
#         "customer": { "email": "Ada@Example.ORG", "vatId": null },
#         "lines": [
#           { "sku": "wid-001", "qty": 2, "unitCents": 999 },
#           { "sku": "GAD-002", "qty": 1, "unitCents": 1500 }
#         ],
#         "declared": { "netCents": 3498, "vatCents": 509, "grossCents": 4007 }
#       },
#       {
#         "orderId": "A200",
#         "shipTo": { "country": "US" },
#         "customer": { "email": "bob@example.org", "vatId": null },
#         "lines": [
#           { "sku": "WID-001", "qty": 2, "unitCents": 999 },
#           { "sku": "GAD-002", "qty": 1, "unitCents": 1500 }
#         ],
#         "declared": { "netCents": 3498, "vatCents": 0, "grossCents": 3498 }
#       },
#       {
#         "orderId": "A300",
#         "shipTo": { "country": "NL" },
#         "customer": { "email": "acct@company.nl", "vatId": "NL999999999B01" },
#         "lines": [
#           { "sku": "WID-001", "qty": 2, "unitCents": 999 },
#           { "sku": "GAD-002", "qty": 1, "unitCents": 1500 }
#         ],
#         "declared": { "netCents": 3498, "vatCents": 0, "grossCents": 3498 }
#       },
#       {
#         "orderId": "A301",
#         "shipTo": { "country": "NL" },
#         "customer": { "email": "billing@company.nl", "vatId": "NL999999999B01" },
#         "lines": [
#           { "sku": "WID-001", "qty": 2, "unitCents": 999 },
#           { "sku": "GAD-002", "qty": 1, "unitCents": 1500 }
#         ],
#         "declared": { "netCents": 3498, "vatCents": 0, "grossCents": 3498 }
#       },
#       {
#         "orderId": "A400",
#         "shipTo": { "country": "BE" },
#         "customer": { "email": "ada@other.example", "vatId": null },
#         "lines": [
#           { "sku": "WID-001", "qty": 2, "unitCents": 999 },
#           { "sku": "GAD-002", "qty": 1, "unitCents": 1500 }
#         ],
#         "declared": { "netCents": 3498, "vatCents": 508, "grossCents": 4006 }
#       }
#     ]
#   }"""^^rdf:JSON "/orders") string:jsonPointer ("""{"orderId":"A100","shipTo":{"country":"BE"},"customer":{"email":"Ada@Example.ORG","vatId":null},"lines":[{"sku":"wid-001","qty":2,"unitCents":999},{"sku":"GAD-002","qty":1,"unitCents":1500}],"declared":{"netCents":3498,"vatCents":509,"grossCents":4007}}"""^^rdf:JSON """{"orderId":"A200","shipTo":{"country":"US"},"customer":{"email":"bob@example.org","vatId":null},"lines":[{"sku":"WID-001","qty":2,"unitCents":999},{"sku":"GAD-002","qty":1,"unitCents":1500}],"declared":{"netCents":3498,"vatCents":0,"grossCents":3498}}"""^^rdf:JSON """{"orderId":"A300","shipTo":{"country":"NL"},"customer":{"email":"acct@company.nl","vatId":"NL999999999B01"},"lines":[{"sku":"WID-001","qty":2,"unitCents":999},{"sku":"GAD-002","qty":1,"unitCents":1500}],"declared":{"netCents":3498,"vatCents":0,"grossCents":3498}}"""^^rdf:JSON """{"orderId":"A301","shipTo":{"country":"NL"},"customer":{"email":"billing@company.nl","vatId":"NL999999999B01"},"lines":[{"sku":"WID-001","qty":2,"unitCents":999},{"sku":"GAD-002","qty":1,"unitCents":1500}],"declared":{"netCents":3498,"vatCents":0,"grossCents":3498}}"""^^rdf:JSON """{"orderId":"A400","shipTo":{"country":"BE"},"customer":{"email":"ada@other.example","vatId":null},"lines":[{"sku":"WID-001","qty":2,"unitCents":999},{"sku":"GAD-002","qty":1,"unitCents":1500}],"declared":{"netCents":3498,"vatCents":508,"grossCents":4006}}"""^^rdf:JSON) .
#   ("""{"orderId":"A100","shipTo":{"country":"BE"},"customer":{"email":"Ada@Example.ORG","vatId":null},"lines":[{"sku":"wid-001","qty":2,"unitCents":999},{"sku":"GAD-002","qty":1,"unitCents":1500}],"declared":{"netCents":3498,"vatCents":509,"grossCents":4007}}"""^^rdf:JSON """{"orderId":"A200","shipTo":{"country":"US"},"customer":{"email":"bob@example.org","vatId":null},"lines":[{"sku":"WID-001","qty":2,"unitCents":999},{"sku":"GAD-002","qty":1,"unitCents":1500}],"declared":{"netCents":3498,"vatCents":0,"grossCents":3498}}"""^^rdf:JSON """{"orderId":"A300","shipTo":{"country":"NL"},"customer":{"email":"acct@company.nl","vatId":"NL999999999B01"},"lines":[{"sku":"WID-001","qty":2,"unitCents":999},{"sku":"GAD-002","qty":1,"unitCents":1500}],"declared":{"netCents":3498,"vatCents":0,"grossCents":3498}}"""^^rdf:JSON """{"orderId":"A301","shipTo":{"country":"NL"},"customer":{"email":"billing@company.nl","vatId":"NL999999999B01"},"lines":[{"sku":"WID-001","qty":2,"unitCents":999},{"sku":"GAD-002","qty":1,"unitCents":1500}],"declared":{"netCents":3498,"vatCents":0,"grossCents":3498}}"""^^rdf:JSON """{"orderId":"A400","shipTo":{"country":"BE"},"customer":{"email":"ada@other.example","vatId":null},"lines":[{"sku":"WID-001","qty":2,"unitCents":999},{"sku":"GAD-002","qty":1,"unitCents":1500}],"declared":{"netCents":3498,"vatCents":508,"grossCents":4006}}"""^^rdf:JSON) list:iterate (4 """{"orderId":"A400","shipTo":{"country":"BE"},"customer":{"email":"ada@other.example","vatId":null},"lines":[{"sku":"WID-001","qty":2,"unitCents":999},{"sku":"GAD-002","qty":1,"unitCents":1500}],"declared":{"netCents":3498,"vatCents":508,"grossCents":4006}}"""^^rdf:JSON) .
#   ("""{"orderId":"A400","shipTo":{"country":"BE"},"customer":{"email":"ada@other.example","vatId":null},"lines":[{"sku":"WID-001","qty":2,"unitCents":999},{"sku":"GAD-002","qty":1,"unitCents":1500}],"declared":{"netCents":3498,"vatCents":508,"grossCents":4006}}"""^^rdf:JSON "/orderId") string:jsonPointer "A400" .
#   ("""{"orderId":"A400","shipTo":{"country":"BE"},"customer":{"email":"ada@other.example","vatId":null},"lines":[{"sku":"WID-001","qty":2,"unitCents":999},{"sku":"GAD-002","qty":1,"unitCents":1500}],"declared":{"netCents":3498,"vatCents":508,"grossCents":4006}}"""^^rdf:JSON "/shipTo/country") string:jsonPointer "BE" .
#   ("""{"orderId":"A400","shipTo":{"country":"BE"},"customer":{"email":"ada@other.example","vatId":null},"lines":[{"sku":"WID-001","qty":2,"unitCents":999},{"sku":"GAD-002","qty":1,"unitCents":1500}],"declared":{"netCents":3498,"vatCents":508,"grossCents":4006}}"""^^rdf:JSON "/customer") string:jsonPointer """{"email":"ada@other.example","vatId":null}"""^^rdf:JSON .
#   ("""{"email":"ada@other.example","vatId":null}"""^^rdf:JSON "/email") string:jsonPointer "ada@other.example" .
#   ("""{"email":"ada@other.example","vatId":null}"""^^rdf:JSON "/vatId") string:jsonPointer "null" .
#   ("""{"orderId":"A400","shipTo":{"country":"BE"},"customer":{"email":"ada@other.example","vatId":null},"lines":[{"sku":"WID-001","qty":2,"unitCents":999},{"sku":"GAD-002","qty":1,"unitCents":1500}],"declared":{"netCents":3498,"vatCents":508,"grossCents":4006}}"""^^rdf:JSON "/declared") string:jsonPointer """{"netCents":3498,"vatCents":508,"grossCents":4006}"""^^rdf:JSON .
#   ("""{"netCents":3498,"vatCents":508,"grossCents":4006}"""^^rdf:JSON "/netCents") string:jsonPointer 3498 .
#   ("""{"netCents":3498,"vatCents":508,"grossCents":4006}"""^^rdf:JSON "/vatCents") string:jsonPointer 508 .
#   ("""{"netCents":3498,"vatCents":508,"grossCents":4006}"""^^rdf:JSON "/grossCents") string:jsonPointer 4006 .
#   ("urn:example:order:%s" "A400") string:format "urn:example:order:A400" .
#   <urn:example:order:A400> log:uri "urn:example:order:A400" .
# via the schematic forward rule:
#   {
#     ex:feed ex:json ?J .
#     (?J "/orders") string:jsonPointer ?Orders .
#     ?Orders list:iterate (?OrderIndex ?OrderJson) .
#     (?OrderJson "/orderId") string:jsonPointer ?OrderId .
#     (?OrderJson "/shipTo/country") string:jsonPointer ?Country .
#     (?OrderJson "/customer") string:jsonPointer ?CustJson .
#     (?CustJson "/email") string:jsonPointer ?Email .
#     (?CustJson "/vatId") string:jsonPointer ?VatIdRaw .
#     (?OrderJson "/declared") string:jsonPointer ?Decl .
#     (?Decl "/netCents") string:jsonPointer ?NetD .
#     (?Decl "/vatCents") string:jsonPointer ?VatD .
#     (?Decl "/grossCents") string:jsonPointer ?GrossD .
#     ("urn:example:order:%s" ?OrderId) string:format ?OrderUriStr .
#     ?Order log:uri ?OrderUriStr .
#   } => {
#     ?Order a ex:Order .
#     ?Order ex:orderId ?OrderId .
#     ?Order ex:orderIndex ?OrderIndex .
#     ?Order ex:shipCountry ?Country .
#     ?Order ex:email ?Email .
#     ?Order ex:vatIdRaw ?VatIdRaw .
#     ?Order ex:declaredNetCents ?NetD .
#     ?Order ex:declaredVatCents ?VatD .
#     ?Order ex:declaredGrossCents ?GrossD .
#   } .
# with substitution (on rule variables):
#   ?Country = "BE"
#   ?CustJson = """{"email":"ada@other.example","vatId":null}"""^^rdf:JSON
#   ?Decl = """{"netCents":3498,"vatCents":508,"grossCents":4006}"""^^rdf:JSON
#   ?Email = "ada@other.example"
#   ?GrossD = 4006
#   ?J = """{
#     "meta~data": { "batch": "2025-12-18" },
#     "orders": [
#     {
#     "orderId": "A100",
#     "shipTo": { "country": "BE" },
#     "customer": { "email": "Ada@Example.ORG", "vatId": null },
#     "lines": [
#     { "sku": "wid-001", "qty": 2, "unitCents": 999 },
#     { "sku": "GAD-002", "qty": 1, "unitCents": 1500 }
#     ],
#     "declared": { "netCents": 3498, "vatCents": 509, "grossCents": 4007 }
#     },
#     {
#     "orderId": "A200",
#     "shipTo": { "country": "US" },
#     "customer": { "email": "bob@example.org", "vatId": null },
#     "lines": [
#     { "sku": "WID-001", "qty": 2, "unitCents": 999 },
#     { "sku": "GAD-002", "qty": 1, "unitCents": 1500 }
#     ],
#     "declared": { "netCents": 3498, "vatCents": 0, "grossCents": 3498 }
#     },
#     {
#     "orderId": "A300",
#     "shipTo": { "country": "NL" },
#     "customer": { "email": "acct@company.nl", "vatId": "NL999999999B01" },
#     "lines": [
#     { "sku": "WID-001", "qty": 2, "unitCents": 999 },
#     { "sku": "GAD-002", "qty": 1, "unitCents": 1500 }
#     ],
#     "declared": { "netCents": 3498, "vatCents": 0, "grossCents": 3498 }
#     },
#     {
#     "orderId": "A301",
#     "shipTo": { "country": "NL" },
#     "customer": { "email": "billing@company.nl", "vatId": "NL999999999B01" },
#     "lines": [
#     { "sku": "WID-001", "qty": 2, "unitCents": 999 },
#     { "sku": "GAD-002", "qty": 1, "unitCents": 1500 }
#     ],
#     "declared": { "netCents": 3498, "vatCents": 0, "grossCents": 3498 }
#     },
#     {
#     "orderId": "A400",
#     "shipTo": { "country": "BE" },
#     "customer": { "email": "ada@other.example", "vatId": null },
#     "lines": [
#     { "sku": "WID-001", "qty": 2, "unitCents": 999 },
#     { "sku": "GAD-002", "qty": 1, "unitCents": 1500 }
#     ],
#     "declared": { "netCents": 3498, "vatCents": 508, "grossCents": 4006 }
#     }
#     ]
#   }"""^^rdf:JSON
#   ?NetD = 3498
#   ?Order = <urn:example:order:A400>
#   ?OrderId = "A400"
#   ?OrderIndex = 4
#   ?OrderJson = """{"orderId":"A400","shipTo":{"country":"BE"},"customer":{"email":"ada@other.example","vatId":null},"lines":[{"sku":"WID-001","qty":2,"unitCents":999},{"sku":"GAD-002","qty":1,"unitCents":1500}],"declared":{"netCents":3498,"vatCents":508,"grossCents":4006}}"""^^rdf:JSON
#   ?OrderUriStr = "urn:example:order:A400"
#   ?Orders = ("""{"orderId":"A100","shipTo":{"country":"BE"},"customer":{"email":"Ada@Example.ORG","vatId":null},"lines":[{"sku":"wid-001","qty":2,"unitCents":999},{"sku":"GAD-002","qty":1,"unitCents":1500}],"declared":{"netCents":3498,"vatCents":509,"grossCents":4007}}"""^^rdf:JSON """{"orderId":"A200","shipTo":{"country":"US"},"customer":{"email":"bob@example.org","vatId":null},"lines":[{"sku":"WID-001","qty":2,"unitCents":999},{"sku":"GAD-002","qty":1,"unitCents":1500}],"declared":{"netCents":3498,"vatCents":0,"grossCents":3498}}"""^^rdf:JSON """{"orderId":"A300","shipTo":{"country":"NL"},"customer":{"email":"acct@company.nl","vatId":"NL999999999B01"},"lines":[{"sku":"WID-001","qty":2,"unitCents":999},{"sku":"GAD-002","qty":1,"unitCents":1500}],"declared":{"netCents":3498,"vatCents":0,"grossCents":3498}}"""^^rdf:JSON """{"orderId":"A301","shipTo":{"country":"NL"},"customer":{"email":"billing@company.nl","vatId":"NL999999999B01"},"lines":[{"sku":"WID-001","qty":2,"unitCents":999},{"sku":"GAD-002","qty":1,"unitCents":1500}],"declared":{"netCents":3498,"vatCents":0,"grossCents":3498}}"""^^rdf:JSON """{"orderId":"A400","shipTo":{"country":"BE"},"customer":{"email":"ada@other.example","vatId":null},"lines":[{"sku":"WID-001","qty":2,"unitCents":999},{"sku":"GAD-002","qty":1,"unitCents":1500}],"declared":{"netCents":3498,"vatCents":508,"grossCents":4006}}"""^^rdf:JSON)
#   ?VatD = 508
#   ?VatIdRaw = "null"
# Therefore the derived triple above is entailed by the rules and facts.
# ----------------------------------------------------------------------

<urn:example:order:A400> ex:shipCountry "BE" .

# ----------------------------------------------------------------------
# Proof for derived triple:
#   <urn:example:order:A400> ex:email "ada@other.example" .
# It holds because the following instance of the rule body is provable:
#   ex:feed ex:json """{
#     "meta~data": { "batch": "2025-12-18" },
#     "orders": [
#       {
#         "orderId": "A100",
#         "shipTo": { "country": "BE" },
#         "customer": { "email": "Ada@Example.ORG", "vatId": null },
#         "lines": [
#           { "sku": "wid-001", "qty": 2, "unitCents": 999 },
#           { "sku": "GAD-002", "qty": 1, "unitCents": 1500 }
#         ],
#         "declared": { "netCents": 3498, "vatCents": 509, "grossCents": 4007 }
#       },
#       {
#         "orderId": "A200",
#         "shipTo": { "country": "US" },
#         "customer": { "email": "bob@example.org", "vatId": null },
#         "lines": [
#           { "sku": "WID-001", "qty": 2, "unitCents": 999 },
#           { "sku": "GAD-002", "qty": 1, "unitCents": 1500 }
#         ],
#         "declared": { "netCents": 3498, "vatCents": 0, "grossCents": 3498 }
#       },
#       {
#         "orderId": "A300",
#         "shipTo": { "country": "NL" },
#         "customer": { "email": "acct@company.nl", "vatId": "NL999999999B01" },
#         "lines": [
#           { "sku": "WID-001", "qty": 2, "unitCents": 999 },
#           { "sku": "GAD-002", "qty": 1, "unitCents": 1500 }
#         ],
#         "declared": { "netCents": 3498, "vatCents": 0, "grossCents": 3498 }
#       },
#       {
#         "orderId": "A301",
#         "shipTo": { "country": "NL" },
#         "customer": { "email": "billing@company.nl", "vatId": "NL999999999B01" },
#         "lines": [
#           { "sku": "WID-001", "qty": 2, "unitCents": 999 },
#           { "sku": "GAD-002", "qty": 1, "unitCents": 1500 }
#         ],
#         "declared": { "netCents": 3498, "vatCents": 0, "grossCents": 3498 }
#       },
#       {
#         "orderId": "A400",
#         "shipTo": { "country": "BE" },
#         "customer": { "email": "ada@other.example", "vatId": null },
#         "lines": [
#           { "sku": "WID-001", "qty": 2, "unitCents": 999 },
#           { "sku": "GAD-002", "qty": 1, "unitCents": 1500 }
#         ],
#         "declared": { "netCents": 3498, "vatCents": 508, "grossCents": 4006 }
#       }
#     ]
#   }"""^^rdf:JSON .
#   ("""{
#     "meta~data": { "batch": "2025-12-18" },
#     "orders": [
#       {
#         "orderId": "A100",
#         "shipTo": { "country": "BE" },
#         "customer": { "email": "Ada@Example.ORG", "vatId": null },
#         "lines": [
#           { "sku": "wid-001", "qty": 2, "unitCents": 999 },
#           { "sku": "GAD-002", "qty": 1, "unitCents": 1500 }
#         ],
#         "declared": { "netCents": 3498, "vatCents": 509, "grossCents": 4007 }
#       },
#       {
#         "orderId": "A200",
#         "shipTo": { "country": "US" },
#         "customer": { "email": "bob@example.org", "vatId": null },
#         "lines": [
#           { "sku": "WID-001", "qty": 2, "unitCents": 999 },
#           { "sku": "GAD-002", "qty": 1, "unitCents": 1500 }
#         ],
#         "declared": { "netCents": 3498, "vatCents": 0, "grossCents": 3498 }
#       },
#       {
#         "orderId": "A300",
#         "shipTo": { "country": "NL" },
#         "customer": { "email": "acct@company.nl", "vatId": "NL999999999B01" },
#         "lines": [
#           { "sku": "WID-001", "qty": 2, "unitCents": 999 },
#           { "sku": "GAD-002", "qty": 1, "unitCents": 1500 }
#         ],
#         "declared": { "netCents": 3498, "vatCents": 0, "grossCents": 3498 }
#       },
#       {
#         "orderId": "A301",
#         "shipTo": { "country": "NL" },
#         "customer": { "email": "billing@company.nl", "vatId": "NL999999999B01" },
#         "lines": [
#           { "sku": "WID-001", "qty": 2, "unitCents": 999 },
#           { "sku": "GAD-002", "qty": 1, "unitCents": 1500 }
#         ],
#         "declared": { "netCents": 3498, "vatCents": 0, "grossCents": 3498 }
#       },
#       {
#         "orderId": "A400",
#         "shipTo": { "country": "BE" },
#         "customer": { "email": "ada@other.example", "vatId": null },
#         "lines": [
#           { "sku": "WID-001", "qty": 2, "unitCents": 999 },
#           { "sku": "GAD-002", "qty": 1, "unitCents": 1500 }
#         ],
#         "declared": { "netCents": 3498, "vatCents": 508, "grossCents": 4006 }
#       }
#     ]
#   }"""^^rdf:JSON "/orders") string:jsonPointer ("""{"orderId":"A100","shipTo":{"country":"BE"},"customer":{"email":"Ada@Example.ORG","vatId":null},"lines":[{"sku":"wid-001","qty":2,"unitCents":999},{"sku":"GAD-002","qty":1,"unitCents":1500}],"declared":{"netCents":3498,"vatCents":509,"grossCents":4007}}"""^^rdf:JSON """{"orderId":"A200","shipTo":{"country":"US"},"customer":{"email":"bob@example.org","vatId":null},"lines":[{"sku":"WID-001","qty":2,"unitCents":999},{"sku":"GAD-002","qty":1,"unitCents":1500}],"declared":{"netCents":3498,"vatCents":0,"grossCents":3498}}"""^^rdf:JSON """{"orderId":"A300","shipTo":{"country":"NL"},"customer":{"email":"acct@company.nl","vatId":"NL999999999B01"},"lines":[{"sku":"WID-001","qty":2,"unitCents":999},{"sku":"GAD-002","qty":1,"unitCents":1500}],"declared":{"netCents":3498,"vatCents":0,"grossCents":3498}}"""^^rdf:JSON """{"orderId":"A301","shipTo":{"country":"NL"},"customer":{"email":"billing@company.nl","vatId":"NL999999999B01"},"lines":[{"sku":"WID-001","qty":2,"unitCents":999},{"sku":"GAD-002","qty":1,"unitCents":1500}],"declared":{"netCents":3498,"vatCents":0,"grossCents":3498}}"""^^rdf:JSON """{"orderId":"A400","shipTo":{"country":"BE"},"customer":{"email":"ada@other.example","vatId":null},"lines":[{"sku":"WID-001","qty":2,"unitCents":999},{"sku":"GAD-002","qty":1,"unitCents":1500}],"declared":{"netCents":3498,"vatCents":508,"grossCents":4006}}"""^^rdf:JSON) .
#   ("""{"orderId":"A100","shipTo":{"country":"BE"},"customer":{"email":"Ada@Example.ORG","vatId":null},"lines":[{"sku":"wid-001","qty":2,"unitCents":999},{"sku":"GAD-002","qty":1,"unitCents":1500}],"declared":{"netCents":3498,"vatCents":509,"grossCents":4007}}"""^^rdf:JSON """{"orderId":"A200","shipTo":{"country":"US"},"customer":{"email":"bob@example.org","vatId":null},"lines":[{"sku":"WID-001","qty":2,"unitCents":999},{"sku":"GAD-002","qty":1,"unitCents":1500}],"declared":{"netCents":3498,"vatCents":0,"grossCents":3498}}"""^^rdf:JSON """{"orderId":"A300","shipTo":{"country":"NL"},"customer":{"email":"acct@company.nl","vatId":"NL999999999B01"},"lines":[{"sku":"WID-001","qty":2,"unitCents":999},{"sku":"GAD-002","qty":1,"unitCents":1500}],"declared":{"netCents":3498,"vatCents":0,"grossCents":3498}}"""^^rdf:JSON """{"orderId":"A301","shipTo":{"country":"NL"},"customer":{"email":"billing@company.nl","vatId":"NL999999999B01"},"lines":[{"sku":"WID-001","qty":2,"unitCents":999},{"sku":"GAD-002","qty":1,"unitCents":1500}],"declared":{"netCents":3498,"vatCents":0,"grossCents":3498}}"""^^rdf:JSON """{"orderId":"A400","shipTo":{"country":"BE"},"customer":{"email":"ada@other.example","vatId":null},"lines":[{"sku":"WID-001","qty":2,"unitCents":999},{"sku":"GAD-002","qty":1,"unitCents":1500}],"declared":{"netCents":3498,"vatCents":508,"grossCents":4006}}"""^^rdf:JSON) list:iterate (4 """{"orderId":"A400","shipTo":{"country":"BE"},"customer":{"email":"ada@other.example","vatId":null},"lines":[{"sku":"WID-001","qty":2,"unitCents":999},{"sku":"GAD-002","qty":1,"unitCents":1500}],"declared":{"netCents":3498,"vatCents":508,"grossCents":4006}}"""^^rdf:JSON) .
#   ("""{"orderId":"A400","shipTo":{"country":"BE"},"customer":{"email":"ada@other.example","vatId":null},"lines":[{"sku":"WID-001","qty":2,"unitCents":999},{"sku":"GAD-002","qty":1,"unitCents":1500}],"declared":{"netCents":3498,"vatCents":508,"grossCents":4006}}"""^^rdf:JSON "/orderId") string:jsonPointer "A400" .
#   ("""{"orderId":"A400","shipTo":{"country":"BE"},"customer":{"email":"ada@other.example","vatId":null},"lines":[{"sku":"WID-001","qty":2,"unitCents":999},{"sku":"GAD-002","qty":1,"unitCents":1500}],"declared":{"netCents":3498,"vatCents":508,"grossCents":4006}}"""^^rdf:JSON "/shipTo/country") string:jsonPointer "BE" .
#   ("""{"orderId":"A400","shipTo":{"country":"BE"},"customer":{"email":"ada@other.example","vatId":null},"lines":[{"sku":"WID-001","qty":2,"unitCents":999},{"sku":"GAD-002","qty":1,"unitCents":1500}],"declared":{"netCents":3498,"vatCents":508,"grossCents":4006}}"""^^rdf:JSON "/customer") string:jsonPointer """{"email":"ada@other.example","vatId":null}"""^^rdf:JSON .
#   ("""{"email":"ada@other.example","vatId":null}"""^^rdf:JSON "/email") string:jsonPointer "ada@other.example" .
#   ("""{"email":"ada@other.example","vatId":null}"""^^rdf:JSON "/vatId") string:jsonPointer "null" .
#   ("""{"orderId":"A400","shipTo":{"country":"BE"},"customer":{"email":"ada@other.example","vatId":null},"lines":[{"sku":"WID-001","qty":2,"unitCents":999},{"sku":"GAD-002","qty":1,"unitCents":1500}],"declared":{"netCents":3498,"vatCents":508,"grossCents":4006}}"""^^rdf:JSON "/declared") string:jsonPointer """{"netCents":3498,"vatCents":508,"grossCents":4006}"""^^rdf:JSON .
#   ("""{"netCents":3498,"vatCents":508,"grossCents":4006}"""^^rdf:JSON "/netCents") string:jsonPointer 3498 .
#   ("""{"netCents":3498,"vatCents":508,"grossCents":4006}"""^^rdf:JSON "/vatCents") string:jsonPointer 508 .
#   ("""{"netCents":3498,"vatCents":508,"grossCents":4006}"""^^rdf:JSON "/grossCents") string:jsonPointer 4006 .
#   ("urn:example:order:%s" "A400") string:format "urn:example:order:A400" .
#   <urn:example:order:A400> log:uri "urn:example:order:A400" .
# via the schematic forward rule:
#   {
#     ex:feed ex:json ?J .
#     (?J "/orders") string:jsonPointer ?Orders .
#     ?Orders list:iterate (?OrderIndex ?OrderJson) .
#     (?OrderJson "/orderId") string:jsonPointer ?OrderId .
#     (?OrderJson "/shipTo/country") string:jsonPointer ?Country .
#     (?OrderJson "/customer") string:jsonPointer ?CustJson .
#     (?CustJson "/email") string:jsonPointer ?Email .
#     (?CustJson "/vatId") string:jsonPointer ?VatIdRaw .
#     (?OrderJson "/declared") string:jsonPointer ?Decl .
#     (?Decl "/netCents") string:jsonPointer ?NetD .
#     (?Decl "/vatCents") string:jsonPointer ?VatD .
#     (?Decl "/grossCents") string:jsonPointer ?GrossD .
#     ("urn:example:order:%s" ?OrderId) string:format ?OrderUriStr .
#     ?Order log:uri ?OrderUriStr .
#   } => {
#     ?Order a ex:Order .
#     ?Order ex:orderId ?OrderId .
#     ?Order ex:orderIndex ?OrderIndex .
#     ?Order ex:shipCountry ?Country .
#     ?Order ex:email ?Email .
#     ?Order ex:vatIdRaw ?VatIdRaw .
#     ?Order ex:declaredNetCents ?NetD .
#     ?Order ex:declaredVatCents ?VatD .
#     ?Order ex:declaredGrossCents ?GrossD .
#   } .
# with substitution (on rule variables):
#   ?Country = "BE"
#   ?CustJson = """{"email":"ada@other.example","vatId":null}"""^^rdf:JSON
#   ?Decl = """{"netCents":3498,"vatCents":508,"grossCents":4006}"""^^rdf:JSON
#   ?Email = "ada@other.example"
#   ?GrossD = 4006
#   ?J = """{
#     "meta~data": { "batch": "2025-12-18" },
#     "orders": [
#     {
#     "orderId": "A100",
#     "shipTo": { "country": "BE" },
#     "customer": { "email": "Ada@Example.ORG", "vatId": null },
#     "lines": [
#     { "sku": "wid-001", "qty": 2, "unitCents": 999 },
#     { "sku": "GAD-002", "qty": 1, "unitCents": 1500 }
#     ],
#     "declared": { "netCents": 3498, "vatCents": 509, "grossCents": 4007 }
#     },
#     {
#     "orderId": "A200",
#     "shipTo": { "country": "US" },
#     "customer": { "email": "bob@example.org", "vatId": null },
#     "lines": [
#     { "sku": "WID-001", "qty": 2, "unitCents": 999 },
#     { "sku": "GAD-002", "qty": 1, "unitCents": 1500 }
#     ],
#     "declared": { "netCents": 3498, "vatCents": 0, "grossCents": 3498 }
#     },
#     {
#     "orderId": "A300",
#     "shipTo": { "country": "NL" },
#     "customer": { "email": "acct@company.nl", "vatId": "NL999999999B01" },
#     "lines": [
#     { "sku": "WID-001", "qty": 2, "unitCents": 999 },
#     { "sku": "GAD-002", "qty": 1, "unitCents": 1500 }
#     ],
#     "declared": { "netCents": 3498, "vatCents": 0, "grossCents": 3498 }
#     },
#     {
#     "orderId": "A301",
#     "shipTo": { "country": "NL" },
#     "customer": { "email": "billing@company.nl", "vatId": "NL999999999B01" },
#     "lines": [
#     { "sku": "WID-001", "qty": 2, "unitCents": 999 },
#     { "sku": "GAD-002", "qty": 1, "unitCents": 1500 }
#     ],
#     "declared": { "netCents": 3498, "vatCents": 0, "grossCents": 3498 }
#     },
#     {
#     "orderId": "A400",
#     "shipTo": { "country": "BE" },
#     "customer": { "email": "ada@other.example", "vatId": null },
#     "lines": [
#     { "sku": "WID-001", "qty": 2, "unitCents": 999 },
#     { "sku": "GAD-002", "qty": 1, "unitCents": 1500 }
#     ],
#     "declared": { "netCents": 3498, "vatCents": 508, "grossCents": 4006 }
#     }
#     ]
#   }"""^^rdf:JSON
#   ?NetD = 3498
#   ?Order = <urn:example:order:A400>
#   ?OrderId = "A400"
#   ?OrderIndex = 4
#   ?OrderJson = """{"orderId":"A400","shipTo":{"country":"BE"},"customer":{"email":"ada@other.example","vatId":null},"lines":[{"sku":"WID-001","qty":2,"unitCents":999},{"sku":"GAD-002","qty":1,"unitCents":1500}],"declared":{"netCents":3498,"vatCents":508,"grossCents":4006}}"""^^rdf:JSON
#   ?OrderUriStr = "urn:example:order:A400"
#   ?Orders = ("""{"orderId":"A100","shipTo":{"country":"BE"},"customer":{"email":"Ada@Example.ORG","vatId":null},"lines":[{"sku":"wid-001","qty":2,"unitCents":999},{"sku":"GAD-002","qty":1,"unitCents":1500}],"declared":{"netCents":3498,"vatCents":509,"grossCents":4007}}"""^^rdf:JSON """{"orderId":"A200","shipTo":{"country":"US"},"customer":{"email":"bob@example.org","vatId":null},"lines":[{"sku":"WID-001","qty":2,"unitCents":999},{"sku":"GAD-002","qty":1,"unitCents":1500}],"declared":{"netCents":3498,"vatCents":0,"grossCents":3498}}"""^^rdf:JSON """{"orderId":"A300","shipTo":{"country":"NL"},"customer":{"email":"acct@company.nl","vatId":"NL999999999B01"},"lines":[{"sku":"WID-001","qty":2,"unitCents":999},{"sku":"GAD-002","qty":1,"unitCents":1500}],"declared":{"netCents":3498,"vatCents":0,"grossCents":3498}}"""^^rdf:JSON """{"orderId":"A301","shipTo":{"country":"NL"},"customer":{"email":"billing@company.nl","vatId":"NL999999999B01"},"lines":[{"sku":"WID-001","qty":2,"unitCents":999},{"sku":"GAD-002","qty":1,"unitCents":1500}],"declared":{"netCents":3498,"vatCents":0,"grossCents":3498}}"""^^rdf:JSON """{"orderId":"A400","shipTo":{"country":"BE"},"customer":{"email":"ada@other.example","vatId":null},"lines":[{"sku":"WID-001","qty":2,"unitCents":999},{"sku":"GAD-002","qty":1,"unitCents":1500}],"declared":{"netCents":3498,"vatCents":508,"grossCents":4006}}"""^^rdf:JSON)
#   ?VatD = 508
#   ?VatIdRaw = "null"
# Therefore the derived triple above is entailed by the rules and facts.
# ----------------------------------------------------------------------

<urn:example:order:A400> ex:email "ada@other.example" .

# ----------------------------------------------------------------------
# Proof for derived triple:
#   <urn:example:order:A400> ex:vatIdRaw "null" .
# It holds because the following instance of the rule body is provable:
#   ex:feed ex:json """{
#     "meta~data": { "batch": "2025-12-18" },
#     "orders": [
#       {
#         "orderId": "A100",
#         "shipTo": { "country": "BE" },
#         "customer": { "email": "Ada@Example.ORG", "vatId": null },
#         "lines": [
#           { "sku": "wid-001", "qty": 2, "unitCents": 999 },
#           { "sku": "GAD-002", "qty": 1, "unitCents": 1500 }
#         ],
#         "declared": { "netCents": 3498, "vatCents": 509, "grossCents": 4007 }
#       },
#       {
#         "orderId": "A200",
#         "shipTo": { "country": "US" },
#         "customer": { "email": "bob@example.org", "vatId": null },
#         "lines": [
#           { "sku": "WID-001", "qty": 2, "unitCents": 999 },
#           { "sku": "GAD-002", "qty": 1, "unitCents": 1500 }
#         ],
#         "declared": { "netCents": 3498, "vatCents": 0, "grossCents": 3498 }
#       },
#       {
#         "orderId": "A300",
#         "shipTo": { "country": "NL" },
#         "customer": { "email": "acct@company.nl", "vatId": "NL999999999B01" },
#         "lines": [
#           { "sku": "WID-001", "qty": 2, "unitCents": 999 },
#           { "sku": "GAD-002", "qty": 1, "unitCents": 1500 }
#         ],
#         "declared": { "netCents": 3498, "vatCents": 0, "grossCents": 3498 }
#       },
#       {
#         "orderId": "A301",
#         "shipTo": { "country": "NL" },
#         "customer": { "email": "billing@company.nl", "vatId": "NL999999999B01" },
#         "lines": [
#           { "sku": "WID-001", "qty": 2, "unitCents": 999 },
#           { "sku": "GAD-002", "qty": 1, "unitCents": 1500 }
#         ],
#         "declared": { "netCents": 3498, "vatCents": 0, "grossCents": 3498 }
#       },
#       {
#         "orderId": "A400",
#         "shipTo": { "country": "BE" },
#         "customer": { "email": "ada@other.example", "vatId": null },
#         "lines": [
#           { "sku": "WID-001", "qty": 2, "unitCents": 999 },
#           { "sku": "GAD-002", "qty": 1, "unitCents": 1500 }
#         ],
#         "declared": { "netCents": 3498, "vatCents": 508, "grossCents": 4006 }
#       }
#     ]
#   }"""^^rdf:JSON .
#   ("""{
#     "meta~data": { "batch": "2025-12-18" },
#     "orders": [
#       {
#         "orderId": "A100",
#         "shipTo": { "country": "BE" },
#         "customer": { "email": "Ada@Example.ORG", "vatId": null },
#         "lines": [
#           { "sku": "wid-001", "qty": 2, "unitCents": 999 },
#           { "sku": "GAD-002", "qty": 1, "unitCents": 1500 }
#         ],
#         "declared": { "netCents": 3498, "vatCents": 509, "grossCents": 4007 }
#       },
#       {
#         "orderId": "A200",
#         "shipTo": { "country": "US" },
#         "customer": { "email": "bob@example.org", "vatId": null },
#         "lines": [
#           { "sku": "WID-001", "qty": 2, "unitCents": 999 },
#           { "sku": "GAD-002", "qty": 1, "unitCents": 1500 }
#         ],
#         "declared": { "netCents": 3498, "vatCents": 0, "grossCents": 3498 }
#       },
#       {
#         "orderId": "A300",
#         "shipTo": { "country": "NL" },
#         "customer": { "email": "acct@company.nl", "vatId": "NL999999999B01" },
#         "lines": [
#           { "sku": "WID-001", "qty": 2, "unitCents": 999 },
#           { "sku": "GAD-002", "qty": 1, "unitCents": 1500 }
#         ],
#         "declared": { "netCents": 3498, "vatCents": 0, "grossCents": 3498 }
#       },
#       {
#         "orderId": "A301",
#         "shipTo": { "country": "NL" },
#         "customer": { "email": "billing@company.nl", "vatId": "NL999999999B01" },
#         "lines": [
#           { "sku": "WID-001", "qty": 2, "unitCents": 999 },
#           { "sku": "GAD-002", "qty": 1, "unitCents": 1500 }
#         ],
#         "declared": { "netCents": 3498, "vatCents": 0, "grossCents": 3498 }
#       },
#       {
#         "orderId": "A400",
#         "shipTo": { "country": "BE" },
#         "customer": { "email": "ada@other.example", "vatId": null },
#         "lines": [
#           { "sku": "WID-001", "qty": 2, "unitCents": 999 },
#           { "sku": "GAD-002", "qty": 1, "unitCents": 1500 }
#         ],
#         "declared": { "netCents": 3498, "vatCents": 508, "grossCents": 4006 }
#       }
#     ]
#   }"""^^rdf:JSON "/orders") string:jsonPointer ("""{"orderId":"A100","shipTo":{"country":"BE"},"customer":{"email":"Ada@Example.ORG","vatId":null},"lines":[{"sku":"wid-001","qty":2,"unitCents":999},{"sku":"GAD-002","qty":1,"unitCents":1500}],"declared":{"netCents":3498,"vatCents":509,"grossCents":4007}}"""^^rdf:JSON """{"orderId":"A200","shipTo":{"country":"US"},"customer":{"email":"bob@example.org","vatId":null},"lines":[{"sku":"WID-001","qty":2,"unitCents":999},{"sku":"GAD-002","qty":1,"unitCents":1500}],"declared":{"netCents":3498,"vatCents":0,"grossCents":3498}}"""^^rdf:JSON """{"orderId":"A300","shipTo":{"country":"NL"},"customer":{"email":"acct@company.nl","vatId":"NL999999999B01"},"lines":[{"sku":"WID-001","qty":2,"unitCents":999},{"sku":"GAD-002","qty":1,"unitCents":1500}],"declared":{"netCents":3498,"vatCents":0,"grossCents":3498}}"""^^rdf:JSON """{"orderId":"A301","shipTo":{"country":"NL"},"customer":{"email":"billing@company.nl","vatId":"NL999999999B01"},"lines":[{"sku":"WID-001","qty":2,"unitCents":999},{"sku":"GAD-002","qty":1,"unitCents":1500}],"declared":{"netCents":3498,"vatCents":0,"grossCents":3498}}"""^^rdf:JSON """{"orderId":"A400","shipTo":{"country":"BE"},"customer":{"email":"ada@other.example","vatId":null},"lines":[{"sku":"WID-001","qty":2,"unitCents":999},{"sku":"GAD-002","qty":1,"unitCents":1500}],"declared":{"netCents":3498,"vatCents":508,"grossCents":4006}}"""^^rdf:JSON) .
#   ("""{"orderId":"A100","shipTo":{"country":"BE"},"customer":{"email":"Ada@Example.ORG","vatId":null},"lines":[{"sku":"wid-001","qty":2,"unitCents":999},{"sku":"GAD-002","qty":1,"unitCents":1500}],"declared":{"netCents":3498,"vatCents":509,"grossCents":4007}}"""^^rdf:JSON """{"orderId":"A200","shipTo":{"country":"US"},"customer":{"email":"bob@example.org","vatId":null},"lines":[{"sku":"WID-001","qty":2,"unitCents":999},{"sku":"GAD-002","qty":1,"unitCents":1500}],"declared":{"netCents":3498,"vatCents":0,"grossCents":3498}}"""^^rdf:JSON """{"orderId":"A300","shipTo":{"country":"NL"},"customer":{"email":"acct@company.nl","vatId":"NL999999999B01"},"lines":[{"sku":"WID-001","qty":2,"unitCents":999},{"sku":"GAD-002","qty":1,"unitCents":1500}],"declared":{"netCents":3498,"vatCents":0,"grossCents":3498}}"""^^rdf:JSON """{"orderId":"A301","shipTo":{"country":"NL"},"customer":{"email":"billing@company.nl","vatId":"NL999999999B01"},"lines":[{"sku":"WID-001","qty":2,"unitCents":999},{"sku":"GAD-002","qty":1,"unitCents":1500}],"declared":{"netCents":3498,"vatCents":0,"grossCents":3498}}"""^^rdf:JSON """{"orderId":"A400","shipTo":{"country":"BE"},"customer":{"email":"ada@other.example","vatId":null},"lines":[{"sku":"WID-001","qty":2,"unitCents":999},{"sku":"GAD-002","qty":1,"unitCents":1500}],"declared":{"netCents":3498,"vatCents":508,"grossCents":4006}}"""^^rdf:JSON) list:iterate (4 """{"orderId":"A400","shipTo":{"country":"BE"},"customer":{"email":"ada@other.example","vatId":null},"lines":[{"sku":"WID-001","qty":2,"unitCents":999},{"sku":"GAD-002","qty":1,"unitCents":1500}],"declared":{"netCents":3498,"vatCents":508,"grossCents":4006}}"""^^rdf:JSON) .
#   ("""{"orderId":"A400","shipTo":{"country":"BE"},"customer":{"email":"ada@other.example","vatId":null},"lines":[{"sku":"WID-001","qty":2,"unitCents":999},{"sku":"GAD-002","qty":1,"unitCents":1500}],"declared":{"netCents":3498,"vatCents":508,"grossCents":4006}}"""^^rdf:JSON "/orderId") string:jsonPointer "A400" .
#   ("""{"orderId":"A400","shipTo":{"country":"BE"},"customer":{"email":"ada@other.example","vatId":null},"lines":[{"sku":"WID-001","qty":2,"unitCents":999},{"sku":"GAD-002","qty":1,"unitCents":1500}],"declared":{"netCents":3498,"vatCents":508,"grossCents":4006}}"""^^rdf:JSON "/shipTo/country") string:jsonPointer "BE" .
#   ("""{"orderId":"A400","shipTo":{"country":"BE"},"customer":{"email":"ada@other.example","vatId":null},"lines":[{"sku":"WID-001","qty":2,"unitCents":999},{"sku":"GAD-002","qty":1,"unitCents":1500}],"declared":{"netCents":3498,"vatCents":508,"grossCents":4006}}"""^^rdf:JSON "/customer") string:jsonPointer """{"email":"ada@other.example","vatId":null}"""^^rdf:JSON .
#   ("""{"email":"ada@other.example","vatId":null}"""^^rdf:JSON "/email") string:jsonPointer "ada@other.example" .
#   ("""{"email":"ada@other.example","vatId":null}"""^^rdf:JSON "/vatId") string:jsonPointer "null" .
#   ("""{"orderId":"A400","shipTo":{"country":"BE"},"customer":{"email":"ada@other.example","vatId":null},"lines":[{"sku":"WID-001","qty":2,"unitCents":999},{"sku":"GAD-002","qty":1,"unitCents":1500}],"declared":{"netCents":3498,"vatCents":508,"grossCents":4006}}"""^^rdf:JSON "/declared") string:jsonPointer """{"netCents":3498,"vatCents":508,"grossCents":4006}"""^^rdf:JSON .
#   ("""{"netCents":3498,"vatCents":508,"grossCents":4006}"""^^rdf:JSON "/netCents") string:jsonPointer 3498 .
#   ("""{"netCents":3498,"vatCents":508,"grossCents":4006}"""^^rdf:JSON "/vatCents") string:jsonPointer 508 .
#   ("""{"netCents":3498,"vatCents":508,"grossCents":4006}"""^^rdf:JSON "/grossCents") string:jsonPointer 4006 .
#   ("urn:example:order:%s" "A400") string:format "urn:example:order:A400" .
#   <urn:example:order:A400> log:uri "urn:example:order:A400" .
# via the schematic forward rule:
#   {
#     ex:feed ex:json ?J .
#     (?J "/orders") string:jsonPointer ?Orders .
#     ?Orders list:iterate (?OrderIndex ?OrderJson) .
#     (?OrderJson "/orderId") string:jsonPointer ?OrderId .
#     (?OrderJson "/shipTo/country") string:jsonPointer ?Country .
#     (?OrderJson "/customer") string:jsonPointer ?CustJson .
#     (?CustJson "/email") string:jsonPointer ?Email .
#     (?CustJson "/vatId") string:jsonPointer ?VatIdRaw .
#     (?OrderJson "/declared") string:jsonPointer ?Decl .
#     (?Decl "/netCents") string:jsonPointer ?NetD .
#     (?Decl "/vatCents") string:jsonPointer ?VatD .
#     (?Decl "/grossCents") string:jsonPointer ?GrossD .
#     ("urn:example:order:%s" ?OrderId) string:format ?OrderUriStr .
#     ?Order log:uri ?OrderUriStr .
#   } => {
#     ?Order a ex:Order .
#     ?Order ex:orderId ?OrderId .
#     ?Order ex:orderIndex ?OrderIndex .
#     ?Order ex:shipCountry ?Country .
#     ?Order ex:email ?Email .
#     ?Order ex:vatIdRaw ?VatIdRaw .
#     ?Order ex:declaredNetCents ?NetD .
#     ?Order ex:declaredVatCents ?VatD .
#     ?Order ex:declaredGrossCents ?GrossD .
#   } .
# with substitution (on rule variables):
#   ?Country = "BE"
#   ?CustJson = """{"email":"ada@other.example","vatId":null}"""^^rdf:JSON
#   ?Decl = """{"netCents":3498,"vatCents":508,"grossCents":4006}"""^^rdf:JSON
#   ?Email = "ada@other.example"
#   ?GrossD = 4006
#   ?J = """{
#     "meta~data": { "batch": "2025-12-18" },
#     "orders": [
#     {
#     "orderId": "A100",
#     "shipTo": { "country": "BE" },
#     "customer": { "email": "Ada@Example.ORG", "vatId": null },
#     "lines": [
#     { "sku": "wid-001", "qty": 2, "unitCents": 999 },
#     { "sku": "GAD-002", "qty": 1, "unitCents": 1500 }
#     ],
#     "declared": { "netCents": 3498, "vatCents": 509, "grossCents": 4007 }
#     },
#     {
#     "orderId": "A200",
#     "shipTo": { "country": "US" },
#     "customer": { "email": "bob@example.org", "vatId": null },
#     "lines": [
#     { "sku": "WID-001", "qty": 2, "unitCents": 999 },
#     { "sku": "GAD-002", "qty": 1, "unitCents": 1500 }
#     ],
#     "declared": { "netCents": 3498, "vatCents": 0, "grossCents": 3498 }
#     },
#     {
#     "orderId": "A300",
#     "shipTo": { "country": "NL" },
#     "customer": { "email": "acct@company.nl", "vatId": "NL999999999B01" },
#     "lines": [
#     { "sku": "WID-001", "qty": 2, "unitCents": 999 },
#     { "sku": "GAD-002", "qty": 1, "unitCents": 1500 }
#     ],
#     "declared": { "netCents": 3498, "vatCents": 0, "grossCents": 3498 }
#     },
#     {
#     "orderId": "A301",
#     "shipTo": { "country": "NL" },
#     "customer": { "email": "billing@company.nl", "vatId": "NL999999999B01" },
#     "lines": [
#     { "sku": "WID-001", "qty": 2, "unitCents": 999 },
#     { "sku": "GAD-002", "qty": 1, "unitCents": 1500 }
#     ],
#     "declared": { "netCents": 3498, "vatCents": 0, "grossCents": 3498 }
#     },
#     {
#     "orderId": "A400",
#     "shipTo": { "country": "BE" },
#     "customer": { "email": "ada@other.example", "vatId": null },
#     "lines": [
#     { "sku": "WID-001", "qty": 2, "unitCents": 999 },
#     { "sku": "GAD-002", "qty": 1, "unitCents": 1500 }
#     ],
#     "declared": { "netCents": 3498, "vatCents": 508, "grossCents": 4006 }
#     }
#     ]
#   }"""^^rdf:JSON
#   ?NetD = 3498
#   ?Order = <urn:example:order:A400>
#   ?OrderId = "A400"
#   ?OrderIndex = 4
#   ?OrderJson = """{"orderId":"A400","shipTo":{"country":"BE"},"customer":{"email":"ada@other.example","vatId":null},"lines":[{"sku":"WID-001","qty":2,"unitCents":999},{"sku":"GAD-002","qty":1,"unitCents":1500}],"declared":{"netCents":3498,"vatCents":508,"grossCents":4006}}"""^^rdf:JSON
#   ?OrderUriStr = "urn:example:order:A400"
#   ?Orders = ("""{"orderId":"A100","shipTo":{"country":"BE"},"customer":{"email":"Ada@Example.ORG","vatId":null},"lines":[{"sku":"wid-001","qty":2,"unitCents":999},{"sku":"GAD-002","qty":1,"unitCents":1500}],"declared":{"netCents":3498,"vatCents":509,"grossCents":4007}}"""^^rdf:JSON """{"orderId":"A200","shipTo":{"country":"US"},"customer":{"email":"bob@example.org","vatId":null},"lines":[{"sku":"WID-001","qty":2,"unitCents":999},{"sku":"GAD-002","qty":1,"unitCents":1500}],"declared":{"netCents":3498,"vatCents":0,"grossCents":3498}}"""^^rdf:JSON """{"orderId":"A300","shipTo":{"country":"NL"},"customer":{"email":"acct@company.nl","vatId":"NL999999999B01"},"lines":[{"sku":"WID-001","qty":2,"unitCents":999},{"sku":"GAD-002","qty":1,"unitCents":1500}],"declared":{"netCents":3498,"vatCents":0,"grossCents":3498}}"""^^rdf:JSON """{"orderId":"A301","shipTo":{"country":"NL"},"customer":{"email":"billing@company.nl","vatId":"NL999999999B01"},"lines":[{"sku":"WID-001","qty":2,"unitCents":999},{"sku":"GAD-002","qty":1,"unitCents":1500}],"declared":{"netCents":3498,"vatCents":0,"grossCents":3498}}"""^^rdf:JSON """{"orderId":"A400","shipTo":{"country":"BE"},"customer":{"email":"ada@other.example","vatId":null},"lines":[{"sku":"WID-001","qty":2,"unitCents":999},{"sku":"GAD-002","qty":1,"unitCents":1500}],"declared":{"netCents":3498,"vatCents":508,"grossCents":4006}}"""^^rdf:JSON)
#   ?VatD = 508
#   ?VatIdRaw = "null"
# Therefore the derived triple above is entailed by the rules and facts.
# ----------------------------------------------------------------------

<urn:example:order:A400> ex:vatIdRaw "null" .

# ----------------------------------------------------------------------
# Proof for derived triple:
#   <urn:example:order:A400> ex:declaredNetCents 3498 .
# It holds because the following instance of the rule body is provable:
#   ex:feed ex:json """{
#     "meta~data": { "batch": "2025-12-18" },
#     "orders": [
#       {
#         "orderId": "A100",
#         "shipTo": { "country": "BE" },
#         "customer": { "email": "Ada@Example.ORG", "vatId": null },
#         "lines": [
#           { "sku": "wid-001", "qty": 2, "unitCents": 999 },
#           { "sku": "GAD-002", "qty": 1, "unitCents": 1500 }
#         ],
#         "declared": { "netCents": 3498, "vatCents": 509, "grossCents": 4007 }
#       },
#       {
#         "orderId": "A200",
#         "shipTo": { "country": "US" },
#         "customer": { "email": "bob@example.org", "vatId": null },
#         "lines": [
#           { "sku": "WID-001", "qty": 2, "unitCents": 999 },
#           { "sku": "GAD-002", "qty": 1, "unitCents": 1500 }
#         ],
#         "declared": { "netCents": 3498, "vatCents": 0, "grossCents": 3498 }
#       },
#       {
#         "orderId": "A300",
#         "shipTo": { "country": "NL" },
#         "customer": { "email": "acct@company.nl", "vatId": "NL999999999B01" },
#         "lines": [
#           { "sku": "WID-001", "qty": 2, "unitCents": 999 },
#           { "sku": "GAD-002", "qty": 1, "unitCents": 1500 }
#         ],
#         "declared": { "netCents": 3498, "vatCents": 0, "grossCents": 3498 }
#       },
#       {
#         "orderId": "A301",
#         "shipTo": { "country": "NL" },
#         "customer": { "email": "billing@company.nl", "vatId": "NL999999999B01" },
#         "lines": [
#           { "sku": "WID-001", "qty": 2, "unitCents": 999 },
#           { "sku": "GAD-002", "qty": 1, "unitCents": 1500 }
#         ],
#         "declared": { "netCents": 3498, "vatCents": 0, "grossCents": 3498 }
#       },
#       {
#         "orderId": "A400",
#         "shipTo": { "country": "BE" },
#         "customer": { "email": "ada@other.example", "vatId": null },
#         "lines": [
#           { "sku": "WID-001", "qty": 2, "unitCents": 999 },
#           { "sku": "GAD-002", "qty": 1, "unitCents": 1500 }
#         ],
#         "declared": { "netCents": 3498, "vatCents": 508, "grossCents": 4006 }
#       }
#     ]
#   }"""^^rdf:JSON .
#   ("""{
#     "meta~data": { "batch": "2025-12-18" },
#     "orders": [
#       {
#         "orderId": "A100",
#         "shipTo": { "country": "BE" },
#         "customer": { "email": "Ada@Example.ORG", "vatId": null },
#         "lines": [
#           { "sku": "wid-001", "qty": 2, "unitCents": 999 },
#           { "sku": "GAD-002", "qty": 1, "unitCents": 1500 }
#         ],
#         "declared": { "netCents": 3498, "vatCents": 509, "grossCents": 4007 }
#       },
#       {
#         "orderId": "A200",
#         "shipTo": { "country": "US" },
#         "customer": { "email": "bob@example.org", "vatId": null },
#         "lines": [
#           { "sku": "WID-001", "qty": 2, "unitCents": 999 },
#           { "sku": "GAD-002", "qty": 1, "unitCents": 1500 }
#         ],
#         "declared": { "netCents": 3498, "vatCents": 0, "grossCents": 3498 }
#       },
#       {
#         "orderId": "A300",
#         "shipTo": { "country": "NL" },
#         "customer": { "email": "acct@company.nl", "vatId": "NL999999999B01" },
#         "lines": [
#           { "sku": "WID-001", "qty": 2, "unitCents": 999 },
#           { "sku": "GAD-002", "qty": 1, "unitCents": 1500 }
#         ],
#         "declared": { "netCents": 3498, "vatCents": 0, "grossCents": 3498 }
#       },
#       {
#         "orderId": "A301",
#         "shipTo": { "country": "NL" },
#         "customer": { "email": "billing@company.nl", "vatId": "NL999999999B01" },
#         "lines": [
#           { "sku": "WID-001", "qty": 2, "unitCents": 999 },
#           { "sku": "GAD-002", "qty": 1, "unitCents": 1500 }
#         ],
#         "declared": { "netCents": 3498, "vatCents": 0, "grossCents": 3498 }
#       },
#       {
#         "orderId": "A400",
#         "shipTo": { "country": "BE" },
#         "customer": { "email": "ada@other.example", "vatId": null },
#         "lines": [
#           { "sku": "WID-001", "qty": 2, "unitCents": 999 },
#           { "sku": "GAD-002", "qty": 1, "unitCents": 1500 }
#         ],
#         "declared": { "netCents": 3498, "vatCents": 508, "grossCents": 4006 }
#       }
#     ]
#   }"""^^rdf:JSON "/orders") string:jsonPointer ("""{"orderId":"A100","shipTo":{"country":"BE"},"customer":{"email":"Ada@Example.ORG","vatId":null},"lines":[{"sku":"wid-001","qty":2,"unitCents":999},{"sku":"GAD-002","qty":1,"unitCents":1500}],"declared":{"netCents":3498,"vatCents":509,"grossCents":4007}}"""^^rdf:JSON """{"orderId":"A200","shipTo":{"country":"US"},"customer":{"email":"bob@example.org","vatId":null},"lines":[{"sku":"WID-001","qty":2,"unitCents":999},{"sku":"GAD-002","qty":1,"unitCents":1500}],"declared":{"netCents":3498,"vatCents":0,"grossCents":3498}}"""^^rdf:JSON """{"orderId":"A300","shipTo":{"country":"NL"},"customer":{"email":"acct@company.nl","vatId":"NL999999999B01"},"lines":[{"sku":"WID-001","qty":2,"unitCents":999},{"sku":"GAD-002","qty":1,"unitCents":1500}],"declared":{"netCents":3498,"vatCents":0,"grossCents":3498}}"""^^rdf:JSON """{"orderId":"A301","shipTo":{"country":"NL"},"customer":{"email":"billing@company.nl","vatId":"NL999999999B01"},"lines":[{"sku":"WID-001","qty":2,"unitCents":999},{"sku":"GAD-002","qty":1,"unitCents":1500}],"declared":{"netCents":3498,"vatCents":0,"grossCents":3498}}"""^^rdf:JSON """{"orderId":"A400","shipTo":{"country":"BE"},"customer":{"email":"ada@other.example","vatId":null},"lines":[{"sku":"WID-001","qty":2,"unitCents":999},{"sku":"GAD-002","qty":1,"unitCents":1500}],"declared":{"netCents":3498,"vatCents":508,"grossCents":4006}}"""^^rdf:JSON) .
#   ("""{"orderId":"A100","shipTo":{"country":"BE"},"customer":{"email":"Ada@Example.ORG","vatId":null},"lines":[{"sku":"wid-001","qty":2,"unitCents":999},{"sku":"GAD-002","qty":1,"unitCents":1500}],"declared":{"netCents":3498,"vatCents":509,"grossCents":4007}}"""^^rdf:JSON """{"orderId":"A200","shipTo":{"country":"US"},"customer":{"email":"bob@example.org","vatId":null},"lines":[{"sku":"WID-001","qty":2,"unitCents":999},{"sku":"GAD-002","qty":1,"unitCents":1500}],"declared":{"netCents":3498,"vatCents":0,"grossCents":3498}}"""^^rdf:JSON """{"orderId":"A300","shipTo":{"country":"NL"},"customer":{"email":"acct@company.nl","vatId":"NL999999999B01"},"lines":[{"sku":"WID-001","qty":2,"unitCents":999},{"sku":"GAD-002","qty":1,"unitCents":1500}],"declared":{"netCents":3498,"vatCents":0,"grossCents":3498}}"""^^rdf:JSON """{"orderId":"A301","shipTo":{"country":"NL"},"customer":{"email":"billing@company.nl","vatId":"NL999999999B01"},"lines":[{"sku":"WID-001","qty":2,"unitCents":999},{"sku":"GAD-002","qty":1,"unitCents":1500}],"declared":{"netCents":3498,"vatCents":0,"grossCents":3498}}"""^^rdf:JSON """{"orderId":"A400","shipTo":{"country":"BE"},"customer":{"email":"ada@other.example","vatId":null},"lines":[{"sku":"WID-001","qty":2,"unitCents":999},{"sku":"GAD-002","qty":1,"unitCents":1500}],"declared":{"netCents":3498,"vatCents":508,"grossCents":4006}}"""^^rdf:JSON) list:iterate (4 """{"orderId":"A400","shipTo":{"country":"BE"},"customer":{"email":"ada@other.example","vatId":null},"lines":[{"sku":"WID-001","qty":2,"unitCents":999},{"sku":"GAD-002","qty":1,"unitCents":1500}],"declared":{"netCents":3498,"vatCents":508,"grossCents":4006}}"""^^rdf:JSON) .
#   ("""{"orderId":"A400","shipTo":{"country":"BE"},"customer":{"email":"ada@other.example","vatId":null},"lines":[{"sku":"WID-001","qty":2,"unitCents":999},{"sku":"GAD-002","qty":1,"unitCents":1500}],"declared":{"netCents":3498,"vatCents":508,"grossCents":4006}}"""^^rdf:JSON "/orderId") string:jsonPointer "A400" .
#   ("""{"orderId":"A400","shipTo":{"country":"BE"},"customer":{"email":"ada@other.example","vatId":null},"lines":[{"sku":"WID-001","qty":2,"unitCents":999},{"sku":"GAD-002","qty":1,"unitCents":1500}],"declared":{"netCents":3498,"vatCents":508,"grossCents":4006}}"""^^rdf:JSON "/shipTo/country") string:jsonPointer "BE" .
#   ("""{"orderId":"A400","shipTo":{"country":"BE"},"customer":{"email":"ada@other.example","vatId":null},"lines":[{"sku":"WID-001","qty":2,"unitCents":999},{"sku":"GAD-002","qty":1,"unitCents":1500}],"declared":{"netCents":3498,"vatCents":508,"grossCents":4006}}"""^^rdf:JSON "/customer") string:jsonPointer """{"email":"ada@other.example","vatId":null}"""^^rdf:JSON .
#   ("""{"email":"ada@other.example","vatId":null}"""^^rdf:JSON "/email") string:jsonPointer "ada@other.example" .
#   ("""{"email":"ada@other.example","vatId":null}"""^^rdf:JSON "/vatId") string:jsonPointer "null" .
#   ("""{"orderId":"A400","shipTo":{"country":"BE"},"customer":{"email":"ada@other.example","vatId":null},"lines":[{"sku":"WID-001","qty":2,"unitCents":999},{"sku":"GAD-002","qty":1,"unitCents":1500}],"declared":{"netCents":3498,"vatCents":508,"grossCents":4006}}"""^^rdf:JSON "/declared") string:jsonPointer """{"netCents":3498,"vatCents":508,"grossCents":4006}"""^^rdf:JSON .
#   ("""{"netCents":3498,"vatCents":508,"grossCents":4006}"""^^rdf:JSON "/netCents") string:jsonPointer 3498 .
#   ("""{"netCents":3498,"vatCents":508,"grossCents":4006}"""^^rdf:JSON "/vatCents") string:jsonPointer 508 .
#   ("""{"netCents":3498,"vatCents":508,"grossCents":4006}"""^^rdf:JSON "/grossCents") string:jsonPointer 4006 .
#   ("urn:example:order:%s" "A400") string:format "urn:example:order:A400" .
#   <urn:example:order:A400> log:uri "urn:example:order:A400" .
# via the schematic forward rule:
#   {
#     ex:feed ex:json ?J .
#     (?J "/orders") string:jsonPointer ?Orders .
#     ?Orders list:iterate (?OrderIndex ?OrderJson) .
#     (?OrderJson "/orderId") string:jsonPointer ?OrderId .
#     (?OrderJson "/shipTo/country") string:jsonPointer ?Country .
#     (?OrderJson "/customer") string:jsonPointer ?CustJson .
#     (?CustJson "/email") string:jsonPointer ?Email .
#     (?CustJson "/vatId") string:jsonPointer ?VatIdRaw .
#     (?OrderJson "/declared") string:jsonPointer ?Decl .
#     (?Decl "/netCents") string:jsonPointer ?NetD .
#     (?Decl "/vatCents") string:jsonPointer ?VatD .
#     (?Decl "/grossCents") string:jsonPointer ?GrossD .
#     ("urn:example:order:%s" ?OrderId) string:format ?OrderUriStr .
#     ?Order log:uri ?OrderUriStr .
#   } => {
#     ?Order a ex:Order .
#     ?Order ex:orderId ?OrderId .
#     ?Order ex:orderIndex ?OrderIndex .
#     ?Order ex:shipCountry ?Country .
#     ?Order ex:email ?Email .
#     ?Order ex:vatIdRaw ?VatIdRaw .
#     ?Order ex:declaredNetCents ?NetD .
#     ?Order ex:declaredVatCents ?VatD .
#     ?Order ex:declaredGrossCents ?GrossD .
#   } .
# with substitution (on rule variables):
#   ?Country = "BE"
#   ?CustJson = """{"email":"ada@other.example","vatId":null}"""^^rdf:JSON
#   ?Decl = """{"netCents":3498,"vatCents":508,"grossCents":4006}"""^^rdf:JSON
#   ?Email = "ada@other.example"
#   ?GrossD = 4006
#   ?J = """{
#     "meta~data": { "batch": "2025-12-18" },
#     "orders": [
#     {
#     "orderId": "A100",
#     "shipTo": { "country": "BE" },
#     "customer": { "email": "Ada@Example.ORG", "vatId": null },
#     "lines": [
#     { "sku": "wid-001", "qty": 2, "unitCents": 999 },
#     { "sku": "GAD-002", "qty": 1, "unitCents": 1500 }
#     ],
#     "declared": { "netCents": 3498, "vatCents": 509, "grossCents": 4007 }
#     },
#     {
#     "orderId": "A200",
#     "shipTo": { "country": "US" },
#     "customer": { "email": "bob@example.org", "vatId": null },
#     "lines": [
#     { "sku": "WID-001", "qty": 2, "unitCents": 999 },
#     { "sku": "GAD-002", "qty": 1, "unitCents": 1500 }
#     ],
#     "declared": { "netCents": 3498, "vatCents": 0, "grossCents": 3498 }
#     },
#     {
#     "orderId": "A300",
#     "shipTo": { "country": "NL" },
#     "customer": { "email": "acct@company.nl", "vatId": "NL999999999B01" },
#     "lines": [
#     { "sku": "WID-001", "qty": 2, "unitCents": 999 },
#     { "sku": "GAD-002", "qty": 1, "unitCents": 1500 }
#     ],
#     "declared": { "netCents": 3498, "vatCents": 0, "grossCents": 3498 }
#     },
#     {
#     "orderId": "A301",
#     "shipTo": { "country": "NL" },
#     "customer": { "email": "billing@company.nl", "vatId": "NL999999999B01" },
#     "lines": [
#     { "sku": "WID-001", "qty": 2, "unitCents": 999 },
#     { "sku": "GAD-002", "qty": 1, "unitCents": 1500 }
#     ],
#     "declared": { "netCents": 3498, "vatCents": 0, "grossCents": 3498 }
#     },
#     {
#     "orderId": "A400",
#     "shipTo": { "country": "BE" },
#     "customer": { "email": "ada@other.example", "vatId": null },
#     "lines": [
#     { "sku": "WID-001", "qty": 2, "unitCents": 999 },
#     { "sku": "GAD-002", "qty": 1, "unitCents": 1500 }
#     ],
#     "declared": { "netCents": 3498, "vatCents": 508, "grossCents": 4006 }
#     }
#     ]
#   }"""^^rdf:JSON
#   ?NetD = 3498
#   ?Order = <urn:example:order:A400>
#   ?OrderId = "A400"
#   ?OrderIndex = 4
#   ?OrderJson = """{"orderId":"A400","shipTo":{"country":"BE"},"customer":{"email":"ada@other.example","vatId":null},"lines":[{"sku":"WID-001","qty":2,"unitCents":999},{"sku":"GAD-002","qty":1,"unitCents":1500}],"declared":{"netCents":3498,"vatCents":508,"grossCents":4006}}"""^^rdf:JSON
#   ?OrderUriStr = "urn:example:order:A400"
#   ?Orders = ("""{"orderId":"A100","shipTo":{"country":"BE"},"customer":{"email":"Ada@Example.ORG","vatId":null},"lines":[{"sku":"wid-001","qty":2,"unitCents":999},{"sku":"GAD-002","qty":1,"unitCents":1500}],"declared":{"netCents":3498,"vatCents":509,"grossCents":4007}}"""^^rdf:JSON """{"orderId":"A200","shipTo":{"country":"US"},"customer":{"email":"bob@example.org","vatId":null},"lines":[{"sku":"WID-001","qty":2,"unitCents":999},{"sku":"GAD-002","qty":1,"unitCents":1500}],"declared":{"netCents":3498,"vatCents":0,"grossCents":3498}}"""^^rdf:JSON """{"orderId":"A300","shipTo":{"country":"NL"},"customer":{"email":"acct@company.nl","vatId":"NL999999999B01"},"lines":[{"sku":"WID-001","qty":2,"unitCents":999},{"sku":"GAD-002","qty":1,"unitCents":1500}],"declared":{"netCents":3498,"vatCents":0,"grossCents":3498}}"""^^rdf:JSON """{"orderId":"A301","shipTo":{"country":"NL"},"customer":{"email":"billing@company.nl","vatId":"NL999999999B01"},"lines":[{"sku":"WID-001","qty":2,"unitCents":999},{"sku":"GAD-002","qty":1,"unitCents":1500}],"declared":{"netCents":3498,"vatCents":0,"grossCents":3498}}"""^^rdf:JSON """{"orderId":"A400","shipTo":{"country":"BE"},"customer":{"email":"ada@other.example","vatId":null},"lines":[{"sku":"WID-001","qty":2,"unitCents":999},{"sku":"GAD-002","qty":1,"unitCents":1500}],"declared":{"netCents":3498,"vatCents":508,"grossCents":4006}}"""^^rdf:JSON)
#   ?VatD = 508
#   ?VatIdRaw = "null"
# Therefore the derived triple above is entailed by the rules and facts.
# ----------------------------------------------------------------------

<urn:example:order:A400> ex:declaredNetCents 3498 .

# ----------------------------------------------------------------------
# Proof for derived triple:
#   <urn:example:order:A400> ex:declaredVatCents 508 .
# It holds because the following instance of the rule body is provable:
#   ex:feed ex:json """{
#     "meta~data": { "batch": "2025-12-18" },
#     "orders": [
#       {
#         "orderId": "A100",
#         "shipTo": { "country": "BE" },
#         "customer": { "email": "Ada@Example.ORG", "vatId": null },
#         "lines": [
#           { "sku": "wid-001", "qty": 2, "unitCents": 999 },
#           { "sku": "GAD-002", "qty": 1, "unitCents": 1500 }
#         ],
#         "declared": { "netCents": 3498, "vatCents": 509, "grossCents": 4007 }
#       },
#       {
#         "orderId": "A200",
#         "shipTo": { "country": "US" },
#         "customer": { "email": "bob@example.org", "vatId": null },
#         "lines": [
#           { "sku": "WID-001", "qty": 2, "unitCents": 999 },
#           { "sku": "GAD-002", "qty": 1, "unitCents": 1500 }
#         ],
#         "declared": { "netCents": 3498, "vatCents": 0, "grossCents": 3498 }
#       },
#       {
#         "orderId": "A300",
#         "shipTo": { "country": "NL" },
#         "customer": { "email": "acct@company.nl", "vatId": "NL999999999B01" },
#         "lines": [
#           { "sku": "WID-001", "qty": 2, "unitCents": 999 },
#           { "sku": "GAD-002", "qty": 1, "unitCents": 1500 }
#         ],
#         "declared": { "netCents": 3498, "vatCents": 0, "grossCents": 3498 }
#       },
#       {
#         "orderId": "A301",
#         "shipTo": { "country": "NL" },
#         "customer": { "email": "billing@company.nl", "vatId": "NL999999999B01" },
#         "lines": [
#           { "sku": "WID-001", "qty": 2, "unitCents": 999 },
#           { "sku": "GAD-002", "qty": 1, "unitCents": 1500 }
#         ],
#         "declared": { "netCents": 3498, "vatCents": 0, "grossCents": 3498 }
#       },
#       {
#         "orderId": "A400",
#         "shipTo": { "country": "BE" },
#         "customer": { "email": "ada@other.example", "vatId": null },
#         "lines": [
#           { "sku": "WID-001", "qty": 2, "unitCents": 999 },
#           { "sku": "GAD-002", "qty": 1, "unitCents": 1500 }
#         ],
#         "declared": { "netCents": 3498, "vatCents": 508, "grossCents": 4006 }
#       }
#     ]
#   }"""^^rdf:JSON .
#   ("""{
#     "meta~data": { "batch": "2025-12-18" },
#     "orders": [
#       {
#         "orderId": "A100",
#         "shipTo": { "country": "BE" },
#         "customer": { "email": "Ada@Example.ORG", "vatId": null },
#         "lines": [
#           { "sku": "wid-001", "qty": 2, "unitCents": 999 },
#           { "sku": "GAD-002", "qty": 1, "unitCents": 1500 }
#         ],
#         "declared": { "netCents": 3498, "vatCents": 509, "grossCents": 4007 }
#       },
#       {
#         "orderId": "A200",
#         "shipTo": { "country": "US" },
#         "customer": { "email": "bob@example.org", "vatId": null },
#         "lines": [
#           { "sku": "WID-001", "qty": 2, "unitCents": 999 },
#           { "sku": "GAD-002", "qty": 1, "unitCents": 1500 }
#         ],
#         "declared": { "netCents": 3498, "vatCents": 0, "grossCents": 3498 }
#       },
#       {
#         "orderId": "A300",
#         "shipTo": { "country": "NL" },
#         "customer": { "email": "acct@company.nl", "vatId": "NL999999999B01" },
#         "lines": [
#           { "sku": "WID-001", "qty": 2, "unitCents": 999 },
#           { "sku": "GAD-002", "qty": 1, "unitCents": 1500 }
#         ],
#         "declared": { "netCents": 3498, "vatCents": 0, "grossCents": 3498 }
#       },
#       {
#         "orderId": "A301",
#         "shipTo": { "country": "NL" },
#         "customer": { "email": "billing@company.nl", "vatId": "NL999999999B01" },
#         "lines": [
#           { "sku": "WID-001", "qty": 2, "unitCents": 999 },
#           { "sku": "GAD-002", "qty": 1, "unitCents": 1500 }
#         ],
#         "declared": { "netCents": 3498, "vatCents": 0, "grossCents": 3498 }
#       },
#       {
#         "orderId": "A400",
#         "shipTo": { "country": "BE" },
#         "customer": { "email": "ada@other.example", "vatId": null },
#         "lines": [
#           { "sku": "WID-001", "qty": 2, "unitCents": 999 },
#           { "sku": "GAD-002", "qty": 1, "unitCents": 1500 }
#         ],
#         "declared": { "netCents": 3498, "vatCents": 508, "grossCents": 4006 }
#       }
#     ]
#   }"""^^rdf:JSON "/orders") string:jsonPointer ("""{"orderId":"A100","shipTo":{"country":"BE"},"customer":{"email":"Ada@Example.ORG","vatId":null},"lines":[{"sku":"wid-001","qty":2,"unitCents":999},{"sku":"GAD-002","qty":1,"unitCents":1500}],"declared":{"netCents":3498,"vatCents":509,"grossCents":4007}}"""^^rdf:JSON """{"orderId":"A200","shipTo":{"country":"US"},"customer":{"email":"bob@example.org","vatId":null},"lines":[{"sku":"WID-001","qty":2,"unitCents":999},{"sku":"GAD-002","qty":1,"unitCents":1500}],"declared":{"netCents":3498,"vatCents":0,"grossCents":3498}}"""^^rdf:JSON """{"orderId":"A300","shipTo":{"country":"NL"},"customer":{"email":"acct@company.nl","vatId":"NL999999999B01"},"lines":[{"sku":"WID-001","qty":2,"unitCents":999},{"sku":"GAD-002","qty":1,"unitCents":1500}],"declared":{"netCents":3498,"vatCents":0,"grossCents":3498}}"""^^rdf:JSON """{"orderId":"A301","shipTo":{"country":"NL"},"customer":{"email":"billing@company.nl","vatId":"NL999999999B01"},"lines":[{"sku":"WID-001","qty":2,"unitCents":999},{"sku":"GAD-002","qty":1,"unitCents":1500}],"declared":{"netCents":3498,"vatCents":0,"grossCents":3498}}"""^^rdf:JSON """{"orderId":"A400","shipTo":{"country":"BE"},"customer":{"email":"ada@other.example","vatId":null},"lines":[{"sku":"WID-001","qty":2,"unitCents":999},{"sku":"GAD-002","qty":1,"unitCents":1500}],"declared":{"netCents":3498,"vatCents":508,"grossCents":4006}}"""^^rdf:JSON) .
#   ("""{"orderId":"A100","shipTo":{"country":"BE"},"customer":{"email":"Ada@Example.ORG","vatId":null},"lines":[{"sku":"wid-001","qty":2,"unitCents":999},{"sku":"GAD-002","qty":1,"unitCents":1500}],"declared":{"netCents":3498,"vatCents":509,"grossCents":4007}}"""^^rdf:JSON """{"orderId":"A200","shipTo":{"country":"US"},"customer":{"email":"bob@example.org","vatId":null},"lines":[{"sku":"WID-001","qty":2,"unitCents":999},{"sku":"GAD-002","qty":1,"unitCents":1500}],"declared":{"netCents":3498,"vatCents":0,"grossCents":3498}}"""^^rdf:JSON """{"orderId":"A300","shipTo":{"country":"NL"},"customer":{"email":"acct@company.nl","vatId":"NL999999999B01"},"lines":[{"sku":"WID-001","qty":2,"unitCents":999},{"sku":"GAD-002","qty":1,"unitCents":1500}],"declared":{"netCents":3498,"vatCents":0,"grossCents":3498}}"""^^rdf:JSON """{"orderId":"A301","shipTo":{"country":"NL"},"customer":{"email":"billing@company.nl","vatId":"NL999999999B01"},"lines":[{"sku":"WID-001","qty":2,"unitCents":999},{"sku":"GAD-002","qty":1,"unitCents":1500}],"declared":{"netCents":3498,"vatCents":0,"grossCents":3498}}"""^^rdf:JSON """{"orderId":"A400","shipTo":{"country":"BE"},"customer":{"email":"ada@other.example","vatId":null},"lines":[{"sku":"WID-001","qty":2,"unitCents":999},{"sku":"GAD-002","qty":1,"unitCents":1500}],"declared":{"netCents":3498,"vatCents":508,"grossCents":4006}}"""^^rdf:JSON) list:iterate (4 """{"orderId":"A400","shipTo":{"country":"BE"},"customer":{"email":"ada@other.example","vatId":null},"lines":[{"sku":"WID-001","qty":2,"unitCents":999},{"sku":"GAD-002","qty":1,"unitCents":1500}],"declared":{"netCents":3498,"vatCents":508,"grossCents":4006}}"""^^rdf:JSON) .
#   ("""{"orderId":"A400","shipTo":{"country":"BE"},"customer":{"email":"ada@other.example","vatId":null},"lines":[{"sku":"WID-001","qty":2,"unitCents":999},{"sku":"GAD-002","qty":1,"unitCents":1500}],"declared":{"netCents":3498,"vatCents":508,"grossCents":4006}}"""^^rdf:JSON "/orderId") string:jsonPointer "A400" .
#   ("""{"orderId":"A400","shipTo":{"country":"BE"},"customer":{"email":"ada@other.example","vatId":null},"lines":[{"sku":"WID-001","qty":2,"unitCents":999},{"sku":"GAD-002","qty":1,"unitCents":1500}],"declared":{"netCents":3498,"vatCents":508,"grossCents":4006}}"""^^rdf:JSON "/shipTo/country") string:jsonPointer "BE" .
#   ("""{"orderId":"A400","shipTo":{"country":"BE"},"customer":{"email":"ada@other.example","vatId":null},"lines":[{"sku":"WID-001","qty":2,"unitCents":999},{"sku":"GAD-002","qty":1,"unitCents":1500}],"declared":{"netCents":3498,"vatCents":508,"grossCents":4006}}"""^^rdf:JSON "/customer") string:jsonPointer """{"email":"ada@other.example","vatId":null}"""^^rdf:JSON .
#   ("""{"email":"ada@other.example","vatId":null}"""^^rdf:JSON "/email") string:jsonPointer "ada@other.example" .
#   ("""{"email":"ada@other.example","vatId":null}"""^^rdf:JSON "/vatId") string:jsonPointer "null" .
#   ("""{"orderId":"A400","shipTo":{"country":"BE"},"customer":{"email":"ada@other.example","vatId":null},"lines":[{"sku":"WID-001","qty":2,"unitCents":999},{"sku":"GAD-002","qty":1,"unitCents":1500}],"declared":{"netCents":3498,"vatCents":508,"grossCents":4006}}"""^^rdf:JSON "/declared") string:jsonPointer """{"netCents":3498,"vatCents":508,"grossCents":4006}"""^^rdf:JSON .
#   ("""{"netCents":3498,"vatCents":508,"grossCents":4006}"""^^rdf:JSON "/netCents") string:jsonPointer 3498 .
#   ("""{"netCents":3498,"vatCents":508,"grossCents":4006}"""^^rdf:JSON "/vatCents") string:jsonPointer 508 .
#   ("""{"netCents":3498,"vatCents":508,"grossCents":4006}"""^^rdf:JSON "/grossCents") string:jsonPointer 4006 .
#   ("urn:example:order:%s" "A400") string:format "urn:example:order:A400" .
#   <urn:example:order:A400> log:uri "urn:example:order:A400" .
# via the schematic forward rule:
#   {
#     ex:feed ex:json ?J .
#     (?J "/orders") string:jsonPointer ?Orders .
#     ?Orders list:iterate (?OrderIndex ?OrderJson) .
#     (?OrderJson "/orderId") string:jsonPointer ?OrderId .
#     (?OrderJson "/shipTo/country") string:jsonPointer ?Country .
#     (?OrderJson "/customer") string:jsonPointer ?CustJson .
#     (?CustJson "/email") string:jsonPointer ?Email .
#     (?CustJson "/vatId") string:jsonPointer ?VatIdRaw .
#     (?OrderJson "/declared") string:jsonPointer ?Decl .
#     (?Decl "/netCents") string:jsonPointer ?NetD .
#     (?Decl "/vatCents") string:jsonPointer ?VatD .
#     (?Decl "/grossCents") string:jsonPointer ?GrossD .
#     ("urn:example:order:%s" ?OrderId) string:format ?OrderUriStr .
#     ?Order log:uri ?OrderUriStr .
#   } => {
#     ?Order a ex:Order .
#     ?Order ex:orderId ?OrderId .
#     ?Order ex:orderIndex ?OrderIndex .
#     ?Order ex:shipCountry ?Country .
#     ?Order ex:email ?Email .
#     ?Order ex:vatIdRaw ?VatIdRaw .
#     ?Order ex:declaredNetCents ?NetD .
#     ?Order ex:declaredVatCents ?VatD .
#     ?Order ex:declaredGrossCents ?GrossD .
#   } .
# with substitution (on rule variables):
#   ?Country = "BE"
#   ?CustJson = """{"email":"ada@other.example","vatId":null}"""^^rdf:JSON
#   ?Decl = """{"netCents":3498,"vatCents":508,"grossCents":4006}"""^^rdf:JSON
#   ?Email = "ada@other.example"
#   ?GrossD = 4006
#   ?J = """{
#     "meta~data": { "batch": "2025-12-18" },
#     "orders": [
#     {
#     "orderId": "A100",
#     "shipTo": { "country": "BE" },
#     "customer": { "email": "Ada@Example.ORG", "vatId": null },
#     "lines": [
#     { "sku": "wid-001", "qty": 2, "unitCents": 999 },
#     { "sku": "GAD-002", "qty": 1, "unitCents": 1500 }
#     ],
#     "declared": { "netCents": 3498, "vatCents": 509, "grossCents": 4007 }
#     },
#     {
#     "orderId": "A200",
#     "shipTo": { "country": "US" },
#     "customer": { "email": "bob@example.org", "vatId": null },
#     "lines": [
#     { "sku": "WID-001", "qty": 2, "unitCents": 999 },
#     { "sku": "GAD-002", "qty": 1, "unitCents": 1500 }
#     ],
#     "declared": { "netCents": 3498, "vatCents": 0, "grossCents": 3498 }
#     },
#     {
#     "orderId": "A300",
#     "shipTo": { "country": "NL" },
#     "customer": { "email": "acct@company.nl", "vatId": "NL999999999B01" },
#     "lines": [
#     { "sku": "WID-001", "qty": 2, "unitCents": 999 },
#     { "sku": "GAD-002", "qty": 1, "unitCents": 1500 }
#     ],
#     "declared": { "netCents": 3498, "vatCents": 0, "grossCents": 3498 }
#     },
#     {
#     "orderId": "A301",
#     "shipTo": { "country": "NL" },
#     "customer": { "email": "billing@company.nl", "vatId": "NL999999999B01" },
#     "lines": [
#     { "sku": "WID-001", "qty": 2, "unitCents": 999 },
#     { "sku": "GAD-002", "qty": 1, "unitCents": 1500 }
#     ],
#     "declared": { "netCents": 3498, "vatCents": 0, "grossCents": 3498 }
#     },
#     {
#     "orderId": "A400",
#     "shipTo": { "country": "BE" },
#     "customer": { "email": "ada@other.example", "vatId": null },
#     "lines": [
#     { "sku": "WID-001", "qty": 2, "unitCents": 999 },
#     { "sku": "GAD-002", "qty": 1, "unitCents": 1500 }
#     ],
#     "declared": { "netCents": 3498, "vatCents": 508, "grossCents": 4006 }
#     }
#     ]
#   }"""^^rdf:JSON
#   ?NetD = 3498
#   ?Order = <urn:example:order:A400>
#   ?OrderId = "A400"
#   ?OrderIndex = 4
#   ?OrderJson = """{"orderId":"A400","shipTo":{"country":"BE"},"customer":{"email":"ada@other.example","vatId":null},"lines":[{"sku":"WID-001","qty":2,"unitCents":999},{"sku":"GAD-002","qty":1,"unitCents":1500}],"declared":{"netCents":3498,"vatCents":508,"grossCents":4006}}"""^^rdf:JSON
#   ?OrderUriStr = "urn:example:order:A400"
#   ?Orders = ("""{"orderId":"A100","shipTo":{"country":"BE"},"customer":{"email":"Ada@Example.ORG","vatId":null},"lines":[{"sku":"wid-001","qty":2,"unitCents":999},{"sku":"GAD-002","qty":1,"unitCents":1500}],"declared":{"netCents":3498,"vatCents":509,"grossCents":4007}}"""^^rdf:JSON """{"orderId":"A200","shipTo":{"country":"US"},"customer":{"email":"bob@example.org","vatId":null},"lines":[{"sku":"WID-001","qty":2,"unitCents":999},{"sku":"GAD-002","qty":1,"unitCents":1500}],"declared":{"netCents":3498,"vatCents":0,"grossCents":3498}}"""^^rdf:JSON """{"orderId":"A300","shipTo":{"country":"NL"},"customer":{"email":"acct@company.nl","vatId":"NL999999999B01"},"lines":[{"sku":"WID-001","qty":2,"unitCents":999},{"sku":"GAD-002","qty":1,"unitCents":1500}],"declared":{"netCents":3498,"vatCents":0,"grossCents":3498}}"""^^rdf:JSON """{"orderId":"A301","shipTo":{"country":"NL"},"customer":{"email":"billing@company.nl","vatId":"NL999999999B01"},"lines":[{"sku":"WID-001","qty":2,"unitCents":999},{"sku":"GAD-002","qty":1,"unitCents":1500}],"declared":{"netCents":3498,"vatCents":0,"grossCents":3498}}"""^^rdf:JSON """{"orderId":"A400","shipTo":{"country":"BE"},"customer":{"email":"ada@other.example","vatId":null},"lines":[{"sku":"WID-001","qty":2,"unitCents":999},{"sku":"GAD-002","qty":1,"unitCents":1500}],"declared":{"netCents":3498,"vatCents":508,"grossCents":4006}}"""^^rdf:JSON)
#   ?VatD = 508
#   ?VatIdRaw = "null"
# Therefore the derived triple above is entailed by the rules and facts.
# ----------------------------------------------------------------------

<urn:example:order:A400> ex:declaredVatCents 508 .

# ----------------------------------------------------------------------
# Proof for derived triple:
#   <urn:example:order:A400> ex:declaredGrossCents 4006 .
# It holds because the following instance of the rule body is provable:
#   ex:feed ex:json """{
#     "meta~data": { "batch": "2025-12-18" },
#     "orders": [
#       {
#         "orderId": "A100",
#         "shipTo": { "country": "BE" },
#         "customer": { "email": "Ada@Example.ORG", "vatId": null },
#         "lines": [
#           { "sku": "wid-001", "qty": 2, "unitCents": 999 },
#           { "sku": "GAD-002", "qty": 1, "unitCents": 1500 }
#         ],
#         "declared": { "netCents": 3498, "vatCents": 509, "grossCents": 4007 }
#       },
#       {
#         "orderId": "A200",
#         "shipTo": { "country": "US" },
#         "customer": { "email": "bob@example.org", "vatId": null },
#         "lines": [
#           { "sku": "WID-001", "qty": 2, "unitCents": 999 },
#           { "sku": "GAD-002", "qty": 1, "unitCents": 1500 }
#         ],
#         "declared": { "netCents": 3498, "vatCents": 0, "grossCents": 3498 }
#       },
#       {
#         "orderId": "A300",
#         "shipTo": { "country": "NL" },
#         "customer": { "email": "acct@company.nl", "vatId": "NL999999999B01" },
#         "lines": [
#           { "sku": "WID-001", "qty": 2, "unitCents": 999 },
#           { "sku": "GAD-002", "qty": 1, "unitCents": 1500 }
#         ],
#         "declared": { "netCents": 3498, "vatCents": 0, "grossCents": 3498 }
#       },
#       {
#         "orderId": "A301",
#         "shipTo": { "country": "NL" },
#         "customer": { "email": "billing@company.nl", "vatId": "NL999999999B01" },
#         "lines": [
#           { "sku": "WID-001", "qty": 2, "unitCents": 999 },
#           { "sku": "GAD-002", "qty": 1, "unitCents": 1500 }
#         ],
#         "declared": { "netCents": 3498, "vatCents": 0, "grossCents": 3498 }
#       },
#       {
#         "orderId": "A400",
#         "shipTo": { "country": "BE" },
#         "customer": { "email": "ada@other.example", "vatId": null },
#         "lines": [
#           { "sku": "WID-001", "qty": 2, "unitCents": 999 },
#           { "sku": "GAD-002", "qty": 1, "unitCents": 1500 }
#         ],
#         "declared": { "netCents": 3498, "vatCents": 508, "grossCents": 4006 }
#       }
#     ]
#   }"""^^rdf:JSON .
#   ("""{
#     "meta~data": { "batch": "2025-12-18" },
#     "orders": [
#       {
#         "orderId": "A100",
#         "shipTo": { "country": "BE" },
#         "customer": { "email": "Ada@Example.ORG", "vatId": null },
#         "lines": [
#           { "sku": "wid-001", "qty": 2, "unitCents": 999 },
#           { "sku": "GAD-002", "qty": 1, "unitCents": 1500 }
#         ],
#         "declared": { "netCents": 3498, "vatCents": 509, "grossCents": 4007 }
#       },
#       {
#         "orderId": "A200",
#         "shipTo": { "country": "US" },
#         "customer": { "email": "bob@example.org", "vatId": null },
#         "lines": [
#           { "sku": "WID-001", "qty": 2, "unitCents": 999 },
#           { "sku": "GAD-002", "qty": 1, "unitCents": 1500 }
#         ],
#         "declared": { "netCents": 3498, "vatCents": 0, "grossCents": 3498 }
#       },
#       {
#         "orderId": "A300",
#         "shipTo": { "country": "NL" },
#         "customer": { "email": "acct@company.nl", "vatId": "NL999999999B01" },
#         "lines": [
#           { "sku": "WID-001", "qty": 2, "unitCents": 999 },
#           { "sku": "GAD-002", "qty": 1, "unitCents": 1500 }
#         ],
#         "declared": { "netCents": 3498, "vatCents": 0, "grossCents": 3498 }
#       },
#       {
#         "orderId": "A301",
#         "shipTo": { "country": "NL" },
#         "customer": { "email": "billing@company.nl", "vatId": "NL999999999B01" },
#         "lines": [
#           { "sku": "WID-001", "qty": 2, "unitCents": 999 },
#           { "sku": "GAD-002", "qty": 1, "unitCents": 1500 }
#         ],
#         "declared": { "netCents": 3498, "vatCents": 0, "grossCents": 3498 }
#       },
#       {
#         "orderId": "A400",
#         "shipTo": { "country": "BE" },
#         "customer": { "email": "ada@other.example", "vatId": null },
#         "lines": [
#           { "sku": "WID-001", "qty": 2, "unitCents": 999 },
#           { "sku": "GAD-002", "qty": 1, "unitCents": 1500 }
#         ],
#         "declared": { "netCents": 3498, "vatCents": 508, "grossCents": 4006 }
#       }
#     ]
#   }"""^^rdf:JSON "/orders") string:jsonPointer ("""{"orderId":"A100","shipTo":{"country":"BE"},"customer":{"email":"Ada@Example.ORG","vatId":null},"lines":[{"sku":"wid-001","qty":2,"unitCents":999},{"sku":"GAD-002","qty":1,"unitCents":1500}],"declared":{"netCents":3498,"vatCents":509,"grossCents":4007}}"""^^rdf:JSON """{"orderId":"A200","shipTo":{"country":"US"},"customer":{"email":"bob@example.org","vatId":null},"lines":[{"sku":"WID-001","qty":2,"unitCents":999},{"sku":"GAD-002","qty":1,"unitCents":1500}],"declared":{"netCents":3498,"vatCents":0,"grossCents":3498}}"""^^rdf:JSON """{"orderId":"A300","shipTo":{"country":"NL"},"customer":{"email":"acct@company.nl","vatId":"NL999999999B01"},"lines":[{"sku":"WID-001","qty":2,"unitCents":999},{"sku":"GAD-002","qty":1,"unitCents":1500}],"declared":{"netCents":3498,"vatCents":0,"grossCents":3498}}"""^^rdf:JSON """{"orderId":"A301","shipTo":{"country":"NL"},"customer":{"email":"billing@company.nl","vatId":"NL999999999B01"},"lines":[{"sku":"WID-001","qty":2,"unitCents":999},{"sku":"GAD-002","qty":1,"unitCents":1500}],"declared":{"netCents":3498,"vatCents":0,"grossCents":3498}}"""^^rdf:JSON """{"orderId":"A400","shipTo":{"country":"BE"},"customer":{"email":"ada@other.example","vatId":null},"lines":[{"sku":"WID-001","qty":2,"unitCents":999},{"sku":"GAD-002","qty":1,"unitCents":1500}],"declared":{"netCents":3498,"vatCents":508,"grossCents":4006}}"""^^rdf:JSON) .
#   ("""{"orderId":"A100","shipTo":{"country":"BE"},"customer":{"email":"Ada@Example.ORG","vatId":null},"lines":[{"sku":"wid-001","qty":2,"unitCents":999},{"sku":"GAD-002","qty":1,"unitCents":1500}],"declared":{"netCents":3498,"vatCents":509,"grossCents":4007}}"""^^rdf:JSON """{"orderId":"A200","shipTo":{"country":"US"},"customer":{"email":"bob@example.org","vatId":null},"lines":[{"sku":"WID-001","qty":2,"unitCents":999},{"sku":"GAD-002","qty":1,"unitCents":1500}],"declared":{"netCents":3498,"vatCents":0,"grossCents":3498}}"""^^rdf:JSON """{"orderId":"A300","shipTo":{"country":"NL"},"customer":{"email":"acct@company.nl","vatId":"NL999999999B01"},"lines":[{"sku":"WID-001","qty":2,"unitCents":999},{"sku":"GAD-002","qty":1,"unitCents":1500}],"declared":{"netCents":3498,"vatCents":0,"grossCents":3498}}"""^^rdf:JSON """{"orderId":"A301","shipTo":{"country":"NL"},"customer":{"email":"billing@company.nl","vatId":"NL999999999B01"},"lines":[{"sku":"WID-001","qty":2,"unitCents":999},{"sku":"GAD-002","qty":1,"unitCents":1500}],"declared":{"netCents":3498,"vatCents":0,"grossCents":3498}}"""^^rdf:JSON """{"orderId":"A400","shipTo":{"country":"BE"},"customer":{"email":"ada@other.example","vatId":null},"lines":[{"sku":"WID-001","qty":2,"unitCents":999},{"sku":"GAD-002","qty":1,"unitCents":1500}],"declared":{"netCents":3498,"vatCents":508,"grossCents":4006}}"""^^rdf:JSON) list:iterate (4 """{"orderId":"A400","shipTo":{"country":"BE"},"customer":{"email":"ada@other.example","vatId":null},"lines":[{"sku":"WID-001","qty":2,"unitCents":999},{"sku":"GAD-002","qty":1,"unitCents":1500}],"declared":{"netCents":3498,"vatCents":508,"grossCents":4006}}"""^^rdf:JSON) .
#   ("""{"orderId":"A400","shipTo":{"country":"BE"},"customer":{"email":"ada@other.example","vatId":null},"lines":[{"sku":"WID-001","qty":2,"unitCents":999},{"sku":"GAD-002","qty":1,"unitCents":1500}],"declared":{"netCents":3498,"vatCents":508,"grossCents":4006}}"""^^rdf:JSON "/orderId") string:jsonPointer "A400" .
#   ("""{"orderId":"A400","shipTo":{"country":"BE"},"customer":{"email":"ada@other.example","vatId":null},"lines":[{"sku":"WID-001","qty":2,"unitCents":999},{"sku":"GAD-002","qty":1,"unitCents":1500}],"declared":{"netCents":3498,"vatCents":508,"grossCents":4006}}"""^^rdf:JSON "/shipTo/country") string:jsonPointer "BE" .
#   ("""{"orderId":"A400","shipTo":{"country":"BE"},"customer":{"email":"ada@other.example","vatId":null},"lines":[{"sku":"WID-001","qty":2,"unitCents":999},{"sku":"GAD-002","qty":1,"unitCents":1500}],"declared":{"netCents":3498,"vatCents":508,"grossCents":4006}}"""^^rdf:JSON "/customer") string:jsonPointer """{"email":"ada@other.example","vatId":null}"""^^rdf:JSON .
#   ("""{"email":"ada@other.example","vatId":null}"""^^rdf:JSON "/email") string:jsonPointer "ada@other.example" .
#   ("""{"email":"ada@other.example","vatId":null}"""^^rdf:JSON "/vatId") string:jsonPointer "null" .
#   ("""{"orderId":"A400","shipTo":{"country":"BE"},"customer":{"email":"ada@other.example","vatId":null},"lines":[{"sku":"WID-001","qty":2,"unitCents":999},{"sku":"GAD-002","qty":1,"unitCents":1500}],"declared":{"netCents":3498,"vatCents":508,"grossCents":4006}}"""^^rdf:JSON "/declared") string:jsonPointer """{"netCents":3498,"vatCents":508,"grossCents":4006}"""^^rdf:JSON .
#   ("""{"netCents":3498,"vatCents":508,"grossCents":4006}"""^^rdf:JSON "/netCents") string:jsonPointer 3498 .
#   ("""{"netCents":3498,"vatCents":508,"grossCents":4006}"""^^rdf:JSON "/vatCents") string:jsonPointer 508 .
#   ("""{"netCents":3498,"vatCents":508,"grossCents":4006}"""^^rdf:JSON "/grossCents") string:jsonPointer 4006 .
#   ("urn:example:order:%s" "A400") string:format "urn:example:order:A400" .
#   <urn:example:order:A400> log:uri "urn:example:order:A400" .
# via the schematic forward rule:
#   {
#     ex:feed ex:json ?J .
#     (?J "/orders") string:jsonPointer ?Orders .
#     ?Orders list:iterate (?OrderIndex ?OrderJson) .
#     (?OrderJson "/orderId") string:jsonPointer ?OrderId .
#     (?OrderJson "/shipTo/country") string:jsonPointer ?Country .
#     (?OrderJson "/customer") string:jsonPointer ?CustJson .
#     (?CustJson "/email") string:jsonPointer ?Email .
#     (?CustJson "/vatId") string:jsonPointer ?VatIdRaw .
#     (?OrderJson "/declared") string:jsonPointer ?Decl .
#     (?Decl "/netCents") string:jsonPointer ?NetD .
#     (?Decl "/vatCents") string:jsonPointer ?VatD .
#     (?Decl "/grossCents") string:jsonPointer ?GrossD .
#     ("urn:example:order:%s" ?OrderId) string:format ?OrderUriStr .
#     ?Order log:uri ?OrderUriStr .
#   } => {
#     ?Order a ex:Order .
#     ?Order ex:orderId ?OrderId .
#     ?Order ex:orderIndex ?OrderIndex .
#     ?Order ex:shipCountry ?Country .
#     ?Order ex:email ?Email .
#     ?Order ex:vatIdRaw ?VatIdRaw .
#     ?Order ex:declaredNetCents ?NetD .
#     ?Order ex:declaredVatCents ?VatD .
#     ?Order ex:declaredGrossCents ?GrossD .
#   } .
# with substitution (on rule variables):
#   ?Country = "BE"
#   ?CustJson = """{"email":"ada@other.example","vatId":null}"""^^rdf:JSON
#   ?Decl = """{"netCents":3498,"vatCents":508,"grossCents":4006}"""^^rdf:JSON
#   ?Email = "ada@other.example"
#   ?GrossD = 4006
#   ?J = """{
#     "meta~data": { "batch": "2025-12-18" },
#     "orders": [
#     {
#     "orderId": "A100",
#     "shipTo": { "country": "BE" },
#     "customer": { "email": "Ada@Example.ORG", "vatId": null },
#     "lines": [
#     { "sku": "wid-001", "qty": 2, "unitCents": 999 },
#     { "sku": "GAD-002", "qty": 1, "unitCents": 1500 }
#     ],
#     "declared": { "netCents": 3498, "vatCents": 509, "grossCents": 4007 }
#     },
#     {
#     "orderId": "A200",
#     "shipTo": { "country": "US" },
#     "customer": { "email": "bob@example.org", "vatId": null },
#     "lines": [
#     { "sku": "WID-001", "qty": 2, "unitCents": 999 },
#     { "sku": "GAD-002", "qty": 1, "unitCents": 1500 }
#     ],
#     "declared": { "netCents": 3498, "vatCents": 0, "grossCents": 3498 }
#     },
#     {
#     "orderId": "A300",
#     "shipTo": { "country": "NL" },
#     "customer": { "email": "acct@company.nl", "vatId": "NL999999999B01" },
#     "lines": [
#     { "sku": "WID-001", "qty": 2, "unitCents": 999 },
#     { "sku": "GAD-002", "qty": 1, "unitCents": 1500 }
#     ],
#     "declared": { "netCents": 3498, "vatCents": 0, "grossCents": 3498 }
#     },
#     {
#     "orderId": "A301",
#     "shipTo": { "country": "NL" },
#     "customer": { "email": "billing@company.nl", "vatId": "NL999999999B01" },
#     "lines": [
#     { "sku": "WID-001", "qty": 2, "unitCents": 999 },
#     { "sku": "GAD-002", "qty": 1, "unitCents": 1500 }
#     ],
#     "declared": { "netCents": 3498, "vatCents": 0, "grossCents": 3498 }
#     },
#     {
#     "orderId": "A400",
#     "shipTo": { "country": "BE" },
#     "customer": { "email": "ada@other.example", "vatId": null },
#     "lines": [
#     { "sku": "WID-001", "qty": 2, "unitCents": 999 },
#     { "sku": "GAD-002", "qty": 1, "unitCents": 1500 }
#     ],
#     "declared": { "netCents": 3498, "vatCents": 508, "grossCents": 4006 }
#     }
#     ]
#   }"""^^rdf:JSON
#   ?NetD = 3498
#   ?Order = <urn:example:order:A400>
#   ?OrderId = "A400"
#   ?OrderIndex = 4
#   ?OrderJson = """{"orderId":"A400","shipTo":{"country":"BE"},"customer":{"email":"ada@other.example","vatId":null},"lines":[{"sku":"WID-001","qty":2,"unitCents":999},{"sku":"GAD-002","qty":1,"unitCents":1500}],"declared":{"netCents":3498,"vatCents":508,"grossCents":4006}}"""^^rdf:JSON
#   ?OrderUriStr = "urn:example:order:A400"
#   ?Orders = ("""{"orderId":"A100","shipTo":{"country":"BE"},"customer":{"email":"Ada@Example.ORG","vatId":null},"lines":[{"sku":"wid-001","qty":2,"unitCents":999},{"sku":"GAD-002","qty":1,"unitCents":1500}],"declared":{"netCents":3498,"vatCents":509,"grossCents":4007}}"""^^rdf:JSON """{"orderId":"A200","shipTo":{"country":"US"},"customer":{"email":"bob@example.org","vatId":null},"lines":[{"sku":"WID-001","qty":2,"unitCents":999},{"sku":"GAD-002","qty":1,"unitCents":1500}],"declared":{"netCents":3498,"vatCents":0,"grossCents":3498}}"""^^rdf:JSON """{"orderId":"A300","shipTo":{"country":"NL"},"customer":{"email":"acct@company.nl","vatId":"NL999999999B01"},"lines":[{"sku":"WID-001","qty":2,"unitCents":999},{"sku":"GAD-002","qty":1,"unitCents":1500}],"declared":{"netCents":3498,"vatCents":0,"grossCents":3498}}"""^^rdf:JSON """{"orderId":"A301","shipTo":{"country":"NL"},"customer":{"email":"billing@company.nl","vatId":"NL999999999B01"},"lines":[{"sku":"WID-001","qty":2,"unitCents":999},{"sku":"GAD-002","qty":1,"unitCents":1500}],"declared":{"netCents":3498,"vatCents":0,"grossCents":3498}}"""^^rdf:JSON """{"orderId":"A400","shipTo":{"country":"BE"},"customer":{"email":"ada@other.example","vatId":null},"lines":[{"sku":"WID-001","qty":2,"unitCents":999},{"sku":"GAD-002","qty":1,"unitCents":1500}],"declared":{"netCents":3498,"vatCents":508,"grossCents":4006}}"""^^rdf:JSON)
#   ?VatD = 508
#   ?VatIdRaw = "null"
# Therefore the derived triple above is entailed by the rules and facts.
# ----------------------------------------------------------------------

<urn:example:order:A400> ex:declaredGrossCents 4006 .

# ----------------------------------------------------------------------
# Proof for derived triple:
#   <urn:example:order:A301> a ex:Order .
# It holds because the following instance of the rule body is provable:
#   ex:feed ex:json """{
#     "meta~data": { "batch": "2025-12-18" },
#     "orders": [
#       {
#         "orderId": "A100",
#         "shipTo": { "country": "BE" },
#         "customer": { "email": "Ada@Example.ORG", "vatId": null },
#         "lines": [
#           { "sku": "wid-001", "qty": 2, "unitCents": 999 },
#           { "sku": "GAD-002", "qty": 1, "unitCents": 1500 }
#         ],
#         "declared": { "netCents": 3498, "vatCents": 509, "grossCents": 4007 }
#       },
#       {
#         "orderId": "A200",
#         "shipTo": { "country": "US" },
#         "customer": { "email": "bob@example.org", "vatId": null },
#         "lines": [
#           { "sku": "WID-001", "qty": 2, "unitCents": 999 },
#           { "sku": "GAD-002", "qty": 1, "unitCents": 1500 }
#         ],
#         "declared": { "netCents": 3498, "vatCents": 0, "grossCents": 3498 }
#       },
#       {
#         "orderId": "A300",
#         "shipTo": { "country": "NL" },
#         "customer": { "email": "acct@company.nl", "vatId": "NL999999999B01" },
#         "lines": [
#           { "sku": "WID-001", "qty": 2, "unitCents": 999 },
#           { "sku": "GAD-002", "qty": 1, "unitCents": 1500 }
#         ],
#         "declared": { "netCents": 3498, "vatCents": 0, "grossCents": 3498 }
#       },
#       {
#         "orderId": "A301",
#         "shipTo": { "country": "NL" },
#         "customer": { "email": "billing@company.nl", "vatId": "NL999999999B01" },
#         "lines": [
#           { "sku": "WID-001", "qty": 2, "unitCents": 999 },
#           { "sku": "GAD-002", "qty": 1, "unitCents": 1500 }
#         ],
#         "declared": { "netCents": 3498, "vatCents": 0, "grossCents": 3498 }
#       },
#       {
#         "orderId": "A400",
#         "shipTo": { "country": "BE" },
#         "customer": { "email": "ada@other.example", "vatId": null },
#         "lines": [
#           { "sku": "WID-001", "qty": 2, "unitCents": 999 },
#           { "sku": "GAD-002", "qty": 1, "unitCents": 1500 }
#         ],
#         "declared": { "netCents": 3498, "vatCents": 508, "grossCents": 4006 }
#       }
#     ]
#   }"""^^rdf:JSON .
#   ("""{
#     "meta~data": { "batch": "2025-12-18" },
#     "orders": [
#       {
#         "orderId": "A100",
#         "shipTo": { "country": "BE" },
#         "customer": { "email": "Ada@Example.ORG", "vatId": null },
#         "lines": [
#           { "sku": "wid-001", "qty": 2, "unitCents": 999 },
#           { "sku": "GAD-002", "qty": 1, "unitCents": 1500 }
#         ],
#         "declared": { "netCents": 3498, "vatCents": 509, "grossCents": 4007 }
#       },
#       {
#         "orderId": "A200",
#         "shipTo": { "country": "US" },
#         "customer": { "email": "bob@example.org", "vatId": null },
#         "lines": [
#           { "sku": "WID-001", "qty": 2, "unitCents": 999 },
#           { "sku": "GAD-002", "qty": 1, "unitCents": 1500 }
#         ],
#         "declared": { "netCents": 3498, "vatCents": 0, "grossCents": 3498 }
#       },
#       {
#         "orderId": "A300",
#         "shipTo": { "country": "NL" },
#         "customer": { "email": "acct@company.nl", "vatId": "NL999999999B01" },
#         "lines": [
#           { "sku": "WID-001", "qty": 2, "unitCents": 999 },
#           { "sku": "GAD-002", "qty": 1, "unitCents": 1500 }
#         ],
#         "declared": { "netCents": 3498, "vatCents": 0, "grossCents": 3498 }
#       },
#       {
#         "orderId": "A301",
#         "shipTo": { "country": "NL" },
#         "customer": { "email": "billing@company.nl", "vatId": "NL999999999B01" },
#         "lines": [
#           { "sku": "WID-001", "qty": 2, "unitCents": 999 },
#           { "sku": "GAD-002", "qty": 1, "unitCents": 1500 }
#         ],
#         "declared": { "netCents": 3498, "vatCents": 0, "grossCents": 3498 }
#       },
#       {
#         "orderId": "A400",
#         "shipTo": { "country": "BE" },
#         "customer": { "email": "ada@other.example", "vatId": null },
#         "lines": [
#           { "sku": "WID-001", "qty": 2, "unitCents": 999 },
#           { "sku": "GAD-002", "qty": 1, "unitCents": 1500 }
#         ],
#         "declared": { "netCents": 3498, "vatCents": 508, "grossCents": 4006 }
#       }
#     ]
#   }"""^^rdf:JSON "/orders") string:jsonPointer ("""{"orderId":"A100","shipTo":{"country":"BE"},"customer":{"email":"Ada@Example.ORG","vatId":null},"lines":[{"sku":"wid-001","qty":2,"unitCents":999},{"sku":"GAD-002","qty":1,"unitCents":1500}],"declared":{"netCents":3498,"vatCents":509,"grossCents":4007}}"""^^rdf:JSON """{"orderId":"A200","shipTo":{"country":"US"},"customer":{"email":"bob@example.org","vatId":null},"lines":[{"sku":"WID-001","qty":2,"unitCents":999},{"sku":"GAD-002","qty":1,"unitCents":1500}],"declared":{"netCents":3498,"vatCents":0,"grossCents":3498}}"""^^rdf:JSON """{"orderId":"A300","shipTo":{"country":"NL"},"customer":{"email":"acct@company.nl","vatId":"NL999999999B01"},"lines":[{"sku":"WID-001","qty":2,"unitCents":999},{"sku":"GAD-002","qty":1,"unitCents":1500}],"declared":{"netCents":3498,"vatCents":0,"grossCents":3498}}"""^^rdf:JSON """{"orderId":"A301","shipTo":{"country":"NL"},"customer":{"email":"billing@company.nl","vatId":"NL999999999B01"},"lines":[{"sku":"WID-001","qty":2,"unitCents":999},{"sku":"GAD-002","qty":1,"unitCents":1500}],"declared":{"netCents":3498,"vatCents":0,"grossCents":3498}}"""^^rdf:JSON """{"orderId":"A400","shipTo":{"country":"BE"},"customer":{"email":"ada@other.example","vatId":null},"lines":[{"sku":"WID-001","qty":2,"unitCents":999},{"sku":"GAD-002","qty":1,"unitCents":1500}],"declared":{"netCents":3498,"vatCents":508,"grossCents":4006}}"""^^rdf:JSON) .
#   ("""{"orderId":"A100","shipTo":{"country":"BE"},"customer":{"email":"Ada@Example.ORG","vatId":null},"lines":[{"sku":"wid-001","qty":2,"unitCents":999},{"sku":"GAD-002","qty":1,"unitCents":1500}],"declared":{"netCents":3498,"vatCents":509,"grossCents":4007}}"""^^rdf:JSON """{"orderId":"A200","shipTo":{"country":"US"},"customer":{"email":"bob@example.org","vatId":null},"lines":[{"sku":"WID-001","qty":2,"unitCents":999},{"sku":"GAD-002","qty":1,"unitCents":1500}],"declared":{"netCents":3498,"vatCents":0,"grossCents":3498}}"""^^rdf:JSON """{"orderId":"A300","shipTo":{"country":"NL"},"customer":{"email":"acct@company.nl","vatId":"NL999999999B01"},"lines":[{"sku":"WID-001","qty":2,"unitCents":999},{"sku":"GAD-002","qty":1,"unitCents":1500}],"declared":{"netCents":3498,"vatCents":0,"grossCents":3498}}"""^^rdf:JSON """{"orderId":"A301","shipTo":{"country":"NL"},"customer":{"email":"billing@company.nl","vatId":"NL999999999B01"},"lines":[{"sku":"WID-001","qty":2,"unitCents":999},{"sku":"GAD-002","qty":1,"unitCents":1500}],"declared":{"netCents":3498,"vatCents":0,"grossCents":3498}}"""^^rdf:JSON """{"orderId":"A400","shipTo":{"country":"BE"},"customer":{"email":"ada@other.example","vatId":null},"lines":[{"sku":"WID-001","qty":2,"unitCents":999},{"sku":"GAD-002","qty":1,"unitCents":1500}],"declared":{"netCents":3498,"vatCents":508,"grossCents":4006}}"""^^rdf:JSON) list:iterate (3 """{"orderId":"A301","shipTo":{"country":"NL"},"customer":{"email":"billing@company.nl","vatId":"NL999999999B01"},"lines":[{"sku":"WID-001","qty":2,"unitCents":999},{"sku":"GAD-002","qty":1,"unitCents":1500}],"declared":{"netCents":3498,"vatCents":0,"grossCents":3498}}"""^^rdf:JSON) .
#   ("""{"orderId":"A301","shipTo":{"country":"NL"},"customer":{"email":"billing@company.nl","vatId":"NL999999999B01"},"lines":[{"sku":"WID-001","qty":2,"unitCents":999},{"sku":"GAD-002","qty":1,"unitCents":1500}],"declared":{"netCents":3498,"vatCents":0,"grossCents":3498}}"""^^rdf:JSON "/orderId") string:jsonPointer "A301" .
#   ("""{"orderId":"A301","shipTo":{"country":"NL"},"customer":{"email":"billing@company.nl","vatId":"NL999999999B01"},"lines":[{"sku":"WID-001","qty":2,"unitCents":999},{"sku":"GAD-002","qty":1,"unitCents":1500}],"declared":{"netCents":3498,"vatCents":0,"grossCents":3498}}"""^^rdf:JSON "/shipTo/country") string:jsonPointer "NL" .
#   ("""{"orderId":"A301","shipTo":{"country":"NL"},"customer":{"email":"billing@company.nl","vatId":"NL999999999B01"},"lines":[{"sku":"WID-001","qty":2,"unitCents":999},{"sku":"GAD-002","qty":1,"unitCents":1500}],"declared":{"netCents":3498,"vatCents":0,"grossCents":3498}}"""^^rdf:JSON "/customer") string:jsonPointer """{"email":"billing@company.nl","vatId":"NL999999999B01"}"""^^rdf:JSON .
#   ("""{"email":"billing@company.nl","vatId":"NL999999999B01"}"""^^rdf:JSON "/email") string:jsonPointer "billing@company.nl" .
#   ("""{"email":"billing@company.nl","vatId":"NL999999999B01"}"""^^rdf:JSON "/vatId") string:jsonPointer "NL999999999B01" .
#   ("""{"orderId":"A301","shipTo":{"country":"NL"},"customer":{"email":"billing@company.nl","vatId":"NL999999999B01"},"lines":[{"sku":"WID-001","qty":2,"unitCents":999},{"sku":"GAD-002","qty":1,"unitCents":1500}],"declared":{"netCents":3498,"vatCents":0,"grossCents":3498}}"""^^rdf:JSON "/declared") string:jsonPointer """{"netCents":3498,"vatCents":0,"grossCents":3498}"""^^rdf:JSON .
#   ("""{"netCents":3498,"vatCents":0,"grossCents":3498}"""^^rdf:JSON "/netCents") string:jsonPointer 3498 .
#   ("""{"netCents":3498,"vatCents":0,"grossCents":3498}"""^^rdf:JSON "/vatCents") string:jsonPointer 0 .
#   ("""{"netCents":3498,"vatCents":0,"grossCents":3498}"""^^rdf:JSON "/grossCents") string:jsonPointer 3498 .
#   ("urn:example:order:%s" "A301") string:format "urn:example:order:A301" .
#   <urn:example:order:A301> log:uri "urn:example:order:A301" .
# via the schematic forward rule:
#   {
#     ex:feed ex:json ?J .
#     (?J "/orders") string:jsonPointer ?Orders .
#     ?Orders list:iterate (?OrderIndex ?OrderJson) .
#     (?OrderJson "/orderId") string:jsonPointer ?OrderId .
#     (?OrderJson "/shipTo/country") string:jsonPointer ?Country .
#     (?OrderJson "/customer") string:jsonPointer ?CustJson .
#     (?CustJson "/email") string:jsonPointer ?Email .
#     (?CustJson "/vatId") string:jsonPointer ?VatIdRaw .
#     (?OrderJson "/declared") string:jsonPointer ?Decl .
#     (?Decl "/netCents") string:jsonPointer ?NetD .
#     (?Decl "/vatCents") string:jsonPointer ?VatD .
#     (?Decl "/grossCents") string:jsonPointer ?GrossD .
#     ("urn:example:order:%s" ?OrderId) string:format ?OrderUriStr .
#     ?Order log:uri ?OrderUriStr .
#   } => {
#     ?Order a ex:Order .
#     ?Order ex:orderId ?OrderId .
#     ?Order ex:orderIndex ?OrderIndex .
#     ?Order ex:shipCountry ?Country .
#     ?Order ex:email ?Email .
#     ?Order ex:vatIdRaw ?VatIdRaw .
#     ?Order ex:declaredNetCents ?NetD .
#     ?Order ex:declaredVatCents ?VatD .
#     ?Order ex:declaredGrossCents ?GrossD .
#   } .
# with substitution (on rule variables):
#   ?Country = "NL"
#   ?CustJson = """{"email":"billing@company.nl","vatId":"NL999999999B01"}"""^^rdf:JSON
#   ?Decl = """{"netCents":3498,"vatCents":0,"grossCents":3498}"""^^rdf:JSON
#   ?Email = "billing@company.nl"
#   ?GrossD = 3498
#   ?J = """{
#     "meta~data": { "batch": "2025-12-18" },
#     "orders": [
#     {
#     "orderId": "A100",
#     "shipTo": { "country": "BE" },
#     "customer": { "email": "Ada@Example.ORG", "vatId": null },
#     "lines": [
#     { "sku": "wid-001", "qty": 2, "unitCents": 999 },
#     { "sku": "GAD-002", "qty": 1, "unitCents": 1500 }
#     ],
#     "declared": { "netCents": 3498, "vatCents": 509, "grossCents": 4007 }
#     },
#     {
#     "orderId": "A200",
#     "shipTo": { "country": "US" },
#     "customer": { "email": "bob@example.org", "vatId": null },
#     "lines": [
#     { "sku": "WID-001", "qty": 2, "unitCents": 999 },
#     { "sku": "GAD-002", "qty": 1, "unitCents": 1500 }
#     ],
#     "declared": { "netCents": 3498, "vatCents": 0, "grossCents": 3498 }
#     },
#     {
#     "orderId": "A300",
#     "shipTo": { "country": "NL" },
#     "customer": { "email": "acct@company.nl", "vatId": "NL999999999B01" },
#     "lines": [
#     { "sku": "WID-001", "qty": 2, "unitCents": 999 },
#     { "sku": "GAD-002", "qty": 1, "unitCents": 1500 }
#     ],
#     "declared": { "netCents": 3498, "vatCents": 0, "grossCents": 3498 }
#     },
#     {
#     "orderId": "A301",
#     "shipTo": { "country": "NL" },
#     "customer": { "email": "billing@company.nl", "vatId": "NL999999999B01" },
#     "lines": [
#     { "sku": "WID-001", "qty": 2, "unitCents": 999 },
#     { "sku": "GAD-002", "qty": 1, "unitCents": 1500 }
#     ],
#     "declared": { "netCents": 3498, "vatCents": 0, "grossCents": 3498 }
#     },
#     {
#     "orderId": "A400",
#     "shipTo": { "country": "BE" },
#     "customer": { "email": "ada@other.example", "vatId": null },
#     "lines": [
#     { "sku": "WID-001", "qty": 2, "unitCents": 999 },
#     { "sku": "GAD-002", "qty": 1, "unitCents": 1500 }
#     ],
#     "declared": { "netCents": 3498, "vatCents": 508, "grossCents": 4006 }
#     }
#     ]
#   }"""^^rdf:JSON
#   ?NetD = 3498
#   ?Order = <urn:example:order:A301>
#   ?OrderId = "A301"
#   ?OrderIndex = 3
#   ?OrderJson = """{"orderId":"A301","shipTo":{"country":"NL"},"customer":{"email":"billing@company.nl","vatId":"NL999999999B01"},"lines":[{"sku":"WID-001","qty":2,"unitCents":999},{"sku":"GAD-002","qty":1,"unitCents":1500}],"declared":{"netCents":3498,"vatCents":0,"grossCents":3498}}"""^^rdf:JSON
#   ?OrderUriStr = "urn:example:order:A301"
#   ?Orders = ("""{"orderId":"A100","shipTo":{"country":"BE"},"customer":{"email":"Ada@Example.ORG","vatId":null},"lines":[{"sku":"wid-001","qty":2,"unitCents":999},{"sku":"GAD-002","qty":1,"unitCents":1500}],"declared":{"netCents":3498,"vatCents":509,"grossCents":4007}}"""^^rdf:JSON """{"orderId":"A200","shipTo":{"country":"US"},"customer":{"email":"bob@example.org","vatId":null},"lines":[{"sku":"WID-001","qty":2,"unitCents":999},{"sku":"GAD-002","qty":1,"unitCents":1500}],"declared":{"netCents":3498,"vatCents":0,"grossCents":3498}}"""^^rdf:JSON """{"orderId":"A300","shipTo":{"country":"NL"},"customer":{"email":"acct@company.nl","vatId":"NL999999999B01"},"lines":[{"sku":"WID-001","qty":2,"unitCents":999},{"sku":"GAD-002","qty":1,"unitCents":1500}],"declared":{"netCents":3498,"vatCents":0,"grossCents":3498}}"""^^rdf:JSON """{"orderId":"A301","shipTo":{"country":"NL"},"customer":{"email":"billing@company.nl","vatId":"NL999999999B01"},"lines":[{"sku":"WID-001","qty":2,"unitCents":999},{"sku":"GAD-002","qty":1,"unitCents":1500}],"declared":{"netCents":3498,"vatCents":0,"grossCents":3498}}"""^^rdf:JSON """{"orderId":"A400","shipTo":{"country":"BE"},"customer":{"email":"ada@other.example","vatId":null},"lines":[{"sku":"WID-001","qty":2,"unitCents":999},{"sku":"GAD-002","qty":1,"unitCents":1500}],"declared":{"netCents":3498,"vatCents":508,"grossCents":4006}}"""^^rdf:JSON)
#   ?VatD = 0
#   ?VatIdRaw = "NL999999999B01"
# Therefore the derived triple above is entailed by the rules and facts.
# ----------------------------------------------------------------------

<urn:example:order:A301> a ex:Order .

# ----------------------------------------------------------------------
# Proof for derived triple:
#   <urn:example:order:A301> ex:orderId "A301" .
# It holds because the following instance of the rule body is provable:
#   ex:feed ex:json """{
#     "meta~data": { "batch": "2025-12-18" },
#     "orders": [
#       {
#         "orderId": "A100",
#         "shipTo": { "country": "BE" },
#         "customer": { "email": "Ada@Example.ORG", "vatId": null },
#         "lines": [
#           { "sku": "wid-001", "qty": 2, "unitCents": 999 },
#           { "sku": "GAD-002", "qty": 1, "unitCents": 1500 }
#         ],
#         "declared": { "netCents": 3498, "vatCents": 509, "grossCents": 4007 }
#       },
#       {
#         "orderId": "A200",
#         "shipTo": { "country": "US" },
#         "customer": { "email": "bob@example.org", "vatId": null },
#         "lines": [
#           { "sku": "WID-001", "qty": 2, "unitCents": 999 },
#           { "sku": "GAD-002", "qty": 1, "unitCents": 1500 }
#         ],
#         "declared": { "netCents": 3498, "vatCents": 0, "grossCents": 3498 }
#       },
#       {
#         "orderId": "A300",
#         "shipTo": { "country": "NL" },
#         "customer": { "email": "acct@company.nl", "vatId": "NL999999999B01" },
#         "lines": [
#           { "sku": "WID-001", "qty": 2, "unitCents": 999 },
#           { "sku": "GAD-002", "qty": 1, "unitCents": 1500 }
#         ],
#         "declared": { "netCents": 3498, "vatCents": 0, "grossCents": 3498 }
#       },
#       {
#         "orderId": "A301",
#         "shipTo": { "country": "NL" },
#         "customer": { "email": "billing@company.nl", "vatId": "NL999999999B01" },
#         "lines": [
#           { "sku": "WID-001", "qty": 2, "unitCents": 999 },
#           { "sku": "GAD-002", "qty": 1, "unitCents": 1500 }
#         ],
#         "declared": { "netCents": 3498, "vatCents": 0, "grossCents": 3498 }
#       },
#       {
#         "orderId": "A400",
#         "shipTo": { "country": "BE" },
#         "customer": { "email": "ada@other.example", "vatId": null },
#         "lines": [
#           { "sku": "WID-001", "qty": 2, "unitCents": 999 },
#           { "sku": "GAD-002", "qty": 1, "unitCents": 1500 }
#         ],
#         "declared": { "netCents": 3498, "vatCents": 508, "grossCents": 4006 }
#       }
#     ]
#   }"""^^rdf:JSON .
#   ("""{
#     "meta~data": { "batch": "2025-12-18" },
#     "orders": [
#       {
#         "orderId": "A100",
#         "shipTo": { "country": "BE" },
#         "customer": { "email": "Ada@Example.ORG", "vatId": null },
#         "lines": [
#           { "sku": "wid-001", "qty": 2, "unitCents": 999 },
#           { "sku": "GAD-002", "qty": 1, "unitCents": 1500 }
#         ],
#         "declared": { "netCents": 3498, "vatCents": 509, "grossCents": 4007 }
#       },
#       {
#         "orderId": "A200",
#         "shipTo": { "country": "US" },
#         "customer": { "email": "bob@example.org", "vatId": null },
#         "lines": [
#           { "sku": "WID-001", "qty": 2, "unitCents": 999 },
#           { "sku": "GAD-002", "qty": 1, "unitCents": 1500 }
#         ],
#         "declared": { "netCents": 3498, "vatCents": 0, "grossCents": 3498 }
#       },
#       {
#         "orderId": "A300",
#         "shipTo": { "country": "NL" },
#         "customer": { "email": "acct@company.nl", "vatId": "NL999999999B01" },
#         "lines": [
#           { "sku": "WID-001", "qty": 2, "unitCents": 999 },
#           { "sku": "GAD-002", "qty": 1, "unitCents": 1500 }
#         ],
#         "declared": { "netCents": 3498, "vatCents": 0, "grossCents": 3498 }
#       },
#       {
#         "orderId": "A301",
#         "shipTo": { "country": "NL" },
#         "customer": { "email": "billing@company.nl", "vatId": "NL999999999B01" },
#         "lines": [
#           { "sku": "WID-001", "qty": 2, "unitCents": 999 },
#           { "sku": "GAD-002", "qty": 1, "unitCents": 1500 }
#         ],
#         "declared": { "netCents": 3498, "vatCents": 0, "grossCents": 3498 }
#       },
#       {
#         "orderId": "A400",
#         "shipTo": { "country": "BE" },
#         "customer": { "email": "ada@other.example", "vatId": null },
#         "lines": [
#           { "sku": "WID-001", "qty": 2, "unitCents": 999 },
#           { "sku": "GAD-002", "qty": 1, "unitCents": 1500 }
#         ],
#         "declared": { "netCents": 3498, "vatCents": 508, "grossCents": 4006 }
#       }
#     ]
#   }"""^^rdf:JSON "/orders") string:jsonPointer ("""{"orderId":"A100","shipTo":{"country":"BE"},"customer":{"email":"Ada@Example.ORG","vatId":null},"lines":[{"sku":"wid-001","qty":2,"unitCents":999},{"sku":"GAD-002","qty":1,"unitCents":1500}],"declared":{"netCents":3498,"vatCents":509,"grossCents":4007}}"""^^rdf:JSON """{"orderId":"A200","shipTo":{"country":"US"},"customer":{"email":"bob@example.org","vatId":null},"lines":[{"sku":"WID-001","qty":2,"unitCents":999},{"sku":"GAD-002","qty":1,"unitCents":1500}],"declared":{"netCents":3498,"vatCents":0,"grossCents":3498}}"""^^rdf:JSON """{"orderId":"A300","shipTo":{"country":"NL"},"customer":{"email":"acct@company.nl","vatId":"NL999999999B01"},"lines":[{"sku":"WID-001","qty":2,"unitCents":999},{"sku":"GAD-002","qty":1,"unitCents":1500}],"declared":{"netCents":3498,"vatCents":0,"grossCents":3498}}"""^^rdf:JSON """{"orderId":"A301","shipTo":{"country":"NL"},"customer":{"email":"billing@company.nl","vatId":"NL999999999B01"},"lines":[{"sku":"WID-001","qty":2,"unitCents":999},{"sku":"GAD-002","qty":1,"unitCents":1500}],"declared":{"netCents":3498,"vatCents":0,"grossCents":3498}}"""^^rdf:JSON """{"orderId":"A400","shipTo":{"country":"BE"},"customer":{"email":"ada@other.example","vatId":null},"lines":[{"sku":"WID-001","qty":2,"unitCents":999},{"sku":"GAD-002","qty":1,"unitCents":1500}],"declared":{"netCents":3498,"vatCents":508,"grossCents":4006}}"""^^rdf:JSON) .
#   ("""{"orderId":"A100","shipTo":{"country":"BE"},"customer":{"email":"Ada@Example.ORG","vatId":null},"lines":[{"sku":"wid-001","qty":2,"unitCents":999},{"sku":"GAD-002","qty":1,"unitCents":1500}],"declared":{"netCents":3498,"vatCents":509,"grossCents":4007}}"""^^rdf:JSON """{"orderId":"A200","shipTo":{"country":"US"},"customer":{"email":"bob@example.org","vatId":null},"lines":[{"sku":"WID-001","qty":2,"unitCents":999},{"sku":"GAD-002","qty":1,"unitCents":1500}],"declared":{"netCents":3498,"vatCents":0,"grossCents":3498}}"""^^rdf:JSON """{"orderId":"A300","shipTo":{"country":"NL"},"customer":{"email":"acct@company.nl","vatId":"NL999999999B01"},"lines":[{"sku":"WID-001","qty":2,"unitCents":999},{"sku":"GAD-002","qty":1,"unitCents":1500}],"declared":{"netCents":3498,"vatCents":0,"grossCents":3498}}"""^^rdf:JSON """{"orderId":"A301","shipTo":{"country":"NL"},"customer":{"email":"billing@company.nl","vatId":"NL999999999B01"},"lines":[{"sku":"WID-001","qty":2,"unitCents":999},{"sku":"GAD-002","qty":1,"unitCents":1500}],"declared":{"netCents":3498,"vatCents":0,"grossCents":3498}}"""^^rdf:JSON """{"orderId":"A400","shipTo":{"country":"BE"},"customer":{"email":"ada@other.example","vatId":null},"lines":[{"sku":"WID-001","qty":2,"unitCents":999},{"sku":"GAD-002","qty":1,"unitCents":1500}],"declared":{"netCents":3498,"vatCents":508,"grossCents":4006}}"""^^rdf:JSON) list:iterate (3 """{"orderId":"A301","shipTo":{"country":"NL"},"customer":{"email":"billing@company.nl","vatId":"NL999999999B01"},"lines":[{"sku":"WID-001","qty":2,"unitCents":999},{"sku":"GAD-002","qty":1,"unitCents":1500}],"declared":{"netCents":3498,"vatCents":0,"grossCents":3498}}"""^^rdf:JSON) .
#   ("""{"orderId":"A301","shipTo":{"country":"NL"},"customer":{"email":"billing@company.nl","vatId":"NL999999999B01"},"lines":[{"sku":"WID-001","qty":2,"unitCents":999},{"sku":"GAD-002","qty":1,"unitCents":1500}],"declared":{"netCents":3498,"vatCents":0,"grossCents":3498}}"""^^rdf:JSON "/orderId") string:jsonPointer "A301" .
#   ("""{"orderId":"A301","shipTo":{"country":"NL"},"customer":{"email":"billing@company.nl","vatId":"NL999999999B01"},"lines":[{"sku":"WID-001","qty":2,"unitCents":999},{"sku":"GAD-002","qty":1,"unitCents":1500}],"declared":{"netCents":3498,"vatCents":0,"grossCents":3498}}"""^^rdf:JSON "/shipTo/country") string:jsonPointer "NL" .
#   ("""{"orderId":"A301","shipTo":{"country":"NL"},"customer":{"email":"billing@company.nl","vatId":"NL999999999B01"},"lines":[{"sku":"WID-001","qty":2,"unitCents":999},{"sku":"GAD-002","qty":1,"unitCents":1500}],"declared":{"netCents":3498,"vatCents":0,"grossCents":3498}}"""^^rdf:JSON "/customer") string:jsonPointer """{"email":"billing@company.nl","vatId":"NL999999999B01"}"""^^rdf:JSON .
#   ("""{"email":"billing@company.nl","vatId":"NL999999999B01"}"""^^rdf:JSON "/email") string:jsonPointer "billing@company.nl" .
#   ("""{"email":"billing@company.nl","vatId":"NL999999999B01"}"""^^rdf:JSON "/vatId") string:jsonPointer "NL999999999B01" .
#   ("""{"orderId":"A301","shipTo":{"country":"NL"},"customer":{"email":"billing@company.nl","vatId":"NL999999999B01"},"lines":[{"sku":"WID-001","qty":2,"unitCents":999},{"sku":"GAD-002","qty":1,"unitCents":1500}],"declared":{"netCents":3498,"vatCents":0,"grossCents":3498}}"""^^rdf:JSON "/declared") string:jsonPointer """{"netCents":3498,"vatCents":0,"grossCents":3498}"""^^rdf:JSON .
#   ("""{"netCents":3498,"vatCents":0,"grossCents":3498}"""^^rdf:JSON "/netCents") string:jsonPointer 3498 .
#   ("""{"netCents":3498,"vatCents":0,"grossCents":3498}"""^^rdf:JSON "/vatCents") string:jsonPointer 0 .
#   ("""{"netCents":3498,"vatCents":0,"grossCents":3498}"""^^rdf:JSON "/grossCents") string:jsonPointer 3498 .
#   ("urn:example:order:%s" "A301") string:format "urn:example:order:A301" .
#   <urn:example:order:A301> log:uri "urn:example:order:A301" .
# via the schematic forward rule:
#   {
#     ex:feed ex:json ?J .
#     (?J "/orders") string:jsonPointer ?Orders .
#     ?Orders list:iterate (?OrderIndex ?OrderJson) .
#     (?OrderJson "/orderId") string:jsonPointer ?OrderId .
#     (?OrderJson "/shipTo/country") string:jsonPointer ?Country .
#     (?OrderJson "/customer") string:jsonPointer ?CustJson .
#     (?CustJson "/email") string:jsonPointer ?Email .
#     (?CustJson "/vatId") string:jsonPointer ?VatIdRaw .
#     (?OrderJson "/declared") string:jsonPointer ?Decl .
#     (?Decl "/netCents") string:jsonPointer ?NetD .
#     (?Decl "/vatCents") string:jsonPointer ?VatD .
#     (?Decl "/grossCents") string:jsonPointer ?GrossD .
#     ("urn:example:order:%s" ?OrderId) string:format ?OrderUriStr .
#     ?Order log:uri ?OrderUriStr .
#   } => {
#     ?Order a ex:Order .
#     ?Order ex:orderId ?OrderId .
#     ?Order ex:orderIndex ?OrderIndex .
#     ?Order ex:shipCountry ?Country .
#     ?Order ex:email ?Email .
#     ?Order ex:vatIdRaw ?VatIdRaw .
#     ?Order ex:declaredNetCents ?NetD .
#     ?Order ex:declaredVatCents ?VatD .
#     ?Order ex:declaredGrossCents ?GrossD .
#   } .
# with substitution (on rule variables):
#   ?Country = "NL"
#   ?CustJson = """{"email":"billing@company.nl","vatId":"NL999999999B01"}"""^^rdf:JSON
#   ?Decl = """{"netCents":3498,"vatCents":0,"grossCents":3498}"""^^rdf:JSON
#   ?Email = "billing@company.nl"
#   ?GrossD = 3498
#   ?J = """{
#     "meta~data": { "batch": "2025-12-18" },
#     "orders": [
#     {
#     "orderId": "A100",
#     "shipTo": { "country": "BE" },
#     "customer": { "email": "Ada@Example.ORG", "vatId": null },
#     "lines": [
#     { "sku": "wid-001", "qty": 2, "unitCents": 999 },
#     { "sku": "GAD-002", "qty": 1, "unitCents": 1500 }
#     ],
#     "declared": { "netCents": 3498, "vatCents": 509, "grossCents": 4007 }
#     },
#     {
#     "orderId": "A200",
#     "shipTo": { "country": "US" },
#     "customer": { "email": "bob@example.org", "vatId": null },
#     "lines": [
#     { "sku": "WID-001", "qty": 2, "unitCents": 999 },
#     { "sku": "GAD-002", "qty": 1, "unitCents": 1500 }
#     ],
#     "declared": { "netCents": 3498, "vatCents": 0, "grossCents": 3498 }
#     },
#     {
#     "orderId": "A300",
#     "shipTo": { "country": "NL" },
#     "customer": { "email": "acct@company.nl", "vatId": "NL999999999B01" },
#     "lines": [
#     { "sku": "WID-001", "qty": 2, "unitCents": 999 },
#     { "sku": "GAD-002", "qty": 1, "unitCents": 1500 }
#     ],
#     "declared": { "netCents": 3498, "vatCents": 0, "grossCents": 3498 }
#     },
#     {
#     "orderId": "A301",
#     "shipTo": { "country": "NL" },
#     "customer": { "email": "billing@company.nl", "vatId": "NL999999999B01" },
#     "lines": [
#     { "sku": "WID-001", "qty": 2, "unitCents": 999 },
#     { "sku": "GAD-002", "qty": 1, "unitCents": 1500 }
#     ],
#     "declared": { "netCents": 3498, "vatCents": 0, "grossCents": 3498 }
#     },
#     {
#     "orderId": "A400",
#     "shipTo": { "country": "BE" },
#     "customer": { "email": "ada@other.example", "vatId": null },
#     "lines": [
#     { "sku": "WID-001", "qty": 2, "unitCents": 999 },
#     { "sku": "GAD-002", "qty": 1, "unitCents": 1500 }
#     ],
#     "declared": { "netCents": 3498, "vatCents": 508, "grossCents": 4006 }
#     }
#     ]
#   }"""^^rdf:JSON
#   ?NetD = 3498
#   ?Order = <urn:example:order:A301>
#   ?OrderId = "A301"
#   ?OrderIndex = 3
#   ?OrderJson = """{"orderId":"A301","shipTo":{"country":"NL"},"customer":{"email":"billing@company.nl","vatId":"NL999999999B01"},"lines":[{"sku":"WID-001","qty":2,"unitCents":999},{"sku":"GAD-002","qty":1,"unitCents":1500}],"declared":{"netCents":3498,"vatCents":0,"grossCents":3498}}"""^^rdf:JSON
#   ?OrderUriStr = "urn:example:order:A301"
#   ?Orders = ("""{"orderId":"A100","shipTo":{"country":"BE"},"customer":{"email":"Ada@Example.ORG","vatId":null},"lines":[{"sku":"wid-001","qty":2,"unitCents":999},{"sku":"GAD-002","qty":1,"unitCents":1500}],"declared":{"netCents":3498,"vatCents":509,"grossCents":4007}}"""^^rdf:JSON """{"orderId":"A200","shipTo":{"country":"US"},"customer":{"email":"bob@example.org","vatId":null},"lines":[{"sku":"WID-001","qty":2,"unitCents":999},{"sku":"GAD-002","qty":1,"unitCents":1500}],"declared":{"netCents":3498,"vatCents":0,"grossCents":3498}}"""^^rdf:JSON """{"orderId":"A300","shipTo":{"country":"NL"},"customer":{"email":"acct@company.nl","vatId":"NL999999999B01"},"lines":[{"sku":"WID-001","qty":2,"unitCents":999},{"sku":"GAD-002","qty":1,"unitCents":1500}],"declared":{"netCents":3498,"vatCents":0,"grossCents":3498}}"""^^rdf:JSON """{"orderId":"A301","shipTo":{"country":"NL"},"customer":{"email":"billing@company.nl","vatId":"NL999999999B01"},"lines":[{"sku":"WID-001","qty":2,"unitCents":999},{"sku":"GAD-002","qty":1,"unitCents":1500}],"declared":{"netCents":3498,"vatCents":0,"grossCents":3498}}"""^^rdf:JSON """{"orderId":"A400","shipTo":{"country":"BE"},"customer":{"email":"ada@other.example","vatId":null},"lines":[{"sku":"WID-001","qty":2,"unitCents":999},{"sku":"GAD-002","qty":1,"unitCents":1500}],"declared":{"netCents":3498,"vatCents":508,"grossCents":4006}}"""^^rdf:JSON)
#   ?VatD = 0
#   ?VatIdRaw = "NL999999999B01"
# Therefore the derived triple above is entailed by the rules and facts.
# ----------------------------------------------------------------------

<urn:example:order:A301> ex:orderId "A301" .

# ----------------------------------------------------------------------
# Proof for derived triple:
#   <urn:example:order:A301> ex:orderIndex 3 .
# It holds because the following instance of the rule body is provable:
#   ex:feed ex:json """{
#     "meta~data": { "batch": "2025-12-18" },
#     "orders": [
#       {
#         "orderId": "A100",
#         "shipTo": { "country": "BE" },
#         "customer": { "email": "Ada@Example.ORG", "vatId": null },
#         "lines": [
#           { "sku": "wid-001", "qty": 2, "unitCents": 999 },
#           { "sku": "GAD-002", "qty": 1, "unitCents": 1500 }
#         ],
#         "declared": { "netCents": 3498, "vatCents": 509, "grossCents": 4007 }
#       },
#       {
#         "orderId": "A200",
#         "shipTo": { "country": "US" },
#         "customer": { "email": "bob@example.org", "vatId": null },
#         "lines": [
#           { "sku": "WID-001", "qty": 2, "unitCents": 999 },
#           { "sku": "GAD-002", "qty": 1, "unitCents": 1500 }
#         ],
#         "declared": { "netCents": 3498, "vatCents": 0, "grossCents": 3498 }
#       },
#       {
#         "orderId": "A300",
#         "shipTo": { "country": "NL" },
#         "customer": { "email": "acct@company.nl", "vatId": "NL999999999B01" },
#         "lines": [
#           { "sku": "WID-001", "qty": 2, "unitCents": 999 },
#           { "sku": "GAD-002", "qty": 1, "unitCents": 1500 }
#         ],
#         "declared": { "netCents": 3498, "vatCents": 0, "grossCents": 3498 }
#       },
#       {
#         "orderId": "A301",
#         "shipTo": { "country": "NL" },
#         "customer": { "email": "billing@company.nl", "vatId": "NL999999999B01" },
#         "lines": [
#           { "sku": "WID-001", "qty": 2, "unitCents": 999 },
#           { "sku": "GAD-002", "qty": 1, "unitCents": 1500 }
#         ],
#         "declared": { "netCents": 3498, "vatCents": 0, "grossCents": 3498 }
#       },
#       {
#         "orderId": "A400",
#         "shipTo": { "country": "BE" },
#         "customer": { "email": "ada@other.example", "vatId": null },
#         "lines": [
#           { "sku": "WID-001", "qty": 2, "unitCents": 999 },
#           { "sku": "GAD-002", "qty": 1, "unitCents": 1500 }
#         ],
#         "declared": { "netCents": 3498, "vatCents": 508, "grossCents": 4006 }
#       }
#     ]
#   }"""^^rdf:JSON .
#   ("""{
#     "meta~data": { "batch": "2025-12-18" },
#     "orders": [
#       {
#         "orderId": "A100",
#         "shipTo": { "country": "BE" },
#         "customer": { "email": "Ada@Example.ORG", "vatId": null },
#         "lines": [
#           { "sku": "wid-001", "qty": 2, "unitCents": 999 },
#           { "sku": "GAD-002", "qty": 1, "unitCents": 1500 }
#         ],
#         "declared": { "netCents": 3498, "vatCents": 509, "grossCents": 4007 }
#       },
#       {
#         "orderId": "A200",
#         "shipTo": { "country": "US" },
#         "customer": { "email": "bob@example.org", "vatId": null },
#         "lines": [
#           { "sku": "WID-001", "qty": 2, "unitCents": 999 },
#           { "sku": "GAD-002", "qty": 1, "unitCents": 1500 }
#         ],
#         "declared": { "netCents": 3498, "vatCents": 0, "grossCents": 3498 }
#       },
#       {
#         "orderId": "A300",
#         "shipTo": { "country": "NL" },
#         "customer": { "email": "acct@company.nl", "vatId": "NL999999999B01" },
#         "lines": [
#           { "sku": "WID-001", "qty": 2, "unitCents": 999 },
#           { "sku": "GAD-002", "qty": 1, "unitCents": 1500 }
#         ],
#         "declared": { "netCents": 3498, "vatCents": 0, "grossCents": 3498 }
#       },
#       {
#         "orderId": "A301",
#         "shipTo": { "country": "NL" },
#         "customer": { "email": "billing@company.nl", "vatId": "NL999999999B01" },
#         "lines": [
#           { "sku": "WID-001", "qty": 2, "unitCents": 999 },
#           { "sku": "GAD-002", "qty": 1, "unitCents": 1500 }
#         ],
#         "declared": { "netCents": 3498, "vatCents": 0, "grossCents": 3498 }
#       },
#       {
#         "orderId": "A400",
#         "shipTo": { "country": "BE" },
#         "customer": { "email": "ada@other.example", "vatId": null },
#         "lines": [
#           { "sku": "WID-001", "qty": 2, "unitCents": 999 },
#           { "sku": "GAD-002", "qty": 1, "unitCents": 1500 }
#         ],
#         "declared": { "netCents": 3498, "vatCents": 508, "grossCents": 4006 }
#       }
#     ]
#   }"""^^rdf:JSON "/orders") string:jsonPointer ("""{"orderId":"A100","shipTo":{"country":"BE"},"customer":{"email":"Ada@Example.ORG","vatId":null},"lines":[{"sku":"wid-001","qty":2,"unitCents":999},{"sku":"GAD-002","qty":1,"unitCents":1500}],"declared":{"netCents":3498,"vatCents":509,"grossCents":4007}}"""^^rdf:JSON """{"orderId":"A200","shipTo":{"country":"US"},"customer":{"email":"bob@example.org","vatId":null},"lines":[{"sku":"WID-001","qty":2,"unitCents":999},{"sku":"GAD-002","qty":1,"unitCents":1500}],"declared":{"netCents":3498,"vatCents":0,"grossCents":3498}}"""^^rdf:JSON """{"orderId":"A300","shipTo":{"country":"NL"},"customer":{"email":"acct@company.nl","vatId":"NL999999999B01"},"lines":[{"sku":"WID-001","qty":2,"unitCents":999},{"sku":"GAD-002","qty":1,"unitCents":1500}],"declared":{"netCents":3498,"vatCents":0,"grossCents":3498}}"""^^rdf:JSON """{"orderId":"A301","shipTo":{"country":"NL"},"customer":{"email":"billing@company.nl","vatId":"NL999999999B01"},"lines":[{"sku":"WID-001","qty":2,"unitCents":999},{"sku":"GAD-002","qty":1,"unitCents":1500}],"declared":{"netCents":3498,"vatCents":0,"grossCents":3498}}"""^^rdf:JSON """{"orderId":"A400","shipTo":{"country":"BE"},"customer":{"email":"ada@other.example","vatId":null},"lines":[{"sku":"WID-001","qty":2,"unitCents":999},{"sku":"GAD-002","qty":1,"unitCents":1500}],"declared":{"netCents":3498,"vatCents":508,"grossCents":4006}}"""^^rdf:JSON) .
#   ("""{"orderId":"A100","shipTo":{"country":"BE"},"customer":{"email":"Ada@Example.ORG","vatId":null},"lines":[{"sku":"wid-001","qty":2,"unitCents":999},{"sku":"GAD-002","qty":1,"unitCents":1500}],"declared":{"netCents":3498,"vatCents":509,"grossCents":4007}}"""^^rdf:JSON """{"orderId":"A200","shipTo":{"country":"US"},"customer":{"email":"bob@example.org","vatId":null},"lines":[{"sku":"WID-001","qty":2,"unitCents":999},{"sku":"GAD-002","qty":1,"unitCents":1500}],"declared":{"netCents":3498,"vatCents":0,"grossCents":3498}}"""^^rdf:JSON """{"orderId":"A300","shipTo":{"country":"NL"},"customer":{"email":"acct@company.nl","vatId":"NL999999999B01"},"lines":[{"sku":"WID-001","qty":2,"unitCents":999},{"sku":"GAD-002","qty":1,"unitCents":1500}],"declared":{"netCents":3498,"vatCents":0,"grossCents":3498}}"""^^rdf:JSON """{"orderId":"A301","shipTo":{"country":"NL"},"customer":{"email":"billing@company.nl","vatId":"NL999999999B01"},"lines":[{"sku":"WID-001","qty":2,"unitCents":999},{"sku":"GAD-002","qty":1,"unitCents":1500}],"declared":{"netCents":3498,"vatCents":0,"grossCents":3498}}"""^^rdf:JSON """{"orderId":"A400","shipTo":{"country":"BE"},"customer":{"email":"ada@other.example","vatId":null},"lines":[{"sku":"WID-001","qty":2,"unitCents":999},{"sku":"GAD-002","qty":1,"unitCents":1500}],"declared":{"netCents":3498,"vatCents":508,"grossCents":4006}}"""^^rdf:JSON) list:iterate (3 """{"orderId":"A301","shipTo":{"country":"NL"},"customer":{"email":"billing@company.nl","vatId":"NL999999999B01"},"lines":[{"sku":"WID-001","qty":2,"unitCents":999},{"sku":"GAD-002","qty":1,"unitCents":1500}],"declared":{"netCents":3498,"vatCents":0,"grossCents":3498}}"""^^rdf:JSON) .
#   ("""{"orderId":"A301","shipTo":{"country":"NL"},"customer":{"email":"billing@company.nl","vatId":"NL999999999B01"},"lines":[{"sku":"WID-001","qty":2,"unitCents":999},{"sku":"GAD-002","qty":1,"unitCents":1500}],"declared":{"netCents":3498,"vatCents":0,"grossCents":3498}}"""^^rdf:JSON "/orderId") string:jsonPointer "A301" .
#   ("""{"orderId":"A301","shipTo":{"country":"NL"},"customer":{"email":"billing@company.nl","vatId":"NL999999999B01"},"lines":[{"sku":"WID-001","qty":2,"unitCents":999},{"sku":"GAD-002","qty":1,"unitCents":1500}],"declared":{"netCents":3498,"vatCents":0,"grossCents":3498}}"""^^rdf:JSON "/shipTo/country") string:jsonPointer "NL" .
#   ("""{"orderId":"A301","shipTo":{"country":"NL"},"customer":{"email":"billing@company.nl","vatId":"NL999999999B01"},"lines":[{"sku":"WID-001","qty":2,"unitCents":999},{"sku":"GAD-002","qty":1,"unitCents":1500}],"declared":{"netCents":3498,"vatCents":0,"grossCents":3498}}"""^^rdf:JSON "/customer") string:jsonPointer """{"email":"billing@company.nl","vatId":"NL999999999B01"}"""^^rdf:JSON .
#   ("""{"email":"billing@company.nl","vatId":"NL999999999B01"}"""^^rdf:JSON "/email") string:jsonPointer "billing@company.nl" .
#   ("""{"email":"billing@company.nl","vatId":"NL999999999B01"}"""^^rdf:JSON "/vatId") string:jsonPointer "NL999999999B01" .
#   ("""{"orderId":"A301","shipTo":{"country":"NL"},"customer":{"email":"billing@company.nl","vatId":"NL999999999B01"},"lines":[{"sku":"WID-001","qty":2,"unitCents":999},{"sku":"GAD-002","qty":1,"unitCents":1500}],"declared":{"netCents":3498,"vatCents":0,"grossCents":3498}}"""^^rdf:JSON "/declared") string:jsonPointer """{"netCents":3498,"vatCents":0,"grossCents":3498}"""^^rdf:JSON .
#   ("""{"netCents":3498,"vatCents":0,"grossCents":3498}"""^^rdf:JSON "/netCents") string:jsonPointer 3498 .
#   ("""{"netCents":3498,"vatCents":0,"grossCents":3498}"""^^rdf:JSON "/vatCents") string:jsonPointer 0 .
#   ("""{"netCents":3498,"vatCents":0,"grossCents":3498}"""^^rdf:JSON "/grossCents") string:jsonPointer 3498 .
#   ("urn:example:order:%s" "A301") string:format "urn:example:order:A301" .
#   <urn:example:order:A301> log:uri "urn:example:order:A301" .
# via the schematic forward rule:
#   {
#     ex:feed ex:json ?J .
#     (?J "/orders") string:jsonPointer ?Orders .
#     ?Orders list:iterate (?OrderIndex ?OrderJson) .
#     (?OrderJson "/orderId") string:jsonPointer ?OrderId .
#     (?OrderJson "/shipTo/country") string:jsonPointer ?Country .
#     (?OrderJson "/customer") string:jsonPointer ?CustJson .
#     (?CustJson "/email") string:jsonPointer ?Email .
#     (?CustJson "/vatId") string:jsonPointer ?VatIdRaw .
#     (?OrderJson "/declared") string:jsonPointer ?Decl .
#     (?Decl "/netCents") string:jsonPointer ?NetD .
#     (?Decl "/vatCents") string:jsonPointer ?VatD .
#     (?Decl "/grossCents") string:jsonPointer ?GrossD .
#     ("urn:example:order:%s" ?OrderId) string:format ?OrderUriStr .
#     ?Order log:uri ?OrderUriStr .
#   } => {
#     ?Order a ex:Order .
#     ?Order ex:orderId ?OrderId .
#     ?Order ex:orderIndex ?OrderIndex .
#     ?Order ex:shipCountry ?Country .
#     ?Order ex:email ?Email .
#     ?Order ex:vatIdRaw ?VatIdRaw .
#     ?Order ex:declaredNetCents ?NetD .
#     ?Order ex:declaredVatCents ?VatD .
#     ?Order ex:declaredGrossCents ?GrossD .
#   } .
# with substitution (on rule variables):
#   ?Country = "NL"
#   ?CustJson = """{"email":"billing@company.nl","vatId":"NL999999999B01"}"""^^rdf:JSON
#   ?Decl = """{"netCents":3498,"vatCents":0,"grossCents":3498}"""^^rdf:JSON
#   ?Email = "billing@company.nl"
#   ?GrossD = 3498
#   ?J = """{
#     "meta~data": { "batch": "2025-12-18" },
#     "orders": [
#     {
#     "orderId": "A100",
#     "shipTo": { "country": "BE" },
#     "customer": { "email": "Ada@Example.ORG", "vatId": null },
#     "lines": [
#     { "sku": "wid-001", "qty": 2, "unitCents": 999 },
#     { "sku": "GAD-002", "qty": 1, "unitCents": 1500 }
#     ],
#     "declared": { "netCents": 3498, "vatCents": 509, "grossCents": 4007 }
#     },
#     {
#     "orderId": "A200",
#     "shipTo": { "country": "US" },
#     "customer": { "email": "bob@example.org", "vatId": null },
#     "lines": [
#     { "sku": "WID-001", "qty": 2, "unitCents": 999 },
#     { "sku": "GAD-002", "qty": 1, "unitCents": 1500 }
#     ],
#     "declared": { "netCents": 3498, "vatCents": 0, "grossCents": 3498 }
#     },
#     {
#     "orderId": "A300",
#     "shipTo": { "country": "NL" },
#     "customer": { "email": "acct@company.nl", "vatId": "NL999999999B01" },
#     "lines": [
#     { "sku": "WID-001", "qty": 2, "unitCents": 999 },
#     { "sku": "GAD-002", "qty": 1, "unitCents": 1500 }
#     ],
#     "declared": { "netCents": 3498, "vatCents": 0, "grossCents": 3498 }
#     },
#     {
#     "orderId": "A301",
#     "shipTo": { "country": "NL" },
#     "customer": { "email": "billing@company.nl", "vatId": "NL999999999B01" },
#     "lines": [
#     { "sku": "WID-001", "qty": 2, "unitCents": 999 },
#     { "sku": "GAD-002", "qty": 1, "unitCents": 1500 }
#     ],
#     "declared": { "netCents": 3498, "vatCents": 0, "grossCents": 3498 }
#     },
#     {
#     "orderId": "A400",
#     "shipTo": { "country": "BE" },
#     "customer": { "email": "ada@other.example", "vatId": null },
#     "lines": [
#     { "sku": "WID-001", "qty": 2, "unitCents": 999 },
#     { "sku": "GAD-002", "qty": 1, "unitCents": 1500 }
#     ],
#     "declared": { "netCents": 3498, "vatCents": 508, "grossCents": 4006 }
#     }
#     ]
#   }"""^^rdf:JSON
#   ?NetD = 3498
#   ?Order = <urn:example:order:A301>
#   ?OrderId = "A301"
#   ?OrderIndex = 3
#   ?OrderJson = """{"orderId":"A301","shipTo":{"country":"NL"},"customer":{"email":"billing@company.nl","vatId":"NL999999999B01"},"lines":[{"sku":"WID-001","qty":2,"unitCents":999},{"sku":"GAD-002","qty":1,"unitCents":1500}],"declared":{"netCents":3498,"vatCents":0,"grossCents":3498}}"""^^rdf:JSON
#   ?OrderUriStr = "urn:example:order:A301"
#   ?Orders = ("""{"orderId":"A100","shipTo":{"country":"BE"},"customer":{"email":"Ada@Example.ORG","vatId":null},"lines":[{"sku":"wid-001","qty":2,"unitCents":999},{"sku":"GAD-002","qty":1,"unitCents":1500}],"declared":{"netCents":3498,"vatCents":509,"grossCents":4007}}"""^^rdf:JSON """{"orderId":"A200","shipTo":{"country":"US"},"customer":{"email":"bob@example.org","vatId":null},"lines":[{"sku":"WID-001","qty":2,"unitCents":999},{"sku":"GAD-002","qty":1,"unitCents":1500}],"declared":{"netCents":3498,"vatCents":0,"grossCents":3498}}"""^^rdf:JSON """{"orderId":"A300","shipTo":{"country":"NL"},"customer":{"email":"acct@company.nl","vatId":"NL999999999B01"},"lines":[{"sku":"WID-001","qty":2,"unitCents":999},{"sku":"GAD-002","qty":1,"unitCents":1500}],"declared":{"netCents":3498,"vatCents":0,"grossCents":3498}}"""^^rdf:JSON """{"orderId":"A301","shipTo":{"country":"NL"},"customer":{"email":"billing@company.nl","vatId":"NL999999999B01"},"lines":[{"sku":"WID-001","qty":2,"unitCents":999},{"sku":"GAD-002","qty":1,"unitCents":1500}],"declared":{"netCents":3498,"vatCents":0,"grossCents":3498}}"""^^rdf:JSON """{"orderId":"A400","shipTo":{"country":"BE"},"customer":{"email":"ada@other.example","vatId":null},"lines":[{"sku":"WID-001","qty":2,"unitCents":999},{"sku":"GAD-002","qty":1,"unitCents":1500}],"declared":{"netCents":3498,"vatCents":508,"grossCents":4006}}"""^^rdf:JSON)
#   ?VatD = 0
#   ?VatIdRaw = "NL999999999B01"
# Therefore the derived triple above is entailed by the rules and facts.
# ----------------------------------------------------------------------

<urn:example:order:A301> ex:orderIndex 3 .

# ----------------------------------------------------------------------
# Proof for derived triple:
#   <urn:example:order:A301> ex:shipCountry "NL" .
# It holds because the following instance of the rule body is provable:
#   ex:feed ex:json """{
#     "meta~data": { "batch": "2025-12-18" },
#     "orders": [
#       {
#         "orderId": "A100",
#         "shipTo": { "country": "BE" },
#         "customer": { "email": "Ada@Example.ORG", "vatId": null },
#         "lines": [
#           { "sku": "wid-001", "qty": 2, "unitCents": 999 },
#           { "sku": "GAD-002", "qty": 1, "unitCents": 1500 }
#         ],
#         "declared": { "netCents": 3498, "vatCents": 509, "grossCents": 4007 }
#       },
#       {
#         "orderId": "A200",
#         "shipTo": { "country": "US" },
#         "customer": { "email": "bob@example.org", "vatId": null },
#         "lines": [
#           { "sku": "WID-001", "qty": 2, "unitCents": 999 },
#           { "sku": "GAD-002", "qty": 1, "unitCents": 1500 }
#         ],
#         "declared": { "netCents": 3498, "vatCents": 0, "grossCents": 3498 }
#       },
#       {
#         "orderId": "A300",
#         "shipTo": { "country": "NL" },
#         "customer": { "email": "acct@company.nl", "vatId": "NL999999999B01" },
#         "lines": [
#           { "sku": "WID-001", "qty": 2, "unitCents": 999 },
#           { "sku": "GAD-002", "qty": 1, "unitCents": 1500 }
#         ],
#         "declared": { "netCents": 3498, "vatCents": 0, "grossCents": 3498 }
#       },
#       {
#         "orderId": "A301",
#         "shipTo": { "country": "NL" },
#         "customer": { "email": "billing@company.nl", "vatId": "NL999999999B01" },
#         "lines": [
#           { "sku": "WID-001", "qty": 2, "unitCents": 999 },
#           { "sku": "GAD-002", "qty": 1, "unitCents": 1500 }
#         ],
#         "declared": { "netCents": 3498, "vatCents": 0, "grossCents": 3498 }
#       },
#       {
#         "orderId": "A400",
#         "shipTo": { "country": "BE" },
#         "customer": { "email": "ada@other.example", "vatId": null },
#         "lines": [
#           { "sku": "WID-001", "qty": 2, "unitCents": 999 },
#           { "sku": "GAD-002", "qty": 1, "unitCents": 1500 }
#         ],
#         "declared": { "netCents": 3498, "vatCents": 508, "grossCents": 4006 }
#       }
#     ]
#   }"""^^rdf:JSON .
#   ("""{
#     "meta~data": { "batch": "2025-12-18" },
#     "orders": [
#       {
#         "orderId": "A100",
#         "shipTo": { "country": "BE" },
#         "customer": { "email": "Ada@Example.ORG", "vatId": null },
#         "lines": [
#           { "sku": "wid-001", "qty": 2, "unitCents": 999 },
#           { "sku": "GAD-002", "qty": 1, "unitCents": 1500 }
#         ],
#         "declared": { "netCents": 3498, "vatCents": 509, "grossCents": 4007 }
#       },
#       {
#         "orderId": "A200",
#         "shipTo": { "country": "US" },
#         "customer": { "email": "bob@example.org", "vatId": null },
#         "lines": [
#           { "sku": "WID-001", "qty": 2, "unitCents": 999 },
#           { "sku": "GAD-002", "qty": 1, "unitCents": 1500 }
#         ],
#         "declared": { "netCents": 3498, "vatCents": 0, "grossCents": 3498 }
#       },
#       {
#         "orderId": "A300",
#         "shipTo": { "country": "NL" },
#         "customer": { "email": "acct@company.nl", "vatId": "NL999999999B01" },
#         "lines": [
#           { "sku": "WID-001", "qty": 2, "unitCents": 999 },
#           { "sku": "GAD-002", "qty": 1, "unitCents": 1500 }
#         ],
#         "declared": { "netCents": 3498, "vatCents": 0, "grossCents": 3498 }
#       },
#       {
#         "orderId": "A301",
#         "shipTo": { "country": "NL" },
#         "customer": { "email": "billing@company.nl", "vatId": "NL999999999B01" },
#         "lines": [
#           { "sku": "WID-001", "qty": 2, "unitCents": 999 },
#           { "sku": "GAD-002", "qty": 1, "unitCents": 1500 }
#         ],
#         "declared": { "netCents": 3498, "vatCents": 0, "grossCents": 3498 }
#       },
#       {
#         "orderId": "A400",
#         "shipTo": { "country": "BE" },
#         "customer": { "email": "ada@other.example", "vatId": null },
#         "lines": [
#           { "sku": "WID-001", "qty": 2, "unitCents": 999 },
#           { "sku": "GAD-002", "qty": 1, "unitCents": 1500 }
#         ],
#         "declared": { "netCents": 3498, "vatCents": 508, "grossCents": 4006 }
#       }
#     ]
#   }"""^^rdf:JSON "/orders") string:jsonPointer ("""{"orderId":"A100","shipTo":{"country":"BE"},"customer":{"email":"Ada@Example.ORG","vatId":null},"lines":[{"sku":"wid-001","qty":2,"unitCents":999},{"sku":"GAD-002","qty":1,"unitCents":1500}],"declared":{"netCents":3498,"vatCents":509,"grossCents":4007}}"""^^rdf:JSON """{"orderId":"A200","shipTo":{"country":"US"},"customer":{"email":"bob@example.org","vatId":null},"lines":[{"sku":"WID-001","qty":2,"unitCents":999},{"sku":"GAD-002","qty":1,"unitCents":1500}],"declared":{"netCents":3498,"vatCents":0,"grossCents":3498}}"""^^rdf:JSON """{"orderId":"A300","shipTo":{"country":"NL"},"customer":{"email":"acct@company.nl","vatId":"NL999999999B01"},"lines":[{"sku":"WID-001","qty":2,"unitCents":999},{"sku":"GAD-002","qty":1,"unitCents":1500}],"declared":{"netCents":3498,"vatCents":0,"grossCents":3498}}"""^^rdf:JSON """{"orderId":"A301","shipTo":{"country":"NL"},"customer":{"email":"billing@company.nl","vatId":"NL999999999B01"},"lines":[{"sku":"WID-001","qty":2,"unitCents":999},{"sku":"GAD-002","qty":1,"unitCents":1500}],"declared":{"netCents":3498,"vatCents":0,"grossCents":3498}}"""^^rdf:JSON """{"orderId":"A400","shipTo":{"country":"BE"},"customer":{"email":"ada@other.example","vatId":null},"lines":[{"sku":"WID-001","qty":2,"unitCents":999},{"sku":"GAD-002","qty":1,"unitCents":1500}],"declared":{"netCents":3498,"vatCents":508,"grossCents":4006}}"""^^rdf:JSON) .
#   ("""{"orderId":"A100","shipTo":{"country":"BE"},"customer":{"email":"Ada@Example.ORG","vatId":null},"lines":[{"sku":"wid-001","qty":2,"unitCents":999},{"sku":"GAD-002","qty":1,"unitCents":1500}],"declared":{"netCents":3498,"vatCents":509,"grossCents":4007}}"""^^rdf:JSON """{"orderId":"A200","shipTo":{"country":"US"},"customer":{"email":"bob@example.org","vatId":null},"lines":[{"sku":"WID-001","qty":2,"unitCents":999},{"sku":"GAD-002","qty":1,"unitCents":1500}],"declared":{"netCents":3498,"vatCents":0,"grossCents":3498}}"""^^rdf:JSON """{"orderId":"A300","shipTo":{"country":"NL"},"customer":{"email":"acct@company.nl","vatId":"NL999999999B01"},"lines":[{"sku":"WID-001","qty":2,"unitCents":999},{"sku":"GAD-002","qty":1,"unitCents":1500}],"declared":{"netCents":3498,"vatCents":0,"grossCents":3498}}"""^^rdf:JSON """{"orderId":"A301","shipTo":{"country":"NL"},"customer":{"email":"billing@company.nl","vatId":"NL999999999B01"},"lines":[{"sku":"WID-001","qty":2,"unitCents":999},{"sku":"GAD-002","qty":1,"unitCents":1500}],"declared":{"netCents":3498,"vatCents":0,"grossCents":3498}}"""^^rdf:JSON """{"orderId":"A400","shipTo":{"country":"BE"},"customer":{"email":"ada@other.example","vatId":null},"lines":[{"sku":"WID-001","qty":2,"unitCents":999},{"sku":"GAD-002","qty":1,"unitCents":1500}],"declared":{"netCents":3498,"vatCents":508,"grossCents":4006}}"""^^rdf:JSON) list:iterate (3 """{"orderId":"A301","shipTo":{"country":"NL"},"customer":{"email":"billing@company.nl","vatId":"NL999999999B01"},"lines":[{"sku":"WID-001","qty":2,"unitCents":999},{"sku":"GAD-002","qty":1,"unitCents":1500}],"declared":{"netCents":3498,"vatCents":0,"grossCents":3498}}"""^^rdf:JSON) .
#   ("""{"orderId":"A301","shipTo":{"country":"NL"},"customer":{"email":"billing@company.nl","vatId":"NL999999999B01"},"lines":[{"sku":"WID-001","qty":2,"unitCents":999},{"sku":"GAD-002","qty":1,"unitCents":1500}],"declared":{"netCents":3498,"vatCents":0,"grossCents":3498}}"""^^rdf:JSON "/orderId") string:jsonPointer "A301" .
#   ("""{"orderId":"A301","shipTo":{"country":"NL"},"customer":{"email":"billing@company.nl","vatId":"NL999999999B01"},"lines":[{"sku":"WID-001","qty":2,"unitCents":999},{"sku":"GAD-002","qty":1,"unitCents":1500}],"declared":{"netCents":3498,"vatCents":0,"grossCents":3498}}"""^^rdf:JSON "/shipTo/country") string:jsonPointer "NL" .
#   ("""{"orderId":"A301","shipTo":{"country":"NL"},"customer":{"email":"billing@company.nl","vatId":"NL999999999B01"},"lines":[{"sku":"WID-001","qty":2,"unitCents":999},{"sku":"GAD-002","qty":1,"unitCents":1500}],"declared":{"netCents":3498,"vatCents":0,"grossCents":3498}}"""^^rdf:JSON "/customer") string:jsonPointer """{"email":"billing@company.nl","vatId":"NL999999999B01"}"""^^rdf:JSON .
#   ("""{"email":"billing@company.nl","vatId":"NL999999999B01"}"""^^rdf:JSON "/email") string:jsonPointer "billing@company.nl" .
#   ("""{"email":"billing@company.nl","vatId":"NL999999999B01"}"""^^rdf:JSON "/vatId") string:jsonPointer "NL999999999B01" .
#   ("""{"orderId":"A301","shipTo":{"country":"NL"},"customer":{"email":"billing@company.nl","vatId":"NL999999999B01"},"lines":[{"sku":"WID-001","qty":2,"unitCents":999},{"sku":"GAD-002","qty":1,"unitCents":1500}],"declared":{"netCents":3498,"vatCents":0,"grossCents":3498}}"""^^rdf:JSON "/declared") string:jsonPointer """{"netCents":3498,"vatCents":0,"grossCents":3498}"""^^rdf:JSON .
#   ("""{"netCents":3498,"vatCents":0,"grossCents":3498}"""^^rdf:JSON "/netCents") string:jsonPointer 3498 .
#   ("""{"netCents":3498,"vatCents":0,"grossCents":3498}"""^^rdf:JSON "/vatCents") string:jsonPointer 0 .
#   ("""{"netCents":3498,"vatCents":0,"grossCents":3498}"""^^rdf:JSON "/grossCents") string:jsonPointer 3498 .
#   ("urn:example:order:%s" "A301") string:format "urn:example:order:A301" .
#   <urn:example:order:A301> log:uri "urn:example:order:A301" .
# via the schematic forward rule:
#   {
#     ex:feed ex:json ?J .
#     (?J "/orders") string:jsonPointer ?Orders .
#     ?Orders list:iterate (?OrderIndex ?OrderJson) .
#     (?OrderJson "/orderId") string:jsonPointer ?OrderId .
#     (?OrderJson "/shipTo/country") string:jsonPointer ?Country .
#     (?OrderJson "/customer") string:jsonPointer ?CustJson .
#     (?CustJson "/email") string:jsonPointer ?Email .
#     (?CustJson "/vatId") string:jsonPointer ?VatIdRaw .
#     (?OrderJson "/declared") string:jsonPointer ?Decl .
#     (?Decl "/netCents") string:jsonPointer ?NetD .
#     (?Decl "/vatCents") string:jsonPointer ?VatD .
#     (?Decl "/grossCents") string:jsonPointer ?GrossD .
#     ("urn:example:order:%s" ?OrderId) string:format ?OrderUriStr .
#     ?Order log:uri ?OrderUriStr .
#   } => {
#     ?Order a ex:Order .
#     ?Order ex:orderId ?OrderId .
#     ?Order ex:orderIndex ?OrderIndex .
#     ?Order ex:shipCountry ?Country .
#     ?Order ex:email ?Email .
#     ?Order ex:vatIdRaw ?VatIdRaw .
#     ?Order ex:declaredNetCents ?NetD .
#     ?Order ex:declaredVatCents ?VatD .
#     ?Order ex:declaredGrossCents ?GrossD .
#   } .
# with substitution (on rule variables):
#   ?Country = "NL"
#   ?CustJson = """{"email":"billing@company.nl","vatId":"NL999999999B01"}"""^^rdf:JSON
#   ?Decl = """{"netCents":3498,"vatCents":0,"grossCents":3498}"""^^rdf:JSON
#   ?Email = "billing@company.nl"
#   ?GrossD = 3498
#   ?J = """{
#     "meta~data": { "batch": "2025-12-18" },
#     "orders": [
#     {
#     "orderId": "A100",
#     "shipTo": { "country": "BE" },
#     "customer": { "email": "Ada@Example.ORG", "vatId": null },
#     "lines": [
#     { "sku": "wid-001", "qty": 2, "unitCents": 999 },
#     { "sku": "GAD-002", "qty": 1, "unitCents": 1500 }
#     ],
#     "declared": { "netCents": 3498, "vatCents": 509, "grossCents": 4007 }
#     },
#     {
#     "orderId": "A200",
#     "shipTo": { "country": "US" },
#     "customer": { "email": "bob@example.org", "vatId": null },
#     "lines": [
#     { "sku": "WID-001", "qty": 2, "unitCents": 999 },
#     { "sku": "GAD-002", "qty": 1, "unitCents": 1500 }
#     ],
#     "declared": { "netCents": 3498, "vatCents": 0, "grossCents": 3498 }
#     },
#     {
#     "orderId": "A300",
#     "shipTo": { "country": "NL" },
#     "customer": { "email": "acct@company.nl", "vatId": "NL999999999B01" },
#     "lines": [
#     { "sku": "WID-001", "qty": 2, "unitCents": 999 },
#     { "sku": "GAD-002", "qty": 1, "unitCents": 1500 }
#     ],
#     "declared": { "netCents": 3498, "vatCents": 0, "grossCents": 3498 }
#     },
#     {
#     "orderId": "A301",
#     "shipTo": { "country": "NL" },
#     "customer": { "email": "billing@company.nl", "vatId": "NL999999999B01" },
#     "lines": [
#     { "sku": "WID-001", "qty": 2, "unitCents": 999 },
#     { "sku": "GAD-002", "qty": 1, "unitCents": 1500 }
#     ],
#     "declared": { "netCents": 3498, "vatCents": 0, "grossCents": 3498 }
#     },
#     {
#     "orderId": "A400",
#     "shipTo": { "country": "BE" },
#     "customer": { "email": "ada@other.example", "vatId": null },
#     "lines": [
#     { "sku": "WID-001", "qty": 2, "unitCents": 999 },
#     { "sku": "GAD-002", "qty": 1, "unitCents": 1500 }
#     ],
#     "declared": { "netCents": 3498, "vatCents": 508, "grossCents": 4006 }
#     }
#     ]
#   }"""^^rdf:JSON
#   ?NetD = 3498
#   ?Order = <urn:example:order:A301>
#   ?OrderId = "A301"
#   ?OrderIndex = 3
#   ?OrderJson = """{"orderId":"A301","shipTo":{"country":"NL"},"customer":{"email":"billing@company.nl","vatId":"NL999999999B01"},"lines":[{"sku":"WID-001","qty":2,"unitCents":999},{"sku":"GAD-002","qty":1,"unitCents":1500}],"declared":{"netCents":3498,"vatCents":0,"grossCents":3498}}"""^^rdf:JSON
#   ?OrderUriStr = "urn:example:order:A301"
#   ?Orders = ("""{"orderId":"A100","shipTo":{"country":"BE"},"customer":{"email":"Ada@Example.ORG","vatId":null},"lines":[{"sku":"wid-001","qty":2,"unitCents":999},{"sku":"GAD-002","qty":1,"unitCents":1500}],"declared":{"netCents":3498,"vatCents":509,"grossCents":4007}}"""^^rdf:JSON """{"orderId":"A200","shipTo":{"country":"US"},"customer":{"email":"bob@example.org","vatId":null},"lines":[{"sku":"WID-001","qty":2,"unitCents":999},{"sku":"GAD-002","qty":1,"unitCents":1500}],"declared":{"netCents":3498,"vatCents":0,"grossCents":3498}}"""^^rdf:JSON """{"orderId":"A300","shipTo":{"country":"NL"},"customer":{"email":"acct@company.nl","vatId":"NL999999999B01"},"lines":[{"sku":"WID-001","qty":2,"unitCents":999},{"sku":"GAD-002","qty":1,"unitCents":1500}],"declared":{"netCents":3498,"vatCents":0,"grossCents":3498}}"""^^rdf:JSON """{"orderId":"A301","shipTo":{"country":"NL"},"customer":{"email":"billing@company.nl","vatId":"NL999999999B01"},"lines":[{"sku":"WID-001","qty":2,"unitCents":999},{"sku":"GAD-002","qty":1,"unitCents":1500}],"declared":{"netCents":3498,"vatCents":0,"grossCents":3498}}"""^^rdf:JSON """{"orderId":"A400","shipTo":{"country":"BE"},"customer":{"email":"ada@other.example","vatId":null},"lines":[{"sku":"WID-001","qty":2,"unitCents":999},{"sku":"GAD-002","qty":1,"unitCents":1500}],"declared":{"netCents":3498,"vatCents":508,"grossCents":4006}}"""^^rdf:JSON)
#   ?VatD = 0
#   ?VatIdRaw = "NL999999999B01"
# Therefore the derived triple above is entailed by the rules and facts.
# ----------------------------------------------------------------------

<urn:example:order:A301> ex:shipCountry "NL" .

# ----------------------------------------------------------------------
# Proof for derived triple:
#   <urn:example:order:A301> ex:email "billing@company.nl" .
# It holds because the following instance of the rule body is provable:
#   ex:feed ex:json """{
#     "meta~data": { "batch": "2025-12-18" },
#     "orders": [
#       {
#         "orderId": "A100",
#         "shipTo": { "country": "BE" },
#         "customer": { "email": "Ada@Example.ORG", "vatId": null },
#         "lines": [
#           { "sku": "wid-001", "qty": 2, "unitCents": 999 },
#           { "sku": "GAD-002", "qty": 1, "unitCents": 1500 }
#         ],
#         "declared": { "netCents": 3498, "vatCents": 509, "grossCents": 4007 }
#       },
#       {
#         "orderId": "A200",
#         "shipTo": { "country": "US" },
#         "customer": { "email": "bob@example.org", "vatId": null },
#         "lines": [
#           { "sku": "WID-001", "qty": 2, "unitCents": 999 },
#           { "sku": "GAD-002", "qty": 1, "unitCents": 1500 }
#         ],
#         "declared": { "netCents": 3498, "vatCents": 0, "grossCents": 3498 }
#       },
#       {
#         "orderId": "A300",
#         "shipTo": { "country": "NL" },
#         "customer": { "email": "acct@company.nl", "vatId": "NL999999999B01" },
#         "lines": [
#           { "sku": "WID-001", "qty": 2, "unitCents": 999 },
#           { "sku": "GAD-002", "qty": 1, "unitCents": 1500 }
#         ],
#         "declared": { "netCents": 3498, "vatCents": 0, "grossCents": 3498 }
#       },
#       {
#         "orderId": "A301",
#         "shipTo": { "country": "NL" },
#         "customer": { "email": "billing@company.nl", "vatId": "NL999999999B01" },
#         "lines": [
#           { "sku": "WID-001", "qty": 2, "unitCents": 999 },
#           { "sku": "GAD-002", "qty": 1, "unitCents": 1500 }
#         ],
#         "declared": { "netCents": 3498, "vatCents": 0, "grossCents": 3498 }
#       },
#       {
#         "orderId": "A400",
#         "shipTo": { "country": "BE" },
#         "customer": { "email": "ada@other.example", "vatId": null },
#         "lines": [
#           { "sku": "WID-001", "qty": 2, "unitCents": 999 },
#           { "sku": "GAD-002", "qty": 1, "unitCents": 1500 }
#         ],
#         "declared": { "netCents": 3498, "vatCents": 508, "grossCents": 4006 }
#       }
#     ]
#   }"""^^rdf:JSON .
#   ("""{
#     "meta~data": { "batch": "2025-12-18" },
#     "orders": [
#       {
#         "orderId": "A100",
#         "shipTo": { "country": "BE" },
#         "customer": { "email": "Ada@Example.ORG", "vatId": null },
#         "lines": [
#           { "sku": "wid-001", "qty": 2, "unitCents": 999 },
#           { "sku": "GAD-002", "qty": 1, "unitCents": 1500 }
#         ],
#         "declared": { "netCents": 3498, "vatCents": 509, "grossCents": 4007 }
#       },
#       {
#         "orderId": "A200",
#         "shipTo": { "country": "US" },
#         "customer": { "email": "bob@example.org", "vatId": null },
#         "lines": [
#           { "sku": "WID-001", "qty": 2, "unitCents": 999 },
#           { "sku": "GAD-002", "qty": 1, "unitCents": 1500 }
#         ],
#         "declared": { "netCents": 3498, "vatCents": 0, "grossCents": 3498 }
#       },
#       {
#         "orderId": "A300",
#         "shipTo": { "country": "NL" },
#         "customer": { "email": "acct@company.nl", "vatId": "NL999999999B01" },
#         "lines": [
#           { "sku": "WID-001", "qty": 2, "unitCents": 999 },
#           { "sku": "GAD-002", "qty": 1, "unitCents": 1500 }
#         ],
#         "declared": { "netCents": 3498, "vatCents": 0, "grossCents": 3498 }
#       },
#       {
#         "orderId": "A301",
#         "shipTo": { "country": "NL" },
#         "customer": { "email": "billing@company.nl", "vatId": "NL999999999B01" },
#         "lines": [
#           { "sku": "WID-001", "qty": 2, "unitCents": 999 },
#           { "sku": "GAD-002", "qty": 1, "unitCents": 1500 }
#         ],
#         "declared": { "netCents": 3498, "vatCents": 0, "grossCents": 3498 }
#       },
#       {
#         "orderId": "A400",
#         "shipTo": { "country": "BE" },
#         "customer": { "email": "ada@other.example", "vatId": null },
#         "lines": [
#           { "sku": "WID-001", "qty": 2, "unitCents": 999 },
#           { "sku": "GAD-002", "qty": 1, "unitCents": 1500 }
#         ],
#         "declared": { "netCents": 3498, "vatCents": 508, "grossCents": 4006 }
#       }
#     ]
#   }"""^^rdf:JSON "/orders") string:jsonPointer ("""{"orderId":"A100","shipTo":{"country":"BE"},"customer":{"email":"Ada@Example.ORG","vatId":null},"lines":[{"sku":"wid-001","qty":2,"unitCents":999},{"sku":"GAD-002","qty":1,"unitCents":1500}],"declared":{"netCents":3498,"vatCents":509,"grossCents":4007}}"""^^rdf:JSON """{"orderId":"A200","shipTo":{"country":"US"},"customer":{"email":"bob@example.org","vatId":null},"lines":[{"sku":"WID-001","qty":2,"unitCents":999},{"sku":"GAD-002","qty":1,"unitCents":1500}],"declared":{"netCents":3498,"vatCents":0,"grossCents":3498}}"""^^rdf:JSON """{"orderId":"A300","shipTo":{"country":"NL"},"customer":{"email":"acct@company.nl","vatId":"NL999999999B01"},"lines":[{"sku":"WID-001","qty":2,"unitCents":999},{"sku":"GAD-002","qty":1,"unitCents":1500}],"declared":{"netCents":3498,"vatCents":0,"grossCents":3498}}"""^^rdf:JSON """{"orderId":"A301","shipTo":{"country":"NL"},"customer":{"email":"billing@company.nl","vatId":"NL999999999B01"},"lines":[{"sku":"WID-001","qty":2,"unitCents":999},{"sku":"GAD-002","qty":1,"unitCents":1500}],"declared":{"netCents":3498,"vatCents":0,"grossCents":3498}}"""^^rdf:JSON """{"orderId":"A400","shipTo":{"country":"BE"},"customer":{"email":"ada@other.example","vatId":null},"lines":[{"sku":"WID-001","qty":2,"unitCents":999},{"sku":"GAD-002","qty":1,"unitCents":1500}],"declared":{"netCents":3498,"vatCents":508,"grossCents":4006}}"""^^rdf:JSON) .
#   ("""{"orderId":"A100","shipTo":{"country":"BE"},"customer":{"email":"Ada@Example.ORG","vatId":null},"lines":[{"sku":"wid-001","qty":2,"unitCents":999},{"sku":"GAD-002","qty":1,"unitCents":1500}],"declared":{"netCents":3498,"vatCents":509,"grossCents":4007}}"""^^rdf:JSON """{"orderId":"A200","shipTo":{"country":"US"},"customer":{"email":"bob@example.org","vatId":null},"lines":[{"sku":"WID-001","qty":2,"unitCents":999},{"sku":"GAD-002","qty":1,"unitCents":1500}],"declared":{"netCents":3498,"vatCents":0,"grossCents":3498}}"""^^rdf:JSON """{"orderId":"A300","shipTo":{"country":"NL"},"customer":{"email":"acct@company.nl","vatId":"NL999999999B01"},"lines":[{"sku":"WID-001","qty":2,"unitCents":999},{"sku":"GAD-002","qty":1,"unitCents":1500}],"declared":{"netCents":3498,"vatCents":0,"grossCents":3498}}"""^^rdf:JSON """{"orderId":"A301","shipTo":{"country":"NL"},"customer":{"email":"billing@company.nl","vatId":"NL999999999B01"},"lines":[{"sku":"WID-001","qty":2,"unitCents":999},{"sku":"GAD-002","qty":1,"unitCents":1500}],"declared":{"netCents":3498,"vatCents":0,"grossCents":3498}}"""^^rdf:JSON """{"orderId":"A400","shipTo":{"country":"BE"},"customer":{"email":"ada@other.example","vatId":null},"lines":[{"sku":"WID-001","qty":2,"unitCents":999},{"sku":"GAD-002","qty":1,"unitCents":1500}],"declared":{"netCents":3498,"vatCents":508,"grossCents":4006}}"""^^rdf:JSON) list:iterate (3 """{"orderId":"A301","shipTo":{"country":"NL"},"customer":{"email":"billing@company.nl","vatId":"NL999999999B01"},"lines":[{"sku":"WID-001","qty":2,"unitCents":999},{"sku":"GAD-002","qty":1,"unitCents":1500}],"declared":{"netCents":3498,"vatCents":0,"grossCents":3498}}"""^^rdf:JSON) .
#   ("""{"orderId":"A301","shipTo":{"country":"NL"},"customer":{"email":"billing@company.nl","vatId":"NL999999999B01"},"lines":[{"sku":"WID-001","qty":2,"unitCents":999},{"sku":"GAD-002","qty":1,"unitCents":1500}],"declared":{"netCents":3498,"vatCents":0,"grossCents":3498}}"""^^rdf:JSON "/orderId") string:jsonPointer "A301" .
#   ("""{"orderId":"A301","shipTo":{"country":"NL"},"customer":{"email":"billing@company.nl","vatId":"NL999999999B01"},"lines":[{"sku":"WID-001","qty":2,"unitCents":999},{"sku":"GAD-002","qty":1,"unitCents":1500}],"declared":{"netCents":3498,"vatCents":0,"grossCents":3498}}"""^^rdf:JSON "/shipTo/country") string:jsonPointer "NL" .
#   ("""{"orderId":"A301","shipTo":{"country":"NL"},"customer":{"email":"billing@company.nl","vatId":"NL999999999B01"},"lines":[{"sku":"WID-001","qty":2,"unitCents":999},{"sku":"GAD-002","qty":1,"unitCents":1500}],"declared":{"netCents":3498,"vatCents":0,"grossCents":3498}}"""^^rdf:JSON "/customer") string:jsonPointer """{"email":"billing@company.nl","vatId":"NL999999999B01"}"""^^rdf:JSON .
#   ("""{"email":"billing@company.nl","vatId":"NL999999999B01"}"""^^rdf:JSON "/email") string:jsonPointer "billing@company.nl" .
#   ("""{"email":"billing@company.nl","vatId":"NL999999999B01"}"""^^rdf:JSON "/vatId") string:jsonPointer "NL999999999B01" .
#   ("""{"orderId":"A301","shipTo":{"country":"NL"},"customer":{"email":"billing@company.nl","vatId":"NL999999999B01"},"lines":[{"sku":"WID-001","qty":2,"unitCents":999},{"sku":"GAD-002","qty":1,"unitCents":1500}],"declared":{"netCents":3498,"vatCents":0,"grossCents":3498}}"""^^rdf:JSON "/declared") string:jsonPointer """{"netCents":3498,"vatCents":0,"grossCents":3498}"""^^rdf:JSON .
#   ("""{"netCents":3498,"vatCents":0,"grossCents":3498}"""^^rdf:JSON "/netCents") string:jsonPointer 3498 .
#   ("""{"netCents":3498,"vatCents":0,"grossCents":3498}"""^^rdf:JSON "/vatCents") string:jsonPointer 0 .
#   ("""{"netCents":3498,"vatCents":0,"grossCents":3498}"""^^rdf:JSON "/grossCents") string:jsonPointer 3498 .
#   ("urn:example:order:%s" "A301") string:format "urn:example:order:A301" .
#   <urn:example:order:A301> log:uri "urn:example:order:A301" .
# via the schematic forward rule:
#   {
#     ex:feed ex:json ?J .
#     (?J "/orders") string:jsonPointer ?Orders .
#     ?Orders list:iterate (?OrderIndex ?OrderJson) .
#     (?OrderJson "/orderId") string:jsonPointer ?OrderId .
#     (?OrderJson "/shipTo/country") string:jsonPointer ?Country .
#     (?OrderJson "/customer") string:jsonPointer ?CustJson .
#     (?CustJson "/email") string:jsonPointer ?Email .
#     (?CustJson "/vatId") string:jsonPointer ?VatIdRaw .
#     (?OrderJson "/declared") string:jsonPointer ?Decl .
#     (?Decl "/netCents") string:jsonPointer ?NetD .
#     (?Decl "/vatCents") string:jsonPointer ?VatD .
#     (?Decl "/grossCents") string:jsonPointer ?GrossD .
#     ("urn:example:order:%s" ?OrderId) string:format ?OrderUriStr .
#     ?Order log:uri ?OrderUriStr .
#   } => {
#     ?Order a ex:Order .
#     ?Order ex:orderId ?OrderId .
#     ?Order ex:orderIndex ?OrderIndex .
#     ?Order ex:shipCountry ?Country .
#     ?Order ex:email ?Email .
#     ?Order ex:vatIdRaw ?VatIdRaw .
#     ?Order ex:declaredNetCents ?NetD .
#     ?Order ex:declaredVatCents ?VatD .
#     ?Order ex:declaredGrossCents ?GrossD .
#   } .
# with substitution (on rule variables):
#   ?Country = "NL"
#   ?CustJson = """{"email":"billing@company.nl","vatId":"NL999999999B01"}"""^^rdf:JSON
#   ?Decl = """{"netCents":3498,"vatCents":0,"grossCents":3498}"""^^rdf:JSON
#   ?Email = "billing@company.nl"
#   ?GrossD = 3498
#   ?J = """{
#     "meta~data": { "batch": "2025-12-18" },
#     "orders": [
#     {
#     "orderId": "A100",
#     "shipTo": { "country": "BE" },
#     "customer": { "email": "Ada@Example.ORG", "vatId": null },
#     "lines": [
#     { "sku": "wid-001", "qty": 2, "unitCents": 999 },
#     { "sku": "GAD-002", "qty": 1, "unitCents": 1500 }
#     ],
#     "declared": { "netCents": 3498, "vatCents": 509, "grossCents": 4007 }
#     },
#     {
#     "orderId": "A200",
#     "shipTo": { "country": "US" },
#     "customer": { "email": "bob@example.org", "vatId": null },
#     "lines": [
#     { "sku": "WID-001", "qty": 2, "unitCents": 999 },
#     { "sku": "GAD-002", "qty": 1, "unitCents": 1500 }
#     ],
#     "declared": { "netCents": 3498, "vatCents": 0, "grossCents": 3498 }
#     },
#     {
#     "orderId": "A300",
#     "shipTo": { "country": "NL" },
#     "customer": { "email": "acct@company.nl", "vatId": "NL999999999B01" },
#     "lines": [
#     { "sku": "WID-001", "qty": 2, "unitCents": 999 },
#     { "sku": "GAD-002", "qty": 1, "unitCents": 1500 }
#     ],
#     "declared": { "netCents": 3498, "vatCents": 0, "grossCents": 3498 }
#     },
#     {
#     "orderId": "A301",
#     "shipTo": { "country": "NL" },
#     "customer": { "email": "billing@company.nl", "vatId": "NL999999999B01" },
#     "lines": [
#     { "sku": "WID-001", "qty": 2, "unitCents": 999 },
#     { "sku": "GAD-002", "qty": 1, "unitCents": 1500 }
#     ],
#     "declared": { "netCents": 3498, "vatCents": 0, "grossCents": 3498 }
#     },
#     {
#     "orderId": "A400",
#     "shipTo": { "country": "BE" },
#     "customer": { "email": "ada@other.example", "vatId": null },
#     "lines": [
#     { "sku": "WID-001", "qty": 2, "unitCents": 999 },
#     { "sku": "GAD-002", "qty": 1, "unitCents": 1500 }
#     ],
#     "declared": { "netCents": 3498, "vatCents": 508, "grossCents": 4006 }
#     }
#     ]
#   }"""^^rdf:JSON
#   ?NetD = 3498
#   ?Order = <urn:example:order:A301>
#   ?OrderId = "A301"
#   ?OrderIndex = 3
#   ?OrderJson = """{"orderId":"A301","shipTo":{"country":"NL"},"customer":{"email":"billing@company.nl","vatId":"NL999999999B01"},"lines":[{"sku":"WID-001","qty":2,"unitCents":999},{"sku":"GAD-002","qty":1,"unitCents":1500}],"declared":{"netCents":3498,"vatCents":0,"grossCents":3498}}"""^^rdf:JSON
#   ?OrderUriStr = "urn:example:order:A301"
#   ?Orders = ("""{"orderId":"A100","shipTo":{"country":"BE"},"customer":{"email":"Ada@Example.ORG","vatId":null},"lines":[{"sku":"wid-001","qty":2,"unitCents":999},{"sku":"GAD-002","qty":1,"unitCents":1500}],"declared":{"netCents":3498,"vatCents":509,"grossCents":4007}}"""^^rdf:JSON """{"orderId":"A200","shipTo":{"country":"US"},"customer":{"email":"bob@example.org","vatId":null},"lines":[{"sku":"WID-001","qty":2,"unitCents":999},{"sku":"GAD-002","qty":1,"unitCents":1500}],"declared":{"netCents":3498,"vatCents":0,"grossCents":3498}}"""^^rdf:JSON """{"orderId":"A300","shipTo":{"country":"NL"},"customer":{"email":"acct@company.nl","vatId":"NL999999999B01"},"lines":[{"sku":"WID-001","qty":2,"unitCents":999},{"sku":"GAD-002","qty":1,"unitCents":1500}],"declared":{"netCents":3498,"vatCents":0,"grossCents":3498}}"""^^rdf:JSON """{"orderId":"A301","shipTo":{"country":"NL"},"customer":{"email":"billing@company.nl","vatId":"NL999999999B01"},"lines":[{"sku":"WID-001","qty":2,"unitCents":999},{"sku":"GAD-002","qty":1,"unitCents":1500}],"declared":{"netCents":3498,"vatCents":0,"grossCents":3498}}"""^^rdf:JSON """{"orderId":"A400","shipTo":{"country":"BE"},"customer":{"email":"ada@other.example","vatId":null},"lines":[{"sku":"WID-001","qty":2,"unitCents":999},{"sku":"GAD-002","qty":1,"unitCents":1500}],"declared":{"netCents":3498,"vatCents":508,"grossCents":4006}}"""^^rdf:JSON)
#   ?VatD = 0
#   ?VatIdRaw = "NL999999999B01"
# Therefore the derived triple above is entailed by the rules and facts.
# ----------------------------------------------------------------------

<urn:example:order:A301> ex:email "billing@company.nl" .

# ----------------------------------------------------------------------
# Proof for derived triple:
#   <urn:example:order:A301> ex:vatIdRaw "NL999999999B01" .
# It holds because the following instance of the rule body is provable:
#   ex:feed ex:json """{
#     "meta~data": { "batch": "2025-12-18" },
#     "orders": [
#       {
#         "orderId": "A100",
#         "shipTo": { "country": "BE" },
#         "customer": { "email": "Ada@Example.ORG", "vatId": null },
#         "lines": [
#           { "sku": "wid-001", "qty": 2, "unitCents": 999 },
#           { "sku": "GAD-002", "qty": 1, "unitCents": 1500 }
#         ],
#         "declared": { "netCents": 3498, "vatCents": 509, "grossCents": 4007 }
#       },
#       {
#         "orderId": "A200",
#         "shipTo": { "country": "US" },
#         "customer": { "email": "bob@example.org", "vatId": null },
#         "lines": [
#           { "sku": "WID-001", "qty": 2, "unitCents": 999 },
#           { "sku": "GAD-002", "qty": 1, "unitCents": 1500 }
#         ],
#         "declared": { "netCents": 3498, "vatCents": 0, "grossCents": 3498 }
#       },
#       {
#         "orderId": "A300",
#         "shipTo": { "country": "NL" },
#         "customer": { "email": "acct@company.nl", "vatId": "NL999999999B01" },
#         "lines": [
#           { "sku": "WID-001", "qty": 2, "unitCents": 999 },
#           { "sku": "GAD-002", "qty": 1, "unitCents": 1500 }
#         ],
#         "declared": { "netCents": 3498, "vatCents": 0, "grossCents": 3498 }
#       },
#       {
#         "orderId": "A301",
#         "shipTo": { "country": "NL" },
#         "customer": { "email": "billing@company.nl", "vatId": "NL999999999B01" },
#         "lines": [
#           { "sku": "WID-001", "qty": 2, "unitCents": 999 },
#           { "sku": "GAD-002", "qty": 1, "unitCents": 1500 }
#         ],
#         "declared": { "netCents": 3498, "vatCents": 0, "grossCents": 3498 }
#       },
#       {
#         "orderId": "A400",
#         "shipTo": { "country": "BE" },
#         "customer": { "email": "ada@other.example", "vatId": null },
#         "lines": [
#           { "sku": "WID-001", "qty": 2, "unitCents": 999 },
#           { "sku": "GAD-002", "qty": 1, "unitCents": 1500 }
#         ],
#         "declared": { "netCents": 3498, "vatCents": 508, "grossCents": 4006 }
#       }
#     ]
#   }"""^^rdf:JSON .
#   ("""{
#     "meta~data": { "batch": "2025-12-18" },
#     "orders": [
#       {
#         "orderId": "A100",
#         "shipTo": { "country": "BE" },
#         "customer": { "email": "Ada@Example.ORG", "vatId": null },
#         "lines": [
#           { "sku": "wid-001", "qty": 2, "unitCents": 999 },
#           { "sku": "GAD-002", "qty": 1, "unitCents": 1500 }
#         ],
#         "declared": { "netCents": 3498, "vatCents": 509, "grossCents": 4007 }
#       },
#       {
#         "orderId": "A200",
#         "shipTo": { "country": "US" },
#         "customer": { "email": "bob@example.org", "vatId": null },
#         "lines": [
#           { "sku": "WID-001", "qty": 2, "unitCents": 999 },
#           { "sku": "GAD-002", "qty": 1, "unitCents": 1500 }
#         ],
#         "declared": { "netCents": 3498, "vatCents": 0, "grossCents": 3498 }
#       },
#       {
#         "orderId": "A300",
#         "shipTo": { "country": "NL" },
#         "customer": { "email": "acct@company.nl", "vatId": "NL999999999B01" },
#         "lines": [
#           { "sku": "WID-001", "qty": 2, "unitCents": 999 },
#           { "sku": "GAD-002", "qty": 1, "unitCents": 1500 }
#         ],
#         "declared": { "netCents": 3498, "vatCents": 0, "grossCents": 3498 }
#       },
#       {
#         "orderId": "A301",
#         "shipTo": { "country": "NL" },
#         "customer": { "email": "billing@company.nl", "vatId": "NL999999999B01" },
#         "lines": [
#           { "sku": "WID-001", "qty": 2, "unitCents": 999 },
#           { "sku": "GAD-002", "qty": 1, "unitCents": 1500 }
#         ],
#         "declared": { "netCents": 3498, "vatCents": 0, "grossCents": 3498 }
#       },
#       {
#         "orderId": "A400",
#         "shipTo": { "country": "BE" },
#         "customer": { "email": "ada@other.example", "vatId": null },
#         "lines": [
#           { "sku": "WID-001", "qty": 2, "unitCents": 999 },
#           { "sku": "GAD-002", "qty": 1, "unitCents": 1500 }
#         ],
#         "declared": { "netCents": 3498, "vatCents": 508, "grossCents": 4006 }
#       }
#     ]
#   }"""^^rdf:JSON "/orders") string:jsonPointer ("""{"orderId":"A100","shipTo":{"country":"BE"},"customer":{"email":"Ada@Example.ORG","vatId":null},"lines":[{"sku":"wid-001","qty":2,"unitCents":999},{"sku":"GAD-002","qty":1,"unitCents":1500}],"declared":{"netCents":3498,"vatCents":509,"grossCents":4007}}"""^^rdf:JSON """{"orderId":"A200","shipTo":{"country":"US"},"customer":{"email":"bob@example.org","vatId":null},"lines":[{"sku":"WID-001","qty":2,"unitCents":999},{"sku":"GAD-002","qty":1,"unitCents":1500}],"declared":{"netCents":3498,"vatCents":0,"grossCents":3498}}"""^^rdf:JSON """{"orderId":"A300","shipTo":{"country":"NL"},"customer":{"email":"acct@company.nl","vatId":"NL999999999B01"},"lines":[{"sku":"WID-001","qty":2,"unitCents":999},{"sku":"GAD-002","qty":1,"unitCents":1500}],"declared":{"netCents":3498,"vatCents":0,"grossCents":3498}}"""^^rdf:JSON """{"orderId":"A301","shipTo":{"country":"NL"},"customer":{"email":"billing@company.nl","vatId":"NL999999999B01"},"lines":[{"sku":"WID-001","qty":2,"unitCents":999},{"sku":"GAD-002","qty":1,"unitCents":1500}],"declared":{"netCents":3498,"vatCents":0,"grossCents":3498}}"""^^rdf:JSON """{"orderId":"A400","shipTo":{"country":"BE"},"customer":{"email":"ada@other.example","vatId":null},"lines":[{"sku":"WID-001","qty":2,"unitCents":999},{"sku":"GAD-002","qty":1,"unitCents":1500}],"declared":{"netCents":3498,"vatCents":508,"grossCents":4006}}"""^^rdf:JSON) .
#   ("""{"orderId":"A100","shipTo":{"country":"BE"},"customer":{"email":"Ada@Example.ORG","vatId":null},"lines":[{"sku":"wid-001","qty":2,"unitCents":999},{"sku":"GAD-002","qty":1,"unitCents":1500}],"declared":{"netCents":3498,"vatCents":509,"grossCents":4007}}"""^^rdf:JSON """{"orderId":"A200","shipTo":{"country":"US"},"customer":{"email":"bob@example.org","vatId":null},"lines":[{"sku":"WID-001","qty":2,"unitCents":999},{"sku":"GAD-002","qty":1,"unitCents":1500}],"declared":{"netCents":3498,"vatCents":0,"grossCents":3498}}"""^^rdf:JSON """{"orderId":"A300","shipTo":{"country":"NL"},"customer":{"email":"acct@company.nl","vatId":"NL999999999B01"},"lines":[{"sku":"WID-001","qty":2,"unitCents":999},{"sku":"GAD-002","qty":1,"unitCents":1500}],"declared":{"netCents":3498,"vatCents":0,"grossCents":3498}}"""^^rdf:JSON """{"orderId":"A301","shipTo":{"country":"NL"},"customer":{"email":"billing@company.nl","vatId":"NL999999999B01"},"lines":[{"sku":"WID-001","qty":2,"unitCents":999},{"sku":"GAD-002","qty":1,"unitCents":1500}],"declared":{"netCents":3498,"vatCents":0,"grossCents":3498}}"""^^rdf:JSON """{"orderId":"A400","shipTo":{"country":"BE"},"customer":{"email":"ada@other.example","vatId":null},"lines":[{"sku":"WID-001","qty":2,"unitCents":999},{"sku":"GAD-002","qty":1,"unitCents":1500}],"declared":{"netCents":3498,"vatCents":508,"grossCents":4006}}"""^^rdf:JSON) list:iterate (3 """{"orderId":"A301","shipTo":{"country":"NL"},"customer":{"email":"billing@company.nl","vatId":"NL999999999B01"},"lines":[{"sku":"WID-001","qty":2,"unitCents":999},{"sku":"GAD-002","qty":1,"unitCents":1500}],"declared":{"netCents":3498,"vatCents":0,"grossCents":3498}}"""^^rdf:JSON) .
#   ("""{"orderId":"A301","shipTo":{"country":"NL"},"customer":{"email":"billing@company.nl","vatId":"NL999999999B01"},"lines":[{"sku":"WID-001","qty":2,"unitCents":999},{"sku":"GAD-002","qty":1,"unitCents":1500}],"declared":{"netCents":3498,"vatCents":0,"grossCents":3498}}"""^^rdf:JSON "/orderId") string:jsonPointer "A301" .
#   ("""{"orderId":"A301","shipTo":{"country":"NL"},"customer":{"email":"billing@company.nl","vatId":"NL999999999B01"},"lines":[{"sku":"WID-001","qty":2,"unitCents":999},{"sku":"GAD-002","qty":1,"unitCents":1500}],"declared":{"netCents":3498,"vatCents":0,"grossCents":3498}}"""^^rdf:JSON "/shipTo/country") string:jsonPointer "NL" .
#   ("""{"orderId":"A301","shipTo":{"country":"NL"},"customer":{"email":"billing@company.nl","vatId":"NL999999999B01"},"lines":[{"sku":"WID-001","qty":2,"unitCents":999},{"sku":"GAD-002","qty":1,"unitCents":1500}],"declared":{"netCents":3498,"vatCents":0,"grossCents":3498}}"""^^rdf:JSON "/customer") string:jsonPointer """{"email":"billing@company.nl","vatId":"NL999999999B01"}"""^^rdf:JSON .
#   ("""{"email":"billing@company.nl","vatId":"NL999999999B01"}"""^^rdf:JSON "/email") string:jsonPointer "billing@company.nl" .
#   ("""{"email":"billing@company.nl","vatId":"NL999999999B01"}"""^^rdf:JSON "/vatId") string:jsonPointer "NL999999999B01" .
#   ("""{"orderId":"A301","shipTo":{"country":"NL"},"customer":{"email":"billing@company.nl","vatId":"NL999999999B01"},"lines":[{"sku":"WID-001","qty":2,"unitCents":999},{"sku":"GAD-002","qty":1,"unitCents":1500}],"declared":{"netCents":3498,"vatCents":0,"grossCents":3498}}"""^^rdf:JSON "/declared") string:jsonPointer """{"netCents":3498,"vatCents":0,"grossCents":3498}"""^^rdf:JSON .
#   ("""{"netCents":3498,"vatCents":0,"grossCents":3498}"""^^rdf:JSON "/netCents") string:jsonPointer 3498 .
#   ("""{"netCents":3498,"vatCents":0,"grossCents":3498}"""^^rdf:JSON "/vatCents") string:jsonPointer 0 .
#   ("""{"netCents":3498,"vatCents":0,"grossCents":3498}"""^^rdf:JSON "/grossCents") string:jsonPointer 3498 .
#   ("urn:example:order:%s" "A301") string:format "urn:example:order:A301" .
#   <urn:example:order:A301> log:uri "urn:example:order:A301" .
# via the schematic forward rule:
#   {
#     ex:feed ex:json ?J .
#     (?J "/orders") string:jsonPointer ?Orders .
#     ?Orders list:iterate (?OrderIndex ?OrderJson) .
#     (?OrderJson "/orderId") string:jsonPointer ?OrderId .
#     (?OrderJson "/shipTo/country") string:jsonPointer ?Country .
#     (?OrderJson "/customer") string:jsonPointer ?CustJson .
#     (?CustJson "/email") string:jsonPointer ?Email .
#     (?CustJson "/vatId") string:jsonPointer ?VatIdRaw .
#     (?OrderJson "/declared") string:jsonPointer ?Decl .
#     (?Decl "/netCents") string:jsonPointer ?NetD .
#     (?Decl "/vatCents") string:jsonPointer ?VatD .
#     (?Decl "/grossCents") string:jsonPointer ?GrossD .
#     ("urn:example:order:%s" ?OrderId) string:format ?OrderUriStr .
#     ?Order log:uri ?OrderUriStr .
#   } => {
#     ?Order a ex:Order .
#     ?Order ex:orderId ?OrderId .
#     ?Order ex:orderIndex ?OrderIndex .
#     ?Order ex:shipCountry ?Country .
#     ?Order ex:email ?Email .
#     ?Order ex:vatIdRaw ?VatIdRaw .
#     ?Order ex:declaredNetCents ?NetD .
#     ?Order ex:declaredVatCents ?VatD .
#     ?Order ex:declaredGrossCents ?GrossD .
#   } .
# with substitution (on rule variables):
#   ?Country = "NL"
#   ?CustJson = """{"email":"billing@company.nl","vatId":"NL999999999B01"}"""^^rdf:JSON
#   ?Decl = """{"netCents":3498,"vatCents":0,"grossCents":3498}"""^^rdf:JSON
#   ?Email = "billing@company.nl"
#   ?GrossD = 3498
#   ?J = """{
#     "meta~data": { "batch": "2025-12-18" },
#     "orders": [
#     {
#     "orderId": "A100",
#     "shipTo": { "country": "BE" },
#     "customer": { "email": "Ada@Example.ORG", "vatId": null },
#     "lines": [
#     { "sku": "wid-001", "qty": 2, "unitCents": 999 },
#     { "sku": "GAD-002", "qty": 1, "unitCents": 1500 }
#     ],
#     "declared": { "netCents": 3498, "vatCents": 509, "grossCents": 4007 }
#     },
#     {
#     "orderId": "A200",
#     "shipTo": { "country": "US" },
#     "customer": { "email": "bob@example.org", "vatId": null },
#     "lines": [
#     { "sku": "WID-001", "qty": 2, "unitCents": 999 },
#     { "sku": "GAD-002", "qty": 1, "unitCents": 1500 }
#     ],
#     "declared": { "netCents": 3498, "vatCents": 0, "grossCents": 3498 }
#     },
#     {
#     "orderId": "A300",
#     "shipTo": { "country": "NL" },
#     "customer": { "email": "acct@company.nl", "vatId": "NL999999999B01" },
#     "lines": [
#     { "sku": "WID-001", "qty": 2, "unitCents": 999 },
#     { "sku": "GAD-002", "qty": 1, "unitCents": 1500 }
#     ],
#     "declared": { "netCents": 3498, "vatCents": 0, "grossCents": 3498 }
#     },
#     {
#     "orderId": "A301",
#     "shipTo": { "country": "NL" },
#     "customer": { "email": "billing@company.nl", "vatId": "NL999999999B01" },
#     "lines": [
#     { "sku": "WID-001", "qty": 2, "unitCents": 999 },
#     { "sku": "GAD-002", "qty": 1, "unitCents": 1500 }
#     ],
#     "declared": { "netCents": 3498, "vatCents": 0, "grossCents": 3498 }
#     },
#     {
#     "orderId": "A400",
#     "shipTo": { "country": "BE" },
#     "customer": { "email": "ada@other.example", "vatId": null },
#     "lines": [
#     { "sku": "WID-001", "qty": 2, "unitCents": 999 },
#     { "sku": "GAD-002", "qty": 1, "unitCents": 1500 }
#     ],
#     "declared": { "netCents": 3498, "vatCents": 508, "grossCents": 4006 }
#     }
#     ]
#   }"""^^rdf:JSON
#   ?NetD = 3498
#   ?Order = <urn:example:order:A301>
#   ?OrderId = "A301"
#   ?OrderIndex = 3
#   ?OrderJson = """{"orderId":"A301","shipTo":{"country":"NL"},"customer":{"email":"billing@company.nl","vatId":"NL999999999B01"},"lines":[{"sku":"WID-001","qty":2,"unitCents":999},{"sku":"GAD-002","qty":1,"unitCents":1500}],"declared":{"netCents":3498,"vatCents":0,"grossCents":3498}}"""^^rdf:JSON
#   ?OrderUriStr = "urn:example:order:A301"
#   ?Orders = ("""{"orderId":"A100","shipTo":{"country":"BE"},"customer":{"email":"Ada@Example.ORG","vatId":null},"lines":[{"sku":"wid-001","qty":2,"unitCents":999},{"sku":"GAD-002","qty":1,"unitCents":1500}],"declared":{"netCents":3498,"vatCents":509,"grossCents":4007}}"""^^rdf:JSON """{"orderId":"A200","shipTo":{"country":"US"},"customer":{"email":"bob@example.org","vatId":null},"lines":[{"sku":"WID-001","qty":2,"unitCents":999},{"sku":"GAD-002","qty":1,"unitCents":1500}],"declared":{"netCents":3498,"vatCents":0,"grossCents":3498}}"""^^rdf:JSON """{"orderId":"A300","shipTo":{"country":"NL"},"customer":{"email":"acct@company.nl","vatId":"NL999999999B01"},"lines":[{"sku":"WID-001","qty":2,"unitCents":999},{"sku":"GAD-002","qty":1,"unitCents":1500}],"declared":{"netCents":3498,"vatCents":0,"grossCents":3498}}"""^^rdf:JSON """{"orderId":"A301","shipTo":{"country":"NL"},"customer":{"email":"billing@company.nl","vatId":"NL999999999B01"},"lines":[{"sku":"WID-001","qty":2,"unitCents":999},{"sku":"GAD-002","qty":1,"unitCents":1500}],"declared":{"netCents":3498,"vatCents":0,"grossCents":3498}}"""^^rdf:JSON """{"orderId":"A400","shipTo":{"country":"BE"},"customer":{"email":"ada@other.example","vatId":null},"lines":[{"sku":"WID-001","qty":2,"unitCents":999},{"sku":"GAD-002","qty":1,"unitCents":1500}],"declared":{"netCents":3498,"vatCents":508,"grossCents":4006}}"""^^rdf:JSON)
#   ?VatD = 0
#   ?VatIdRaw = "NL999999999B01"
# Therefore the derived triple above is entailed by the rules and facts.
# ----------------------------------------------------------------------

<urn:example:order:A301> ex:vatIdRaw "NL999999999B01" .

# ----------------------------------------------------------------------
# Proof for derived triple:
#   <urn:example:order:A301> ex:declaredNetCents 3498 .
# It holds because the following instance of the rule body is provable:
#   ex:feed ex:json """{
#     "meta~data": { "batch": "2025-12-18" },
#     "orders": [
#       {
#         "orderId": "A100",
#         "shipTo": { "country": "BE" },
#         "customer": { "email": "Ada@Example.ORG", "vatId": null },
#         "lines": [
#           { "sku": "wid-001", "qty": 2, "unitCents": 999 },
#           { "sku": "GAD-002", "qty": 1, "unitCents": 1500 }
#         ],
#         "declared": { "netCents": 3498, "vatCents": 509, "grossCents": 4007 }
#       },
#       {
#         "orderId": "A200",
#         "shipTo": { "country": "US" },
#         "customer": { "email": "bob@example.org", "vatId": null },
#         "lines": [
#           { "sku": "WID-001", "qty": 2, "unitCents": 999 },
#           { "sku": "GAD-002", "qty": 1, "unitCents": 1500 }
#         ],
#         "declared": { "netCents": 3498, "vatCents": 0, "grossCents": 3498 }
#       },
#       {
#         "orderId": "A300",
#         "shipTo": { "country": "NL" },
#         "customer": { "email": "acct@company.nl", "vatId": "NL999999999B01" },
#         "lines": [
#           { "sku": "WID-001", "qty": 2, "unitCents": 999 },
#           { "sku": "GAD-002", "qty": 1, "unitCents": 1500 }
#         ],
#         "declared": { "netCents": 3498, "vatCents": 0, "grossCents": 3498 }
#       },
#       {
#         "orderId": "A301",
#         "shipTo": { "country": "NL" },
#         "customer": { "email": "billing@company.nl", "vatId": "NL999999999B01" },
#         "lines": [
#           { "sku": "WID-001", "qty": 2, "unitCents": 999 },
#           { "sku": "GAD-002", "qty": 1, "unitCents": 1500 }
#         ],
#         "declared": { "netCents": 3498, "vatCents": 0, "grossCents": 3498 }
#       },
#       {
#         "orderId": "A400",
#         "shipTo": { "country": "BE" },
#         "customer": { "email": "ada@other.example", "vatId": null },
#         "lines": [
#           { "sku": "WID-001", "qty": 2, "unitCents": 999 },
#           { "sku": "GAD-002", "qty": 1, "unitCents": 1500 }
#         ],
#         "declared": { "netCents": 3498, "vatCents": 508, "grossCents": 4006 }
#       }
#     ]
#   }"""^^rdf:JSON .
#   ("""{
#     "meta~data": { "batch": "2025-12-18" },
#     "orders": [
#       {
#         "orderId": "A100",
#         "shipTo": { "country": "BE" },
#         "customer": { "email": "Ada@Example.ORG", "vatId": null },
#         "lines": [
#           { "sku": "wid-001", "qty": 2, "unitCents": 999 },
#           { "sku": "GAD-002", "qty": 1, "unitCents": 1500 }
#         ],
#         "declared": { "netCents": 3498, "vatCents": 509, "grossCents": 4007 }
#       },
#       {
#         "orderId": "A200",
#         "shipTo": { "country": "US" },
#         "customer": { "email": "bob@example.org", "vatId": null },
#         "lines": [
#           { "sku": "WID-001", "qty": 2, "unitCents": 999 },
#           { "sku": "GAD-002", "qty": 1, "unitCents": 1500 }
#         ],
#         "declared": { "netCents": 3498, "vatCents": 0, "grossCents": 3498 }
#       },
#       {
#         "orderId": "A300",
#         "shipTo": { "country": "NL" },
#         "customer": { "email": "acct@company.nl", "vatId": "NL999999999B01" },
#         "lines": [
#           { "sku": "WID-001", "qty": 2, "unitCents": 999 },
#           { "sku": "GAD-002", "qty": 1, "unitCents": 1500 }
#         ],
#         "declared": { "netCents": 3498, "vatCents": 0, "grossCents": 3498 }
#       },
#       {
#         "orderId": "A301",
#         "shipTo": { "country": "NL" },
#         "customer": { "email": "billing@company.nl", "vatId": "NL999999999B01" },
#         "lines": [
#           { "sku": "WID-001", "qty": 2, "unitCents": 999 },
#           { "sku": "GAD-002", "qty": 1, "unitCents": 1500 }
#         ],
#         "declared": { "netCents": 3498, "vatCents": 0, "grossCents": 3498 }
#       },
#       {
#         "orderId": "A400",
#         "shipTo": { "country": "BE" },
#         "customer": { "email": "ada@other.example", "vatId": null },
#         "lines": [
#           { "sku": "WID-001", "qty": 2, "unitCents": 999 },
#           { "sku": "GAD-002", "qty": 1, "unitCents": 1500 }
#         ],
#         "declared": { "netCents": 3498, "vatCents": 508, "grossCents": 4006 }
#       }
#     ]
#   }"""^^rdf:JSON "/orders") string:jsonPointer ("""{"orderId":"A100","shipTo":{"country":"BE"},"customer":{"email":"Ada@Example.ORG","vatId":null},"lines":[{"sku":"wid-001","qty":2,"unitCents":999},{"sku":"GAD-002","qty":1,"unitCents":1500}],"declared":{"netCents":3498,"vatCents":509,"grossCents":4007}}"""^^rdf:JSON """{"orderId":"A200","shipTo":{"country":"US"},"customer":{"email":"bob@example.org","vatId":null},"lines":[{"sku":"WID-001","qty":2,"unitCents":999},{"sku":"GAD-002","qty":1,"unitCents":1500}],"declared":{"netCents":3498,"vatCents":0,"grossCents":3498}}"""^^rdf:JSON """{"orderId":"A300","shipTo":{"country":"NL"},"customer":{"email":"acct@company.nl","vatId":"NL999999999B01"},"lines":[{"sku":"WID-001","qty":2,"unitCents":999},{"sku":"GAD-002","qty":1,"unitCents":1500}],"declared":{"netCents":3498,"vatCents":0,"grossCents":3498}}"""^^rdf:JSON """{"orderId":"A301","shipTo":{"country":"NL"},"customer":{"email":"billing@company.nl","vatId":"NL999999999B01"},"lines":[{"sku":"WID-001","qty":2,"unitCents":999},{"sku":"GAD-002","qty":1,"unitCents":1500}],"declared":{"netCents":3498,"vatCents":0,"grossCents":3498}}"""^^rdf:JSON """{"orderId":"A400","shipTo":{"country":"BE"},"customer":{"email":"ada@other.example","vatId":null},"lines":[{"sku":"WID-001","qty":2,"unitCents":999},{"sku":"GAD-002","qty":1,"unitCents":1500}],"declared":{"netCents":3498,"vatCents":508,"grossCents":4006}}"""^^rdf:JSON) .
#   ("""{"orderId":"A100","shipTo":{"country":"BE"},"customer":{"email":"Ada@Example.ORG","vatId":null},"lines":[{"sku":"wid-001","qty":2,"unitCents":999},{"sku":"GAD-002","qty":1,"unitCents":1500}],"declared":{"netCents":3498,"vatCents":509,"grossCents":4007}}"""^^rdf:JSON """{"orderId":"A200","shipTo":{"country":"US"},"customer":{"email":"bob@example.org","vatId":null},"lines":[{"sku":"WID-001","qty":2,"unitCents":999},{"sku":"GAD-002","qty":1,"unitCents":1500}],"declared":{"netCents":3498,"vatCents":0,"grossCents":3498}}"""^^rdf:JSON """{"orderId":"A300","shipTo":{"country":"NL"},"customer":{"email":"acct@company.nl","vatId":"NL999999999B01"},"lines":[{"sku":"WID-001","qty":2,"unitCents":999},{"sku":"GAD-002","qty":1,"unitCents":1500}],"declared":{"netCents":3498,"vatCents":0,"grossCents":3498}}"""^^rdf:JSON """{"orderId":"A301","shipTo":{"country":"NL"},"customer":{"email":"billing@company.nl","vatId":"NL999999999B01"},"lines":[{"sku":"WID-001","qty":2,"unitCents":999},{"sku":"GAD-002","qty":1,"unitCents":1500}],"declared":{"netCents":3498,"vatCents":0,"grossCents":3498}}"""^^rdf:JSON """{"orderId":"A400","shipTo":{"country":"BE"},"customer":{"email":"ada@other.example","vatId":null},"lines":[{"sku":"WID-001","qty":2,"unitCents":999},{"sku":"GAD-002","qty":1,"unitCents":1500}],"declared":{"netCents":3498,"vatCents":508,"grossCents":4006}}"""^^rdf:JSON) list:iterate (3 """{"orderId":"A301","shipTo":{"country":"NL"},"customer":{"email":"billing@company.nl","vatId":"NL999999999B01"},"lines":[{"sku":"WID-001","qty":2,"unitCents":999},{"sku":"GAD-002","qty":1,"unitCents":1500}],"declared":{"netCents":3498,"vatCents":0,"grossCents":3498}}"""^^rdf:JSON) .
#   ("""{"orderId":"A301","shipTo":{"country":"NL"},"customer":{"email":"billing@company.nl","vatId":"NL999999999B01"},"lines":[{"sku":"WID-001","qty":2,"unitCents":999},{"sku":"GAD-002","qty":1,"unitCents":1500}],"declared":{"netCents":3498,"vatCents":0,"grossCents":3498}}"""^^rdf:JSON "/orderId") string:jsonPointer "A301" .
#   ("""{"orderId":"A301","shipTo":{"country":"NL"},"customer":{"email":"billing@company.nl","vatId":"NL999999999B01"},"lines":[{"sku":"WID-001","qty":2,"unitCents":999},{"sku":"GAD-002","qty":1,"unitCents":1500}],"declared":{"netCents":3498,"vatCents":0,"grossCents":3498}}"""^^rdf:JSON "/shipTo/country") string:jsonPointer "NL" .
#   ("""{"orderId":"A301","shipTo":{"country":"NL"},"customer":{"email":"billing@company.nl","vatId":"NL999999999B01"},"lines":[{"sku":"WID-001","qty":2,"unitCents":999},{"sku":"GAD-002","qty":1,"unitCents":1500}],"declared":{"netCents":3498,"vatCents":0,"grossCents":3498}}"""^^rdf:JSON "/customer") string:jsonPointer """{"email":"billing@company.nl","vatId":"NL999999999B01"}"""^^rdf:JSON .
#   ("""{"email":"billing@company.nl","vatId":"NL999999999B01"}"""^^rdf:JSON "/email") string:jsonPointer "billing@company.nl" .
#   ("""{"email":"billing@company.nl","vatId":"NL999999999B01"}"""^^rdf:JSON "/vatId") string:jsonPointer "NL999999999B01" .
#   ("""{"orderId":"A301","shipTo":{"country":"NL"},"customer":{"email":"billing@company.nl","vatId":"NL999999999B01"},"lines":[{"sku":"WID-001","qty":2,"unitCents":999},{"sku":"GAD-002","qty":1,"unitCents":1500}],"declared":{"netCents":3498,"vatCents":0,"grossCents":3498}}"""^^rdf:JSON "/declared") string:jsonPointer """{"netCents":3498,"vatCents":0,"grossCents":3498}"""^^rdf:JSON .
#   ("""{"netCents":3498,"vatCents":0,"grossCents":3498}"""^^rdf:JSON "/netCents") string:jsonPointer 3498 .
#   ("""{"netCents":3498,"vatCents":0,"grossCents":3498}"""^^rdf:JSON "/vatCents") string:jsonPointer 0 .
#   ("""{"netCents":3498,"vatCents":0,"grossCents":3498}"""^^rdf:JSON "/grossCents") string:jsonPointer 3498 .
#   ("urn:example:order:%s" "A301") string:format "urn:example:order:A301" .
#   <urn:example:order:A301> log:uri "urn:example:order:A301" .
# via the schematic forward rule:
#   {
#     ex:feed ex:json ?J .
#     (?J "/orders") string:jsonPointer ?Orders .
#     ?Orders list:iterate (?OrderIndex ?OrderJson) .
#     (?OrderJson "/orderId") string:jsonPointer ?OrderId .
#     (?OrderJson "/shipTo/country") string:jsonPointer ?Country .
#     (?OrderJson "/customer") string:jsonPointer ?CustJson .
#     (?CustJson "/email") string:jsonPointer ?Email .
#     (?CustJson "/vatId") string:jsonPointer ?VatIdRaw .
#     (?OrderJson "/declared") string:jsonPointer ?Decl .
#     (?Decl "/netCents") string:jsonPointer ?NetD .
#     (?Decl "/vatCents") string:jsonPointer ?VatD .
#     (?Decl "/grossCents") string:jsonPointer ?GrossD .
#     ("urn:example:order:%s" ?OrderId) string:format ?OrderUriStr .
#     ?Order log:uri ?OrderUriStr .
#   } => {
#     ?Order a ex:Order .
#     ?Order ex:orderId ?OrderId .
#     ?Order ex:orderIndex ?OrderIndex .
#     ?Order ex:shipCountry ?Country .
#     ?Order ex:email ?Email .
#     ?Order ex:vatIdRaw ?VatIdRaw .
#     ?Order ex:declaredNetCents ?NetD .
#     ?Order ex:declaredVatCents ?VatD .
#     ?Order ex:declaredGrossCents ?GrossD .
#   } .
# with substitution (on rule variables):
#   ?Country = "NL"
#   ?CustJson = """{"email":"billing@company.nl","vatId":"NL999999999B01"}"""^^rdf:JSON
#   ?Decl = """{"netCents":3498,"vatCents":0,"grossCents":3498}"""^^rdf:JSON
#   ?Email = "billing@company.nl"
#   ?GrossD = 3498
#   ?J = """{
#     "meta~data": { "batch": "2025-12-18" },
#     "orders": [
#     {
#     "orderId": "A100",
#     "shipTo": { "country": "BE" },
#     "customer": { "email": "Ada@Example.ORG", "vatId": null },
#     "lines": [
#     { "sku": "wid-001", "qty": 2, "unitCents": 999 },
#     { "sku": "GAD-002", "qty": 1, "unitCents": 1500 }
#     ],
#     "declared": { "netCents": 3498, "vatCents": 509, "grossCents": 4007 }
#     },
#     {
#     "orderId": "A200",
#     "shipTo": { "country": "US" },
#     "customer": { "email": "bob@example.org", "vatId": null },
#     "lines": [
#     { "sku": "WID-001", "qty": 2, "unitCents": 999 },
#     { "sku": "GAD-002", "qty": 1, "unitCents": 1500 }
#     ],
#     "declared": { "netCents": 3498, "vatCents": 0, "grossCents": 3498 }
#     },
#     {
#     "orderId": "A300",
#     "shipTo": { "country": "NL" },
#     "customer": { "email": "acct@company.nl", "vatId": "NL999999999B01" },
#     "lines": [
#     { "sku": "WID-001", "qty": 2, "unitCents": 999 },
#     { "sku": "GAD-002", "qty": 1, "unitCents": 1500 }
#     ],
#     "declared": { "netCents": 3498, "vatCents": 0, "grossCents": 3498 }
#     },
#     {
#     "orderId": "A301",
#     "shipTo": { "country": "NL" },
#     "customer": { "email": "billing@company.nl", "vatId": "NL999999999B01" },
#     "lines": [
#     { "sku": "WID-001", "qty": 2, "unitCents": 999 },
#     { "sku": "GAD-002", "qty": 1, "unitCents": 1500 }
#     ],
#     "declared": { "netCents": 3498, "vatCents": 0, "grossCents": 3498 }
#     },
#     {
#     "orderId": "A400",
#     "shipTo": { "country": "BE" },
#     "customer": { "email": "ada@other.example", "vatId": null },
#     "lines": [
#     { "sku": "WID-001", "qty": 2, "unitCents": 999 },
#     { "sku": "GAD-002", "qty": 1, "unitCents": 1500 }
#     ],
#     "declared": { "netCents": 3498, "vatCents": 508, "grossCents": 4006 }
#     }
#     ]
#   }"""^^rdf:JSON
#   ?NetD = 3498
#   ?Order = <urn:example:order:A301>
#   ?OrderId = "A301"
#   ?OrderIndex = 3
#   ?OrderJson = """{"orderId":"A301","shipTo":{"country":"NL"},"customer":{"email":"billing@company.nl","vatId":"NL999999999B01"},"lines":[{"sku":"WID-001","qty":2,"unitCents":999},{"sku":"GAD-002","qty":1,"unitCents":1500}],"declared":{"netCents":3498,"vatCents":0,"grossCents":3498}}"""^^rdf:JSON
#   ?OrderUriStr = "urn:example:order:A301"
#   ?Orders = ("""{"orderId":"A100","shipTo":{"country":"BE"},"customer":{"email":"Ada@Example.ORG","vatId":null},"lines":[{"sku":"wid-001","qty":2,"unitCents":999},{"sku":"GAD-002","qty":1,"unitCents":1500}],"declared":{"netCents":3498,"vatCents":509,"grossCents":4007}}"""^^rdf:JSON """{"orderId":"A200","shipTo":{"country":"US"},"customer":{"email":"bob@example.org","vatId":null},"lines":[{"sku":"WID-001","qty":2,"unitCents":999},{"sku":"GAD-002","qty":1,"unitCents":1500}],"declared":{"netCents":3498,"vatCents":0,"grossCents":3498}}"""^^rdf:JSON """{"orderId":"A300","shipTo":{"country":"NL"},"customer":{"email":"acct@company.nl","vatId":"NL999999999B01"},"lines":[{"sku":"WID-001","qty":2,"unitCents":999},{"sku":"GAD-002","qty":1,"unitCents":1500}],"declared":{"netCents":3498,"vatCents":0,"grossCents":3498}}"""^^rdf:JSON """{"orderId":"A301","shipTo":{"country":"NL"},"customer":{"email":"billing@company.nl","vatId":"NL999999999B01"},"lines":[{"sku":"WID-001","qty":2,"unitCents":999},{"sku":"GAD-002","qty":1,"unitCents":1500}],"declared":{"netCents":3498,"vatCents":0,"grossCents":3498}}"""^^rdf:JSON """{"orderId":"A400","shipTo":{"country":"BE"},"customer":{"email":"ada@other.example","vatId":null},"lines":[{"sku":"WID-001","qty":2,"unitCents":999},{"sku":"GAD-002","qty":1,"unitCents":1500}],"declared":{"netCents":3498,"vatCents":508,"grossCents":4006}}"""^^rdf:JSON)
#   ?VatD = 0
#   ?VatIdRaw = "NL999999999B01"
# Therefore the derived triple above is entailed by the rules and facts.
# ----------------------------------------------------------------------

<urn:example:order:A301> ex:declaredNetCents 3498 .

# ----------------------------------------------------------------------
# Proof for derived triple:
#   <urn:example:order:A301> ex:declaredVatCents 0 .
# It holds because the following instance of the rule body is provable:
#   ex:feed ex:json """{
#     "meta~data": { "batch": "2025-12-18" },
#     "orders": [
#       {
#         "orderId": "A100",
#         "shipTo": { "country": "BE" },
#         "customer": { "email": "Ada@Example.ORG", "vatId": null },
#         "lines": [
#           { "sku": "wid-001", "qty": 2, "unitCents": 999 },
#           { "sku": "GAD-002", "qty": 1, "unitCents": 1500 }
#         ],
#         "declared": { "netCents": 3498, "vatCents": 509, "grossCents": 4007 }
#       },
#       {
#         "orderId": "A200",
#         "shipTo": { "country": "US" },
#         "customer": { "email": "bob@example.org", "vatId": null },
#         "lines": [
#           { "sku": "WID-001", "qty": 2, "unitCents": 999 },
#           { "sku": "GAD-002", "qty": 1, "unitCents": 1500 }
#         ],
#         "declared": { "netCents": 3498, "vatCents": 0, "grossCents": 3498 }
#       },
#       {
#         "orderId": "A300",
#         "shipTo": { "country": "NL" },
#         "customer": { "email": "acct@company.nl", "vatId": "NL999999999B01" },
#         "lines": [
#           { "sku": "WID-001", "qty": 2, "unitCents": 999 },
#           { "sku": "GAD-002", "qty": 1, "unitCents": 1500 }
#         ],
#         "declared": { "netCents": 3498, "vatCents": 0, "grossCents": 3498 }
#       },
#       {
#         "orderId": "A301",
#         "shipTo": { "country": "NL" },
#         "customer": { "email": "billing@company.nl", "vatId": "NL999999999B01" },
#         "lines": [
#           { "sku": "WID-001", "qty": 2, "unitCents": 999 },
#           { "sku": "GAD-002", "qty": 1, "unitCents": 1500 }
#         ],
#         "declared": { "netCents": 3498, "vatCents": 0, "grossCents": 3498 }
#       },
#       {
#         "orderId": "A400",
#         "shipTo": { "country": "BE" },
#         "customer": { "email": "ada@other.example", "vatId": null },
#         "lines": [
#           { "sku": "WID-001", "qty": 2, "unitCents": 999 },
#           { "sku": "GAD-002", "qty": 1, "unitCents": 1500 }
#         ],
#         "declared": { "netCents": 3498, "vatCents": 508, "grossCents": 4006 }
#       }
#     ]
#   }"""^^rdf:JSON .
#   ("""{
#     "meta~data": { "batch": "2025-12-18" },
#     "orders": [
#       {
#         "orderId": "A100",
#         "shipTo": { "country": "BE" },
#         "customer": { "email": "Ada@Example.ORG", "vatId": null },
#         "lines": [
#           { "sku": "wid-001", "qty": 2, "unitCents": 999 },
#           { "sku": "GAD-002", "qty": 1, "unitCents": 1500 }
#         ],
#         "declared": { "netCents": 3498, "vatCents": 509, "grossCents": 4007 }
#       },
#       {
#         "orderId": "A200",
#         "shipTo": { "country": "US" },
#         "customer": { "email": "bob@example.org", "vatId": null },
#         "lines": [
#           { "sku": "WID-001", "qty": 2, "unitCents": 999 },
#           { "sku": "GAD-002", "qty": 1, "unitCents": 1500 }
#         ],
#         "declared": { "netCents": 3498, "vatCents": 0, "grossCents": 3498 }
#       },
#       {
#         "orderId": "A300",
#         "shipTo": { "country": "NL" },
#         "customer": { "email": "acct@company.nl", "vatId": "NL999999999B01" },
#         "lines": [
#           { "sku": "WID-001", "qty": 2, "unitCents": 999 },
#           { "sku": "GAD-002", "qty": 1, "unitCents": 1500 }
#         ],
#         "declared": { "netCents": 3498, "vatCents": 0, "grossCents": 3498 }
#       },
#       {
#         "orderId": "A301",
#         "shipTo": { "country": "NL" },
#         "customer": { "email": "billing@company.nl", "vatId": "NL999999999B01" },
#         "lines": [
#           { "sku": "WID-001", "qty": 2, "unitCents": 999 },
#           { "sku": "GAD-002", "qty": 1, "unitCents": 1500 }
#         ],
#         "declared": { "netCents": 3498, "vatCents": 0, "grossCents": 3498 }
#       },
#       {
#         "orderId": "A400",
#         "shipTo": { "country": "BE" },
#         "customer": { "email": "ada@other.example", "vatId": null },
#         "lines": [
#           { "sku": "WID-001", "qty": 2, "unitCents": 999 },
#           { "sku": "GAD-002", "qty": 1, "unitCents": 1500 }
#         ],
#         "declared": { "netCents": 3498, "vatCents": 508, "grossCents": 4006 }
#       }
#     ]
#   }"""^^rdf:JSON "/orders") string:jsonPointer ("""{"orderId":"A100","shipTo":{"country":"BE"},"customer":{"email":"Ada@Example.ORG","vatId":null},"lines":[{"sku":"wid-001","qty":2,"unitCents":999},{"sku":"GAD-002","qty":1,"unitCents":1500}],"declared":{"netCents":3498,"vatCents":509,"grossCents":4007}}"""^^rdf:JSON """{"orderId":"A200","shipTo":{"country":"US"},"customer":{"email":"bob@example.org","vatId":null},"lines":[{"sku":"WID-001","qty":2,"unitCents":999},{"sku":"GAD-002","qty":1,"unitCents":1500}],"declared":{"netCents":3498,"vatCents":0,"grossCents":3498}}"""^^rdf:JSON """{"orderId":"A300","shipTo":{"country":"NL"},"customer":{"email":"acct@company.nl","vatId":"NL999999999B01"},"lines":[{"sku":"WID-001","qty":2,"unitCents":999},{"sku":"GAD-002","qty":1,"unitCents":1500}],"declared":{"netCents":3498,"vatCents":0,"grossCents":3498}}"""^^rdf:JSON """{"orderId":"A301","shipTo":{"country":"NL"},"customer":{"email":"billing@company.nl","vatId":"NL999999999B01"},"lines":[{"sku":"WID-001","qty":2,"unitCents":999},{"sku":"GAD-002","qty":1,"unitCents":1500}],"declared":{"netCents":3498,"vatCents":0,"grossCents":3498}}"""^^rdf:JSON """{"orderId":"A400","shipTo":{"country":"BE"},"customer":{"email":"ada@other.example","vatId":null},"lines":[{"sku":"WID-001","qty":2,"unitCents":999},{"sku":"GAD-002","qty":1,"unitCents":1500}],"declared":{"netCents":3498,"vatCents":508,"grossCents":4006}}"""^^rdf:JSON) .
#   ("""{"orderId":"A100","shipTo":{"country":"BE"},"customer":{"email":"Ada@Example.ORG","vatId":null},"lines":[{"sku":"wid-001","qty":2,"unitCents":999},{"sku":"GAD-002","qty":1,"unitCents":1500}],"declared":{"netCents":3498,"vatCents":509,"grossCents":4007}}"""^^rdf:JSON """{"orderId":"A200","shipTo":{"country":"US"},"customer":{"email":"bob@example.org","vatId":null},"lines":[{"sku":"WID-001","qty":2,"unitCents":999},{"sku":"GAD-002","qty":1,"unitCents":1500}],"declared":{"netCents":3498,"vatCents":0,"grossCents":3498}}"""^^rdf:JSON """{"orderId":"A300","shipTo":{"country":"NL"},"customer":{"email":"acct@company.nl","vatId":"NL999999999B01"},"lines":[{"sku":"WID-001","qty":2,"unitCents":999},{"sku":"GAD-002","qty":1,"unitCents":1500}],"declared":{"netCents":3498,"vatCents":0,"grossCents":3498}}"""^^rdf:JSON """{"orderId":"A301","shipTo":{"country":"NL"},"customer":{"email":"billing@company.nl","vatId":"NL999999999B01"},"lines":[{"sku":"WID-001","qty":2,"unitCents":999},{"sku":"GAD-002","qty":1,"unitCents":1500}],"declared":{"netCents":3498,"vatCents":0,"grossCents":3498}}"""^^rdf:JSON """{"orderId":"A400","shipTo":{"country":"BE"},"customer":{"email":"ada@other.example","vatId":null},"lines":[{"sku":"WID-001","qty":2,"unitCents":999},{"sku":"GAD-002","qty":1,"unitCents":1500}],"declared":{"netCents":3498,"vatCents":508,"grossCents":4006}}"""^^rdf:JSON) list:iterate (3 """{"orderId":"A301","shipTo":{"country":"NL"},"customer":{"email":"billing@company.nl","vatId":"NL999999999B01"},"lines":[{"sku":"WID-001","qty":2,"unitCents":999},{"sku":"GAD-002","qty":1,"unitCents":1500}],"declared":{"netCents":3498,"vatCents":0,"grossCents":3498}}"""^^rdf:JSON) .
#   ("""{"orderId":"A301","shipTo":{"country":"NL"},"customer":{"email":"billing@company.nl","vatId":"NL999999999B01"},"lines":[{"sku":"WID-001","qty":2,"unitCents":999},{"sku":"GAD-002","qty":1,"unitCents":1500}],"declared":{"netCents":3498,"vatCents":0,"grossCents":3498}}"""^^rdf:JSON "/orderId") string:jsonPointer "A301" .
#   ("""{"orderId":"A301","shipTo":{"country":"NL"},"customer":{"email":"billing@company.nl","vatId":"NL999999999B01"},"lines":[{"sku":"WID-001","qty":2,"unitCents":999},{"sku":"GAD-002","qty":1,"unitCents":1500}],"declared":{"netCents":3498,"vatCents":0,"grossCents":3498}}"""^^rdf:JSON "/shipTo/country") string:jsonPointer "NL" .
#   ("""{"orderId":"A301","shipTo":{"country":"NL"},"customer":{"email":"billing@company.nl","vatId":"NL999999999B01"},"lines":[{"sku":"WID-001","qty":2,"unitCents":999},{"sku":"GAD-002","qty":1,"unitCents":1500}],"declared":{"netCents":3498,"vatCents":0,"grossCents":3498}}"""^^rdf:JSON "/customer") string:jsonPointer """{"email":"billing@company.nl","vatId":"NL999999999B01"}"""^^rdf:JSON .
#   ("""{"email":"billing@company.nl","vatId":"NL999999999B01"}"""^^rdf:JSON "/email") string:jsonPointer "billing@company.nl" .
#   ("""{"email":"billing@company.nl","vatId":"NL999999999B01"}"""^^rdf:JSON "/vatId") string:jsonPointer "NL999999999B01" .
#   ("""{"orderId":"A301","shipTo":{"country":"NL"},"customer":{"email":"billing@company.nl","vatId":"NL999999999B01"},"lines":[{"sku":"WID-001","qty":2,"unitCents":999},{"sku":"GAD-002","qty":1,"unitCents":1500}],"declared":{"netCents":3498,"vatCents":0,"grossCents":3498}}"""^^rdf:JSON "/declared") string:jsonPointer """{"netCents":3498,"vatCents":0,"grossCents":3498}"""^^rdf:JSON .
#   ("""{"netCents":3498,"vatCents":0,"grossCents":3498}"""^^rdf:JSON "/netCents") string:jsonPointer 3498 .
#   ("""{"netCents":3498,"vatCents":0,"grossCents":3498}"""^^rdf:JSON "/vatCents") string:jsonPointer 0 .
#   ("""{"netCents":3498,"vatCents":0,"grossCents":3498}"""^^rdf:JSON "/grossCents") string:jsonPointer 3498 .
#   ("urn:example:order:%s" "A301") string:format "urn:example:order:A301" .
#   <urn:example:order:A301> log:uri "urn:example:order:A301" .
# via the schematic forward rule:
#   {
#     ex:feed ex:json ?J .
#     (?J "/orders") string:jsonPointer ?Orders .
#     ?Orders list:iterate (?OrderIndex ?OrderJson) .
#     (?OrderJson "/orderId") string:jsonPointer ?OrderId .
#     (?OrderJson "/shipTo/country") string:jsonPointer ?Country .
#     (?OrderJson "/customer") string:jsonPointer ?CustJson .
#     (?CustJson "/email") string:jsonPointer ?Email .
#     (?CustJson "/vatId") string:jsonPointer ?VatIdRaw .
#     (?OrderJson "/declared") string:jsonPointer ?Decl .
#     (?Decl "/netCents") string:jsonPointer ?NetD .
#     (?Decl "/vatCents") string:jsonPointer ?VatD .
#     (?Decl "/grossCents") string:jsonPointer ?GrossD .
#     ("urn:example:order:%s" ?OrderId) string:format ?OrderUriStr .
#     ?Order log:uri ?OrderUriStr .
#   } => {
#     ?Order a ex:Order .
#     ?Order ex:orderId ?OrderId .
#     ?Order ex:orderIndex ?OrderIndex .
#     ?Order ex:shipCountry ?Country .
#     ?Order ex:email ?Email .
#     ?Order ex:vatIdRaw ?VatIdRaw .
#     ?Order ex:declaredNetCents ?NetD .
#     ?Order ex:declaredVatCents ?VatD .
#     ?Order ex:declaredGrossCents ?GrossD .
#   } .
# with substitution (on rule variables):
#   ?Country = "NL"
#   ?CustJson = """{"email":"billing@company.nl","vatId":"NL999999999B01"}"""^^rdf:JSON
#   ?Decl = """{"netCents":3498,"vatCents":0,"grossCents":3498}"""^^rdf:JSON
#   ?Email = "billing@company.nl"
#   ?GrossD = 3498
#   ?J = """{
#     "meta~data": { "batch": "2025-12-18" },
#     "orders": [
#     {
#     "orderId": "A100",
#     "shipTo": { "country": "BE" },
#     "customer": { "email": "Ada@Example.ORG", "vatId": null },
#     "lines": [
#     { "sku": "wid-001", "qty": 2, "unitCents": 999 },
#     { "sku": "GAD-002", "qty": 1, "unitCents": 1500 }
#     ],
#     "declared": { "netCents": 3498, "vatCents": 509, "grossCents": 4007 }
#     },
#     {
#     "orderId": "A200",
#     "shipTo": { "country": "US" },
#     "customer": { "email": "bob@example.org", "vatId": null },
#     "lines": [
#     { "sku": "WID-001", "qty": 2, "unitCents": 999 },
#     { "sku": "GAD-002", "qty": 1, "unitCents": 1500 }
#     ],
#     "declared": { "netCents": 3498, "vatCents": 0, "grossCents": 3498 }
#     },
#     {
#     "orderId": "A300",
#     "shipTo": { "country": "NL" },
#     "customer": { "email": "acct@company.nl", "vatId": "NL999999999B01" },
#     "lines": [
#     { "sku": "WID-001", "qty": 2, "unitCents": 999 },
#     { "sku": "GAD-002", "qty": 1, "unitCents": 1500 }
#     ],
#     "declared": { "netCents": 3498, "vatCents": 0, "grossCents": 3498 }
#     },
#     {
#     "orderId": "A301",
#     "shipTo": { "country": "NL" },
#     "customer": { "email": "billing@company.nl", "vatId": "NL999999999B01" },
#     "lines": [
#     { "sku": "WID-001", "qty": 2, "unitCents": 999 },
#     { "sku": "GAD-002", "qty": 1, "unitCents": 1500 }
#     ],
#     "declared": { "netCents": 3498, "vatCents": 0, "grossCents": 3498 }
#     },
#     {
#     "orderId": "A400",
#     "shipTo": { "country": "BE" },
#     "customer": { "email": "ada@other.example", "vatId": null },
#     "lines": [
#     { "sku": "WID-001", "qty": 2, "unitCents": 999 },
#     { "sku": "GAD-002", "qty": 1, "unitCents": 1500 }
#     ],
#     "declared": { "netCents": 3498, "vatCents": 508, "grossCents": 4006 }
#     }
#     ]
#   }"""^^rdf:JSON
#   ?NetD = 3498
#   ?Order = <urn:example:order:A301>
#   ?OrderId = "A301"
#   ?OrderIndex = 3
#   ?OrderJson = """{"orderId":"A301","shipTo":{"country":"NL"},"customer":{"email":"billing@company.nl","vatId":"NL999999999B01"},"lines":[{"sku":"WID-001","qty":2,"unitCents":999},{"sku":"GAD-002","qty":1,"unitCents":1500}],"declared":{"netCents":3498,"vatCents":0,"grossCents":3498}}"""^^rdf:JSON
#   ?OrderUriStr = "urn:example:order:A301"
#   ?Orders = ("""{"orderId":"A100","shipTo":{"country":"BE"},"customer":{"email":"Ada@Example.ORG","vatId":null},"lines":[{"sku":"wid-001","qty":2,"unitCents":999},{"sku":"GAD-002","qty":1,"unitCents":1500}],"declared":{"netCents":3498,"vatCents":509,"grossCents":4007}}"""^^rdf:JSON """{"orderId":"A200","shipTo":{"country":"US"},"customer":{"email":"bob@example.org","vatId":null},"lines":[{"sku":"WID-001","qty":2,"unitCents":999},{"sku":"GAD-002","qty":1,"unitCents":1500}],"declared":{"netCents":3498,"vatCents":0,"grossCents":3498}}"""^^rdf:JSON """{"orderId":"A300","shipTo":{"country":"NL"},"customer":{"email":"acct@company.nl","vatId":"NL999999999B01"},"lines":[{"sku":"WID-001","qty":2,"unitCents":999},{"sku":"GAD-002","qty":1,"unitCents":1500}],"declared":{"netCents":3498,"vatCents":0,"grossCents":3498}}"""^^rdf:JSON """{"orderId":"A301","shipTo":{"country":"NL"},"customer":{"email":"billing@company.nl","vatId":"NL999999999B01"},"lines":[{"sku":"WID-001","qty":2,"unitCents":999},{"sku":"GAD-002","qty":1,"unitCents":1500}],"declared":{"netCents":3498,"vatCents":0,"grossCents":3498}}"""^^rdf:JSON """{"orderId":"A400","shipTo":{"country":"BE"},"customer":{"email":"ada@other.example","vatId":null},"lines":[{"sku":"WID-001","qty":2,"unitCents":999},{"sku":"GAD-002","qty":1,"unitCents":1500}],"declared":{"netCents":3498,"vatCents":508,"grossCents":4006}}"""^^rdf:JSON)
#   ?VatD = 0
#   ?VatIdRaw = "NL999999999B01"
# Therefore the derived triple above is entailed by the rules and facts.
# ----------------------------------------------------------------------

<urn:example:order:A301> ex:declaredVatCents 0 .

# ----------------------------------------------------------------------
# Proof for derived triple:
#   <urn:example:order:A301> ex:declaredGrossCents 3498 .
# It holds because the following instance of the rule body is provable:
#   ex:feed ex:json """{
#     "meta~data": { "batch": "2025-12-18" },
#     "orders": [
#       {
#         "orderId": "A100",
#         "shipTo": { "country": "BE" },
#         "customer": { "email": "Ada@Example.ORG", "vatId": null },
#         "lines": [
#           { "sku": "wid-001", "qty": 2, "unitCents": 999 },
#           { "sku": "GAD-002", "qty": 1, "unitCents": 1500 }
#         ],
#         "declared": { "netCents": 3498, "vatCents": 509, "grossCents": 4007 }
#       },
#       {
#         "orderId": "A200",
#         "shipTo": { "country": "US" },
#         "customer": { "email": "bob@example.org", "vatId": null },
#         "lines": [
#           { "sku": "WID-001", "qty": 2, "unitCents": 999 },
#           { "sku": "GAD-002", "qty": 1, "unitCents": 1500 }
#         ],
#         "declared": { "netCents": 3498, "vatCents": 0, "grossCents": 3498 }
#       },
#       {
#         "orderId": "A300",
#         "shipTo": { "country": "NL" },
#         "customer": { "email": "acct@company.nl", "vatId": "NL999999999B01" },
#         "lines": [
#           { "sku": "WID-001", "qty": 2, "unitCents": 999 },
#           { "sku": "GAD-002", "qty": 1, "unitCents": 1500 }
#         ],
#         "declared": { "netCents": 3498, "vatCents": 0, "grossCents": 3498 }
#       },
#       {
#         "orderId": "A301",
#         "shipTo": { "country": "NL" },
#         "customer": { "email": "billing@company.nl", "vatId": "NL999999999B01" },
#         "lines": [
#           { "sku": "WID-001", "qty": 2, "unitCents": 999 },
#           { "sku": "GAD-002", "qty": 1, "unitCents": 1500 }
#         ],
#         "declared": { "netCents": 3498, "vatCents": 0, "grossCents": 3498 }
#       },
#       {
#         "orderId": "A400",
#         "shipTo": { "country": "BE" },
#         "customer": { "email": "ada@other.example", "vatId": null },
#         "lines": [
#           { "sku": "WID-001", "qty": 2, "unitCents": 999 },
#           { "sku": "GAD-002", "qty": 1, "unitCents": 1500 }
#         ],
#         "declared": { "netCents": 3498, "vatCents": 508, "grossCents": 4006 }
#       }
#     ]
#   }"""^^rdf:JSON .
#   ("""{
#     "meta~data": { "batch": "2025-12-18" },
#     "orders": [
#       {
#         "orderId": "A100",
#         "shipTo": { "country": "BE" },
#         "customer": { "email": "Ada@Example.ORG", "vatId": null },
#         "lines": [
#           { "sku": "wid-001", "qty": 2, "unitCents": 999 },
#           { "sku": "GAD-002", "qty": 1, "unitCents": 1500 }
#         ],
#         "declared": { "netCents": 3498, "vatCents": 509, "grossCents": 4007 }
#       },
#       {
#         "orderId": "A200",
#         "shipTo": { "country": "US" },
#         "customer": { "email": "bob@example.org", "vatId": null },
#         "lines": [
#           { "sku": "WID-001", "qty": 2, "unitCents": 999 },
#           { "sku": "GAD-002", "qty": 1, "unitCents": 1500 }
#         ],
#         "declared": { "netCents": 3498, "vatCents": 0, "grossCents": 3498 }
#       },
#       {
#         "orderId": "A300",
#         "shipTo": { "country": "NL" },
#         "customer": { "email": "acct@company.nl", "vatId": "NL999999999B01" },
#         "lines": [
#           { "sku": "WID-001", "qty": 2, "unitCents": 999 },
#           { "sku": "GAD-002", "qty": 1, "unitCents": 1500 }
#         ],
#         "declared": { "netCents": 3498, "vatCents": 0, "grossCents": 3498 }
#       },
#       {
#         "orderId": "A301",
#         "shipTo": { "country": "NL" },
#         "customer": { "email": "billing@company.nl", "vatId": "NL999999999B01" },
#         "lines": [
#           { "sku": "WID-001", "qty": 2, "unitCents": 999 },
#           { "sku": "GAD-002", "qty": 1, "unitCents": 1500 }
#         ],
#         "declared": { "netCents": 3498, "vatCents": 0, "grossCents": 3498 }
#       },
#       {
#         "orderId": "A400",
#         "shipTo": { "country": "BE" },
#         "customer": { "email": "ada@other.example", "vatId": null },
#         "lines": [
#           { "sku": "WID-001", "qty": 2, "unitCents": 999 },
#           { "sku": "GAD-002", "qty": 1, "unitCents": 1500 }
#         ],
#         "declared": { "netCents": 3498, "vatCents": 508, "grossCents": 4006 }
#       }
#     ]
#   }"""^^rdf:JSON "/orders") string:jsonPointer ("""{"orderId":"A100","shipTo":{"country":"BE"},"customer":{"email":"Ada@Example.ORG","vatId":null},"lines":[{"sku":"wid-001","qty":2,"unitCents":999},{"sku":"GAD-002","qty":1,"unitCents":1500}],"declared":{"netCents":3498,"vatCents":509,"grossCents":4007}}"""^^rdf:JSON """{"orderId":"A200","shipTo":{"country":"US"},"customer":{"email":"bob@example.org","vatId":null},"lines":[{"sku":"WID-001","qty":2,"unitCents":999},{"sku":"GAD-002","qty":1,"unitCents":1500}],"declared":{"netCents":3498,"vatCents":0,"grossCents":3498}}"""^^rdf:JSON """{"orderId":"A300","shipTo":{"country":"NL"},"customer":{"email":"acct@company.nl","vatId":"NL999999999B01"},"lines":[{"sku":"WID-001","qty":2,"unitCents":999},{"sku":"GAD-002","qty":1,"unitCents":1500}],"declared":{"netCents":3498,"vatCents":0,"grossCents":3498}}"""^^rdf:JSON """{"orderId":"A301","shipTo":{"country":"NL"},"customer":{"email":"billing@company.nl","vatId":"NL999999999B01"},"lines":[{"sku":"WID-001","qty":2,"unitCents":999},{"sku":"GAD-002","qty":1,"unitCents":1500}],"declared":{"netCents":3498,"vatCents":0,"grossCents":3498}}"""^^rdf:JSON """{"orderId":"A400","shipTo":{"country":"BE"},"customer":{"email":"ada@other.example","vatId":null},"lines":[{"sku":"WID-001","qty":2,"unitCents":999},{"sku":"GAD-002","qty":1,"unitCents":1500}],"declared":{"netCents":3498,"vatCents":508,"grossCents":4006}}"""^^rdf:JSON) .
#   ("""{"orderId":"A100","shipTo":{"country":"BE"},"customer":{"email":"Ada@Example.ORG","vatId":null},"lines":[{"sku":"wid-001","qty":2,"unitCents":999},{"sku":"GAD-002","qty":1,"unitCents":1500}],"declared":{"netCents":3498,"vatCents":509,"grossCents":4007}}"""^^rdf:JSON """{"orderId":"A200","shipTo":{"country":"US"},"customer":{"email":"bob@example.org","vatId":null},"lines":[{"sku":"WID-001","qty":2,"unitCents":999},{"sku":"GAD-002","qty":1,"unitCents":1500}],"declared":{"netCents":3498,"vatCents":0,"grossCents":3498}}"""^^rdf:JSON """{"orderId":"A300","shipTo":{"country":"NL"},"customer":{"email":"acct@company.nl","vatId":"NL999999999B01"},"lines":[{"sku":"WID-001","qty":2,"unitCents":999},{"sku":"GAD-002","qty":1,"unitCents":1500}],"declared":{"netCents":3498,"vatCents":0,"grossCents":3498}}"""^^rdf:JSON """{"orderId":"A301","shipTo":{"country":"NL"},"customer":{"email":"billing@company.nl","vatId":"NL999999999B01"},"lines":[{"sku":"WID-001","qty":2,"unitCents":999},{"sku":"GAD-002","qty":1,"unitCents":1500}],"declared":{"netCents":3498,"vatCents":0,"grossCents":3498}}"""^^rdf:JSON """{"orderId":"A400","shipTo":{"country":"BE"},"customer":{"email":"ada@other.example","vatId":null},"lines":[{"sku":"WID-001","qty":2,"unitCents":999},{"sku":"GAD-002","qty":1,"unitCents":1500}],"declared":{"netCents":3498,"vatCents":508,"grossCents":4006}}"""^^rdf:JSON) list:iterate (3 """{"orderId":"A301","shipTo":{"country":"NL"},"customer":{"email":"billing@company.nl","vatId":"NL999999999B01"},"lines":[{"sku":"WID-001","qty":2,"unitCents":999},{"sku":"GAD-002","qty":1,"unitCents":1500}],"declared":{"netCents":3498,"vatCents":0,"grossCents":3498}}"""^^rdf:JSON) .
#   ("""{"orderId":"A301","shipTo":{"country":"NL"},"customer":{"email":"billing@company.nl","vatId":"NL999999999B01"},"lines":[{"sku":"WID-001","qty":2,"unitCents":999},{"sku":"GAD-002","qty":1,"unitCents":1500}],"declared":{"netCents":3498,"vatCents":0,"grossCents":3498}}"""^^rdf:JSON "/orderId") string:jsonPointer "A301" .
#   ("""{"orderId":"A301","shipTo":{"country":"NL"},"customer":{"email":"billing@company.nl","vatId":"NL999999999B01"},"lines":[{"sku":"WID-001","qty":2,"unitCents":999},{"sku":"GAD-002","qty":1,"unitCents":1500}],"declared":{"netCents":3498,"vatCents":0,"grossCents":3498}}"""^^rdf:JSON "/shipTo/country") string:jsonPointer "NL" .
#   ("""{"orderId":"A301","shipTo":{"country":"NL"},"customer":{"email":"billing@company.nl","vatId":"NL999999999B01"},"lines":[{"sku":"WID-001","qty":2,"unitCents":999},{"sku":"GAD-002","qty":1,"unitCents":1500}],"declared":{"netCents":3498,"vatCents":0,"grossCents":3498}}"""^^rdf:JSON "/customer") string:jsonPointer """{"email":"billing@company.nl","vatId":"NL999999999B01"}"""^^rdf:JSON .
#   ("""{"email":"billing@company.nl","vatId":"NL999999999B01"}"""^^rdf:JSON "/email") string:jsonPointer "billing@company.nl" .
#   ("""{"email":"billing@company.nl","vatId":"NL999999999B01"}"""^^rdf:JSON "/vatId") string:jsonPointer "NL999999999B01" .
#   ("""{"orderId":"A301","shipTo":{"country":"NL"},"customer":{"email":"billing@company.nl","vatId":"NL999999999B01"},"lines":[{"sku":"WID-001","qty":2,"unitCents":999},{"sku":"GAD-002","qty":1,"unitCents":1500}],"declared":{"netCents":3498,"vatCents":0,"grossCents":3498}}"""^^rdf:JSON "/declared") string:jsonPointer """{"netCents":3498,"vatCents":0,"grossCents":3498}"""^^rdf:JSON .
#   ("""{"netCents":3498,"vatCents":0,"grossCents":3498}"""^^rdf:JSON "/netCents") string:jsonPointer 3498 .
#   ("""{"netCents":3498,"vatCents":0,"grossCents":3498}"""^^rdf:JSON "/vatCents") string:jsonPointer 0 .
#   ("""{"netCents":3498,"vatCents":0,"grossCents":3498}"""^^rdf:JSON "/grossCents") string:jsonPointer 3498 .
#   ("urn:example:order:%s" "A301") string:format "urn:example:order:A301" .
#   <urn:example:order:A301> log:uri "urn:example:order:A301" .
# via the schematic forward rule:
#   {
#     ex:feed ex:json ?J .
#     (?J "/orders") string:jsonPointer ?Orders .
#     ?Orders list:iterate (?OrderIndex ?OrderJson) .
#     (?OrderJson "/orderId") string:jsonPointer ?OrderId .
#     (?OrderJson "/shipTo/country") string:jsonPointer ?Country .
#     (?OrderJson "/customer") string:jsonPointer ?CustJson .
#     (?CustJson "/email") string:jsonPointer ?Email .
#     (?CustJson "/vatId") string:jsonPointer ?VatIdRaw .
#     (?OrderJson "/declared") string:jsonPointer ?Decl .
#     (?Decl "/netCents") string:jsonPointer ?NetD .
#     (?Decl "/vatCents") string:jsonPointer ?VatD .
#     (?Decl "/grossCents") string:jsonPointer ?GrossD .
#     ("urn:example:order:%s" ?OrderId) string:format ?OrderUriStr .
#     ?Order log:uri ?OrderUriStr .
#   } => {
#     ?Order a ex:Order .
#     ?Order ex:orderId ?OrderId .
#     ?Order ex:orderIndex ?OrderIndex .
#     ?Order ex:shipCountry ?Country .
#     ?Order ex:email ?Email .
#     ?Order ex:vatIdRaw ?VatIdRaw .
#     ?Order ex:declaredNetCents ?NetD .
#     ?Order ex:declaredVatCents ?VatD .
#     ?Order ex:declaredGrossCents ?GrossD .
#   } .
# with substitution (on rule variables):
#   ?Country = "NL"
#   ?CustJson = """{"email":"billing@company.nl","vatId":"NL999999999B01"}"""^^rdf:JSON
#   ?Decl = """{"netCents":3498,"vatCents":0,"grossCents":3498}"""^^rdf:JSON
#   ?Email = "billing@company.nl"
#   ?GrossD = 3498
#   ?J = """{
#     "meta~data": { "batch": "2025-12-18" },
#     "orders": [
#     {
#     "orderId": "A100",
#     "shipTo": { "country": "BE" },
#     "customer": { "email": "Ada@Example.ORG", "vatId": null },
#     "lines": [
#     { "sku": "wid-001", "qty": 2, "unitCents": 999 },
#     { "sku": "GAD-002", "qty": 1, "unitCents": 1500 }
#     ],
#     "declared": { "netCents": 3498, "vatCents": 509, "grossCents": 4007 }
#     },
#     {
#     "orderId": "A200",
#     "shipTo": { "country": "US" },
#     "customer": { "email": "bob@example.org", "vatId": null },
#     "lines": [
#     { "sku": "WID-001", "qty": 2, "unitCents": 999 },
#     { "sku": "GAD-002", "qty": 1, "unitCents": 1500 }
#     ],
#     "declared": { "netCents": 3498, "vatCents": 0, "grossCents": 3498 }
#     },
#     {
#     "orderId": "A300",
#     "shipTo": { "country": "NL" },
#     "customer": { "email": "acct@company.nl", "vatId": "NL999999999B01" },
#     "lines": [
#     { "sku": "WID-001", "qty": 2, "unitCents": 999 },
#     { "sku": "GAD-002", "qty": 1, "unitCents": 1500 }
#     ],
#     "declared": { "netCents": 3498, "vatCents": 0, "grossCents": 3498 }
#     },
#     {
#     "orderId": "A301",
#     "shipTo": { "country": "NL" },
#     "customer": { "email": "billing@company.nl", "vatId": "NL999999999B01" },
#     "lines": [
#     { "sku": "WID-001", "qty": 2, "unitCents": 999 },
#     { "sku": "GAD-002", "qty": 1, "unitCents": 1500 }
#     ],
#     "declared": { "netCents": 3498, "vatCents": 0, "grossCents": 3498 }
#     },
#     {
#     "orderId": "A400",
#     "shipTo": { "country": "BE" },
#     "customer": { "email": "ada@other.example", "vatId": null },
#     "lines": [
#     { "sku": "WID-001", "qty": 2, "unitCents": 999 },
#     { "sku": "GAD-002", "qty": 1, "unitCents": 1500 }
#     ],
#     "declared": { "netCents": 3498, "vatCents": 508, "grossCents": 4006 }
#     }
#     ]
#   }"""^^rdf:JSON
#   ?NetD = 3498
#   ?Order = <urn:example:order:A301>
#   ?OrderId = "A301"
#   ?OrderIndex = 3
#   ?OrderJson = """{"orderId":"A301","shipTo":{"country":"NL"},"customer":{"email":"billing@company.nl","vatId":"NL999999999B01"},"lines":[{"sku":"WID-001","qty":2,"unitCents":999},{"sku":"GAD-002","qty":1,"unitCents":1500}],"declared":{"netCents":3498,"vatCents":0,"grossCents":3498}}"""^^rdf:JSON
#   ?OrderUriStr = "urn:example:order:A301"
#   ?Orders = ("""{"orderId":"A100","shipTo":{"country":"BE"},"customer":{"email":"Ada@Example.ORG","vatId":null},"lines":[{"sku":"wid-001","qty":2,"unitCents":999},{"sku":"GAD-002","qty":1,"unitCents":1500}],"declared":{"netCents":3498,"vatCents":509,"grossCents":4007}}"""^^rdf:JSON """{"orderId":"A200","shipTo":{"country":"US"},"customer":{"email":"bob@example.org","vatId":null},"lines":[{"sku":"WID-001","qty":2,"unitCents":999},{"sku":"GAD-002","qty":1,"unitCents":1500}],"declared":{"netCents":3498,"vatCents":0,"grossCents":3498}}"""^^rdf:JSON """{"orderId":"A300","shipTo":{"country":"NL"},"customer":{"email":"acct@company.nl","vatId":"NL999999999B01"},"lines":[{"sku":"WID-001","qty":2,"unitCents":999},{"sku":"GAD-002","qty":1,"unitCents":1500}],"declared":{"netCents":3498,"vatCents":0,"grossCents":3498}}"""^^rdf:JSON """{"orderId":"A301","shipTo":{"country":"NL"},"customer":{"email":"billing@company.nl","vatId":"NL999999999B01"},"lines":[{"sku":"WID-001","qty":2,"unitCents":999},{"sku":"GAD-002","qty":1,"unitCents":1500}],"declared":{"netCents":3498,"vatCents":0,"grossCents":3498}}"""^^rdf:JSON """{"orderId":"A400","shipTo":{"country":"BE"},"customer":{"email":"ada@other.example","vatId":null},"lines":[{"sku":"WID-001","qty":2,"unitCents":999},{"sku":"GAD-002","qty":1,"unitCents":1500}],"declared":{"netCents":3498,"vatCents":508,"grossCents":4006}}"""^^rdf:JSON)
#   ?VatD = 0
#   ?VatIdRaw = "NL999999999B01"
# Therefore the derived triple above is entailed by the rules and facts.
# ----------------------------------------------------------------------

<urn:example:order:A301> ex:declaredGrossCents 3498 .

# ----------------------------------------------------------------------
# Proof for derived triple:
#   <urn:example:order:A300> a ex:Order .
# It holds because the following instance of the rule body is provable:
#   ex:feed ex:json """{
#     "meta~data": { "batch": "2025-12-18" },
#     "orders": [
#       {
#         "orderId": "A100",
#         "shipTo": { "country": "BE" },
#         "customer": { "email": "Ada@Example.ORG", "vatId": null },
#         "lines": [
#           { "sku": "wid-001", "qty": 2, "unitCents": 999 },
#           { "sku": "GAD-002", "qty": 1, "unitCents": 1500 }
#         ],
#         "declared": { "netCents": 3498, "vatCents": 509, "grossCents": 4007 }
#       },
#       {
#         "orderId": "A200",
#         "shipTo": { "country": "US" },
#         "customer": { "email": "bob@example.org", "vatId": null },
#         "lines": [
#           { "sku": "WID-001", "qty": 2, "unitCents": 999 },
#           { "sku": "GAD-002", "qty": 1, "unitCents": 1500 }
#         ],
#         "declared": { "netCents": 3498, "vatCents": 0, "grossCents": 3498 }
#       },
#       {
#         "orderId": "A300",
#         "shipTo": { "country": "NL" },
#         "customer": { "email": "acct@company.nl", "vatId": "NL999999999B01" },
#         "lines": [
#           { "sku": "WID-001", "qty": 2, "unitCents": 999 },
#           { "sku": "GAD-002", "qty": 1, "unitCents": 1500 }
#         ],
#         "declared": { "netCents": 3498, "vatCents": 0, "grossCents": 3498 }
#       },
#       {
#         "orderId": "A301",
#         "shipTo": { "country": "NL" },
#         "customer": { "email": "billing@company.nl", "vatId": "NL999999999B01" },
#         "lines": [
#           { "sku": "WID-001", "qty": 2, "unitCents": 999 },
#           { "sku": "GAD-002", "qty": 1, "unitCents": 1500 }
#         ],
#         "declared": { "netCents": 3498, "vatCents": 0, "grossCents": 3498 }
#       },
#       {
#         "orderId": "A400",
#         "shipTo": { "country": "BE" },
#         "customer": { "email": "ada@other.example", "vatId": null },
#         "lines": [
#           { "sku": "WID-001", "qty": 2, "unitCents": 999 },
#           { "sku": "GAD-002", "qty": 1, "unitCents": 1500 }
#         ],
#         "declared": { "netCents": 3498, "vatCents": 508, "grossCents": 4006 }
#       }
#     ]
#   }"""^^rdf:JSON .
#   ("""{
#     "meta~data": { "batch": "2025-12-18" },
#     "orders": [
#       {
#         "orderId": "A100",
#         "shipTo": { "country": "BE" },
#         "customer": { "email": "Ada@Example.ORG", "vatId": null },
#         "lines": [
#           { "sku": "wid-001", "qty": 2, "unitCents": 999 },
#           { "sku": "GAD-002", "qty": 1, "unitCents": 1500 }
#         ],
#         "declared": { "netCents": 3498, "vatCents": 509, "grossCents": 4007 }
#       },
#       {
#         "orderId": "A200",
#         "shipTo": { "country": "US" },
#         "customer": { "email": "bob@example.org", "vatId": null },
#         "lines": [
#           { "sku": "WID-001", "qty": 2, "unitCents": 999 },
#           { "sku": "GAD-002", "qty": 1, "unitCents": 1500 }
#         ],
#         "declared": { "netCents": 3498, "vatCents": 0, "grossCents": 3498 }
#       },
#       {
#         "orderId": "A300",
#         "shipTo": { "country": "NL" },
#         "customer": { "email": "acct@company.nl", "vatId": "NL999999999B01" },
#         "lines": [
#           { "sku": "WID-001", "qty": 2, "unitCents": 999 },
#           { "sku": "GAD-002", "qty": 1, "unitCents": 1500 }
#         ],
#         "declared": { "netCents": 3498, "vatCents": 0, "grossCents": 3498 }
#       },
#       {
#         "orderId": "A301",
#         "shipTo": { "country": "NL" },
#         "customer": { "email": "billing@company.nl", "vatId": "NL999999999B01" },
#         "lines": [
#           { "sku": "WID-001", "qty": 2, "unitCents": 999 },
#           { "sku": "GAD-002", "qty": 1, "unitCents": 1500 }
#         ],
#         "declared": { "netCents": 3498, "vatCents": 0, "grossCents": 3498 }
#       },
#       {
#         "orderId": "A400",
#         "shipTo": { "country": "BE" },
#         "customer": { "email": "ada@other.example", "vatId": null },
#         "lines": [
#           { "sku": "WID-001", "qty": 2, "unitCents": 999 },
#           { "sku": "GAD-002", "qty": 1, "unitCents": 1500 }
#         ],
#         "declared": { "netCents": 3498, "vatCents": 508, "grossCents": 4006 }
#       }
#     ]
#   }"""^^rdf:JSON "/orders") string:jsonPointer ("""{"orderId":"A100","shipTo":{"country":"BE"},"customer":{"email":"Ada@Example.ORG","vatId":null},"lines":[{"sku":"wid-001","qty":2,"unitCents":999},{"sku":"GAD-002","qty":1,"unitCents":1500}],"declared":{"netCents":3498,"vatCents":509,"grossCents":4007}}"""^^rdf:JSON """{"orderId":"A200","shipTo":{"country":"US"},"customer":{"email":"bob@example.org","vatId":null},"lines":[{"sku":"WID-001","qty":2,"unitCents":999},{"sku":"GAD-002","qty":1,"unitCents":1500}],"declared":{"netCents":3498,"vatCents":0,"grossCents":3498}}"""^^rdf:JSON """{"orderId":"A300","shipTo":{"country":"NL"},"customer":{"email":"acct@company.nl","vatId":"NL999999999B01"},"lines":[{"sku":"WID-001","qty":2,"unitCents":999},{"sku":"GAD-002","qty":1,"unitCents":1500}],"declared":{"netCents":3498,"vatCents":0,"grossCents":3498}}"""^^rdf:JSON """{"orderId":"A301","shipTo":{"country":"NL"},"customer":{"email":"billing@company.nl","vatId":"NL999999999B01"},"lines":[{"sku":"WID-001","qty":2,"unitCents":999},{"sku":"GAD-002","qty":1,"unitCents":1500}],"declared":{"netCents":3498,"vatCents":0,"grossCents":3498}}"""^^rdf:JSON """{"orderId":"A400","shipTo":{"country":"BE"},"customer":{"email":"ada@other.example","vatId":null},"lines":[{"sku":"WID-001","qty":2,"unitCents":999},{"sku":"GAD-002","qty":1,"unitCents":1500}],"declared":{"netCents":3498,"vatCents":508,"grossCents":4006}}"""^^rdf:JSON) .
#   ("""{"orderId":"A100","shipTo":{"country":"BE"},"customer":{"email":"Ada@Example.ORG","vatId":null},"lines":[{"sku":"wid-001","qty":2,"unitCents":999},{"sku":"GAD-002","qty":1,"unitCents":1500}],"declared":{"netCents":3498,"vatCents":509,"grossCents":4007}}"""^^rdf:JSON """{"orderId":"A200","shipTo":{"country":"US"},"customer":{"email":"bob@example.org","vatId":null},"lines":[{"sku":"WID-001","qty":2,"unitCents":999},{"sku":"GAD-002","qty":1,"unitCents":1500}],"declared":{"netCents":3498,"vatCents":0,"grossCents":3498}}"""^^rdf:JSON """{"orderId":"A300","shipTo":{"country":"NL"},"customer":{"email":"acct@company.nl","vatId":"NL999999999B01"},"lines":[{"sku":"WID-001","qty":2,"unitCents":999},{"sku":"GAD-002","qty":1,"unitCents":1500}],"declared":{"netCents":3498,"vatCents":0,"grossCents":3498}}"""^^rdf:JSON """{"orderId":"A301","shipTo":{"country":"NL"},"customer":{"email":"billing@company.nl","vatId":"NL999999999B01"},"lines":[{"sku":"WID-001","qty":2,"unitCents":999},{"sku":"GAD-002","qty":1,"unitCents":1500}],"declared":{"netCents":3498,"vatCents":0,"grossCents":3498}}"""^^rdf:JSON """{"orderId":"A400","shipTo":{"country":"BE"},"customer":{"email":"ada@other.example","vatId":null},"lines":[{"sku":"WID-001","qty":2,"unitCents":999},{"sku":"GAD-002","qty":1,"unitCents":1500}],"declared":{"netCents":3498,"vatCents":508,"grossCents":4006}}"""^^rdf:JSON) list:iterate (2 """{"orderId":"A300","shipTo":{"country":"NL"},"customer":{"email":"acct@company.nl","vatId":"NL999999999B01"},"lines":[{"sku":"WID-001","qty":2,"unitCents":999},{"sku":"GAD-002","qty":1,"unitCents":1500}],"declared":{"netCents":3498,"vatCents":0,"grossCents":3498}}"""^^rdf:JSON) .
#   ("""{"orderId":"A300","shipTo":{"country":"NL"},"customer":{"email":"acct@company.nl","vatId":"NL999999999B01"},"lines":[{"sku":"WID-001","qty":2,"unitCents":999},{"sku":"GAD-002","qty":1,"unitCents":1500}],"declared":{"netCents":3498,"vatCents":0,"grossCents":3498}}"""^^rdf:JSON "/orderId") string:jsonPointer "A300" .
#   ("""{"orderId":"A300","shipTo":{"country":"NL"},"customer":{"email":"acct@company.nl","vatId":"NL999999999B01"},"lines":[{"sku":"WID-001","qty":2,"unitCents":999},{"sku":"GAD-002","qty":1,"unitCents":1500}],"declared":{"netCents":3498,"vatCents":0,"grossCents":3498}}"""^^rdf:JSON "/shipTo/country") string:jsonPointer "NL" .
#   ("""{"orderId":"A300","shipTo":{"country":"NL"},"customer":{"email":"acct@company.nl","vatId":"NL999999999B01"},"lines":[{"sku":"WID-001","qty":2,"unitCents":999},{"sku":"GAD-002","qty":1,"unitCents":1500}],"declared":{"netCents":3498,"vatCents":0,"grossCents":3498}}"""^^rdf:JSON "/customer") string:jsonPointer """{"email":"acct@company.nl","vatId":"NL999999999B01"}"""^^rdf:JSON .
#   ("""{"email":"acct@company.nl","vatId":"NL999999999B01"}"""^^rdf:JSON "/email") string:jsonPointer "acct@company.nl" .
#   ("""{"email":"acct@company.nl","vatId":"NL999999999B01"}"""^^rdf:JSON "/vatId") string:jsonPointer "NL999999999B01" .
#   ("""{"orderId":"A300","shipTo":{"country":"NL"},"customer":{"email":"acct@company.nl","vatId":"NL999999999B01"},"lines":[{"sku":"WID-001","qty":2,"unitCents":999},{"sku":"GAD-002","qty":1,"unitCents":1500}],"declared":{"netCents":3498,"vatCents":0,"grossCents":3498}}"""^^rdf:JSON "/declared") string:jsonPointer """{"netCents":3498,"vatCents":0,"grossCents":3498}"""^^rdf:JSON .
#   ("""{"netCents":3498,"vatCents":0,"grossCents":3498}"""^^rdf:JSON "/netCents") string:jsonPointer 3498 .
#   ("""{"netCents":3498,"vatCents":0,"grossCents":3498}"""^^rdf:JSON "/vatCents") string:jsonPointer 0 .
#   ("""{"netCents":3498,"vatCents":0,"grossCents":3498}"""^^rdf:JSON "/grossCents") string:jsonPointer 3498 .
#   ("urn:example:order:%s" "A300") string:format "urn:example:order:A300" .
#   <urn:example:order:A300> log:uri "urn:example:order:A300" .
# via the schematic forward rule:
#   {
#     ex:feed ex:json ?J .
#     (?J "/orders") string:jsonPointer ?Orders .
#     ?Orders list:iterate (?OrderIndex ?OrderJson) .
#     (?OrderJson "/orderId") string:jsonPointer ?OrderId .
#     (?OrderJson "/shipTo/country") string:jsonPointer ?Country .
#     (?OrderJson "/customer") string:jsonPointer ?CustJson .
#     (?CustJson "/email") string:jsonPointer ?Email .
#     (?CustJson "/vatId") string:jsonPointer ?VatIdRaw .
#     (?OrderJson "/declared") string:jsonPointer ?Decl .
#     (?Decl "/netCents") string:jsonPointer ?NetD .
#     (?Decl "/vatCents") string:jsonPointer ?VatD .
#     (?Decl "/grossCents") string:jsonPointer ?GrossD .
#     ("urn:example:order:%s" ?OrderId) string:format ?OrderUriStr .
#     ?Order log:uri ?OrderUriStr .
#   } => {
#     ?Order a ex:Order .
#     ?Order ex:orderId ?OrderId .
#     ?Order ex:orderIndex ?OrderIndex .
#     ?Order ex:shipCountry ?Country .
#     ?Order ex:email ?Email .
#     ?Order ex:vatIdRaw ?VatIdRaw .
#     ?Order ex:declaredNetCents ?NetD .
#     ?Order ex:declaredVatCents ?VatD .
#     ?Order ex:declaredGrossCents ?GrossD .
#   } .
# with substitution (on rule variables):
#   ?Country = "NL"
#   ?CustJson = """{"email":"acct@company.nl","vatId":"NL999999999B01"}"""^^rdf:JSON
#   ?Decl = """{"netCents":3498,"vatCents":0,"grossCents":3498}"""^^rdf:JSON
#   ?Email = "acct@company.nl"
#   ?GrossD = 3498
#   ?J = """{
#     "meta~data": { "batch": "2025-12-18" },
#     "orders": [
#     {
#     "orderId": "A100",
#     "shipTo": { "country": "BE" },
#     "customer": { "email": "Ada@Example.ORG", "vatId": null },
#     "lines": [
#     { "sku": "wid-001", "qty": 2, "unitCents": 999 },
#     { "sku": "GAD-002", "qty": 1, "unitCents": 1500 }
#     ],
#     "declared": { "netCents": 3498, "vatCents": 509, "grossCents": 4007 }
#     },
#     {
#     "orderId": "A200",
#     "shipTo": { "country": "US" },
#     "customer": { "email": "bob@example.org", "vatId": null },
#     "lines": [
#     { "sku": "WID-001", "qty": 2, "unitCents": 999 },
#     { "sku": "GAD-002", "qty": 1, "unitCents": 1500 }
#     ],
#     "declared": { "netCents": 3498, "vatCents": 0, "grossCents": 3498 }
#     },
#     {
#     "orderId": "A300",
#     "shipTo": { "country": "NL" },
#     "customer": { "email": "acct@company.nl", "vatId": "NL999999999B01" },
#     "lines": [
#     { "sku": "WID-001", "qty": 2, "unitCents": 999 },
#     { "sku": "GAD-002", "qty": 1, "unitCents": 1500 }
#     ],
#     "declared": { "netCents": 3498, "vatCents": 0, "grossCents": 3498 }
#     },
#     {
#     "orderId": "A301",
#     "shipTo": { "country": "NL" },
#     "customer": { "email": "billing@company.nl", "vatId": "NL999999999B01" },
#     "lines": [
#     { "sku": "WID-001", "qty": 2, "unitCents": 999 },
#     { "sku": "GAD-002", "qty": 1, "unitCents": 1500 }
#     ],
#     "declared": { "netCents": 3498, "vatCents": 0, "grossCents": 3498 }
#     },
#     {
#     "orderId": "A400",
#     "shipTo": { "country": "BE" },
#     "customer": { "email": "ada@other.example", "vatId": null },
#     "lines": [
#     { "sku": "WID-001", "qty": 2, "unitCents": 999 },
#     { "sku": "GAD-002", "qty": 1, "unitCents": 1500 }
#     ],
#     "declared": { "netCents": 3498, "vatCents": 508, "grossCents": 4006 }
#     }
#     ]
#   }"""^^rdf:JSON
#   ?NetD = 3498
#   ?Order = <urn:example:order:A300>
#   ?OrderId = "A300"
#   ?OrderIndex = 2
#   ?OrderJson = """{"orderId":"A300","shipTo":{"country":"NL"},"customer":{"email":"acct@company.nl","vatId":"NL999999999B01"},"lines":[{"sku":"WID-001","qty":2,"unitCents":999},{"sku":"GAD-002","qty":1,"unitCents":1500}],"declared":{"netCents":3498,"vatCents":0,"grossCents":3498}}"""^^rdf:JSON
#   ?OrderUriStr = "urn:example:order:A300"
#   ?Orders = ("""{"orderId":"A100","shipTo":{"country":"BE"},"customer":{"email":"Ada@Example.ORG","vatId":null},"lines":[{"sku":"wid-001","qty":2,"unitCents":999},{"sku":"GAD-002","qty":1,"unitCents":1500}],"declared":{"netCents":3498,"vatCents":509,"grossCents":4007}}"""^^rdf:JSON """{"orderId":"A200","shipTo":{"country":"US"},"customer":{"email":"bob@example.org","vatId":null},"lines":[{"sku":"WID-001","qty":2,"unitCents":999},{"sku":"GAD-002","qty":1,"unitCents":1500}],"declared":{"netCents":3498,"vatCents":0,"grossCents":3498}}"""^^rdf:JSON """{"orderId":"A300","shipTo":{"country":"NL"},"customer":{"email":"acct@company.nl","vatId":"NL999999999B01"},"lines":[{"sku":"WID-001","qty":2,"unitCents":999},{"sku":"GAD-002","qty":1,"unitCents":1500}],"declared":{"netCents":3498,"vatCents":0,"grossCents":3498}}"""^^rdf:JSON """{"orderId":"A301","shipTo":{"country":"NL"},"customer":{"email":"billing@company.nl","vatId":"NL999999999B01"},"lines":[{"sku":"WID-001","qty":2,"unitCents":999},{"sku":"GAD-002","qty":1,"unitCents":1500}],"declared":{"netCents":3498,"vatCents":0,"grossCents":3498}}"""^^rdf:JSON """{"orderId":"A400","shipTo":{"country":"BE"},"customer":{"email":"ada@other.example","vatId":null},"lines":[{"sku":"WID-001","qty":2,"unitCents":999},{"sku":"GAD-002","qty":1,"unitCents":1500}],"declared":{"netCents":3498,"vatCents":508,"grossCents":4006}}"""^^rdf:JSON)
#   ?VatD = 0
#   ?VatIdRaw = "NL999999999B01"
# Therefore the derived triple above is entailed by the rules and facts.
# ----------------------------------------------------------------------

<urn:example:order:A300> a ex:Order .

# ----------------------------------------------------------------------
# Proof for derived triple:
#   <urn:example:order:A300> ex:orderId "A300" .
# It holds because the following instance of the rule body is provable:
#   ex:feed ex:json """{
#     "meta~data": { "batch": "2025-12-18" },
#     "orders": [
#       {
#         "orderId": "A100",
#         "shipTo": { "country": "BE" },
#         "customer": { "email": "Ada@Example.ORG", "vatId": null },
#         "lines": [
#           { "sku": "wid-001", "qty": 2, "unitCents": 999 },
#           { "sku": "GAD-002", "qty": 1, "unitCents": 1500 }
#         ],
#         "declared": { "netCents": 3498, "vatCents": 509, "grossCents": 4007 }
#       },
#       {
#         "orderId": "A200",
#         "shipTo": { "country": "US" },
#         "customer": { "email": "bob@example.org", "vatId": null },
#         "lines": [
#           { "sku": "WID-001", "qty": 2, "unitCents": 999 },
#           { "sku": "GAD-002", "qty": 1, "unitCents": 1500 }
#         ],
#         "declared": { "netCents": 3498, "vatCents": 0, "grossCents": 3498 }
#       },
#       {
#         "orderId": "A300",
#         "shipTo": { "country": "NL" },
#         "customer": { "email": "acct@company.nl", "vatId": "NL999999999B01" },
#         "lines": [
#           { "sku": "WID-001", "qty": 2, "unitCents": 999 },
#           { "sku": "GAD-002", "qty": 1, "unitCents": 1500 }
#         ],
#         "declared": { "netCents": 3498, "vatCents": 0, "grossCents": 3498 }
#       },
#       {
#         "orderId": "A301",
#         "shipTo": { "country": "NL" },
#         "customer": { "email": "billing@company.nl", "vatId": "NL999999999B01" },
#         "lines": [
#           { "sku": "WID-001", "qty": 2, "unitCents": 999 },
#           { "sku": "GAD-002", "qty": 1, "unitCents": 1500 }
#         ],
#         "declared": { "netCents": 3498, "vatCents": 0, "grossCents": 3498 }
#       },
#       {
#         "orderId": "A400",
#         "shipTo": { "country": "BE" },
#         "customer": { "email": "ada@other.example", "vatId": null },
#         "lines": [
#           { "sku": "WID-001", "qty": 2, "unitCents": 999 },
#           { "sku": "GAD-002", "qty": 1, "unitCents": 1500 }
#         ],
#         "declared": { "netCents": 3498, "vatCents": 508, "grossCents": 4006 }
#       }
#     ]
#   }"""^^rdf:JSON .
#   ("""{
#     "meta~data": { "batch": "2025-12-18" },
#     "orders": [
#       {
#         "orderId": "A100",
#         "shipTo": { "country": "BE" },
#         "customer": { "email": "Ada@Example.ORG", "vatId": null },
#         "lines": [
#           { "sku": "wid-001", "qty": 2, "unitCents": 999 },
#           { "sku": "GAD-002", "qty": 1, "unitCents": 1500 }
#         ],
#         "declared": { "netCents": 3498, "vatCents": 509, "grossCents": 4007 }
#       },
#       {
#         "orderId": "A200",
#         "shipTo": { "country": "US" },
#         "customer": { "email": "bob@example.org", "vatId": null },
#         "lines": [
#           { "sku": "WID-001", "qty": 2, "unitCents": 999 },
#           { "sku": "GAD-002", "qty": 1, "unitCents": 1500 }
#         ],
#         "declared": { "netCents": 3498, "vatCents": 0, "grossCents": 3498 }
#       },
#       {
#         "orderId": "A300",
#         "shipTo": { "country": "NL" },
#         "customer": { "email": "acct@company.nl", "vatId": "NL999999999B01" },
#         "lines": [
#           { "sku": "WID-001", "qty": 2, "unitCents": 999 },
#           { "sku": "GAD-002", "qty": 1, "unitCents": 1500 }
#         ],
#         "declared": { "netCents": 3498, "vatCents": 0, "grossCents": 3498 }
#       },
#       {
#         "orderId": "A301",
#         "shipTo": { "country": "NL" },
#         "customer": { "email": "billing@company.nl", "vatId": "NL999999999B01" },
#         "lines": [
#           { "sku": "WID-001", "qty": 2, "unitCents": 999 },
#           { "sku": "GAD-002", "qty": 1, "unitCents": 1500 }
#         ],
#         "declared": { "netCents": 3498, "vatCents": 0, "grossCents": 3498 }
#       },
#       {
#         "orderId": "A400",
#         "shipTo": { "country": "BE" },
#         "customer": { "email": "ada@other.example", "vatId": null },
#         "lines": [
#           { "sku": "WID-001", "qty": 2, "unitCents": 999 },
#           { "sku": "GAD-002", "qty": 1, "unitCents": 1500 }
#         ],
#         "declared": { "netCents": 3498, "vatCents": 508, "grossCents": 4006 }
#       }
#     ]
#   }"""^^rdf:JSON "/orders") string:jsonPointer ("""{"orderId":"A100","shipTo":{"country":"BE"},"customer":{"email":"Ada@Example.ORG","vatId":null},"lines":[{"sku":"wid-001","qty":2,"unitCents":999},{"sku":"GAD-002","qty":1,"unitCents":1500}],"declared":{"netCents":3498,"vatCents":509,"grossCents":4007}}"""^^rdf:JSON """{"orderId":"A200","shipTo":{"country":"US"},"customer":{"email":"bob@example.org","vatId":null},"lines":[{"sku":"WID-001","qty":2,"unitCents":999},{"sku":"GAD-002","qty":1,"unitCents":1500}],"declared":{"netCents":3498,"vatCents":0,"grossCents":3498}}"""^^rdf:JSON """{"orderId":"A300","shipTo":{"country":"NL"},"customer":{"email":"acct@company.nl","vatId":"NL999999999B01"},"lines":[{"sku":"WID-001","qty":2,"unitCents":999},{"sku":"GAD-002","qty":1,"unitCents":1500}],"declared":{"netCents":3498,"vatCents":0,"grossCents":3498}}"""^^rdf:JSON """{"orderId":"A301","shipTo":{"country":"NL"},"customer":{"email":"billing@company.nl","vatId":"NL999999999B01"},"lines":[{"sku":"WID-001","qty":2,"unitCents":999},{"sku":"GAD-002","qty":1,"unitCents":1500}],"declared":{"netCents":3498,"vatCents":0,"grossCents":3498}}"""^^rdf:JSON """{"orderId":"A400","shipTo":{"country":"BE"},"customer":{"email":"ada@other.example","vatId":null},"lines":[{"sku":"WID-001","qty":2,"unitCents":999},{"sku":"GAD-002","qty":1,"unitCents":1500}],"declared":{"netCents":3498,"vatCents":508,"grossCents":4006}}"""^^rdf:JSON) .
#   ("""{"orderId":"A100","shipTo":{"country":"BE"},"customer":{"email":"Ada@Example.ORG","vatId":null},"lines":[{"sku":"wid-001","qty":2,"unitCents":999},{"sku":"GAD-002","qty":1,"unitCents":1500}],"declared":{"netCents":3498,"vatCents":509,"grossCents":4007}}"""^^rdf:JSON """{"orderId":"A200","shipTo":{"country":"US"},"customer":{"email":"bob@example.org","vatId":null},"lines":[{"sku":"WID-001","qty":2,"unitCents":999},{"sku":"GAD-002","qty":1,"unitCents":1500}],"declared":{"netCents":3498,"vatCents":0,"grossCents":3498}}"""^^rdf:JSON """{"orderId":"A300","shipTo":{"country":"NL"},"customer":{"email":"acct@company.nl","vatId":"NL999999999B01"},"lines":[{"sku":"WID-001","qty":2,"unitCents":999},{"sku":"GAD-002","qty":1,"unitCents":1500}],"declared":{"netCents":3498,"vatCents":0,"grossCents":3498}}"""^^rdf:JSON """{"orderId":"A301","shipTo":{"country":"NL"},"customer":{"email":"billing@company.nl","vatId":"NL999999999B01"},"lines":[{"sku":"WID-001","qty":2,"unitCents":999},{"sku":"GAD-002","qty":1,"unitCents":1500}],"declared":{"netCents":3498,"vatCents":0,"grossCents":3498}}"""^^rdf:JSON """{"orderId":"A400","shipTo":{"country":"BE"},"customer":{"email":"ada@other.example","vatId":null},"lines":[{"sku":"WID-001","qty":2,"unitCents":999},{"sku":"GAD-002","qty":1,"unitCents":1500}],"declared":{"netCents":3498,"vatCents":508,"grossCents":4006}}"""^^rdf:JSON) list:iterate (2 """{"orderId":"A300","shipTo":{"country":"NL"},"customer":{"email":"acct@company.nl","vatId":"NL999999999B01"},"lines":[{"sku":"WID-001","qty":2,"unitCents":999},{"sku":"GAD-002","qty":1,"unitCents":1500}],"declared":{"netCents":3498,"vatCents":0,"grossCents":3498}}"""^^rdf:JSON) .
#   ("""{"orderId":"A300","shipTo":{"country":"NL"},"customer":{"email":"acct@company.nl","vatId":"NL999999999B01"},"lines":[{"sku":"WID-001","qty":2,"unitCents":999},{"sku":"GAD-002","qty":1,"unitCents":1500}],"declared":{"netCents":3498,"vatCents":0,"grossCents":3498}}"""^^rdf:JSON "/orderId") string:jsonPointer "A300" .
#   ("""{"orderId":"A300","shipTo":{"country":"NL"},"customer":{"email":"acct@company.nl","vatId":"NL999999999B01"},"lines":[{"sku":"WID-001","qty":2,"unitCents":999},{"sku":"GAD-002","qty":1,"unitCents":1500}],"declared":{"netCents":3498,"vatCents":0,"grossCents":3498}}"""^^rdf:JSON "/shipTo/country") string:jsonPointer "NL" .
#   ("""{"orderId":"A300","shipTo":{"country":"NL"},"customer":{"email":"acct@company.nl","vatId":"NL999999999B01"},"lines":[{"sku":"WID-001","qty":2,"unitCents":999},{"sku":"GAD-002","qty":1,"unitCents":1500}],"declared":{"netCents":3498,"vatCents":0,"grossCents":3498}}"""^^rdf:JSON "/customer") string:jsonPointer """{"email":"acct@company.nl","vatId":"NL999999999B01"}"""^^rdf:JSON .
#   ("""{"email":"acct@company.nl","vatId":"NL999999999B01"}"""^^rdf:JSON "/email") string:jsonPointer "acct@company.nl" .
#   ("""{"email":"acct@company.nl","vatId":"NL999999999B01"}"""^^rdf:JSON "/vatId") string:jsonPointer "NL999999999B01" .
#   ("""{"orderId":"A300","shipTo":{"country":"NL"},"customer":{"email":"acct@company.nl","vatId":"NL999999999B01"},"lines":[{"sku":"WID-001","qty":2,"unitCents":999},{"sku":"GAD-002","qty":1,"unitCents":1500}],"declared":{"netCents":3498,"vatCents":0,"grossCents":3498}}"""^^rdf:JSON "/declared") string:jsonPointer """{"netCents":3498,"vatCents":0,"grossCents":3498}"""^^rdf:JSON .
#   ("""{"netCents":3498,"vatCents":0,"grossCents":3498}"""^^rdf:JSON "/netCents") string:jsonPointer 3498 .
#   ("""{"netCents":3498,"vatCents":0,"grossCents":3498}"""^^rdf:JSON "/vatCents") string:jsonPointer 0 .
#   ("""{"netCents":3498,"vatCents":0,"grossCents":3498}"""^^rdf:JSON "/grossCents") string:jsonPointer 3498 .
#   ("urn:example:order:%s" "A300") string:format "urn:example:order:A300" .
#   <urn:example:order:A300> log:uri "urn:example:order:A300" .
# via the schematic forward rule:
#   {
#     ex:feed ex:json ?J .
#     (?J "/orders") string:jsonPointer ?Orders .
#     ?Orders list:iterate (?OrderIndex ?OrderJson) .
#     (?OrderJson "/orderId") string:jsonPointer ?OrderId .
#     (?OrderJson "/shipTo/country") string:jsonPointer ?Country .
#     (?OrderJson "/customer") string:jsonPointer ?CustJson .
#     (?CustJson "/email") string:jsonPointer ?Email .
#     (?CustJson "/vatId") string:jsonPointer ?VatIdRaw .
#     (?OrderJson "/declared") string:jsonPointer ?Decl .
#     (?Decl "/netCents") string:jsonPointer ?NetD .
#     (?Decl "/vatCents") string:jsonPointer ?VatD .
#     (?Decl "/grossCents") string:jsonPointer ?GrossD .
#     ("urn:example:order:%s" ?OrderId) string:format ?OrderUriStr .
#     ?Order log:uri ?OrderUriStr .
#   } => {
#     ?Order a ex:Order .
#     ?Order ex:orderId ?OrderId .
#     ?Order ex:orderIndex ?OrderIndex .
#     ?Order ex:shipCountry ?Country .
#     ?Order ex:email ?Email .
#     ?Order ex:vatIdRaw ?VatIdRaw .
#     ?Order ex:declaredNetCents ?NetD .
#     ?Order ex:declaredVatCents ?VatD .
#     ?Order ex:declaredGrossCents ?GrossD .
#   } .
# with substitution (on rule variables):
#   ?Country = "NL"
#   ?CustJson = """{"email":"acct@company.nl","vatId":"NL999999999B01"}"""^^rdf:JSON
#   ?Decl = """{"netCents":3498,"vatCents":0,"grossCents":3498}"""^^rdf:JSON
#   ?Email = "acct@company.nl"
#   ?GrossD = 3498
#   ?J = """{
#     "meta~data": { "batch": "2025-12-18" },
#     "orders": [
#     {
#     "orderId": "A100",
#     "shipTo": { "country": "BE" },
#     "customer": { "email": "Ada@Example.ORG", "vatId": null },
#     "lines": [
#     { "sku": "wid-001", "qty": 2, "unitCents": 999 },
#     { "sku": "GAD-002", "qty": 1, "unitCents": 1500 }
#     ],
#     "declared": { "netCents": 3498, "vatCents": 509, "grossCents": 4007 }
#     },
#     {
#     "orderId": "A200",
#     "shipTo": { "country": "US" },
#     "customer": { "email": "bob@example.org", "vatId": null },
#     "lines": [
#     { "sku": "WID-001", "qty": 2, "unitCents": 999 },
#     { "sku": "GAD-002", "qty": 1, "unitCents": 1500 }
#     ],
#     "declared": { "netCents": 3498, "vatCents": 0, "grossCents": 3498 }
#     },
#     {
#     "orderId": "A300",
#     "shipTo": { "country": "NL" },
#     "customer": { "email": "acct@company.nl", "vatId": "NL999999999B01" },
#     "lines": [
#     { "sku": "WID-001", "qty": 2, "unitCents": 999 },
#     { "sku": "GAD-002", "qty": 1, "unitCents": 1500 }
#     ],
#     "declared": { "netCents": 3498, "vatCents": 0, "grossCents": 3498 }
#     },
#     {
#     "orderId": "A301",
#     "shipTo": { "country": "NL" },
#     "customer": { "email": "billing@company.nl", "vatId": "NL999999999B01" },
#     "lines": [
#     { "sku": "WID-001", "qty": 2, "unitCents": 999 },
#     { "sku": "GAD-002", "qty": 1, "unitCents": 1500 }
#     ],
#     "declared": { "netCents": 3498, "vatCents": 0, "grossCents": 3498 }
#     },
#     {
#     "orderId": "A400",
#     "shipTo": { "country": "BE" },
#     "customer": { "email": "ada@other.example", "vatId": null },
#     "lines": [
#     { "sku": "WID-001", "qty": 2, "unitCents": 999 },
#     { "sku": "GAD-002", "qty": 1, "unitCents": 1500 }
#     ],
#     "declared": { "netCents": 3498, "vatCents": 508, "grossCents": 4006 }
#     }
#     ]
#   }"""^^rdf:JSON
#   ?NetD = 3498
#   ?Order = <urn:example:order:A300>
#   ?OrderId = "A300"
#   ?OrderIndex = 2
#   ?OrderJson = """{"orderId":"A300","shipTo":{"country":"NL"},"customer":{"email":"acct@company.nl","vatId":"NL999999999B01"},"lines":[{"sku":"WID-001","qty":2,"unitCents":999},{"sku":"GAD-002","qty":1,"unitCents":1500}],"declared":{"netCents":3498,"vatCents":0,"grossCents":3498}}"""^^rdf:JSON
#   ?OrderUriStr = "urn:example:order:A300"
#   ?Orders = ("""{"orderId":"A100","shipTo":{"country":"BE"},"customer":{"email":"Ada@Example.ORG","vatId":null},"lines":[{"sku":"wid-001","qty":2,"unitCents":999},{"sku":"GAD-002","qty":1,"unitCents":1500}],"declared":{"netCents":3498,"vatCents":509,"grossCents":4007}}"""^^rdf:JSON """{"orderId":"A200","shipTo":{"country":"US"},"customer":{"email":"bob@example.org","vatId":null},"lines":[{"sku":"WID-001","qty":2,"unitCents":999},{"sku":"GAD-002","qty":1,"unitCents":1500}],"declared":{"netCents":3498,"vatCents":0,"grossCents":3498}}"""^^rdf:JSON """{"orderId":"A300","shipTo":{"country":"NL"},"customer":{"email":"acct@company.nl","vatId":"NL999999999B01"},"lines":[{"sku":"WID-001","qty":2,"unitCents":999},{"sku":"GAD-002","qty":1,"unitCents":1500}],"declared":{"netCents":3498,"vatCents":0,"grossCents":3498}}"""^^rdf:JSON """{"orderId":"A301","shipTo":{"country":"NL"},"customer":{"email":"billing@company.nl","vatId":"NL999999999B01"},"lines":[{"sku":"WID-001","qty":2,"unitCents":999},{"sku":"GAD-002","qty":1,"unitCents":1500}],"declared":{"netCents":3498,"vatCents":0,"grossCents":3498}}"""^^rdf:JSON """{"orderId":"A400","shipTo":{"country":"BE"},"customer":{"email":"ada@other.example","vatId":null},"lines":[{"sku":"WID-001","qty":2,"unitCents":999},{"sku":"GAD-002","qty":1,"unitCents":1500}],"declared":{"netCents":3498,"vatCents":508,"grossCents":4006}}"""^^rdf:JSON)
#   ?VatD = 0
#   ?VatIdRaw = "NL999999999B01"
# Therefore the derived triple above is entailed by the rules and facts.
# ----------------------------------------------------------------------

<urn:example:order:A300> ex:orderId "A300" .

# ----------------------------------------------------------------------
# Proof for derived triple:
#   <urn:example:order:A300> ex:orderIndex 2 .
# It holds because the following instance of the rule body is provable:
#   ex:feed ex:json """{
#     "meta~data": { "batch": "2025-12-18" },
#     "orders": [
#       {
#         "orderId": "A100",
#         "shipTo": { "country": "BE" },
#         "customer": { "email": "Ada@Example.ORG", "vatId": null },
#         "lines": [
#           { "sku": "wid-001", "qty": 2, "unitCents": 999 },
#           { "sku": "GAD-002", "qty": 1, "unitCents": 1500 }
#         ],
#         "declared": { "netCents": 3498, "vatCents": 509, "grossCents": 4007 }
#       },
#       {
#         "orderId": "A200",
#         "shipTo": { "country": "US" },
#         "customer": { "email": "bob@example.org", "vatId": null },
#         "lines": [
#           { "sku": "WID-001", "qty": 2, "unitCents": 999 },
#           { "sku": "GAD-002", "qty": 1, "unitCents": 1500 }
#         ],
#         "declared": { "netCents": 3498, "vatCents": 0, "grossCents": 3498 }
#       },
#       {
#         "orderId": "A300",
#         "shipTo": { "country": "NL" },
#         "customer": { "email": "acct@company.nl", "vatId": "NL999999999B01" },
#         "lines": [
#           { "sku": "WID-001", "qty": 2, "unitCents": 999 },
#           { "sku": "GAD-002", "qty": 1, "unitCents": 1500 }
#         ],
#         "declared": { "netCents": 3498, "vatCents": 0, "grossCents": 3498 }
#       },
#       {
#         "orderId": "A301",
#         "shipTo": { "country": "NL" },
#         "customer": { "email": "billing@company.nl", "vatId": "NL999999999B01" },
#         "lines": [
#           { "sku": "WID-001", "qty": 2, "unitCents": 999 },
#           { "sku": "GAD-002", "qty": 1, "unitCents": 1500 }
#         ],
#         "declared": { "netCents": 3498, "vatCents": 0, "grossCents": 3498 }
#       },
#       {
#         "orderId": "A400",
#         "shipTo": { "country": "BE" },
#         "customer": { "email": "ada@other.example", "vatId": null },
#         "lines": [
#           { "sku": "WID-001", "qty": 2, "unitCents": 999 },
#           { "sku": "GAD-002", "qty": 1, "unitCents": 1500 }
#         ],
#         "declared": { "netCents": 3498, "vatCents": 508, "grossCents": 4006 }
#       }
#     ]
#   }"""^^rdf:JSON .
#   ("""{
#     "meta~data": { "batch": "2025-12-18" },
#     "orders": [
#       {
#         "orderId": "A100",
#         "shipTo": { "country": "BE" },
#         "customer": { "email": "Ada@Example.ORG", "vatId": null },
#         "lines": [
#           { "sku": "wid-001", "qty": 2, "unitCents": 999 },
#           { "sku": "GAD-002", "qty": 1, "unitCents": 1500 }
#         ],
#         "declared": { "netCents": 3498, "vatCents": 509, "grossCents": 4007 }
#       },
#       {
#         "orderId": "A200",
#         "shipTo": { "country": "US" },
#         "customer": { "email": "bob@example.org", "vatId": null },
#         "lines": [
#           { "sku": "WID-001", "qty": 2, "unitCents": 999 },
#           { "sku": "GAD-002", "qty": 1, "unitCents": 1500 }
#         ],
#         "declared": { "netCents": 3498, "vatCents": 0, "grossCents": 3498 }
#       },
#       {
#         "orderId": "A300",
#         "shipTo": { "country": "NL" },
#         "customer": { "email": "acct@company.nl", "vatId": "NL999999999B01" },
#         "lines": [
#           { "sku": "WID-001", "qty": 2, "unitCents": 999 },
#           { "sku": "GAD-002", "qty": 1, "unitCents": 1500 }
#         ],
#         "declared": { "netCents": 3498, "vatCents": 0, "grossCents": 3498 }
#       },
#       {
#         "orderId": "A301",
#         "shipTo": { "country": "NL" },
#         "customer": { "email": "billing@company.nl", "vatId": "NL999999999B01" },
#         "lines": [
#           { "sku": "WID-001", "qty": 2, "unitCents": 999 },
#           { "sku": "GAD-002", "qty": 1, "unitCents": 1500 }
#         ],
#         "declared": { "netCents": 3498, "vatCents": 0, "grossCents": 3498 }
#       },
#       {
#         "orderId": "A400",
#         "shipTo": { "country": "BE" },
#         "customer": { "email": "ada@other.example", "vatId": null },
#         "lines": [
#           { "sku": "WID-001", "qty": 2, "unitCents": 999 },
#           { "sku": "GAD-002", "qty": 1, "unitCents": 1500 }
#         ],
#         "declared": { "netCents": 3498, "vatCents": 508, "grossCents": 4006 }
#       }
#     ]
#   }"""^^rdf:JSON "/orders") string:jsonPointer ("""{"orderId":"A100","shipTo":{"country":"BE"},"customer":{"email":"Ada@Example.ORG","vatId":null},"lines":[{"sku":"wid-001","qty":2,"unitCents":999},{"sku":"GAD-002","qty":1,"unitCents":1500}],"declared":{"netCents":3498,"vatCents":509,"grossCents":4007}}"""^^rdf:JSON """{"orderId":"A200","shipTo":{"country":"US"},"customer":{"email":"bob@example.org","vatId":null},"lines":[{"sku":"WID-001","qty":2,"unitCents":999},{"sku":"GAD-002","qty":1,"unitCents":1500}],"declared":{"netCents":3498,"vatCents":0,"grossCents":3498}}"""^^rdf:JSON """{"orderId":"A300","shipTo":{"country":"NL"},"customer":{"email":"acct@company.nl","vatId":"NL999999999B01"},"lines":[{"sku":"WID-001","qty":2,"unitCents":999},{"sku":"GAD-002","qty":1,"unitCents":1500}],"declared":{"netCents":3498,"vatCents":0,"grossCents":3498}}"""^^rdf:JSON """{"orderId":"A301","shipTo":{"country":"NL"},"customer":{"email":"billing@company.nl","vatId":"NL999999999B01"},"lines":[{"sku":"WID-001","qty":2,"unitCents":999},{"sku":"GAD-002","qty":1,"unitCents":1500}],"declared":{"netCents":3498,"vatCents":0,"grossCents":3498}}"""^^rdf:JSON """{"orderId":"A400","shipTo":{"country":"BE"},"customer":{"email":"ada@other.example","vatId":null},"lines":[{"sku":"WID-001","qty":2,"unitCents":999},{"sku":"GAD-002","qty":1,"unitCents":1500}],"declared":{"netCents":3498,"vatCents":508,"grossCents":4006}}"""^^rdf:JSON) .
#   ("""{"orderId":"A100","shipTo":{"country":"BE"},"customer":{"email":"Ada@Example.ORG","vatId":null},"lines":[{"sku":"wid-001","qty":2,"unitCents":999},{"sku":"GAD-002","qty":1,"unitCents":1500}],"declared":{"netCents":3498,"vatCents":509,"grossCents":4007}}"""^^rdf:JSON """{"orderId":"A200","shipTo":{"country":"US"},"customer":{"email":"bob@example.org","vatId":null},"lines":[{"sku":"WID-001","qty":2,"unitCents":999},{"sku":"GAD-002","qty":1,"unitCents":1500}],"declared":{"netCents":3498,"vatCents":0,"grossCents":3498}}"""^^rdf:JSON """{"orderId":"A300","shipTo":{"country":"NL"},"customer":{"email":"acct@company.nl","vatId":"NL999999999B01"},"lines":[{"sku":"WID-001","qty":2,"unitCents":999},{"sku":"GAD-002","qty":1,"unitCents":1500}],"declared":{"netCents":3498,"vatCents":0,"grossCents":3498}}"""^^rdf:JSON """{"orderId":"A301","shipTo":{"country":"NL"},"customer":{"email":"billing@company.nl","vatId":"NL999999999B01"},"lines":[{"sku":"WID-001","qty":2,"unitCents":999},{"sku":"GAD-002","qty":1,"unitCents":1500}],"declared":{"netCents":3498,"vatCents":0,"grossCents":3498}}"""^^rdf:JSON """{"orderId":"A400","shipTo":{"country":"BE"},"customer":{"email":"ada@other.example","vatId":null},"lines":[{"sku":"WID-001","qty":2,"unitCents":999},{"sku":"GAD-002","qty":1,"unitCents":1500}],"declared":{"netCents":3498,"vatCents":508,"grossCents":4006}}"""^^rdf:JSON) list:iterate (2 """{"orderId":"A300","shipTo":{"country":"NL"},"customer":{"email":"acct@company.nl","vatId":"NL999999999B01"},"lines":[{"sku":"WID-001","qty":2,"unitCents":999},{"sku":"GAD-002","qty":1,"unitCents":1500}],"declared":{"netCents":3498,"vatCents":0,"grossCents":3498}}"""^^rdf:JSON) .
#   ("""{"orderId":"A300","shipTo":{"country":"NL"},"customer":{"email":"acct@company.nl","vatId":"NL999999999B01"},"lines":[{"sku":"WID-001","qty":2,"unitCents":999},{"sku":"GAD-002","qty":1,"unitCents":1500}],"declared":{"netCents":3498,"vatCents":0,"grossCents":3498}}"""^^rdf:JSON "/orderId") string:jsonPointer "A300" .
#   ("""{"orderId":"A300","shipTo":{"country":"NL"},"customer":{"email":"acct@company.nl","vatId":"NL999999999B01"},"lines":[{"sku":"WID-001","qty":2,"unitCents":999},{"sku":"GAD-002","qty":1,"unitCents":1500}],"declared":{"netCents":3498,"vatCents":0,"grossCents":3498}}"""^^rdf:JSON "/shipTo/country") string:jsonPointer "NL" .
#   ("""{"orderId":"A300","shipTo":{"country":"NL"},"customer":{"email":"acct@company.nl","vatId":"NL999999999B01"},"lines":[{"sku":"WID-001","qty":2,"unitCents":999},{"sku":"GAD-002","qty":1,"unitCents":1500}],"declared":{"netCents":3498,"vatCents":0,"grossCents":3498}}"""^^rdf:JSON "/customer") string:jsonPointer """{"email":"acct@company.nl","vatId":"NL999999999B01"}"""^^rdf:JSON .
#   ("""{"email":"acct@company.nl","vatId":"NL999999999B01"}"""^^rdf:JSON "/email") string:jsonPointer "acct@company.nl" .
#   ("""{"email":"acct@company.nl","vatId":"NL999999999B01"}"""^^rdf:JSON "/vatId") string:jsonPointer "NL999999999B01" .
#   ("""{"orderId":"A300","shipTo":{"country":"NL"},"customer":{"email":"acct@company.nl","vatId":"NL999999999B01"},"lines":[{"sku":"WID-001","qty":2,"unitCents":999},{"sku":"GAD-002","qty":1,"unitCents":1500}],"declared":{"netCents":3498,"vatCents":0,"grossCents":3498}}"""^^rdf:JSON "/declared") string:jsonPointer """{"netCents":3498,"vatCents":0,"grossCents":3498}"""^^rdf:JSON .
#   ("""{"netCents":3498,"vatCents":0,"grossCents":3498}"""^^rdf:JSON "/netCents") string:jsonPointer 3498 .
#   ("""{"netCents":3498,"vatCents":0,"grossCents":3498}"""^^rdf:JSON "/vatCents") string:jsonPointer 0 .
#   ("""{"netCents":3498,"vatCents":0,"grossCents":3498}"""^^rdf:JSON "/grossCents") string:jsonPointer 3498 .
#   ("urn:example:order:%s" "A300") string:format "urn:example:order:A300" .
#   <urn:example:order:A300> log:uri "urn:example:order:A300" .
# via the schematic forward rule:
#   {
#     ex:feed ex:json ?J .
#     (?J "/orders") string:jsonPointer ?Orders .
#     ?Orders list:iterate (?OrderIndex ?OrderJson) .
#     (?OrderJson "/orderId") string:jsonPointer ?OrderId .
#     (?OrderJson "/shipTo/country") string:jsonPointer ?Country .
#     (?OrderJson "/customer") string:jsonPointer ?CustJson .
#     (?CustJson "/email") string:jsonPointer ?Email .
#     (?CustJson "/vatId") string:jsonPointer ?VatIdRaw .
#     (?OrderJson "/declared") string:jsonPointer ?Decl .
#     (?Decl "/netCents") string:jsonPointer ?NetD .
#     (?Decl "/vatCents") string:jsonPointer ?VatD .
#     (?Decl "/grossCents") string:jsonPointer ?GrossD .
#     ("urn:example:order:%s" ?OrderId) string:format ?OrderUriStr .
#     ?Order log:uri ?OrderUriStr .
#   } => {
#     ?Order a ex:Order .
#     ?Order ex:orderId ?OrderId .
#     ?Order ex:orderIndex ?OrderIndex .
#     ?Order ex:shipCountry ?Country .
#     ?Order ex:email ?Email .
#     ?Order ex:vatIdRaw ?VatIdRaw .
#     ?Order ex:declaredNetCents ?NetD .
#     ?Order ex:declaredVatCents ?VatD .
#     ?Order ex:declaredGrossCents ?GrossD .
#   } .
# with substitution (on rule variables):
#   ?Country = "NL"
#   ?CustJson = """{"email":"acct@company.nl","vatId":"NL999999999B01"}"""^^rdf:JSON
#   ?Decl = """{"netCents":3498,"vatCents":0,"grossCents":3498}"""^^rdf:JSON
#   ?Email = "acct@company.nl"
#   ?GrossD = 3498
#   ?J = """{
#     "meta~data": { "batch": "2025-12-18" },
#     "orders": [
#     {
#     "orderId": "A100",
#     "shipTo": { "country": "BE" },
#     "customer": { "email": "Ada@Example.ORG", "vatId": null },
#     "lines": [
#     { "sku": "wid-001", "qty": 2, "unitCents": 999 },
#     { "sku": "GAD-002", "qty": 1, "unitCents": 1500 }
#     ],
#     "declared": { "netCents": 3498, "vatCents": 509, "grossCents": 4007 }
#     },
#     {
#     "orderId": "A200",
#     "shipTo": { "country": "US" },
#     "customer": { "email": "bob@example.org", "vatId": null },
#     "lines": [
#     { "sku": "WID-001", "qty": 2, "unitCents": 999 },
#     { "sku": "GAD-002", "qty": 1, "unitCents": 1500 }
#     ],
#     "declared": { "netCents": 3498, "vatCents": 0, "grossCents": 3498 }
#     },
#     {
#     "orderId": "A300",
#     "shipTo": { "country": "NL" },
#     "customer": { "email": "acct@company.nl", "vatId": "NL999999999B01" },
#     "lines": [
#     { "sku": "WID-001", "qty": 2, "unitCents": 999 },
#     { "sku": "GAD-002", "qty": 1, "unitCents": 1500 }
#     ],
#     "declared": { "netCents": 3498, "vatCents": 0, "grossCents": 3498 }
#     },
#     {
#     "orderId": "A301",
#     "shipTo": { "country": "NL" },
#     "customer": { "email": "billing@company.nl", "vatId": "NL999999999B01" },
#     "lines": [
#     { "sku": "WID-001", "qty": 2, "unitCents": 999 },
#     { "sku": "GAD-002", "qty": 1, "unitCents": 1500 }
#     ],
#     "declared": { "netCents": 3498, "vatCents": 0, "grossCents": 3498 }
#     },
#     {
#     "orderId": "A400",
#     "shipTo": { "country": "BE" },
#     "customer": { "email": "ada@other.example", "vatId": null },
#     "lines": [
#     { "sku": "WID-001", "qty": 2, "unitCents": 999 },
#     { "sku": "GAD-002", "qty": 1, "unitCents": 1500 }
#     ],
#     "declared": { "netCents": 3498, "vatCents": 508, "grossCents": 4006 }
#     }
#     ]
#   }"""^^rdf:JSON
#   ?NetD = 3498
#   ?Order = <urn:example:order:A300>
#   ?OrderId = "A300"
#   ?OrderIndex = 2
#   ?OrderJson = """{"orderId":"A300","shipTo":{"country":"NL"},"customer":{"email":"acct@company.nl","vatId":"NL999999999B01"},"lines":[{"sku":"WID-001","qty":2,"unitCents":999},{"sku":"GAD-002","qty":1,"unitCents":1500}],"declared":{"netCents":3498,"vatCents":0,"grossCents":3498}}"""^^rdf:JSON
#   ?OrderUriStr = "urn:example:order:A300"
#   ?Orders = ("""{"orderId":"A100","shipTo":{"country":"BE"},"customer":{"email":"Ada@Example.ORG","vatId":null},"lines":[{"sku":"wid-001","qty":2,"unitCents":999},{"sku":"GAD-002","qty":1,"unitCents":1500}],"declared":{"netCents":3498,"vatCents":509,"grossCents":4007}}"""^^rdf:JSON """{"orderId":"A200","shipTo":{"country":"US"},"customer":{"email":"bob@example.org","vatId":null},"lines":[{"sku":"WID-001","qty":2,"unitCents":999},{"sku":"GAD-002","qty":1,"unitCents":1500}],"declared":{"netCents":3498,"vatCents":0,"grossCents":3498}}"""^^rdf:JSON """{"orderId":"A300","shipTo":{"country":"NL"},"customer":{"email":"acct@company.nl","vatId":"NL999999999B01"},"lines":[{"sku":"WID-001","qty":2,"unitCents":999},{"sku":"GAD-002","qty":1,"unitCents":1500}],"declared":{"netCents":3498,"vatCents":0,"grossCents":3498}}"""^^rdf:JSON """{"orderId":"A301","shipTo":{"country":"NL"},"customer":{"email":"billing@company.nl","vatId":"NL999999999B01"},"lines":[{"sku":"WID-001","qty":2,"unitCents":999},{"sku":"GAD-002","qty":1,"unitCents":1500}],"declared":{"netCents":3498,"vatCents":0,"grossCents":3498}}"""^^rdf:JSON """{"orderId":"A400","shipTo":{"country":"BE"},"customer":{"email":"ada@other.example","vatId":null},"lines":[{"sku":"WID-001","qty":2,"unitCents":999},{"sku":"GAD-002","qty":1,"unitCents":1500}],"declared":{"netCents":3498,"vatCents":508,"grossCents":4006}}"""^^rdf:JSON)
#   ?VatD = 0
#   ?VatIdRaw = "NL999999999B01"
# Therefore the derived triple above is entailed by the rules and facts.
# ----------------------------------------------------------------------

<urn:example:order:A300> ex:orderIndex 2 .

# ----------------------------------------------------------------------
# Proof for derived triple:
#   <urn:example:order:A300> ex:shipCountry "NL" .
# It holds because the following instance of the rule body is provable:
#   ex:feed ex:json """{
#     "meta~data": { "batch": "2025-12-18" },
#     "orders": [
#       {
#         "orderId": "A100",
#         "shipTo": { "country": "BE" },
#         "customer": { "email": "Ada@Example.ORG", "vatId": null },
#         "lines": [
#           { "sku": "wid-001", "qty": 2, "unitCents": 999 },
#           { "sku": "GAD-002", "qty": 1, "unitCents": 1500 }
#         ],
#         "declared": { "netCents": 3498, "vatCents": 509, "grossCents": 4007 }
#       },
#       {
#         "orderId": "A200",
#         "shipTo": { "country": "US" },
#         "customer": { "email": "bob@example.org", "vatId": null },
#         "lines": [
#           { "sku": "WID-001", "qty": 2, "unitCents": 999 },
#           { "sku": "GAD-002", "qty": 1, "unitCents": 1500 }
#         ],
#         "declared": { "netCents": 3498, "vatCents": 0, "grossCents": 3498 }
#       },
#       {
#         "orderId": "A300",
#         "shipTo": { "country": "NL" },
#         "customer": { "email": "acct@company.nl", "vatId": "NL999999999B01" },
#         "lines": [
#           { "sku": "WID-001", "qty": 2, "unitCents": 999 },
#           { "sku": "GAD-002", "qty": 1, "unitCents": 1500 }
#         ],
#         "declared": { "netCents": 3498, "vatCents": 0, "grossCents": 3498 }
#       },
#       {
#         "orderId": "A301",
#         "shipTo": { "country": "NL" },
#         "customer": { "email": "billing@company.nl", "vatId": "NL999999999B01" },
#         "lines": [
#           { "sku": "WID-001", "qty": 2, "unitCents": 999 },
#           { "sku": "GAD-002", "qty": 1, "unitCents": 1500 }
#         ],
#         "declared": { "netCents": 3498, "vatCents": 0, "grossCents": 3498 }
#       },
#       {
#         "orderId": "A400",
#         "shipTo": { "country": "BE" },
#         "customer": { "email": "ada@other.example", "vatId": null },
#         "lines": [
#           { "sku": "WID-001", "qty": 2, "unitCents": 999 },
#           { "sku": "GAD-002", "qty": 1, "unitCents": 1500 }
#         ],
#         "declared": { "netCents": 3498, "vatCents": 508, "grossCents": 4006 }
#       }
#     ]
#   }"""^^rdf:JSON .
#   ("""{
#     "meta~data": { "batch": "2025-12-18" },
#     "orders": [
#       {
#         "orderId": "A100",
#         "shipTo": { "country": "BE" },
#         "customer": { "email": "Ada@Example.ORG", "vatId": null },
#         "lines": [
#           { "sku": "wid-001", "qty": 2, "unitCents": 999 },
#           { "sku": "GAD-002", "qty": 1, "unitCents": 1500 }
#         ],
#         "declared": { "netCents": 3498, "vatCents": 509, "grossCents": 4007 }
#       },
#       {
#         "orderId": "A200",
#         "shipTo": { "country": "US" },
#         "customer": { "email": "bob@example.org", "vatId": null },
#         "lines": [
#           { "sku": "WID-001", "qty": 2, "unitCents": 999 },
#           { "sku": "GAD-002", "qty": 1, "unitCents": 1500 }
#         ],
#         "declared": { "netCents": 3498, "vatCents": 0, "grossCents": 3498 }
#       },
#       {
#         "orderId": "A300",
#         "shipTo": { "country": "NL" },
#         "customer": { "email": "acct@company.nl", "vatId": "NL999999999B01" },
#         "lines": [
#           { "sku": "WID-001", "qty": 2, "unitCents": 999 },
#           { "sku": "GAD-002", "qty": 1, "unitCents": 1500 }
#         ],
#         "declared": { "netCents": 3498, "vatCents": 0, "grossCents": 3498 }
#       },
#       {
#         "orderId": "A301",
#         "shipTo": { "country": "NL" },
#         "customer": { "email": "billing@company.nl", "vatId": "NL999999999B01" },
#         "lines": [
#           { "sku": "WID-001", "qty": 2, "unitCents": 999 },
#           { "sku": "GAD-002", "qty": 1, "unitCents": 1500 }
#         ],
#         "declared": { "netCents": 3498, "vatCents": 0, "grossCents": 3498 }
#       },
#       {
#         "orderId": "A400",
#         "shipTo": { "country": "BE" },
#         "customer": { "email": "ada@other.example", "vatId": null },
#         "lines": [
#           { "sku": "WID-001", "qty": 2, "unitCents": 999 },
#           { "sku": "GAD-002", "qty": 1, "unitCents": 1500 }
#         ],
#         "declared": { "netCents": 3498, "vatCents": 508, "grossCents": 4006 }
#       }
#     ]
#   }"""^^rdf:JSON "/orders") string:jsonPointer ("""{"orderId":"A100","shipTo":{"country":"BE"},"customer":{"email":"Ada@Example.ORG","vatId":null},"lines":[{"sku":"wid-001","qty":2,"unitCents":999},{"sku":"GAD-002","qty":1,"unitCents":1500}],"declared":{"netCents":3498,"vatCents":509,"grossCents":4007}}"""^^rdf:JSON """{"orderId":"A200","shipTo":{"country":"US"},"customer":{"email":"bob@example.org","vatId":null},"lines":[{"sku":"WID-001","qty":2,"unitCents":999},{"sku":"GAD-002","qty":1,"unitCents":1500}],"declared":{"netCents":3498,"vatCents":0,"grossCents":3498}}"""^^rdf:JSON """{"orderId":"A300","shipTo":{"country":"NL"},"customer":{"email":"acct@company.nl","vatId":"NL999999999B01"},"lines":[{"sku":"WID-001","qty":2,"unitCents":999},{"sku":"GAD-002","qty":1,"unitCents":1500}],"declared":{"netCents":3498,"vatCents":0,"grossCents":3498}}"""^^rdf:JSON """{"orderId":"A301","shipTo":{"country":"NL"},"customer":{"email":"billing@company.nl","vatId":"NL999999999B01"},"lines":[{"sku":"WID-001","qty":2,"unitCents":999},{"sku":"GAD-002","qty":1,"unitCents":1500}],"declared":{"netCents":3498,"vatCents":0,"grossCents":3498}}"""^^rdf:JSON """{"orderId":"A400","shipTo":{"country":"BE"},"customer":{"email":"ada@other.example","vatId":null},"lines":[{"sku":"WID-001","qty":2,"unitCents":999},{"sku":"GAD-002","qty":1,"unitCents":1500}],"declared":{"netCents":3498,"vatCents":508,"grossCents":4006}}"""^^rdf:JSON) .
#   ("""{"orderId":"A100","shipTo":{"country":"BE"},"customer":{"email":"Ada@Example.ORG","vatId":null},"lines":[{"sku":"wid-001","qty":2,"unitCents":999},{"sku":"GAD-002","qty":1,"unitCents":1500}],"declared":{"netCents":3498,"vatCents":509,"grossCents":4007}}"""^^rdf:JSON """{"orderId":"A200","shipTo":{"country":"US"},"customer":{"email":"bob@example.org","vatId":null},"lines":[{"sku":"WID-001","qty":2,"unitCents":999},{"sku":"GAD-002","qty":1,"unitCents":1500}],"declared":{"netCents":3498,"vatCents":0,"grossCents":3498}}"""^^rdf:JSON """{"orderId":"A300","shipTo":{"country":"NL"},"customer":{"email":"acct@company.nl","vatId":"NL999999999B01"},"lines":[{"sku":"WID-001","qty":2,"unitCents":999},{"sku":"GAD-002","qty":1,"unitCents":1500}],"declared":{"netCents":3498,"vatCents":0,"grossCents":3498}}"""^^rdf:JSON """{"orderId":"A301","shipTo":{"country":"NL"},"customer":{"email":"billing@company.nl","vatId":"NL999999999B01"},"lines":[{"sku":"WID-001","qty":2,"unitCents":999},{"sku":"GAD-002","qty":1,"unitCents":1500}],"declared":{"netCents":3498,"vatCents":0,"grossCents":3498}}"""^^rdf:JSON """{"orderId":"A400","shipTo":{"country":"BE"},"customer":{"email":"ada@other.example","vatId":null},"lines":[{"sku":"WID-001","qty":2,"unitCents":999},{"sku":"GAD-002","qty":1,"unitCents":1500}],"declared":{"netCents":3498,"vatCents":508,"grossCents":4006}}"""^^rdf:JSON) list:iterate (2 """{"orderId":"A300","shipTo":{"country":"NL"},"customer":{"email":"acct@company.nl","vatId":"NL999999999B01"},"lines":[{"sku":"WID-001","qty":2,"unitCents":999},{"sku":"GAD-002","qty":1,"unitCents":1500}],"declared":{"netCents":3498,"vatCents":0,"grossCents":3498}}"""^^rdf:JSON) .
#   ("""{"orderId":"A300","shipTo":{"country":"NL"},"customer":{"email":"acct@company.nl","vatId":"NL999999999B01"},"lines":[{"sku":"WID-001","qty":2,"unitCents":999},{"sku":"GAD-002","qty":1,"unitCents":1500}],"declared":{"netCents":3498,"vatCents":0,"grossCents":3498}}"""^^rdf:JSON "/orderId") string:jsonPointer "A300" .
#   ("""{"orderId":"A300","shipTo":{"country":"NL"},"customer":{"email":"acct@company.nl","vatId":"NL999999999B01"},"lines":[{"sku":"WID-001","qty":2,"unitCents":999},{"sku":"GAD-002","qty":1,"unitCents":1500}],"declared":{"netCents":3498,"vatCents":0,"grossCents":3498}}"""^^rdf:JSON "/shipTo/country") string:jsonPointer "NL" .
#   ("""{"orderId":"A300","shipTo":{"country":"NL"},"customer":{"email":"acct@company.nl","vatId":"NL999999999B01"},"lines":[{"sku":"WID-001","qty":2,"unitCents":999},{"sku":"GAD-002","qty":1,"unitCents":1500}],"declared":{"netCents":3498,"vatCents":0,"grossCents":3498}}"""^^rdf:JSON "/customer") string:jsonPointer """{"email":"acct@company.nl","vatId":"NL999999999B01"}"""^^rdf:JSON .
#   ("""{"email":"acct@company.nl","vatId":"NL999999999B01"}"""^^rdf:JSON "/email") string:jsonPointer "acct@company.nl" .
#   ("""{"email":"acct@company.nl","vatId":"NL999999999B01"}"""^^rdf:JSON "/vatId") string:jsonPointer "NL999999999B01" .
#   ("""{"orderId":"A300","shipTo":{"country":"NL"},"customer":{"email":"acct@company.nl","vatId":"NL999999999B01"},"lines":[{"sku":"WID-001","qty":2,"unitCents":999},{"sku":"GAD-002","qty":1,"unitCents":1500}],"declared":{"netCents":3498,"vatCents":0,"grossCents":3498}}"""^^rdf:JSON "/declared") string:jsonPointer """{"netCents":3498,"vatCents":0,"grossCents":3498}"""^^rdf:JSON .
#   ("""{"netCents":3498,"vatCents":0,"grossCents":3498}"""^^rdf:JSON "/netCents") string:jsonPointer 3498 .
#   ("""{"netCents":3498,"vatCents":0,"grossCents":3498}"""^^rdf:JSON "/vatCents") string:jsonPointer 0 .
#   ("""{"netCents":3498,"vatCents":0,"grossCents":3498}"""^^rdf:JSON "/grossCents") string:jsonPointer 3498 .
#   ("urn:example:order:%s" "A300") string:format "urn:example:order:A300" .
#   <urn:example:order:A300> log:uri "urn:example:order:A300" .
# via the schematic forward rule:
#   {
#     ex:feed ex:json ?J .
#     (?J "/orders") string:jsonPointer ?Orders .
#     ?Orders list:iterate (?OrderIndex ?OrderJson) .
#     (?OrderJson "/orderId") string:jsonPointer ?OrderId .
#     (?OrderJson "/shipTo/country") string:jsonPointer ?Country .
#     (?OrderJson "/customer") string:jsonPointer ?CustJson .
#     (?CustJson "/email") string:jsonPointer ?Email .
#     (?CustJson "/vatId") string:jsonPointer ?VatIdRaw .
#     (?OrderJson "/declared") string:jsonPointer ?Decl .
#     (?Decl "/netCents") string:jsonPointer ?NetD .
#     (?Decl "/vatCents") string:jsonPointer ?VatD .
#     (?Decl "/grossCents") string:jsonPointer ?GrossD .
#     ("urn:example:order:%s" ?OrderId) string:format ?OrderUriStr .
#     ?Order log:uri ?OrderUriStr .
#   } => {
#     ?Order a ex:Order .
#     ?Order ex:orderId ?OrderId .
#     ?Order ex:orderIndex ?OrderIndex .
#     ?Order ex:shipCountry ?Country .
#     ?Order ex:email ?Email .
#     ?Order ex:vatIdRaw ?VatIdRaw .
#     ?Order ex:declaredNetCents ?NetD .
#     ?Order ex:declaredVatCents ?VatD .
#     ?Order ex:declaredGrossCents ?GrossD .
#   } .
# with substitution (on rule variables):
#   ?Country = "NL"
#   ?CustJson = """{"email":"acct@company.nl","vatId":"NL999999999B01"}"""^^rdf:JSON
#   ?Decl = """{"netCents":3498,"vatCents":0,"grossCents":3498}"""^^rdf:JSON
#   ?Email = "acct@company.nl"
#   ?GrossD = 3498
#   ?J = """{
#     "meta~data": { "batch": "2025-12-18" },
#     "orders": [
#     {
#     "orderId": "A100",
#     "shipTo": { "country": "BE" },
#     "customer": { "email": "Ada@Example.ORG", "vatId": null },
#     "lines": [
#     { "sku": "wid-001", "qty": 2, "unitCents": 999 },
#     { "sku": "GAD-002", "qty": 1, "unitCents": 1500 }
#     ],
#     "declared": { "netCents": 3498, "vatCents": 509, "grossCents": 4007 }
#     },
#     {
#     "orderId": "A200",
#     "shipTo": { "country": "US" },
#     "customer": { "email": "bob@example.org", "vatId": null },
#     "lines": [
#     { "sku": "WID-001", "qty": 2, "unitCents": 999 },
#     { "sku": "GAD-002", "qty": 1, "unitCents": 1500 }
#     ],
#     "declared": { "netCents": 3498, "vatCents": 0, "grossCents": 3498 }
#     },
#     {
#     "orderId": "A300",
#     "shipTo": { "country": "NL" },
#     "customer": { "email": "acct@company.nl", "vatId": "NL999999999B01" },
#     "lines": [
#     { "sku": "WID-001", "qty": 2, "unitCents": 999 },
#     { "sku": "GAD-002", "qty": 1, "unitCents": 1500 }
#     ],
#     "declared": { "netCents": 3498, "vatCents": 0, "grossCents": 3498 }
#     },
#     {
#     "orderId": "A301",
#     "shipTo": { "country": "NL" },
#     "customer": { "email": "billing@company.nl", "vatId": "NL999999999B01" },
#     "lines": [
#     { "sku": "WID-001", "qty": 2, "unitCents": 999 },
#     { "sku": "GAD-002", "qty": 1, "unitCents": 1500 }
#     ],
#     "declared": { "netCents": 3498, "vatCents": 0, "grossCents": 3498 }
#     },
#     {
#     "orderId": "A400",
#     "shipTo": { "country": "BE" },
#     "customer": { "email": "ada@other.example", "vatId": null },
#     "lines": [
#     { "sku": "WID-001", "qty": 2, "unitCents": 999 },
#     { "sku": "GAD-002", "qty": 1, "unitCents": 1500 }
#     ],
#     "declared": { "netCents": 3498, "vatCents": 508, "grossCents": 4006 }
#     }
#     ]
#   }"""^^rdf:JSON
#   ?NetD = 3498
#   ?Order = <urn:example:order:A300>
#   ?OrderId = "A300"
#   ?OrderIndex = 2
#   ?OrderJson = """{"orderId":"A300","shipTo":{"country":"NL"},"customer":{"email":"acct@company.nl","vatId":"NL999999999B01"},"lines":[{"sku":"WID-001","qty":2,"unitCents":999},{"sku":"GAD-002","qty":1,"unitCents":1500}],"declared":{"netCents":3498,"vatCents":0,"grossCents":3498}}"""^^rdf:JSON
#   ?OrderUriStr = "urn:example:order:A300"
#   ?Orders = ("""{"orderId":"A100","shipTo":{"country":"BE"},"customer":{"email":"Ada@Example.ORG","vatId":null},"lines":[{"sku":"wid-001","qty":2,"unitCents":999},{"sku":"GAD-002","qty":1,"unitCents":1500}],"declared":{"netCents":3498,"vatCents":509,"grossCents":4007}}"""^^rdf:JSON """{"orderId":"A200","shipTo":{"country":"US"},"customer":{"email":"bob@example.org","vatId":null},"lines":[{"sku":"WID-001","qty":2,"unitCents":999},{"sku":"GAD-002","qty":1,"unitCents":1500}],"declared":{"netCents":3498,"vatCents":0,"grossCents":3498}}"""^^rdf:JSON """{"orderId":"A300","shipTo":{"country":"NL"},"customer":{"email":"acct@company.nl","vatId":"NL999999999B01"},"lines":[{"sku":"WID-001","qty":2,"unitCents":999},{"sku":"GAD-002","qty":1,"unitCents":1500}],"declared":{"netCents":3498,"vatCents":0,"grossCents":3498}}"""^^rdf:JSON """{"orderId":"A301","shipTo":{"country":"NL"},"customer":{"email":"billing@company.nl","vatId":"NL999999999B01"},"lines":[{"sku":"WID-001","qty":2,"unitCents":999},{"sku":"GAD-002","qty":1,"unitCents":1500}],"declared":{"netCents":3498,"vatCents":0,"grossCents":3498}}"""^^rdf:JSON """{"orderId":"A400","shipTo":{"country":"BE"},"customer":{"email":"ada@other.example","vatId":null},"lines":[{"sku":"WID-001","qty":2,"unitCents":999},{"sku":"GAD-002","qty":1,"unitCents":1500}],"declared":{"netCents":3498,"vatCents":508,"grossCents":4006}}"""^^rdf:JSON)
#   ?VatD = 0
#   ?VatIdRaw = "NL999999999B01"
# Therefore the derived triple above is entailed by the rules and facts.
# ----------------------------------------------------------------------

<urn:example:order:A300> ex:shipCountry "NL" .

# ----------------------------------------------------------------------
# Proof for derived triple:
#   <urn:example:order:A300> ex:email "acct@company.nl" .
# It holds because the following instance of the rule body is provable:
#   ex:feed ex:json """{
#     "meta~data": { "batch": "2025-12-18" },
#     "orders": [
#       {
#         "orderId": "A100",
#         "shipTo": { "country": "BE" },
#         "customer": { "email": "Ada@Example.ORG", "vatId": null },
#         "lines": [
#           { "sku": "wid-001", "qty": 2, "unitCents": 999 },
#           { "sku": "GAD-002", "qty": 1, "unitCents": 1500 }
#         ],
#         "declared": { "netCents": 3498, "vatCents": 509, "grossCents": 4007 }
#       },
#       {
#         "orderId": "A200",
#         "shipTo": { "country": "US" },
#         "customer": { "email": "bob@example.org", "vatId": null },
#         "lines": [
#           { "sku": "WID-001", "qty": 2, "unitCents": 999 },
#           { "sku": "GAD-002", "qty": 1, "unitCents": 1500 }
#         ],
#         "declared": { "netCents": 3498, "vatCents": 0, "grossCents": 3498 }
#       },
#       {
#         "orderId": "A300",
#         "shipTo": { "country": "NL" },
#         "customer": { "email": "acct@company.nl", "vatId": "NL999999999B01" },
#         "lines": [
#           { "sku": "WID-001", "qty": 2, "unitCents": 999 },
#           { "sku": "GAD-002", "qty": 1, "unitCents": 1500 }
#         ],
#         "declared": { "netCents": 3498, "vatCents": 0, "grossCents": 3498 }
#       },
#       {
#         "orderId": "A301",
#         "shipTo": { "country": "NL" },
#         "customer": { "email": "billing@company.nl", "vatId": "NL999999999B01" },
#         "lines": [
#           { "sku": "WID-001", "qty": 2, "unitCents": 999 },
#           { "sku": "GAD-002", "qty": 1, "unitCents": 1500 }
#         ],
#         "declared": { "netCents": 3498, "vatCents": 0, "grossCents": 3498 }
#       },
#       {
#         "orderId": "A400",
#         "shipTo": { "country": "BE" },
#         "customer": { "email": "ada@other.example", "vatId": null },
#         "lines": [
#           { "sku": "WID-001", "qty": 2, "unitCents": 999 },
#           { "sku": "GAD-002", "qty": 1, "unitCents": 1500 }
#         ],
#         "declared": { "netCents": 3498, "vatCents": 508, "grossCents": 4006 }
#       }
#     ]
#   }"""^^rdf:JSON .
#   ("""{
#     "meta~data": { "batch": "2025-12-18" },
#     "orders": [
#       {
#         "orderId": "A100",
#         "shipTo": { "country": "BE" },
#         "customer": { "email": "Ada@Example.ORG", "vatId": null },
#         "lines": [
#           { "sku": "wid-001", "qty": 2, "unitCents": 999 },
#           { "sku": "GAD-002", "qty": 1, "unitCents": 1500 }
#         ],
#         "declared": { "netCents": 3498, "vatCents": 509, "grossCents": 4007 }
#       },
#       {
#         "orderId": "A200",
#         "shipTo": { "country": "US" },
#         "customer": { "email": "bob@example.org", "vatId": null },
#         "lines": [
#           { "sku": "WID-001", "qty": 2, "unitCents": 999 },
#           { "sku": "GAD-002", "qty": 1, "unitCents": 1500 }
#         ],
#         "declared": { "netCents": 3498, "vatCents": 0, "grossCents": 3498 }
#       },
#       {
#         "orderId": "A300",
#         "shipTo": { "country": "NL" },
#         "customer": { "email": "acct@company.nl", "vatId": "NL999999999B01" },
#         "lines": [
#           { "sku": "WID-001", "qty": 2, "unitCents": 999 },
#           { "sku": "GAD-002", "qty": 1, "unitCents": 1500 }
#         ],
#         "declared": { "netCents": 3498, "vatCents": 0, "grossCents": 3498 }
#       },
#       {
#         "orderId": "A301",
#         "shipTo": { "country": "NL" },
#         "customer": { "email": "billing@company.nl", "vatId": "NL999999999B01" },
#         "lines": [
#           { "sku": "WID-001", "qty": 2, "unitCents": 999 },
#           { "sku": "GAD-002", "qty": 1, "unitCents": 1500 }
#         ],
#         "declared": { "netCents": 3498, "vatCents": 0, "grossCents": 3498 }
#       },
#       {
#         "orderId": "A400",
#         "shipTo": { "country": "BE" },
#         "customer": { "email": "ada@other.example", "vatId": null },
#         "lines": [
#           { "sku": "WID-001", "qty": 2, "unitCents": 999 },
#           { "sku": "GAD-002", "qty": 1, "unitCents": 1500 }
#         ],
#         "declared": { "netCents": 3498, "vatCents": 508, "grossCents": 4006 }
#       }
#     ]
#   }"""^^rdf:JSON "/orders") string:jsonPointer ("""{"orderId":"A100","shipTo":{"country":"BE"},"customer":{"email":"Ada@Example.ORG","vatId":null},"lines":[{"sku":"wid-001","qty":2,"unitCents":999},{"sku":"GAD-002","qty":1,"unitCents":1500}],"declared":{"netCents":3498,"vatCents":509,"grossCents":4007}}"""^^rdf:JSON """{"orderId":"A200","shipTo":{"country":"US"},"customer":{"email":"bob@example.org","vatId":null},"lines":[{"sku":"WID-001","qty":2,"unitCents":999},{"sku":"GAD-002","qty":1,"unitCents":1500}],"declared":{"netCents":3498,"vatCents":0,"grossCents":3498}}"""^^rdf:JSON """{"orderId":"A300","shipTo":{"country":"NL"},"customer":{"email":"acct@company.nl","vatId":"NL999999999B01"},"lines":[{"sku":"WID-001","qty":2,"unitCents":999},{"sku":"GAD-002","qty":1,"unitCents":1500}],"declared":{"netCents":3498,"vatCents":0,"grossCents":3498}}"""^^rdf:JSON """{"orderId":"A301","shipTo":{"country":"NL"},"customer":{"email":"billing@company.nl","vatId":"NL999999999B01"},"lines":[{"sku":"WID-001","qty":2,"unitCents":999},{"sku":"GAD-002","qty":1,"unitCents":1500}],"declared":{"netCents":3498,"vatCents":0,"grossCents":3498}}"""^^rdf:JSON """{"orderId":"A400","shipTo":{"country":"BE"},"customer":{"email":"ada@other.example","vatId":null},"lines":[{"sku":"WID-001","qty":2,"unitCents":999},{"sku":"GAD-002","qty":1,"unitCents":1500}],"declared":{"netCents":3498,"vatCents":508,"grossCents":4006}}"""^^rdf:JSON) .
#   ("""{"orderId":"A100","shipTo":{"country":"BE"},"customer":{"email":"Ada@Example.ORG","vatId":null},"lines":[{"sku":"wid-001","qty":2,"unitCents":999},{"sku":"GAD-002","qty":1,"unitCents":1500}],"declared":{"netCents":3498,"vatCents":509,"grossCents":4007}}"""^^rdf:JSON """{"orderId":"A200","shipTo":{"country":"US"},"customer":{"email":"bob@example.org","vatId":null},"lines":[{"sku":"WID-001","qty":2,"unitCents":999},{"sku":"GAD-002","qty":1,"unitCents":1500}],"declared":{"netCents":3498,"vatCents":0,"grossCents":3498}}"""^^rdf:JSON """{"orderId":"A300","shipTo":{"country":"NL"},"customer":{"email":"acct@company.nl","vatId":"NL999999999B01"},"lines":[{"sku":"WID-001","qty":2,"unitCents":999},{"sku":"GAD-002","qty":1,"unitCents":1500}],"declared":{"netCents":3498,"vatCents":0,"grossCents":3498}}"""^^rdf:JSON """{"orderId":"A301","shipTo":{"country":"NL"},"customer":{"email":"billing@company.nl","vatId":"NL999999999B01"},"lines":[{"sku":"WID-001","qty":2,"unitCents":999},{"sku":"GAD-002","qty":1,"unitCents":1500}],"declared":{"netCents":3498,"vatCents":0,"grossCents":3498}}"""^^rdf:JSON """{"orderId":"A400","shipTo":{"country":"BE"},"customer":{"email":"ada@other.example","vatId":null},"lines":[{"sku":"WID-001","qty":2,"unitCents":999},{"sku":"GAD-002","qty":1,"unitCents":1500}],"declared":{"netCents":3498,"vatCents":508,"grossCents":4006}}"""^^rdf:JSON) list:iterate (2 """{"orderId":"A300","shipTo":{"country":"NL"},"customer":{"email":"acct@company.nl","vatId":"NL999999999B01"},"lines":[{"sku":"WID-001","qty":2,"unitCents":999},{"sku":"GAD-002","qty":1,"unitCents":1500}],"declared":{"netCents":3498,"vatCents":0,"grossCents":3498}}"""^^rdf:JSON) .
#   ("""{"orderId":"A300","shipTo":{"country":"NL"},"customer":{"email":"acct@company.nl","vatId":"NL999999999B01"},"lines":[{"sku":"WID-001","qty":2,"unitCents":999},{"sku":"GAD-002","qty":1,"unitCents":1500}],"declared":{"netCents":3498,"vatCents":0,"grossCents":3498}}"""^^rdf:JSON "/orderId") string:jsonPointer "A300" .
#   ("""{"orderId":"A300","shipTo":{"country":"NL"},"customer":{"email":"acct@company.nl","vatId":"NL999999999B01"},"lines":[{"sku":"WID-001","qty":2,"unitCents":999},{"sku":"GAD-002","qty":1,"unitCents":1500}],"declared":{"netCents":3498,"vatCents":0,"grossCents":3498}}"""^^rdf:JSON "/shipTo/country") string:jsonPointer "NL" .
#   ("""{"orderId":"A300","shipTo":{"country":"NL"},"customer":{"email":"acct@company.nl","vatId":"NL999999999B01"},"lines":[{"sku":"WID-001","qty":2,"unitCents":999},{"sku":"GAD-002","qty":1,"unitCents":1500}],"declared":{"netCents":3498,"vatCents":0,"grossCents":3498}}"""^^rdf:JSON "/customer") string:jsonPointer """{"email":"acct@company.nl","vatId":"NL999999999B01"}"""^^rdf:JSON .
#   ("""{"email":"acct@company.nl","vatId":"NL999999999B01"}"""^^rdf:JSON "/email") string:jsonPointer "acct@company.nl" .
#   ("""{"email":"acct@company.nl","vatId":"NL999999999B01"}"""^^rdf:JSON "/vatId") string:jsonPointer "NL999999999B01" .
#   ("""{"orderId":"A300","shipTo":{"country":"NL"},"customer":{"email":"acct@company.nl","vatId":"NL999999999B01"},"lines":[{"sku":"WID-001","qty":2,"unitCents":999},{"sku":"GAD-002","qty":1,"unitCents":1500}],"declared":{"netCents":3498,"vatCents":0,"grossCents":3498}}"""^^rdf:JSON "/declared") string:jsonPointer """{"netCents":3498,"vatCents":0,"grossCents":3498}"""^^rdf:JSON .
#   ("""{"netCents":3498,"vatCents":0,"grossCents":3498}"""^^rdf:JSON "/netCents") string:jsonPointer 3498 .
#   ("""{"netCents":3498,"vatCents":0,"grossCents":3498}"""^^rdf:JSON "/vatCents") string:jsonPointer 0 .
#   ("""{"netCents":3498,"vatCents":0,"grossCents":3498}"""^^rdf:JSON "/grossCents") string:jsonPointer 3498 .
#   ("urn:example:order:%s" "A300") string:format "urn:example:order:A300" .
#   <urn:example:order:A300> log:uri "urn:example:order:A300" .
# via the schematic forward rule:
#   {
#     ex:feed ex:json ?J .
#     (?J "/orders") string:jsonPointer ?Orders .
#     ?Orders list:iterate (?OrderIndex ?OrderJson) .
#     (?OrderJson "/orderId") string:jsonPointer ?OrderId .
#     (?OrderJson "/shipTo/country") string:jsonPointer ?Country .
#     (?OrderJson "/customer") string:jsonPointer ?CustJson .
#     (?CustJson "/email") string:jsonPointer ?Email .
#     (?CustJson "/vatId") string:jsonPointer ?VatIdRaw .
#     (?OrderJson "/declared") string:jsonPointer ?Decl .
#     (?Decl "/netCents") string:jsonPointer ?NetD .
#     (?Decl "/vatCents") string:jsonPointer ?VatD .
#     (?Decl "/grossCents") string:jsonPointer ?GrossD .
#     ("urn:example:order:%s" ?OrderId) string:format ?OrderUriStr .
#     ?Order log:uri ?OrderUriStr .
#   } => {
#     ?Order a ex:Order .
#     ?Order ex:orderId ?OrderId .
#     ?Order ex:orderIndex ?OrderIndex .
#     ?Order ex:shipCountry ?Country .
#     ?Order ex:email ?Email .
#     ?Order ex:vatIdRaw ?VatIdRaw .
#     ?Order ex:declaredNetCents ?NetD .
#     ?Order ex:declaredVatCents ?VatD .
#     ?Order ex:declaredGrossCents ?GrossD .
#   } .
# with substitution (on rule variables):
#   ?Country = "NL"
#   ?CustJson = """{"email":"acct@company.nl","vatId":"NL999999999B01"}"""^^rdf:JSON
#   ?Decl = """{"netCents":3498,"vatCents":0,"grossCents":3498}"""^^rdf:JSON
#   ?Email = "acct@company.nl"
#   ?GrossD = 3498
#   ?J = """{
#     "meta~data": { "batch": "2025-12-18" },
#     "orders": [
#     {
#     "orderId": "A100",
#     "shipTo": { "country": "BE" },
#     "customer": { "email": "Ada@Example.ORG", "vatId": null },
#     "lines": [
#     { "sku": "wid-001", "qty": 2, "unitCents": 999 },
#     { "sku": "GAD-002", "qty": 1, "unitCents": 1500 }
#     ],
#     "declared": { "netCents": 3498, "vatCents": 509, "grossCents": 4007 }
#     },
#     {
#     "orderId": "A200",
#     "shipTo": { "country": "US" },
#     "customer": { "email": "bob@example.org", "vatId": null },
#     "lines": [
#     { "sku": "WID-001", "qty": 2, "unitCents": 999 },
#     { "sku": "GAD-002", "qty": 1, "unitCents": 1500 }
#     ],
#     "declared": { "netCents": 3498, "vatCents": 0, "grossCents": 3498 }
#     },
#     {
#     "orderId": "A300",
#     "shipTo": { "country": "NL" },
#     "customer": { "email": "acct@company.nl", "vatId": "NL999999999B01" },
#     "lines": [
#     { "sku": "WID-001", "qty": 2, "unitCents": 999 },
#     { "sku": "GAD-002", "qty": 1, "unitCents": 1500 }
#     ],
#     "declared": { "netCents": 3498, "vatCents": 0, "grossCents": 3498 }
#     },
#     {
#     "orderId": "A301",
#     "shipTo": { "country": "NL" },
#     "customer": { "email": "billing@company.nl", "vatId": "NL999999999B01" },
#     "lines": [
#     { "sku": "WID-001", "qty": 2, "unitCents": 999 },
#     { "sku": "GAD-002", "qty": 1, "unitCents": 1500 }
#     ],
#     "declared": { "netCents": 3498, "vatCents": 0, "grossCents": 3498 }
#     },
#     {
#     "orderId": "A400",
#     "shipTo": { "country": "BE" },
#     "customer": { "email": "ada@other.example", "vatId": null },
#     "lines": [
#     { "sku": "WID-001", "qty": 2, "unitCents": 999 },
#     { "sku": "GAD-002", "qty": 1, "unitCents": 1500 }
#     ],
#     "declared": { "netCents": 3498, "vatCents": 508, "grossCents": 4006 }
#     }
#     ]
#   }"""^^rdf:JSON
#   ?NetD = 3498
#   ?Order = <urn:example:order:A300>
#   ?OrderId = "A300"
#   ?OrderIndex = 2
#   ?OrderJson = """{"orderId":"A300","shipTo":{"country":"NL"},"customer":{"email":"acct@company.nl","vatId":"NL999999999B01"},"lines":[{"sku":"WID-001","qty":2,"unitCents":999},{"sku":"GAD-002","qty":1,"unitCents":1500}],"declared":{"netCents":3498,"vatCents":0,"grossCents":3498}}"""^^rdf:JSON
#   ?OrderUriStr = "urn:example:order:A300"
#   ?Orders = ("""{"orderId":"A100","shipTo":{"country":"BE"},"customer":{"email":"Ada@Example.ORG","vatId":null},"lines":[{"sku":"wid-001","qty":2,"unitCents":999},{"sku":"GAD-002","qty":1,"unitCents":1500}],"declared":{"netCents":3498,"vatCents":509,"grossCents":4007}}"""^^rdf:JSON """{"orderId":"A200","shipTo":{"country":"US"},"customer":{"email":"bob@example.org","vatId":null},"lines":[{"sku":"WID-001","qty":2,"unitCents":999},{"sku":"GAD-002","qty":1,"unitCents":1500}],"declared":{"netCents":3498,"vatCents":0,"grossCents":3498}}"""^^rdf:JSON """{"orderId":"A300","shipTo":{"country":"NL"},"customer":{"email":"acct@company.nl","vatId":"NL999999999B01"},"lines":[{"sku":"WID-001","qty":2,"unitCents":999},{"sku":"GAD-002","qty":1,"unitCents":1500}],"declared":{"netCents":3498,"vatCents":0,"grossCents":3498}}"""^^rdf:JSON """{"orderId":"A301","shipTo":{"country":"NL"},"customer":{"email":"billing@company.nl","vatId":"NL999999999B01"},"lines":[{"sku":"WID-001","qty":2,"unitCents":999},{"sku":"GAD-002","qty":1,"unitCents":1500}],"declared":{"netCents":3498,"vatCents":0,"grossCents":3498}}"""^^rdf:JSON """{"orderId":"A400","shipTo":{"country":"BE"},"customer":{"email":"ada@other.example","vatId":null},"lines":[{"sku":"WID-001","qty":2,"unitCents":999},{"sku":"GAD-002","qty":1,"unitCents":1500}],"declared":{"netCents":3498,"vatCents":508,"grossCents":4006}}"""^^rdf:JSON)
#   ?VatD = 0
#   ?VatIdRaw = "NL999999999B01"
# Therefore the derived triple above is entailed by the rules and facts.
# ----------------------------------------------------------------------

<urn:example:order:A300> ex:email "acct@company.nl" .

# ----------------------------------------------------------------------
# Proof for derived triple:
#   <urn:example:order:A300> ex:vatIdRaw "NL999999999B01" .
# It holds because the following instance of the rule body is provable:
#   ex:feed ex:json """{
#     "meta~data": { "batch": "2025-12-18" },
#     "orders": [
#       {
#         "orderId": "A100",
#         "shipTo": { "country": "BE" },
#         "customer": { "email": "Ada@Example.ORG", "vatId": null },
#         "lines": [
#           { "sku": "wid-001", "qty": 2, "unitCents": 999 },
#           { "sku": "GAD-002", "qty": 1, "unitCents": 1500 }
#         ],
#         "declared": { "netCents": 3498, "vatCents": 509, "grossCents": 4007 }
#       },
#       {
#         "orderId": "A200",
#         "shipTo": { "country": "US" },
#         "customer": { "email": "bob@example.org", "vatId": null },
#         "lines": [
#           { "sku": "WID-001", "qty": 2, "unitCents": 999 },
#           { "sku": "GAD-002", "qty": 1, "unitCents": 1500 }
#         ],
#         "declared": { "netCents": 3498, "vatCents": 0, "grossCents": 3498 }
#       },
#       {
#         "orderId": "A300",
#         "shipTo": { "country": "NL" },
#         "customer": { "email": "acct@company.nl", "vatId": "NL999999999B01" },
#         "lines": [
#           { "sku": "WID-001", "qty": 2, "unitCents": 999 },
#           { "sku": "GAD-002", "qty": 1, "unitCents": 1500 }
#         ],
#         "declared": { "netCents": 3498, "vatCents": 0, "grossCents": 3498 }
#       },
#       {
#         "orderId": "A301",
#         "shipTo": { "country": "NL" },
#         "customer": { "email": "billing@company.nl", "vatId": "NL999999999B01" },
#         "lines": [
#           { "sku": "WID-001", "qty": 2, "unitCents": 999 },
#           { "sku": "GAD-002", "qty": 1, "unitCents": 1500 }
#         ],
#         "declared": { "netCents": 3498, "vatCents": 0, "grossCents": 3498 }
#       },
#       {
#         "orderId": "A400",
#         "shipTo": { "country": "BE" },
#         "customer": { "email": "ada@other.example", "vatId": null },
#         "lines": [
#           { "sku": "WID-001", "qty": 2, "unitCents": 999 },
#           { "sku": "GAD-002", "qty": 1, "unitCents": 1500 }
#         ],
#         "declared": { "netCents": 3498, "vatCents": 508, "grossCents": 4006 }
#       }
#     ]
#   }"""^^rdf:JSON .
#   ("""{
#     "meta~data": { "batch": "2025-12-18" },
#     "orders": [
#       {
#         "orderId": "A100",
#         "shipTo": { "country": "BE" },
#         "customer": { "email": "Ada@Example.ORG", "vatId": null },
#         "lines": [
#           { "sku": "wid-001", "qty": 2, "unitCents": 999 },
#           { "sku": "GAD-002", "qty": 1, "unitCents": 1500 }
#         ],
#         "declared": { "netCents": 3498, "vatCents": 509, "grossCents": 4007 }
#       },
#       {
#         "orderId": "A200",
#         "shipTo": { "country": "US" },
#         "customer": { "email": "bob@example.org", "vatId": null },
#         "lines": [
#           { "sku": "WID-001", "qty": 2, "unitCents": 999 },
#           { "sku": "GAD-002", "qty": 1, "unitCents": 1500 }
#         ],
#         "declared": { "netCents": 3498, "vatCents": 0, "grossCents": 3498 }
#       },
#       {
#         "orderId": "A300",
#         "shipTo": { "country": "NL" },
#         "customer": { "email": "acct@company.nl", "vatId": "NL999999999B01" },
#         "lines": [
#           { "sku": "WID-001", "qty": 2, "unitCents": 999 },
#           { "sku": "GAD-002", "qty": 1, "unitCents": 1500 }
#         ],
#         "declared": { "netCents": 3498, "vatCents": 0, "grossCents": 3498 }
#       },
#       {
#         "orderId": "A301",
#         "shipTo": { "country": "NL" },
#         "customer": { "email": "billing@company.nl", "vatId": "NL999999999B01" },
#         "lines": [
#           { "sku": "WID-001", "qty": 2, "unitCents": 999 },
#           { "sku": "GAD-002", "qty": 1, "unitCents": 1500 }
#         ],
#         "declared": { "netCents": 3498, "vatCents": 0, "grossCents": 3498 }
#       },
#       {
#         "orderId": "A400",
#         "shipTo": { "country": "BE" },
#         "customer": { "email": "ada@other.example", "vatId": null },
#         "lines": [
#           { "sku": "WID-001", "qty": 2, "unitCents": 999 },
#           { "sku": "GAD-002", "qty": 1, "unitCents": 1500 }
#         ],
#         "declared": { "netCents": 3498, "vatCents": 508, "grossCents": 4006 }
#       }
#     ]
#   }"""^^rdf:JSON "/orders") string:jsonPointer ("""{"orderId":"A100","shipTo":{"country":"BE"},"customer":{"email":"Ada@Example.ORG","vatId":null},"lines":[{"sku":"wid-001","qty":2,"unitCents":999},{"sku":"GAD-002","qty":1,"unitCents":1500}],"declared":{"netCents":3498,"vatCents":509,"grossCents":4007}}"""^^rdf:JSON """{"orderId":"A200","shipTo":{"country":"US"},"customer":{"email":"bob@example.org","vatId":null},"lines":[{"sku":"WID-001","qty":2,"unitCents":999},{"sku":"GAD-002","qty":1,"unitCents":1500}],"declared":{"netCents":3498,"vatCents":0,"grossCents":3498}}"""^^rdf:JSON """{"orderId":"A300","shipTo":{"country":"NL"},"customer":{"email":"acct@company.nl","vatId":"NL999999999B01"},"lines":[{"sku":"WID-001","qty":2,"unitCents":999},{"sku":"GAD-002","qty":1,"unitCents":1500}],"declared":{"netCents":3498,"vatCents":0,"grossCents":3498}}"""^^rdf:JSON """{"orderId":"A301","shipTo":{"country":"NL"},"customer":{"email":"billing@company.nl","vatId":"NL999999999B01"},"lines":[{"sku":"WID-001","qty":2,"unitCents":999},{"sku":"GAD-002","qty":1,"unitCents":1500}],"declared":{"netCents":3498,"vatCents":0,"grossCents":3498}}"""^^rdf:JSON """{"orderId":"A400","shipTo":{"country":"BE"},"customer":{"email":"ada@other.example","vatId":null},"lines":[{"sku":"WID-001","qty":2,"unitCents":999},{"sku":"GAD-002","qty":1,"unitCents":1500}],"declared":{"netCents":3498,"vatCents":508,"grossCents":4006}}"""^^rdf:JSON) .
#   ("""{"orderId":"A100","shipTo":{"country":"BE"},"customer":{"email":"Ada@Example.ORG","vatId":null},"lines":[{"sku":"wid-001","qty":2,"unitCents":999},{"sku":"GAD-002","qty":1,"unitCents":1500}],"declared":{"netCents":3498,"vatCents":509,"grossCents":4007}}"""^^rdf:JSON """{"orderId":"A200","shipTo":{"country":"US"},"customer":{"email":"bob@example.org","vatId":null},"lines":[{"sku":"WID-001","qty":2,"unitCents":999},{"sku":"GAD-002","qty":1,"unitCents":1500}],"declared":{"netCents":3498,"vatCents":0,"grossCents":3498}}"""^^rdf:JSON """{"orderId":"A300","shipTo":{"country":"NL"},"customer":{"email":"acct@company.nl","vatId":"NL999999999B01"},"lines":[{"sku":"WID-001","qty":2,"unitCents":999},{"sku":"GAD-002","qty":1,"unitCents":1500}],"declared":{"netCents":3498,"vatCents":0,"grossCents":3498}}"""^^rdf:JSON """{"orderId":"A301","shipTo":{"country":"NL"},"customer":{"email":"billing@company.nl","vatId":"NL999999999B01"},"lines":[{"sku":"WID-001","qty":2,"unitCents":999},{"sku":"GAD-002","qty":1,"unitCents":1500}],"declared":{"netCents":3498,"vatCents":0,"grossCents":3498}}"""^^rdf:JSON """{"orderId":"A400","shipTo":{"country":"BE"},"customer":{"email":"ada@other.example","vatId":null},"lines":[{"sku":"WID-001","qty":2,"unitCents":999},{"sku":"GAD-002","qty":1,"unitCents":1500}],"declared":{"netCents":3498,"vatCents":508,"grossCents":4006}}"""^^rdf:JSON) list:iterate (2 """{"orderId":"A300","shipTo":{"country":"NL"},"customer":{"email":"acct@company.nl","vatId":"NL999999999B01"},"lines":[{"sku":"WID-001","qty":2,"unitCents":999},{"sku":"GAD-002","qty":1,"unitCents":1500}],"declared":{"netCents":3498,"vatCents":0,"grossCents":3498}}"""^^rdf:JSON) .
#   ("""{"orderId":"A300","shipTo":{"country":"NL"},"customer":{"email":"acct@company.nl","vatId":"NL999999999B01"},"lines":[{"sku":"WID-001","qty":2,"unitCents":999},{"sku":"GAD-002","qty":1,"unitCents":1500}],"declared":{"netCents":3498,"vatCents":0,"grossCents":3498}}"""^^rdf:JSON "/orderId") string:jsonPointer "A300" .
#   ("""{"orderId":"A300","shipTo":{"country":"NL"},"customer":{"email":"acct@company.nl","vatId":"NL999999999B01"},"lines":[{"sku":"WID-001","qty":2,"unitCents":999},{"sku":"GAD-002","qty":1,"unitCents":1500}],"declared":{"netCents":3498,"vatCents":0,"grossCents":3498}}"""^^rdf:JSON "/shipTo/country") string:jsonPointer "NL" .
#   ("""{"orderId":"A300","shipTo":{"country":"NL"},"customer":{"email":"acct@company.nl","vatId":"NL999999999B01"},"lines":[{"sku":"WID-001","qty":2,"unitCents":999},{"sku":"GAD-002","qty":1,"unitCents":1500}],"declared":{"netCents":3498,"vatCents":0,"grossCents":3498}}"""^^rdf:JSON "/customer") string:jsonPointer """{"email":"acct@company.nl","vatId":"NL999999999B01"}"""^^rdf:JSON .
#   ("""{"email":"acct@company.nl","vatId":"NL999999999B01"}"""^^rdf:JSON "/email") string:jsonPointer "acct@company.nl" .
#   ("""{"email":"acct@company.nl","vatId":"NL999999999B01"}"""^^rdf:JSON "/vatId") string:jsonPointer "NL999999999B01" .
#   ("""{"orderId":"A300","shipTo":{"country":"NL"},"customer":{"email":"acct@company.nl","vatId":"NL999999999B01"},"lines":[{"sku":"WID-001","qty":2,"unitCents":999},{"sku":"GAD-002","qty":1,"unitCents":1500}],"declared":{"netCents":3498,"vatCents":0,"grossCents":3498}}"""^^rdf:JSON "/declared") string:jsonPointer """{"netCents":3498,"vatCents":0,"grossCents":3498}"""^^rdf:JSON .
#   ("""{"netCents":3498,"vatCents":0,"grossCents":3498}"""^^rdf:JSON "/netCents") string:jsonPointer 3498 .
#   ("""{"netCents":3498,"vatCents":0,"grossCents":3498}"""^^rdf:JSON "/vatCents") string:jsonPointer 0 .
#   ("""{"netCents":3498,"vatCents":0,"grossCents":3498}"""^^rdf:JSON "/grossCents") string:jsonPointer 3498 .
#   ("urn:example:order:%s" "A300") string:format "urn:example:order:A300" .
#   <urn:example:order:A300> log:uri "urn:example:order:A300" .
# via the schematic forward rule:
#   {
#     ex:feed ex:json ?J .
#     (?J "/orders") string:jsonPointer ?Orders .
#     ?Orders list:iterate (?OrderIndex ?OrderJson) .
#     (?OrderJson "/orderId") string:jsonPointer ?OrderId .
#     (?OrderJson "/shipTo/country") string:jsonPointer ?Country .
#     (?OrderJson "/customer") string:jsonPointer ?CustJson .
#     (?CustJson "/email") string:jsonPointer ?Email .
#     (?CustJson "/vatId") string:jsonPointer ?VatIdRaw .
#     (?OrderJson "/declared") string:jsonPointer ?Decl .
#     (?Decl "/netCents") string:jsonPointer ?NetD .
#     (?Decl "/vatCents") string:jsonPointer ?VatD .
#     (?Decl "/grossCents") string:jsonPointer ?GrossD .
#     ("urn:example:order:%s" ?OrderId) string:format ?OrderUriStr .
#     ?Order log:uri ?OrderUriStr .
#   } => {
#     ?Order a ex:Order .
#     ?Order ex:orderId ?OrderId .
#     ?Order ex:orderIndex ?OrderIndex .
#     ?Order ex:shipCountry ?Country .
#     ?Order ex:email ?Email .
#     ?Order ex:vatIdRaw ?VatIdRaw .
#     ?Order ex:declaredNetCents ?NetD .
#     ?Order ex:declaredVatCents ?VatD .
#     ?Order ex:declaredGrossCents ?GrossD .
#   } .
# with substitution (on rule variables):
#   ?Country = "NL"
#   ?CustJson = """{"email":"acct@company.nl","vatId":"NL999999999B01"}"""^^rdf:JSON
#   ?Decl = """{"netCents":3498,"vatCents":0,"grossCents":3498}"""^^rdf:JSON
#   ?Email = "acct@company.nl"
#   ?GrossD = 3498
#   ?J = """{
#     "meta~data": { "batch": "2025-12-18" },
#     "orders": [
#     {
#     "orderId": "A100",
#     "shipTo": { "country": "BE" },
#     "customer": { "email": "Ada@Example.ORG", "vatId": null },
#     "lines": [
#     { "sku": "wid-001", "qty": 2, "unitCents": 999 },
#     { "sku": "GAD-002", "qty": 1, "unitCents": 1500 }
#     ],
#     "declared": { "netCents": 3498, "vatCents": 509, "grossCents": 4007 }
#     },
#     {
#     "orderId": "A200",
#     "shipTo": { "country": "US" },
#     "customer": { "email": "bob@example.org", "vatId": null },
#     "lines": [
#     { "sku": "WID-001", "qty": 2, "unitCents": 999 },
#     { "sku": "GAD-002", "qty": 1, "unitCents": 1500 }
#     ],
#     "declared": { "netCents": 3498, "vatCents": 0, "grossCents": 3498 }
#     },
#     {
#     "orderId": "A300",
#     "shipTo": { "country": "NL" },
#     "customer": { "email": "acct@company.nl", "vatId": "NL999999999B01" },
#     "lines": [
#     { "sku": "WID-001", "qty": 2, "unitCents": 999 },
#     { "sku": "GAD-002", "qty": 1, "unitCents": 1500 }
#     ],
#     "declared": { "netCents": 3498, "vatCents": 0, "grossCents": 3498 }
#     },
#     {
#     "orderId": "A301",
#     "shipTo": { "country": "NL" },
#     "customer": { "email": "billing@company.nl", "vatId": "NL999999999B01" },
#     "lines": [
#     { "sku": "WID-001", "qty": 2, "unitCents": 999 },
#     { "sku": "GAD-002", "qty": 1, "unitCents": 1500 }
#     ],
#     "declared": { "netCents": 3498, "vatCents": 0, "grossCents": 3498 }
#     },
#     {
#     "orderId": "A400",
#     "shipTo": { "country": "BE" },
#     "customer": { "email": "ada@other.example", "vatId": null },
#     "lines": [
#     { "sku": "WID-001", "qty": 2, "unitCents": 999 },
#     { "sku": "GAD-002", "qty": 1, "unitCents": 1500 }
#     ],
#     "declared": { "netCents": 3498, "vatCents": 508, "grossCents": 4006 }
#     }
#     ]
#   }"""^^rdf:JSON
#   ?NetD = 3498
#   ?Order = <urn:example:order:A300>
#   ?OrderId = "A300"
#   ?OrderIndex = 2
#   ?OrderJson = """{"orderId":"A300","shipTo":{"country":"NL"},"customer":{"email":"acct@company.nl","vatId":"NL999999999B01"},"lines":[{"sku":"WID-001","qty":2,"unitCents":999},{"sku":"GAD-002","qty":1,"unitCents":1500}],"declared":{"netCents":3498,"vatCents":0,"grossCents":3498}}"""^^rdf:JSON
#   ?OrderUriStr = "urn:example:order:A300"
#   ?Orders = ("""{"orderId":"A100","shipTo":{"country":"BE"},"customer":{"email":"Ada@Example.ORG","vatId":null},"lines":[{"sku":"wid-001","qty":2,"unitCents":999},{"sku":"GAD-002","qty":1,"unitCents":1500}],"declared":{"netCents":3498,"vatCents":509,"grossCents":4007}}"""^^rdf:JSON """{"orderId":"A200","shipTo":{"country":"US"},"customer":{"email":"bob@example.org","vatId":null},"lines":[{"sku":"WID-001","qty":2,"unitCents":999},{"sku":"GAD-002","qty":1,"unitCents":1500}],"declared":{"netCents":3498,"vatCents":0,"grossCents":3498}}"""^^rdf:JSON """{"orderId":"A300","shipTo":{"country":"NL"},"customer":{"email":"acct@company.nl","vatId":"NL999999999B01"},"lines":[{"sku":"WID-001","qty":2,"unitCents":999},{"sku":"GAD-002","qty":1,"unitCents":1500}],"declared":{"netCents":3498,"vatCents":0,"grossCents":3498}}"""^^rdf:JSON """{"orderId":"A301","shipTo":{"country":"NL"},"customer":{"email":"billing@company.nl","vatId":"NL999999999B01"},"lines":[{"sku":"WID-001","qty":2,"unitCents":999},{"sku":"GAD-002","qty":1,"unitCents":1500}],"declared":{"netCents":3498,"vatCents":0,"grossCents":3498}}"""^^rdf:JSON """{"orderId":"A400","shipTo":{"country":"BE"},"customer":{"email":"ada@other.example","vatId":null},"lines":[{"sku":"WID-001","qty":2,"unitCents":999},{"sku":"GAD-002","qty":1,"unitCents":1500}],"declared":{"netCents":3498,"vatCents":508,"grossCents":4006}}"""^^rdf:JSON)
#   ?VatD = 0
#   ?VatIdRaw = "NL999999999B01"
# Therefore the derived triple above is entailed by the rules and facts.
# ----------------------------------------------------------------------

<urn:example:order:A300> ex:vatIdRaw "NL999999999B01" .

# ----------------------------------------------------------------------
# Proof for derived triple:
#   <urn:example:order:A300> ex:declaredNetCents 3498 .
# It holds because the following instance of the rule body is provable:
#   ex:feed ex:json """{
#     "meta~data": { "batch": "2025-12-18" },
#     "orders": [
#       {
#         "orderId": "A100",
#         "shipTo": { "country": "BE" },
#         "customer": { "email": "Ada@Example.ORG", "vatId": null },
#         "lines": [
#           { "sku": "wid-001", "qty": 2, "unitCents": 999 },
#           { "sku": "GAD-002", "qty": 1, "unitCents": 1500 }
#         ],
#         "declared": { "netCents": 3498, "vatCents": 509, "grossCents": 4007 }
#       },
#       {
#         "orderId": "A200",
#         "shipTo": { "country": "US" },
#         "customer": { "email": "bob@example.org", "vatId": null },
#         "lines": [
#           { "sku": "WID-001", "qty": 2, "unitCents": 999 },
#           { "sku": "GAD-002", "qty": 1, "unitCents": 1500 }
#         ],
#         "declared": { "netCents": 3498, "vatCents": 0, "grossCents": 3498 }
#       },
#       {
#         "orderId": "A300",
#         "shipTo": { "country": "NL" },
#         "customer": { "email": "acct@company.nl", "vatId": "NL999999999B01" },
#         "lines": [
#           { "sku": "WID-001", "qty": 2, "unitCents": 999 },
#           { "sku": "GAD-002", "qty": 1, "unitCents": 1500 }
#         ],
#         "declared": { "netCents": 3498, "vatCents": 0, "grossCents": 3498 }
#       },
#       {
#         "orderId": "A301",
#         "shipTo": { "country": "NL" },
#         "customer": { "email": "billing@company.nl", "vatId": "NL999999999B01" },
#         "lines": [
#           { "sku": "WID-001", "qty": 2, "unitCents": 999 },
#           { "sku": "GAD-002", "qty": 1, "unitCents": 1500 }
#         ],
#         "declared": { "netCents": 3498, "vatCents": 0, "grossCents": 3498 }
#       },
#       {
#         "orderId": "A400",
#         "shipTo": { "country": "BE" },
#         "customer": { "email": "ada@other.example", "vatId": null },
#         "lines": [
#           { "sku": "WID-001", "qty": 2, "unitCents": 999 },
#           { "sku": "GAD-002", "qty": 1, "unitCents": 1500 }
#         ],
#         "declared": { "netCents": 3498, "vatCents": 508, "grossCents": 4006 }
#       }
#     ]
#   }"""^^rdf:JSON .
#   ("""{
#     "meta~data": { "batch": "2025-12-18" },
#     "orders": [
#       {
#         "orderId": "A100",
#         "shipTo": { "country": "BE" },
#         "customer": { "email": "Ada@Example.ORG", "vatId": null },
#         "lines": [
#           { "sku": "wid-001", "qty": 2, "unitCents": 999 },
#           { "sku": "GAD-002", "qty": 1, "unitCents": 1500 }
#         ],
#         "declared": { "netCents": 3498, "vatCents": 509, "grossCents": 4007 }
#       },
#       {
#         "orderId": "A200",
#         "shipTo": { "country": "US" },
#         "customer": { "email": "bob@example.org", "vatId": null },
#         "lines": [
#           { "sku": "WID-001", "qty": 2, "unitCents": 999 },
#           { "sku": "GAD-002", "qty": 1, "unitCents": 1500 }
#         ],
#         "declared": { "netCents": 3498, "vatCents": 0, "grossCents": 3498 }
#       },
#       {
#         "orderId": "A300",
#         "shipTo": { "country": "NL" },
#         "customer": { "email": "acct@company.nl", "vatId": "NL999999999B01" },
#         "lines": [
#           { "sku": "WID-001", "qty": 2, "unitCents": 999 },
#           { "sku": "GAD-002", "qty": 1, "unitCents": 1500 }
#         ],
#         "declared": { "netCents": 3498, "vatCents": 0, "grossCents": 3498 }
#       },
#       {
#         "orderId": "A301",
#         "shipTo": { "country": "NL" },
#         "customer": { "email": "billing@company.nl", "vatId": "NL999999999B01" },
#         "lines": [
#           { "sku": "WID-001", "qty": 2, "unitCents": 999 },
#           { "sku": "GAD-002", "qty": 1, "unitCents": 1500 }
#         ],
#         "declared": { "netCents": 3498, "vatCents": 0, "grossCents": 3498 }
#       },
#       {
#         "orderId": "A400",
#         "shipTo": { "country": "BE" },
#         "customer": { "email": "ada@other.example", "vatId": null },
#         "lines": [
#           { "sku": "WID-001", "qty": 2, "unitCents": 999 },
#           { "sku": "GAD-002", "qty": 1, "unitCents": 1500 }
#         ],
#         "declared": { "netCents": 3498, "vatCents": 508, "grossCents": 4006 }
#       }
#     ]
#   }"""^^rdf:JSON "/orders") string:jsonPointer ("""{"orderId":"A100","shipTo":{"country":"BE"},"customer":{"email":"Ada@Example.ORG","vatId":null},"lines":[{"sku":"wid-001","qty":2,"unitCents":999},{"sku":"GAD-002","qty":1,"unitCents":1500}],"declared":{"netCents":3498,"vatCents":509,"grossCents":4007}}"""^^rdf:JSON """{"orderId":"A200","shipTo":{"country":"US"},"customer":{"email":"bob@example.org","vatId":null},"lines":[{"sku":"WID-001","qty":2,"unitCents":999},{"sku":"GAD-002","qty":1,"unitCents":1500}],"declared":{"netCents":3498,"vatCents":0,"grossCents":3498}}"""^^rdf:JSON """{"orderId":"A300","shipTo":{"country":"NL"},"customer":{"email":"acct@company.nl","vatId":"NL999999999B01"},"lines":[{"sku":"WID-001","qty":2,"unitCents":999},{"sku":"GAD-002","qty":1,"unitCents":1500}],"declared":{"netCents":3498,"vatCents":0,"grossCents":3498}}"""^^rdf:JSON """{"orderId":"A301","shipTo":{"country":"NL"},"customer":{"email":"billing@company.nl","vatId":"NL999999999B01"},"lines":[{"sku":"WID-001","qty":2,"unitCents":999},{"sku":"GAD-002","qty":1,"unitCents":1500}],"declared":{"netCents":3498,"vatCents":0,"grossCents":3498}}"""^^rdf:JSON """{"orderId":"A400","shipTo":{"country":"BE"},"customer":{"email":"ada@other.example","vatId":null},"lines":[{"sku":"WID-001","qty":2,"unitCents":999},{"sku":"GAD-002","qty":1,"unitCents":1500}],"declared":{"netCents":3498,"vatCents":508,"grossCents":4006}}"""^^rdf:JSON) .
#   ("""{"orderId":"A100","shipTo":{"country":"BE"},"customer":{"email":"Ada@Example.ORG","vatId":null},"lines":[{"sku":"wid-001","qty":2,"unitCents":999},{"sku":"GAD-002","qty":1,"unitCents":1500}],"declared":{"netCents":3498,"vatCents":509,"grossCents":4007}}"""^^rdf:JSON """{"orderId":"A200","shipTo":{"country":"US"},"customer":{"email":"bob@example.org","vatId":null},"lines":[{"sku":"WID-001","qty":2,"unitCents":999},{"sku":"GAD-002","qty":1,"unitCents":1500}],"declared":{"netCents":3498,"vatCents":0,"grossCents":3498}}"""^^rdf:JSON """{"orderId":"A300","shipTo":{"country":"NL"},"customer":{"email":"acct@company.nl","vatId":"NL999999999B01"},"lines":[{"sku":"WID-001","qty":2,"unitCents":999},{"sku":"GAD-002","qty":1,"unitCents":1500}],"declared":{"netCents":3498,"vatCents":0,"grossCents":3498}}"""^^rdf:JSON """{"orderId":"A301","shipTo":{"country":"NL"},"customer":{"email":"billing@company.nl","vatId":"NL999999999B01"},"lines":[{"sku":"WID-001","qty":2,"unitCents":999},{"sku":"GAD-002","qty":1,"unitCents":1500}],"declared":{"netCents":3498,"vatCents":0,"grossCents":3498}}"""^^rdf:JSON """{"orderId":"A400","shipTo":{"country":"BE"},"customer":{"email":"ada@other.example","vatId":null},"lines":[{"sku":"WID-001","qty":2,"unitCents":999},{"sku":"GAD-002","qty":1,"unitCents":1500}],"declared":{"netCents":3498,"vatCents":508,"grossCents":4006}}"""^^rdf:JSON) list:iterate (2 """{"orderId":"A300","shipTo":{"country":"NL"},"customer":{"email":"acct@company.nl","vatId":"NL999999999B01"},"lines":[{"sku":"WID-001","qty":2,"unitCents":999},{"sku":"GAD-002","qty":1,"unitCents":1500}],"declared":{"netCents":3498,"vatCents":0,"grossCents":3498}}"""^^rdf:JSON) .
#   ("""{"orderId":"A300","shipTo":{"country":"NL"},"customer":{"email":"acct@company.nl","vatId":"NL999999999B01"},"lines":[{"sku":"WID-001","qty":2,"unitCents":999},{"sku":"GAD-002","qty":1,"unitCents":1500}],"declared":{"netCents":3498,"vatCents":0,"grossCents":3498}}"""^^rdf:JSON "/orderId") string:jsonPointer "A300" .
#   ("""{"orderId":"A300","shipTo":{"country":"NL"},"customer":{"email":"acct@company.nl","vatId":"NL999999999B01"},"lines":[{"sku":"WID-001","qty":2,"unitCents":999},{"sku":"GAD-002","qty":1,"unitCents":1500}],"declared":{"netCents":3498,"vatCents":0,"grossCents":3498}}"""^^rdf:JSON "/shipTo/country") string:jsonPointer "NL" .
#   ("""{"orderId":"A300","shipTo":{"country":"NL"},"customer":{"email":"acct@company.nl","vatId":"NL999999999B01"},"lines":[{"sku":"WID-001","qty":2,"unitCents":999},{"sku":"GAD-002","qty":1,"unitCents":1500}],"declared":{"netCents":3498,"vatCents":0,"grossCents":3498}}"""^^rdf:JSON "/customer") string:jsonPointer """{"email":"acct@company.nl","vatId":"NL999999999B01"}"""^^rdf:JSON .
#   ("""{"email":"acct@company.nl","vatId":"NL999999999B01"}"""^^rdf:JSON "/email") string:jsonPointer "acct@company.nl" .
#   ("""{"email":"acct@company.nl","vatId":"NL999999999B01"}"""^^rdf:JSON "/vatId") string:jsonPointer "NL999999999B01" .
#   ("""{"orderId":"A300","shipTo":{"country":"NL"},"customer":{"email":"acct@company.nl","vatId":"NL999999999B01"},"lines":[{"sku":"WID-001","qty":2,"unitCents":999},{"sku":"GAD-002","qty":1,"unitCents":1500}],"declared":{"netCents":3498,"vatCents":0,"grossCents":3498}}"""^^rdf:JSON "/declared") string:jsonPointer """{"netCents":3498,"vatCents":0,"grossCents":3498}"""^^rdf:JSON .
#   ("""{"netCents":3498,"vatCents":0,"grossCents":3498}"""^^rdf:JSON "/netCents") string:jsonPointer 3498 .
#   ("""{"netCents":3498,"vatCents":0,"grossCents":3498}"""^^rdf:JSON "/vatCents") string:jsonPointer 0 .
#   ("""{"netCents":3498,"vatCents":0,"grossCents":3498}"""^^rdf:JSON "/grossCents") string:jsonPointer 3498 .
#   ("urn:example:order:%s" "A300") string:format "urn:example:order:A300" .
#   <urn:example:order:A300> log:uri "urn:example:order:A300" .
# via the schematic forward rule:
#   {
#     ex:feed ex:json ?J .
#     (?J "/orders") string:jsonPointer ?Orders .
#     ?Orders list:iterate (?OrderIndex ?OrderJson) .
#     (?OrderJson "/orderId") string:jsonPointer ?OrderId .
#     (?OrderJson "/shipTo/country") string:jsonPointer ?Country .
#     (?OrderJson "/customer") string:jsonPointer ?CustJson .
#     (?CustJson "/email") string:jsonPointer ?Email .
#     (?CustJson "/vatId") string:jsonPointer ?VatIdRaw .
#     (?OrderJson "/declared") string:jsonPointer ?Decl .
#     (?Decl "/netCents") string:jsonPointer ?NetD .
#     (?Decl "/vatCents") string:jsonPointer ?VatD .
#     (?Decl "/grossCents") string:jsonPointer ?GrossD .
#     ("urn:example:order:%s" ?OrderId) string:format ?OrderUriStr .
#     ?Order log:uri ?OrderUriStr .
#   } => {
#     ?Order a ex:Order .
#     ?Order ex:orderId ?OrderId .
#     ?Order ex:orderIndex ?OrderIndex .
#     ?Order ex:shipCountry ?Country .
#     ?Order ex:email ?Email .
#     ?Order ex:vatIdRaw ?VatIdRaw .
#     ?Order ex:declaredNetCents ?NetD .
#     ?Order ex:declaredVatCents ?VatD .
#     ?Order ex:declaredGrossCents ?GrossD .
#   } .
# with substitution (on rule variables):
#   ?Country = "NL"
#   ?CustJson = """{"email":"acct@company.nl","vatId":"NL999999999B01"}"""^^rdf:JSON
#   ?Decl = """{"netCents":3498,"vatCents":0,"grossCents":3498}"""^^rdf:JSON
#   ?Email = "acct@company.nl"
#   ?GrossD = 3498
#   ?J = """{
#     "meta~data": { "batch": "2025-12-18" },
#     "orders": [
#     {
#     "orderId": "A100",
#     "shipTo": { "country": "BE" },
#     "customer": { "email": "Ada@Example.ORG", "vatId": null },
#     "lines": [
#     { "sku": "wid-001", "qty": 2, "unitCents": 999 },
#     { "sku": "GAD-002", "qty": 1, "unitCents": 1500 }
#     ],
#     "declared": { "netCents": 3498, "vatCents": 509, "grossCents": 4007 }
#     },
#     {
#     "orderId": "A200",
#     "shipTo": { "country": "US" },
#     "customer": { "email": "bob@example.org", "vatId": null },
#     "lines": [
#     { "sku": "WID-001", "qty": 2, "unitCents": 999 },
#     { "sku": "GAD-002", "qty": 1, "unitCents": 1500 }
#     ],
#     "declared": { "netCents": 3498, "vatCents": 0, "grossCents": 3498 }
#     },
#     {
#     "orderId": "A300",
#     "shipTo": { "country": "NL" },
#     "customer": { "email": "acct@company.nl", "vatId": "NL999999999B01" },
#     "lines": [
#     { "sku": "WID-001", "qty": 2, "unitCents": 999 },
#     { "sku": "GAD-002", "qty": 1, "unitCents": 1500 }
#     ],
#     "declared": { "netCents": 3498, "vatCents": 0, "grossCents": 3498 }
#     },
#     {
#     "orderId": "A301",
#     "shipTo": { "country": "NL" },
#     "customer": { "email": "billing@company.nl", "vatId": "NL999999999B01" },
#     "lines": [
#     { "sku": "WID-001", "qty": 2, "unitCents": 999 },
#     { "sku": "GAD-002", "qty": 1, "unitCents": 1500 }
#     ],
#     "declared": { "netCents": 3498, "vatCents": 0, "grossCents": 3498 }
#     },
#     {
#     "orderId": "A400",
#     "shipTo": { "country": "BE" },
#     "customer": { "email": "ada@other.example", "vatId": null },
#     "lines": [
#     { "sku": "WID-001", "qty": 2, "unitCents": 999 },
#     { "sku": "GAD-002", "qty": 1, "unitCents": 1500 }
#     ],
#     "declared": { "netCents": 3498, "vatCents": 508, "grossCents": 4006 }
#     }
#     ]
#   }"""^^rdf:JSON
#   ?NetD = 3498
#   ?Order = <urn:example:order:A300>
#   ?OrderId = "A300"
#   ?OrderIndex = 2
#   ?OrderJson = """{"orderId":"A300","shipTo":{"country":"NL"},"customer":{"email":"acct@company.nl","vatId":"NL999999999B01"},"lines":[{"sku":"WID-001","qty":2,"unitCents":999},{"sku":"GAD-002","qty":1,"unitCents":1500}],"declared":{"netCents":3498,"vatCents":0,"grossCents":3498}}"""^^rdf:JSON
#   ?OrderUriStr = "urn:example:order:A300"
#   ?Orders = ("""{"orderId":"A100","shipTo":{"country":"BE"},"customer":{"email":"Ada@Example.ORG","vatId":null},"lines":[{"sku":"wid-001","qty":2,"unitCents":999},{"sku":"GAD-002","qty":1,"unitCents":1500}],"declared":{"netCents":3498,"vatCents":509,"grossCents":4007}}"""^^rdf:JSON """{"orderId":"A200","shipTo":{"country":"US"},"customer":{"email":"bob@example.org","vatId":null},"lines":[{"sku":"WID-001","qty":2,"unitCents":999},{"sku":"GAD-002","qty":1,"unitCents":1500}],"declared":{"netCents":3498,"vatCents":0,"grossCents":3498}}"""^^rdf:JSON """{"orderId":"A300","shipTo":{"country":"NL"},"customer":{"email":"acct@company.nl","vatId":"NL999999999B01"},"lines":[{"sku":"WID-001","qty":2,"unitCents":999},{"sku":"GAD-002","qty":1,"unitCents":1500}],"declared":{"netCents":3498,"vatCents":0,"grossCents":3498}}"""^^rdf:JSON """{"orderId":"A301","shipTo":{"country":"NL"},"customer":{"email":"billing@company.nl","vatId":"NL999999999B01"},"lines":[{"sku":"WID-001","qty":2,"unitCents":999},{"sku":"GAD-002","qty":1,"unitCents":1500}],"declared":{"netCents":3498,"vatCents":0,"grossCents":3498}}"""^^rdf:JSON """{"orderId":"A400","shipTo":{"country":"BE"},"customer":{"email":"ada@other.example","vatId":null},"lines":[{"sku":"WID-001","qty":2,"unitCents":999},{"sku":"GAD-002","qty":1,"unitCents":1500}],"declared":{"netCents":3498,"vatCents":508,"grossCents":4006}}"""^^rdf:JSON)
#   ?VatD = 0
#   ?VatIdRaw = "NL999999999B01"
# Therefore the derived triple above is entailed by the rules and facts.
# ----------------------------------------------------------------------

<urn:example:order:A300> ex:declaredNetCents 3498 .

# ----------------------------------------------------------------------
# Proof for derived triple:
#   <urn:example:order:A300> ex:declaredVatCents 0 .
# It holds because the following instance of the rule body is provable:
#   ex:feed ex:json """{
#     "meta~data": { "batch": "2025-12-18" },
#     "orders": [
#       {
#         "orderId": "A100",
#         "shipTo": { "country": "BE" },
#         "customer": { "email": "Ada@Example.ORG", "vatId": null },
#         "lines": [
#           { "sku": "wid-001", "qty": 2, "unitCents": 999 },
#           { "sku": "GAD-002", "qty": 1, "unitCents": 1500 }
#         ],
#         "declared": { "netCents": 3498, "vatCents": 509, "grossCents": 4007 }
#       },
#       {
#         "orderId": "A200",
#         "shipTo": { "country": "US" },
#         "customer": { "email": "bob@example.org", "vatId": null },
#         "lines": [
#           { "sku": "WID-001", "qty": 2, "unitCents": 999 },
#           { "sku": "GAD-002", "qty": 1, "unitCents": 1500 }
#         ],
#         "declared": { "netCents": 3498, "vatCents": 0, "grossCents": 3498 }
#       },
#       {
#         "orderId": "A300",
#         "shipTo": { "country": "NL" },
#         "customer": { "email": "acct@company.nl", "vatId": "NL999999999B01" },
#         "lines": [
#           { "sku": "WID-001", "qty": 2, "unitCents": 999 },
#           { "sku": "GAD-002", "qty": 1, "unitCents": 1500 }
#         ],
#         "declared": { "netCents": 3498, "vatCents": 0, "grossCents": 3498 }
#       },
#       {
#         "orderId": "A301",
#         "shipTo": { "country": "NL" },
#         "customer": { "email": "billing@company.nl", "vatId": "NL999999999B01" },
#         "lines": [
#           { "sku": "WID-001", "qty": 2, "unitCents": 999 },
#           { "sku": "GAD-002", "qty": 1, "unitCents": 1500 }
#         ],
#         "declared": { "netCents": 3498, "vatCents": 0, "grossCents": 3498 }
#       },
#       {
#         "orderId": "A400",
#         "shipTo": { "country": "BE" },
#         "customer": { "email": "ada@other.example", "vatId": null },
#         "lines": [
#           { "sku": "WID-001", "qty": 2, "unitCents": 999 },
#           { "sku": "GAD-002", "qty": 1, "unitCents": 1500 }
#         ],
#         "declared": { "netCents": 3498, "vatCents": 508, "grossCents": 4006 }
#       }
#     ]
#   }"""^^rdf:JSON .
#   ("""{
#     "meta~data": { "batch": "2025-12-18" },
#     "orders": [
#       {
#         "orderId": "A100",
#         "shipTo": { "country": "BE" },
#         "customer": { "email": "Ada@Example.ORG", "vatId": null },
#         "lines": [
#           { "sku": "wid-001", "qty": 2, "unitCents": 999 },
#           { "sku": "GAD-002", "qty": 1, "unitCents": 1500 }
#         ],
#         "declared": { "netCents": 3498, "vatCents": 509, "grossCents": 4007 }
#       },
#       {
#         "orderId": "A200",
#         "shipTo": { "country": "US" },
#         "customer": { "email": "bob@example.org", "vatId": null },
#         "lines": [
#           { "sku": "WID-001", "qty": 2, "unitCents": 999 },
#           { "sku": "GAD-002", "qty": 1, "unitCents": 1500 }
#         ],
#         "declared": { "netCents": 3498, "vatCents": 0, "grossCents": 3498 }
#       },
#       {
#         "orderId": "A300",
#         "shipTo": { "country": "NL" },
#         "customer": { "email": "acct@company.nl", "vatId": "NL999999999B01" },
#         "lines": [
#           { "sku": "WID-001", "qty": 2, "unitCents": 999 },
#           { "sku": "GAD-002", "qty": 1, "unitCents": 1500 }
#         ],
#         "declared": { "netCents": 3498, "vatCents": 0, "grossCents": 3498 }
#       },
#       {
#         "orderId": "A301",
#         "shipTo": { "country": "NL" },
#         "customer": { "email": "billing@company.nl", "vatId": "NL999999999B01" },
#         "lines": [
#           { "sku": "WID-001", "qty": 2, "unitCents": 999 },
#           { "sku": "GAD-002", "qty": 1, "unitCents": 1500 }
#         ],
#         "declared": { "netCents": 3498, "vatCents": 0, "grossCents": 3498 }
#       },
#       {
#         "orderId": "A400",
#         "shipTo": { "country": "BE" },
#         "customer": { "email": "ada@other.example", "vatId": null },
#         "lines": [
#           { "sku": "WID-001", "qty": 2, "unitCents": 999 },
#           { "sku": "GAD-002", "qty": 1, "unitCents": 1500 }
#         ],
#         "declared": { "netCents": 3498, "vatCents": 508, "grossCents": 4006 }
#       }
#     ]
#   }"""^^rdf:JSON "/orders") string:jsonPointer ("""{"orderId":"A100","shipTo":{"country":"BE"},"customer":{"email":"Ada@Example.ORG","vatId":null},"lines":[{"sku":"wid-001","qty":2,"unitCents":999},{"sku":"GAD-002","qty":1,"unitCents":1500}],"declared":{"netCents":3498,"vatCents":509,"grossCents":4007}}"""^^rdf:JSON """{"orderId":"A200","shipTo":{"country":"US"},"customer":{"email":"bob@example.org","vatId":null},"lines":[{"sku":"WID-001","qty":2,"unitCents":999},{"sku":"GAD-002","qty":1,"unitCents":1500}],"declared":{"netCents":3498,"vatCents":0,"grossCents":3498}}"""^^rdf:JSON """{"orderId":"A300","shipTo":{"country":"NL"},"customer":{"email":"acct@company.nl","vatId":"NL999999999B01"},"lines":[{"sku":"WID-001","qty":2,"unitCents":999},{"sku":"GAD-002","qty":1,"unitCents":1500}],"declared":{"netCents":3498,"vatCents":0,"grossCents":3498}}"""^^rdf:JSON """{"orderId":"A301","shipTo":{"country":"NL"},"customer":{"email":"billing@company.nl","vatId":"NL999999999B01"},"lines":[{"sku":"WID-001","qty":2,"unitCents":999},{"sku":"GAD-002","qty":1,"unitCents":1500}],"declared":{"netCents":3498,"vatCents":0,"grossCents":3498}}"""^^rdf:JSON """{"orderId":"A400","shipTo":{"country":"BE"},"customer":{"email":"ada@other.example","vatId":null},"lines":[{"sku":"WID-001","qty":2,"unitCents":999},{"sku":"GAD-002","qty":1,"unitCents":1500}],"declared":{"netCents":3498,"vatCents":508,"grossCents":4006}}"""^^rdf:JSON) .
#   ("""{"orderId":"A100","shipTo":{"country":"BE"},"customer":{"email":"Ada@Example.ORG","vatId":null},"lines":[{"sku":"wid-001","qty":2,"unitCents":999},{"sku":"GAD-002","qty":1,"unitCents":1500}],"declared":{"netCents":3498,"vatCents":509,"grossCents":4007}}"""^^rdf:JSON """{"orderId":"A200","shipTo":{"country":"US"},"customer":{"email":"bob@example.org","vatId":null},"lines":[{"sku":"WID-001","qty":2,"unitCents":999},{"sku":"GAD-002","qty":1,"unitCents":1500}],"declared":{"netCents":3498,"vatCents":0,"grossCents":3498}}"""^^rdf:JSON """{"orderId":"A300","shipTo":{"country":"NL"},"customer":{"email":"acct@company.nl","vatId":"NL999999999B01"},"lines":[{"sku":"WID-001","qty":2,"unitCents":999},{"sku":"GAD-002","qty":1,"unitCents":1500}],"declared":{"netCents":3498,"vatCents":0,"grossCents":3498}}"""^^rdf:JSON """{"orderId":"A301","shipTo":{"country":"NL"},"customer":{"email":"billing@company.nl","vatId":"NL999999999B01"},"lines":[{"sku":"WID-001","qty":2,"unitCents":999},{"sku":"GAD-002","qty":1,"unitCents":1500}],"declared":{"netCents":3498,"vatCents":0,"grossCents":3498}}"""^^rdf:JSON """{"orderId":"A400","shipTo":{"country":"BE"},"customer":{"email":"ada@other.example","vatId":null},"lines":[{"sku":"WID-001","qty":2,"unitCents":999},{"sku":"GAD-002","qty":1,"unitCents":1500}],"declared":{"netCents":3498,"vatCents":508,"grossCents":4006}}"""^^rdf:JSON) list:iterate (2 """{"orderId":"A300","shipTo":{"country":"NL"},"customer":{"email":"acct@company.nl","vatId":"NL999999999B01"},"lines":[{"sku":"WID-001","qty":2,"unitCents":999},{"sku":"GAD-002","qty":1,"unitCents":1500}],"declared":{"netCents":3498,"vatCents":0,"grossCents":3498}}"""^^rdf:JSON) .
#   ("""{"orderId":"A300","shipTo":{"country":"NL"},"customer":{"email":"acct@company.nl","vatId":"NL999999999B01"},"lines":[{"sku":"WID-001","qty":2,"unitCents":999},{"sku":"GAD-002","qty":1,"unitCents":1500}],"declared":{"netCents":3498,"vatCents":0,"grossCents":3498}}"""^^rdf:JSON "/orderId") string:jsonPointer "A300" .
#   ("""{"orderId":"A300","shipTo":{"country":"NL"},"customer":{"email":"acct@company.nl","vatId":"NL999999999B01"},"lines":[{"sku":"WID-001","qty":2,"unitCents":999},{"sku":"GAD-002","qty":1,"unitCents":1500}],"declared":{"netCents":3498,"vatCents":0,"grossCents":3498}}"""^^rdf:JSON "/shipTo/country") string:jsonPointer "NL" .
#   ("""{"orderId":"A300","shipTo":{"country":"NL"},"customer":{"email":"acct@company.nl","vatId":"NL999999999B01"},"lines":[{"sku":"WID-001","qty":2,"unitCents":999},{"sku":"GAD-002","qty":1,"unitCents":1500}],"declared":{"netCents":3498,"vatCents":0,"grossCents":3498}}"""^^rdf:JSON "/customer") string:jsonPointer """{"email":"acct@company.nl","vatId":"NL999999999B01"}"""^^rdf:JSON .
#   ("""{"email":"acct@company.nl","vatId":"NL999999999B01"}"""^^rdf:JSON "/email") string:jsonPointer "acct@company.nl" .
#   ("""{"email":"acct@company.nl","vatId":"NL999999999B01"}"""^^rdf:JSON "/vatId") string:jsonPointer "NL999999999B01" .
#   ("""{"orderId":"A300","shipTo":{"country":"NL"},"customer":{"email":"acct@company.nl","vatId":"NL999999999B01"},"lines":[{"sku":"WID-001","qty":2,"unitCents":999},{"sku":"GAD-002","qty":1,"unitCents":1500}],"declared":{"netCents":3498,"vatCents":0,"grossCents":3498}}"""^^rdf:JSON "/declared") string:jsonPointer """{"netCents":3498,"vatCents":0,"grossCents":3498}"""^^rdf:JSON .
#   ("""{"netCents":3498,"vatCents":0,"grossCents":3498}"""^^rdf:JSON "/netCents") string:jsonPointer 3498 .
#   ("""{"netCents":3498,"vatCents":0,"grossCents":3498}"""^^rdf:JSON "/vatCents") string:jsonPointer 0 .
#   ("""{"netCents":3498,"vatCents":0,"grossCents":3498}"""^^rdf:JSON "/grossCents") string:jsonPointer 3498 .
#   ("urn:example:order:%s" "A300") string:format "urn:example:order:A300" .
#   <urn:example:order:A300> log:uri "urn:example:order:A300" .
# via the schematic forward rule:
#   {
#     ex:feed ex:json ?J .
#     (?J "/orders") string:jsonPointer ?Orders .
#     ?Orders list:iterate (?OrderIndex ?OrderJson) .
#     (?OrderJson "/orderId") string:jsonPointer ?OrderId .
#     (?OrderJson "/shipTo/country") string:jsonPointer ?Country .
#     (?OrderJson "/customer") string:jsonPointer ?CustJson .
#     (?CustJson "/email") string:jsonPointer ?Email .
#     (?CustJson "/vatId") string:jsonPointer ?VatIdRaw .
#     (?OrderJson "/declared") string:jsonPointer ?Decl .
#     (?Decl "/netCents") string:jsonPointer ?NetD .
#     (?Decl "/vatCents") string:jsonPointer ?VatD .
#     (?Decl "/grossCents") string:jsonPointer ?GrossD .
#     ("urn:example:order:%s" ?OrderId) string:format ?OrderUriStr .
#     ?Order log:uri ?OrderUriStr .
#   } => {
#     ?Order a ex:Order .
#     ?Order ex:orderId ?OrderId .
#     ?Order ex:orderIndex ?OrderIndex .
#     ?Order ex:shipCountry ?Country .
#     ?Order ex:email ?Email .
#     ?Order ex:vatIdRaw ?VatIdRaw .
#     ?Order ex:declaredNetCents ?NetD .
#     ?Order ex:declaredVatCents ?VatD .
#     ?Order ex:declaredGrossCents ?GrossD .
#   } .
# with substitution (on rule variables):
#   ?Country = "NL"
#   ?CustJson = """{"email":"acct@company.nl","vatId":"NL999999999B01"}"""^^rdf:JSON
#   ?Decl = """{"netCents":3498,"vatCents":0,"grossCents":3498}"""^^rdf:JSON
#   ?Email = "acct@company.nl"
#   ?GrossD = 3498
#   ?J = """{
#     "meta~data": { "batch": "2025-12-18" },
#     "orders": [
#     {
#     "orderId": "A100",
#     "shipTo": { "country": "BE" },
#     "customer": { "email": "Ada@Example.ORG", "vatId": null },
#     "lines": [
#     { "sku": "wid-001", "qty": 2, "unitCents": 999 },
#     { "sku": "GAD-002", "qty": 1, "unitCents": 1500 }
#     ],
#     "declared": { "netCents": 3498, "vatCents": 509, "grossCents": 4007 }
#     },
#     {
#     "orderId": "A200",
#     "shipTo": { "country": "US" },
#     "customer": { "email": "bob@example.org", "vatId": null },
#     "lines": [
#     { "sku": "WID-001", "qty": 2, "unitCents": 999 },
#     { "sku": "GAD-002", "qty": 1, "unitCents": 1500 }
#     ],
#     "declared": { "netCents": 3498, "vatCents": 0, "grossCents": 3498 }
#     },
#     {
#     "orderId": "A300",
#     "shipTo": { "country": "NL" },
#     "customer": { "email": "acct@company.nl", "vatId": "NL999999999B01" },
#     "lines": [
#     { "sku": "WID-001", "qty": 2, "unitCents": 999 },
#     { "sku": "GAD-002", "qty": 1, "unitCents": 1500 }
#     ],
#     "declared": { "netCents": 3498, "vatCents": 0, "grossCents": 3498 }
#     },
#     {
#     "orderId": "A301",
#     "shipTo": { "country": "NL" },
#     "customer": { "email": "billing@company.nl", "vatId": "NL999999999B01" },
#     "lines": [
#     { "sku": "WID-001", "qty": 2, "unitCents": 999 },
#     { "sku": "GAD-002", "qty": 1, "unitCents": 1500 }
#     ],
#     "declared": { "netCents": 3498, "vatCents": 0, "grossCents": 3498 }
#     },
#     {
#     "orderId": "A400",
#     "shipTo": { "country": "BE" },
#     "customer": { "email": "ada@other.example", "vatId": null },
#     "lines": [
#     { "sku": "WID-001", "qty": 2, "unitCents": 999 },
#     { "sku": "GAD-002", "qty": 1, "unitCents": 1500 }
#     ],
#     "declared": { "netCents": 3498, "vatCents": 508, "grossCents": 4006 }
#     }
#     ]
#   }"""^^rdf:JSON
#   ?NetD = 3498
#   ?Order = <urn:example:order:A300>
#   ?OrderId = "A300"
#   ?OrderIndex = 2
#   ?OrderJson = """{"orderId":"A300","shipTo":{"country":"NL"},"customer":{"email":"acct@company.nl","vatId":"NL999999999B01"},"lines":[{"sku":"WID-001","qty":2,"unitCents":999},{"sku":"GAD-002","qty":1,"unitCents":1500}],"declared":{"netCents":3498,"vatCents":0,"grossCents":3498}}"""^^rdf:JSON
#   ?OrderUriStr = "urn:example:order:A300"
#   ?Orders = ("""{"orderId":"A100","shipTo":{"country":"BE"},"customer":{"email":"Ada@Example.ORG","vatId":null},"lines":[{"sku":"wid-001","qty":2,"unitCents":999},{"sku":"GAD-002","qty":1,"unitCents":1500}],"declared":{"netCents":3498,"vatCents":509,"grossCents":4007}}"""^^rdf:JSON """{"orderId":"A200","shipTo":{"country":"US"},"customer":{"email":"bob@example.org","vatId":null},"lines":[{"sku":"WID-001","qty":2,"unitCents":999},{"sku":"GAD-002","qty":1,"unitCents":1500}],"declared":{"netCents":3498,"vatCents":0,"grossCents":3498}}"""^^rdf:JSON """{"orderId":"A300","shipTo":{"country":"NL"},"customer":{"email":"acct@company.nl","vatId":"NL999999999B01"},"lines":[{"sku":"WID-001","qty":2,"unitCents":999},{"sku":"GAD-002","qty":1,"unitCents":1500}],"declared":{"netCents":3498,"vatCents":0,"grossCents":3498}}"""^^rdf:JSON """{"orderId":"A301","shipTo":{"country":"NL"},"customer":{"email":"billing@company.nl","vatId":"NL999999999B01"},"lines":[{"sku":"WID-001","qty":2,"unitCents":999},{"sku":"GAD-002","qty":1,"unitCents":1500}],"declared":{"netCents":3498,"vatCents":0,"grossCents":3498}}"""^^rdf:JSON """{"orderId":"A400","shipTo":{"country":"BE"},"customer":{"email":"ada@other.example","vatId":null},"lines":[{"sku":"WID-001","qty":2,"unitCents":999},{"sku":"GAD-002","qty":1,"unitCents":1500}],"declared":{"netCents":3498,"vatCents":508,"grossCents":4006}}"""^^rdf:JSON)
#   ?VatD = 0
#   ?VatIdRaw = "NL999999999B01"
# Therefore the derived triple above is entailed by the rules and facts.
# ----------------------------------------------------------------------

<urn:example:order:A300> ex:declaredVatCents 0 .

# ----------------------------------------------------------------------
# Proof for derived triple:
#   <urn:example:order:A300> ex:declaredGrossCents 3498 .
# It holds because the following instance of the rule body is provable:
#   ex:feed ex:json """{
#     "meta~data": { "batch": "2025-12-18" },
#     "orders": [
#       {
#         "orderId": "A100",
#         "shipTo": { "country": "BE" },
#         "customer": { "email": "Ada@Example.ORG", "vatId": null },
#         "lines": [
#           { "sku": "wid-001", "qty": 2, "unitCents": 999 },
#           { "sku": "GAD-002", "qty": 1, "unitCents": 1500 }
#         ],
#         "declared": { "netCents": 3498, "vatCents": 509, "grossCents": 4007 }
#       },
#       {
#         "orderId": "A200",
#         "shipTo": { "country": "US" },
#         "customer": { "email": "bob@example.org", "vatId": null },
#         "lines": [
#           { "sku": "WID-001", "qty": 2, "unitCents": 999 },
#           { "sku": "GAD-002", "qty": 1, "unitCents": 1500 }
#         ],
#         "declared": { "netCents": 3498, "vatCents": 0, "grossCents": 3498 }
#       },
#       {
#         "orderId": "A300",
#         "shipTo": { "country": "NL" },
#         "customer": { "email": "acct@company.nl", "vatId": "NL999999999B01" },
#         "lines": [
#           { "sku": "WID-001", "qty": 2, "unitCents": 999 },
#           { "sku": "GAD-002", "qty": 1, "unitCents": 1500 }
#         ],
#         "declared": { "netCents": 3498, "vatCents": 0, "grossCents": 3498 }
#       },
#       {
#         "orderId": "A301",
#         "shipTo": { "country": "NL" },
#         "customer": { "email": "billing@company.nl", "vatId": "NL999999999B01" },
#         "lines": [
#           { "sku": "WID-001", "qty": 2, "unitCents": 999 },
#           { "sku": "GAD-002", "qty": 1, "unitCents": 1500 }
#         ],
#         "declared": { "netCents": 3498, "vatCents": 0, "grossCents": 3498 }
#       },
#       {
#         "orderId": "A400",
#         "shipTo": { "country": "BE" },
#         "customer": { "email": "ada@other.example", "vatId": null },
#         "lines": [
#           { "sku": "WID-001", "qty": 2, "unitCents": 999 },
#           { "sku": "GAD-002", "qty": 1, "unitCents": 1500 }
#         ],
#         "declared": { "netCents": 3498, "vatCents": 508, "grossCents": 4006 }
#       }
#     ]
#   }"""^^rdf:JSON .
#   ("""{
#     "meta~data": { "batch": "2025-12-18" },
#     "orders": [
#       {
#         "orderId": "A100",
#         "shipTo": { "country": "BE" },
#         "customer": { "email": "Ada@Example.ORG", "vatId": null },
#         "lines": [
#           { "sku": "wid-001", "qty": 2, "unitCents": 999 },
#           { "sku": "GAD-002", "qty": 1, "unitCents": 1500 }
#         ],
#         "declared": { "netCents": 3498, "vatCents": 509, "grossCents": 4007 }
#       },
#       {
#         "orderId": "A200",
#         "shipTo": { "country": "US" },
#         "customer": { "email": "bob@example.org", "vatId": null },
#         "lines": [
#           { "sku": "WID-001", "qty": 2, "unitCents": 999 },
#           { "sku": "GAD-002", "qty": 1, "unitCents": 1500 }
#         ],
#         "declared": { "netCents": 3498, "vatCents": 0, "grossCents": 3498 }
#       },
#       {
#         "orderId": "A300",
#         "shipTo": { "country": "NL" },
#         "customer": { "email": "acct@company.nl", "vatId": "NL999999999B01" },
#         "lines": [
#           { "sku": "WID-001", "qty": 2, "unitCents": 999 },
#           { "sku": "GAD-002", "qty": 1, "unitCents": 1500 }
#         ],
#         "declared": { "netCents": 3498, "vatCents": 0, "grossCents": 3498 }
#       },
#       {
#         "orderId": "A301",
#         "shipTo": { "country": "NL" },
#         "customer": { "email": "billing@company.nl", "vatId": "NL999999999B01" },
#         "lines": [
#           { "sku": "WID-001", "qty": 2, "unitCents": 999 },
#           { "sku": "GAD-002", "qty": 1, "unitCents": 1500 }
#         ],
#         "declared": { "netCents": 3498, "vatCents": 0, "grossCents": 3498 }
#       },
#       {
#         "orderId": "A400",
#         "shipTo": { "country": "BE" },
#         "customer": { "email": "ada@other.example", "vatId": null },
#         "lines": [
#           { "sku": "WID-001", "qty": 2, "unitCents": 999 },
#           { "sku": "GAD-002", "qty": 1, "unitCents": 1500 }
#         ],
#         "declared": { "netCents": 3498, "vatCents": 508, "grossCents": 4006 }
#       }
#     ]
#   }"""^^rdf:JSON "/orders") string:jsonPointer ("""{"orderId":"A100","shipTo":{"country":"BE"},"customer":{"email":"Ada@Example.ORG","vatId":null},"lines":[{"sku":"wid-001","qty":2,"unitCents":999},{"sku":"GAD-002","qty":1,"unitCents":1500}],"declared":{"netCents":3498,"vatCents":509,"grossCents":4007}}"""^^rdf:JSON """{"orderId":"A200","shipTo":{"country":"US"},"customer":{"email":"bob@example.org","vatId":null},"lines":[{"sku":"WID-001","qty":2,"unitCents":999},{"sku":"GAD-002","qty":1,"unitCents":1500}],"declared":{"netCents":3498,"vatCents":0,"grossCents":3498}}"""^^rdf:JSON """{"orderId":"A300","shipTo":{"country":"NL"},"customer":{"email":"acct@company.nl","vatId":"NL999999999B01"},"lines":[{"sku":"WID-001","qty":2,"unitCents":999},{"sku":"GAD-002","qty":1,"unitCents":1500}],"declared":{"netCents":3498,"vatCents":0,"grossCents":3498}}"""^^rdf:JSON """{"orderId":"A301","shipTo":{"country":"NL"},"customer":{"email":"billing@company.nl","vatId":"NL999999999B01"},"lines":[{"sku":"WID-001","qty":2,"unitCents":999},{"sku":"GAD-002","qty":1,"unitCents":1500}],"declared":{"netCents":3498,"vatCents":0,"grossCents":3498}}"""^^rdf:JSON """{"orderId":"A400","shipTo":{"country":"BE"},"customer":{"email":"ada@other.example","vatId":null},"lines":[{"sku":"WID-001","qty":2,"unitCents":999},{"sku":"GAD-002","qty":1,"unitCents":1500}],"declared":{"netCents":3498,"vatCents":508,"grossCents":4006}}"""^^rdf:JSON) .
#   ("""{"orderId":"A100","shipTo":{"country":"BE"},"customer":{"email":"Ada@Example.ORG","vatId":null},"lines":[{"sku":"wid-001","qty":2,"unitCents":999},{"sku":"GAD-002","qty":1,"unitCents":1500}],"declared":{"netCents":3498,"vatCents":509,"grossCents":4007}}"""^^rdf:JSON """{"orderId":"A200","shipTo":{"country":"US"},"customer":{"email":"bob@example.org","vatId":null},"lines":[{"sku":"WID-001","qty":2,"unitCents":999},{"sku":"GAD-002","qty":1,"unitCents":1500}],"declared":{"netCents":3498,"vatCents":0,"grossCents":3498}}"""^^rdf:JSON """{"orderId":"A300","shipTo":{"country":"NL"},"customer":{"email":"acct@company.nl","vatId":"NL999999999B01"},"lines":[{"sku":"WID-001","qty":2,"unitCents":999},{"sku":"GAD-002","qty":1,"unitCents":1500}],"declared":{"netCents":3498,"vatCents":0,"grossCents":3498}}"""^^rdf:JSON """{"orderId":"A301","shipTo":{"country":"NL"},"customer":{"email":"billing@company.nl","vatId":"NL999999999B01"},"lines":[{"sku":"WID-001","qty":2,"unitCents":999},{"sku":"GAD-002","qty":1,"unitCents":1500}],"declared":{"netCents":3498,"vatCents":0,"grossCents":3498}}"""^^rdf:JSON """{"orderId":"A400","shipTo":{"country":"BE"},"customer":{"email":"ada@other.example","vatId":null},"lines":[{"sku":"WID-001","qty":2,"unitCents":999},{"sku":"GAD-002","qty":1,"unitCents":1500}],"declared":{"netCents":3498,"vatCents":508,"grossCents":4006}}"""^^rdf:JSON) list:iterate (2 """{"orderId":"A300","shipTo":{"country":"NL"},"customer":{"email":"acct@company.nl","vatId":"NL999999999B01"},"lines":[{"sku":"WID-001","qty":2,"unitCents":999},{"sku":"GAD-002","qty":1,"unitCents":1500}],"declared":{"netCents":3498,"vatCents":0,"grossCents":3498}}"""^^rdf:JSON) .
#   ("""{"orderId":"A300","shipTo":{"country":"NL"},"customer":{"email":"acct@company.nl","vatId":"NL999999999B01"},"lines":[{"sku":"WID-001","qty":2,"unitCents":999},{"sku":"GAD-002","qty":1,"unitCents":1500}],"declared":{"netCents":3498,"vatCents":0,"grossCents":3498}}"""^^rdf:JSON "/orderId") string:jsonPointer "A300" .
#   ("""{"orderId":"A300","shipTo":{"country":"NL"},"customer":{"email":"acct@company.nl","vatId":"NL999999999B01"},"lines":[{"sku":"WID-001","qty":2,"unitCents":999},{"sku":"GAD-002","qty":1,"unitCents":1500}],"declared":{"netCents":3498,"vatCents":0,"grossCents":3498}}"""^^rdf:JSON "/shipTo/country") string:jsonPointer "NL" .
#   ("""{"orderId":"A300","shipTo":{"country":"NL"},"customer":{"email":"acct@company.nl","vatId":"NL999999999B01"},"lines":[{"sku":"WID-001","qty":2,"unitCents":999},{"sku":"GAD-002","qty":1,"unitCents":1500}],"declared":{"netCents":3498,"vatCents":0,"grossCents":3498}}"""^^rdf:JSON "/customer") string:jsonPointer """{"email":"acct@company.nl","vatId":"NL999999999B01"}"""^^rdf:JSON .
#   ("""{"email":"acct@company.nl","vatId":"NL999999999B01"}"""^^rdf:JSON "/email") string:jsonPointer "acct@company.nl" .
#   ("""{"email":"acct@company.nl","vatId":"NL999999999B01"}"""^^rdf:JSON "/vatId") string:jsonPointer "NL999999999B01" .
#   ("""{"orderId":"A300","shipTo":{"country":"NL"},"customer":{"email":"acct@company.nl","vatId":"NL999999999B01"},"lines":[{"sku":"WID-001","qty":2,"unitCents":999},{"sku":"GAD-002","qty":1,"unitCents":1500}],"declared":{"netCents":3498,"vatCents":0,"grossCents":3498}}"""^^rdf:JSON "/declared") string:jsonPointer """{"netCents":3498,"vatCents":0,"grossCents":3498}"""^^rdf:JSON .
#   ("""{"netCents":3498,"vatCents":0,"grossCents":3498}"""^^rdf:JSON "/netCents") string:jsonPointer 3498 .
#   ("""{"netCents":3498,"vatCents":0,"grossCents":3498}"""^^rdf:JSON "/vatCents") string:jsonPointer 0 .
#   ("""{"netCents":3498,"vatCents":0,"grossCents":3498}"""^^rdf:JSON "/grossCents") string:jsonPointer 3498 .
#   ("urn:example:order:%s" "A300") string:format "urn:example:order:A300" .
#   <urn:example:order:A300> log:uri "urn:example:order:A300" .
# via the schematic forward rule:
#   {
#     ex:feed ex:json ?J .
#     (?J "/orders") string:jsonPointer ?Orders .
#     ?Orders list:iterate (?OrderIndex ?OrderJson) .
#     (?OrderJson "/orderId") string:jsonPointer ?OrderId .
#     (?OrderJson "/shipTo/country") string:jsonPointer ?Country .
#     (?OrderJson "/customer") string:jsonPointer ?CustJson .
#     (?CustJson "/email") string:jsonPointer ?Email .
#     (?CustJson "/vatId") string:jsonPointer ?VatIdRaw .
#     (?OrderJson "/declared") string:jsonPointer ?Decl .
#     (?Decl "/netCents") string:jsonPointer ?NetD .
#     (?Decl "/vatCents") string:jsonPointer ?VatD .
#     (?Decl "/grossCents") string:jsonPointer ?GrossD .
#     ("urn:example:order:%s" ?OrderId) string:format ?OrderUriStr .
#     ?Order log:uri ?OrderUriStr .
#   } => {
#     ?Order a ex:Order .
#     ?Order ex:orderId ?OrderId .
#     ?Order ex:orderIndex ?OrderIndex .
#     ?Order ex:shipCountry ?Country .
#     ?Order ex:email ?Email .
#     ?Order ex:vatIdRaw ?VatIdRaw .
#     ?Order ex:declaredNetCents ?NetD .
#     ?Order ex:declaredVatCents ?VatD .
#     ?Order ex:declaredGrossCents ?GrossD .
#   } .
# with substitution (on rule variables):
#   ?Country = "NL"
#   ?CustJson = """{"email":"acct@company.nl","vatId":"NL999999999B01"}"""^^rdf:JSON
#   ?Decl = """{"netCents":3498,"vatCents":0,"grossCents":3498}"""^^rdf:JSON
#   ?Email = "acct@company.nl"
#   ?GrossD = 3498
#   ?J = """{
#     "meta~data": { "batch": "2025-12-18" },
#     "orders": [
#     {
#     "orderId": "A100",
#     "shipTo": { "country": "BE" },
#     "customer": { "email": "Ada@Example.ORG", "vatId": null },
#     "lines": [
#     { "sku": "wid-001", "qty": 2, "unitCents": 999 },
#     { "sku": "GAD-002", "qty": 1, "unitCents": 1500 }
#     ],
#     "declared": { "netCents": 3498, "vatCents": 509, "grossCents": 4007 }
#     },
#     {
#     "orderId": "A200",
#     "shipTo": { "country": "US" },
#     "customer": { "email": "bob@example.org", "vatId": null },
#     "lines": [
#     { "sku": "WID-001", "qty": 2, "unitCents": 999 },
#     { "sku": "GAD-002", "qty": 1, "unitCents": 1500 }
#     ],
#     "declared": { "netCents": 3498, "vatCents": 0, "grossCents": 3498 }
#     },
#     {
#     "orderId": "A300",
#     "shipTo": { "country": "NL" },
#     "customer": { "email": "acct@company.nl", "vatId": "NL999999999B01" },
#     "lines": [
#     { "sku": "WID-001", "qty": 2, "unitCents": 999 },
#     { "sku": "GAD-002", "qty": 1, "unitCents": 1500 }
#     ],
#     "declared": { "netCents": 3498, "vatCents": 0, "grossCents": 3498 }
#     },
#     {
#     "orderId": "A301",
#     "shipTo": { "country": "NL" },
#     "customer": { "email": "billing@company.nl", "vatId": "NL999999999B01" },
#     "lines": [
#     { "sku": "WID-001", "qty": 2, "unitCents": 999 },
#     { "sku": "GAD-002", "qty": 1, "unitCents": 1500 }
#     ],
#     "declared": { "netCents": 3498, "vatCents": 0, "grossCents": 3498 }
#     },
#     {
#     "orderId": "A400",
#     "shipTo": { "country": "BE" },
#     "customer": { "email": "ada@other.example", "vatId": null },
#     "lines": [
#     { "sku": "WID-001", "qty": 2, "unitCents": 999 },
#     { "sku": "GAD-002", "qty": 1, "unitCents": 1500 }
#     ],
#     "declared": { "netCents": 3498, "vatCents": 508, "grossCents": 4006 }
#     }
#     ]
#   }"""^^rdf:JSON
#   ?NetD = 3498
#   ?Order = <urn:example:order:A300>
#   ?OrderId = "A300"
#   ?OrderIndex = 2
#   ?OrderJson = """{"orderId":"A300","shipTo":{"country":"NL"},"customer":{"email":"acct@company.nl","vatId":"NL999999999B01"},"lines":[{"sku":"WID-001","qty":2,"unitCents":999},{"sku":"GAD-002","qty":1,"unitCents":1500}],"declared":{"netCents":3498,"vatCents":0,"grossCents":3498}}"""^^rdf:JSON
#   ?OrderUriStr = "urn:example:order:A300"
#   ?Orders = ("""{"orderId":"A100","shipTo":{"country":"BE"},"customer":{"email":"Ada@Example.ORG","vatId":null},"lines":[{"sku":"wid-001","qty":2,"unitCents":999},{"sku":"GAD-002","qty":1,"unitCents":1500}],"declared":{"netCents":3498,"vatCents":509,"grossCents":4007}}"""^^rdf:JSON """{"orderId":"A200","shipTo":{"country":"US"},"customer":{"email":"bob@example.org","vatId":null},"lines":[{"sku":"WID-001","qty":2,"unitCents":999},{"sku":"GAD-002","qty":1,"unitCents":1500}],"declared":{"netCents":3498,"vatCents":0,"grossCents":3498}}"""^^rdf:JSON """{"orderId":"A300","shipTo":{"country":"NL"},"customer":{"email":"acct@company.nl","vatId":"NL999999999B01"},"lines":[{"sku":"WID-001","qty":2,"unitCents":999},{"sku":"GAD-002","qty":1,"unitCents":1500}],"declared":{"netCents":3498,"vatCents":0,"grossCents":3498}}"""^^rdf:JSON """{"orderId":"A301","shipTo":{"country":"NL"},"customer":{"email":"billing@company.nl","vatId":"NL999999999B01"},"lines":[{"sku":"WID-001","qty":2,"unitCents":999},{"sku":"GAD-002","qty":1,"unitCents":1500}],"declared":{"netCents":3498,"vatCents":0,"grossCents":3498}}"""^^rdf:JSON """{"orderId":"A400","shipTo":{"country":"BE"},"customer":{"email":"ada@other.example","vatId":null},"lines":[{"sku":"WID-001","qty":2,"unitCents":999},{"sku":"GAD-002","qty":1,"unitCents":1500}],"declared":{"netCents":3498,"vatCents":508,"grossCents":4006}}"""^^rdf:JSON)
#   ?VatD = 0
#   ?VatIdRaw = "NL999999999B01"
# Therefore the derived triple above is entailed by the rules and facts.
# ----------------------------------------------------------------------

<urn:example:order:A300> ex:declaredGrossCents 3498 .

# ----------------------------------------------------------------------
# Proof for derived triple:
#   <urn:example:order:A200> a ex:Order .
# It holds because the following instance of the rule body is provable:
#   ex:feed ex:json """{
#     "meta~data": { "batch": "2025-12-18" },
#     "orders": [
#       {
#         "orderId": "A100",
#         "shipTo": { "country": "BE" },
#         "customer": { "email": "Ada@Example.ORG", "vatId": null },
#         "lines": [
#           { "sku": "wid-001", "qty": 2, "unitCents": 999 },
#           { "sku": "GAD-002", "qty": 1, "unitCents": 1500 }
#         ],
#         "declared": { "netCents": 3498, "vatCents": 509, "grossCents": 4007 }
#       },
#       {
#         "orderId": "A200",
#         "shipTo": { "country": "US" },
#         "customer": { "email": "bob@example.org", "vatId": null },
#         "lines": [
#           { "sku": "WID-001", "qty": 2, "unitCents": 999 },
#           { "sku": "GAD-002", "qty": 1, "unitCents": 1500 }
#         ],
#         "declared": { "netCents": 3498, "vatCents": 0, "grossCents": 3498 }
#       },
#       {
#         "orderId": "A300",
#         "shipTo": { "country": "NL" },
#         "customer": { "email": "acct@company.nl", "vatId": "NL999999999B01" },
#         "lines": [
#           { "sku": "WID-001", "qty": 2, "unitCents": 999 },
#           { "sku": "GAD-002", "qty": 1, "unitCents": 1500 }
#         ],
#         "declared": { "netCents": 3498, "vatCents": 0, "grossCents": 3498 }
#       },
#       {
#         "orderId": "A301",
#         "shipTo": { "country": "NL" },
#         "customer": { "email": "billing@company.nl", "vatId": "NL999999999B01" },
#         "lines": [
#           { "sku": "WID-001", "qty": 2, "unitCents": 999 },
#           { "sku": "GAD-002", "qty": 1, "unitCents": 1500 }
#         ],
#         "declared": { "netCents": 3498, "vatCents": 0, "grossCents": 3498 }
#       },
#       {
#         "orderId": "A400",
#         "shipTo": { "country": "BE" },
#         "customer": { "email": "ada@other.example", "vatId": null },
#         "lines": [
#           { "sku": "WID-001", "qty": 2, "unitCents": 999 },
#           { "sku": "GAD-002", "qty": 1, "unitCents": 1500 }
#         ],
#         "declared": { "netCents": 3498, "vatCents": 508, "grossCents": 4006 }
#       }
#     ]
#   }"""^^rdf:JSON .
#   ("""{
#     "meta~data": { "batch": "2025-12-18" },
#     "orders": [
#       {
#         "orderId": "A100",
#         "shipTo": { "country": "BE" },
#         "customer": { "email": "Ada@Example.ORG", "vatId": null },
#         "lines": [
#           { "sku": "wid-001", "qty": 2, "unitCents": 999 },
#           { "sku": "GAD-002", "qty": 1, "unitCents": 1500 }
#         ],
#         "declared": { "netCents": 3498, "vatCents": 509, "grossCents": 4007 }
#       },
#       {
#         "orderId": "A200",
#         "shipTo": { "country": "US" },
#         "customer": { "email": "bob@example.org", "vatId": null },
#         "lines": [
#           { "sku": "WID-001", "qty": 2, "unitCents": 999 },
#           { "sku": "GAD-002", "qty": 1, "unitCents": 1500 }
#         ],
#         "declared": { "netCents": 3498, "vatCents": 0, "grossCents": 3498 }
#       },
#       {
#         "orderId": "A300",
#         "shipTo": { "country": "NL" },
#         "customer": { "email": "acct@company.nl", "vatId": "NL999999999B01" },
#         "lines": [
#           { "sku": "WID-001", "qty": 2, "unitCents": 999 },
#           { "sku": "GAD-002", "qty": 1, "unitCents": 1500 }
#         ],
#         "declared": { "netCents": 3498, "vatCents": 0, "grossCents": 3498 }
#       },
#       {
#         "orderId": "A301",
#         "shipTo": { "country": "NL" },
#         "customer": { "email": "billing@company.nl", "vatId": "NL999999999B01" },
#         "lines": [
#           { "sku": "WID-001", "qty": 2, "unitCents": 999 },
#           { "sku": "GAD-002", "qty": 1, "unitCents": 1500 }
#         ],
#         "declared": { "netCents": 3498, "vatCents": 0, "grossCents": 3498 }
#       },
#       {
#         "orderId": "A400",
#         "shipTo": { "country": "BE" },
#         "customer": { "email": "ada@other.example", "vatId": null },
#         "lines": [
#           { "sku": "WID-001", "qty": 2, "unitCents": 999 },
#           { "sku": "GAD-002", "qty": 1, "unitCents": 1500 }
#         ],
#         "declared": { "netCents": 3498, "vatCents": 508, "grossCents": 4006 }
#       }
#     ]
#   }"""^^rdf:JSON "/orders") string:jsonPointer ("""{"orderId":"A100","shipTo":{"country":"BE"},"customer":{"email":"Ada@Example.ORG","vatId":null},"lines":[{"sku":"wid-001","qty":2,"unitCents":999},{"sku":"GAD-002","qty":1,"unitCents":1500}],"declared":{"netCents":3498,"vatCents":509,"grossCents":4007}}"""^^rdf:JSON """{"orderId":"A200","shipTo":{"country":"US"},"customer":{"email":"bob@example.org","vatId":null},"lines":[{"sku":"WID-001","qty":2,"unitCents":999},{"sku":"GAD-002","qty":1,"unitCents":1500}],"declared":{"netCents":3498,"vatCents":0,"grossCents":3498}}"""^^rdf:JSON """{"orderId":"A300","shipTo":{"country":"NL"},"customer":{"email":"acct@company.nl","vatId":"NL999999999B01"},"lines":[{"sku":"WID-001","qty":2,"unitCents":999},{"sku":"GAD-002","qty":1,"unitCents":1500}],"declared":{"netCents":3498,"vatCents":0,"grossCents":3498}}"""^^rdf:JSON """{"orderId":"A301","shipTo":{"country":"NL"},"customer":{"email":"billing@company.nl","vatId":"NL999999999B01"},"lines":[{"sku":"WID-001","qty":2,"unitCents":999},{"sku":"GAD-002","qty":1,"unitCents":1500}],"declared":{"netCents":3498,"vatCents":0,"grossCents":3498}}"""^^rdf:JSON """{"orderId":"A400","shipTo":{"country":"BE"},"customer":{"email":"ada@other.example","vatId":null},"lines":[{"sku":"WID-001","qty":2,"unitCents":999},{"sku":"GAD-002","qty":1,"unitCents":1500}],"declared":{"netCents":3498,"vatCents":508,"grossCents":4006}}"""^^rdf:JSON) .
#   ("""{"orderId":"A100","shipTo":{"country":"BE"},"customer":{"email":"Ada@Example.ORG","vatId":null},"lines":[{"sku":"wid-001","qty":2,"unitCents":999},{"sku":"GAD-002","qty":1,"unitCents":1500}],"declared":{"netCents":3498,"vatCents":509,"grossCents":4007}}"""^^rdf:JSON """{"orderId":"A200","shipTo":{"country":"US"},"customer":{"email":"bob@example.org","vatId":null},"lines":[{"sku":"WID-001","qty":2,"unitCents":999},{"sku":"GAD-002","qty":1,"unitCents":1500}],"declared":{"netCents":3498,"vatCents":0,"grossCents":3498}}"""^^rdf:JSON """{"orderId":"A300","shipTo":{"country":"NL"},"customer":{"email":"acct@company.nl","vatId":"NL999999999B01"},"lines":[{"sku":"WID-001","qty":2,"unitCents":999},{"sku":"GAD-002","qty":1,"unitCents":1500}],"declared":{"netCents":3498,"vatCents":0,"grossCents":3498}}"""^^rdf:JSON """{"orderId":"A301","shipTo":{"country":"NL"},"customer":{"email":"billing@company.nl","vatId":"NL999999999B01"},"lines":[{"sku":"WID-001","qty":2,"unitCents":999},{"sku":"GAD-002","qty":1,"unitCents":1500}],"declared":{"netCents":3498,"vatCents":0,"grossCents":3498}}"""^^rdf:JSON """{"orderId":"A400","shipTo":{"country":"BE"},"customer":{"email":"ada@other.example","vatId":null},"lines":[{"sku":"WID-001","qty":2,"unitCents":999},{"sku":"GAD-002","qty":1,"unitCents":1500}],"declared":{"netCents":3498,"vatCents":508,"grossCents":4006}}"""^^rdf:JSON) list:iterate (1 """{"orderId":"A200","shipTo":{"country":"US"},"customer":{"email":"bob@example.org","vatId":null},"lines":[{"sku":"WID-001","qty":2,"unitCents":999},{"sku":"GAD-002","qty":1,"unitCents":1500}],"declared":{"netCents":3498,"vatCents":0,"grossCents":3498}}"""^^rdf:JSON) .
#   ("""{"orderId":"A200","shipTo":{"country":"US"},"customer":{"email":"bob@example.org","vatId":null},"lines":[{"sku":"WID-001","qty":2,"unitCents":999},{"sku":"GAD-002","qty":1,"unitCents":1500}],"declared":{"netCents":3498,"vatCents":0,"grossCents":3498}}"""^^rdf:JSON "/orderId") string:jsonPointer "A200" .
#   ("""{"orderId":"A200","shipTo":{"country":"US"},"customer":{"email":"bob@example.org","vatId":null},"lines":[{"sku":"WID-001","qty":2,"unitCents":999},{"sku":"GAD-002","qty":1,"unitCents":1500}],"declared":{"netCents":3498,"vatCents":0,"grossCents":3498}}"""^^rdf:JSON "/shipTo/country") string:jsonPointer "US" .
#   ("""{"orderId":"A200","shipTo":{"country":"US"},"customer":{"email":"bob@example.org","vatId":null},"lines":[{"sku":"WID-001","qty":2,"unitCents":999},{"sku":"GAD-002","qty":1,"unitCents":1500}],"declared":{"netCents":3498,"vatCents":0,"grossCents":3498}}"""^^rdf:JSON "/customer") string:jsonPointer """{"email":"bob@example.org","vatId":null}"""^^rdf:JSON .
#   ("""{"email":"bob@example.org","vatId":null}"""^^rdf:JSON "/email") string:jsonPointer "bob@example.org" .
#   ("""{"email":"bob@example.org","vatId":null}"""^^rdf:JSON "/vatId") string:jsonPointer "null" .
#   ("""{"orderId":"A200","shipTo":{"country":"US"},"customer":{"email":"bob@example.org","vatId":null},"lines":[{"sku":"WID-001","qty":2,"unitCents":999},{"sku":"GAD-002","qty":1,"unitCents":1500}],"declared":{"netCents":3498,"vatCents":0,"grossCents":3498}}"""^^rdf:JSON "/declared") string:jsonPointer """{"netCents":3498,"vatCents":0,"grossCents":3498}"""^^rdf:JSON .
#   ("""{"netCents":3498,"vatCents":0,"grossCents":3498}"""^^rdf:JSON "/netCents") string:jsonPointer 3498 .
#   ("""{"netCents":3498,"vatCents":0,"grossCents":3498}"""^^rdf:JSON "/vatCents") string:jsonPointer 0 .
#   ("""{"netCents":3498,"vatCents":0,"grossCents":3498}"""^^rdf:JSON "/grossCents") string:jsonPointer 3498 .
#   ("urn:example:order:%s" "A200") string:format "urn:example:order:A200" .
#   <urn:example:order:A200> log:uri "urn:example:order:A200" .
# via the schematic forward rule:
#   {
#     ex:feed ex:json ?J .
#     (?J "/orders") string:jsonPointer ?Orders .
#     ?Orders list:iterate (?OrderIndex ?OrderJson) .
#     (?OrderJson "/orderId") string:jsonPointer ?OrderId .
#     (?OrderJson "/shipTo/country") string:jsonPointer ?Country .
#     (?OrderJson "/customer") string:jsonPointer ?CustJson .
#     (?CustJson "/email") string:jsonPointer ?Email .
#     (?CustJson "/vatId") string:jsonPointer ?VatIdRaw .
#     (?OrderJson "/declared") string:jsonPointer ?Decl .
#     (?Decl "/netCents") string:jsonPointer ?NetD .
#     (?Decl "/vatCents") string:jsonPointer ?VatD .
#     (?Decl "/grossCents") string:jsonPointer ?GrossD .
#     ("urn:example:order:%s" ?OrderId) string:format ?OrderUriStr .
#     ?Order log:uri ?OrderUriStr .
#   } => {
#     ?Order a ex:Order .
#     ?Order ex:orderId ?OrderId .
#     ?Order ex:orderIndex ?OrderIndex .
#     ?Order ex:shipCountry ?Country .
#     ?Order ex:email ?Email .
#     ?Order ex:vatIdRaw ?VatIdRaw .
#     ?Order ex:declaredNetCents ?NetD .
#     ?Order ex:declaredVatCents ?VatD .
#     ?Order ex:declaredGrossCents ?GrossD .
#   } .
# with substitution (on rule variables):
#   ?Country = "US"
#   ?CustJson = """{"email":"bob@example.org","vatId":null}"""^^rdf:JSON
#   ?Decl = """{"netCents":3498,"vatCents":0,"grossCents":3498}"""^^rdf:JSON
#   ?Email = "bob@example.org"
#   ?GrossD = 3498
#   ?J = """{
#     "meta~data": { "batch": "2025-12-18" },
#     "orders": [
#     {
#     "orderId": "A100",
#     "shipTo": { "country": "BE" },
#     "customer": { "email": "Ada@Example.ORG", "vatId": null },
#     "lines": [
#     { "sku": "wid-001", "qty": 2, "unitCents": 999 },
#     { "sku": "GAD-002", "qty": 1, "unitCents": 1500 }
#     ],
#     "declared": { "netCents": 3498, "vatCents": 509, "grossCents": 4007 }
#     },
#     {
#     "orderId": "A200",
#     "shipTo": { "country": "US" },
#     "customer": { "email": "bob@example.org", "vatId": null },
#     "lines": [
#     { "sku": "WID-001", "qty": 2, "unitCents": 999 },
#     { "sku": "GAD-002", "qty": 1, "unitCents": 1500 }
#     ],
#     "declared": { "netCents": 3498, "vatCents": 0, "grossCents": 3498 }
#     },
#     {
#     "orderId": "A300",
#     "shipTo": { "country": "NL" },
#     "customer": { "email": "acct@company.nl", "vatId": "NL999999999B01" },
#     "lines": [
#     { "sku": "WID-001", "qty": 2, "unitCents": 999 },
#     { "sku": "GAD-002", "qty": 1, "unitCents": 1500 }
#     ],
#     "declared": { "netCents": 3498, "vatCents": 0, "grossCents": 3498 }
#     },
#     {
#     "orderId": "A301",
#     "shipTo": { "country": "NL" },
#     "customer": { "email": "billing@company.nl", "vatId": "NL999999999B01" },
#     "lines": [
#     { "sku": "WID-001", "qty": 2, "unitCents": 999 },
#     { "sku": "GAD-002", "qty": 1, "unitCents": 1500 }
#     ],
#     "declared": { "netCents": 3498, "vatCents": 0, "grossCents": 3498 }
#     },
#     {
#     "orderId": "A400",
#     "shipTo": { "country": "BE" },
#     "customer": { "email": "ada@other.example", "vatId": null },
#     "lines": [
#     { "sku": "WID-001", "qty": 2, "unitCents": 999 },
#     { "sku": "GAD-002", "qty": 1, "unitCents": 1500 }
#     ],
#     "declared": { "netCents": 3498, "vatCents": 508, "grossCents": 4006 }
#     }
#     ]
#   }"""^^rdf:JSON
#   ?NetD = 3498
#   ?Order = <urn:example:order:A200>
#   ?OrderId = "A200"
#   ?OrderIndex = 1
#   ?OrderJson = """{"orderId":"A200","shipTo":{"country":"US"},"customer":{"email":"bob@example.org","vatId":null},"lines":[{"sku":"WID-001","qty":2,"unitCents":999},{"sku":"GAD-002","qty":1,"unitCents":1500}],"declared":{"netCents":3498,"vatCents":0,"grossCents":3498}}"""^^rdf:JSON
#   ?OrderUriStr = "urn:example:order:A200"
#   ?Orders = ("""{"orderId":"A100","shipTo":{"country":"BE"},"customer":{"email":"Ada@Example.ORG","vatId":null},"lines":[{"sku":"wid-001","qty":2,"unitCents":999},{"sku":"GAD-002","qty":1,"unitCents":1500}],"declared":{"netCents":3498,"vatCents":509,"grossCents":4007}}"""^^rdf:JSON """{"orderId":"A200","shipTo":{"country":"US"},"customer":{"email":"bob@example.org","vatId":null},"lines":[{"sku":"WID-001","qty":2,"unitCents":999},{"sku":"GAD-002","qty":1,"unitCents":1500}],"declared":{"netCents":3498,"vatCents":0,"grossCents":3498}}"""^^rdf:JSON """{"orderId":"A300","shipTo":{"country":"NL"},"customer":{"email":"acct@company.nl","vatId":"NL999999999B01"},"lines":[{"sku":"WID-001","qty":2,"unitCents":999},{"sku":"GAD-002","qty":1,"unitCents":1500}],"declared":{"netCents":3498,"vatCents":0,"grossCents":3498}}"""^^rdf:JSON """{"orderId":"A301","shipTo":{"country":"NL"},"customer":{"email":"billing@company.nl","vatId":"NL999999999B01"},"lines":[{"sku":"WID-001","qty":2,"unitCents":999},{"sku":"GAD-002","qty":1,"unitCents":1500}],"declared":{"netCents":3498,"vatCents":0,"grossCents":3498}}"""^^rdf:JSON """{"orderId":"A400","shipTo":{"country":"BE"},"customer":{"email":"ada@other.example","vatId":null},"lines":[{"sku":"WID-001","qty":2,"unitCents":999},{"sku":"GAD-002","qty":1,"unitCents":1500}],"declared":{"netCents":3498,"vatCents":508,"grossCents":4006}}"""^^rdf:JSON)
#   ?VatD = 0
#   ?VatIdRaw = "null"
# Therefore the derived triple above is entailed by the rules and facts.
# ----------------------------------------------------------------------

<urn:example:order:A200> a ex:Order .

# ----------------------------------------------------------------------
# Proof for derived triple:
#   <urn:example:order:A200> ex:orderId "A200" .
# It holds because the following instance of the rule body is provable:
#   ex:feed ex:json """{
#     "meta~data": { "batch": "2025-12-18" },
#     "orders": [
#       {
#         "orderId": "A100",
#         "shipTo": { "country": "BE" },
#         "customer": { "email": "Ada@Example.ORG", "vatId": null },
#         "lines": [
#           { "sku": "wid-001", "qty": 2, "unitCents": 999 },
#           { "sku": "GAD-002", "qty": 1, "unitCents": 1500 }
#         ],
#         "declared": { "netCents": 3498, "vatCents": 509, "grossCents": 4007 }
#       },
#       {
#         "orderId": "A200",
#         "shipTo": { "country": "US" },
#         "customer": { "email": "bob@example.org", "vatId": null },
#         "lines": [
#           { "sku": "WID-001", "qty": 2, "unitCents": 999 },
#           { "sku": "GAD-002", "qty": 1, "unitCents": 1500 }
#         ],
#         "declared": { "netCents": 3498, "vatCents": 0, "grossCents": 3498 }
#       },
#       {
#         "orderId": "A300",
#         "shipTo": { "country": "NL" },
#         "customer": { "email": "acct@company.nl", "vatId": "NL999999999B01" },
#         "lines": [
#           { "sku": "WID-001", "qty": 2, "unitCents": 999 },
#           { "sku": "GAD-002", "qty": 1, "unitCents": 1500 }
#         ],
#         "declared": { "netCents": 3498, "vatCents": 0, "grossCents": 3498 }
#       },
#       {
#         "orderId": "A301",
#         "shipTo": { "country": "NL" },
#         "customer": { "email": "billing@company.nl", "vatId": "NL999999999B01" },
#         "lines": [
#           { "sku": "WID-001", "qty": 2, "unitCents": 999 },
#           { "sku": "GAD-002", "qty": 1, "unitCents": 1500 }
#         ],
#         "declared": { "netCents": 3498, "vatCents": 0, "grossCents": 3498 }
#       },
#       {
#         "orderId": "A400",
#         "shipTo": { "country": "BE" },
#         "customer": { "email": "ada@other.example", "vatId": null },
#         "lines": [
#           { "sku": "WID-001", "qty": 2, "unitCents": 999 },
#           { "sku": "GAD-002", "qty": 1, "unitCents": 1500 }
#         ],
#         "declared": { "netCents": 3498, "vatCents": 508, "grossCents": 4006 }
#       }
#     ]
#   }"""^^rdf:JSON .
#   ("""{
#     "meta~data": { "batch": "2025-12-18" },
#     "orders": [
#       {
#         "orderId": "A100",
#         "shipTo": { "country": "BE" },
#         "customer": { "email": "Ada@Example.ORG", "vatId": null },
#         "lines": [
#           { "sku": "wid-001", "qty": 2, "unitCents": 999 },
#           { "sku": "GAD-002", "qty": 1, "unitCents": 1500 }
#         ],
#         "declared": { "netCents": 3498, "vatCents": 509, "grossCents": 4007 }
#       },
#       {
#         "orderId": "A200",
#         "shipTo": { "country": "US" },
#         "customer": { "email": "bob@example.org", "vatId": null },
#         "lines": [
#           { "sku": "WID-001", "qty": 2, "unitCents": 999 },
#           { "sku": "GAD-002", "qty": 1, "unitCents": 1500 }
#         ],
#         "declared": { "netCents": 3498, "vatCents": 0, "grossCents": 3498 }
#       },
#       {
#         "orderId": "A300",
#         "shipTo": { "country": "NL" },
#         "customer": { "email": "acct@company.nl", "vatId": "NL999999999B01" },
#         "lines": [
#           { "sku": "WID-001", "qty": 2, "unitCents": 999 },
#           { "sku": "GAD-002", "qty": 1, "unitCents": 1500 }
#         ],
#         "declared": { "netCents": 3498, "vatCents": 0, "grossCents": 3498 }
#       },
#       {
#         "orderId": "A301",
#         "shipTo": { "country": "NL" },
#         "customer": { "email": "billing@company.nl", "vatId": "NL999999999B01" },
#         "lines": [
#           { "sku": "WID-001", "qty": 2, "unitCents": 999 },
#           { "sku": "GAD-002", "qty": 1, "unitCents": 1500 }
#         ],
#         "declared": { "netCents": 3498, "vatCents": 0, "grossCents": 3498 }
#       },
#       {
#         "orderId": "A400",
#         "shipTo": { "country": "BE" },
#         "customer": { "email": "ada@other.example", "vatId": null },
#         "lines": [
#           { "sku": "WID-001", "qty": 2, "unitCents": 999 },
#           { "sku": "GAD-002", "qty": 1, "unitCents": 1500 }
#         ],
#         "declared": { "netCents": 3498, "vatCents": 508, "grossCents": 4006 }
#       }
#     ]
#   }"""^^rdf:JSON "/orders") string:jsonPointer ("""{"orderId":"A100","shipTo":{"country":"BE"},"customer":{"email":"Ada@Example.ORG","vatId":null},"lines":[{"sku":"wid-001","qty":2,"unitCents":999},{"sku":"GAD-002","qty":1,"unitCents":1500}],"declared":{"netCents":3498,"vatCents":509,"grossCents":4007}}"""^^rdf:JSON """{"orderId":"A200","shipTo":{"country":"US"},"customer":{"email":"bob@example.org","vatId":null},"lines":[{"sku":"WID-001","qty":2,"unitCents":999},{"sku":"GAD-002","qty":1,"unitCents":1500}],"declared":{"netCents":3498,"vatCents":0,"grossCents":3498}}"""^^rdf:JSON """{"orderId":"A300","shipTo":{"country":"NL"},"customer":{"email":"acct@company.nl","vatId":"NL999999999B01"},"lines":[{"sku":"WID-001","qty":2,"unitCents":999},{"sku":"GAD-002","qty":1,"unitCents":1500}],"declared":{"netCents":3498,"vatCents":0,"grossCents":3498}}"""^^rdf:JSON """{"orderId":"A301","shipTo":{"country":"NL"},"customer":{"email":"billing@company.nl","vatId":"NL999999999B01"},"lines":[{"sku":"WID-001","qty":2,"unitCents":999},{"sku":"GAD-002","qty":1,"unitCents":1500}],"declared":{"netCents":3498,"vatCents":0,"grossCents":3498}}"""^^rdf:JSON """{"orderId":"A400","shipTo":{"country":"BE"},"customer":{"email":"ada@other.example","vatId":null},"lines":[{"sku":"WID-001","qty":2,"unitCents":999},{"sku":"GAD-002","qty":1,"unitCents":1500}],"declared":{"netCents":3498,"vatCents":508,"grossCents":4006}}"""^^rdf:JSON) .
#   ("""{"orderId":"A100","shipTo":{"country":"BE"},"customer":{"email":"Ada@Example.ORG","vatId":null},"lines":[{"sku":"wid-001","qty":2,"unitCents":999},{"sku":"GAD-002","qty":1,"unitCents":1500}],"declared":{"netCents":3498,"vatCents":509,"grossCents":4007}}"""^^rdf:JSON """{"orderId":"A200","shipTo":{"country":"US"},"customer":{"email":"bob@example.org","vatId":null},"lines":[{"sku":"WID-001","qty":2,"unitCents":999},{"sku":"GAD-002","qty":1,"unitCents":1500}],"declared":{"netCents":3498,"vatCents":0,"grossCents":3498}}"""^^rdf:JSON """{"orderId":"A300","shipTo":{"country":"NL"},"customer":{"email":"acct@company.nl","vatId":"NL999999999B01"},"lines":[{"sku":"WID-001","qty":2,"unitCents":999},{"sku":"GAD-002","qty":1,"unitCents":1500}],"declared":{"netCents":3498,"vatCents":0,"grossCents":3498}}"""^^rdf:JSON """{"orderId":"A301","shipTo":{"country":"NL"},"customer":{"email":"billing@company.nl","vatId":"NL999999999B01"},"lines":[{"sku":"WID-001","qty":2,"unitCents":999},{"sku":"GAD-002","qty":1,"unitCents":1500}],"declared":{"netCents":3498,"vatCents":0,"grossCents":3498}}"""^^rdf:JSON """{"orderId":"A400","shipTo":{"country":"BE"},"customer":{"email":"ada@other.example","vatId":null},"lines":[{"sku":"WID-001","qty":2,"unitCents":999},{"sku":"GAD-002","qty":1,"unitCents":1500}],"declared":{"netCents":3498,"vatCents":508,"grossCents":4006}}"""^^rdf:JSON) list:iterate (1 """{"orderId":"A200","shipTo":{"country":"US"},"customer":{"email":"bob@example.org","vatId":null},"lines":[{"sku":"WID-001","qty":2,"unitCents":999},{"sku":"GAD-002","qty":1,"unitCents":1500}],"declared":{"netCents":3498,"vatCents":0,"grossCents":3498}}"""^^rdf:JSON) .
#   ("""{"orderId":"A200","shipTo":{"country":"US"},"customer":{"email":"bob@example.org","vatId":null},"lines":[{"sku":"WID-001","qty":2,"unitCents":999},{"sku":"GAD-002","qty":1,"unitCents":1500}],"declared":{"netCents":3498,"vatCents":0,"grossCents":3498}}"""^^rdf:JSON "/orderId") string:jsonPointer "A200" .
#   ("""{"orderId":"A200","shipTo":{"country":"US"},"customer":{"email":"bob@example.org","vatId":null},"lines":[{"sku":"WID-001","qty":2,"unitCents":999},{"sku":"GAD-002","qty":1,"unitCents":1500}],"declared":{"netCents":3498,"vatCents":0,"grossCents":3498}}"""^^rdf:JSON "/shipTo/country") string:jsonPointer "US" .
#   ("""{"orderId":"A200","shipTo":{"country":"US"},"customer":{"email":"bob@example.org","vatId":null},"lines":[{"sku":"WID-001","qty":2,"unitCents":999},{"sku":"GAD-002","qty":1,"unitCents":1500}],"declared":{"netCents":3498,"vatCents":0,"grossCents":3498}}"""^^rdf:JSON "/customer") string:jsonPointer """{"email":"bob@example.org","vatId":null}"""^^rdf:JSON .
#   ("""{"email":"bob@example.org","vatId":null}"""^^rdf:JSON "/email") string:jsonPointer "bob@example.org" .
#   ("""{"email":"bob@example.org","vatId":null}"""^^rdf:JSON "/vatId") string:jsonPointer "null" .
#   ("""{"orderId":"A200","shipTo":{"country":"US"},"customer":{"email":"bob@example.org","vatId":null},"lines":[{"sku":"WID-001","qty":2,"unitCents":999},{"sku":"GAD-002","qty":1,"unitCents":1500}],"declared":{"netCents":3498,"vatCents":0,"grossCents":3498}}"""^^rdf:JSON "/declared") string:jsonPointer """{"netCents":3498,"vatCents":0,"grossCents":3498}"""^^rdf:JSON .
#   ("""{"netCents":3498,"vatCents":0,"grossCents":3498}"""^^rdf:JSON "/netCents") string:jsonPointer 3498 .
#   ("""{"netCents":3498,"vatCents":0,"grossCents":3498}"""^^rdf:JSON "/vatCents") string:jsonPointer 0 .
#   ("""{"netCents":3498,"vatCents":0,"grossCents":3498}"""^^rdf:JSON "/grossCents") string:jsonPointer 3498 .
#   ("urn:example:order:%s" "A200") string:format "urn:example:order:A200" .
#   <urn:example:order:A200> log:uri "urn:example:order:A200" .
# via the schematic forward rule:
#   {
#     ex:feed ex:json ?J .
#     (?J "/orders") string:jsonPointer ?Orders .
#     ?Orders list:iterate (?OrderIndex ?OrderJson) .
#     (?OrderJson "/orderId") string:jsonPointer ?OrderId .
#     (?OrderJson "/shipTo/country") string:jsonPointer ?Country .
#     (?OrderJson "/customer") string:jsonPointer ?CustJson .
#     (?CustJson "/email") string:jsonPointer ?Email .
#     (?CustJson "/vatId") string:jsonPointer ?VatIdRaw .
#     (?OrderJson "/declared") string:jsonPointer ?Decl .
#     (?Decl "/netCents") string:jsonPointer ?NetD .
#     (?Decl "/vatCents") string:jsonPointer ?VatD .
#     (?Decl "/grossCents") string:jsonPointer ?GrossD .
#     ("urn:example:order:%s" ?OrderId) string:format ?OrderUriStr .
#     ?Order log:uri ?OrderUriStr .
#   } => {
#     ?Order a ex:Order .
#     ?Order ex:orderId ?OrderId .
#     ?Order ex:orderIndex ?OrderIndex .
#     ?Order ex:shipCountry ?Country .
#     ?Order ex:email ?Email .
#     ?Order ex:vatIdRaw ?VatIdRaw .
#     ?Order ex:declaredNetCents ?NetD .
#     ?Order ex:declaredVatCents ?VatD .
#     ?Order ex:declaredGrossCents ?GrossD .
#   } .
# with substitution (on rule variables):
#   ?Country = "US"
#   ?CustJson = """{"email":"bob@example.org","vatId":null}"""^^rdf:JSON
#   ?Decl = """{"netCents":3498,"vatCents":0,"grossCents":3498}"""^^rdf:JSON
#   ?Email = "bob@example.org"
#   ?GrossD = 3498
#   ?J = """{
#     "meta~data": { "batch": "2025-12-18" },
#     "orders": [
#     {
#     "orderId": "A100",
#     "shipTo": { "country": "BE" },
#     "customer": { "email": "Ada@Example.ORG", "vatId": null },
#     "lines": [
#     { "sku": "wid-001", "qty": 2, "unitCents": 999 },
#     { "sku": "GAD-002", "qty": 1, "unitCents": 1500 }
#     ],
#     "declared": { "netCents": 3498, "vatCents": 509, "grossCents": 4007 }
#     },
#     {
#     "orderId": "A200",
#     "shipTo": { "country": "US" },
#     "customer": { "email": "bob@example.org", "vatId": null },
#     "lines": [
#     { "sku": "WID-001", "qty": 2, "unitCents": 999 },
#     { "sku": "GAD-002", "qty": 1, "unitCents": 1500 }
#     ],
#     "declared": { "netCents": 3498, "vatCents": 0, "grossCents": 3498 }
#     },
#     {
#     "orderId": "A300",
#     "shipTo": { "country": "NL" },
#     "customer": { "email": "acct@company.nl", "vatId": "NL999999999B01" },
#     "lines": [
#     { "sku": "WID-001", "qty": 2, "unitCents": 999 },
#     { "sku": "GAD-002", "qty": 1, "unitCents": 1500 }
#     ],
#     "declared": { "netCents": 3498, "vatCents": 0, "grossCents": 3498 }
#     },
#     {
#     "orderId": "A301",
#     "shipTo": { "country": "NL" },
#     "customer": { "email": "billing@company.nl", "vatId": "NL999999999B01" },
#     "lines": [
#     { "sku": "WID-001", "qty": 2, "unitCents": 999 },
#     { "sku": "GAD-002", "qty": 1, "unitCents": 1500 }
#     ],
#     "declared": { "netCents": 3498, "vatCents": 0, "grossCents": 3498 }
#     },
#     {
#     "orderId": "A400",
#     "shipTo": { "country": "BE" },
#     "customer": { "email": "ada@other.example", "vatId": null },
#     "lines": [
#     { "sku": "WID-001", "qty": 2, "unitCents": 999 },
#     { "sku": "GAD-002", "qty": 1, "unitCents": 1500 }
#     ],
#     "declared": { "netCents": 3498, "vatCents": 508, "grossCents": 4006 }
#     }
#     ]
#   }"""^^rdf:JSON
#   ?NetD = 3498
#   ?Order = <urn:example:order:A200>
#   ?OrderId = "A200"
#   ?OrderIndex = 1
#   ?OrderJson = """{"orderId":"A200","shipTo":{"country":"US"},"customer":{"email":"bob@example.org","vatId":null},"lines":[{"sku":"WID-001","qty":2,"unitCents":999},{"sku":"GAD-002","qty":1,"unitCents":1500}],"declared":{"netCents":3498,"vatCents":0,"grossCents":3498}}"""^^rdf:JSON
#   ?OrderUriStr = "urn:example:order:A200"
#   ?Orders = ("""{"orderId":"A100","shipTo":{"country":"BE"},"customer":{"email":"Ada@Example.ORG","vatId":null},"lines":[{"sku":"wid-001","qty":2,"unitCents":999},{"sku":"GAD-002","qty":1,"unitCents":1500}],"declared":{"netCents":3498,"vatCents":509,"grossCents":4007}}"""^^rdf:JSON """{"orderId":"A200","shipTo":{"country":"US"},"customer":{"email":"bob@example.org","vatId":null},"lines":[{"sku":"WID-001","qty":2,"unitCents":999},{"sku":"GAD-002","qty":1,"unitCents":1500}],"declared":{"netCents":3498,"vatCents":0,"grossCents":3498}}"""^^rdf:JSON """{"orderId":"A300","shipTo":{"country":"NL"},"customer":{"email":"acct@company.nl","vatId":"NL999999999B01"},"lines":[{"sku":"WID-001","qty":2,"unitCents":999},{"sku":"GAD-002","qty":1,"unitCents":1500}],"declared":{"netCents":3498,"vatCents":0,"grossCents":3498}}"""^^rdf:JSON """{"orderId":"A301","shipTo":{"country":"NL"},"customer":{"email":"billing@company.nl","vatId":"NL999999999B01"},"lines":[{"sku":"WID-001","qty":2,"unitCents":999},{"sku":"GAD-002","qty":1,"unitCents":1500}],"declared":{"netCents":3498,"vatCents":0,"grossCents":3498}}"""^^rdf:JSON """{"orderId":"A400","shipTo":{"country":"BE"},"customer":{"email":"ada@other.example","vatId":null},"lines":[{"sku":"WID-001","qty":2,"unitCents":999},{"sku":"GAD-002","qty":1,"unitCents":1500}],"declared":{"netCents":3498,"vatCents":508,"grossCents":4006}}"""^^rdf:JSON)
#   ?VatD = 0
#   ?VatIdRaw = "null"
# Therefore the derived triple above is entailed by the rules and facts.
# ----------------------------------------------------------------------

<urn:example:order:A200> ex:orderId "A200" .

# ----------------------------------------------------------------------
# Proof for derived triple:
#   <urn:example:order:A200> ex:orderIndex 1 .
# It holds because the following instance of the rule body is provable:
#   ex:feed ex:json """{
#     "meta~data": { "batch": "2025-12-18" },
#     "orders": [
#       {
#         "orderId": "A100",
#         "shipTo": { "country": "BE" },
#         "customer": { "email": "Ada@Example.ORG", "vatId": null },
#         "lines": [
#           { "sku": "wid-001", "qty": 2, "unitCents": 999 },
#           { "sku": "GAD-002", "qty": 1, "unitCents": 1500 }
#         ],
#         "declared": { "netCents": 3498, "vatCents": 509, "grossCents": 4007 }
#       },
#       {
#         "orderId": "A200",
#         "shipTo": { "country": "US" },
#         "customer": { "email": "bob@example.org", "vatId": null },
#         "lines": [
#           { "sku": "WID-001", "qty": 2, "unitCents": 999 },
#           { "sku": "GAD-002", "qty": 1, "unitCents": 1500 }
#         ],
#         "declared": { "netCents": 3498, "vatCents": 0, "grossCents": 3498 }
#       },
#       {
#         "orderId": "A300",
#         "shipTo": { "country": "NL" },
#         "customer": { "email": "acct@company.nl", "vatId": "NL999999999B01" },
#         "lines": [
#           { "sku": "WID-001", "qty": 2, "unitCents": 999 },
#           { "sku": "GAD-002", "qty": 1, "unitCents": 1500 }
#         ],
#         "declared": { "netCents": 3498, "vatCents": 0, "grossCents": 3498 }
#       },
#       {
#         "orderId": "A301",
#         "shipTo": { "country": "NL" },
#         "customer": { "email": "billing@company.nl", "vatId": "NL999999999B01" },
#         "lines": [
#           { "sku": "WID-001", "qty": 2, "unitCents": 999 },
#           { "sku": "GAD-002", "qty": 1, "unitCents": 1500 }
#         ],
#         "declared": { "netCents": 3498, "vatCents": 0, "grossCents": 3498 }
#       },
#       {
#         "orderId": "A400",
#         "shipTo": { "country": "BE" },
#         "customer": { "email": "ada@other.example", "vatId": null },
#         "lines": [
#           { "sku": "WID-001", "qty": 2, "unitCents": 999 },
#           { "sku": "GAD-002", "qty": 1, "unitCents": 1500 }
#         ],
#         "declared": { "netCents": 3498, "vatCents": 508, "grossCents": 4006 }
#       }
#     ]
#   }"""^^rdf:JSON .
#   ("""{
#     "meta~data": { "batch": "2025-12-18" },
#     "orders": [
#       {
#         "orderId": "A100",
#         "shipTo": { "country": "BE" },
#         "customer": { "email": "Ada@Example.ORG", "vatId": null },
#         "lines": [
#           { "sku": "wid-001", "qty": 2, "unitCents": 999 },
#           { "sku": "GAD-002", "qty": 1, "unitCents": 1500 }
#         ],
#         "declared": { "netCents": 3498, "vatCents": 509, "grossCents": 4007 }
#       },
#       {
#         "orderId": "A200",
#         "shipTo": { "country": "US" },
#         "customer": { "email": "bob@example.org", "vatId": null },
#         "lines": [
#           { "sku": "WID-001", "qty": 2, "unitCents": 999 },
#           { "sku": "GAD-002", "qty": 1, "unitCents": 1500 }
#         ],
#         "declared": { "netCents": 3498, "vatCents": 0, "grossCents": 3498 }
#       },
#       {
#         "orderId": "A300",
#         "shipTo": { "country": "NL" },
#         "customer": { "email": "acct@company.nl", "vatId": "NL999999999B01" },
#         "lines": [
#           { "sku": "WID-001", "qty": 2, "unitCents": 999 },
#           { "sku": "GAD-002", "qty": 1, "unitCents": 1500 }
#         ],
#         "declared": { "netCents": 3498, "vatCents": 0, "grossCents": 3498 }
#       },
#       {
#         "orderId": "A301",
#         "shipTo": { "country": "NL" },
#         "customer": { "email": "billing@company.nl", "vatId": "NL999999999B01" },
#         "lines": [
#           { "sku": "WID-001", "qty": 2, "unitCents": 999 },
#           { "sku": "GAD-002", "qty": 1, "unitCents": 1500 }
#         ],
#         "declared": { "netCents": 3498, "vatCents": 0, "grossCents": 3498 }
#       },
#       {
#         "orderId": "A400",
#         "shipTo": { "country": "BE" },
#         "customer": { "email": "ada@other.example", "vatId": null },
#         "lines": [
#           { "sku": "WID-001", "qty": 2, "unitCents": 999 },
#           { "sku": "GAD-002", "qty": 1, "unitCents": 1500 }
#         ],
#         "declared": { "netCents": 3498, "vatCents": 508, "grossCents": 4006 }
#       }
#     ]
#   }"""^^rdf:JSON "/orders") string:jsonPointer ("""{"orderId":"A100","shipTo":{"country":"BE"},"customer":{"email":"Ada@Example.ORG","vatId":null},"lines":[{"sku":"wid-001","qty":2,"unitCents":999},{"sku":"GAD-002","qty":1,"unitCents":1500}],"declared":{"netCents":3498,"vatCents":509,"grossCents":4007}}"""^^rdf:JSON """{"orderId":"A200","shipTo":{"country":"US"},"customer":{"email":"bob@example.org","vatId":null},"lines":[{"sku":"WID-001","qty":2,"unitCents":999},{"sku":"GAD-002","qty":1,"unitCents":1500}],"declared":{"netCents":3498,"vatCents":0,"grossCents":3498}}"""^^rdf:JSON """{"orderId":"A300","shipTo":{"country":"NL"},"customer":{"email":"acct@company.nl","vatId":"NL999999999B01"},"lines":[{"sku":"WID-001","qty":2,"unitCents":999},{"sku":"GAD-002","qty":1,"unitCents":1500}],"declared":{"netCents":3498,"vatCents":0,"grossCents":3498}}"""^^rdf:JSON """{"orderId":"A301","shipTo":{"country":"NL"},"customer":{"email":"billing@company.nl","vatId":"NL999999999B01"},"lines":[{"sku":"WID-001","qty":2,"unitCents":999},{"sku":"GAD-002","qty":1,"unitCents":1500}],"declared":{"netCents":3498,"vatCents":0,"grossCents":3498}}"""^^rdf:JSON """{"orderId":"A400","shipTo":{"country":"BE"},"customer":{"email":"ada@other.example","vatId":null},"lines":[{"sku":"WID-001","qty":2,"unitCents":999},{"sku":"GAD-002","qty":1,"unitCents":1500}],"declared":{"netCents":3498,"vatCents":508,"grossCents":4006}}"""^^rdf:JSON) .
#   ("""{"orderId":"A100","shipTo":{"country":"BE"},"customer":{"email":"Ada@Example.ORG","vatId":null},"lines":[{"sku":"wid-001","qty":2,"unitCents":999},{"sku":"GAD-002","qty":1,"unitCents":1500}],"declared":{"netCents":3498,"vatCents":509,"grossCents":4007}}"""^^rdf:JSON """{"orderId":"A200","shipTo":{"country":"US"},"customer":{"email":"bob@example.org","vatId":null},"lines":[{"sku":"WID-001","qty":2,"unitCents":999},{"sku":"GAD-002","qty":1,"unitCents":1500}],"declared":{"netCents":3498,"vatCents":0,"grossCents":3498}}"""^^rdf:JSON """{"orderId":"A300","shipTo":{"country":"NL"},"customer":{"email":"acct@company.nl","vatId":"NL999999999B01"},"lines":[{"sku":"WID-001","qty":2,"unitCents":999},{"sku":"GAD-002","qty":1,"unitCents":1500}],"declared":{"netCents":3498,"vatCents":0,"grossCents":3498}}"""^^rdf:JSON """{"orderId":"A301","shipTo":{"country":"NL"},"customer":{"email":"billing@company.nl","vatId":"NL999999999B01"},"lines":[{"sku":"WID-001","qty":2,"unitCents":999},{"sku":"GAD-002","qty":1,"unitCents":1500}],"declared":{"netCents":3498,"vatCents":0,"grossCents":3498}}"""^^rdf:JSON """{"orderId":"A400","shipTo":{"country":"BE"},"customer":{"email":"ada@other.example","vatId":null},"lines":[{"sku":"WID-001","qty":2,"unitCents":999},{"sku":"GAD-002","qty":1,"unitCents":1500}],"declared":{"netCents":3498,"vatCents":508,"grossCents":4006}}"""^^rdf:JSON) list:iterate (1 """{"orderId":"A200","shipTo":{"country":"US"},"customer":{"email":"bob@example.org","vatId":null},"lines":[{"sku":"WID-001","qty":2,"unitCents":999},{"sku":"GAD-002","qty":1,"unitCents":1500}],"declared":{"netCents":3498,"vatCents":0,"grossCents":3498}}"""^^rdf:JSON) .
#   ("""{"orderId":"A200","shipTo":{"country":"US"},"customer":{"email":"bob@example.org","vatId":null},"lines":[{"sku":"WID-001","qty":2,"unitCents":999},{"sku":"GAD-002","qty":1,"unitCents":1500}],"declared":{"netCents":3498,"vatCents":0,"grossCents":3498}}"""^^rdf:JSON "/orderId") string:jsonPointer "A200" .
#   ("""{"orderId":"A200","shipTo":{"country":"US"},"customer":{"email":"bob@example.org","vatId":null},"lines":[{"sku":"WID-001","qty":2,"unitCents":999},{"sku":"GAD-002","qty":1,"unitCents":1500}],"declared":{"netCents":3498,"vatCents":0,"grossCents":3498}}"""^^rdf:JSON "/shipTo/country") string:jsonPointer "US" .
#   ("""{"orderId":"A200","shipTo":{"country":"US"},"customer":{"email":"bob@example.org","vatId":null},"lines":[{"sku":"WID-001","qty":2,"unitCents":999},{"sku":"GAD-002","qty":1,"unitCents":1500}],"declared":{"netCents":3498,"vatCents":0,"grossCents":3498}}"""^^rdf:JSON "/customer") string:jsonPointer """{"email":"bob@example.org","vatId":null}"""^^rdf:JSON .
#   ("""{"email":"bob@example.org","vatId":null}"""^^rdf:JSON "/email") string:jsonPointer "bob@example.org" .
#   ("""{"email":"bob@example.org","vatId":null}"""^^rdf:JSON "/vatId") string:jsonPointer "null" .
#   ("""{"orderId":"A200","shipTo":{"country":"US"},"customer":{"email":"bob@example.org","vatId":null},"lines":[{"sku":"WID-001","qty":2,"unitCents":999},{"sku":"GAD-002","qty":1,"unitCents":1500}],"declared":{"netCents":3498,"vatCents":0,"grossCents":3498}}"""^^rdf:JSON "/declared") string:jsonPointer """{"netCents":3498,"vatCents":0,"grossCents":3498}"""^^rdf:JSON .
#   ("""{"netCents":3498,"vatCents":0,"grossCents":3498}"""^^rdf:JSON "/netCents") string:jsonPointer 3498 .
#   ("""{"netCents":3498,"vatCents":0,"grossCents":3498}"""^^rdf:JSON "/vatCents") string:jsonPointer 0 .
#   ("""{"netCents":3498,"vatCents":0,"grossCents":3498}"""^^rdf:JSON "/grossCents") string:jsonPointer 3498 .
#   ("urn:example:order:%s" "A200") string:format "urn:example:order:A200" .
#   <urn:example:order:A200> log:uri "urn:example:order:A200" .
# via the schematic forward rule:
#   {
#     ex:feed ex:json ?J .
#     (?J "/orders") string:jsonPointer ?Orders .
#     ?Orders list:iterate (?OrderIndex ?OrderJson) .
#     (?OrderJson "/orderId") string:jsonPointer ?OrderId .
#     (?OrderJson "/shipTo/country") string:jsonPointer ?Country .
#     (?OrderJson "/customer") string:jsonPointer ?CustJson .
#     (?CustJson "/email") string:jsonPointer ?Email .
#     (?CustJson "/vatId") string:jsonPointer ?VatIdRaw .
#     (?OrderJson "/declared") string:jsonPointer ?Decl .
#     (?Decl "/netCents") string:jsonPointer ?NetD .
#     (?Decl "/vatCents") string:jsonPointer ?VatD .
#     (?Decl "/grossCents") string:jsonPointer ?GrossD .
#     ("urn:example:order:%s" ?OrderId) string:format ?OrderUriStr .
#     ?Order log:uri ?OrderUriStr .
#   } => {
#     ?Order a ex:Order .
#     ?Order ex:orderId ?OrderId .
#     ?Order ex:orderIndex ?OrderIndex .
#     ?Order ex:shipCountry ?Country .
#     ?Order ex:email ?Email .
#     ?Order ex:vatIdRaw ?VatIdRaw .
#     ?Order ex:declaredNetCents ?NetD .
#     ?Order ex:declaredVatCents ?VatD .
#     ?Order ex:declaredGrossCents ?GrossD .
#   } .
# with substitution (on rule variables):
#   ?Country = "US"
#   ?CustJson = """{"email":"bob@example.org","vatId":null}"""^^rdf:JSON
#   ?Decl = """{"netCents":3498,"vatCents":0,"grossCents":3498}"""^^rdf:JSON
#   ?Email = "bob@example.org"
#   ?GrossD = 3498
#   ?J = """{
#     "meta~data": { "batch": "2025-12-18" },
#     "orders": [
#     {
#     "orderId": "A100",
#     "shipTo": { "country": "BE" },
#     "customer": { "email": "Ada@Example.ORG", "vatId": null },
#     "lines": [
#     { "sku": "wid-001", "qty": 2, "unitCents": 999 },
#     { "sku": "GAD-002", "qty": 1, "unitCents": 1500 }
#     ],
#     "declared": { "netCents": 3498, "vatCents": 509, "grossCents": 4007 }
#     },
#     {
#     "orderId": "A200",
#     "shipTo": { "country": "US" },
#     "customer": { "email": "bob@example.org", "vatId": null },
#     "lines": [
#     { "sku": "WID-001", "qty": 2, "unitCents": 999 },
#     { "sku": "GAD-002", "qty": 1, "unitCents": 1500 }
#     ],
#     "declared": { "netCents": 3498, "vatCents": 0, "grossCents": 3498 }
#     },
#     {
#     "orderId": "A300",
#     "shipTo": { "country": "NL" },
#     "customer": { "email": "acct@company.nl", "vatId": "NL999999999B01" },
#     "lines": [
#     { "sku": "WID-001", "qty": 2, "unitCents": 999 },
#     { "sku": "GAD-002", "qty": 1, "unitCents": 1500 }
#     ],
#     "declared": { "netCents": 3498, "vatCents": 0, "grossCents": 3498 }
#     },
#     {
#     "orderId": "A301",
#     "shipTo": { "country": "NL" },
#     "customer": { "email": "billing@company.nl", "vatId": "NL999999999B01" },
#     "lines": [
#     { "sku": "WID-001", "qty": 2, "unitCents": 999 },
#     { "sku": "GAD-002", "qty": 1, "unitCents": 1500 }
#     ],
#     "declared": { "netCents": 3498, "vatCents": 0, "grossCents": 3498 }
#     },
#     {
#     "orderId": "A400",
#     "shipTo": { "country": "BE" },
#     "customer": { "email": "ada@other.example", "vatId": null },
#     "lines": [
#     { "sku": "WID-001", "qty": 2, "unitCents": 999 },
#     { "sku": "GAD-002", "qty": 1, "unitCents": 1500 }
#     ],
#     "declared": { "netCents": 3498, "vatCents": 508, "grossCents": 4006 }
#     }
#     ]
#   }"""^^rdf:JSON
#   ?NetD = 3498
#   ?Order = <urn:example:order:A200>
#   ?OrderId = "A200"
#   ?OrderIndex = 1
#   ?OrderJson = """{"orderId":"A200","shipTo":{"country":"US"},"customer":{"email":"bob@example.org","vatId":null},"lines":[{"sku":"WID-001","qty":2,"unitCents":999},{"sku":"GAD-002","qty":1,"unitCents":1500}],"declared":{"netCents":3498,"vatCents":0,"grossCents":3498}}"""^^rdf:JSON
#   ?OrderUriStr = "urn:example:order:A200"
#   ?Orders = ("""{"orderId":"A100","shipTo":{"country":"BE"},"customer":{"email":"Ada@Example.ORG","vatId":null},"lines":[{"sku":"wid-001","qty":2,"unitCents":999},{"sku":"GAD-002","qty":1,"unitCents":1500}],"declared":{"netCents":3498,"vatCents":509,"grossCents":4007}}"""^^rdf:JSON """{"orderId":"A200","shipTo":{"country":"US"},"customer":{"email":"bob@example.org","vatId":null},"lines":[{"sku":"WID-001","qty":2,"unitCents":999},{"sku":"GAD-002","qty":1,"unitCents":1500}],"declared":{"netCents":3498,"vatCents":0,"grossCents":3498}}"""^^rdf:JSON """{"orderId":"A300","shipTo":{"country":"NL"},"customer":{"email":"acct@company.nl","vatId":"NL999999999B01"},"lines":[{"sku":"WID-001","qty":2,"unitCents":999},{"sku":"GAD-002","qty":1,"unitCents":1500}],"declared":{"netCents":3498,"vatCents":0,"grossCents":3498}}"""^^rdf:JSON """{"orderId":"A301","shipTo":{"country":"NL"},"customer":{"email":"billing@company.nl","vatId":"NL999999999B01"},"lines":[{"sku":"WID-001","qty":2,"unitCents":999},{"sku":"GAD-002","qty":1,"unitCents":1500}],"declared":{"netCents":3498,"vatCents":0,"grossCents":3498}}"""^^rdf:JSON """{"orderId":"A400","shipTo":{"country":"BE"},"customer":{"email":"ada@other.example","vatId":null},"lines":[{"sku":"WID-001","qty":2,"unitCents":999},{"sku":"GAD-002","qty":1,"unitCents":1500}],"declared":{"netCents":3498,"vatCents":508,"grossCents":4006}}"""^^rdf:JSON)
#   ?VatD = 0
#   ?VatIdRaw = "null"
# Therefore the derived triple above is entailed by the rules and facts.
# ----------------------------------------------------------------------

<urn:example:order:A200> ex:orderIndex 1 .

# ----------------------------------------------------------------------
# Proof for derived triple:
#   <urn:example:order:A200> ex:shipCountry "US" .
# It holds because the following instance of the rule body is provable:
#   ex:feed ex:json """{
#     "meta~data": { "batch": "2025-12-18" },
#     "orders": [
#       {
#         "orderId": "A100",
#         "shipTo": { "country": "BE" },
#         "customer": { "email": "Ada@Example.ORG", "vatId": null },
#         "lines": [
#           { "sku": "wid-001", "qty": 2, "unitCents": 999 },
#           { "sku": "GAD-002", "qty": 1, "unitCents": 1500 }
#         ],
#         "declared": { "netCents": 3498, "vatCents": 509, "grossCents": 4007 }
#       },
#       {
#         "orderId": "A200",
#         "shipTo": { "country": "US" },
#         "customer": { "email": "bob@example.org", "vatId": null },
#         "lines": [
#           { "sku": "WID-001", "qty": 2, "unitCents": 999 },
#           { "sku": "GAD-002", "qty": 1, "unitCents": 1500 }
#         ],
#         "declared": { "netCents": 3498, "vatCents": 0, "grossCents": 3498 }
#       },
#       {
#         "orderId": "A300",
#         "shipTo": { "country": "NL" },
#         "customer": { "email": "acct@company.nl", "vatId": "NL999999999B01" },
#         "lines": [
#           { "sku": "WID-001", "qty": 2, "unitCents": 999 },
#           { "sku": "GAD-002", "qty": 1, "unitCents": 1500 }
#         ],
#         "declared": { "netCents": 3498, "vatCents": 0, "grossCents": 3498 }
#       },
#       {
#         "orderId": "A301",
#         "shipTo": { "country": "NL" },
#         "customer": { "email": "billing@company.nl", "vatId": "NL999999999B01" },
#         "lines": [
#           { "sku": "WID-001", "qty": 2, "unitCents": 999 },
#           { "sku": "GAD-002", "qty": 1, "unitCents": 1500 }
#         ],
#         "declared": { "netCents": 3498, "vatCents": 0, "grossCents": 3498 }
#       },
#       {
#         "orderId": "A400",
#         "shipTo": { "country": "BE" },
#         "customer": { "email": "ada@other.example", "vatId": null },
#         "lines": [
#           { "sku": "WID-001", "qty": 2, "unitCents": 999 },
#           { "sku": "GAD-002", "qty": 1, "unitCents": 1500 }
#         ],
#         "declared": { "netCents": 3498, "vatCents": 508, "grossCents": 4006 }
#       }
#     ]
#   }"""^^rdf:JSON .
#   ("""{
#     "meta~data": { "batch": "2025-12-18" },
#     "orders": [
#       {
#         "orderId": "A100",
#         "shipTo": { "country": "BE" },
#         "customer": { "email": "Ada@Example.ORG", "vatId": null },
#         "lines": [
#           { "sku": "wid-001", "qty": 2, "unitCents": 999 },
#           { "sku": "GAD-002", "qty": 1, "unitCents": 1500 }
#         ],
#         "declared": { "netCents": 3498, "vatCents": 509, "grossCents": 4007 }
#       },
#       {
#         "orderId": "A200",
#         "shipTo": { "country": "US" },
#         "customer": { "email": "bob@example.org", "vatId": null },
#         "lines": [
#           { "sku": "WID-001", "qty": 2, "unitCents": 999 },
#           { "sku": "GAD-002", "qty": 1, "unitCents": 1500 }
#         ],
#         "declared": { "netCents": 3498, "vatCents": 0, "grossCents": 3498 }
#       },
#       {
#         "orderId": "A300",
#         "shipTo": { "country": "NL" },
#         "customer": { "email": "acct@company.nl", "vatId": "NL999999999B01" },
#         "lines": [
#           { "sku": "WID-001", "qty": 2, "unitCents": 999 },
#           { "sku": "GAD-002", "qty": 1, "unitCents": 1500 }
#         ],
#         "declared": { "netCents": 3498, "vatCents": 0, "grossCents": 3498 }
#       },
#       {
#         "orderId": "A301",
#         "shipTo": { "country": "NL" },
#         "customer": { "email": "billing@company.nl", "vatId": "NL999999999B01" },
#         "lines": [
#           { "sku": "WID-001", "qty": 2, "unitCents": 999 },
#           { "sku": "GAD-002", "qty": 1, "unitCents": 1500 }
#         ],
#         "declared": { "netCents": 3498, "vatCents": 0, "grossCents": 3498 }
#       },
#       {
#         "orderId": "A400",
#         "shipTo": { "country": "BE" },
#         "customer": { "email": "ada@other.example", "vatId": null },
#         "lines": [
#           { "sku": "WID-001", "qty": 2, "unitCents": 999 },
#           { "sku": "GAD-002", "qty": 1, "unitCents": 1500 }
#         ],
#         "declared": { "netCents": 3498, "vatCents": 508, "grossCents": 4006 }
#       }
#     ]
#   }"""^^rdf:JSON "/orders") string:jsonPointer ("""{"orderId":"A100","shipTo":{"country":"BE"},"customer":{"email":"Ada@Example.ORG","vatId":null},"lines":[{"sku":"wid-001","qty":2,"unitCents":999},{"sku":"GAD-002","qty":1,"unitCents":1500}],"declared":{"netCents":3498,"vatCents":509,"grossCents":4007}}"""^^rdf:JSON """{"orderId":"A200","shipTo":{"country":"US"},"customer":{"email":"bob@example.org","vatId":null},"lines":[{"sku":"WID-001","qty":2,"unitCents":999},{"sku":"GAD-002","qty":1,"unitCents":1500}],"declared":{"netCents":3498,"vatCents":0,"grossCents":3498}}"""^^rdf:JSON """{"orderId":"A300","shipTo":{"country":"NL"},"customer":{"email":"acct@company.nl","vatId":"NL999999999B01"},"lines":[{"sku":"WID-001","qty":2,"unitCents":999},{"sku":"GAD-002","qty":1,"unitCents":1500}],"declared":{"netCents":3498,"vatCents":0,"grossCents":3498}}"""^^rdf:JSON """{"orderId":"A301","shipTo":{"country":"NL"},"customer":{"email":"billing@company.nl","vatId":"NL999999999B01"},"lines":[{"sku":"WID-001","qty":2,"unitCents":999},{"sku":"GAD-002","qty":1,"unitCents":1500}],"declared":{"netCents":3498,"vatCents":0,"grossCents":3498}}"""^^rdf:JSON """{"orderId":"A400","shipTo":{"country":"BE"},"customer":{"email":"ada@other.example","vatId":null},"lines":[{"sku":"WID-001","qty":2,"unitCents":999},{"sku":"GAD-002","qty":1,"unitCents":1500}],"declared":{"netCents":3498,"vatCents":508,"grossCents":4006}}"""^^rdf:JSON) .
#   ("""{"orderId":"A100","shipTo":{"country":"BE"},"customer":{"email":"Ada@Example.ORG","vatId":null},"lines":[{"sku":"wid-001","qty":2,"unitCents":999},{"sku":"GAD-002","qty":1,"unitCents":1500}],"declared":{"netCents":3498,"vatCents":509,"grossCents":4007}}"""^^rdf:JSON """{"orderId":"A200","shipTo":{"country":"US"},"customer":{"email":"bob@example.org","vatId":null},"lines":[{"sku":"WID-001","qty":2,"unitCents":999},{"sku":"GAD-002","qty":1,"unitCents":1500}],"declared":{"netCents":3498,"vatCents":0,"grossCents":3498}}"""^^rdf:JSON """{"orderId":"A300","shipTo":{"country":"NL"},"customer":{"email":"acct@company.nl","vatId":"NL999999999B01"},"lines":[{"sku":"WID-001","qty":2,"unitCents":999},{"sku":"GAD-002","qty":1,"unitCents":1500}],"declared":{"netCents":3498,"vatCents":0,"grossCents":3498}}"""^^rdf:JSON """{"orderId":"A301","shipTo":{"country":"NL"},"customer":{"email":"billing@company.nl","vatId":"NL999999999B01"},"lines":[{"sku":"WID-001","qty":2,"unitCents":999},{"sku":"GAD-002","qty":1,"unitCents":1500}],"declared":{"netCents":3498,"vatCents":0,"grossCents":3498}}"""^^rdf:JSON """{"orderId":"A400","shipTo":{"country":"BE"},"customer":{"email":"ada@other.example","vatId":null},"lines":[{"sku":"WID-001","qty":2,"unitCents":999},{"sku":"GAD-002","qty":1,"unitCents":1500}],"declared":{"netCents":3498,"vatCents":508,"grossCents":4006}}"""^^rdf:JSON) list:iterate (1 """{"orderId":"A200","shipTo":{"country":"US"},"customer":{"email":"bob@example.org","vatId":null},"lines":[{"sku":"WID-001","qty":2,"unitCents":999},{"sku":"GAD-002","qty":1,"unitCents":1500}],"declared":{"netCents":3498,"vatCents":0,"grossCents":3498}}"""^^rdf:JSON) .
#   ("""{"orderId":"A200","shipTo":{"country":"US"},"customer":{"email":"bob@example.org","vatId":null},"lines":[{"sku":"WID-001","qty":2,"unitCents":999},{"sku":"GAD-002","qty":1,"unitCents":1500}],"declared":{"netCents":3498,"vatCents":0,"grossCents":3498}}"""^^rdf:JSON "/orderId") string:jsonPointer "A200" .
#   ("""{"orderId":"A200","shipTo":{"country":"US"},"customer":{"email":"bob@example.org","vatId":null},"lines":[{"sku":"WID-001","qty":2,"unitCents":999},{"sku":"GAD-002","qty":1,"unitCents":1500}],"declared":{"netCents":3498,"vatCents":0,"grossCents":3498}}"""^^rdf:JSON "/shipTo/country") string:jsonPointer "US" .
#   ("""{"orderId":"A200","shipTo":{"country":"US"},"customer":{"email":"bob@example.org","vatId":null},"lines":[{"sku":"WID-001","qty":2,"unitCents":999},{"sku":"GAD-002","qty":1,"unitCents":1500}],"declared":{"netCents":3498,"vatCents":0,"grossCents":3498}}"""^^rdf:JSON "/customer") string:jsonPointer """{"email":"bob@example.org","vatId":null}"""^^rdf:JSON .
#   ("""{"email":"bob@example.org","vatId":null}"""^^rdf:JSON "/email") string:jsonPointer "bob@example.org" .
#   ("""{"email":"bob@example.org","vatId":null}"""^^rdf:JSON "/vatId") string:jsonPointer "null" .
#   ("""{"orderId":"A200","shipTo":{"country":"US"},"customer":{"email":"bob@example.org","vatId":null},"lines":[{"sku":"WID-001","qty":2,"unitCents":999},{"sku":"GAD-002","qty":1,"unitCents":1500}],"declared":{"netCents":3498,"vatCents":0,"grossCents":3498}}"""^^rdf:JSON "/declared") string:jsonPointer """{"netCents":3498,"vatCents":0,"grossCents":3498}"""^^rdf:JSON .
#   ("""{"netCents":3498,"vatCents":0,"grossCents":3498}"""^^rdf:JSON "/netCents") string:jsonPointer 3498 .
#   ("""{"netCents":3498,"vatCents":0,"grossCents":3498}"""^^rdf:JSON "/vatCents") string:jsonPointer 0 .
#   ("""{"netCents":3498,"vatCents":0,"grossCents":3498}"""^^rdf:JSON "/grossCents") string:jsonPointer 3498 .
#   ("urn:example:order:%s" "A200") string:format "urn:example:order:A200" .
#   <urn:example:order:A200> log:uri "urn:example:order:A200" .
# via the schematic forward rule:
#   {
#     ex:feed ex:json ?J .
#     (?J "/orders") string:jsonPointer ?Orders .
#     ?Orders list:iterate (?OrderIndex ?OrderJson) .
#     (?OrderJson "/orderId") string:jsonPointer ?OrderId .
#     (?OrderJson "/shipTo/country") string:jsonPointer ?Country .
#     (?OrderJson "/customer") string:jsonPointer ?CustJson .
#     (?CustJson "/email") string:jsonPointer ?Email .
#     (?CustJson "/vatId") string:jsonPointer ?VatIdRaw .
#     (?OrderJson "/declared") string:jsonPointer ?Decl .
#     (?Decl "/netCents") string:jsonPointer ?NetD .
#     (?Decl "/vatCents") string:jsonPointer ?VatD .
#     (?Decl "/grossCents") string:jsonPointer ?GrossD .
#     ("urn:example:order:%s" ?OrderId) string:format ?OrderUriStr .
#     ?Order log:uri ?OrderUriStr .
#   } => {
#     ?Order a ex:Order .
#     ?Order ex:orderId ?OrderId .
#     ?Order ex:orderIndex ?OrderIndex .
#     ?Order ex:shipCountry ?Country .
#     ?Order ex:email ?Email .
#     ?Order ex:vatIdRaw ?VatIdRaw .
#     ?Order ex:declaredNetCents ?NetD .
#     ?Order ex:declaredVatCents ?VatD .
#     ?Order ex:declaredGrossCents ?GrossD .
#   } .
# with substitution (on rule variables):
#   ?Country = "US"
#   ?CustJson = """{"email":"bob@example.org","vatId":null}"""^^rdf:JSON
#   ?Decl = """{"netCents":3498,"vatCents":0,"grossCents":3498}"""^^rdf:JSON
#   ?Email = "bob@example.org"
#   ?GrossD = 3498
#   ?J = """{
#     "meta~data": { "batch": "2025-12-18" },
#     "orders": [
#     {
#     "orderId": "A100",
#     "shipTo": { "country": "BE" },
#     "customer": { "email": "Ada@Example.ORG", "vatId": null },
#     "lines": [
#     { "sku": "wid-001", "qty": 2, "unitCents": 999 },
#     { "sku": "GAD-002", "qty": 1, "unitCents": 1500 }
#     ],
#     "declared": { "netCents": 3498, "vatCents": 509, "grossCents": 4007 }
#     },
#     {
#     "orderId": "A200",
#     "shipTo": { "country": "US" },
#     "customer": { "email": "bob@example.org", "vatId": null },
#     "lines": [
#     { "sku": "WID-001", "qty": 2, "unitCents": 999 },
#     { "sku": "GAD-002", "qty": 1, "unitCents": 1500 }
#     ],
#     "declared": { "netCents": 3498, "vatCents": 0, "grossCents": 3498 }
#     },
#     {
#     "orderId": "A300",
#     "shipTo": { "country": "NL" },
#     "customer": { "email": "acct@company.nl", "vatId": "NL999999999B01" },
#     "lines": [
#     { "sku": "WID-001", "qty": 2, "unitCents": 999 },
#     { "sku": "GAD-002", "qty": 1, "unitCents": 1500 }
#     ],
#     "declared": { "netCents": 3498, "vatCents": 0, "grossCents": 3498 }
#     },
#     {
#     "orderId": "A301",
#     "shipTo": { "country": "NL" },
#     "customer": { "email": "billing@company.nl", "vatId": "NL999999999B01" },
#     "lines": [
#     { "sku": "WID-001", "qty": 2, "unitCents": 999 },
#     { "sku": "GAD-002", "qty": 1, "unitCents": 1500 }
#     ],
#     "declared": { "netCents": 3498, "vatCents": 0, "grossCents": 3498 }
#     },
#     {
#     "orderId": "A400",
#     "shipTo": { "country": "BE" },
#     "customer": { "email": "ada@other.example", "vatId": null },
#     "lines": [
#     { "sku": "WID-001", "qty": 2, "unitCents": 999 },
#     { "sku": "GAD-002", "qty": 1, "unitCents": 1500 }
#     ],
#     "declared": { "netCents": 3498, "vatCents": 508, "grossCents": 4006 }
#     }
#     ]
#   }"""^^rdf:JSON
#   ?NetD = 3498
#   ?Order = <urn:example:order:A200>
#   ?OrderId = "A200"
#   ?OrderIndex = 1
#   ?OrderJson = """{"orderId":"A200","shipTo":{"country":"US"},"customer":{"email":"bob@example.org","vatId":null},"lines":[{"sku":"WID-001","qty":2,"unitCents":999},{"sku":"GAD-002","qty":1,"unitCents":1500}],"declared":{"netCents":3498,"vatCents":0,"grossCents":3498}}"""^^rdf:JSON
#   ?OrderUriStr = "urn:example:order:A200"
#   ?Orders = ("""{"orderId":"A100","shipTo":{"country":"BE"},"customer":{"email":"Ada@Example.ORG","vatId":null},"lines":[{"sku":"wid-001","qty":2,"unitCents":999},{"sku":"GAD-002","qty":1,"unitCents":1500}],"declared":{"netCents":3498,"vatCents":509,"grossCents":4007}}"""^^rdf:JSON """{"orderId":"A200","shipTo":{"country":"US"},"customer":{"email":"bob@example.org","vatId":null},"lines":[{"sku":"WID-001","qty":2,"unitCents":999},{"sku":"GAD-002","qty":1,"unitCents":1500}],"declared":{"netCents":3498,"vatCents":0,"grossCents":3498}}"""^^rdf:JSON """{"orderId":"A300","shipTo":{"country":"NL"},"customer":{"email":"acct@company.nl","vatId":"NL999999999B01"},"lines":[{"sku":"WID-001","qty":2,"unitCents":999},{"sku":"GAD-002","qty":1,"unitCents":1500}],"declared":{"netCents":3498,"vatCents":0,"grossCents":3498}}"""^^rdf:JSON """{"orderId":"A301","shipTo":{"country":"NL"},"customer":{"email":"billing@company.nl","vatId":"NL999999999B01"},"lines":[{"sku":"WID-001","qty":2,"unitCents":999},{"sku":"GAD-002","qty":1,"unitCents":1500}],"declared":{"netCents":3498,"vatCents":0,"grossCents":3498}}"""^^rdf:JSON """{"orderId":"A400","shipTo":{"country":"BE"},"customer":{"email":"ada@other.example","vatId":null},"lines":[{"sku":"WID-001","qty":2,"unitCents":999},{"sku":"GAD-002","qty":1,"unitCents":1500}],"declared":{"netCents":3498,"vatCents":508,"grossCents":4006}}"""^^rdf:JSON)
#   ?VatD = 0
#   ?VatIdRaw = "null"
# Therefore the derived triple above is entailed by the rules and facts.
# ----------------------------------------------------------------------

<urn:example:order:A200> ex:shipCountry "US" .

# ----------------------------------------------------------------------
# Proof for derived triple:
#   <urn:example:order:A200> ex:email "bob@example.org" .
# It holds because the following instance of the rule body is provable:
#   ex:feed ex:json """{
#     "meta~data": { "batch": "2025-12-18" },
#     "orders": [
#       {
#         "orderId": "A100",
#         "shipTo": { "country": "BE" },
#         "customer": { "email": "Ada@Example.ORG", "vatId": null },
#         "lines": [
#           { "sku": "wid-001", "qty": 2, "unitCents": 999 },
#           { "sku": "GAD-002", "qty": 1, "unitCents": 1500 }
#         ],
#         "declared": { "netCents": 3498, "vatCents": 509, "grossCents": 4007 }
#       },
#       {
#         "orderId": "A200",
#         "shipTo": { "country": "US" },
#         "customer": { "email": "bob@example.org", "vatId": null },
#         "lines": [
#           { "sku": "WID-001", "qty": 2, "unitCents": 999 },
#           { "sku": "GAD-002", "qty": 1, "unitCents": 1500 }
#         ],
#         "declared": { "netCents": 3498, "vatCents": 0, "grossCents": 3498 }
#       },
#       {
#         "orderId": "A300",
#         "shipTo": { "country": "NL" },
#         "customer": { "email": "acct@company.nl", "vatId": "NL999999999B01" },
#         "lines": [
#           { "sku": "WID-001", "qty": 2, "unitCents": 999 },
#           { "sku": "GAD-002", "qty": 1, "unitCents": 1500 }
#         ],
#         "declared": { "netCents": 3498, "vatCents": 0, "grossCents": 3498 }
#       },
#       {
#         "orderId": "A301",
#         "shipTo": { "country": "NL" },
#         "customer": { "email": "billing@company.nl", "vatId": "NL999999999B01" },
#         "lines": [
#           { "sku": "WID-001", "qty": 2, "unitCents": 999 },
#           { "sku": "GAD-002", "qty": 1, "unitCents": 1500 }
#         ],
#         "declared": { "netCents": 3498, "vatCents": 0, "grossCents": 3498 }
#       },
#       {
#         "orderId": "A400",
#         "shipTo": { "country": "BE" },
#         "customer": { "email": "ada@other.example", "vatId": null },
#         "lines": [
#           { "sku": "WID-001", "qty": 2, "unitCents": 999 },
#           { "sku": "GAD-002", "qty": 1, "unitCents": 1500 }
#         ],
#         "declared": { "netCents": 3498, "vatCents": 508, "grossCents": 4006 }
#       }
#     ]
#   }"""^^rdf:JSON .
#   ("""{
#     "meta~data": { "batch": "2025-12-18" },
#     "orders": [
#       {
#         "orderId": "A100",
#         "shipTo": { "country": "BE" },
#         "customer": { "email": "Ada@Example.ORG", "vatId": null },
#         "lines": [
#           { "sku": "wid-001", "qty": 2, "unitCents": 999 },
#           { "sku": "GAD-002", "qty": 1, "unitCents": 1500 }
#         ],
#         "declared": { "netCents": 3498, "vatCents": 509, "grossCents": 4007 }
#       },
#       {
#         "orderId": "A200",
#         "shipTo": { "country": "US" },
#         "customer": { "email": "bob@example.org", "vatId": null },
#         "lines": [
#           { "sku": "WID-001", "qty": 2, "unitCents": 999 },
#           { "sku": "GAD-002", "qty": 1, "unitCents": 1500 }
#         ],
#         "declared": { "netCents": 3498, "vatCents": 0, "grossCents": 3498 }
#       },
#       {
#         "orderId": "A300",
#         "shipTo": { "country": "NL" },
#         "customer": { "email": "acct@company.nl", "vatId": "NL999999999B01" },
#         "lines": [
#           { "sku": "WID-001", "qty": 2, "unitCents": 999 },
#           { "sku": "GAD-002", "qty": 1, "unitCents": 1500 }
#         ],
#         "declared": { "netCents": 3498, "vatCents": 0, "grossCents": 3498 }
#       },
#       {
#         "orderId": "A301",
#         "shipTo": { "country": "NL" },
#         "customer": { "email": "billing@company.nl", "vatId": "NL999999999B01" },
#         "lines": [
#           { "sku": "WID-001", "qty": 2, "unitCents": 999 },
#           { "sku": "GAD-002", "qty": 1, "unitCents": 1500 }
#         ],
#         "declared": { "netCents": 3498, "vatCents": 0, "grossCents": 3498 }
#       },
#       {
#         "orderId": "A400",
#         "shipTo": { "country": "BE" },
#         "customer": { "email": "ada@other.example", "vatId": null },
#         "lines": [
#           { "sku": "WID-001", "qty": 2, "unitCents": 999 },
#           { "sku": "GAD-002", "qty": 1, "unitCents": 1500 }
#         ],
#         "declared": { "netCents": 3498, "vatCents": 508, "grossCents": 4006 }
#       }
#     ]
#   }"""^^rdf:JSON "/orders") string:jsonPointer ("""{"orderId":"A100","shipTo":{"country":"BE"},"customer":{"email":"Ada@Example.ORG","vatId":null},"lines":[{"sku":"wid-001","qty":2,"unitCents":999},{"sku":"GAD-002","qty":1,"unitCents":1500}],"declared":{"netCents":3498,"vatCents":509,"grossCents":4007}}"""^^rdf:JSON """{"orderId":"A200","shipTo":{"country":"US"},"customer":{"email":"bob@example.org","vatId":null},"lines":[{"sku":"WID-001","qty":2,"unitCents":999},{"sku":"GAD-002","qty":1,"unitCents":1500}],"declared":{"netCents":3498,"vatCents":0,"grossCents":3498}}"""^^rdf:JSON """{"orderId":"A300","shipTo":{"country":"NL"},"customer":{"email":"acct@company.nl","vatId":"NL999999999B01"},"lines":[{"sku":"WID-001","qty":2,"unitCents":999},{"sku":"GAD-002","qty":1,"unitCents":1500}],"declared":{"netCents":3498,"vatCents":0,"grossCents":3498}}"""^^rdf:JSON """{"orderId":"A301","shipTo":{"country":"NL"},"customer":{"email":"billing@company.nl","vatId":"NL999999999B01"},"lines":[{"sku":"WID-001","qty":2,"unitCents":999},{"sku":"GAD-002","qty":1,"unitCents":1500}],"declared":{"netCents":3498,"vatCents":0,"grossCents":3498}}"""^^rdf:JSON """{"orderId":"A400","shipTo":{"country":"BE"},"customer":{"email":"ada@other.example","vatId":null},"lines":[{"sku":"WID-001","qty":2,"unitCents":999},{"sku":"GAD-002","qty":1,"unitCents":1500}],"declared":{"netCents":3498,"vatCents":508,"grossCents":4006}}"""^^rdf:JSON) .
#   ("""{"orderId":"A100","shipTo":{"country":"BE"},"customer":{"email":"Ada@Example.ORG","vatId":null},"lines":[{"sku":"wid-001","qty":2,"unitCents":999},{"sku":"GAD-002","qty":1,"unitCents":1500}],"declared":{"netCents":3498,"vatCents":509,"grossCents":4007}}"""^^rdf:JSON """{"orderId":"A200","shipTo":{"country":"US"},"customer":{"email":"bob@example.org","vatId":null},"lines":[{"sku":"WID-001","qty":2,"unitCents":999},{"sku":"GAD-002","qty":1,"unitCents":1500}],"declared":{"netCents":3498,"vatCents":0,"grossCents":3498}}"""^^rdf:JSON """{"orderId":"A300","shipTo":{"country":"NL"},"customer":{"email":"acct@company.nl","vatId":"NL999999999B01"},"lines":[{"sku":"WID-001","qty":2,"unitCents":999},{"sku":"GAD-002","qty":1,"unitCents":1500}],"declared":{"netCents":3498,"vatCents":0,"grossCents":3498}}"""^^rdf:JSON """{"orderId":"A301","shipTo":{"country":"NL"},"customer":{"email":"billing@company.nl","vatId":"NL999999999B01"},"lines":[{"sku":"WID-001","qty":2,"unitCents":999},{"sku":"GAD-002","qty":1,"unitCents":1500}],"declared":{"netCents":3498,"vatCents":0,"grossCents":3498}}"""^^rdf:JSON """{"orderId":"A400","shipTo":{"country":"BE"},"customer":{"email":"ada@other.example","vatId":null},"lines":[{"sku":"WID-001","qty":2,"unitCents":999},{"sku":"GAD-002","qty":1,"unitCents":1500}],"declared":{"netCents":3498,"vatCents":508,"grossCents":4006}}"""^^rdf:JSON) list:iterate (1 """{"orderId":"A200","shipTo":{"country":"US"},"customer":{"email":"bob@example.org","vatId":null},"lines":[{"sku":"WID-001","qty":2,"unitCents":999},{"sku":"GAD-002","qty":1,"unitCents":1500}],"declared":{"netCents":3498,"vatCents":0,"grossCents":3498}}"""^^rdf:JSON) .
#   ("""{"orderId":"A200","shipTo":{"country":"US"},"customer":{"email":"bob@example.org","vatId":null},"lines":[{"sku":"WID-001","qty":2,"unitCents":999},{"sku":"GAD-002","qty":1,"unitCents":1500}],"declared":{"netCents":3498,"vatCents":0,"grossCents":3498}}"""^^rdf:JSON "/orderId") string:jsonPointer "A200" .
#   ("""{"orderId":"A200","shipTo":{"country":"US"},"customer":{"email":"bob@example.org","vatId":null},"lines":[{"sku":"WID-001","qty":2,"unitCents":999},{"sku":"GAD-002","qty":1,"unitCents":1500}],"declared":{"netCents":3498,"vatCents":0,"grossCents":3498}}"""^^rdf:JSON "/shipTo/country") string:jsonPointer "US" .
#   ("""{"orderId":"A200","shipTo":{"country":"US"},"customer":{"email":"bob@example.org","vatId":null},"lines":[{"sku":"WID-001","qty":2,"unitCents":999},{"sku":"GAD-002","qty":1,"unitCents":1500}],"declared":{"netCents":3498,"vatCents":0,"grossCents":3498}}"""^^rdf:JSON "/customer") string:jsonPointer """{"email":"bob@example.org","vatId":null}"""^^rdf:JSON .
#   ("""{"email":"bob@example.org","vatId":null}"""^^rdf:JSON "/email") string:jsonPointer "bob@example.org" .
#   ("""{"email":"bob@example.org","vatId":null}"""^^rdf:JSON "/vatId") string:jsonPointer "null" .
#   ("""{"orderId":"A200","shipTo":{"country":"US"},"customer":{"email":"bob@example.org","vatId":null},"lines":[{"sku":"WID-001","qty":2,"unitCents":999},{"sku":"GAD-002","qty":1,"unitCents":1500}],"declared":{"netCents":3498,"vatCents":0,"grossCents":3498}}"""^^rdf:JSON "/declared") string:jsonPointer """{"netCents":3498,"vatCents":0,"grossCents":3498}"""^^rdf:JSON .
#   ("""{"netCents":3498,"vatCents":0,"grossCents":3498}"""^^rdf:JSON "/netCents") string:jsonPointer 3498 .
#   ("""{"netCents":3498,"vatCents":0,"grossCents":3498}"""^^rdf:JSON "/vatCents") string:jsonPointer 0 .
#   ("""{"netCents":3498,"vatCents":0,"grossCents":3498}"""^^rdf:JSON "/grossCents") string:jsonPointer 3498 .
#   ("urn:example:order:%s" "A200") string:format "urn:example:order:A200" .
#   <urn:example:order:A200> log:uri "urn:example:order:A200" .
# via the schematic forward rule:
#   {
#     ex:feed ex:json ?J .
#     (?J "/orders") string:jsonPointer ?Orders .
#     ?Orders list:iterate (?OrderIndex ?OrderJson) .
#     (?OrderJson "/orderId") string:jsonPointer ?OrderId .
#     (?OrderJson "/shipTo/country") string:jsonPointer ?Country .
#     (?OrderJson "/customer") string:jsonPointer ?CustJson .
#     (?CustJson "/email") string:jsonPointer ?Email .
#     (?CustJson "/vatId") string:jsonPointer ?VatIdRaw .
#     (?OrderJson "/declared") string:jsonPointer ?Decl .
#     (?Decl "/netCents") string:jsonPointer ?NetD .
#     (?Decl "/vatCents") string:jsonPointer ?VatD .
#     (?Decl "/grossCents") string:jsonPointer ?GrossD .
#     ("urn:example:order:%s" ?OrderId) string:format ?OrderUriStr .
#     ?Order log:uri ?OrderUriStr .
#   } => {
#     ?Order a ex:Order .
#     ?Order ex:orderId ?OrderId .
#     ?Order ex:orderIndex ?OrderIndex .
#     ?Order ex:shipCountry ?Country .
#     ?Order ex:email ?Email .
#     ?Order ex:vatIdRaw ?VatIdRaw .
#     ?Order ex:declaredNetCents ?NetD .
#     ?Order ex:declaredVatCents ?VatD .
#     ?Order ex:declaredGrossCents ?GrossD .
#   } .
# with substitution (on rule variables):
#   ?Country = "US"
#   ?CustJson = """{"email":"bob@example.org","vatId":null}"""^^rdf:JSON
#   ?Decl = """{"netCents":3498,"vatCents":0,"grossCents":3498}"""^^rdf:JSON
#   ?Email = "bob@example.org"
#   ?GrossD = 3498
#   ?J = """{
#     "meta~data": { "batch": "2025-12-18" },
#     "orders": [
#     {
#     "orderId": "A100",
#     "shipTo": { "country": "BE" },
#     "customer": { "email": "Ada@Example.ORG", "vatId": null },
#     "lines": [
#     { "sku": "wid-001", "qty": 2, "unitCents": 999 },
#     { "sku": "GAD-002", "qty": 1, "unitCents": 1500 }
#     ],
#     "declared": { "netCents": 3498, "vatCents": 509, "grossCents": 4007 }
#     },
#     {
#     "orderId": "A200",
#     "shipTo": { "country": "US" },
#     "customer": { "email": "bob@example.org", "vatId": null },
#     "lines": [
#     { "sku": "WID-001", "qty": 2, "unitCents": 999 },
#     { "sku": "GAD-002", "qty": 1, "unitCents": 1500 }
#     ],
#     "declared": { "netCents": 3498, "vatCents": 0, "grossCents": 3498 }
#     },
#     {
#     "orderId": "A300",
#     "shipTo": { "country": "NL" },
#     "customer": { "email": "acct@company.nl", "vatId": "NL999999999B01" },
#     "lines": [
#     { "sku": "WID-001", "qty": 2, "unitCents": 999 },
#     { "sku": "GAD-002", "qty": 1, "unitCents": 1500 }
#     ],
#     "declared": { "netCents": 3498, "vatCents": 0, "grossCents": 3498 }
#     },
#     {
#     "orderId": "A301",
#     "shipTo": { "country": "NL" },
#     "customer": { "email": "billing@company.nl", "vatId": "NL999999999B01" },
#     "lines": [
#     { "sku": "WID-001", "qty": 2, "unitCents": 999 },
#     { "sku": "GAD-002", "qty": 1, "unitCents": 1500 }
#     ],
#     "declared": { "netCents": 3498, "vatCents": 0, "grossCents": 3498 }
#     },
#     {
#     "orderId": "A400",
#     "shipTo": { "country": "BE" },
#     "customer": { "email": "ada@other.example", "vatId": null },
#     "lines": [
#     { "sku": "WID-001", "qty": 2, "unitCents": 999 },
#     { "sku": "GAD-002", "qty": 1, "unitCents": 1500 }
#     ],
#     "declared": { "netCents": 3498, "vatCents": 508, "grossCents": 4006 }
#     }
#     ]
#   }"""^^rdf:JSON
#   ?NetD = 3498
#   ?Order = <urn:example:order:A200>
#   ?OrderId = "A200"
#   ?OrderIndex = 1
#   ?OrderJson = """{"orderId":"A200","shipTo":{"country":"US"},"customer":{"email":"bob@example.org","vatId":null},"lines":[{"sku":"WID-001","qty":2,"unitCents":999},{"sku":"GAD-002","qty":1,"unitCents":1500}],"declared":{"netCents":3498,"vatCents":0,"grossCents":3498}}"""^^rdf:JSON
#   ?OrderUriStr = "urn:example:order:A200"
#   ?Orders = ("""{"orderId":"A100","shipTo":{"country":"BE"},"customer":{"email":"Ada@Example.ORG","vatId":null},"lines":[{"sku":"wid-001","qty":2,"unitCents":999},{"sku":"GAD-002","qty":1,"unitCents":1500}],"declared":{"netCents":3498,"vatCents":509,"grossCents":4007}}"""^^rdf:JSON """{"orderId":"A200","shipTo":{"country":"US"},"customer":{"email":"bob@example.org","vatId":null},"lines":[{"sku":"WID-001","qty":2,"unitCents":999},{"sku":"GAD-002","qty":1,"unitCents":1500}],"declared":{"netCents":3498,"vatCents":0,"grossCents":3498}}"""^^rdf:JSON """{"orderId":"A300","shipTo":{"country":"NL"},"customer":{"email":"acct@company.nl","vatId":"NL999999999B01"},"lines":[{"sku":"WID-001","qty":2,"unitCents":999},{"sku":"GAD-002","qty":1,"unitCents":1500}],"declared":{"netCents":3498,"vatCents":0,"grossCents":3498}}"""^^rdf:JSON """{"orderId":"A301","shipTo":{"country":"NL"},"customer":{"email":"billing@company.nl","vatId":"NL999999999B01"},"lines":[{"sku":"WID-001","qty":2,"unitCents":999},{"sku":"GAD-002","qty":1,"unitCents":1500}],"declared":{"netCents":3498,"vatCents":0,"grossCents":3498}}"""^^rdf:JSON """{"orderId":"A400","shipTo":{"country":"BE"},"customer":{"email":"ada@other.example","vatId":null},"lines":[{"sku":"WID-001","qty":2,"unitCents":999},{"sku":"GAD-002","qty":1,"unitCents":1500}],"declared":{"netCents":3498,"vatCents":508,"grossCents":4006}}"""^^rdf:JSON)
#   ?VatD = 0
#   ?VatIdRaw = "null"
# Therefore the derived triple above is entailed by the rules and facts.
# ----------------------------------------------------------------------

<urn:example:order:A200> ex:email "bob@example.org" .

# ----------------------------------------------------------------------
# Proof for derived triple:
#   <urn:example:order:A200> ex:vatIdRaw "null" .
# It holds because the following instance of the rule body is provable:
#   ex:feed ex:json """{
#     "meta~data": { "batch": "2025-12-18" },
#     "orders": [
#       {
#         "orderId": "A100",
#         "shipTo": { "country": "BE" },
#         "customer": { "email": "Ada@Example.ORG", "vatId": null },
#         "lines": [
#           { "sku": "wid-001", "qty": 2, "unitCents": 999 },
#           { "sku": "GAD-002", "qty": 1, "unitCents": 1500 }
#         ],
#         "declared": { "netCents": 3498, "vatCents": 509, "grossCents": 4007 }
#       },
#       {
#         "orderId": "A200",
#         "shipTo": { "country": "US" },
#         "customer": { "email": "bob@example.org", "vatId": null },
#         "lines": [
#           { "sku": "WID-001", "qty": 2, "unitCents": 999 },
#           { "sku": "GAD-002", "qty": 1, "unitCents": 1500 }
#         ],
#         "declared": { "netCents": 3498, "vatCents": 0, "grossCents": 3498 }
#       },
#       {
#         "orderId": "A300",
#         "shipTo": { "country": "NL" },
#         "customer": { "email": "acct@company.nl", "vatId": "NL999999999B01" },
#         "lines": [
#           { "sku": "WID-001", "qty": 2, "unitCents": 999 },
#           { "sku": "GAD-002", "qty": 1, "unitCents": 1500 }
#         ],
#         "declared": { "netCents": 3498, "vatCents": 0, "grossCents": 3498 }
#       },
#       {
#         "orderId": "A301",
#         "shipTo": { "country": "NL" },
#         "customer": { "email": "billing@company.nl", "vatId": "NL999999999B01" },
#         "lines": [
#           { "sku": "WID-001", "qty": 2, "unitCents": 999 },
#           { "sku": "GAD-002", "qty": 1, "unitCents": 1500 }
#         ],
#         "declared": { "netCents": 3498, "vatCents": 0, "grossCents": 3498 }
#       },
#       {
#         "orderId": "A400",
#         "shipTo": { "country": "BE" },
#         "customer": { "email": "ada@other.example", "vatId": null },
#         "lines": [
#           { "sku": "WID-001", "qty": 2, "unitCents": 999 },
#           { "sku": "GAD-002", "qty": 1, "unitCents": 1500 }
#         ],
#         "declared": { "netCents": 3498, "vatCents": 508, "grossCents": 4006 }
#       }
#     ]
#   }"""^^rdf:JSON .
#   ("""{
#     "meta~data": { "batch": "2025-12-18" },
#     "orders": [
#       {
#         "orderId": "A100",
#         "shipTo": { "country": "BE" },
#         "customer": { "email": "Ada@Example.ORG", "vatId": null },
#         "lines": [
#           { "sku": "wid-001", "qty": 2, "unitCents": 999 },
#           { "sku": "GAD-002", "qty": 1, "unitCents": 1500 }
#         ],
#         "declared": { "netCents": 3498, "vatCents": 509, "grossCents": 4007 }
#       },
#       {
#         "orderId": "A200",
#         "shipTo": { "country": "US" },
#         "customer": { "email": "bob@example.org", "vatId": null },
#         "lines": [
#           { "sku": "WID-001", "qty": 2, "unitCents": 999 },
#           { "sku": "GAD-002", "qty": 1, "unitCents": 1500 }
#         ],
#         "declared": { "netCents": 3498, "vatCents": 0, "grossCents": 3498 }
#       },
#       {
#         "orderId": "A300",
#         "shipTo": { "country": "NL" },
#         "customer": { "email": "acct@company.nl", "vatId": "NL999999999B01" },
#         "lines": [
#           { "sku": "WID-001", "qty": 2, "unitCents": 999 },
#           { "sku": "GAD-002", "qty": 1, "unitCents": 1500 }
#         ],
#         "declared": { "netCents": 3498, "vatCents": 0, "grossCents": 3498 }
#       },
#       {
#         "orderId": "A301",
#         "shipTo": { "country": "NL" },
#         "customer": { "email": "billing@company.nl", "vatId": "NL999999999B01" },
#         "lines": [
#           { "sku": "WID-001", "qty": 2, "unitCents": 999 },
#           { "sku": "GAD-002", "qty": 1, "unitCents": 1500 }
#         ],
#         "declared": { "netCents": 3498, "vatCents": 0, "grossCents": 3498 }
#       },
#       {
#         "orderId": "A400",
#         "shipTo": { "country": "BE" },
#         "customer": { "email": "ada@other.example", "vatId": null },
#         "lines": [
#           { "sku": "WID-001", "qty": 2, "unitCents": 999 },
#           { "sku": "GAD-002", "qty": 1, "unitCents": 1500 }
#         ],
#         "declared": { "netCents": 3498, "vatCents": 508, "grossCents": 4006 }
#       }
#     ]
#   }"""^^rdf:JSON "/orders") string:jsonPointer ("""{"orderId":"A100","shipTo":{"country":"BE"},"customer":{"email":"Ada@Example.ORG","vatId":null},"lines":[{"sku":"wid-001","qty":2,"unitCents":999},{"sku":"GAD-002","qty":1,"unitCents":1500}],"declared":{"netCents":3498,"vatCents":509,"grossCents":4007}}"""^^rdf:JSON """{"orderId":"A200","shipTo":{"country":"US"},"customer":{"email":"bob@example.org","vatId":null},"lines":[{"sku":"WID-001","qty":2,"unitCents":999},{"sku":"GAD-002","qty":1,"unitCents":1500}],"declared":{"netCents":3498,"vatCents":0,"grossCents":3498}}"""^^rdf:JSON """{"orderId":"A300","shipTo":{"country":"NL"},"customer":{"email":"acct@company.nl","vatId":"NL999999999B01"},"lines":[{"sku":"WID-001","qty":2,"unitCents":999},{"sku":"GAD-002","qty":1,"unitCents":1500}],"declared":{"netCents":3498,"vatCents":0,"grossCents":3498}}"""^^rdf:JSON """{"orderId":"A301","shipTo":{"country":"NL"},"customer":{"email":"billing@company.nl","vatId":"NL999999999B01"},"lines":[{"sku":"WID-001","qty":2,"unitCents":999},{"sku":"GAD-002","qty":1,"unitCents":1500}],"declared":{"netCents":3498,"vatCents":0,"grossCents":3498}}"""^^rdf:JSON """{"orderId":"A400","shipTo":{"country":"BE"},"customer":{"email":"ada@other.example","vatId":null},"lines":[{"sku":"WID-001","qty":2,"unitCents":999},{"sku":"GAD-002","qty":1,"unitCents":1500}],"declared":{"netCents":3498,"vatCents":508,"grossCents":4006}}"""^^rdf:JSON) .
#   ("""{"orderId":"A100","shipTo":{"country":"BE"},"customer":{"email":"Ada@Example.ORG","vatId":null},"lines":[{"sku":"wid-001","qty":2,"unitCents":999},{"sku":"GAD-002","qty":1,"unitCents":1500}],"declared":{"netCents":3498,"vatCents":509,"grossCents":4007}}"""^^rdf:JSON """{"orderId":"A200","shipTo":{"country":"US"},"customer":{"email":"bob@example.org","vatId":null},"lines":[{"sku":"WID-001","qty":2,"unitCents":999},{"sku":"GAD-002","qty":1,"unitCents":1500}],"declared":{"netCents":3498,"vatCents":0,"grossCents":3498}}"""^^rdf:JSON """{"orderId":"A300","shipTo":{"country":"NL"},"customer":{"email":"acct@company.nl","vatId":"NL999999999B01"},"lines":[{"sku":"WID-001","qty":2,"unitCents":999},{"sku":"GAD-002","qty":1,"unitCents":1500}],"declared":{"netCents":3498,"vatCents":0,"grossCents":3498}}"""^^rdf:JSON """{"orderId":"A301","shipTo":{"country":"NL"},"customer":{"email":"billing@company.nl","vatId":"NL999999999B01"},"lines":[{"sku":"WID-001","qty":2,"unitCents":999},{"sku":"GAD-002","qty":1,"unitCents":1500}],"declared":{"netCents":3498,"vatCents":0,"grossCents":3498}}"""^^rdf:JSON """{"orderId":"A400","shipTo":{"country":"BE"},"customer":{"email":"ada@other.example","vatId":null},"lines":[{"sku":"WID-001","qty":2,"unitCents":999},{"sku":"GAD-002","qty":1,"unitCents":1500}],"declared":{"netCents":3498,"vatCents":508,"grossCents":4006}}"""^^rdf:JSON) list:iterate (1 """{"orderId":"A200","shipTo":{"country":"US"},"customer":{"email":"bob@example.org","vatId":null},"lines":[{"sku":"WID-001","qty":2,"unitCents":999},{"sku":"GAD-002","qty":1,"unitCents":1500}],"declared":{"netCents":3498,"vatCents":0,"grossCents":3498}}"""^^rdf:JSON) .
#   ("""{"orderId":"A200","shipTo":{"country":"US"},"customer":{"email":"bob@example.org","vatId":null},"lines":[{"sku":"WID-001","qty":2,"unitCents":999},{"sku":"GAD-002","qty":1,"unitCents":1500}],"declared":{"netCents":3498,"vatCents":0,"grossCents":3498}}"""^^rdf:JSON "/orderId") string:jsonPointer "A200" .
#   ("""{"orderId":"A200","shipTo":{"country":"US"},"customer":{"email":"bob@example.org","vatId":null},"lines":[{"sku":"WID-001","qty":2,"unitCents":999},{"sku":"GAD-002","qty":1,"unitCents":1500}],"declared":{"netCents":3498,"vatCents":0,"grossCents":3498}}"""^^rdf:JSON "/shipTo/country") string:jsonPointer "US" .
#   ("""{"orderId":"A200","shipTo":{"country":"US"},"customer":{"email":"bob@example.org","vatId":null},"lines":[{"sku":"WID-001","qty":2,"unitCents":999},{"sku":"GAD-002","qty":1,"unitCents":1500}],"declared":{"netCents":3498,"vatCents":0,"grossCents":3498}}"""^^rdf:JSON "/customer") string:jsonPointer """{"email":"bob@example.org","vatId":null}"""^^rdf:JSON .
#   ("""{"email":"bob@example.org","vatId":null}"""^^rdf:JSON "/email") string:jsonPointer "bob@example.org" .
#   ("""{"email":"bob@example.org","vatId":null}"""^^rdf:JSON "/vatId") string:jsonPointer "null" .
#   ("""{"orderId":"A200","shipTo":{"country":"US"},"customer":{"email":"bob@example.org","vatId":null},"lines":[{"sku":"WID-001","qty":2,"unitCents":999},{"sku":"GAD-002","qty":1,"unitCents":1500}],"declared":{"netCents":3498,"vatCents":0,"grossCents":3498}}"""^^rdf:JSON "/declared") string:jsonPointer """{"netCents":3498,"vatCents":0,"grossCents":3498}"""^^rdf:JSON .
#   ("""{"netCents":3498,"vatCents":0,"grossCents":3498}"""^^rdf:JSON "/netCents") string:jsonPointer 3498 .
#   ("""{"netCents":3498,"vatCents":0,"grossCents":3498}"""^^rdf:JSON "/vatCents") string:jsonPointer 0 .
#   ("""{"netCents":3498,"vatCents":0,"grossCents":3498}"""^^rdf:JSON "/grossCents") string:jsonPointer 3498 .
#   ("urn:example:order:%s" "A200") string:format "urn:example:order:A200" .
#   <urn:example:order:A200> log:uri "urn:example:order:A200" .
# via the schematic forward rule:
#   {
#     ex:feed ex:json ?J .
#     (?J "/orders") string:jsonPointer ?Orders .
#     ?Orders list:iterate (?OrderIndex ?OrderJson) .
#     (?OrderJson "/orderId") string:jsonPointer ?OrderId .
#     (?OrderJson "/shipTo/country") string:jsonPointer ?Country .
#     (?OrderJson "/customer") string:jsonPointer ?CustJson .
#     (?CustJson "/email") string:jsonPointer ?Email .
#     (?CustJson "/vatId") string:jsonPointer ?VatIdRaw .
#     (?OrderJson "/declared") string:jsonPointer ?Decl .
#     (?Decl "/netCents") string:jsonPointer ?NetD .
#     (?Decl "/vatCents") string:jsonPointer ?VatD .
#     (?Decl "/grossCents") string:jsonPointer ?GrossD .
#     ("urn:example:order:%s" ?OrderId) string:format ?OrderUriStr .
#     ?Order log:uri ?OrderUriStr .
#   } => {
#     ?Order a ex:Order .
#     ?Order ex:orderId ?OrderId .
#     ?Order ex:orderIndex ?OrderIndex .
#     ?Order ex:shipCountry ?Country .
#     ?Order ex:email ?Email .
#     ?Order ex:vatIdRaw ?VatIdRaw .
#     ?Order ex:declaredNetCents ?NetD .
#     ?Order ex:declaredVatCents ?VatD .
#     ?Order ex:declaredGrossCents ?GrossD .
#   } .
# with substitution (on rule variables):
#   ?Country = "US"
#   ?CustJson = """{"email":"bob@example.org","vatId":null}"""^^rdf:JSON
#   ?Decl = """{"netCents":3498,"vatCents":0,"grossCents":3498}"""^^rdf:JSON
#   ?Email = "bob@example.org"
#   ?GrossD = 3498
#   ?J = """{
#     "meta~data": { "batch": "2025-12-18" },
#     "orders": [
#     {
#     "orderId": "A100",
#     "shipTo": { "country": "BE" },
#     "customer": { "email": "Ada@Example.ORG", "vatId": null },
#     "lines": [
#     { "sku": "wid-001", "qty": 2, "unitCents": 999 },
#     { "sku": "GAD-002", "qty": 1, "unitCents": 1500 }
#     ],
#     "declared": { "netCents": 3498, "vatCents": 509, "grossCents": 4007 }
#     },
#     {
#     "orderId": "A200",
#     "shipTo": { "country": "US" },
#     "customer": { "email": "bob@example.org", "vatId": null },
#     "lines": [
#     { "sku": "WID-001", "qty": 2, "unitCents": 999 },
#     { "sku": "GAD-002", "qty": 1, "unitCents": 1500 }
#     ],
#     "declared": { "netCents": 3498, "vatCents": 0, "grossCents": 3498 }
#     },
#     {
#     "orderId": "A300",
#     "shipTo": { "country": "NL" },
#     "customer": { "email": "acct@company.nl", "vatId": "NL999999999B01" },
#     "lines": [
#     { "sku": "WID-001", "qty": 2, "unitCents": 999 },
#     { "sku": "GAD-002", "qty": 1, "unitCents": 1500 }
#     ],
#     "declared": { "netCents": 3498, "vatCents": 0, "grossCents": 3498 }
#     },
#     {
#     "orderId": "A301",
#     "shipTo": { "country": "NL" },
#     "customer": { "email": "billing@company.nl", "vatId": "NL999999999B01" },
#     "lines": [
#     { "sku": "WID-001", "qty": 2, "unitCents": 999 },
#     { "sku": "GAD-002", "qty": 1, "unitCents": 1500 }
#     ],
#     "declared": { "netCents": 3498, "vatCents": 0, "grossCents": 3498 }
#     },
#     {
#     "orderId": "A400",
#     "shipTo": { "country": "BE" },
#     "customer": { "email": "ada@other.example", "vatId": null },
#     "lines": [
#     { "sku": "WID-001", "qty": 2, "unitCents": 999 },
#     { "sku": "GAD-002", "qty": 1, "unitCents": 1500 }
#     ],
#     "declared": { "netCents": 3498, "vatCents": 508, "grossCents": 4006 }
#     }
#     ]
#   }"""^^rdf:JSON
#   ?NetD = 3498
#   ?Order = <urn:example:order:A200>
#   ?OrderId = "A200"
#   ?OrderIndex = 1
#   ?OrderJson = """{"orderId":"A200","shipTo":{"country":"US"},"customer":{"email":"bob@example.org","vatId":null},"lines":[{"sku":"WID-001","qty":2,"unitCents":999},{"sku":"GAD-002","qty":1,"unitCents":1500}],"declared":{"netCents":3498,"vatCents":0,"grossCents":3498}}"""^^rdf:JSON
#   ?OrderUriStr = "urn:example:order:A200"
#   ?Orders = ("""{"orderId":"A100","shipTo":{"country":"BE"},"customer":{"email":"Ada@Example.ORG","vatId":null},"lines":[{"sku":"wid-001","qty":2,"unitCents":999},{"sku":"GAD-002","qty":1,"unitCents":1500}],"declared":{"netCents":3498,"vatCents":509,"grossCents":4007}}"""^^rdf:JSON """{"orderId":"A200","shipTo":{"country":"US"},"customer":{"email":"bob@example.org","vatId":null},"lines":[{"sku":"WID-001","qty":2,"unitCents":999},{"sku":"GAD-002","qty":1,"unitCents":1500}],"declared":{"netCents":3498,"vatCents":0,"grossCents":3498}}"""^^rdf:JSON """{"orderId":"A300","shipTo":{"country":"NL"},"customer":{"email":"acct@company.nl","vatId":"NL999999999B01"},"lines":[{"sku":"WID-001","qty":2,"unitCents":999},{"sku":"GAD-002","qty":1,"unitCents":1500}],"declared":{"netCents":3498,"vatCents":0,"grossCents":3498}}"""^^rdf:JSON """{"orderId":"A301","shipTo":{"country":"NL"},"customer":{"email":"billing@company.nl","vatId":"NL999999999B01"},"lines":[{"sku":"WID-001","qty":2,"unitCents":999},{"sku":"GAD-002","qty":1,"unitCents":1500}],"declared":{"netCents":3498,"vatCents":0,"grossCents":3498}}"""^^rdf:JSON """{"orderId":"A400","shipTo":{"country":"BE"},"customer":{"email":"ada@other.example","vatId":null},"lines":[{"sku":"WID-001","qty":2,"unitCents":999},{"sku":"GAD-002","qty":1,"unitCents":1500}],"declared":{"netCents":3498,"vatCents":508,"grossCents":4006}}"""^^rdf:JSON)
#   ?VatD = 0
#   ?VatIdRaw = "null"
# Therefore the derived triple above is entailed by the rules and facts.
# ----------------------------------------------------------------------

<urn:example:order:A200> ex:vatIdRaw "null" .

# ----------------------------------------------------------------------
# Proof for derived triple:
#   <urn:example:order:A200> ex:declaredNetCents 3498 .
# It holds because the following instance of the rule body is provable:
#   ex:feed ex:json """{
#     "meta~data": { "batch": "2025-12-18" },
#     "orders": [
#       {
#         "orderId": "A100",
#         "shipTo": { "country": "BE" },
#         "customer": { "email": "Ada@Example.ORG", "vatId": null },
#         "lines": [
#           { "sku": "wid-001", "qty": 2, "unitCents": 999 },
#           { "sku": "GAD-002", "qty": 1, "unitCents": 1500 }
#         ],
#         "declared": { "netCents": 3498, "vatCents": 509, "grossCents": 4007 }
#       },
#       {
#         "orderId": "A200",
#         "shipTo": { "country": "US" },
#         "customer": { "email": "bob@example.org", "vatId": null },
#         "lines": [
#           { "sku": "WID-001", "qty": 2, "unitCents": 999 },
#           { "sku": "GAD-002", "qty": 1, "unitCents": 1500 }
#         ],
#         "declared": { "netCents": 3498, "vatCents": 0, "grossCents": 3498 }
#       },
#       {
#         "orderId": "A300",
#         "shipTo": { "country": "NL" },
#         "customer": { "email": "acct@company.nl", "vatId": "NL999999999B01" },
#         "lines": [
#           { "sku": "WID-001", "qty": 2, "unitCents": 999 },
#           { "sku": "GAD-002", "qty": 1, "unitCents": 1500 }
#         ],
#         "declared": { "netCents": 3498, "vatCents": 0, "grossCents": 3498 }
#       },
#       {
#         "orderId": "A301",
#         "shipTo": { "country": "NL" },
#         "customer": { "email": "billing@company.nl", "vatId": "NL999999999B01" },
#         "lines": [
#           { "sku": "WID-001", "qty": 2, "unitCents": 999 },
#           { "sku": "GAD-002", "qty": 1, "unitCents": 1500 }
#         ],
#         "declared": { "netCents": 3498, "vatCents": 0, "grossCents": 3498 }
#       },
#       {
#         "orderId": "A400",
#         "shipTo": { "country": "BE" },
#         "customer": { "email": "ada@other.example", "vatId": null },
#         "lines": [
#           { "sku": "WID-001", "qty": 2, "unitCents": 999 },
#           { "sku": "GAD-002", "qty": 1, "unitCents": 1500 }
#         ],
#         "declared": { "netCents": 3498, "vatCents": 508, "grossCents": 4006 }
#       }
#     ]
#   }"""^^rdf:JSON .
#   ("""{
#     "meta~data": { "batch": "2025-12-18" },
#     "orders": [
#       {
#         "orderId": "A100",
#         "shipTo": { "country": "BE" },
#         "customer": { "email": "Ada@Example.ORG", "vatId": null },
#         "lines": [
#           { "sku": "wid-001", "qty": 2, "unitCents": 999 },
#           { "sku": "GAD-002", "qty": 1, "unitCents": 1500 }
#         ],
#         "declared": { "netCents": 3498, "vatCents": 509, "grossCents": 4007 }
#       },
#       {
#         "orderId": "A200",
#         "shipTo": { "country": "US" },
#         "customer": { "email": "bob@example.org", "vatId": null },
#         "lines": [
#           { "sku": "WID-001", "qty": 2, "unitCents": 999 },
#           { "sku": "GAD-002", "qty": 1, "unitCents": 1500 }
#         ],
#         "declared": { "netCents": 3498, "vatCents": 0, "grossCents": 3498 }
#       },
#       {
#         "orderId": "A300",
#         "shipTo": { "country": "NL" },
#         "customer": { "email": "acct@company.nl", "vatId": "NL999999999B01" },
#         "lines": [
#           { "sku": "WID-001", "qty": 2, "unitCents": 999 },
#           { "sku": "GAD-002", "qty": 1, "unitCents": 1500 }
#         ],
#         "declared": { "netCents": 3498, "vatCents": 0, "grossCents": 3498 }
#       },
#       {
#         "orderId": "A301",
#         "shipTo": { "country": "NL" },
#         "customer": { "email": "billing@company.nl", "vatId": "NL999999999B01" },
#         "lines": [
#           { "sku": "WID-001", "qty": 2, "unitCents": 999 },
#           { "sku": "GAD-002", "qty": 1, "unitCents": 1500 }
#         ],
#         "declared": { "netCents": 3498, "vatCents": 0, "grossCents": 3498 }
#       },
#       {
#         "orderId": "A400",
#         "shipTo": { "country": "BE" },
#         "customer": { "email": "ada@other.example", "vatId": null },
#         "lines": [
#           { "sku": "WID-001", "qty": 2, "unitCents": 999 },
#           { "sku": "GAD-002", "qty": 1, "unitCents": 1500 }
#         ],
#         "declared": { "netCents": 3498, "vatCents": 508, "grossCents": 4006 }
#       }
#     ]
#   }"""^^rdf:JSON "/orders") string:jsonPointer ("""{"orderId":"A100","shipTo":{"country":"BE"},"customer":{"email":"Ada@Example.ORG","vatId":null},"lines":[{"sku":"wid-001","qty":2,"unitCents":999},{"sku":"GAD-002","qty":1,"unitCents":1500}],"declared":{"netCents":3498,"vatCents":509,"grossCents":4007}}"""^^rdf:JSON """{"orderId":"A200","shipTo":{"country":"US"},"customer":{"email":"bob@example.org","vatId":null},"lines":[{"sku":"WID-001","qty":2,"unitCents":999},{"sku":"GAD-002","qty":1,"unitCents":1500}],"declared":{"netCents":3498,"vatCents":0,"grossCents":3498}}"""^^rdf:JSON """{"orderId":"A300","shipTo":{"country":"NL"},"customer":{"email":"acct@company.nl","vatId":"NL999999999B01"},"lines":[{"sku":"WID-001","qty":2,"unitCents":999},{"sku":"GAD-002","qty":1,"unitCents":1500}],"declared":{"netCents":3498,"vatCents":0,"grossCents":3498}}"""^^rdf:JSON """{"orderId":"A301","shipTo":{"country":"NL"},"customer":{"email":"billing@company.nl","vatId":"NL999999999B01"},"lines":[{"sku":"WID-001","qty":2,"unitCents":999},{"sku":"GAD-002","qty":1,"unitCents":1500}],"declared":{"netCents":3498,"vatCents":0,"grossCents":3498}}"""^^rdf:JSON """{"orderId":"A400","shipTo":{"country":"BE"},"customer":{"email":"ada@other.example","vatId":null},"lines":[{"sku":"WID-001","qty":2,"unitCents":999},{"sku":"GAD-002","qty":1,"unitCents":1500}],"declared":{"netCents":3498,"vatCents":508,"grossCents":4006}}"""^^rdf:JSON) .
#   ("""{"orderId":"A100","shipTo":{"country":"BE"},"customer":{"email":"Ada@Example.ORG","vatId":null},"lines":[{"sku":"wid-001","qty":2,"unitCents":999},{"sku":"GAD-002","qty":1,"unitCents":1500}],"declared":{"netCents":3498,"vatCents":509,"grossCents":4007}}"""^^rdf:JSON """{"orderId":"A200","shipTo":{"country":"US"},"customer":{"email":"bob@example.org","vatId":null},"lines":[{"sku":"WID-001","qty":2,"unitCents":999},{"sku":"GAD-002","qty":1,"unitCents":1500}],"declared":{"netCents":3498,"vatCents":0,"grossCents":3498}}"""^^rdf:JSON """{"orderId":"A300","shipTo":{"country":"NL"},"customer":{"email":"acct@company.nl","vatId":"NL999999999B01"},"lines":[{"sku":"WID-001","qty":2,"unitCents":999},{"sku":"GAD-002","qty":1,"unitCents":1500}],"declared":{"netCents":3498,"vatCents":0,"grossCents":3498}}"""^^rdf:JSON """{"orderId":"A301","shipTo":{"country":"NL"},"customer":{"email":"billing@company.nl","vatId":"NL999999999B01"},"lines":[{"sku":"WID-001","qty":2,"unitCents":999},{"sku":"GAD-002","qty":1,"unitCents":1500}],"declared":{"netCents":3498,"vatCents":0,"grossCents":3498}}"""^^rdf:JSON """{"orderId":"A400","shipTo":{"country":"BE"},"customer":{"email":"ada@other.example","vatId":null},"lines":[{"sku":"WID-001","qty":2,"unitCents":999},{"sku":"GAD-002","qty":1,"unitCents":1500}],"declared":{"netCents":3498,"vatCents":508,"grossCents":4006}}"""^^rdf:JSON) list:iterate (1 """{"orderId":"A200","shipTo":{"country":"US"},"customer":{"email":"bob@example.org","vatId":null},"lines":[{"sku":"WID-001","qty":2,"unitCents":999},{"sku":"GAD-002","qty":1,"unitCents":1500}],"declared":{"netCents":3498,"vatCents":0,"grossCents":3498}}"""^^rdf:JSON) .
#   ("""{"orderId":"A200","shipTo":{"country":"US"},"customer":{"email":"bob@example.org","vatId":null},"lines":[{"sku":"WID-001","qty":2,"unitCents":999},{"sku":"GAD-002","qty":1,"unitCents":1500}],"declared":{"netCents":3498,"vatCents":0,"grossCents":3498}}"""^^rdf:JSON "/orderId") string:jsonPointer "A200" .
#   ("""{"orderId":"A200","shipTo":{"country":"US"},"customer":{"email":"bob@example.org","vatId":null},"lines":[{"sku":"WID-001","qty":2,"unitCents":999},{"sku":"GAD-002","qty":1,"unitCents":1500}],"declared":{"netCents":3498,"vatCents":0,"grossCents":3498}}"""^^rdf:JSON "/shipTo/country") string:jsonPointer "US" .
#   ("""{"orderId":"A200","shipTo":{"country":"US"},"customer":{"email":"bob@example.org","vatId":null},"lines":[{"sku":"WID-001","qty":2,"unitCents":999},{"sku":"GAD-002","qty":1,"unitCents":1500}],"declared":{"netCents":3498,"vatCents":0,"grossCents":3498}}"""^^rdf:JSON "/customer") string:jsonPointer """{"email":"bob@example.org","vatId":null}"""^^rdf:JSON .
#   ("""{"email":"bob@example.org","vatId":null}"""^^rdf:JSON "/email") string:jsonPointer "bob@example.org" .
#   ("""{"email":"bob@example.org","vatId":null}"""^^rdf:JSON "/vatId") string:jsonPointer "null" .
#   ("""{"orderId":"A200","shipTo":{"country":"US"},"customer":{"email":"bob@example.org","vatId":null},"lines":[{"sku":"WID-001","qty":2,"unitCents":999},{"sku":"GAD-002","qty":1,"unitCents":1500}],"declared":{"netCents":3498,"vatCents":0,"grossCents":3498}}"""^^rdf:JSON "/declared") string:jsonPointer """{"netCents":3498,"vatCents":0,"grossCents":3498}"""^^rdf:JSON .
#   ("""{"netCents":3498,"vatCents":0,"grossCents":3498}"""^^rdf:JSON "/netCents") string:jsonPointer 3498 .
#   ("""{"netCents":3498,"vatCents":0,"grossCents":3498}"""^^rdf:JSON "/vatCents") string:jsonPointer 0 .
#   ("""{"netCents":3498,"vatCents":0,"grossCents":3498}"""^^rdf:JSON "/grossCents") string:jsonPointer 3498 .
#   ("urn:example:order:%s" "A200") string:format "urn:example:order:A200" .
#   <urn:example:order:A200> log:uri "urn:example:order:A200" .
# via the schematic forward rule:
#   {
#     ex:feed ex:json ?J .
#     (?J "/orders") string:jsonPointer ?Orders .
#     ?Orders list:iterate (?OrderIndex ?OrderJson) .
#     (?OrderJson "/orderId") string:jsonPointer ?OrderId .
#     (?OrderJson "/shipTo/country") string:jsonPointer ?Country .
#     (?OrderJson "/customer") string:jsonPointer ?CustJson .
#     (?CustJson "/email") string:jsonPointer ?Email .
#     (?CustJson "/vatId") string:jsonPointer ?VatIdRaw .
#     (?OrderJson "/declared") string:jsonPointer ?Decl .
#     (?Decl "/netCents") string:jsonPointer ?NetD .
#     (?Decl "/vatCents") string:jsonPointer ?VatD .
#     (?Decl "/grossCents") string:jsonPointer ?GrossD .
#     ("urn:example:order:%s" ?OrderId) string:format ?OrderUriStr .
#     ?Order log:uri ?OrderUriStr .
#   } => {
#     ?Order a ex:Order .
#     ?Order ex:orderId ?OrderId .
#     ?Order ex:orderIndex ?OrderIndex .
#     ?Order ex:shipCountry ?Country .
#     ?Order ex:email ?Email .
#     ?Order ex:vatIdRaw ?VatIdRaw .
#     ?Order ex:declaredNetCents ?NetD .
#     ?Order ex:declaredVatCents ?VatD .
#     ?Order ex:declaredGrossCents ?GrossD .
#   } .
# with substitution (on rule variables):
#   ?Country = "US"
#   ?CustJson = """{"email":"bob@example.org","vatId":null}"""^^rdf:JSON
#   ?Decl = """{"netCents":3498,"vatCents":0,"grossCents":3498}"""^^rdf:JSON
#   ?Email = "bob@example.org"
#   ?GrossD = 3498
#   ?J = """{
#     "meta~data": { "batch": "2025-12-18" },
#     "orders": [
#     {
#     "orderId": "A100",
#     "shipTo": { "country": "BE" },
#     "customer": { "email": "Ada@Example.ORG", "vatId": null },
#     "lines": [
#     { "sku": "wid-001", "qty": 2, "unitCents": 999 },
#     { "sku": "GAD-002", "qty": 1, "unitCents": 1500 }
#     ],
#     "declared": { "netCents": 3498, "vatCents": 509, "grossCents": 4007 }
#     },
#     {
#     "orderId": "A200",
#     "shipTo": { "country": "US" },
#     "customer": { "email": "bob@example.org", "vatId": null },
#     "lines": [
#     { "sku": "WID-001", "qty": 2, "unitCents": 999 },
#     { "sku": "GAD-002", "qty": 1, "unitCents": 1500 }
#     ],
#     "declared": { "netCents": 3498, "vatCents": 0, "grossCents": 3498 }
#     },
#     {
#     "orderId": "A300",
#     "shipTo": { "country": "NL" },
#     "customer": { "email": "acct@company.nl", "vatId": "NL999999999B01" },
#     "lines": [
#     { "sku": "WID-001", "qty": 2, "unitCents": 999 },
#     { "sku": "GAD-002", "qty": 1, "unitCents": 1500 }
#     ],
#     "declared": { "netCents": 3498, "vatCents": 0, "grossCents": 3498 }
#     },
#     {
#     "orderId": "A301",
#     "shipTo": { "country": "NL" },
#     "customer": { "email": "billing@company.nl", "vatId": "NL999999999B01" },
#     "lines": [
#     { "sku": "WID-001", "qty": 2, "unitCents": 999 },
#     { "sku": "GAD-002", "qty": 1, "unitCents": 1500 }
#     ],
#     "declared": { "netCents": 3498, "vatCents": 0, "grossCents": 3498 }
#     },
#     {
#     "orderId": "A400",
#     "shipTo": { "country": "BE" },
#     "customer": { "email": "ada@other.example", "vatId": null },
#     "lines": [
#     { "sku": "WID-001", "qty": 2, "unitCents": 999 },
#     { "sku": "GAD-002", "qty": 1, "unitCents": 1500 }
#     ],
#     "declared": { "netCents": 3498, "vatCents": 508, "grossCents": 4006 }
#     }
#     ]
#   }"""^^rdf:JSON
#   ?NetD = 3498
#   ?Order = <urn:example:order:A200>
#   ?OrderId = "A200"
#   ?OrderIndex = 1
#   ?OrderJson = """{"orderId":"A200","shipTo":{"country":"US"},"customer":{"email":"bob@example.org","vatId":null},"lines":[{"sku":"WID-001","qty":2,"unitCents":999},{"sku":"GAD-002","qty":1,"unitCents":1500}],"declared":{"netCents":3498,"vatCents":0,"grossCents":3498}}"""^^rdf:JSON
#   ?OrderUriStr = "urn:example:order:A200"
#   ?Orders = ("""{"orderId":"A100","shipTo":{"country":"BE"},"customer":{"email":"Ada@Example.ORG","vatId":null},"lines":[{"sku":"wid-001","qty":2,"unitCents":999},{"sku":"GAD-002","qty":1,"unitCents":1500}],"declared":{"netCents":3498,"vatCents":509,"grossCents":4007}}"""^^rdf:JSON """{"orderId":"A200","shipTo":{"country":"US"},"customer":{"email":"bob@example.org","vatId":null},"lines":[{"sku":"WID-001","qty":2,"unitCents":999},{"sku":"GAD-002","qty":1,"unitCents":1500}],"declared":{"netCents":3498,"vatCents":0,"grossCents":3498}}"""^^rdf:JSON """{"orderId":"A300","shipTo":{"country":"NL"},"customer":{"email":"acct@company.nl","vatId":"NL999999999B01"},"lines":[{"sku":"WID-001","qty":2,"unitCents":999},{"sku":"GAD-002","qty":1,"unitCents":1500}],"declared":{"netCents":3498,"vatCents":0,"grossCents":3498}}"""^^rdf:JSON """{"orderId":"A301","shipTo":{"country":"NL"},"customer":{"email":"billing@company.nl","vatId":"NL999999999B01"},"lines":[{"sku":"WID-001","qty":2,"unitCents":999},{"sku":"GAD-002","qty":1,"unitCents":1500}],"declared":{"netCents":3498,"vatCents":0,"grossCents":3498}}"""^^rdf:JSON """{"orderId":"A400","shipTo":{"country":"BE"},"customer":{"email":"ada@other.example","vatId":null},"lines":[{"sku":"WID-001","qty":2,"unitCents":999},{"sku":"GAD-002","qty":1,"unitCents":1500}],"declared":{"netCents":3498,"vatCents":508,"grossCents":4006}}"""^^rdf:JSON)
#   ?VatD = 0
#   ?VatIdRaw = "null"
# Therefore the derived triple above is entailed by the rules and facts.
# ----------------------------------------------------------------------

<urn:example:order:A200> ex:declaredNetCents 3498 .

# ----------------------------------------------------------------------
# Proof for derived triple:
#   <urn:example:order:A200> ex:declaredVatCents 0 .
# It holds because the following instance of the rule body is provable:
#   ex:feed ex:json """{
#     "meta~data": { "batch": "2025-12-18" },
#     "orders": [
#       {
#         "orderId": "A100",
#         "shipTo": { "country": "BE" },
#         "customer": { "email": "Ada@Example.ORG", "vatId": null },
#         "lines": [
#           { "sku": "wid-001", "qty": 2, "unitCents": 999 },
#           { "sku": "GAD-002", "qty": 1, "unitCents": 1500 }
#         ],
#         "declared": { "netCents": 3498, "vatCents": 509, "grossCents": 4007 }
#       },
#       {
#         "orderId": "A200",
#         "shipTo": { "country": "US" },
#         "customer": { "email": "bob@example.org", "vatId": null },
#         "lines": [
#           { "sku": "WID-001", "qty": 2, "unitCents": 999 },
#           { "sku": "GAD-002", "qty": 1, "unitCents": 1500 }
#         ],
#         "declared": { "netCents": 3498, "vatCents": 0, "grossCents": 3498 }
#       },
#       {
#         "orderId": "A300",
#         "shipTo": { "country": "NL" },
#         "customer": { "email": "acct@company.nl", "vatId": "NL999999999B01" },
#         "lines": [
#           { "sku": "WID-001", "qty": 2, "unitCents": 999 },
#           { "sku": "GAD-002", "qty": 1, "unitCents": 1500 }
#         ],
#         "declared": { "netCents": 3498, "vatCents": 0, "grossCents": 3498 }
#       },
#       {
#         "orderId": "A301",
#         "shipTo": { "country": "NL" },
#         "customer": { "email": "billing@company.nl", "vatId": "NL999999999B01" },
#         "lines": [
#           { "sku": "WID-001", "qty": 2, "unitCents": 999 },
#           { "sku": "GAD-002", "qty": 1, "unitCents": 1500 }
#         ],
#         "declared": { "netCents": 3498, "vatCents": 0, "grossCents": 3498 }
#       },
#       {
#         "orderId": "A400",
#         "shipTo": { "country": "BE" },
#         "customer": { "email": "ada@other.example", "vatId": null },
#         "lines": [
#           { "sku": "WID-001", "qty": 2, "unitCents": 999 },
#           { "sku": "GAD-002", "qty": 1, "unitCents": 1500 }
#         ],
#         "declared": { "netCents": 3498, "vatCents": 508, "grossCents": 4006 }
#       }
#     ]
#   }"""^^rdf:JSON .
#   ("""{
#     "meta~data": { "batch": "2025-12-18" },
#     "orders": [
#       {
#         "orderId": "A100",
#         "shipTo": { "country": "BE" },
#         "customer": { "email": "Ada@Example.ORG", "vatId": null },
#         "lines": [
#           { "sku": "wid-001", "qty": 2, "unitCents": 999 },
#           { "sku": "GAD-002", "qty": 1, "unitCents": 1500 }
#         ],
#         "declared": { "netCents": 3498, "vatCents": 509, "grossCents": 4007 }
#       },
#       {
#         "orderId": "A200",
#         "shipTo": { "country": "US" },
#         "customer": { "email": "bob@example.org", "vatId": null },
#         "lines": [
#           { "sku": "WID-001", "qty": 2, "unitCents": 999 },
#           { "sku": "GAD-002", "qty": 1, "unitCents": 1500 }
#         ],
#         "declared": { "netCents": 3498, "vatCents": 0, "grossCents": 3498 }
#       },
#       {
#         "orderId": "A300",
#         "shipTo": { "country": "NL" },
#         "customer": { "email": "acct@company.nl", "vatId": "NL999999999B01" },
#         "lines": [
#           { "sku": "WID-001", "qty": 2, "unitCents": 999 },
#           { "sku": "GAD-002", "qty": 1, "unitCents": 1500 }
#         ],
#         "declared": { "netCents": 3498, "vatCents": 0, "grossCents": 3498 }
#       },
#       {
#         "orderId": "A301",
#         "shipTo": { "country": "NL" },
#         "customer": { "email": "billing@company.nl", "vatId": "NL999999999B01" },
#         "lines": [
#           { "sku": "WID-001", "qty": 2, "unitCents": 999 },
#           { "sku": "GAD-002", "qty": 1, "unitCents": 1500 }
#         ],
#         "declared": { "netCents": 3498, "vatCents": 0, "grossCents": 3498 }
#       },
#       {
#         "orderId": "A400",
#         "shipTo": { "country": "BE" },
#         "customer": { "email": "ada@other.example", "vatId": null },
#         "lines": [
#           { "sku": "WID-001", "qty": 2, "unitCents": 999 },
#           { "sku": "GAD-002", "qty": 1, "unitCents": 1500 }
#         ],
#         "declared": { "netCents": 3498, "vatCents": 508, "grossCents": 4006 }
#       }
#     ]
#   }"""^^rdf:JSON "/orders") string:jsonPointer ("""{"orderId":"A100","shipTo":{"country":"BE"},"customer":{"email":"Ada@Example.ORG","vatId":null},"lines":[{"sku":"wid-001","qty":2,"unitCents":999},{"sku":"GAD-002","qty":1,"unitCents":1500}],"declared":{"netCents":3498,"vatCents":509,"grossCents":4007}}"""^^rdf:JSON """{"orderId":"A200","shipTo":{"country":"US"},"customer":{"email":"bob@example.org","vatId":null},"lines":[{"sku":"WID-001","qty":2,"unitCents":999},{"sku":"GAD-002","qty":1,"unitCents":1500}],"declared":{"netCents":3498,"vatCents":0,"grossCents":3498}}"""^^rdf:JSON """{"orderId":"A300","shipTo":{"country":"NL"},"customer":{"email":"acct@company.nl","vatId":"NL999999999B01"},"lines":[{"sku":"WID-001","qty":2,"unitCents":999},{"sku":"GAD-002","qty":1,"unitCents":1500}],"declared":{"netCents":3498,"vatCents":0,"grossCents":3498}}"""^^rdf:JSON """{"orderId":"A301","shipTo":{"country":"NL"},"customer":{"email":"billing@company.nl","vatId":"NL999999999B01"},"lines":[{"sku":"WID-001","qty":2,"unitCents":999},{"sku":"GAD-002","qty":1,"unitCents":1500}],"declared":{"netCents":3498,"vatCents":0,"grossCents":3498}}"""^^rdf:JSON """{"orderId":"A400","shipTo":{"country":"BE"},"customer":{"email":"ada@other.example","vatId":null},"lines":[{"sku":"WID-001","qty":2,"unitCents":999},{"sku":"GAD-002","qty":1,"unitCents":1500}],"declared":{"netCents":3498,"vatCents":508,"grossCents":4006}}"""^^rdf:JSON) .
#   ("""{"orderId":"A100","shipTo":{"country":"BE"},"customer":{"email":"Ada@Example.ORG","vatId":null},"lines":[{"sku":"wid-001","qty":2,"unitCents":999},{"sku":"GAD-002","qty":1,"unitCents":1500}],"declared":{"netCents":3498,"vatCents":509,"grossCents":4007}}"""^^rdf:JSON """{"orderId":"A200","shipTo":{"country":"US"},"customer":{"email":"bob@example.org","vatId":null},"lines":[{"sku":"WID-001","qty":2,"unitCents":999},{"sku":"GAD-002","qty":1,"unitCents":1500}],"declared":{"netCents":3498,"vatCents":0,"grossCents":3498}}"""^^rdf:JSON """{"orderId":"A300","shipTo":{"country":"NL"},"customer":{"email":"acct@company.nl","vatId":"NL999999999B01"},"lines":[{"sku":"WID-001","qty":2,"unitCents":999},{"sku":"GAD-002","qty":1,"unitCents":1500}],"declared":{"netCents":3498,"vatCents":0,"grossCents":3498}}"""^^rdf:JSON """{"orderId":"A301","shipTo":{"country":"NL"},"customer":{"email":"billing@company.nl","vatId":"NL999999999B01"},"lines":[{"sku":"WID-001","qty":2,"unitCents":999},{"sku":"GAD-002","qty":1,"unitCents":1500}],"declared":{"netCents":3498,"vatCents":0,"grossCents":3498}}"""^^rdf:JSON """{"orderId":"A400","shipTo":{"country":"BE"},"customer":{"email":"ada@other.example","vatId":null},"lines":[{"sku":"WID-001","qty":2,"unitCents":999},{"sku":"GAD-002","qty":1,"unitCents":1500}],"declared":{"netCents":3498,"vatCents":508,"grossCents":4006}}"""^^rdf:JSON) list:iterate (1 """{"orderId":"A200","shipTo":{"country":"US"},"customer":{"email":"bob@example.org","vatId":null},"lines":[{"sku":"WID-001","qty":2,"unitCents":999},{"sku":"GAD-002","qty":1,"unitCents":1500}],"declared":{"netCents":3498,"vatCents":0,"grossCents":3498}}"""^^rdf:JSON) .
#   ("""{"orderId":"A200","shipTo":{"country":"US"},"customer":{"email":"bob@example.org","vatId":null},"lines":[{"sku":"WID-001","qty":2,"unitCents":999},{"sku":"GAD-002","qty":1,"unitCents":1500}],"declared":{"netCents":3498,"vatCents":0,"grossCents":3498}}"""^^rdf:JSON "/orderId") string:jsonPointer "A200" .
#   ("""{"orderId":"A200","shipTo":{"country":"US"},"customer":{"email":"bob@example.org","vatId":null},"lines":[{"sku":"WID-001","qty":2,"unitCents":999},{"sku":"GAD-002","qty":1,"unitCents":1500}],"declared":{"netCents":3498,"vatCents":0,"grossCents":3498}}"""^^rdf:JSON "/shipTo/country") string:jsonPointer "US" .
#   ("""{"orderId":"A200","shipTo":{"country":"US"},"customer":{"email":"bob@example.org","vatId":null},"lines":[{"sku":"WID-001","qty":2,"unitCents":999},{"sku":"GAD-002","qty":1,"unitCents":1500}],"declared":{"netCents":3498,"vatCents":0,"grossCents":3498}}"""^^rdf:JSON "/customer") string:jsonPointer """{"email":"bob@example.org","vatId":null}"""^^rdf:JSON .
#   ("""{"email":"bob@example.org","vatId":null}"""^^rdf:JSON "/email") string:jsonPointer "bob@example.org" .
#   ("""{"email":"bob@example.org","vatId":null}"""^^rdf:JSON "/vatId") string:jsonPointer "null" .
#   ("""{"orderId":"A200","shipTo":{"country":"US"},"customer":{"email":"bob@example.org","vatId":null},"lines":[{"sku":"WID-001","qty":2,"unitCents":999},{"sku":"GAD-002","qty":1,"unitCents":1500}],"declared":{"netCents":3498,"vatCents":0,"grossCents":3498}}"""^^rdf:JSON "/declared") string:jsonPointer """{"netCents":3498,"vatCents":0,"grossCents":3498}"""^^rdf:JSON .
#   ("""{"netCents":3498,"vatCents":0,"grossCents":3498}"""^^rdf:JSON "/netCents") string:jsonPointer 3498 .
#   ("""{"netCents":3498,"vatCents":0,"grossCents":3498}"""^^rdf:JSON "/vatCents") string:jsonPointer 0 .
#   ("""{"netCents":3498,"vatCents":0,"grossCents":3498}"""^^rdf:JSON "/grossCents") string:jsonPointer 3498 .
#   ("urn:example:order:%s" "A200") string:format "urn:example:order:A200" .
#   <urn:example:order:A200> log:uri "urn:example:order:A200" .
# via the schematic forward rule:
#   {
#     ex:feed ex:json ?J .
#     (?J "/orders") string:jsonPointer ?Orders .
#     ?Orders list:iterate (?OrderIndex ?OrderJson) .
#     (?OrderJson "/orderId") string:jsonPointer ?OrderId .
#     (?OrderJson "/shipTo/country") string:jsonPointer ?Country .
#     (?OrderJson "/customer") string:jsonPointer ?CustJson .
#     (?CustJson "/email") string:jsonPointer ?Email .
#     (?CustJson "/vatId") string:jsonPointer ?VatIdRaw .
#     (?OrderJson "/declared") string:jsonPointer ?Decl .
#     (?Decl "/netCents") string:jsonPointer ?NetD .
#     (?Decl "/vatCents") string:jsonPointer ?VatD .
#     (?Decl "/grossCents") string:jsonPointer ?GrossD .
#     ("urn:example:order:%s" ?OrderId) string:format ?OrderUriStr .
#     ?Order log:uri ?OrderUriStr .
#   } => {
#     ?Order a ex:Order .
#     ?Order ex:orderId ?OrderId .
#     ?Order ex:orderIndex ?OrderIndex .
#     ?Order ex:shipCountry ?Country .
#     ?Order ex:email ?Email .
#     ?Order ex:vatIdRaw ?VatIdRaw .
#     ?Order ex:declaredNetCents ?NetD .
#     ?Order ex:declaredVatCents ?VatD .
#     ?Order ex:declaredGrossCents ?GrossD .
#   } .
# with substitution (on rule variables):
#   ?Country = "US"
#   ?CustJson = """{"email":"bob@example.org","vatId":null}"""^^rdf:JSON
#   ?Decl = """{"netCents":3498,"vatCents":0,"grossCents":3498}"""^^rdf:JSON
#   ?Email = "bob@example.org"
#   ?GrossD = 3498
#   ?J = """{
#     "meta~data": { "batch": "2025-12-18" },
#     "orders": [
#     {
#     "orderId": "A100",
#     "shipTo": { "country": "BE" },
#     "customer": { "email": "Ada@Example.ORG", "vatId": null },
#     "lines": [
#     { "sku": "wid-001", "qty": 2, "unitCents": 999 },
#     { "sku": "GAD-002", "qty": 1, "unitCents": 1500 }
#     ],
#     "declared": { "netCents": 3498, "vatCents": 509, "grossCents": 4007 }
#     },
#     {
#     "orderId": "A200",
#     "shipTo": { "country": "US" },
#     "customer": { "email": "bob@example.org", "vatId": null },
#     "lines": [
#     { "sku": "WID-001", "qty": 2, "unitCents": 999 },
#     { "sku": "GAD-002", "qty": 1, "unitCents": 1500 }
#     ],
#     "declared": { "netCents": 3498, "vatCents": 0, "grossCents": 3498 }
#     },
#     {
#     "orderId": "A300",
#     "shipTo": { "country": "NL" },
#     "customer": { "email": "acct@company.nl", "vatId": "NL999999999B01" },
#     "lines": [
#     { "sku": "WID-001", "qty": 2, "unitCents": 999 },
#     { "sku": "GAD-002", "qty": 1, "unitCents": 1500 }
#     ],
#     "declared": { "netCents": 3498, "vatCents": 0, "grossCents": 3498 }
#     },
#     {
#     "orderId": "A301",
#     "shipTo": { "country": "NL" },
#     "customer": { "email": "billing@company.nl", "vatId": "NL999999999B01" },
#     "lines": [
#     { "sku": "WID-001", "qty": 2, "unitCents": 999 },
#     { "sku": "GAD-002", "qty": 1, "unitCents": 1500 }
#     ],
#     "declared": { "netCents": 3498, "vatCents": 0, "grossCents": 3498 }
#     },
#     {
#     "orderId": "A400",
#     "shipTo": { "country": "BE" },
#     "customer": { "email": "ada@other.example", "vatId": null },
#     "lines": [
#     { "sku": "WID-001", "qty": 2, "unitCents": 999 },
#     { "sku": "GAD-002", "qty": 1, "unitCents": 1500 }
#     ],
#     "declared": { "netCents": 3498, "vatCents": 508, "grossCents": 4006 }
#     }
#     ]
#   }"""^^rdf:JSON
#   ?NetD = 3498
#   ?Order = <urn:example:order:A200>
#   ?OrderId = "A200"
#   ?OrderIndex = 1
#   ?OrderJson = """{"orderId":"A200","shipTo":{"country":"US"},"customer":{"email":"bob@example.org","vatId":null},"lines":[{"sku":"WID-001","qty":2,"unitCents":999},{"sku":"GAD-002","qty":1,"unitCents":1500}],"declared":{"netCents":3498,"vatCents":0,"grossCents":3498}}"""^^rdf:JSON
#   ?OrderUriStr = "urn:example:order:A200"
#   ?Orders = ("""{"orderId":"A100","shipTo":{"country":"BE"},"customer":{"email":"Ada@Example.ORG","vatId":null},"lines":[{"sku":"wid-001","qty":2,"unitCents":999},{"sku":"GAD-002","qty":1,"unitCents":1500}],"declared":{"netCents":3498,"vatCents":509,"grossCents":4007}}"""^^rdf:JSON """{"orderId":"A200","shipTo":{"country":"US"},"customer":{"email":"bob@example.org","vatId":null},"lines":[{"sku":"WID-001","qty":2,"unitCents":999},{"sku":"GAD-002","qty":1,"unitCents":1500}],"declared":{"netCents":3498,"vatCents":0,"grossCents":3498}}"""^^rdf:JSON """{"orderId":"A300","shipTo":{"country":"NL"},"customer":{"email":"acct@company.nl","vatId":"NL999999999B01"},"lines":[{"sku":"WID-001","qty":2,"unitCents":999},{"sku":"GAD-002","qty":1,"unitCents":1500}],"declared":{"netCents":3498,"vatCents":0,"grossCents":3498}}"""^^rdf:JSON """{"orderId":"A301","shipTo":{"country":"NL"},"customer":{"email":"billing@company.nl","vatId":"NL999999999B01"},"lines":[{"sku":"WID-001","qty":2,"unitCents":999},{"sku":"GAD-002","qty":1,"unitCents":1500}],"declared":{"netCents":3498,"vatCents":0,"grossCents":3498}}"""^^rdf:JSON """{"orderId":"A400","shipTo":{"country":"BE"},"customer":{"email":"ada@other.example","vatId":null},"lines":[{"sku":"WID-001","qty":2,"unitCents":999},{"sku":"GAD-002","qty":1,"unitCents":1500}],"declared":{"netCents":3498,"vatCents":508,"grossCents":4006}}"""^^rdf:JSON)
#   ?VatD = 0
#   ?VatIdRaw = "null"
# Therefore the derived triple above is entailed by the rules and facts.
# ----------------------------------------------------------------------

<urn:example:order:A200> ex:declaredVatCents 0 .

# ----------------------------------------------------------------------
# Proof for derived triple:
#   <urn:example:order:A200> ex:declaredGrossCents 3498 .
# It holds because the following instance of the rule body is provable:
#   ex:feed ex:json """{
#     "meta~data": { "batch": "2025-12-18" },
#     "orders": [
#       {
#         "orderId": "A100",
#         "shipTo": { "country": "BE" },
#         "customer": { "email": "Ada@Example.ORG", "vatId": null },
#         "lines": [
#           { "sku": "wid-001", "qty": 2, "unitCents": 999 },
#           { "sku": "GAD-002", "qty": 1, "unitCents": 1500 }
#         ],
#         "declared": { "netCents": 3498, "vatCents": 509, "grossCents": 4007 }
#       },
#       {
#         "orderId": "A200",
#         "shipTo": { "country": "US" },
#         "customer": { "email": "bob@example.org", "vatId": null },
#         "lines": [
#           { "sku": "WID-001", "qty": 2, "unitCents": 999 },
#           { "sku": "GAD-002", "qty": 1, "unitCents": 1500 }
#         ],
#         "declared": { "netCents": 3498, "vatCents": 0, "grossCents": 3498 }
#       },
#       {
#         "orderId": "A300",
#         "shipTo": { "country": "NL" },
#         "customer": { "email": "acct@company.nl", "vatId": "NL999999999B01" },
#         "lines": [
#           { "sku": "WID-001", "qty": 2, "unitCents": 999 },
#           { "sku": "GAD-002", "qty": 1, "unitCents": 1500 }
#         ],
#         "declared": { "netCents": 3498, "vatCents": 0, "grossCents": 3498 }
#       },
#       {
#         "orderId": "A301",
#         "shipTo": { "country": "NL" },
#         "customer": { "email": "billing@company.nl", "vatId": "NL999999999B01" },
#         "lines": [
#           { "sku": "WID-001", "qty": 2, "unitCents": 999 },
#           { "sku": "GAD-002", "qty": 1, "unitCents": 1500 }
#         ],
#         "declared": { "netCents": 3498, "vatCents": 0, "grossCents": 3498 }
#       },
#       {
#         "orderId": "A400",
#         "shipTo": { "country": "BE" },
#         "customer": { "email": "ada@other.example", "vatId": null },
#         "lines": [
#           { "sku": "WID-001", "qty": 2, "unitCents": 999 },
#           { "sku": "GAD-002", "qty": 1, "unitCents": 1500 }
#         ],
#         "declared": { "netCents": 3498, "vatCents": 508, "grossCents": 4006 }
#       }
#     ]
#   }"""^^rdf:JSON .
#   ("""{
#     "meta~data": { "batch": "2025-12-18" },
#     "orders": [
#       {
#         "orderId": "A100",
#         "shipTo": { "country": "BE" },
#         "customer": { "email": "Ada@Example.ORG", "vatId": null },
#         "lines": [
#           { "sku": "wid-001", "qty": 2, "unitCents": 999 },
#           { "sku": "GAD-002", "qty": 1, "unitCents": 1500 }
#         ],
#         "declared": { "netCents": 3498, "vatCents": 509, "grossCents": 4007 }
#       },
#       {
#         "orderId": "A200",
#         "shipTo": { "country": "US" },
#         "customer": { "email": "bob@example.org", "vatId": null },
#         "lines": [
#           { "sku": "WID-001", "qty": 2, "unitCents": 999 },
#           { "sku": "GAD-002", "qty": 1, "unitCents": 1500 }
#         ],
#         "declared": { "netCents": 3498, "vatCents": 0, "grossCents": 3498 }
#       },
#       {
#         "orderId": "A300",
#         "shipTo": { "country": "NL" },
#         "customer": { "email": "acct@company.nl", "vatId": "NL999999999B01" },
#         "lines": [
#           { "sku": "WID-001", "qty": 2, "unitCents": 999 },
#           { "sku": "GAD-002", "qty": 1, "unitCents": 1500 }
#         ],
#         "declared": { "netCents": 3498, "vatCents": 0, "grossCents": 3498 }
#       },
#       {
#         "orderId": "A301",
#         "shipTo": { "country": "NL" },
#         "customer": { "email": "billing@company.nl", "vatId": "NL999999999B01" },
#         "lines": [
#           { "sku": "WID-001", "qty": 2, "unitCents": 999 },
#           { "sku": "GAD-002", "qty": 1, "unitCents": 1500 }
#         ],
#         "declared": { "netCents": 3498, "vatCents": 0, "grossCents": 3498 }
#       },
#       {
#         "orderId": "A400",
#         "shipTo": { "country": "BE" },
#         "customer": { "email": "ada@other.example", "vatId": null },
#         "lines": [
#           { "sku": "WID-001", "qty": 2, "unitCents": 999 },
#           { "sku": "GAD-002", "qty": 1, "unitCents": 1500 }
#         ],
#         "declared": { "netCents": 3498, "vatCents": 508, "grossCents": 4006 }
#       }
#     ]
#   }"""^^rdf:JSON "/orders") string:jsonPointer ("""{"orderId":"A100","shipTo":{"country":"BE"},"customer":{"email":"Ada@Example.ORG","vatId":null},"lines":[{"sku":"wid-001","qty":2,"unitCents":999},{"sku":"GAD-002","qty":1,"unitCents":1500}],"declared":{"netCents":3498,"vatCents":509,"grossCents":4007}}"""^^rdf:JSON """{"orderId":"A200","shipTo":{"country":"US"},"customer":{"email":"bob@example.org","vatId":null},"lines":[{"sku":"WID-001","qty":2,"unitCents":999},{"sku":"GAD-002","qty":1,"unitCents":1500}],"declared":{"netCents":3498,"vatCents":0,"grossCents":3498}}"""^^rdf:JSON """{"orderId":"A300","shipTo":{"country":"NL"},"customer":{"email":"acct@company.nl","vatId":"NL999999999B01"},"lines":[{"sku":"WID-001","qty":2,"unitCents":999},{"sku":"GAD-002","qty":1,"unitCents":1500}],"declared":{"netCents":3498,"vatCents":0,"grossCents":3498}}"""^^rdf:JSON """{"orderId":"A301","shipTo":{"country":"NL"},"customer":{"email":"billing@company.nl","vatId":"NL999999999B01"},"lines":[{"sku":"WID-001","qty":2,"unitCents":999},{"sku":"GAD-002","qty":1,"unitCents":1500}],"declared":{"netCents":3498,"vatCents":0,"grossCents":3498}}"""^^rdf:JSON """{"orderId":"A400","shipTo":{"country":"BE"},"customer":{"email":"ada@other.example","vatId":null},"lines":[{"sku":"WID-001","qty":2,"unitCents":999},{"sku":"GAD-002","qty":1,"unitCents":1500}],"declared":{"netCents":3498,"vatCents":508,"grossCents":4006}}"""^^rdf:JSON) .
#   ("""{"orderId":"A100","shipTo":{"country":"BE"},"customer":{"email":"Ada@Example.ORG","vatId":null},"lines":[{"sku":"wid-001","qty":2,"unitCents":999},{"sku":"GAD-002","qty":1,"unitCents":1500}],"declared":{"netCents":3498,"vatCents":509,"grossCents":4007}}"""^^rdf:JSON """{"orderId":"A200","shipTo":{"country":"US"},"customer":{"email":"bob@example.org","vatId":null},"lines":[{"sku":"WID-001","qty":2,"unitCents":999},{"sku":"GAD-002","qty":1,"unitCents":1500}],"declared":{"netCents":3498,"vatCents":0,"grossCents":3498}}"""^^rdf:JSON """{"orderId":"A300","shipTo":{"country":"NL"},"customer":{"email":"acct@company.nl","vatId":"NL999999999B01"},"lines":[{"sku":"WID-001","qty":2,"unitCents":999},{"sku":"GAD-002","qty":1,"unitCents":1500}],"declared":{"netCents":3498,"vatCents":0,"grossCents":3498}}"""^^rdf:JSON """{"orderId":"A301","shipTo":{"country":"NL"},"customer":{"email":"billing@company.nl","vatId":"NL999999999B01"},"lines":[{"sku":"WID-001","qty":2,"unitCents":999},{"sku":"GAD-002","qty":1,"unitCents":1500}],"declared":{"netCents":3498,"vatCents":0,"grossCents":3498}}"""^^rdf:JSON """{"orderId":"A400","shipTo":{"country":"BE"},"customer":{"email":"ada@other.example","vatId":null},"lines":[{"sku":"WID-001","qty":2,"unitCents":999},{"sku":"GAD-002","qty":1,"unitCents":1500}],"declared":{"netCents":3498,"vatCents":508,"grossCents":4006}}"""^^rdf:JSON) list:iterate (1 """{"orderId":"A200","shipTo":{"country":"US"},"customer":{"email":"bob@example.org","vatId":null},"lines":[{"sku":"WID-001","qty":2,"unitCents":999},{"sku":"GAD-002","qty":1,"unitCents":1500}],"declared":{"netCents":3498,"vatCents":0,"grossCents":3498}}"""^^rdf:JSON) .
#   ("""{"orderId":"A200","shipTo":{"country":"US"},"customer":{"email":"bob@example.org","vatId":null},"lines":[{"sku":"WID-001","qty":2,"unitCents":999},{"sku":"GAD-002","qty":1,"unitCents":1500}],"declared":{"netCents":3498,"vatCents":0,"grossCents":3498}}"""^^rdf:JSON "/orderId") string:jsonPointer "A200" .
#   ("""{"orderId":"A200","shipTo":{"country":"US"},"customer":{"email":"bob@example.org","vatId":null},"lines":[{"sku":"WID-001","qty":2,"unitCents":999},{"sku":"GAD-002","qty":1,"unitCents":1500}],"declared":{"netCents":3498,"vatCents":0,"grossCents":3498}}"""^^rdf:JSON "/shipTo/country") string:jsonPointer "US" .
#   ("""{"orderId":"A200","shipTo":{"country":"US"},"customer":{"email":"bob@example.org","vatId":null},"lines":[{"sku":"WID-001","qty":2,"unitCents":999},{"sku":"GAD-002","qty":1,"unitCents":1500}],"declared":{"netCents":3498,"vatCents":0,"grossCents":3498}}"""^^rdf:JSON "/customer") string:jsonPointer """{"email":"bob@example.org","vatId":null}"""^^rdf:JSON .
#   ("""{"email":"bob@example.org","vatId":null}"""^^rdf:JSON "/email") string:jsonPointer "bob@example.org" .
#   ("""{"email":"bob@example.org","vatId":null}"""^^rdf:JSON "/vatId") string:jsonPointer "null" .
#   ("""{"orderId":"A200","shipTo":{"country":"US"},"customer":{"email":"bob@example.org","vatId":null},"lines":[{"sku":"WID-001","qty":2,"unitCents":999},{"sku":"GAD-002","qty":1,"unitCents":1500}],"declared":{"netCents":3498,"vatCents":0,"grossCents":3498}}"""^^rdf:JSON "/declared") string:jsonPointer """{"netCents":3498,"vatCents":0,"grossCents":3498}"""^^rdf:JSON .
#   ("""{"netCents":3498,"vatCents":0,"grossCents":3498}"""^^rdf:JSON "/netCents") string:jsonPointer 3498 .
#   ("""{"netCents":3498,"vatCents":0,"grossCents":3498}"""^^rdf:JSON "/vatCents") string:jsonPointer 0 .
#   ("""{"netCents":3498,"vatCents":0,"grossCents":3498}"""^^rdf:JSON "/grossCents") string:jsonPointer 3498 .
#   ("urn:example:order:%s" "A200") string:format "urn:example:order:A200" .
#   <urn:example:order:A200> log:uri "urn:example:order:A200" .
# via the schematic forward rule:
#   {
#     ex:feed ex:json ?J .
#     (?J "/orders") string:jsonPointer ?Orders .
#     ?Orders list:iterate (?OrderIndex ?OrderJson) .
#     (?OrderJson "/orderId") string:jsonPointer ?OrderId .
#     (?OrderJson "/shipTo/country") string:jsonPointer ?Country .
#     (?OrderJson "/customer") string:jsonPointer ?CustJson .
#     (?CustJson "/email") string:jsonPointer ?Email .
#     (?CustJson "/vatId") string:jsonPointer ?VatIdRaw .
#     (?OrderJson "/declared") string:jsonPointer ?Decl .
#     (?Decl "/netCents") string:jsonPointer ?NetD .
#     (?Decl "/vatCents") string:jsonPointer ?VatD .
#     (?Decl "/grossCents") string:jsonPointer ?GrossD .
#     ("urn:example:order:%s" ?OrderId) string:format ?OrderUriStr .
#     ?Order log:uri ?OrderUriStr .
#   } => {
#     ?Order a ex:Order .
#     ?Order ex:orderId ?OrderId .
#     ?Order ex:orderIndex ?OrderIndex .
#     ?Order ex:shipCountry ?Country .
#     ?Order ex:email ?Email .
#     ?Order ex:vatIdRaw ?VatIdRaw .
#     ?Order ex:declaredNetCents ?NetD .
#     ?Order ex:declaredVatCents ?VatD .
#     ?Order ex:declaredGrossCents ?GrossD .
#   } .
# with substitution (on rule variables):
#   ?Country = "US"
#   ?CustJson = """{"email":"bob@example.org","vatId":null}"""^^rdf:JSON
#   ?Decl = """{"netCents":3498,"vatCents":0,"grossCents":3498}"""^^rdf:JSON
#   ?Email = "bob@example.org"
#   ?GrossD = 3498
#   ?J = """{
#     "meta~data": { "batch": "2025-12-18" },
#     "orders": [
#     {
#     "orderId": "A100",
#     "shipTo": { "country": "BE" },
#     "customer": { "email": "Ada@Example.ORG", "vatId": null },
#     "lines": [
#     { "sku": "wid-001", "qty": 2, "unitCents": 999 },
#     { "sku": "GAD-002", "qty": 1, "unitCents": 1500 }
#     ],
#     "declared": { "netCents": 3498, "vatCents": 509, "grossCents": 4007 }
#     },
#     {
#     "orderId": "A200",
#     "shipTo": { "country": "US" },
#     "customer": { "email": "bob@example.org", "vatId": null },
#     "lines": [
#     { "sku": "WID-001", "qty": 2, "unitCents": 999 },
#     { "sku": "GAD-002", "qty": 1, "unitCents": 1500 }
#     ],
#     "declared": { "netCents": 3498, "vatCents": 0, "grossCents": 3498 }
#     },
#     {
#     "orderId": "A300",
#     "shipTo": { "country": "NL" },
#     "customer": { "email": "acct@company.nl", "vatId": "NL999999999B01" },
#     "lines": [
#     { "sku": "WID-001", "qty": 2, "unitCents": 999 },
#     { "sku": "GAD-002", "qty": 1, "unitCents": 1500 }
#     ],
#     "declared": { "netCents": 3498, "vatCents": 0, "grossCents": 3498 }
#     },
#     {
#     "orderId": "A301",
#     "shipTo": { "country": "NL" },
#     "customer": { "email": "billing@company.nl", "vatId": "NL999999999B01" },
#     "lines": [
#     { "sku": "WID-001", "qty": 2, "unitCents": 999 },
#     { "sku": "GAD-002", "qty": 1, "unitCents": 1500 }
#     ],
#     "declared": { "netCents": 3498, "vatCents": 0, "grossCents": 3498 }
#     },
#     {
#     "orderId": "A400",
#     "shipTo": { "country": "BE" },
#     "customer": { "email": "ada@other.example", "vatId": null },
#     "lines": [
#     { "sku": "WID-001", "qty": 2, "unitCents": 999 },
#     { "sku": "GAD-002", "qty": 1, "unitCents": 1500 }
#     ],
#     "declared": { "netCents": 3498, "vatCents": 508, "grossCents": 4006 }
#     }
#     ]
#   }"""^^rdf:JSON
#   ?NetD = 3498
#   ?Order = <urn:example:order:A200>
#   ?OrderId = "A200"
#   ?OrderIndex = 1
#   ?OrderJson = """{"orderId":"A200","shipTo":{"country":"US"},"customer":{"email":"bob@example.org","vatId":null},"lines":[{"sku":"WID-001","qty":2,"unitCents":999},{"sku":"GAD-002","qty":1,"unitCents":1500}],"declared":{"netCents":3498,"vatCents":0,"grossCents":3498}}"""^^rdf:JSON
#   ?OrderUriStr = "urn:example:order:A200"
#   ?Orders = ("""{"orderId":"A100","shipTo":{"country":"BE"},"customer":{"email":"Ada@Example.ORG","vatId":null},"lines":[{"sku":"wid-001","qty":2,"unitCents":999},{"sku":"GAD-002","qty":1,"unitCents":1500}],"declared":{"netCents":3498,"vatCents":509,"grossCents":4007}}"""^^rdf:JSON """{"orderId":"A200","shipTo":{"country":"US"},"customer":{"email":"bob@example.org","vatId":null},"lines":[{"sku":"WID-001","qty":2,"unitCents":999},{"sku":"GAD-002","qty":1,"unitCents":1500}],"declared":{"netCents":3498,"vatCents":0,"grossCents":3498}}"""^^rdf:JSON """{"orderId":"A300","shipTo":{"country":"NL"},"customer":{"email":"acct@company.nl","vatId":"NL999999999B01"},"lines":[{"sku":"WID-001","qty":2,"unitCents":999},{"sku":"GAD-002","qty":1,"unitCents":1500}],"declared":{"netCents":3498,"vatCents":0,"grossCents":3498}}"""^^rdf:JSON """{"orderId":"A301","shipTo":{"country":"NL"},"customer":{"email":"billing@company.nl","vatId":"NL999999999B01"},"lines":[{"sku":"WID-001","qty":2,"unitCents":999},{"sku":"GAD-002","qty":1,"unitCents":1500}],"declared":{"netCents":3498,"vatCents":0,"grossCents":3498}}"""^^rdf:JSON """{"orderId":"A400","shipTo":{"country":"BE"},"customer":{"email":"ada@other.example","vatId":null},"lines":[{"sku":"WID-001","qty":2,"unitCents":999},{"sku":"GAD-002","qty":1,"unitCents":1500}],"declared":{"netCents":3498,"vatCents":508,"grossCents":4006}}"""^^rdf:JSON)
#   ?VatD = 0
#   ?VatIdRaw = "null"
# Therefore the derived triple above is entailed by the rules and facts.
# ----------------------------------------------------------------------

<urn:example:order:A200> ex:declaredGrossCents 3498 .

# ----------------------------------------------------------------------
# Proof for derived triple:
#   <urn:example:order:A100> a ex:Order .
# It holds because the following instance of the rule body is provable:
#   ex:feed ex:json """{
#     "meta~data": { "batch": "2025-12-18" },
#     "orders": [
#       {
#         "orderId": "A100",
#         "shipTo": { "country": "BE" },
#         "customer": { "email": "Ada@Example.ORG", "vatId": null },
#         "lines": [
#           { "sku": "wid-001", "qty": 2, "unitCents": 999 },
#           { "sku": "GAD-002", "qty": 1, "unitCents": 1500 }
#         ],
#         "declared": { "netCents": 3498, "vatCents": 509, "grossCents": 4007 }
#       },
#       {
#         "orderId": "A200",
#         "shipTo": { "country": "US" },
#         "customer": { "email": "bob@example.org", "vatId": null },
#         "lines": [
#           { "sku": "WID-001", "qty": 2, "unitCents": 999 },
#           { "sku": "GAD-002", "qty": 1, "unitCents": 1500 }
#         ],
#         "declared": { "netCents": 3498, "vatCents": 0, "grossCents": 3498 }
#       },
#       {
#         "orderId": "A300",
#         "shipTo": { "country": "NL" },
#         "customer": { "email": "acct@company.nl", "vatId": "NL999999999B01" },
#         "lines": [
#           { "sku": "WID-001", "qty": 2, "unitCents": 999 },
#           { "sku": "GAD-002", "qty": 1, "unitCents": 1500 }
#         ],
#         "declared": { "netCents": 3498, "vatCents": 0, "grossCents": 3498 }
#       },
#       {
#         "orderId": "A301",
#         "shipTo": { "country": "NL" },
#         "customer": { "email": "billing@company.nl", "vatId": "NL999999999B01" },
#         "lines": [
#           { "sku": "WID-001", "qty": 2, "unitCents": 999 },
#           { "sku": "GAD-002", "qty": 1, "unitCents": 1500 }
#         ],
#         "declared": { "netCents": 3498, "vatCents": 0, "grossCents": 3498 }
#       },
#       {
#         "orderId": "A400",
#         "shipTo": { "country": "BE" },
#         "customer": { "email": "ada@other.example", "vatId": null },
#         "lines": [
#           { "sku": "WID-001", "qty": 2, "unitCents": 999 },
#           { "sku": "GAD-002", "qty": 1, "unitCents": 1500 }
#         ],
#         "declared": { "netCents": 3498, "vatCents": 508, "grossCents": 4006 }
#       }
#     ]
#   }"""^^rdf:JSON .
#   ("""{
#     "meta~data": { "batch": "2025-12-18" },
#     "orders": [
#       {
#         "orderId": "A100",
#         "shipTo": { "country": "BE" },
#         "customer": { "email": "Ada@Example.ORG", "vatId": null },
#         "lines": [
#           { "sku": "wid-001", "qty": 2, "unitCents": 999 },
#           { "sku": "GAD-002", "qty": 1, "unitCents": 1500 }
#         ],
#         "declared": { "netCents": 3498, "vatCents": 509, "grossCents": 4007 }
#       },
#       {
#         "orderId": "A200",
#         "shipTo": { "country": "US" },
#         "customer": { "email": "bob@example.org", "vatId": null },
#         "lines": [
#           { "sku": "WID-001", "qty": 2, "unitCents": 999 },
#           { "sku": "GAD-002", "qty": 1, "unitCents": 1500 }
#         ],
#         "declared": { "netCents": 3498, "vatCents": 0, "grossCents": 3498 }
#       },
#       {
#         "orderId": "A300",
#         "shipTo": { "country": "NL" },
#         "customer": { "email": "acct@company.nl", "vatId": "NL999999999B01" },
#         "lines": [
#           { "sku": "WID-001", "qty": 2, "unitCents": 999 },
#           { "sku": "GAD-002", "qty": 1, "unitCents": 1500 }
#         ],
#         "declared": { "netCents": 3498, "vatCents": 0, "grossCents": 3498 }
#       },
#       {
#         "orderId": "A301",
#         "shipTo": { "country": "NL" },
#         "customer": { "email": "billing@company.nl", "vatId": "NL999999999B01" },
#         "lines": [
#           { "sku": "WID-001", "qty": 2, "unitCents": 999 },
#           { "sku": "GAD-002", "qty": 1, "unitCents": 1500 }
#         ],
#         "declared": { "netCents": 3498, "vatCents": 0, "grossCents": 3498 }
#       },
#       {
#         "orderId": "A400",
#         "shipTo": { "country": "BE" },
#         "customer": { "email": "ada@other.example", "vatId": null },
#         "lines": [
#           { "sku": "WID-001", "qty": 2, "unitCents": 999 },
#           { "sku": "GAD-002", "qty": 1, "unitCents": 1500 }
#         ],
#         "declared": { "netCents": 3498, "vatCents": 508, "grossCents": 4006 }
#       }
#     ]
#   }"""^^rdf:JSON "/orders") string:jsonPointer ("""{"orderId":"A100","shipTo":{"country":"BE"},"customer":{"email":"Ada@Example.ORG","vatId":null},"lines":[{"sku":"wid-001","qty":2,"unitCents":999},{"sku":"GAD-002","qty":1,"unitCents":1500}],"declared":{"netCents":3498,"vatCents":509,"grossCents":4007}}"""^^rdf:JSON """{"orderId":"A200","shipTo":{"country":"US"},"customer":{"email":"bob@example.org","vatId":null},"lines":[{"sku":"WID-001","qty":2,"unitCents":999},{"sku":"GAD-002","qty":1,"unitCents":1500}],"declared":{"netCents":3498,"vatCents":0,"grossCents":3498}}"""^^rdf:JSON """{"orderId":"A300","shipTo":{"country":"NL"},"customer":{"email":"acct@company.nl","vatId":"NL999999999B01"},"lines":[{"sku":"WID-001","qty":2,"unitCents":999},{"sku":"GAD-002","qty":1,"unitCents":1500}],"declared":{"netCents":3498,"vatCents":0,"grossCents":3498}}"""^^rdf:JSON """{"orderId":"A301","shipTo":{"country":"NL"},"customer":{"email":"billing@company.nl","vatId":"NL999999999B01"},"lines":[{"sku":"WID-001","qty":2,"unitCents":999},{"sku":"GAD-002","qty":1,"unitCents":1500}],"declared":{"netCents":3498,"vatCents":0,"grossCents":3498}}"""^^rdf:JSON """{"orderId":"A400","shipTo":{"country":"BE"},"customer":{"email":"ada@other.example","vatId":null},"lines":[{"sku":"WID-001","qty":2,"unitCents":999},{"sku":"GAD-002","qty":1,"unitCents":1500}],"declared":{"netCents":3498,"vatCents":508,"grossCents":4006}}"""^^rdf:JSON) .
#   ("""{"orderId":"A100","shipTo":{"country":"BE"},"customer":{"email":"Ada@Example.ORG","vatId":null},"lines":[{"sku":"wid-001","qty":2,"unitCents":999},{"sku":"GAD-002","qty":1,"unitCents":1500}],"declared":{"netCents":3498,"vatCents":509,"grossCents":4007}}"""^^rdf:JSON """{"orderId":"A200","shipTo":{"country":"US"},"customer":{"email":"bob@example.org","vatId":null},"lines":[{"sku":"WID-001","qty":2,"unitCents":999},{"sku":"GAD-002","qty":1,"unitCents":1500}],"declared":{"netCents":3498,"vatCents":0,"grossCents":3498}}"""^^rdf:JSON """{"orderId":"A300","shipTo":{"country":"NL"},"customer":{"email":"acct@company.nl","vatId":"NL999999999B01"},"lines":[{"sku":"WID-001","qty":2,"unitCents":999},{"sku":"GAD-002","qty":1,"unitCents":1500}],"declared":{"netCents":3498,"vatCents":0,"grossCents":3498}}"""^^rdf:JSON """{"orderId":"A301","shipTo":{"country":"NL"},"customer":{"email":"billing@company.nl","vatId":"NL999999999B01"},"lines":[{"sku":"WID-001","qty":2,"unitCents":999},{"sku":"GAD-002","qty":1,"unitCents":1500}],"declared":{"netCents":3498,"vatCents":0,"grossCents":3498}}"""^^rdf:JSON """{"orderId":"A400","shipTo":{"country":"BE"},"customer":{"email":"ada@other.example","vatId":null},"lines":[{"sku":"WID-001","qty":2,"unitCents":999},{"sku":"GAD-002","qty":1,"unitCents":1500}],"declared":{"netCents":3498,"vatCents":508,"grossCents":4006}}"""^^rdf:JSON) list:iterate (0 """{"orderId":"A100","shipTo":{"country":"BE"},"customer":{"email":"Ada@Example.ORG","vatId":null},"lines":[{"sku":"wid-001","qty":2,"unitCents":999},{"sku":"GAD-002","qty":1,"unitCents":1500}],"declared":{"netCents":3498,"vatCents":509,"grossCents":4007}}"""^^rdf:JSON) .
#   ("""{"orderId":"A100","shipTo":{"country":"BE"},"customer":{"email":"Ada@Example.ORG","vatId":null},"lines":[{"sku":"wid-001","qty":2,"unitCents":999},{"sku":"GAD-002","qty":1,"unitCents":1500}],"declared":{"netCents":3498,"vatCents":509,"grossCents":4007}}"""^^rdf:JSON "/orderId") string:jsonPointer "A100" .
#   ("""{"orderId":"A100","shipTo":{"country":"BE"},"customer":{"email":"Ada@Example.ORG","vatId":null},"lines":[{"sku":"wid-001","qty":2,"unitCents":999},{"sku":"GAD-002","qty":1,"unitCents":1500}],"declared":{"netCents":3498,"vatCents":509,"grossCents":4007}}"""^^rdf:JSON "/shipTo/country") string:jsonPointer "BE" .
#   ("""{"orderId":"A100","shipTo":{"country":"BE"},"customer":{"email":"Ada@Example.ORG","vatId":null},"lines":[{"sku":"wid-001","qty":2,"unitCents":999},{"sku":"GAD-002","qty":1,"unitCents":1500}],"declared":{"netCents":3498,"vatCents":509,"grossCents":4007}}"""^^rdf:JSON "/customer") string:jsonPointer """{"email":"Ada@Example.ORG","vatId":null}"""^^rdf:JSON .
#   ("""{"email":"Ada@Example.ORG","vatId":null}"""^^rdf:JSON "/email") string:jsonPointer "Ada@Example.ORG" .
#   ("""{"email":"Ada@Example.ORG","vatId":null}"""^^rdf:JSON "/vatId") string:jsonPointer "null" .
#   ("""{"orderId":"A100","shipTo":{"country":"BE"},"customer":{"email":"Ada@Example.ORG","vatId":null},"lines":[{"sku":"wid-001","qty":2,"unitCents":999},{"sku":"GAD-002","qty":1,"unitCents":1500}],"declared":{"netCents":3498,"vatCents":509,"grossCents":4007}}"""^^rdf:JSON "/declared") string:jsonPointer """{"netCents":3498,"vatCents":509,"grossCents":4007}"""^^rdf:JSON .
#   ("""{"netCents":3498,"vatCents":509,"grossCents":4007}"""^^rdf:JSON "/netCents") string:jsonPointer 3498 .
#   ("""{"netCents":3498,"vatCents":509,"grossCents":4007}"""^^rdf:JSON "/vatCents") string:jsonPointer 509 .
#   ("""{"netCents":3498,"vatCents":509,"grossCents":4007}"""^^rdf:JSON "/grossCents") string:jsonPointer 4007 .
#   ("urn:example:order:%s" "A100") string:format "urn:example:order:A100" .
#   <urn:example:order:A100> log:uri "urn:example:order:A100" .
# via the schematic forward rule:
#   {
#     ex:feed ex:json ?J .
#     (?J "/orders") string:jsonPointer ?Orders .
#     ?Orders list:iterate (?OrderIndex ?OrderJson) .
#     (?OrderJson "/orderId") string:jsonPointer ?OrderId .
#     (?OrderJson "/shipTo/country") string:jsonPointer ?Country .
#     (?OrderJson "/customer") string:jsonPointer ?CustJson .
#     (?CustJson "/email") string:jsonPointer ?Email .
#     (?CustJson "/vatId") string:jsonPointer ?VatIdRaw .
#     (?OrderJson "/declared") string:jsonPointer ?Decl .
#     (?Decl "/netCents") string:jsonPointer ?NetD .
#     (?Decl "/vatCents") string:jsonPointer ?VatD .
#     (?Decl "/grossCents") string:jsonPointer ?GrossD .
#     ("urn:example:order:%s" ?OrderId) string:format ?OrderUriStr .
#     ?Order log:uri ?OrderUriStr .
#   } => {
#     ?Order a ex:Order .
#     ?Order ex:orderId ?OrderId .
#     ?Order ex:orderIndex ?OrderIndex .
#     ?Order ex:shipCountry ?Country .
#     ?Order ex:email ?Email .
#     ?Order ex:vatIdRaw ?VatIdRaw .
#     ?Order ex:declaredNetCents ?NetD .
#     ?Order ex:declaredVatCents ?VatD .
#     ?Order ex:declaredGrossCents ?GrossD .
#   } .
# with substitution (on rule variables):
#   ?Country = "BE"
#   ?CustJson = """{"email":"Ada@Example.ORG","vatId":null}"""^^rdf:JSON
#   ?Decl = """{"netCents":3498,"vatCents":509,"grossCents":4007}"""^^rdf:JSON
#   ?Email = "Ada@Example.ORG"
#   ?GrossD = 4007
#   ?J = """{
#     "meta~data": { "batch": "2025-12-18" },
#     "orders": [
#     {
#     "orderId": "A100",
#     "shipTo": { "country": "BE" },
#     "customer": { "email": "Ada@Example.ORG", "vatId": null },
#     "lines": [
#     { "sku": "wid-001", "qty": 2, "unitCents": 999 },
#     { "sku": "GAD-002", "qty": 1, "unitCents": 1500 }
#     ],
#     "declared": { "netCents": 3498, "vatCents": 509, "grossCents": 4007 }
#     },
#     {
#     "orderId": "A200",
#     "shipTo": { "country": "US" },
#     "customer": { "email": "bob@example.org", "vatId": null },
#     "lines": [
#     { "sku": "WID-001", "qty": 2, "unitCents": 999 },
#     { "sku": "GAD-002", "qty": 1, "unitCents": 1500 }
#     ],
#     "declared": { "netCents": 3498, "vatCents": 0, "grossCents": 3498 }
#     },
#     {
#     "orderId": "A300",
#     "shipTo": { "country": "NL" },
#     "customer": { "email": "acct@company.nl", "vatId": "NL999999999B01" },
#     "lines": [
#     { "sku": "WID-001", "qty": 2, "unitCents": 999 },
#     { "sku": "GAD-002", "qty": 1, "unitCents": 1500 }
#     ],
#     "declared": { "netCents": 3498, "vatCents": 0, "grossCents": 3498 }
#     },
#     {
#     "orderId": "A301",
#     "shipTo": { "country": "NL" },
#     "customer": { "email": "billing@company.nl", "vatId": "NL999999999B01" },
#     "lines": [
#     { "sku": "WID-001", "qty": 2, "unitCents": 999 },
#     { "sku": "GAD-002", "qty": 1, "unitCents": 1500 }
#     ],
#     "declared": { "netCents": 3498, "vatCents": 0, "grossCents": 3498 }
#     },
#     {
#     "orderId": "A400",
#     "shipTo": { "country": "BE" },
#     "customer": { "email": "ada@other.example", "vatId": null },
#     "lines": [
#     { "sku": "WID-001", "qty": 2, "unitCents": 999 },
#     { "sku": "GAD-002", "qty": 1, "unitCents": 1500 }
#     ],
#     "declared": { "netCents": 3498, "vatCents": 508, "grossCents": 4006 }
#     }
#     ]
#   }"""^^rdf:JSON
#   ?NetD = 3498
#   ?Order = <urn:example:order:A100>
#   ?OrderId = "A100"
#   ?OrderIndex = 0
#   ?OrderJson = """{"orderId":"A100","shipTo":{"country":"BE"},"customer":{"email":"Ada@Example.ORG","vatId":null},"lines":[{"sku":"wid-001","qty":2,"unitCents":999},{"sku":"GAD-002","qty":1,"unitCents":1500}],"declared":{"netCents":3498,"vatCents":509,"grossCents":4007}}"""^^rdf:JSON
#   ?OrderUriStr = "urn:example:order:A100"
#   ?Orders = ("""{"orderId":"A100","shipTo":{"country":"BE"},"customer":{"email":"Ada@Example.ORG","vatId":null},"lines":[{"sku":"wid-001","qty":2,"unitCents":999},{"sku":"GAD-002","qty":1,"unitCents":1500}],"declared":{"netCents":3498,"vatCents":509,"grossCents":4007}}"""^^rdf:JSON """{"orderId":"A200","shipTo":{"country":"US"},"customer":{"email":"bob@example.org","vatId":null},"lines":[{"sku":"WID-001","qty":2,"unitCents":999},{"sku":"GAD-002","qty":1,"unitCents":1500}],"declared":{"netCents":3498,"vatCents":0,"grossCents":3498}}"""^^rdf:JSON """{"orderId":"A300","shipTo":{"country":"NL"},"customer":{"email":"acct@company.nl","vatId":"NL999999999B01"},"lines":[{"sku":"WID-001","qty":2,"unitCents":999},{"sku":"GAD-002","qty":1,"unitCents":1500}],"declared":{"netCents":3498,"vatCents":0,"grossCents":3498}}"""^^rdf:JSON """{"orderId":"A301","shipTo":{"country":"NL"},"customer":{"email":"billing@company.nl","vatId":"NL999999999B01"},"lines":[{"sku":"WID-001","qty":2,"unitCents":999},{"sku":"GAD-002","qty":1,"unitCents":1500}],"declared":{"netCents":3498,"vatCents":0,"grossCents":3498}}"""^^rdf:JSON """{"orderId":"A400","shipTo":{"country":"BE"},"customer":{"email":"ada@other.example","vatId":null},"lines":[{"sku":"WID-001","qty":2,"unitCents":999},{"sku":"GAD-002","qty":1,"unitCents":1500}],"declared":{"netCents":3498,"vatCents":508,"grossCents":4006}}"""^^rdf:JSON)
#   ?VatD = 509
#   ?VatIdRaw = "null"
# Therefore the derived triple above is entailed by the rules and facts.
# ----------------------------------------------------------------------

<urn:example:order:A100> a ex:Order .

# ----------------------------------------------------------------------
# Proof for derived triple:
#   <urn:example:order:A100> ex:orderId "A100" .
# It holds because the following instance of the rule body is provable:
#   ex:feed ex:json """{
#     "meta~data": { "batch": "2025-12-18" },
#     "orders": [
#       {
#         "orderId": "A100",
#         "shipTo": { "country": "BE" },
#         "customer": { "email": "Ada@Example.ORG", "vatId": null },
#         "lines": [
#           { "sku": "wid-001", "qty": 2, "unitCents": 999 },
#           { "sku": "GAD-002", "qty": 1, "unitCents": 1500 }
#         ],
#         "declared": { "netCents": 3498, "vatCents": 509, "grossCents": 4007 }
#       },
#       {
#         "orderId": "A200",
#         "shipTo": { "country": "US" },
#         "customer": { "email": "bob@example.org", "vatId": null },
#         "lines": [
#           { "sku": "WID-001", "qty": 2, "unitCents": 999 },
#           { "sku": "GAD-002", "qty": 1, "unitCents": 1500 }
#         ],
#         "declared": { "netCents": 3498, "vatCents": 0, "grossCents": 3498 }
#       },
#       {
#         "orderId": "A300",
#         "shipTo": { "country": "NL" },
#         "customer": { "email": "acct@company.nl", "vatId": "NL999999999B01" },
#         "lines": [
#           { "sku": "WID-001", "qty": 2, "unitCents": 999 },
#           { "sku": "GAD-002", "qty": 1, "unitCents": 1500 }
#         ],
#         "declared": { "netCents": 3498, "vatCents": 0, "grossCents": 3498 }
#       },
#       {
#         "orderId": "A301",
#         "shipTo": { "country": "NL" },
#         "customer": { "email": "billing@company.nl", "vatId": "NL999999999B01" },
#         "lines": [
#           { "sku": "WID-001", "qty": 2, "unitCents": 999 },
#           { "sku": "GAD-002", "qty": 1, "unitCents": 1500 }
#         ],
#         "declared": { "netCents": 3498, "vatCents": 0, "grossCents": 3498 }
#       },
#       {
#         "orderId": "A400",
#         "shipTo": { "country": "BE" },
#         "customer": { "email": "ada@other.example", "vatId": null },
#         "lines": [
#           { "sku": "WID-001", "qty": 2, "unitCents": 999 },
#           { "sku": "GAD-002", "qty": 1, "unitCents": 1500 }
#         ],
#         "declared": { "netCents": 3498, "vatCents": 508, "grossCents": 4006 }
#       }
#     ]
#   }"""^^rdf:JSON .
#   ("""{
#     "meta~data": { "batch": "2025-12-18" },
#     "orders": [
#       {
#         "orderId": "A100",
#         "shipTo": { "country": "BE" },
#         "customer": { "email": "Ada@Example.ORG", "vatId": null },
#         "lines": [
#           { "sku": "wid-001", "qty": 2, "unitCents": 999 },
#           { "sku": "GAD-002", "qty": 1, "unitCents": 1500 }
#         ],
#         "declared": { "netCents": 3498, "vatCents": 509, "grossCents": 4007 }
#       },
#       {
#         "orderId": "A200",
#         "shipTo": { "country": "US" },
#         "customer": { "email": "bob@example.org", "vatId": null },
#         "lines": [
#           { "sku": "WID-001", "qty": 2, "unitCents": 999 },
#           { "sku": "GAD-002", "qty": 1, "unitCents": 1500 }
#         ],
#         "declared": { "netCents": 3498, "vatCents": 0, "grossCents": 3498 }
#       },
#       {
#         "orderId": "A300",
#         "shipTo": { "country": "NL" },
#         "customer": { "email": "acct@company.nl", "vatId": "NL999999999B01" },
#         "lines": [
#           { "sku": "WID-001", "qty": 2, "unitCents": 999 },
#           { "sku": "GAD-002", "qty": 1, "unitCents": 1500 }
#         ],
#         "declared": { "netCents": 3498, "vatCents": 0, "grossCents": 3498 }
#       },
#       {
#         "orderId": "A301",
#         "shipTo": { "country": "NL" },
#         "customer": { "email": "billing@company.nl", "vatId": "NL999999999B01" },
#         "lines": [
#           { "sku": "WID-001", "qty": 2, "unitCents": 999 },
#           { "sku": "GAD-002", "qty": 1, "unitCents": 1500 }
#         ],
#         "declared": { "netCents": 3498, "vatCents": 0, "grossCents": 3498 }
#       },
#       {
#         "orderId": "A400",
#         "shipTo": { "country": "BE" },
#         "customer": { "email": "ada@other.example", "vatId": null },
#         "lines": [
#           { "sku": "WID-001", "qty": 2, "unitCents": 999 },
#           { "sku": "GAD-002", "qty": 1, "unitCents": 1500 }
#         ],
#         "declared": { "netCents": 3498, "vatCents": 508, "grossCents": 4006 }
#       }
#     ]
#   }"""^^rdf:JSON "/orders") string:jsonPointer ("""{"orderId":"A100","shipTo":{"country":"BE"},"customer":{"email":"Ada@Example.ORG","vatId":null},"lines":[{"sku":"wid-001","qty":2,"unitCents":999},{"sku":"GAD-002","qty":1,"unitCents":1500}],"declared":{"netCents":3498,"vatCents":509,"grossCents":4007}}"""^^rdf:JSON """{"orderId":"A200","shipTo":{"country":"US"},"customer":{"email":"bob@example.org","vatId":null},"lines":[{"sku":"WID-001","qty":2,"unitCents":999},{"sku":"GAD-002","qty":1,"unitCents":1500}],"declared":{"netCents":3498,"vatCents":0,"grossCents":3498}}"""^^rdf:JSON """{"orderId":"A300","shipTo":{"country":"NL"},"customer":{"email":"acct@company.nl","vatId":"NL999999999B01"},"lines":[{"sku":"WID-001","qty":2,"unitCents":999},{"sku":"GAD-002","qty":1,"unitCents":1500}],"declared":{"netCents":3498,"vatCents":0,"grossCents":3498}}"""^^rdf:JSON """{"orderId":"A301","shipTo":{"country":"NL"},"customer":{"email":"billing@company.nl","vatId":"NL999999999B01"},"lines":[{"sku":"WID-001","qty":2,"unitCents":999},{"sku":"GAD-002","qty":1,"unitCents":1500}],"declared":{"netCents":3498,"vatCents":0,"grossCents":3498}}"""^^rdf:JSON """{"orderId":"A400","shipTo":{"country":"BE"},"customer":{"email":"ada@other.example","vatId":null},"lines":[{"sku":"WID-001","qty":2,"unitCents":999},{"sku":"GAD-002","qty":1,"unitCents":1500}],"declared":{"netCents":3498,"vatCents":508,"grossCents":4006}}"""^^rdf:JSON) .
#   ("""{"orderId":"A100","shipTo":{"country":"BE"},"customer":{"email":"Ada@Example.ORG","vatId":null},"lines":[{"sku":"wid-001","qty":2,"unitCents":999},{"sku":"GAD-002","qty":1,"unitCents":1500}],"declared":{"netCents":3498,"vatCents":509,"grossCents":4007}}"""^^rdf:JSON """{"orderId":"A200","shipTo":{"country":"US"},"customer":{"email":"bob@example.org","vatId":null},"lines":[{"sku":"WID-001","qty":2,"unitCents":999},{"sku":"GAD-002","qty":1,"unitCents":1500}],"declared":{"netCents":3498,"vatCents":0,"grossCents":3498}}"""^^rdf:JSON """{"orderId":"A300","shipTo":{"country":"NL"},"customer":{"email":"acct@company.nl","vatId":"NL999999999B01"},"lines":[{"sku":"WID-001","qty":2,"unitCents":999},{"sku":"GAD-002","qty":1,"unitCents":1500}],"declared":{"netCents":3498,"vatCents":0,"grossCents":3498}}"""^^rdf:JSON """{"orderId":"A301","shipTo":{"country":"NL"},"customer":{"email":"billing@company.nl","vatId":"NL999999999B01"},"lines":[{"sku":"WID-001","qty":2,"unitCents":999},{"sku":"GAD-002","qty":1,"unitCents":1500}],"declared":{"netCents":3498,"vatCents":0,"grossCents":3498}}"""^^rdf:JSON """{"orderId":"A400","shipTo":{"country":"BE"},"customer":{"email":"ada@other.example","vatId":null},"lines":[{"sku":"WID-001","qty":2,"unitCents":999},{"sku":"GAD-002","qty":1,"unitCents":1500}],"declared":{"netCents":3498,"vatCents":508,"grossCents":4006}}"""^^rdf:JSON) list:iterate (0 """{"orderId":"A100","shipTo":{"country":"BE"},"customer":{"email":"Ada@Example.ORG","vatId":null},"lines":[{"sku":"wid-001","qty":2,"unitCents":999},{"sku":"GAD-002","qty":1,"unitCents":1500}],"declared":{"netCents":3498,"vatCents":509,"grossCents":4007}}"""^^rdf:JSON) .
#   ("""{"orderId":"A100","shipTo":{"country":"BE"},"customer":{"email":"Ada@Example.ORG","vatId":null},"lines":[{"sku":"wid-001","qty":2,"unitCents":999},{"sku":"GAD-002","qty":1,"unitCents":1500}],"declared":{"netCents":3498,"vatCents":509,"grossCents":4007}}"""^^rdf:JSON "/orderId") string:jsonPointer "A100" .
#   ("""{"orderId":"A100","shipTo":{"country":"BE"},"customer":{"email":"Ada@Example.ORG","vatId":null},"lines":[{"sku":"wid-001","qty":2,"unitCents":999},{"sku":"GAD-002","qty":1,"unitCents":1500}],"declared":{"netCents":3498,"vatCents":509,"grossCents":4007}}"""^^rdf:JSON "/shipTo/country") string:jsonPointer "BE" .
#   ("""{"orderId":"A100","shipTo":{"country":"BE"},"customer":{"email":"Ada@Example.ORG","vatId":null},"lines":[{"sku":"wid-001","qty":2,"unitCents":999},{"sku":"GAD-002","qty":1,"unitCents":1500}],"declared":{"netCents":3498,"vatCents":509,"grossCents":4007}}"""^^rdf:JSON "/customer") string:jsonPointer """{"email":"Ada@Example.ORG","vatId":null}"""^^rdf:JSON .
#   ("""{"email":"Ada@Example.ORG","vatId":null}"""^^rdf:JSON "/email") string:jsonPointer "Ada@Example.ORG" .
#   ("""{"email":"Ada@Example.ORG","vatId":null}"""^^rdf:JSON "/vatId") string:jsonPointer "null" .
#   ("""{"orderId":"A100","shipTo":{"country":"BE"},"customer":{"email":"Ada@Example.ORG","vatId":null},"lines":[{"sku":"wid-001","qty":2,"unitCents":999},{"sku":"GAD-002","qty":1,"unitCents":1500}],"declared":{"netCents":3498,"vatCents":509,"grossCents":4007}}"""^^rdf:JSON "/declared") string:jsonPointer """{"netCents":3498,"vatCents":509,"grossCents":4007}"""^^rdf:JSON .
#   ("""{"netCents":3498,"vatCents":509,"grossCents":4007}"""^^rdf:JSON "/netCents") string:jsonPointer 3498 .
#   ("""{"netCents":3498,"vatCents":509,"grossCents":4007}"""^^rdf:JSON "/vatCents") string:jsonPointer 509 .
#   ("""{"netCents":3498,"vatCents":509,"grossCents":4007}"""^^rdf:JSON "/grossCents") string:jsonPointer 4007 .
#   ("urn:example:order:%s" "A100") string:format "urn:example:order:A100" .
#   <urn:example:order:A100> log:uri "urn:example:order:A100" .
# via the schematic forward rule:
#   {
#     ex:feed ex:json ?J .
#     (?J "/orders") string:jsonPointer ?Orders .
#     ?Orders list:iterate (?OrderIndex ?OrderJson) .
#     (?OrderJson "/orderId") string:jsonPointer ?OrderId .
#     (?OrderJson "/shipTo/country") string:jsonPointer ?Country .
#     (?OrderJson "/customer") string:jsonPointer ?CustJson .
#     (?CustJson "/email") string:jsonPointer ?Email .
#     (?CustJson "/vatId") string:jsonPointer ?VatIdRaw .
#     (?OrderJson "/declared") string:jsonPointer ?Decl .
#     (?Decl "/netCents") string:jsonPointer ?NetD .
#     (?Decl "/vatCents") string:jsonPointer ?VatD .
#     (?Decl "/grossCents") string:jsonPointer ?GrossD .
#     ("urn:example:order:%s" ?OrderId) string:format ?OrderUriStr .
#     ?Order log:uri ?OrderUriStr .
#   } => {
#     ?Order a ex:Order .
#     ?Order ex:orderId ?OrderId .
#     ?Order ex:orderIndex ?OrderIndex .
#     ?Order ex:shipCountry ?Country .
#     ?Order ex:email ?Email .
#     ?Order ex:vatIdRaw ?VatIdRaw .
#     ?Order ex:declaredNetCents ?NetD .
#     ?Order ex:declaredVatCents ?VatD .
#     ?Order ex:declaredGrossCents ?GrossD .
#   } .
# with substitution (on rule variables):
#   ?Country = "BE"
#   ?CustJson = """{"email":"Ada@Example.ORG","vatId":null}"""^^rdf:JSON
#   ?Decl = """{"netCents":3498,"vatCents":509,"grossCents":4007}"""^^rdf:JSON
#   ?Email = "Ada@Example.ORG"
#   ?GrossD = 4007
#   ?J = """{
#     "meta~data": { "batch": "2025-12-18" },
#     "orders": [
#     {
#     "orderId": "A100",
#     "shipTo": { "country": "BE" },
#     "customer": { "email": "Ada@Example.ORG", "vatId": null },
#     "lines": [
#     { "sku": "wid-001", "qty": 2, "unitCents": 999 },
#     { "sku": "GAD-002", "qty": 1, "unitCents": 1500 }
#     ],
#     "declared": { "netCents": 3498, "vatCents": 509, "grossCents": 4007 }
#     },
#     {
#     "orderId": "A200",
#     "shipTo": { "country": "US" },
#     "customer": { "email": "bob@example.org", "vatId": null },
#     "lines": [
#     { "sku": "WID-001", "qty": 2, "unitCents": 999 },
#     { "sku": "GAD-002", "qty": 1, "unitCents": 1500 }
#     ],
#     "declared": { "netCents": 3498, "vatCents": 0, "grossCents": 3498 }
#     },
#     {
#     "orderId": "A300",
#     "shipTo": { "country": "NL" },
#     "customer": { "email": "acct@company.nl", "vatId": "NL999999999B01" },
#     "lines": [
#     { "sku": "WID-001", "qty": 2, "unitCents": 999 },
#     { "sku": "GAD-002", "qty": 1, "unitCents": 1500 }
#     ],
#     "declared": { "netCents": 3498, "vatCents": 0, "grossCents": 3498 }
#     },
#     {
#     "orderId": "A301",
#     "shipTo": { "country": "NL" },
#     "customer": { "email": "billing@company.nl", "vatId": "NL999999999B01" },
#     "lines": [
#     { "sku": "WID-001", "qty": 2, "unitCents": 999 },
#     { "sku": "GAD-002", "qty": 1, "unitCents": 1500 }
#     ],
#     "declared": { "netCents": 3498, "vatCents": 0, "grossCents": 3498 }
#     },
#     {
#     "orderId": "A400",
#     "shipTo": { "country": "BE" },
#     "customer": { "email": "ada@other.example", "vatId": null },
#     "lines": [
#     { "sku": "WID-001", "qty": 2, "unitCents": 999 },
#     { "sku": "GAD-002", "qty": 1, "unitCents": 1500 }
#     ],
#     "declared": { "netCents": 3498, "vatCents": 508, "grossCents": 4006 }
#     }
#     ]
#   }"""^^rdf:JSON
#   ?NetD = 3498
#   ?Order = <urn:example:order:A100>
#   ?OrderId = "A100"
#   ?OrderIndex = 0
#   ?OrderJson = """{"orderId":"A100","shipTo":{"country":"BE"},"customer":{"email":"Ada@Example.ORG","vatId":null},"lines":[{"sku":"wid-001","qty":2,"unitCents":999},{"sku":"GAD-002","qty":1,"unitCents":1500}],"declared":{"netCents":3498,"vatCents":509,"grossCents":4007}}"""^^rdf:JSON
#   ?OrderUriStr = "urn:example:order:A100"
#   ?Orders = ("""{"orderId":"A100","shipTo":{"country":"BE"},"customer":{"email":"Ada@Example.ORG","vatId":null},"lines":[{"sku":"wid-001","qty":2,"unitCents":999},{"sku":"GAD-002","qty":1,"unitCents":1500}],"declared":{"netCents":3498,"vatCents":509,"grossCents":4007}}"""^^rdf:JSON """{"orderId":"A200","shipTo":{"country":"US"},"customer":{"email":"bob@example.org","vatId":null},"lines":[{"sku":"WID-001","qty":2,"unitCents":999},{"sku":"GAD-002","qty":1,"unitCents":1500}],"declared":{"netCents":3498,"vatCents":0,"grossCents":3498}}"""^^rdf:JSON """{"orderId":"A300","shipTo":{"country":"NL"},"customer":{"email":"acct@company.nl","vatId":"NL999999999B01"},"lines":[{"sku":"WID-001","qty":2,"unitCents":999},{"sku":"GAD-002","qty":1,"unitCents":1500}],"declared":{"netCents":3498,"vatCents":0,"grossCents":3498}}"""^^rdf:JSON """{"orderId":"A301","shipTo":{"country":"NL"},"customer":{"email":"billing@company.nl","vatId":"NL999999999B01"},"lines":[{"sku":"WID-001","qty":2,"unitCents":999},{"sku":"GAD-002","qty":1,"unitCents":1500}],"declared":{"netCents":3498,"vatCents":0,"grossCents":3498}}"""^^rdf:JSON """{"orderId":"A400","shipTo":{"country":"BE"},"customer":{"email":"ada@other.example","vatId":null},"lines":[{"sku":"WID-001","qty":2,"unitCents":999},{"sku":"GAD-002","qty":1,"unitCents":1500}],"declared":{"netCents":3498,"vatCents":508,"grossCents":4006}}"""^^rdf:JSON)
#   ?VatD = 509
#   ?VatIdRaw = "null"
# Therefore the derived triple above is entailed by the rules and facts.
# ----------------------------------------------------------------------

<urn:example:order:A100> ex:orderId "A100" .

# ----------------------------------------------------------------------
# Proof for derived triple:
#   <urn:example:order:A100> ex:orderIndex 0 .
# It holds because the following instance of the rule body is provable:
#   ex:feed ex:json """{
#     "meta~data": { "batch": "2025-12-18" },
#     "orders": [
#       {
#         "orderId": "A100",
#         "shipTo": { "country": "BE" },
#         "customer": { "email": "Ada@Example.ORG", "vatId": null },
#         "lines": [
#           { "sku": "wid-001", "qty": 2, "unitCents": 999 },
#           { "sku": "GAD-002", "qty": 1, "unitCents": 1500 }
#         ],
#         "declared": { "netCents": 3498, "vatCents": 509, "grossCents": 4007 }
#       },
#       {
#         "orderId": "A200",
#         "shipTo": { "country": "US" },
#         "customer": { "email": "bob@example.org", "vatId": null },
#         "lines": [
#           { "sku": "WID-001", "qty": 2, "unitCents": 999 },
#           { "sku": "GAD-002", "qty": 1, "unitCents": 1500 }
#         ],
#         "declared": { "netCents": 3498, "vatCents": 0, "grossCents": 3498 }
#       },
#       {
#         "orderId": "A300",
#         "shipTo": { "country": "NL" },
#         "customer": { "email": "acct@company.nl", "vatId": "NL999999999B01" },
#         "lines": [
#           { "sku": "WID-001", "qty": 2, "unitCents": 999 },
#           { "sku": "GAD-002", "qty": 1, "unitCents": 1500 }
#         ],
#         "declared": { "netCents": 3498, "vatCents": 0, "grossCents": 3498 }
#       },
#       {
#         "orderId": "A301",
#         "shipTo": { "country": "NL" },
#         "customer": { "email": "billing@company.nl", "vatId": "NL999999999B01" },
#         "lines": [
#           { "sku": "WID-001", "qty": 2, "unitCents": 999 },
#           { "sku": "GAD-002", "qty": 1, "unitCents": 1500 }
#         ],
#         "declared": { "netCents": 3498, "vatCents": 0, "grossCents": 3498 }
#       },
#       {
#         "orderId": "A400",
#         "shipTo": { "country": "BE" },
#         "customer": { "email": "ada@other.example", "vatId": null },
#         "lines": [
#           { "sku": "WID-001", "qty": 2, "unitCents": 999 },
#           { "sku": "GAD-002", "qty": 1, "unitCents": 1500 }
#         ],
#         "declared": { "netCents": 3498, "vatCents": 508, "grossCents": 4006 }
#       }
#     ]
#   }"""^^rdf:JSON .
#   ("""{
#     "meta~data": { "batch": "2025-12-18" },
#     "orders": [
#       {
#         "orderId": "A100",
#         "shipTo": { "country": "BE" },
#         "customer": { "email": "Ada@Example.ORG", "vatId": null },
#         "lines": [
#           { "sku": "wid-001", "qty": 2, "unitCents": 999 },
#           { "sku": "GAD-002", "qty": 1, "unitCents": 1500 }
#         ],
#         "declared": { "netCents": 3498, "vatCents": 509, "grossCents": 4007 }
#       },
#       {
#         "orderId": "A200",
#         "shipTo": { "country": "US" },
#         "customer": { "email": "bob@example.org", "vatId": null },
#         "lines": [
#           { "sku": "WID-001", "qty": 2, "unitCents": 999 },
#           { "sku": "GAD-002", "qty": 1, "unitCents": 1500 }
#         ],
#         "declared": { "netCents": 3498, "vatCents": 0, "grossCents": 3498 }
#       },
#       {
#         "orderId": "A300",
#         "shipTo": { "country": "NL" },
#         "customer": { "email": "acct@company.nl", "vatId": "NL999999999B01" },
#         "lines": [
#           { "sku": "WID-001", "qty": 2, "unitCents": 999 },
#           { "sku": "GAD-002", "qty": 1, "unitCents": 1500 }
#         ],
#         "declared": { "netCents": 3498, "vatCents": 0, "grossCents": 3498 }
#       },
#       {
#         "orderId": "A301",
#         "shipTo": { "country": "NL" },
#         "customer": { "email": "billing@company.nl", "vatId": "NL999999999B01" },
#         "lines": [
#           { "sku": "WID-001", "qty": 2, "unitCents": 999 },
#           { "sku": "GAD-002", "qty": 1, "unitCents": 1500 }
#         ],
#         "declared": { "netCents": 3498, "vatCents": 0, "grossCents": 3498 }
#       },
#       {
#         "orderId": "A400",
#         "shipTo": { "country": "BE" },
#         "customer": { "email": "ada@other.example", "vatId": null },
#         "lines": [
#           { "sku": "WID-001", "qty": 2, "unitCents": 999 },
#           { "sku": "GAD-002", "qty": 1, "unitCents": 1500 }
#         ],
#         "declared": { "netCents": 3498, "vatCents": 508, "grossCents": 4006 }
#       }
#     ]
#   }"""^^rdf:JSON "/orders") string:jsonPointer ("""{"orderId":"A100","shipTo":{"country":"BE"},"customer":{"email":"Ada@Example.ORG","vatId":null},"lines":[{"sku":"wid-001","qty":2,"unitCents":999},{"sku":"GAD-002","qty":1,"unitCents":1500}],"declared":{"netCents":3498,"vatCents":509,"grossCents":4007}}"""^^rdf:JSON """{"orderId":"A200","shipTo":{"country":"US"},"customer":{"email":"bob@example.org","vatId":null},"lines":[{"sku":"WID-001","qty":2,"unitCents":999},{"sku":"GAD-002","qty":1,"unitCents":1500}],"declared":{"netCents":3498,"vatCents":0,"grossCents":3498}}"""^^rdf:JSON """{"orderId":"A300","shipTo":{"country":"NL"},"customer":{"email":"acct@company.nl","vatId":"NL999999999B01"},"lines":[{"sku":"WID-001","qty":2,"unitCents":999},{"sku":"GAD-002","qty":1,"unitCents":1500}],"declared":{"netCents":3498,"vatCents":0,"grossCents":3498}}"""^^rdf:JSON """{"orderId":"A301","shipTo":{"country":"NL"},"customer":{"email":"billing@company.nl","vatId":"NL999999999B01"},"lines":[{"sku":"WID-001","qty":2,"unitCents":999},{"sku":"GAD-002","qty":1,"unitCents":1500}],"declared":{"netCents":3498,"vatCents":0,"grossCents":3498}}"""^^rdf:JSON """{"orderId":"A400","shipTo":{"country":"BE"},"customer":{"email":"ada@other.example","vatId":null},"lines":[{"sku":"WID-001","qty":2,"unitCents":999},{"sku":"GAD-002","qty":1,"unitCents":1500}],"declared":{"netCents":3498,"vatCents":508,"grossCents":4006}}"""^^rdf:JSON) .
#   ("""{"orderId":"A100","shipTo":{"country":"BE"},"customer":{"email":"Ada@Example.ORG","vatId":null},"lines":[{"sku":"wid-001","qty":2,"unitCents":999},{"sku":"GAD-002","qty":1,"unitCents":1500}],"declared":{"netCents":3498,"vatCents":509,"grossCents":4007}}"""^^rdf:JSON """{"orderId":"A200","shipTo":{"country":"US"},"customer":{"email":"bob@example.org","vatId":null},"lines":[{"sku":"WID-001","qty":2,"unitCents":999},{"sku":"GAD-002","qty":1,"unitCents":1500}],"declared":{"netCents":3498,"vatCents":0,"grossCents":3498}}"""^^rdf:JSON """{"orderId":"A300","shipTo":{"country":"NL"},"customer":{"email":"acct@company.nl","vatId":"NL999999999B01"},"lines":[{"sku":"WID-001","qty":2,"unitCents":999},{"sku":"GAD-002","qty":1,"unitCents":1500}],"declared":{"netCents":3498,"vatCents":0,"grossCents":3498}}"""^^rdf:JSON """{"orderId":"A301","shipTo":{"country":"NL"},"customer":{"email":"billing@company.nl","vatId":"NL999999999B01"},"lines":[{"sku":"WID-001","qty":2,"unitCents":999},{"sku":"GAD-002","qty":1,"unitCents":1500}],"declared":{"netCents":3498,"vatCents":0,"grossCents":3498}}"""^^rdf:JSON """{"orderId":"A400","shipTo":{"country":"BE"},"customer":{"email":"ada@other.example","vatId":null},"lines":[{"sku":"WID-001","qty":2,"unitCents":999},{"sku":"GAD-002","qty":1,"unitCents":1500}],"declared":{"netCents":3498,"vatCents":508,"grossCents":4006}}"""^^rdf:JSON) list:iterate (0 """{"orderId":"A100","shipTo":{"country":"BE"},"customer":{"email":"Ada@Example.ORG","vatId":null},"lines":[{"sku":"wid-001","qty":2,"unitCents":999},{"sku":"GAD-002","qty":1,"unitCents":1500}],"declared":{"netCents":3498,"vatCents":509,"grossCents":4007}}"""^^rdf:JSON) .
#   ("""{"orderId":"A100","shipTo":{"country":"BE"},"customer":{"email":"Ada@Example.ORG","vatId":null},"lines":[{"sku":"wid-001","qty":2,"unitCents":999},{"sku":"GAD-002","qty":1,"unitCents":1500}],"declared":{"netCents":3498,"vatCents":509,"grossCents":4007}}"""^^rdf:JSON "/orderId") string:jsonPointer "A100" .
#   ("""{"orderId":"A100","shipTo":{"country":"BE"},"customer":{"email":"Ada@Example.ORG","vatId":null},"lines":[{"sku":"wid-001","qty":2,"unitCents":999},{"sku":"GAD-002","qty":1,"unitCents":1500}],"declared":{"netCents":3498,"vatCents":509,"grossCents":4007}}"""^^rdf:JSON "/shipTo/country") string:jsonPointer "BE" .
#   ("""{"orderId":"A100","shipTo":{"country":"BE"},"customer":{"email":"Ada@Example.ORG","vatId":null},"lines":[{"sku":"wid-001","qty":2,"unitCents":999},{"sku":"GAD-002","qty":1,"unitCents":1500}],"declared":{"netCents":3498,"vatCents":509,"grossCents":4007}}"""^^rdf:JSON "/customer") string:jsonPointer """{"email":"Ada@Example.ORG","vatId":null}"""^^rdf:JSON .
#   ("""{"email":"Ada@Example.ORG","vatId":null}"""^^rdf:JSON "/email") string:jsonPointer "Ada@Example.ORG" .
#   ("""{"email":"Ada@Example.ORG","vatId":null}"""^^rdf:JSON "/vatId") string:jsonPointer "null" .
#   ("""{"orderId":"A100","shipTo":{"country":"BE"},"customer":{"email":"Ada@Example.ORG","vatId":null},"lines":[{"sku":"wid-001","qty":2,"unitCents":999},{"sku":"GAD-002","qty":1,"unitCents":1500}],"declared":{"netCents":3498,"vatCents":509,"grossCents":4007}}"""^^rdf:JSON "/declared") string:jsonPointer """{"netCents":3498,"vatCents":509,"grossCents":4007}"""^^rdf:JSON .
#   ("""{"netCents":3498,"vatCents":509,"grossCents":4007}"""^^rdf:JSON "/netCents") string:jsonPointer 3498 .
#   ("""{"netCents":3498,"vatCents":509,"grossCents":4007}"""^^rdf:JSON "/vatCents") string:jsonPointer 509 .
#   ("""{"netCents":3498,"vatCents":509,"grossCents":4007}"""^^rdf:JSON "/grossCents") string:jsonPointer 4007 .
#   ("urn:example:order:%s" "A100") string:format "urn:example:order:A100" .
#   <urn:example:order:A100> log:uri "urn:example:order:A100" .
# via the schematic forward rule:
#   {
#     ex:feed ex:json ?J .
#     (?J "/orders") string:jsonPointer ?Orders .
#     ?Orders list:iterate (?OrderIndex ?OrderJson) .
#     (?OrderJson "/orderId") string:jsonPointer ?OrderId .
#     (?OrderJson "/shipTo/country") string:jsonPointer ?Country .
#     (?OrderJson "/customer") string:jsonPointer ?CustJson .
#     (?CustJson "/email") string:jsonPointer ?Email .
#     (?CustJson "/vatId") string:jsonPointer ?VatIdRaw .
#     (?OrderJson "/declared") string:jsonPointer ?Decl .
#     (?Decl "/netCents") string:jsonPointer ?NetD .
#     (?Decl "/vatCents") string:jsonPointer ?VatD .
#     (?Decl "/grossCents") string:jsonPointer ?GrossD .
#     ("urn:example:order:%s" ?OrderId) string:format ?OrderUriStr .
#     ?Order log:uri ?OrderUriStr .
#   } => {
#     ?Order a ex:Order .
#     ?Order ex:orderId ?OrderId .
#     ?Order ex:orderIndex ?OrderIndex .
#     ?Order ex:shipCountry ?Country .
#     ?Order ex:email ?Email .
#     ?Order ex:vatIdRaw ?VatIdRaw .
#     ?Order ex:declaredNetCents ?NetD .
#     ?Order ex:declaredVatCents ?VatD .
#     ?Order ex:declaredGrossCents ?GrossD .
#   } .
# with substitution (on rule variables):
#   ?Country = "BE"
#   ?CustJson = """{"email":"Ada@Example.ORG","vatId":null}"""^^rdf:JSON
#   ?Decl = """{"netCents":3498,"vatCents":509,"grossCents":4007}"""^^rdf:JSON
#   ?Email = "Ada@Example.ORG"
#   ?GrossD = 4007
#   ?J = """{
#     "meta~data": { "batch": "2025-12-18" },
#     "orders": [
#     {
#     "orderId": "A100",
#     "shipTo": { "country": "BE" },
#     "customer": { "email": "Ada@Example.ORG", "vatId": null },
#     "lines": [
#     { "sku": "wid-001", "qty": 2, "unitCents": 999 },
#     { "sku": "GAD-002", "qty": 1, "unitCents": 1500 }
#     ],
#     "declared": { "netCents": 3498, "vatCents": 509, "grossCents": 4007 }
#     },
#     {
#     "orderId": "A200",
#     "shipTo": { "country": "US" },
#     "customer": { "email": "bob@example.org", "vatId": null },
#     "lines": [
#     { "sku": "WID-001", "qty": 2, "unitCents": 999 },
#     { "sku": "GAD-002", "qty": 1, "unitCents": 1500 }
#     ],
#     "declared": { "netCents": 3498, "vatCents": 0, "grossCents": 3498 }
#     },
#     {
#     "orderId": "A300",
#     "shipTo": { "country": "NL" },
#     "customer": { "email": "acct@company.nl", "vatId": "NL999999999B01" },
#     "lines": [
#     { "sku": "WID-001", "qty": 2, "unitCents": 999 },
#     { "sku": "GAD-002", "qty": 1, "unitCents": 1500 }
#     ],
#     "declared": { "netCents": 3498, "vatCents": 0, "grossCents": 3498 }
#     },
#     {
#     "orderId": "A301",
#     "shipTo": { "country": "NL" },
#     "customer": { "email": "billing@company.nl", "vatId": "NL999999999B01" },
#     "lines": [
#     { "sku": "WID-001", "qty": 2, "unitCents": 999 },
#     { "sku": "GAD-002", "qty": 1, "unitCents": 1500 }
#     ],
#     "declared": { "netCents": 3498, "vatCents": 0, "grossCents": 3498 }
#     },
#     {
#     "orderId": "A400",
#     "shipTo": { "country": "BE" },
#     "customer": { "email": "ada@other.example", "vatId": null },
#     "lines": [
#     { "sku": "WID-001", "qty": 2, "unitCents": 999 },
#     { "sku": "GAD-002", "qty": 1, "unitCents": 1500 }
#     ],
#     "declared": { "netCents": 3498, "vatCents": 508, "grossCents": 4006 }
#     }
#     ]
#   }"""^^rdf:JSON
#   ?NetD = 3498
#   ?Order = <urn:example:order:A100>
#   ?OrderId = "A100"
#   ?OrderIndex = 0
#   ?OrderJson = """{"orderId":"A100","shipTo":{"country":"BE"},"customer":{"email":"Ada@Example.ORG","vatId":null},"lines":[{"sku":"wid-001","qty":2,"unitCents":999},{"sku":"GAD-002","qty":1,"unitCents":1500}],"declared":{"netCents":3498,"vatCents":509,"grossCents":4007}}"""^^rdf:JSON
#   ?OrderUriStr = "urn:example:order:A100"
#   ?Orders = ("""{"orderId":"A100","shipTo":{"country":"BE"},"customer":{"email":"Ada@Example.ORG","vatId":null},"lines":[{"sku":"wid-001","qty":2,"unitCents":999},{"sku":"GAD-002","qty":1,"unitCents":1500}],"declared":{"netCents":3498,"vatCents":509,"grossCents":4007}}"""^^rdf:JSON """{"orderId":"A200","shipTo":{"country":"US"},"customer":{"email":"bob@example.org","vatId":null},"lines":[{"sku":"WID-001","qty":2,"unitCents":999},{"sku":"GAD-002","qty":1,"unitCents":1500}],"declared":{"netCents":3498,"vatCents":0,"grossCents":3498}}"""^^rdf:JSON """{"orderId":"A300","shipTo":{"country":"NL"},"customer":{"email":"acct@company.nl","vatId":"NL999999999B01"},"lines":[{"sku":"WID-001","qty":2,"unitCents":999},{"sku":"GAD-002","qty":1,"unitCents":1500}],"declared":{"netCents":3498,"vatCents":0,"grossCents":3498}}"""^^rdf:JSON """{"orderId":"A301","shipTo":{"country":"NL"},"customer":{"email":"billing@company.nl","vatId":"NL999999999B01"},"lines":[{"sku":"WID-001","qty":2,"unitCents":999},{"sku":"GAD-002","qty":1,"unitCents":1500}],"declared":{"netCents":3498,"vatCents":0,"grossCents":3498}}"""^^rdf:JSON """{"orderId":"A400","shipTo":{"country":"BE"},"customer":{"email":"ada@other.example","vatId":null},"lines":[{"sku":"WID-001","qty":2,"unitCents":999},{"sku":"GAD-002","qty":1,"unitCents":1500}],"declared":{"netCents":3498,"vatCents":508,"grossCents":4006}}"""^^rdf:JSON)
#   ?VatD = 509
#   ?VatIdRaw = "null"
# Therefore the derived triple above is entailed by the rules and facts.
# ----------------------------------------------------------------------

<urn:example:order:A100> ex:orderIndex 0 .

# ----------------------------------------------------------------------
# Proof for derived triple:
#   <urn:example:order:A100> ex:shipCountry "BE" .
# It holds because the following instance of the rule body is provable:
#   ex:feed ex:json """{
#     "meta~data": { "batch": "2025-12-18" },
#     "orders": [
#       {
#         "orderId": "A100",
#         "shipTo": { "country": "BE" },
#         "customer": { "email": "Ada@Example.ORG", "vatId": null },
#         "lines": [
#           { "sku": "wid-001", "qty": 2, "unitCents": 999 },
#           { "sku": "GAD-002", "qty": 1, "unitCents": 1500 }
#         ],
#         "declared": { "netCents": 3498, "vatCents": 509, "grossCents": 4007 }
#       },
#       {
#         "orderId": "A200",
#         "shipTo": { "country": "US" },
#         "customer": { "email": "bob@example.org", "vatId": null },
#         "lines": [
#           { "sku": "WID-001", "qty": 2, "unitCents": 999 },
#           { "sku": "GAD-002", "qty": 1, "unitCents": 1500 }
#         ],
#         "declared": { "netCents": 3498, "vatCents": 0, "grossCents": 3498 }
#       },
#       {
#         "orderId": "A300",
#         "shipTo": { "country": "NL" },
#         "customer": { "email": "acct@company.nl", "vatId": "NL999999999B01" },
#         "lines": [
#           { "sku": "WID-001", "qty": 2, "unitCents": 999 },
#           { "sku": "GAD-002", "qty": 1, "unitCents": 1500 }
#         ],
#         "declared": { "netCents": 3498, "vatCents": 0, "grossCents": 3498 }
#       },
#       {
#         "orderId": "A301",
#         "shipTo": { "country": "NL" },
#         "customer": { "email": "billing@company.nl", "vatId": "NL999999999B01" },
#         "lines": [
#           { "sku": "WID-001", "qty": 2, "unitCents": 999 },
#           { "sku": "GAD-002", "qty": 1, "unitCents": 1500 }
#         ],
#         "declared": { "netCents": 3498, "vatCents": 0, "grossCents": 3498 }
#       },
#       {
#         "orderId": "A400",
#         "shipTo": { "country": "BE" },
#         "customer": { "email": "ada@other.example", "vatId": null },
#         "lines": [
#           { "sku": "WID-001", "qty": 2, "unitCents": 999 },
#           { "sku": "GAD-002", "qty": 1, "unitCents": 1500 }
#         ],
#         "declared": { "netCents": 3498, "vatCents": 508, "grossCents": 4006 }
#       }
#     ]
#   }"""^^rdf:JSON .
#   ("""{
#     "meta~data": { "batch": "2025-12-18" },
#     "orders": [
#       {
#         "orderId": "A100",
#         "shipTo": { "country": "BE" },
#         "customer": { "email": "Ada@Example.ORG", "vatId": null },
#         "lines": [
#           { "sku": "wid-001", "qty": 2, "unitCents": 999 },
#           { "sku": "GAD-002", "qty": 1, "unitCents": 1500 }
#         ],
#         "declared": { "netCents": 3498, "vatCents": 509, "grossCents": 4007 }
#       },
#       {
#         "orderId": "A200",
#         "shipTo": { "country": "US" },
#         "customer": { "email": "bob@example.org", "vatId": null },
#         "lines": [
#           { "sku": "WID-001", "qty": 2, "unitCents": 999 },
#           { "sku": "GAD-002", "qty": 1, "unitCents": 1500 }
#         ],
#         "declared": { "netCents": 3498, "vatCents": 0, "grossCents": 3498 }
#       },
#       {
#         "orderId": "A300",
#         "shipTo": { "country": "NL" },
#         "customer": { "email": "acct@company.nl", "vatId": "NL999999999B01" },
#         "lines": [
#           { "sku": "WID-001", "qty": 2, "unitCents": 999 },
#           { "sku": "GAD-002", "qty": 1, "unitCents": 1500 }
#         ],
#         "declared": { "netCents": 3498, "vatCents": 0, "grossCents": 3498 }
#       },
#       {
#         "orderId": "A301",
#         "shipTo": { "country": "NL" },
#         "customer": { "email": "billing@company.nl", "vatId": "NL999999999B01" },
#         "lines": [
#           { "sku": "WID-001", "qty": 2, "unitCents": 999 },
#           { "sku": "GAD-002", "qty": 1, "unitCents": 1500 }
#         ],
#         "declared": { "netCents": 3498, "vatCents": 0, "grossCents": 3498 }
#       },
#       {
#         "orderId": "A400",
#         "shipTo": { "country": "BE" },
#         "customer": { "email": "ada@other.example", "vatId": null },
#         "lines": [
#           { "sku": "WID-001", "qty": 2, "unitCents": 999 },
#           { "sku": "GAD-002", "qty": 1, "unitCents": 1500 }
#         ],
#         "declared": { "netCents": 3498, "vatCents": 508, "grossCents": 4006 }
#       }
#     ]
#   }"""^^rdf:JSON "/orders") string:jsonPointer ("""{"orderId":"A100","shipTo":{"country":"BE"},"customer":{"email":"Ada@Example.ORG","vatId":null},"lines":[{"sku":"wid-001","qty":2,"unitCents":999},{"sku":"GAD-002","qty":1,"unitCents":1500}],"declared":{"netCents":3498,"vatCents":509,"grossCents":4007}}"""^^rdf:JSON """{"orderId":"A200","shipTo":{"country":"US"},"customer":{"email":"bob@example.org","vatId":null},"lines":[{"sku":"WID-001","qty":2,"unitCents":999},{"sku":"GAD-002","qty":1,"unitCents":1500}],"declared":{"netCents":3498,"vatCents":0,"grossCents":3498}}"""^^rdf:JSON """{"orderId":"A300","shipTo":{"country":"NL"},"customer":{"email":"acct@company.nl","vatId":"NL999999999B01"},"lines":[{"sku":"WID-001","qty":2,"unitCents":999},{"sku":"GAD-002","qty":1,"unitCents":1500}],"declared":{"netCents":3498,"vatCents":0,"grossCents":3498}}"""^^rdf:JSON """{"orderId":"A301","shipTo":{"country":"NL"},"customer":{"email":"billing@company.nl","vatId":"NL999999999B01"},"lines":[{"sku":"WID-001","qty":2,"unitCents":999},{"sku":"GAD-002","qty":1,"unitCents":1500}],"declared":{"netCents":3498,"vatCents":0,"grossCents":3498}}"""^^rdf:JSON """{"orderId":"A400","shipTo":{"country":"BE"},"customer":{"email":"ada@other.example","vatId":null},"lines":[{"sku":"WID-001","qty":2,"unitCents":999},{"sku":"GAD-002","qty":1,"unitCents":1500}],"declared":{"netCents":3498,"vatCents":508,"grossCents":4006}}"""^^rdf:JSON) .
#   ("""{"orderId":"A100","shipTo":{"country":"BE"},"customer":{"email":"Ada@Example.ORG","vatId":null},"lines":[{"sku":"wid-001","qty":2,"unitCents":999},{"sku":"GAD-002","qty":1,"unitCents":1500}],"declared":{"netCents":3498,"vatCents":509,"grossCents":4007}}"""^^rdf:JSON """{"orderId":"A200","shipTo":{"country":"US"},"customer":{"email":"bob@example.org","vatId":null},"lines":[{"sku":"WID-001","qty":2,"unitCents":999},{"sku":"GAD-002","qty":1,"unitCents":1500}],"declared":{"netCents":3498,"vatCents":0,"grossCents":3498}}"""^^rdf:JSON """{"orderId":"A300","shipTo":{"country":"NL"},"customer":{"email":"acct@company.nl","vatId":"NL999999999B01"},"lines":[{"sku":"WID-001","qty":2,"unitCents":999},{"sku":"GAD-002","qty":1,"unitCents":1500}],"declared":{"netCents":3498,"vatCents":0,"grossCents":3498}}"""^^rdf:JSON """{"orderId":"A301","shipTo":{"country":"NL"},"customer":{"email":"billing@company.nl","vatId":"NL999999999B01"},"lines":[{"sku":"WID-001","qty":2,"unitCents":999},{"sku":"GAD-002","qty":1,"unitCents":1500}],"declared":{"netCents":3498,"vatCents":0,"grossCents":3498}}"""^^rdf:JSON """{"orderId":"A400","shipTo":{"country":"BE"},"customer":{"email":"ada@other.example","vatId":null},"lines":[{"sku":"WID-001","qty":2,"unitCents":999},{"sku":"GAD-002","qty":1,"unitCents":1500}],"declared":{"netCents":3498,"vatCents":508,"grossCents":4006}}"""^^rdf:JSON) list:iterate (0 """{"orderId":"A100","shipTo":{"country":"BE"},"customer":{"email":"Ada@Example.ORG","vatId":null},"lines":[{"sku":"wid-001","qty":2,"unitCents":999},{"sku":"GAD-002","qty":1,"unitCents":1500}],"declared":{"netCents":3498,"vatCents":509,"grossCents":4007}}"""^^rdf:JSON) .
#   ("""{"orderId":"A100","shipTo":{"country":"BE"},"customer":{"email":"Ada@Example.ORG","vatId":null},"lines":[{"sku":"wid-001","qty":2,"unitCents":999},{"sku":"GAD-002","qty":1,"unitCents":1500}],"declared":{"netCents":3498,"vatCents":509,"grossCents":4007}}"""^^rdf:JSON "/orderId") string:jsonPointer "A100" .
#   ("""{"orderId":"A100","shipTo":{"country":"BE"},"customer":{"email":"Ada@Example.ORG","vatId":null},"lines":[{"sku":"wid-001","qty":2,"unitCents":999},{"sku":"GAD-002","qty":1,"unitCents":1500}],"declared":{"netCents":3498,"vatCents":509,"grossCents":4007}}"""^^rdf:JSON "/shipTo/country") string:jsonPointer "BE" .
#   ("""{"orderId":"A100","shipTo":{"country":"BE"},"customer":{"email":"Ada@Example.ORG","vatId":null},"lines":[{"sku":"wid-001","qty":2,"unitCents":999},{"sku":"GAD-002","qty":1,"unitCents":1500}],"declared":{"netCents":3498,"vatCents":509,"grossCents":4007}}"""^^rdf:JSON "/customer") string:jsonPointer """{"email":"Ada@Example.ORG","vatId":null}"""^^rdf:JSON .
#   ("""{"email":"Ada@Example.ORG","vatId":null}"""^^rdf:JSON "/email") string:jsonPointer "Ada@Example.ORG" .
#   ("""{"email":"Ada@Example.ORG","vatId":null}"""^^rdf:JSON "/vatId") string:jsonPointer "null" .
#   ("""{"orderId":"A100","shipTo":{"country":"BE"},"customer":{"email":"Ada@Example.ORG","vatId":null},"lines":[{"sku":"wid-001","qty":2,"unitCents":999},{"sku":"GAD-002","qty":1,"unitCents":1500}],"declared":{"netCents":3498,"vatCents":509,"grossCents":4007}}"""^^rdf:JSON "/declared") string:jsonPointer """{"netCents":3498,"vatCents":509,"grossCents":4007}"""^^rdf:JSON .
#   ("""{"netCents":3498,"vatCents":509,"grossCents":4007}"""^^rdf:JSON "/netCents") string:jsonPointer 3498 .
#   ("""{"netCents":3498,"vatCents":509,"grossCents":4007}"""^^rdf:JSON "/vatCents") string:jsonPointer 509 .
#   ("""{"netCents":3498,"vatCents":509,"grossCents":4007}"""^^rdf:JSON "/grossCents") string:jsonPointer 4007 .
#   ("urn:example:order:%s" "A100") string:format "urn:example:order:A100" .
#   <urn:example:order:A100> log:uri "urn:example:order:A100" .
# via the schematic forward rule:
#   {
#     ex:feed ex:json ?J .
#     (?J "/orders") string:jsonPointer ?Orders .
#     ?Orders list:iterate (?OrderIndex ?OrderJson) .
#     (?OrderJson "/orderId") string:jsonPointer ?OrderId .
#     (?OrderJson "/shipTo/country") string:jsonPointer ?Country .
#     (?OrderJson "/customer") string:jsonPointer ?CustJson .
#     (?CustJson "/email") string:jsonPointer ?Email .
#     (?CustJson "/vatId") string:jsonPointer ?VatIdRaw .
#     (?OrderJson "/declared") string:jsonPointer ?Decl .
#     (?Decl "/netCents") string:jsonPointer ?NetD .
#     (?Decl "/vatCents") string:jsonPointer ?VatD .
#     (?Decl "/grossCents") string:jsonPointer ?GrossD .
#     ("urn:example:order:%s" ?OrderId) string:format ?OrderUriStr .
#     ?Order log:uri ?OrderUriStr .
#   } => {
#     ?Order a ex:Order .
#     ?Order ex:orderId ?OrderId .
#     ?Order ex:orderIndex ?OrderIndex .
#     ?Order ex:shipCountry ?Country .
#     ?Order ex:email ?Email .
#     ?Order ex:vatIdRaw ?VatIdRaw .
#     ?Order ex:declaredNetCents ?NetD .
#     ?Order ex:declaredVatCents ?VatD .
#     ?Order ex:declaredGrossCents ?GrossD .
#   } .
# with substitution (on rule variables):
#   ?Country = "BE"
#   ?CustJson = """{"email":"Ada@Example.ORG","vatId":null}"""^^rdf:JSON
#   ?Decl = """{"netCents":3498,"vatCents":509,"grossCents":4007}"""^^rdf:JSON
#   ?Email = "Ada@Example.ORG"
#   ?GrossD = 4007
#   ?J = """{
#     "meta~data": { "batch": "2025-12-18" },
#     "orders": [
#     {
#     "orderId": "A100",
#     "shipTo": { "country": "BE" },
#     "customer": { "email": "Ada@Example.ORG", "vatId": null },
#     "lines": [
#     { "sku": "wid-001", "qty": 2, "unitCents": 999 },
#     { "sku": "GAD-002", "qty": 1, "unitCents": 1500 }
#     ],
#     "declared": { "netCents": 3498, "vatCents": 509, "grossCents": 4007 }
#     },
#     {
#     "orderId": "A200",
#     "shipTo": { "country": "US" },
#     "customer": { "email": "bob@example.org", "vatId": null },
#     "lines": [
#     { "sku": "WID-001", "qty": 2, "unitCents": 999 },
#     { "sku": "GAD-002", "qty": 1, "unitCents": 1500 }
#     ],
#     "declared": { "netCents": 3498, "vatCents": 0, "grossCents": 3498 }
#     },
#     {
#     "orderId": "A300",
#     "shipTo": { "country": "NL" },
#     "customer": { "email": "acct@company.nl", "vatId": "NL999999999B01" },
#     "lines": [
#     { "sku": "WID-001", "qty": 2, "unitCents": 999 },
#     { "sku": "GAD-002", "qty": 1, "unitCents": 1500 }
#     ],
#     "declared": { "netCents": 3498, "vatCents": 0, "grossCents": 3498 }
#     },
#     {
#     "orderId": "A301",
#     "shipTo": { "country": "NL" },
#     "customer": { "email": "billing@company.nl", "vatId": "NL999999999B01" },
#     "lines": [
#     { "sku": "WID-001", "qty": 2, "unitCents": 999 },
#     { "sku": "GAD-002", "qty": 1, "unitCents": 1500 }
#     ],
#     "declared": { "netCents": 3498, "vatCents": 0, "grossCents": 3498 }
#     },
#     {
#     "orderId": "A400",
#     "shipTo": { "country": "BE" },
#     "customer": { "email": "ada@other.example", "vatId": null },
#     "lines": [
#     { "sku": "WID-001", "qty": 2, "unitCents": 999 },
#     { "sku": "GAD-002", "qty": 1, "unitCents": 1500 }
#     ],
#     "declared": { "netCents": 3498, "vatCents": 508, "grossCents": 4006 }
#     }
#     ]
#   }"""^^rdf:JSON
#   ?NetD = 3498
#   ?Order = <urn:example:order:A100>
#   ?OrderId = "A100"
#   ?OrderIndex = 0
#   ?OrderJson = """{"orderId":"A100","shipTo":{"country":"BE"},"customer":{"email":"Ada@Example.ORG","vatId":null},"lines":[{"sku":"wid-001","qty":2,"unitCents":999},{"sku":"GAD-002","qty":1,"unitCents":1500}],"declared":{"netCents":3498,"vatCents":509,"grossCents":4007}}"""^^rdf:JSON
#   ?OrderUriStr = "urn:example:order:A100"
#   ?Orders = ("""{"orderId":"A100","shipTo":{"country":"BE"},"customer":{"email":"Ada@Example.ORG","vatId":null},"lines":[{"sku":"wid-001","qty":2,"unitCents":999},{"sku":"GAD-002","qty":1,"unitCents":1500}],"declared":{"netCents":3498,"vatCents":509,"grossCents":4007}}"""^^rdf:JSON """{"orderId":"A200","shipTo":{"country":"US"},"customer":{"email":"bob@example.org","vatId":null},"lines":[{"sku":"WID-001","qty":2,"unitCents":999},{"sku":"GAD-002","qty":1,"unitCents":1500}],"declared":{"netCents":3498,"vatCents":0,"grossCents":3498}}"""^^rdf:JSON """{"orderId":"A300","shipTo":{"country":"NL"},"customer":{"email":"acct@company.nl","vatId":"NL999999999B01"},"lines":[{"sku":"WID-001","qty":2,"unitCents":999},{"sku":"GAD-002","qty":1,"unitCents":1500}],"declared":{"netCents":3498,"vatCents":0,"grossCents":3498}}"""^^rdf:JSON """{"orderId":"A301","shipTo":{"country":"NL"},"customer":{"email":"billing@company.nl","vatId":"NL999999999B01"},"lines":[{"sku":"WID-001","qty":2,"unitCents":999},{"sku":"GAD-002","qty":1,"unitCents":1500}],"declared":{"netCents":3498,"vatCents":0,"grossCents":3498}}"""^^rdf:JSON """{"orderId":"A400","shipTo":{"country":"BE"},"customer":{"email":"ada@other.example","vatId":null},"lines":[{"sku":"WID-001","qty":2,"unitCents":999},{"sku":"GAD-002","qty":1,"unitCents":1500}],"declared":{"netCents":3498,"vatCents":508,"grossCents":4006}}"""^^rdf:JSON)
#   ?VatD = 509
#   ?VatIdRaw = "null"
# Therefore the derived triple above is entailed by the rules and facts.
# ----------------------------------------------------------------------

<urn:example:order:A100> ex:shipCountry "BE" .

# ----------------------------------------------------------------------
# Proof for derived triple:
#   <urn:example:order:A100> ex:email "Ada@Example.ORG" .
# It holds because the following instance of the rule body is provable:
#   ex:feed ex:json """{
#     "meta~data": { "batch": "2025-12-18" },
#     "orders": [
#       {
#         "orderId": "A100",
#         "shipTo": { "country": "BE" },
#         "customer": { "email": "Ada@Example.ORG", "vatId": null },
#         "lines": [
#           { "sku": "wid-001", "qty": 2, "unitCents": 999 },
#           { "sku": "GAD-002", "qty": 1, "unitCents": 1500 }
#         ],
#         "declared": { "netCents": 3498, "vatCents": 509, "grossCents": 4007 }
#       },
#       {
#         "orderId": "A200",
#         "shipTo": { "country": "US" },
#         "customer": { "email": "bob@example.org", "vatId": null },
#         "lines": [
#           { "sku": "WID-001", "qty": 2, "unitCents": 999 },
#           { "sku": "GAD-002", "qty": 1, "unitCents": 1500 }
#         ],
#         "declared": { "netCents": 3498, "vatCents": 0, "grossCents": 3498 }
#       },
#       {
#         "orderId": "A300",
#         "shipTo": { "country": "NL" },
#         "customer": { "email": "acct@company.nl", "vatId": "NL999999999B01" },
#         "lines": [
#           { "sku": "WID-001", "qty": 2, "unitCents": 999 },
#           { "sku": "GAD-002", "qty": 1, "unitCents": 1500 }
#         ],
#         "declared": { "netCents": 3498, "vatCents": 0, "grossCents": 3498 }
#       },
#       {
#         "orderId": "A301",
#         "shipTo": { "country": "NL" },
#         "customer": { "email": "billing@company.nl", "vatId": "NL999999999B01" },
#         "lines": [
#           { "sku": "WID-001", "qty": 2, "unitCents": 999 },
#           { "sku": "GAD-002", "qty": 1, "unitCents": 1500 }
#         ],
#         "declared": { "netCents": 3498, "vatCents": 0, "grossCents": 3498 }
#       },
#       {
#         "orderId": "A400",
#         "shipTo": { "country": "BE" },
#         "customer": { "email": "ada@other.example", "vatId": null },
#         "lines": [
#           { "sku": "WID-001", "qty": 2, "unitCents": 999 },
#           { "sku": "GAD-002", "qty": 1, "unitCents": 1500 }
#         ],
#         "declared": { "netCents": 3498, "vatCents": 508, "grossCents": 4006 }
#       }
#     ]
#   }"""^^rdf:JSON .
#   ("""{
#     "meta~data": { "batch": "2025-12-18" },
#     "orders": [
#       {
#         "orderId": "A100",
#         "shipTo": { "country": "BE" },
#         "customer": { "email": "Ada@Example.ORG", "vatId": null },
#         "lines": [
#           { "sku": "wid-001", "qty": 2, "unitCents": 999 },
#           { "sku": "GAD-002", "qty": 1, "unitCents": 1500 }
#         ],
#         "declared": { "netCents": 3498, "vatCents": 509, "grossCents": 4007 }
#       },
#       {
#         "orderId": "A200",
#         "shipTo": { "country": "US" },
#         "customer": { "email": "bob@example.org", "vatId": null },
#         "lines": [
#           { "sku": "WID-001", "qty": 2, "unitCents": 999 },
#           { "sku": "GAD-002", "qty": 1, "unitCents": 1500 }
#         ],
#         "declared": { "netCents": 3498, "vatCents": 0, "grossCents": 3498 }
#       },
#       {
#         "orderId": "A300",
#         "shipTo": { "country": "NL" },
#         "customer": { "email": "acct@company.nl", "vatId": "NL999999999B01" },
#         "lines": [
#           { "sku": "WID-001", "qty": 2, "unitCents": 999 },
#           { "sku": "GAD-002", "qty": 1, "unitCents": 1500 }
#         ],
#         "declared": { "netCents": 3498, "vatCents": 0, "grossCents": 3498 }
#       },
#       {
#         "orderId": "A301",
#         "shipTo": { "country": "NL" },
#         "customer": { "email": "billing@company.nl", "vatId": "NL999999999B01" },
#         "lines": [
#           { "sku": "WID-001", "qty": 2, "unitCents": 999 },
#           { "sku": "GAD-002", "qty": 1, "unitCents": 1500 }
#         ],
#         "declared": { "netCents": 3498, "vatCents": 0, "grossCents": 3498 }
#       },
#       {
#         "orderId": "A400",
#         "shipTo": { "country": "BE" },
#         "customer": { "email": "ada@other.example", "vatId": null },
#         "lines": [
#           { "sku": "WID-001", "qty": 2, "unitCents": 999 },
#           { "sku": "GAD-002", "qty": 1, "unitCents": 1500 }
#         ],
#         "declared": { "netCents": 3498, "vatCents": 508, "grossCents": 4006 }
#       }
#     ]
#   }"""^^rdf:JSON "/orders") string:jsonPointer ("""{"orderId":"A100","shipTo":{"country":"BE"},"customer":{"email":"Ada@Example.ORG","vatId":null},"lines":[{"sku":"wid-001","qty":2,"unitCents":999},{"sku":"GAD-002","qty":1,"unitCents":1500}],"declared":{"netCents":3498,"vatCents":509,"grossCents":4007}}"""^^rdf:JSON """{"orderId":"A200","shipTo":{"country":"US"},"customer":{"email":"bob@example.org","vatId":null},"lines":[{"sku":"WID-001","qty":2,"unitCents":999},{"sku":"GAD-002","qty":1,"unitCents":1500}],"declared":{"netCents":3498,"vatCents":0,"grossCents":3498}}"""^^rdf:JSON """{"orderId":"A300","shipTo":{"country":"NL"},"customer":{"email":"acct@company.nl","vatId":"NL999999999B01"},"lines":[{"sku":"WID-001","qty":2,"unitCents":999},{"sku":"GAD-002","qty":1,"unitCents":1500}],"declared":{"netCents":3498,"vatCents":0,"grossCents":3498}}"""^^rdf:JSON """{"orderId":"A301","shipTo":{"country":"NL"},"customer":{"email":"billing@company.nl","vatId":"NL999999999B01"},"lines":[{"sku":"WID-001","qty":2,"unitCents":999},{"sku":"GAD-002","qty":1,"unitCents":1500}],"declared":{"netCents":3498,"vatCents":0,"grossCents":3498}}"""^^rdf:JSON """{"orderId":"A400","shipTo":{"country":"BE"},"customer":{"email":"ada@other.example","vatId":null},"lines":[{"sku":"WID-001","qty":2,"unitCents":999},{"sku":"GAD-002","qty":1,"unitCents":1500}],"declared":{"netCents":3498,"vatCents":508,"grossCents":4006}}"""^^rdf:JSON) .
#   ("""{"orderId":"A100","shipTo":{"country":"BE"},"customer":{"email":"Ada@Example.ORG","vatId":null},"lines":[{"sku":"wid-001","qty":2,"unitCents":999},{"sku":"GAD-002","qty":1,"unitCents":1500}],"declared":{"netCents":3498,"vatCents":509,"grossCents":4007}}"""^^rdf:JSON """{"orderId":"A200","shipTo":{"country":"US"},"customer":{"email":"bob@example.org","vatId":null},"lines":[{"sku":"WID-001","qty":2,"unitCents":999},{"sku":"GAD-002","qty":1,"unitCents":1500}],"declared":{"netCents":3498,"vatCents":0,"grossCents":3498}}"""^^rdf:JSON """{"orderId":"A300","shipTo":{"country":"NL"},"customer":{"email":"acct@company.nl","vatId":"NL999999999B01"},"lines":[{"sku":"WID-001","qty":2,"unitCents":999},{"sku":"GAD-002","qty":1,"unitCents":1500}],"declared":{"netCents":3498,"vatCents":0,"grossCents":3498}}"""^^rdf:JSON """{"orderId":"A301","shipTo":{"country":"NL"},"customer":{"email":"billing@company.nl","vatId":"NL999999999B01"},"lines":[{"sku":"WID-001","qty":2,"unitCents":999},{"sku":"GAD-002","qty":1,"unitCents":1500}],"declared":{"netCents":3498,"vatCents":0,"grossCents":3498}}"""^^rdf:JSON """{"orderId":"A400","shipTo":{"country":"BE"},"customer":{"email":"ada@other.example","vatId":null},"lines":[{"sku":"WID-001","qty":2,"unitCents":999},{"sku":"GAD-002","qty":1,"unitCents":1500}],"declared":{"netCents":3498,"vatCents":508,"grossCents":4006}}"""^^rdf:JSON) list:iterate (0 """{"orderId":"A100","shipTo":{"country":"BE"},"customer":{"email":"Ada@Example.ORG","vatId":null},"lines":[{"sku":"wid-001","qty":2,"unitCents":999},{"sku":"GAD-002","qty":1,"unitCents":1500}],"declared":{"netCents":3498,"vatCents":509,"grossCents":4007}}"""^^rdf:JSON) .
#   ("""{"orderId":"A100","shipTo":{"country":"BE"},"customer":{"email":"Ada@Example.ORG","vatId":null},"lines":[{"sku":"wid-001","qty":2,"unitCents":999},{"sku":"GAD-002","qty":1,"unitCents":1500}],"declared":{"netCents":3498,"vatCents":509,"grossCents":4007}}"""^^rdf:JSON "/orderId") string:jsonPointer "A100" .
#   ("""{"orderId":"A100","shipTo":{"country":"BE"},"customer":{"email":"Ada@Example.ORG","vatId":null},"lines":[{"sku":"wid-001","qty":2,"unitCents":999},{"sku":"GAD-002","qty":1,"unitCents":1500}],"declared":{"netCents":3498,"vatCents":509,"grossCents":4007}}"""^^rdf:JSON "/shipTo/country") string:jsonPointer "BE" .
#   ("""{"orderId":"A100","shipTo":{"country":"BE"},"customer":{"email":"Ada@Example.ORG","vatId":null},"lines":[{"sku":"wid-001","qty":2,"unitCents":999},{"sku":"GAD-002","qty":1,"unitCents":1500}],"declared":{"netCents":3498,"vatCents":509,"grossCents":4007}}"""^^rdf:JSON "/customer") string:jsonPointer """{"email":"Ada@Example.ORG","vatId":null}"""^^rdf:JSON .
#   ("""{"email":"Ada@Example.ORG","vatId":null}"""^^rdf:JSON "/email") string:jsonPointer "Ada@Example.ORG" .
#   ("""{"email":"Ada@Example.ORG","vatId":null}"""^^rdf:JSON "/vatId") string:jsonPointer "null" .
#   ("""{"orderId":"A100","shipTo":{"country":"BE"},"customer":{"email":"Ada@Example.ORG","vatId":null},"lines":[{"sku":"wid-001","qty":2,"unitCents":999},{"sku":"GAD-002","qty":1,"unitCents":1500}],"declared":{"netCents":3498,"vatCents":509,"grossCents":4007}}"""^^rdf:JSON "/declared") string:jsonPointer """{"netCents":3498,"vatCents":509,"grossCents":4007}"""^^rdf:JSON .
#   ("""{"netCents":3498,"vatCents":509,"grossCents":4007}"""^^rdf:JSON "/netCents") string:jsonPointer 3498 .
#   ("""{"netCents":3498,"vatCents":509,"grossCents":4007}"""^^rdf:JSON "/vatCents") string:jsonPointer 509 .
#   ("""{"netCents":3498,"vatCents":509,"grossCents":4007}"""^^rdf:JSON "/grossCents") string:jsonPointer 4007 .
#   ("urn:example:order:%s" "A100") string:format "urn:example:order:A100" .
#   <urn:example:order:A100> log:uri "urn:example:order:A100" .
# via the schematic forward rule:
#   {
#     ex:feed ex:json ?J .
#     (?J "/orders") string:jsonPointer ?Orders .
#     ?Orders list:iterate (?OrderIndex ?OrderJson) .
#     (?OrderJson "/orderId") string:jsonPointer ?OrderId .
#     (?OrderJson "/shipTo/country") string:jsonPointer ?Country .
#     (?OrderJson "/customer") string:jsonPointer ?CustJson .
#     (?CustJson "/email") string:jsonPointer ?Email .
#     (?CustJson "/vatId") string:jsonPointer ?VatIdRaw .
#     (?OrderJson "/declared") string:jsonPointer ?Decl .
#     (?Decl "/netCents") string:jsonPointer ?NetD .
#     (?Decl "/vatCents") string:jsonPointer ?VatD .
#     (?Decl "/grossCents") string:jsonPointer ?GrossD .
#     ("urn:example:order:%s" ?OrderId) string:format ?OrderUriStr .
#     ?Order log:uri ?OrderUriStr .
#   } => {
#     ?Order a ex:Order .
#     ?Order ex:orderId ?OrderId .
#     ?Order ex:orderIndex ?OrderIndex .
#     ?Order ex:shipCountry ?Country .
#     ?Order ex:email ?Email .
#     ?Order ex:vatIdRaw ?VatIdRaw .
#     ?Order ex:declaredNetCents ?NetD .
#     ?Order ex:declaredVatCents ?VatD .
#     ?Order ex:declaredGrossCents ?GrossD .
#   } .
# with substitution (on rule variables):
#   ?Country = "BE"
#   ?CustJson = """{"email":"Ada@Example.ORG","vatId":null}"""^^rdf:JSON
#   ?Decl = """{"netCents":3498,"vatCents":509,"grossCents":4007}"""^^rdf:JSON
#   ?Email = "Ada@Example.ORG"
#   ?GrossD = 4007
#   ?J = """{
#     "meta~data": { "batch": "2025-12-18" },
#     "orders": [
#     {
#     "orderId": "A100",
#     "shipTo": { "country": "BE" },
#     "customer": { "email": "Ada@Example.ORG", "vatId": null },
#     "lines": [
#     { "sku": "wid-001", "qty": 2, "unitCents": 999 },
#     { "sku": "GAD-002", "qty": 1, "unitCents": 1500 }
#     ],
#     "declared": { "netCents": 3498, "vatCents": 509, "grossCents": 4007 }
#     },
#     {
#     "orderId": "A200",
#     "shipTo": { "country": "US" },
#     "customer": { "email": "bob@example.org", "vatId": null },
#     "lines": [
#     { "sku": "WID-001", "qty": 2, "unitCents": 999 },
#     { "sku": "GAD-002", "qty": 1, "unitCents": 1500 }
#     ],
#     "declared": { "netCents": 3498, "vatCents": 0, "grossCents": 3498 }
#     },
#     {
#     "orderId": "A300",
#     "shipTo": { "country": "NL" },
#     "customer": { "email": "acct@company.nl", "vatId": "NL999999999B01" },
#     "lines": [
#     { "sku": "WID-001", "qty": 2, "unitCents": 999 },
#     { "sku": "GAD-002", "qty": 1, "unitCents": 1500 }
#     ],
#     "declared": { "netCents": 3498, "vatCents": 0, "grossCents": 3498 }
#     },
#     {
#     "orderId": "A301",
#     "shipTo": { "country": "NL" },
#     "customer": { "email": "billing@company.nl", "vatId": "NL999999999B01" },
#     "lines": [
#     { "sku": "WID-001", "qty": 2, "unitCents": 999 },
#     { "sku": "GAD-002", "qty": 1, "unitCents": 1500 }
#     ],
#     "declared": { "netCents": 3498, "vatCents": 0, "grossCents": 3498 }
#     },
#     {
#     "orderId": "A400",
#     "shipTo": { "country": "BE" },
#     "customer": { "email": "ada@other.example", "vatId": null },
#     "lines": [
#     { "sku": "WID-001", "qty": 2, "unitCents": 999 },
#     { "sku": "GAD-002", "qty": 1, "unitCents": 1500 }
#     ],
#     "declared": { "netCents": 3498, "vatCents": 508, "grossCents": 4006 }
#     }
#     ]
#   }"""^^rdf:JSON
#   ?NetD = 3498
#   ?Order = <urn:example:order:A100>
#   ?OrderId = "A100"
#   ?OrderIndex = 0
#   ?OrderJson = """{"orderId":"A100","shipTo":{"country":"BE"},"customer":{"email":"Ada@Example.ORG","vatId":null},"lines":[{"sku":"wid-001","qty":2,"unitCents":999},{"sku":"GAD-002","qty":1,"unitCents":1500}],"declared":{"netCents":3498,"vatCents":509,"grossCents":4007}}"""^^rdf:JSON
#   ?OrderUriStr = "urn:example:order:A100"
#   ?Orders = ("""{"orderId":"A100","shipTo":{"country":"BE"},"customer":{"email":"Ada@Example.ORG","vatId":null},"lines":[{"sku":"wid-001","qty":2,"unitCents":999},{"sku":"GAD-002","qty":1,"unitCents":1500}],"declared":{"netCents":3498,"vatCents":509,"grossCents":4007}}"""^^rdf:JSON """{"orderId":"A200","shipTo":{"country":"US"},"customer":{"email":"bob@example.org","vatId":null},"lines":[{"sku":"WID-001","qty":2,"unitCents":999},{"sku":"GAD-002","qty":1,"unitCents":1500}],"declared":{"netCents":3498,"vatCents":0,"grossCents":3498}}"""^^rdf:JSON """{"orderId":"A300","shipTo":{"country":"NL"},"customer":{"email":"acct@company.nl","vatId":"NL999999999B01"},"lines":[{"sku":"WID-001","qty":2,"unitCents":999},{"sku":"GAD-002","qty":1,"unitCents":1500}],"declared":{"netCents":3498,"vatCents":0,"grossCents":3498}}"""^^rdf:JSON """{"orderId":"A301","shipTo":{"country":"NL"},"customer":{"email":"billing@company.nl","vatId":"NL999999999B01"},"lines":[{"sku":"WID-001","qty":2,"unitCents":999},{"sku":"GAD-002","qty":1,"unitCents":1500}],"declared":{"netCents":3498,"vatCents":0,"grossCents":3498}}"""^^rdf:JSON """{"orderId":"A400","shipTo":{"country":"BE"},"customer":{"email":"ada@other.example","vatId":null},"lines":[{"sku":"WID-001","qty":2,"unitCents":999},{"sku":"GAD-002","qty":1,"unitCents":1500}],"declared":{"netCents":3498,"vatCents":508,"grossCents":4006}}"""^^rdf:JSON)
#   ?VatD = 509
#   ?VatIdRaw = "null"
# Therefore the derived triple above is entailed by the rules and facts.
# ----------------------------------------------------------------------

<urn:example:order:A100> ex:email "Ada@Example.ORG" .

# ----------------------------------------------------------------------
# Proof for derived triple:
#   <urn:example:order:A100> ex:vatIdRaw "null" .
# It holds because the following instance of the rule body is provable:
#   ex:feed ex:json """{
#     "meta~data": { "batch": "2025-12-18" },
#     "orders": [
#       {
#         "orderId": "A100",
#         "shipTo": { "country": "BE" },
#         "customer": { "email": "Ada@Example.ORG", "vatId": null },
#         "lines": [
#           { "sku": "wid-001", "qty": 2, "unitCents": 999 },
#           { "sku": "GAD-002", "qty": 1, "unitCents": 1500 }
#         ],
#         "declared": { "netCents": 3498, "vatCents": 509, "grossCents": 4007 }
#       },
#       {
#         "orderId": "A200",
#         "shipTo": { "country": "US" },
#         "customer": { "email": "bob@example.org", "vatId": null },
#         "lines": [
#           { "sku": "WID-001", "qty": 2, "unitCents": 999 },
#           { "sku": "GAD-002", "qty": 1, "unitCents": 1500 }
#         ],
#         "declared": { "netCents": 3498, "vatCents": 0, "grossCents": 3498 }
#       },
#       {
#         "orderId": "A300",
#         "shipTo": { "country": "NL" },
#         "customer": { "email": "acct@company.nl", "vatId": "NL999999999B01" },
#         "lines": [
#           { "sku": "WID-001", "qty": 2, "unitCents": 999 },
#           { "sku": "GAD-002", "qty": 1, "unitCents": 1500 }
#         ],
#         "declared": { "netCents": 3498, "vatCents": 0, "grossCents": 3498 }
#       },
#       {
#         "orderId": "A301",
#         "shipTo": { "country": "NL" },
#         "customer": { "email": "billing@company.nl", "vatId": "NL999999999B01" },
#         "lines": [
#           { "sku": "WID-001", "qty": 2, "unitCents": 999 },
#           { "sku": "GAD-002", "qty": 1, "unitCents": 1500 }
#         ],
#         "declared": { "netCents": 3498, "vatCents": 0, "grossCents": 3498 }
#       },
#       {
#         "orderId": "A400",
#         "shipTo": { "country": "BE" },
#         "customer": { "email": "ada@other.example", "vatId": null },
#         "lines": [
#           { "sku": "WID-001", "qty": 2, "unitCents": 999 },
#           { "sku": "GAD-002", "qty": 1, "unitCents": 1500 }
#         ],
#         "declared": { "netCents": 3498, "vatCents": 508, "grossCents": 4006 }
#       }
#     ]
#   }"""^^rdf:JSON .
#   ("""{
#     "meta~data": { "batch": "2025-12-18" },
#     "orders": [
#       {
#         "orderId": "A100",
#         "shipTo": { "country": "BE" },
#         "customer": { "email": "Ada@Example.ORG", "vatId": null },
#         "lines": [
#           { "sku": "wid-001", "qty": 2, "unitCents": 999 },
#           { "sku": "GAD-002", "qty": 1, "unitCents": 1500 }
#         ],
#         "declared": { "netCents": 3498, "vatCents": 509, "grossCents": 4007 }
#       },
#       {
#         "orderId": "A200",
#         "shipTo": { "country": "US" },
#         "customer": { "email": "bob@example.org", "vatId": null },
#         "lines": [
#           { "sku": "WID-001", "qty": 2, "unitCents": 999 },
#           { "sku": "GAD-002", "qty": 1, "unitCents": 1500 }
#         ],
#         "declared": { "netCents": 3498, "vatCents": 0, "grossCents": 3498 }
#       },
#       {
#         "orderId": "A300",
#         "shipTo": { "country": "NL" },
#         "customer": { "email": "acct@company.nl", "vatId": "NL999999999B01" },
#         "lines": [
#           { "sku": "WID-001", "qty": 2, "unitCents": 999 },
#           { "sku": "GAD-002", "qty": 1, "unitCents": 1500 }
#         ],
#         "declared": { "netCents": 3498, "vatCents": 0, "grossCents": 3498 }
#       },
#       {
#         "orderId": "A301",
#         "shipTo": { "country": "NL" },
#         "customer": { "email": "billing@company.nl", "vatId": "NL999999999B01" },
#         "lines": [
#           { "sku": "WID-001", "qty": 2, "unitCents": 999 },
#           { "sku": "GAD-002", "qty": 1, "unitCents": 1500 }
#         ],
#         "declared": { "netCents": 3498, "vatCents": 0, "grossCents": 3498 }
#       },
#       {
#         "orderId": "A400",
#         "shipTo": { "country": "BE" },
#         "customer": { "email": "ada@other.example", "vatId": null },
#         "lines": [
#           { "sku": "WID-001", "qty": 2, "unitCents": 999 },
#           { "sku": "GAD-002", "qty": 1, "unitCents": 1500 }
#         ],
#         "declared": { "netCents": 3498, "vatCents": 508, "grossCents": 4006 }
#       }
#     ]
#   }"""^^rdf:JSON "/orders") string:jsonPointer ("""{"orderId":"A100","shipTo":{"country":"BE"},"customer":{"email":"Ada@Example.ORG","vatId":null},"lines":[{"sku":"wid-001","qty":2,"unitCents":999},{"sku":"GAD-002","qty":1,"unitCents":1500}],"declared":{"netCents":3498,"vatCents":509,"grossCents":4007}}"""^^rdf:JSON """{"orderId":"A200","shipTo":{"country":"US"},"customer":{"email":"bob@example.org","vatId":null},"lines":[{"sku":"WID-001","qty":2,"unitCents":999},{"sku":"GAD-002","qty":1,"unitCents":1500}],"declared":{"netCents":3498,"vatCents":0,"grossCents":3498}}"""^^rdf:JSON """{"orderId":"A300","shipTo":{"country":"NL"},"customer":{"email":"acct@company.nl","vatId":"NL999999999B01"},"lines":[{"sku":"WID-001","qty":2,"unitCents":999},{"sku":"GAD-002","qty":1,"unitCents":1500}],"declared":{"netCents":3498,"vatCents":0,"grossCents":3498}}"""^^rdf:JSON """{"orderId":"A301","shipTo":{"country":"NL"},"customer":{"email":"billing@company.nl","vatId":"NL999999999B01"},"lines":[{"sku":"WID-001","qty":2,"unitCents":999},{"sku":"GAD-002","qty":1,"unitCents":1500}],"declared":{"netCents":3498,"vatCents":0,"grossCents":3498}}"""^^rdf:JSON """{"orderId":"A400","shipTo":{"country":"BE"},"customer":{"email":"ada@other.example","vatId":null},"lines":[{"sku":"WID-001","qty":2,"unitCents":999},{"sku":"GAD-002","qty":1,"unitCents":1500}],"declared":{"netCents":3498,"vatCents":508,"grossCents":4006}}"""^^rdf:JSON) .
#   ("""{"orderId":"A100","shipTo":{"country":"BE"},"customer":{"email":"Ada@Example.ORG","vatId":null},"lines":[{"sku":"wid-001","qty":2,"unitCents":999},{"sku":"GAD-002","qty":1,"unitCents":1500}],"declared":{"netCents":3498,"vatCents":509,"grossCents":4007}}"""^^rdf:JSON """{"orderId":"A200","shipTo":{"country":"US"},"customer":{"email":"bob@example.org","vatId":null},"lines":[{"sku":"WID-001","qty":2,"unitCents":999},{"sku":"GAD-002","qty":1,"unitCents":1500}],"declared":{"netCents":3498,"vatCents":0,"grossCents":3498}}"""^^rdf:JSON """{"orderId":"A300","shipTo":{"country":"NL"},"customer":{"email":"acct@company.nl","vatId":"NL999999999B01"},"lines":[{"sku":"WID-001","qty":2,"unitCents":999},{"sku":"GAD-002","qty":1,"unitCents":1500}],"declared":{"netCents":3498,"vatCents":0,"grossCents":3498}}"""^^rdf:JSON """{"orderId":"A301","shipTo":{"country":"NL"},"customer":{"email":"billing@company.nl","vatId":"NL999999999B01"},"lines":[{"sku":"WID-001","qty":2,"unitCents":999},{"sku":"GAD-002","qty":1,"unitCents":1500}],"declared":{"netCents":3498,"vatCents":0,"grossCents":3498}}"""^^rdf:JSON """{"orderId":"A400","shipTo":{"country":"BE"},"customer":{"email":"ada@other.example","vatId":null},"lines":[{"sku":"WID-001","qty":2,"unitCents":999},{"sku":"GAD-002","qty":1,"unitCents":1500}],"declared":{"netCents":3498,"vatCents":508,"grossCents":4006}}"""^^rdf:JSON) list:iterate (0 """{"orderId":"A100","shipTo":{"country":"BE"},"customer":{"email":"Ada@Example.ORG","vatId":null},"lines":[{"sku":"wid-001","qty":2,"unitCents":999},{"sku":"GAD-002","qty":1,"unitCents":1500}],"declared":{"netCents":3498,"vatCents":509,"grossCents":4007}}"""^^rdf:JSON) .
#   ("""{"orderId":"A100","shipTo":{"country":"BE"},"customer":{"email":"Ada@Example.ORG","vatId":null},"lines":[{"sku":"wid-001","qty":2,"unitCents":999},{"sku":"GAD-002","qty":1,"unitCents":1500}],"declared":{"netCents":3498,"vatCents":509,"grossCents":4007}}"""^^rdf:JSON "/orderId") string:jsonPointer "A100" .
#   ("""{"orderId":"A100","shipTo":{"country":"BE"},"customer":{"email":"Ada@Example.ORG","vatId":null},"lines":[{"sku":"wid-001","qty":2,"unitCents":999},{"sku":"GAD-002","qty":1,"unitCents":1500}],"declared":{"netCents":3498,"vatCents":509,"grossCents":4007}}"""^^rdf:JSON "/shipTo/country") string:jsonPointer "BE" .
#   ("""{"orderId":"A100","shipTo":{"country":"BE"},"customer":{"email":"Ada@Example.ORG","vatId":null},"lines":[{"sku":"wid-001","qty":2,"unitCents":999},{"sku":"GAD-002","qty":1,"unitCents":1500}],"declared":{"netCents":3498,"vatCents":509,"grossCents":4007}}"""^^rdf:JSON "/customer") string:jsonPointer """{"email":"Ada@Example.ORG","vatId":null}"""^^rdf:JSON .
#   ("""{"email":"Ada@Example.ORG","vatId":null}"""^^rdf:JSON "/email") string:jsonPointer "Ada@Example.ORG" .
#   ("""{"email":"Ada@Example.ORG","vatId":null}"""^^rdf:JSON "/vatId") string:jsonPointer "null" .
#   ("""{"orderId":"A100","shipTo":{"country":"BE"},"customer":{"email":"Ada@Example.ORG","vatId":null},"lines":[{"sku":"wid-001","qty":2,"unitCents":999},{"sku":"GAD-002","qty":1,"unitCents":1500}],"declared":{"netCents":3498,"vatCents":509,"grossCents":4007}}"""^^rdf:JSON "/declared") string:jsonPointer """{"netCents":3498,"vatCents":509,"grossCents":4007}"""^^rdf:JSON .
#   ("""{"netCents":3498,"vatCents":509,"grossCents":4007}"""^^rdf:JSON "/netCents") string:jsonPointer 3498 .
#   ("""{"netCents":3498,"vatCents":509,"grossCents":4007}"""^^rdf:JSON "/vatCents") string:jsonPointer 509 .
#   ("""{"netCents":3498,"vatCents":509,"grossCents":4007}"""^^rdf:JSON "/grossCents") string:jsonPointer 4007 .
#   ("urn:example:order:%s" "A100") string:format "urn:example:order:A100" .
#   <urn:example:order:A100> log:uri "urn:example:order:A100" .
# via the schematic forward rule:
#   {
#     ex:feed ex:json ?J .
#     (?J "/orders") string:jsonPointer ?Orders .
#     ?Orders list:iterate (?OrderIndex ?OrderJson) .
#     (?OrderJson "/orderId") string:jsonPointer ?OrderId .
#     (?OrderJson "/shipTo/country") string:jsonPointer ?Country .
#     (?OrderJson "/customer") string:jsonPointer ?CustJson .
#     (?CustJson "/email") string:jsonPointer ?Email .
#     (?CustJson "/vatId") string:jsonPointer ?VatIdRaw .
#     (?OrderJson "/declared") string:jsonPointer ?Decl .
#     (?Decl "/netCents") string:jsonPointer ?NetD .
#     (?Decl "/vatCents") string:jsonPointer ?VatD .
#     (?Decl "/grossCents") string:jsonPointer ?GrossD .
#     ("urn:example:order:%s" ?OrderId) string:format ?OrderUriStr .
#     ?Order log:uri ?OrderUriStr .
#   } => {
#     ?Order a ex:Order .
#     ?Order ex:orderId ?OrderId .
#     ?Order ex:orderIndex ?OrderIndex .
#     ?Order ex:shipCountry ?Country .
#     ?Order ex:email ?Email .
#     ?Order ex:vatIdRaw ?VatIdRaw .
#     ?Order ex:declaredNetCents ?NetD .
#     ?Order ex:declaredVatCents ?VatD .
#     ?Order ex:declaredGrossCents ?GrossD .
#   } .
# with substitution (on rule variables):
#   ?Country = "BE"
#   ?CustJson = """{"email":"Ada@Example.ORG","vatId":null}"""^^rdf:JSON
#   ?Decl = """{"netCents":3498,"vatCents":509,"grossCents":4007}"""^^rdf:JSON
#   ?Email = "Ada@Example.ORG"
#   ?GrossD = 4007
#   ?J = """{
#     "meta~data": { "batch": "2025-12-18" },
#     "orders": [
#     {
#     "orderId": "A100",
#     "shipTo": { "country": "BE" },
#     "customer": { "email": "Ada@Example.ORG", "vatId": null },
#     "lines": [
#     { "sku": "wid-001", "qty": 2, "unitCents": 999 },
#     { "sku": "GAD-002", "qty": 1, "unitCents": 1500 }
#     ],
#     "declared": { "netCents": 3498, "vatCents": 509, "grossCents": 4007 }
#     },
#     {
#     "orderId": "A200",
#     "shipTo": { "country": "US" },
#     "customer": { "email": "bob@example.org", "vatId": null },
#     "lines": [
#     { "sku": "WID-001", "qty": 2, "unitCents": 999 },
#     { "sku": "GAD-002", "qty": 1, "unitCents": 1500 }
#     ],
#     "declared": { "netCents": 3498, "vatCents": 0, "grossCents": 3498 }
#     },
#     {
#     "orderId": "A300",
#     "shipTo": { "country": "NL" },
#     "customer": { "email": "acct@company.nl", "vatId": "NL999999999B01" },
#     "lines": [
#     { "sku": "WID-001", "qty": 2, "unitCents": 999 },
#     { "sku": "GAD-002", "qty": 1, "unitCents": 1500 }
#     ],
#     "declared": { "netCents": 3498, "vatCents": 0, "grossCents": 3498 }
#     },
#     {
#     "orderId": "A301",
#     "shipTo": { "country": "NL" },
#     "customer": { "email": "billing@company.nl", "vatId": "NL999999999B01" },
#     "lines": [
#     { "sku": "WID-001", "qty": 2, "unitCents": 999 },
#     { "sku": "GAD-002", "qty": 1, "unitCents": 1500 }
#     ],
#     "declared": { "netCents": 3498, "vatCents": 0, "grossCents": 3498 }
#     },
#     {
#     "orderId": "A400",
#     "shipTo": { "country": "BE" },
#     "customer": { "email": "ada@other.example", "vatId": null },
#     "lines": [
#     { "sku": "WID-001", "qty": 2, "unitCents": 999 },
#     { "sku": "GAD-002", "qty": 1, "unitCents": 1500 }
#     ],
#     "declared": { "netCents": 3498, "vatCents": 508, "grossCents": 4006 }
#     }
#     ]
#   }"""^^rdf:JSON
#   ?NetD = 3498
#   ?Order = <urn:example:order:A100>
#   ?OrderId = "A100"
#   ?OrderIndex = 0
#   ?OrderJson = """{"orderId":"A100","shipTo":{"country":"BE"},"customer":{"email":"Ada@Example.ORG","vatId":null},"lines":[{"sku":"wid-001","qty":2,"unitCents":999},{"sku":"GAD-002","qty":1,"unitCents":1500}],"declared":{"netCents":3498,"vatCents":509,"grossCents":4007}}"""^^rdf:JSON
#   ?OrderUriStr = "urn:example:order:A100"
#   ?Orders = ("""{"orderId":"A100","shipTo":{"country":"BE"},"customer":{"email":"Ada@Example.ORG","vatId":null},"lines":[{"sku":"wid-001","qty":2,"unitCents":999},{"sku":"GAD-002","qty":1,"unitCents":1500}],"declared":{"netCents":3498,"vatCents":509,"grossCents":4007}}"""^^rdf:JSON """{"orderId":"A200","shipTo":{"country":"US"},"customer":{"email":"bob@example.org","vatId":null},"lines":[{"sku":"WID-001","qty":2,"unitCents":999},{"sku":"GAD-002","qty":1,"unitCents":1500}],"declared":{"netCents":3498,"vatCents":0,"grossCents":3498}}"""^^rdf:JSON """{"orderId":"A300","shipTo":{"country":"NL"},"customer":{"email":"acct@company.nl","vatId":"NL999999999B01"},"lines":[{"sku":"WID-001","qty":2,"unitCents":999},{"sku":"GAD-002","qty":1,"unitCents":1500}],"declared":{"netCents":3498,"vatCents":0,"grossCents":3498}}"""^^rdf:JSON """{"orderId":"A301","shipTo":{"country":"NL"},"customer":{"email":"billing@company.nl","vatId":"NL999999999B01"},"lines":[{"sku":"WID-001","qty":2,"unitCents":999},{"sku":"GAD-002","qty":1,"unitCents":1500}],"declared":{"netCents":3498,"vatCents":0,"grossCents":3498}}"""^^rdf:JSON """{"orderId":"A400","shipTo":{"country":"BE"},"customer":{"email":"ada@other.example","vatId":null},"lines":[{"sku":"WID-001","qty":2,"unitCents":999},{"sku":"GAD-002","qty":1,"unitCents":1500}],"declared":{"netCents":3498,"vatCents":508,"grossCents":4006}}"""^^rdf:JSON)
#   ?VatD = 509
#   ?VatIdRaw = "null"
# Therefore the derived triple above is entailed by the rules and facts.
# ----------------------------------------------------------------------

<urn:example:order:A100> ex:vatIdRaw "null" .

# ----------------------------------------------------------------------
# Proof for derived triple:
#   <urn:example:order:A100> ex:declaredNetCents 3498 .
# It holds because the following instance of the rule body is provable:
#   ex:feed ex:json """{
#     "meta~data": { "batch": "2025-12-18" },
#     "orders": [
#       {
#         "orderId": "A100",
#         "shipTo": { "country": "BE" },
#         "customer": { "email": "Ada@Example.ORG", "vatId": null },
#         "lines": [
#           { "sku": "wid-001", "qty": 2, "unitCents": 999 },
#           { "sku": "GAD-002", "qty": 1, "unitCents": 1500 }
#         ],
#         "declared": { "netCents": 3498, "vatCents": 509, "grossCents": 4007 }
#       },
#       {
#         "orderId": "A200",
#         "shipTo": { "country": "US" },
#         "customer": { "email": "bob@example.org", "vatId": null },
#         "lines": [
#           { "sku": "WID-001", "qty": 2, "unitCents": 999 },
#           { "sku": "GAD-002", "qty": 1, "unitCents": 1500 }
#         ],
#         "declared": { "netCents": 3498, "vatCents": 0, "grossCents": 3498 }
#       },
#       {
#         "orderId": "A300",
#         "shipTo": { "country": "NL" },
#         "customer": { "email": "acct@company.nl", "vatId": "NL999999999B01" },
#         "lines": [
#           { "sku": "WID-001", "qty": 2, "unitCents": 999 },
#           { "sku": "GAD-002", "qty": 1, "unitCents": 1500 }
#         ],
#         "declared": { "netCents": 3498, "vatCents": 0, "grossCents": 3498 }
#       },
#       {
#         "orderId": "A301",
#         "shipTo": { "country": "NL" },
#         "customer": { "email": "billing@company.nl", "vatId": "NL999999999B01" },
#         "lines": [
#           { "sku": "WID-001", "qty": 2, "unitCents": 999 },
#           { "sku": "GAD-002", "qty": 1, "unitCents": 1500 }
#         ],
#         "declared": { "netCents": 3498, "vatCents": 0, "grossCents": 3498 }
#       },
#       {
#         "orderId": "A400",
#         "shipTo": { "country": "BE" },
#         "customer": { "email": "ada@other.example", "vatId": null },
#         "lines": [
#           { "sku": "WID-001", "qty": 2, "unitCents": 999 },
#           { "sku": "GAD-002", "qty": 1, "unitCents": 1500 }
#         ],
#         "declared": { "netCents": 3498, "vatCents": 508, "grossCents": 4006 }
#       }
#     ]
#   }"""^^rdf:JSON .
#   ("""{
#     "meta~data": { "batch": "2025-12-18" },
#     "orders": [
#       {
#         "orderId": "A100",
#         "shipTo": { "country": "BE" },
#         "customer": { "email": "Ada@Example.ORG", "vatId": null },
#         "lines": [
#           { "sku": "wid-001", "qty": 2, "unitCents": 999 },
#           { "sku": "GAD-002", "qty": 1, "unitCents": 1500 }
#         ],
#         "declared": { "netCents": 3498, "vatCents": 509, "grossCents": 4007 }
#       },
#       {
#         "orderId": "A200",
#         "shipTo": { "country": "US" },
#         "customer": { "email": "bob@example.org", "vatId": null },
#         "lines": [
#           { "sku": "WID-001", "qty": 2, "unitCents": 999 },
#           { "sku": "GAD-002", "qty": 1, "unitCents": 1500 }
#         ],
#         "declared": { "netCents": 3498, "vatCents": 0, "grossCents": 3498 }
#       },
#       {
#         "orderId": "A300",
#         "shipTo": { "country": "NL" },
#         "customer": { "email": "acct@company.nl", "vatId": "NL999999999B01" },
#         "lines": [
#           { "sku": "WID-001", "qty": 2, "unitCents": 999 },
#           { "sku": "GAD-002", "qty": 1, "unitCents": 1500 }
#         ],
#         "declared": { "netCents": 3498, "vatCents": 0, "grossCents": 3498 }
#       },
#       {
#         "orderId": "A301",
#         "shipTo": { "country": "NL" },
#         "customer": { "email": "billing@company.nl", "vatId": "NL999999999B01" },
#         "lines": [
#           { "sku": "WID-001", "qty": 2, "unitCents": 999 },
#           { "sku": "GAD-002", "qty": 1, "unitCents": 1500 }
#         ],
#         "declared": { "netCents": 3498, "vatCents": 0, "grossCents": 3498 }
#       },
#       {
#         "orderId": "A400",
#         "shipTo": { "country": "BE" },
#         "customer": { "email": "ada@other.example", "vatId": null },
#         "lines": [
#           { "sku": "WID-001", "qty": 2, "unitCents": 999 },
#           { "sku": "GAD-002", "qty": 1, "unitCents": 1500 }
#         ],
#         "declared": { "netCents": 3498, "vatCents": 508, "grossCents": 4006 }
#       }
#     ]
#   }"""^^rdf:JSON "/orders") string:jsonPointer ("""{"orderId":"A100","shipTo":{"country":"BE"},"customer":{"email":"Ada@Example.ORG","vatId":null},"lines":[{"sku":"wid-001","qty":2,"unitCents":999},{"sku":"GAD-002","qty":1,"unitCents":1500}],"declared":{"netCents":3498,"vatCents":509,"grossCents":4007}}"""^^rdf:JSON """{"orderId":"A200","shipTo":{"country":"US"},"customer":{"email":"bob@example.org","vatId":null},"lines":[{"sku":"WID-001","qty":2,"unitCents":999},{"sku":"GAD-002","qty":1,"unitCents":1500}],"declared":{"netCents":3498,"vatCents":0,"grossCents":3498}}"""^^rdf:JSON """{"orderId":"A300","shipTo":{"country":"NL"},"customer":{"email":"acct@company.nl","vatId":"NL999999999B01"},"lines":[{"sku":"WID-001","qty":2,"unitCents":999},{"sku":"GAD-002","qty":1,"unitCents":1500}],"declared":{"netCents":3498,"vatCents":0,"grossCents":3498}}"""^^rdf:JSON """{"orderId":"A301","shipTo":{"country":"NL"},"customer":{"email":"billing@company.nl","vatId":"NL999999999B01"},"lines":[{"sku":"WID-001","qty":2,"unitCents":999},{"sku":"GAD-002","qty":1,"unitCents":1500}],"declared":{"netCents":3498,"vatCents":0,"grossCents":3498}}"""^^rdf:JSON """{"orderId":"A400","shipTo":{"country":"BE"},"customer":{"email":"ada@other.example","vatId":null},"lines":[{"sku":"WID-001","qty":2,"unitCents":999},{"sku":"GAD-002","qty":1,"unitCents":1500}],"declared":{"netCents":3498,"vatCents":508,"grossCents":4006}}"""^^rdf:JSON) .
#   ("""{"orderId":"A100","shipTo":{"country":"BE"},"customer":{"email":"Ada@Example.ORG","vatId":null},"lines":[{"sku":"wid-001","qty":2,"unitCents":999},{"sku":"GAD-002","qty":1,"unitCents":1500}],"declared":{"netCents":3498,"vatCents":509,"grossCents":4007}}"""^^rdf:JSON """{"orderId":"A200","shipTo":{"country":"US"},"customer":{"email":"bob@example.org","vatId":null},"lines":[{"sku":"WID-001","qty":2,"unitCents":999},{"sku":"GAD-002","qty":1,"unitCents":1500}],"declared":{"netCents":3498,"vatCents":0,"grossCents":3498}}"""^^rdf:JSON """{"orderId":"A300","shipTo":{"country":"NL"},"customer":{"email":"acct@company.nl","vatId":"NL999999999B01"},"lines":[{"sku":"WID-001","qty":2,"unitCents":999},{"sku":"GAD-002","qty":1,"unitCents":1500}],"declared":{"netCents":3498,"vatCents":0,"grossCents":3498}}"""^^rdf:JSON """{"orderId":"A301","shipTo":{"country":"NL"},"customer":{"email":"billing@company.nl","vatId":"NL999999999B01"},"lines":[{"sku":"WID-001","qty":2,"unitCents":999},{"sku":"GAD-002","qty":1,"unitCents":1500}],"declared":{"netCents":3498,"vatCents":0,"grossCents":3498}}"""^^rdf:JSON """{"orderId":"A400","shipTo":{"country":"BE"},"customer":{"email":"ada@other.example","vatId":null},"lines":[{"sku":"WID-001","qty":2,"unitCents":999},{"sku":"GAD-002","qty":1,"unitCents":1500}],"declared":{"netCents":3498,"vatCents":508,"grossCents":4006}}"""^^rdf:JSON) list:iterate (0 """{"orderId":"A100","shipTo":{"country":"BE"},"customer":{"email":"Ada@Example.ORG","vatId":null},"lines":[{"sku":"wid-001","qty":2,"unitCents":999},{"sku":"GAD-002","qty":1,"unitCents":1500}],"declared":{"netCents":3498,"vatCents":509,"grossCents":4007}}"""^^rdf:JSON) .
#   ("""{"orderId":"A100","shipTo":{"country":"BE"},"customer":{"email":"Ada@Example.ORG","vatId":null},"lines":[{"sku":"wid-001","qty":2,"unitCents":999},{"sku":"GAD-002","qty":1,"unitCents":1500}],"declared":{"netCents":3498,"vatCents":509,"grossCents":4007}}"""^^rdf:JSON "/orderId") string:jsonPointer "A100" .
#   ("""{"orderId":"A100","shipTo":{"country":"BE"},"customer":{"email":"Ada@Example.ORG","vatId":null},"lines":[{"sku":"wid-001","qty":2,"unitCents":999},{"sku":"GAD-002","qty":1,"unitCents":1500}],"declared":{"netCents":3498,"vatCents":509,"grossCents":4007}}"""^^rdf:JSON "/shipTo/country") string:jsonPointer "BE" .
#   ("""{"orderId":"A100","shipTo":{"country":"BE"},"customer":{"email":"Ada@Example.ORG","vatId":null},"lines":[{"sku":"wid-001","qty":2,"unitCents":999},{"sku":"GAD-002","qty":1,"unitCents":1500}],"declared":{"netCents":3498,"vatCents":509,"grossCents":4007}}"""^^rdf:JSON "/customer") string:jsonPointer """{"email":"Ada@Example.ORG","vatId":null}"""^^rdf:JSON .
#   ("""{"email":"Ada@Example.ORG","vatId":null}"""^^rdf:JSON "/email") string:jsonPointer "Ada@Example.ORG" .
#   ("""{"email":"Ada@Example.ORG","vatId":null}"""^^rdf:JSON "/vatId") string:jsonPointer "null" .
#   ("""{"orderId":"A100","shipTo":{"country":"BE"},"customer":{"email":"Ada@Example.ORG","vatId":null},"lines":[{"sku":"wid-001","qty":2,"unitCents":999},{"sku":"GAD-002","qty":1,"unitCents":1500}],"declared":{"netCents":3498,"vatCents":509,"grossCents":4007}}"""^^rdf:JSON "/declared") string:jsonPointer """{"netCents":3498,"vatCents":509,"grossCents":4007}"""^^rdf:JSON .
#   ("""{"netCents":3498,"vatCents":509,"grossCents":4007}"""^^rdf:JSON "/netCents") string:jsonPointer 3498 .
#   ("""{"netCents":3498,"vatCents":509,"grossCents":4007}"""^^rdf:JSON "/vatCents") string:jsonPointer 509 .
#   ("""{"netCents":3498,"vatCents":509,"grossCents":4007}"""^^rdf:JSON "/grossCents") string:jsonPointer 4007 .
#   ("urn:example:order:%s" "A100") string:format "urn:example:order:A100" .
#   <urn:example:order:A100> log:uri "urn:example:order:A100" .
# via the schematic forward rule:
#   {
#     ex:feed ex:json ?J .
#     (?J "/orders") string:jsonPointer ?Orders .
#     ?Orders list:iterate (?OrderIndex ?OrderJson) .
#     (?OrderJson "/orderId") string:jsonPointer ?OrderId .
#     (?OrderJson "/shipTo/country") string:jsonPointer ?Country .
#     (?OrderJson "/customer") string:jsonPointer ?CustJson .
#     (?CustJson "/email") string:jsonPointer ?Email .
#     (?CustJson "/vatId") string:jsonPointer ?VatIdRaw .
#     (?OrderJson "/declared") string:jsonPointer ?Decl .
#     (?Decl "/netCents") string:jsonPointer ?NetD .
#     (?Decl "/vatCents") string:jsonPointer ?VatD .
#     (?Decl "/grossCents") string:jsonPointer ?GrossD .
#     ("urn:example:order:%s" ?OrderId) string:format ?OrderUriStr .
#     ?Order log:uri ?OrderUriStr .
#   } => {
#     ?Order a ex:Order .
#     ?Order ex:orderId ?OrderId .
#     ?Order ex:orderIndex ?OrderIndex .
#     ?Order ex:shipCountry ?Country .
#     ?Order ex:email ?Email .
#     ?Order ex:vatIdRaw ?VatIdRaw .
#     ?Order ex:declaredNetCents ?NetD .
#     ?Order ex:declaredVatCents ?VatD .
#     ?Order ex:declaredGrossCents ?GrossD .
#   } .
# with substitution (on rule variables):
#   ?Country = "BE"
#   ?CustJson = """{"email":"Ada@Example.ORG","vatId":null}"""^^rdf:JSON
#   ?Decl = """{"netCents":3498,"vatCents":509,"grossCents":4007}"""^^rdf:JSON
#   ?Email = "Ada@Example.ORG"
#   ?GrossD = 4007
#   ?J = """{
#     "meta~data": { "batch": "2025-12-18" },
#     "orders": [
#     {
#     "orderId": "A100",
#     "shipTo": { "country": "BE" },
#     "customer": { "email": "Ada@Example.ORG", "vatId": null },
#     "lines": [
#     { "sku": "wid-001", "qty": 2, "unitCents": 999 },
#     { "sku": "GAD-002", "qty": 1, "unitCents": 1500 }
#     ],
#     "declared": { "netCents": 3498, "vatCents": 509, "grossCents": 4007 }
#     },
#     {
#     "orderId": "A200",
#     "shipTo": { "country": "US" },
#     "customer": { "email": "bob@example.org", "vatId": null },
#     "lines": [
#     { "sku": "WID-001", "qty": 2, "unitCents": 999 },
#     { "sku": "GAD-002", "qty": 1, "unitCents": 1500 }
#     ],
#     "declared": { "netCents": 3498, "vatCents": 0, "grossCents": 3498 }
#     },
#     {
#     "orderId": "A300",
#     "shipTo": { "country": "NL" },
#     "customer": { "email": "acct@company.nl", "vatId": "NL999999999B01" },
#     "lines": [
#     { "sku": "WID-001", "qty": 2, "unitCents": 999 },
#     { "sku": "GAD-002", "qty": 1, "unitCents": 1500 }
#     ],
#     "declared": { "netCents": 3498, "vatCents": 0, "grossCents": 3498 }
#     },
#     {
#     "orderId": "A301",
#     "shipTo": { "country": "NL" },
#     "customer": { "email": "billing@company.nl", "vatId": "NL999999999B01" },
#     "lines": [
#     { "sku": "WID-001", "qty": 2, "unitCents": 999 },
#     { "sku": "GAD-002", "qty": 1, "unitCents": 1500 }
#     ],
#     "declared": { "netCents": 3498, "vatCents": 0, "grossCents": 3498 }
#     },
#     {
#     "orderId": "A400",
#     "shipTo": { "country": "BE" },
#     "customer": { "email": "ada@other.example", "vatId": null },
#     "lines": [
#     { "sku": "WID-001", "qty": 2, "unitCents": 999 },
#     { "sku": "GAD-002", "qty": 1, "unitCents": 1500 }
#     ],
#     "declared": { "netCents": 3498, "vatCents": 508, "grossCents": 4006 }
#     }
#     ]
#   }"""^^rdf:JSON
#   ?NetD = 3498
#   ?Order = <urn:example:order:A100>
#   ?OrderId = "A100"
#   ?OrderIndex = 0
#   ?OrderJson = """{"orderId":"A100","shipTo":{"country":"BE"},"customer":{"email":"Ada@Example.ORG","vatId":null},"lines":[{"sku":"wid-001","qty":2,"unitCents":999},{"sku":"GAD-002","qty":1,"unitCents":1500}],"declared":{"netCents":3498,"vatCents":509,"grossCents":4007}}"""^^rdf:JSON
#   ?OrderUriStr = "urn:example:order:A100"
#   ?Orders = ("""{"orderId":"A100","shipTo":{"country":"BE"},"customer":{"email":"Ada@Example.ORG","vatId":null},"lines":[{"sku":"wid-001","qty":2,"unitCents":999},{"sku":"GAD-002","qty":1,"unitCents":1500}],"declared":{"netCents":3498,"vatCents":509,"grossCents":4007}}"""^^rdf:JSON """{"orderId":"A200","shipTo":{"country":"US"},"customer":{"email":"bob@example.org","vatId":null},"lines":[{"sku":"WID-001","qty":2,"unitCents":999},{"sku":"GAD-002","qty":1,"unitCents":1500}],"declared":{"netCents":3498,"vatCents":0,"grossCents":3498}}"""^^rdf:JSON """{"orderId":"A300","shipTo":{"country":"NL"},"customer":{"email":"acct@company.nl","vatId":"NL999999999B01"},"lines":[{"sku":"WID-001","qty":2,"unitCents":999},{"sku":"GAD-002","qty":1,"unitCents":1500}],"declared":{"netCents":3498,"vatCents":0,"grossCents":3498}}"""^^rdf:JSON """{"orderId":"A301","shipTo":{"country":"NL"},"customer":{"email":"billing@company.nl","vatId":"NL999999999B01"},"lines":[{"sku":"WID-001","qty":2,"unitCents":999},{"sku":"GAD-002","qty":1,"unitCents":1500}],"declared":{"netCents":3498,"vatCents":0,"grossCents":3498}}"""^^rdf:JSON """{"orderId":"A400","shipTo":{"country":"BE"},"customer":{"email":"ada@other.example","vatId":null},"lines":[{"sku":"WID-001","qty":2,"unitCents":999},{"sku":"GAD-002","qty":1,"unitCents":1500}],"declared":{"netCents":3498,"vatCents":508,"grossCents":4006}}"""^^rdf:JSON)
#   ?VatD = 509
#   ?VatIdRaw = "null"
# Therefore the derived triple above is entailed by the rules and facts.
# ----------------------------------------------------------------------

<urn:example:order:A100> ex:declaredNetCents 3498 .

# ----------------------------------------------------------------------
# Proof for derived triple:
#   <urn:example:order:A100> ex:declaredVatCents 509 .
# It holds because the following instance of the rule body is provable:
#   ex:feed ex:json """{
#     "meta~data": { "batch": "2025-12-18" },
#     "orders": [
#       {
#         "orderId": "A100",
#         "shipTo": { "country": "BE" },
#         "customer": { "email": "Ada@Example.ORG", "vatId": null },
#         "lines": [
#           { "sku": "wid-001", "qty": 2, "unitCents": 999 },
#           { "sku": "GAD-002", "qty": 1, "unitCents": 1500 }
#         ],
#         "declared": { "netCents": 3498, "vatCents": 509, "grossCents": 4007 }
#       },
#       {
#         "orderId": "A200",
#         "shipTo": { "country": "US" },
#         "customer": { "email": "bob@example.org", "vatId": null },
#         "lines": [
#           { "sku": "WID-001", "qty": 2, "unitCents": 999 },
#           { "sku": "GAD-002", "qty": 1, "unitCents": 1500 }
#         ],
#         "declared": { "netCents": 3498, "vatCents": 0, "grossCents": 3498 }
#       },
#       {
#         "orderId": "A300",
#         "shipTo": { "country": "NL" },
#         "customer": { "email": "acct@company.nl", "vatId": "NL999999999B01" },
#         "lines": [
#           { "sku": "WID-001", "qty": 2, "unitCents": 999 },
#           { "sku": "GAD-002", "qty": 1, "unitCents": 1500 }
#         ],
#         "declared": { "netCents": 3498, "vatCents": 0, "grossCents": 3498 }
#       },
#       {
#         "orderId": "A301",
#         "shipTo": { "country": "NL" },
#         "customer": { "email": "billing@company.nl", "vatId": "NL999999999B01" },
#         "lines": [
#           { "sku": "WID-001", "qty": 2, "unitCents": 999 },
#           { "sku": "GAD-002", "qty": 1, "unitCents": 1500 }
#         ],
#         "declared": { "netCents": 3498, "vatCents": 0, "grossCents": 3498 }
#       },
#       {
#         "orderId": "A400",
#         "shipTo": { "country": "BE" },
#         "customer": { "email": "ada@other.example", "vatId": null },
#         "lines": [
#           { "sku": "WID-001", "qty": 2, "unitCents": 999 },
#           { "sku": "GAD-002", "qty": 1, "unitCents": 1500 }
#         ],
#         "declared": { "netCents": 3498, "vatCents": 508, "grossCents": 4006 }
#       }
#     ]
#   }"""^^rdf:JSON .
#   ("""{
#     "meta~data": { "batch": "2025-12-18" },
#     "orders": [
#       {
#         "orderId": "A100",
#         "shipTo": { "country": "BE" },
#         "customer": { "email": "Ada@Example.ORG", "vatId": null },
#         "lines": [
#           { "sku": "wid-001", "qty": 2, "unitCents": 999 },
#           { "sku": "GAD-002", "qty": 1, "unitCents": 1500 }
#         ],
#         "declared": { "netCents": 3498, "vatCents": 509, "grossCents": 4007 }
#       },
#       {
#         "orderId": "A200",
#         "shipTo": { "country": "US" },
#         "customer": { "email": "bob@example.org", "vatId": null },
#         "lines": [
#           { "sku": "WID-001", "qty": 2, "unitCents": 999 },
#           { "sku": "GAD-002", "qty": 1, "unitCents": 1500 }
#         ],
#         "declared": { "netCents": 3498, "vatCents": 0, "grossCents": 3498 }
#       },
#       {
#         "orderId": "A300",
#         "shipTo": { "country": "NL" },
#         "customer": { "email": "acct@company.nl", "vatId": "NL999999999B01" },
#         "lines": [
#           { "sku": "WID-001", "qty": 2, "unitCents": 999 },
#           { "sku": "GAD-002", "qty": 1, "unitCents": 1500 }
#         ],
#         "declared": { "netCents": 3498, "vatCents": 0, "grossCents": 3498 }
#       },
#       {
#         "orderId": "A301",
#         "shipTo": { "country": "NL" },
#         "customer": { "email": "billing@company.nl", "vatId": "NL999999999B01" },
#         "lines": [
#           { "sku": "WID-001", "qty": 2, "unitCents": 999 },
#           { "sku": "GAD-002", "qty": 1, "unitCents": 1500 }
#         ],
#         "declared": { "netCents": 3498, "vatCents": 0, "grossCents": 3498 }
#       },
#       {
#         "orderId": "A400",
#         "shipTo": { "country": "BE" },
#         "customer": { "email": "ada@other.example", "vatId": null },
#         "lines": [
#           { "sku": "WID-001", "qty": 2, "unitCents": 999 },
#           { "sku": "GAD-002", "qty": 1, "unitCents": 1500 }
#         ],
#         "declared": { "netCents": 3498, "vatCents": 508, "grossCents": 4006 }
#       }
#     ]
#   }"""^^rdf:JSON "/orders") string:jsonPointer ("""{"orderId":"A100","shipTo":{"country":"BE"},"customer":{"email":"Ada@Example.ORG","vatId":null},"lines":[{"sku":"wid-001","qty":2,"unitCents":999},{"sku":"GAD-002","qty":1,"unitCents":1500}],"declared":{"netCents":3498,"vatCents":509,"grossCents":4007}}"""^^rdf:JSON """{"orderId":"A200","shipTo":{"country":"US"},"customer":{"email":"bob@example.org","vatId":null},"lines":[{"sku":"WID-001","qty":2,"unitCents":999},{"sku":"GAD-002","qty":1,"unitCents":1500}],"declared":{"netCents":3498,"vatCents":0,"grossCents":3498}}"""^^rdf:JSON """{"orderId":"A300","shipTo":{"country":"NL"},"customer":{"email":"acct@company.nl","vatId":"NL999999999B01"},"lines":[{"sku":"WID-001","qty":2,"unitCents":999},{"sku":"GAD-002","qty":1,"unitCents":1500}],"declared":{"netCents":3498,"vatCents":0,"grossCents":3498}}"""^^rdf:JSON """{"orderId":"A301","shipTo":{"country":"NL"},"customer":{"email":"billing@company.nl","vatId":"NL999999999B01"},"lines":[{"sku":"WID-001","qty":2,"unitCents":999},{"sku":"GAD-002","qty":1,"unitCents":1500}],"declared":{"netCents":3498,"vatCents":0,"grossCents":3498}}"""^^rdf:JSON """{"orderId":"A400","shipTo":{"country":"BE"},"customer":{"email":"ada@other.example","vatId":null},"lines":[{"sku":"WID-001","qty":2,"unitCents":999},{"sku":"GAD-002","qty":1,"unitCents":1500}],"declared":{"netCents":3498,"vatCents":508,"grossCents":4006}}"""^^rdf:JSON) .
#   ("""{"orderId":"A100","shipTo":{"country":"BE"},"customer":{"email":"Ada@Example.ORG","vatId":null},"lines":[{"sku":"wid-001","qty":2,"unitCents":999},{"sku":"GAD-002","qty":1,"unitCents":1500}],"declared":{"netCents":3498,"vatCents":509,"grossCents":4007}}"""^^rdf:JSON """{"orderId":"A200","shipTo":{"country":"US"},"customer":{"email":"bob@example.org","vatId":null},"lines":[{"sku":"WID-001","qty":2,"unitCents":999},{"sku":"GAD-002","qty":1,"unitCents":1500}],"declared":{"netCents":3498,"vatCents":0,"grossCents":3498}}"""^^rdf:JSON """{"orderId":"A300","shipTo":{"country":"NL"},"customer":{"email":"acct@company.nl","vatId":"NL999999999B01"},"lines":[{"sku":"WID-001","qty":2,"unitCents":999},{"sku":"GAD-002","qty":1,"unitCents":1500}],"declared":{"netCents":3498,"vatCents":0,"grossCents":3498}}"""^^rdf:JSON """{"orderId":"A301","shipTo":{"country":"NL"},"customer":{"email":"billing@company.nl","vatId":"NL999999999B01"},"lines":[{"sku":"WID-001","qty":2,"unitCents":999},{"sku":"GAD-002","qty":1,"unitCents":1500}],"declared":{"netCents":3498,"vatCents":0,"grossCents":3498}}"""^^rdf:JSON """{"orderId":"A400","shipTo":{"country":"BE"},"customer":{"email":"ada@other.example","vatId":null},"lines":[{"sku":"WID-001","qty":2,"unitCents":999},{"sku":"GAD-002","qty":1,"unitCents":1500}],"declared":{"netCents":3498,"vatCents":508,"grossCents":4006}}"""^^rdf:JSON) list:iterate (0 """{"orderId":"A100","shipTo":{"country":"BE"},"customer":{"email":"Ada@Example.ORG","vatId":null},"lines":[{"sku":"wid-001","qty":2,"unitCents":999},{"sku":"GAD-002","qty":1,"unitCents":1500}],"declared":{"netCents":3498,"vatCents":509,"grossCents":4007}}"""^^rdf:JSON) .
#   ("""{"orderId":"A100","shipTo":{"country":"BE"},"customer":{"email":"Ada@Example.ORG","vatId":null},"lines":[{"sku":"wid-001","qty":2,"unitCents":999},{"sku":"GAD-002","qty":1,"unitCents":1500}],"declared":{"netCents":3498,"vatCents":509,"grossCents":4007}}"""^^rdf:JSON "/orderId") string:jsonPointer "A100" .
#   ("""{"orderId":"A100","shipTo":{"country":"BE"},"customer":{"email":"Ada@Example.ORG","vatId":null},"lines":[{"sku":"wid-001","qty":2,"unitCents":999},{"sku":"GAD-002","qty":1,"unitCents":1500}],"declared":{"netCents":3498,"vatCents":509,"grossCents":4007}}"""^^rdf:JSON "/shipTo/country") string:jsonPointer "BE" .
#   ("""{"orderId":"A100","shipTo":{"country":"BE"},"customer":{"email":"Ada@Example.ORG","vatId":null},"lines":[{"sku":"wid-001","qty":2,"unitCents":999},{"sku":"GAD-002","qty":1,"unitCents":1500}],"declared":{"netCents":3498,"vatCents":509,"grossCents":4007}}"""^^rdf:JSON "/customer") string:jsonPointer """{"email":"Ada@Example.ORG","vatId":null}"""^^rdf:JSON .
#   ("""{"email":"Ada@Example.ORG","vatId":null}"""^^rdf:JSON "/email") string:jsonPointer "Ada@Example.ORG" .
#   ("""{"email":"Ada@Example.ORG","vatId":null}"""^^rdf:JSON "/vatId") string:jsonPointer "null" .
#   ("""{"orderId":"A100","shipTo":{"country":"BE"},"customer":{"email":"Ada@Example.ORG","vatId":null},"lines":[{"sku":"wid-001","qty":2,"unitCents":999},{"sku":"GAD-002","qty":1,"unitCents":1500}],"declared":{"netCents":3498,"vatCents":509,"grossCents":4007}}"""^^rdf:JSON "/declared") string:jsonPointer """{"netCents":3498,"vatCents":509,"grossCents":4007}"""^^rdf:JSON .
#   ("""{"netCents":3498,"vatCents":509,"grossCents":4007}"""^^rdf:JSON "/netCents") string:jsonPointer 3498 .
#   ("""{"netCents":3498,"vatCents":509,"grossCents":4007}"""^^rdf:JSON "/vatCents") string:jsonPointer 509 .
#   ("""{"netCents":3498,"vatCents":509,"grossCents":4007}"""^^rdf:JSON "/grossCents") string:jsonPointer 4007 .
#   ("urn:example:order:%s" "A100") string:format "urn:example:order:A100" .
#   <urn:example:order:A100> log:uri "urn:example:order:A100" .
# via the schematic forward rule:
#   {
#     ex:feed ex:json ?J .
#     (?J "/orders") string:jsonPointer ?Orders .
#     ?Orders list:iterate (?OrderIndex ?OrderJson) .
#     (?OrderJson "/orderId") string:jsonPointer ?OrderId .
#     (?OrderJson "/shipTo/country") string:jsonPointer ?Country .
#     (?OrderJson "/customer") string:jsonPointer ?CustJson .
#     (?CustJson "/email") string:jsonPointer ?Email .
#     (?CustJson "/vatId") string:jsonPointer ?VatIdRaw .
#     (?OrderJson "/declared") string:jsonPointer ?Decl .
#     (?Decl "/netCents") string:jsonPointer ?NetD .
#     (?Decl "/vatCents") string:jsonPointer ?VatD .
#     (?Decl "/grossCents") string:jsonPointer ?GrossD .
#     ("urn:example:order:%s" ?OrderId) string:format ?OrderUriStr .
#     ?Order log:uri ?OrderUriStr .
#   } => {
#     ?Order a ex:Order .
#     ?Order ex:orderId ?OrderId .
#     ?Order ex:orderIndex ?OrderIndex .
#     ?Order ex:shipCountry ?Country .
#     ?Order ex:email ?Email .
#     ?Order ex:vatIdRaw ?VatIdRaw .
#     ?Order ex:declaredNetCents ?NetD .
#     ?Order ex:declaredVatCents ?VatD .
#     ?Order ex:declaredGrossCents ?GrossD .
#   } .
# with substitution (on rule variables):
#   ?Country = "BE"
#   ?CustJson = """{"email":"Ada@Example.ORG","vatId":null}"""^^rdf:JSON
#   ?Decl = """{"netCents":3498,"vatCents":509,"grossCents":4007}"""^^rdf:JSON
#   ?Email = "Ada@Example.ORG"
#   ?GrossD = 4007
#   ?J = """{
#     "meta~data": { "batch": "2025-12-18" },
#     "orders": [
#     {
#     "orderId": "A100",
#     "shipTo": { "country": "BE" },
#     "customer": { "email": "Ada@Example.ORG", "vatId": null },
#     "lines": [
#     { "sku": "wid-001", "qty": 2, "unitCents": 999 },
#     { "sku": "GAD-002", "qty": 1, "unitCents": 1500 }
#     ],
#     "declared": { "netCents": 3498, "vatCents": 509, "grossCents": 4007 }
#     },
#     {
#     "orderId": "A200",
#     "shipTo": { "country": "US" },
#     "customer": { "email": "bob@example.org", "vatId": null },
#     "lines": [
#     { "sku": "WID-001", "qty": 2, "unitCents": 999 },
#     { "sku": "GAD-002", "qty": 1, "unitCents": 1500 }
#     ],
#     "declared": { "netCents": 3498, "vatCents": 0, "grossCents": 3498 }
#     },
#     {
#     "orderId": "A300",
#     "shipTo": { "country": "NL" },
#     "customer": { "email": "acct@company.nl", "vatId": "NL999999999B01" },
#     "lines": [
#     { "sku": "WID-001", "qty": 2, "unitCents": 999 },
#     { "sku": "GAD-002", "qty": 1, "unitCents": 1500 }
#     ],
#     "declared": { "netCents": 3498, "vatCents": 0, "grossCents": 3498 }
#     },
#     {
#     "orderId": "A301",
#     "shipTo": { "country": "NL" },
#     "customer": { "email": "billing@company.nl", "vatId": "NL999999999B01" },
#     "lines": [
#     { "sku": "WID-001", "qty": 2, "unitCents": 999 },
#     { "sku": "GAD-002", "qty": 1, "unitCents": 1500 }
#     ],
#     "declared": { "netCents": 3498, "vatCents": 0, "grossCents": 3498 }
#     },
#     {
#     "orderId": "A400",
#     "shipTo": { "country": "BE" },
#     "customer": { "email": "ada@other.example", "vatId": null },
#     "lines": [
#     { "sku": "WID-001", "qty": 2, "unitCents": 999 },
#     { "sku": "GAD-002", "qty": 1, "unitCents": 1500 }
#     ],
#     "declared": { "netCents": 3498, "vatCents": 508, "grossCents": 4006 }
#     }
#     ]
#   }"""^^rdf:JSON
#   ?NetD = 3498
#   ?Order = <urn:example:order:A100>
#   ?OrderId = "A100"
#   ?OrderIndex = 0
#   ?OrderJson = """{"orderId":"A100","shipTo":{"country":"BE"},"customer":{"email":"Ada@Example.ORG","vatId":null},"lines":[{"sku":"wid-001","qty":2,"unitCents":999},{"sku":"GAD-002","qty":1,"unitCents":1500}],"declared":{"netCents":3498,"vatCents":509,"grossCents":4007}}"""^^rdf:JSON
#   ?OrderUriStr = "urn:example:order:A100"
#   ?Orders = ("""{"orderId":"A100","shipTo":{"country":"BE"},"customer":{"email":"Ada@Example.ORG","vatId":null},"lines":[{"sku":"wid-001","qty":2,"unitCents":999},{"sku":"GAD-002","qty":1,"unitCents":1500}],"declared":{"netCents":3498,"vatCents":509,"grossCents":4007}}"""^^rdf:JSON """{"orderId":"A200","shipTo":{"country":"US"},"customer":{"email":"bob@example.org","vatId":null},"lines":[{"sku":"WID-001","qty":2,"unitCents":999},{"sku":"GAD-002","qty":1,"unitCents":1500}],"declared":{"netCents":3498,"vatCents":0,"grossCents":3498}}"""^^rdf:JSON """{"orderId":"A300","shipTo":{"country":"NL"},"customer":{"email":"acct@company.nl","vatId":"NL999999999B01"},"lines":[{"sku":"WID-001","qty":2,"unitCents":999},{"sku":"GAD-002","qty":1,"unitCents":1500}],"declared":{"netCents":3498,"vatCents":0,"grossCents":3498}}"""^^rdf:JSON """{"orderId":"A301","shipTo":{"country":"NL"},"customer":{"email":"billing@company.nl","vatId":"NL999999999B01"},"lines":[{"sku":"WID-001","qty":2,"unitCents":999},{"sku":"GAD-002","qty":1,"unitCents":1500}],"declared":{"netCents":3498,"vatCents":0,"grossCents":3498}}"""^^rdf:JSON """{"orderId":"A400","shipTo":{"country":"BE"},"customer":{"email":"ada@other.example","vatId":null},"lines":[{"sku":"WID-001","qty":2,"unitCents":999},{"sku":"GAD-002","qty":1,"unitCents":1500}],"declared":{"netCents":3498,"vatCents":508,"grossCents":4006}}"""^^rdf:JSON)
#   ?VatD = 509
#   ?VatIdRaw = "null"
# Therefore the derived triple above is entailed by the rules and facts.
# ----------------------------------------------------------------------

<urn:example:order:A100> ex:declaredVatCents 509 .

# ----------------------------------------------------------------------
# Proof for derived triple:
#   <urn:example:order:A100> ex:declaredGrossCents 4007 .
# It holds because the following instance of the rule body is provable:
#   ex:feed ex:json """{
#     "meta~data": { "batch": "2025-12-18" },
#     "orders": [
#       {
#         "orderId": "A100",
#         "shipTo": { "country": "BE" },
#         "customer": { "email": "Ada@Example.ORG", "vatId": null },
#         "lines": [
#           { "sku": "wid-001", "qty": 2, "unitCents": 999 },
#           { "sku": "GAD-002", "qty": 1, "unitCents": 1500 }
#         ],
#         "declared": { "netCents": 3498, "vatCents": 509, "grossCents": 4007 }
#       },
#       {
#         "orderId": "A200",
#         "shipTo": { "country": "US" },
#         "customer": { "email": "bob@example.org", "vatId": null },
#         "lines": [
#           { "sku": "WID-001", "qty": 2, "unitCents": 999 },
#           { "sku": "GAD-002", "qty": 1, "unitCents": 1500 }
#         ],
#         "declared": { "netCents": 3498, "vatCents": 0, "grossCents": 3498 }
#       },
#       {
#         "orderId": "A300",
#         "shipTo": { "country": "NL" },
#         "customer": { "email": "acct@company.nl", "vatId": "NL999999999B01" },
#         "lines": [
#           { "sku": "WID-001", "qty": 2, "unitCents": 999 },
#           { "sku": "GAD-002", "qty": 1, "unitCents": 1500 }
#         ],
#         "declared": { "netCents": 3498, "vatCents": 0, "grossCents": 3498 }
#       },
#       {
#         "orderId": "A301",
#         "shipTo": { "country": "NL" },
#         "customer": { "email": "billing@company.nl", "vatId": "NL999999999B01" },
#         "lines": [
#           { "sku": "WID-001", "qty": 2, "unitCents": 999 },
#           { "sku": "GAD-002", "qty": 1, "unitCents": 1500 }
#         ],
#         "declared": { "netCents": 3498, "vatCents": 0, "grossCents": 3498 }
#       },
#       {
#         "orderId": "A400",
#         "shipTo": { "country": "BE" },
#         "customer": { "email": "ada@other.example", "vatId": null },
#         "lines": [
#           { "sku": "WID-001", "qty": 2, "unitCents": 999 },
#           { "sku": "GAD-002", "qty": 1, "unitCents": 1500 }
#         ],
#         "declared": { "netCents": 3498, "vatCents": 508, "grossCents": 4006 }
#       }
#     ]
#   }"""^^rdf:JSON .
#   ("""{
#     "meta~data": { "batch": "2025-12-18" },
#     "orders": [
#       {
#         "orderId": "A100",
#         "shipTo": { "country": "BE" },
#         "customer": { "email": "Ada@Example.ORG", "vatId": null },
#         "lines": [
#           { "sku": "wid-001", "qty": 2, "unitCents": 999 },
#           { "sku": "GAD-002", "qty": 1, "unitCents": 1500 }
#         ],
#         "declared": { "netCents": 3498, "vatCents": 509, "grossCents": 4007 }
#       },
#       {
#         "orderId": "A200",
#         "shipTo": { "country": "US" },
#         "customer": { "email": "bob@example.org", "vatId": null },
#         "lines": [
#           { "sku": "WID-001", "qty": 2, "unitCents": 999 },
#           { "sku": "GAD-002", "qty": 1, "unitCents": 1500 }
#         ],
#         "declared": { "netCents": 3498, "vatCents": 0, "grossCents": 3498 }
#       },
#       {
#         "orderId": "A300",
#         "shipTo": { "country": "NL" },
#         "customer": { "email": "acct@company.nl", "vatId": "NL999999999B01" },
#         "lines": [
#           { "sku": "WID-001", "qty": 2, "unitCents": 999 },
#           { "sku": "GAD-002", "qty": 1, "unitCents": 1500 }
#         ],
#         "declared": { "netCents": 3498, "vatCents": 0, "grossCents": 3498 }
#       },
#       {
#         "orderId": "A301",
#         "shipTo": { "country": "NL" },
#         "customer": { "email": "billing@company.nl", "vatId": "NL999999999B01" },
#         "lines": [
#           { "sku": "WID-001", "qty": 2, "unitCents": 999 },
#           { "sku": "GAD-002", "qty": 1, "unitCents": 1500 }
#         ],
#         "declared": { "netCents": 3498, "vatCents": 0, "grossCents": 3498 }
#       },
#       {
#         "orderId": "A400",
#         "shipTo": { "country": "BE" },
#         "customer": { "email": "ada@other.example", "vatId": null },
#         "lines": [
#           { "sku": "WID-001", "qty": 2, "unitCents": 999 },
#           { "sku": "GAD-002", "qty": 1, "unitCents": 1500 }
#         ],
#         "declared": { "netCents": 3498, "vatCents": 508, "grossCents": 4006 }
#       }
#     ]
#   }"""^^rdf:JSON "/orders") string:jsonPointer ("""{"orderId":"A100","shipTo":{"country":"BE"},"customer":{"email":"Ada@Example.ORG","vatId":null},"lines":[{"sku":"wid-001","qty":2,"unitCents":999},{"sku":"GAD-002","qty":1,"unitCents":1500}],"declared":{"netCents":3498,"vatCents":509,"grossCents":4007}}"""^^rdf:JSON """{"orderId":"A200","shipTo":{"country":"US"},"customer":{"email":"bob@example.org","vatId":null},"lines":[{"sku":"WID-001","qty":2,"unitCents":999},{"sku":"GAD-002","qty":1,"unitCents":1500}],"declared":{"netCents":3498,"vatCents":0,"grossCents":3498}}"""^^rdf:JSON """{"orderId":"A300","shipTo":{"country":"NL"},"customer":{"email":"acct@company.nl","vatId":"NL999999999B01"},"lines":[{"sku":"WID-001","qty":2,"unitCents":999},{"sku":"GAD-002","qty":1,"unitCents":1500}],"declared":{"netCents":3498,"vatCents":0,"grossCents":3498}}"""^^rdf:JSON """{"orderId":"A301","shipTo":{"country":"NL"},"customer":{"email":"billing@company.nl","vatId":"NL999999999B01"},"lines":[{"sku":"WID-001","qty":2,"unitCents":999},{"sku":"GAD-002","qty":1,"unitCents":1500}],"declared":{"netCents":3498,"vatCents":0,"grossCents":3498}}"""^^rdf:JSON """{"orderId":"A400","shipTo":{"country":"BE"},"customer":{"email":"ada@other.example","vatId":null},"lines":[{"sku":"WID-001","qty":2,"unitCents":999},{"sku":"GAD-002","qty":1,"unitCents":1500}],"declared":{"netCents":3498,"vatCents":508,"grossCents":4006}}"""^^rdf:JSON) .
#   ("""{"orderId":"A100","shipTo":{"country":"BE"},"customer":{"email":"Ada@Example.ORG","vatId":null},"lines":[{"sku":"wid-001","qty":2,"unitCents":999},{"sku":"GAD-002","qty":1,"unitCents":1500}],"declared":{"netCents":3498,"vatCents":509,"grossCents":4007}}"""^^rdf:JSON """{"orderId":"A200","shipTo":{"country":"US"},"customer":{"email":"bob@example.org","vatId":null},"lines":[{"sku":"WID-001","qty":2,"unitCents":999},{"sku":"GAD-002","qty":1,"unitCents":1500}],"declared":{"netCents":3498,"vatCents":0,"grossCents":3498}}"""^^rdf:JSON """{"orderId":"A300","shipTo":{"country":"NL"},"customer":{"email":"acct@company.nl","vatId":"NL999999999B01"},"lines":[{"sku":"WID-001","qty":2,"unitCents":999},{"sku":"GAD-002","qty":1,"unitCents":1500}],"declared":{"netCents":3498,"vatCents":0,"grossCents":3498}}"""^^rdf:JSON """{"orderId":"A301","shipTo":{"country":"NL"},"customer":{"email":"billing@company.nl","vatId":"NL999999999B01"},"lines":[{"sku":"WID-001","qty":2,"unitCents":999},{"sku":"GAD-002","qty":1,"unitCents":1500}],"declared":{"netCents":3498,"vatCents":0,"grossCents":3498}}"""^^rdf:JSON """{"orderId":"A400","shipTo":{"country":"BE"},"customer":{"email":"ada@other.example","vatId":null},"lines":[{"sku":"WID-001","qty":2,"unitCents":999},{"sku":"GAD-002","qty":1,"unitCents":1500}],"declared":{"netCents":3498,"vatCents":508,"grossCents":4006}}"""^^rdf:JSON) list:iterate (0 """{"orderId":"A100","shipTo":{"country":"BE"},"customer":{"email":"Ada@Example.ORG","vatId":null},"lines":[{"sku":"wid-001","qty":2,"unitCents":999},{"sku":"GAD-002","qty":1,"unitCents":1500}],"declared":{"netCents":3498,"vatCents":509,"grossCents":4007}}"""^^rdf:JSON) .
#   ("""{"orderId":"A100","shipTo":{"country":"BE"},"customer":{"email":"Ada@Example.ORG","vatId":null},"lines":[{"sku":"wid-001","qty":2,"unitCents":999},{"sku":"GAD-002","qty":1,"unitCents":1500}],"declared":{"netCents":3498,"vatCents":509,"grossCents":4007}}"""^^rdf:JSON "/orderId") string:jsonPointer "A100" .
#   ("""{"orderId":"A100","shipTo":{"country":"BE"},"customer":{"email":"Ada@Example.ORG","vatId":null},"lines":[{"sku":"wid-001","qty":2,"unitCents":999},{"sku":"GAD-002","qty":1,"unitCents":1500}],"declared":{"netCents":3498,"vatCents":509,"grossCents":4007}}"""^^rdf:JSON "/shipTo/country") string:jsonPointer "BE" .
#   ("""{"orderId":"A100","shipTo":{"country":"BE"},"customer":{"email":"Ada@Example.ORG","vatId":null},"lines":[{"sku":"wid-001","qty":2,"unitCents":999},{"sku":"GAD-002","qty":1,"unitCents":1500}],"declared":{"netCents":3498,"vatCents":509,"grossCents":4007}}"""^^rdf:JSON "/customer") string:jsonPointer """{"email":"Ada@Example.ORG","vatId":null}"""^^rdf:JSON .
#   ("""{"email":"Ada@Example.ORG","vatId":null}"""^^rdf:JSON "/email") string:jsonPointer "Ada@Example.ORG" .
#   ("""{"email":"Ada@Example.ORG","vatId":null}"""^^rdf:JSON "/vatId") string:jsonPointer "null" .
#   ("""{"orderId":"A100","shipTo":{"country":"BE"},"customer":{"email":"Ada@Example.ORG","vatId":null},"lines":[{"sku":"wid-001","qty":2,"unitCents":999},{"sku":"GAD-002","qty":1,"unitCents":1500}],"declared":{"netCents":3498,"vatCents":509,"grossCents":4007}}"""^^rdf:JSON "/declared") string:jsonPointer """{"netCents":3498,"vatCents":509,"grossCents":4007}"""^^rdf:JSON .
#   ("""{"netCents":3498,"vatCents":509,"grossCents":4007}"""^^rdf:JSON "/netCents") string:jsonPointer 3498 .
#   ("""{"netCents":3498,"vatCents":509,"grossCents":4007}"""^^rdf:JSON "/vatCents") string:jsonPointer 509 .
#   ("""{"netCents":3498,"vatCents":509,"grossCents":4007}"""^^rdf:JSON "/grossCents") string:jsonPointer 4007 .
#   ("urn:example:order:%s" "A100") string:format "urn:example:order:A100" .
#   <urn:example:order:A100> log:uri "urn:example:order:A100" .
# via the schematic forward rule:
#   {
#     ex:feed ex:json ?J .
#     (?J "/orders") string:jsonPointer ?Orders .
#     ?Orders list:iterate (?OrderIndex ?OrderJson) .
#     (?OrderJson "/orderId") string:jsonPointer ?OrderId .
#     (?OrderJson "/shipTo/country") string:jsonPointer ?Country .
#     (?OrderJson "/customer") string:jsonPointer ?CustJson .
#     (?CustJson "/email") string:jsonPointer ?Email .
#     (?CustJson "/vatId") string:jsonPointer ?VatIdRaw .
#     (?OrderJson "/declared") string:jsonPointer ?Decl .
#     (?Decl "/netCents") string:jsonPointer ?NetD .
#     (?Decl "/vatCents") string:jsonPointer ?VatD .
#     (?Decl "/grossCents") string:jsonPointer ?GrossD .
#     ("urn:example:order:%s" ?OrderId) string:format ?OrderUriStr .
#     ?Order log:uri ?OrderUriStr .
#   } => {
#     ?Order a ex:Order .
#     ?Order ex:orderId ?OrderId .
#     ?Order ex:orderIndex ?OrderIndex .
#     ?Order ex:shipCountry ?Country .
#     ?Order ex:email ?Email .
#     ?Order ex:vatIdRaw ?VatIdRaw .
#     ?Order ex:declaredNetCents ?NetD .
#     ?Order ex:declaredVatCents ?VatD .
#     ?Order ex:declaredGrossCents ?GrossD .
#   } .
# with substitution (on rule variables):
#   ?Country = "BE"
#   ?CustJson = """{"email":"Ada@Example.ORG","vatId":null}"""^^rdf:JSON
#   ?Decl = """{"netCents":3498,"vatCents":509,"grossCents":4007}"""^^rdf:JSON
#   ?Email = "Ada@Example.ORG"
#   ?GrossD = 4007
#   ?J = """{
#     "meta~data": { "batch": "2025-12-18" },
#     "orders": [
#     {
#     "orderId": "A100",
#     "shipTo": { "country": "BE" },
#     "customer": { "email": "Ada@Example.ORG", "vatId": null },
#     "lines": [
#     { "sku": "wid-001", "qty": 2, "unitCents": 999 },
#     { "sku": "GAD-002", "qty": 1, "unitCents": 1500 }
#     ],
#     "declared": { "netCents": 3498, "vatCents": 509, "grossCents": 4007 }
#     },
#     {
#     "orderId": "A200",
#     "shipTo": { "country": "US" },
#     "customer": { "email": "bob@example.org", "vatId": null },
#     "lines": [
#     { "sku": "WID-001", "qty": 2, "unitCents": 999 },
#     { "sku": "GAD-002", "qty": 1, "unitCents": 1500 }
#     ],
#     "declared": { "netCents": 3498, "vatCents": 0, "grossCents": 3498 }
#     },
#     {
#     "orderId": "A300",
#     "shipTo": { "country": "NL" },
#     "customer": { "email": "acct@company.nl", "vatId": "NL999999999B01" },
#     "lines": [
#     { "sku": "WID-001", "qty": 2, "unitCents": 999 },
#     { "sku": "GAD-002", "qty": 1, "unitCents": 1500 }
#     ],
#     "declared": { "netCents": 3498, "vatCents": 0, "grossCents": 3498 }
#     },
#     {
#     "orderId": "A301",
#     "shipTo": { "country": "NL" },
#     "customer": { "email": "billing@company.nl", "vatId": "NL999999999B01" },
#     "lines": [
#     { "sku": "WID-001", "qty": 2, "unitCents": 999 },
#     { "sku": "GAD-002", "qty": 1, "unitCents": 1500 }
#     ],
#     "declared": { "netCents": 3498, "vatCents": 0, "grossCents": 3498 }
#     },
#     {
#     "orderId": "A400",
#     "shipTo": { "country": "BE" },
#     "customer": { "email": "ada@other.example", "vatId": null },
#     "lines": [
#     { "sku": "WID-001", "qty": 2, "unitCents": 999 },
#     { "sku": "GAD-002", "qty": 1, "unitCents": 1500 }
#     ],
#     "declared": { "netCents": 3498, "vatCents": 508, "grossCents": 4006 }
#     }
#     ]
#   }"""^^rdf:JSON
#   ?NetD = 3498
#   ?Order = <urn:example:order:A100>
#   ?OrderId = "A100"
#   ?OrderIndex = 0
#   ?OrderJson = """{"orderId":"A100","shipTo":{"country":"BE"},"customer":{"email":"Ada@Example.ORG","vatId":null},"lines":[{"sku":"wid-001","qty":2,"unitCents":999},{"sku":"GAD-002","qty":1,"unitCents":1500}],"declared":{"netCents":3498,"vatCents":509,"grossCents":4007}}"""^^rdf:JSON
#   ?OrderUriStr = "urn:example:order:A100"
#   ?Orders = ("""{"orderId":"A100","shipTo":{"country":"BE"},"customer":{"email":"Ada@Example.ORG","vatId":null},"lines":[{"sku":"wid-001","qty":2,"unitCents":999},{"sku":"GAD-002","qty":1,"unitCents":1500}],"declared":{"netCents":3498,"vatCents":509,"grossCents":4007}}"""^^rdf:JSON """{"orderId":"A200","shipTo":{"country":"US"},"customer":{"email":"bob@example.org","vatId":null},"lines":[{"sku":"WID-001","qty":2,"unitCents":999},{"sku":"GAD-002","qty":1,"unitCents":1500}],"declared":{"netCents":3498,"vatCents":0,"grossCents":3498}}"""^^rdf:JSON """{"orderId":"A300","shipTo":{"country":"NL"},"customer":{"email":"acct@company.nl","vatId":"NL999999999B01"},"lines":[{"sku":"WID-001","qty":2,"unitCents":999},{"sku":"GAD-002","qty":1,"unitCents":1500}],"declared":{"netCents":3498,"vatCents":0,"grossCents":3498}}"""^^rdf:JSON """{"orderId":"A301","shipTo":{"country":"NL"},"customer":{"email":"billing@company.nl","vatId":"NL999999999B01"},"lines":[{"sku":"WID-001","qty":2,"unitCents":999},{"sku":"GAD-002","qty":1,"unitCents":1500}],"declared":{"netCents":3498,"vatCents":0,"grossCents":3498}}"""^^rdf:JSON """{"orderId":"A400","shipTo":{"country":"BE"},"customer":{"email":"ada@other.example","vatId":null},"lines":[{"sku":"WID-001","qty":2,"unitCents":999},{"sku":"GAD-002","qty":1,"unitCents":1500}],"declared":{"netCents":3498,"vatCents":508,"grossCents":4006}}"""^^rdf:JSON)
#   ?VatD = 509
#   ?VatIdRaw = "null"
# Therefore the derived triple above is entailed by the rules and facts.
# ----------------------------------------------------------------------

<urn:example:order:A100> ex:declaredGrossCents 4007 .

# ----------------------------------------------------------------------
# Proof for derived triple:
#   <urn:example:customer:vat:NL999999999B01> a ex:Customer .
# It holds because the following instance of the rule body is provable:
#   <urn:example:order:A300> a ex:Order .
#   <urn:example:order:A300> ex:vatIdRaw "NL999999999B01" .
#   <urn:example:order:A300> ex:email "acct@company.nl" .
#   ("NL999999999B01" "[^0-9A-Za-z]" "") string:replace "NL999999999B01" .
#   ("urn:example:customer:vat:%s" "NL999999999B01") string:format "urn:example:customer:vat:NL999999999B01" .
#   <urn:example:customer:vat:NL999999999B01> log:uri "urn:example:customer:vat:NL999999999B01" .
#   "NL999999999B01" string:notEqualIgnoringCase "null" .
# via the schematic forward rule:
#   {
#     ?Order a ex:Order .
#     ?Order ex:vatIdRaw ?VatIdRaw .
#     ?Order ex:email ?Email .
#     (?VatIdRaw "[^0-9A-Za-z]" "") string:replace ?VatKey .
#     ("urn:example:customer:vat:%s" ?VatKey) string:format ?CustUriStr .
#     ?Cust log:uri ?CustUriStr .
#     ?VatIdRaw string:notEqualIgnoringCase "null" .
#   } => {
#     ?Cust a ex:Customer .
#     ?Cust ex:vatKey ?VatKey .
#     ?Cust ex:vatIdRaw ?VatIdRaw .
#     ?Cust ex:email ?Email .
#     ?Order ex:customer ?Cust .
#   } .
# with substitution (on rule variables):
#   ?Cust = <urn:example:customer:vat:NL999999999B01>
#   ?CustUriStr = "urn:example:customer:vat:NL999999999B01"
#   ?Email = "acct@company.nl"
#   ?Order = <urn:example:order:A300>
#   ?VatIdRaw = "NL999999999B01"
#   ?VatKey = "NL999999999B01"
# Therefore the derived triple above is entailed by the rules and facts.
# ----------------------------------------------------------------------

<urn:example:customer:vat:NL999999999B01> a ex:Customer .

# ----------------------------------------------------------------------
# Proof for derived triple:
#   <urn:example:customer:vat:NL999999999B01> ex:vatKey "NL999999999B01" .
# It holds because the following instance of the rule body is provable:
#   <urn:example:order:A300> a ex:Order .
#   <urn:example:order:A300> ex:vatIdRaw "NL999999999B01" .
#   <urn:example:order:A300> ex:email "acct@company.nl" .
#   ("NL999999999B01" "[^0-9A-Za-z]" "") string:replace "NL999999999B01" .
#   ("urn:example:customer:vat:%s" "NL999999999B01") string:format "urn:example:customer:vat:NL999999999B01" .
#   <urn:example:customer:vat:NL999999999B01> log:uri "urn:example:customer:vat:NL999999999B01" .
#   "NL999999999B01" string:notEqualIgnoringCase "null" .
# via the schematic forward rule:
#   {
#     ?Order a ex:Order .
#     ?Order ex:vatIdRaw ?VatIdRaw .
#     ?Order ex:email ?Email .
#     (?VatIdRaw "[^0-9A-Za-z]" "") string:replace ?VatKey .
#     ("urn:example:customer:vat:%s" ?VatKey) string:format ?CustUriStr .
#     ?Cust log:uri ?CustUriStr .
#     ?VatIdRaw string:notEqualIgnoringCase "null" .
#   } => {
#     ?Cust a ex:Customer .
#     ?Cust ex:vatKey ?VatKey .
#     ?Cust ex:vatIdRaw ?VatIdRaw .
#     ?Cust ex:email ?Email .
#     ?Order ex:customer ?Cust .
#   } .
# with substitution (on rule variables):
#   ?Cust = <urn:example:customer:vat:NL999999999B01>
#   ?CustUriStr = "urn:example:customer:vat:NL999999999B01"
#   ?Email = "acct@company.nl"
#   ?Order = <urn:example:order:A300>
#   ?VatIdRaw = "NL999999999B01"
#   ?VatKey = "NL999999999B01"
# Therefore the derived triple above is entailed by the rules and facts.
# ----------------------------------------------------------------------

<urn:example:customer:vat:NL999999999B01> ex:vatKey "NL999999999B01" .

# ----------------------------------------------------------------------
# Proof for derived triple:
#   <urn:example:customer:vat:NL999999999B01> ex:vatIdRaw "NL999999999B01" .
# It holds because the following instance of the rule body is provable:
#   <urn:example:order:A300> a ex:Order .
#   <urn:example:order:A300> ex:vatIdRaw "NL999999999B01" .
#   <urn:example:order:A300> ex:email "acct@company.nl" .
#   ("NL999999999B01" "[^0-9A-Za-z]" "") string:replace "NL999999999B01" .
#   ("urn:example:customer:vat:%s" "NL999999999B01") string:format "urn:example:customer:vat:NL999999999B01" .
#   <urn:example:customer:vat:NL999999999B01> log:uri "urn:example:customer:vat:NL999999999B01" .
#   "NL999999999B01" string:notEqualIgnoringCase "null" .
# via the schematic forward rule:
#   {
#     ?Order a ex:Order .
#     ?Order ex:vatIdRaw ?VatIdRaw .
#     ?Order ex:email ?Email .
#     (?VatIdRaw "[^0-9A-Za-z]" "") string:replace ?VatKey .
#     ("urn:example:customer:vat:%s" ?VatKey) string:format ?CustUriStr .
#     ?Cust log:uri ?CustUriStr .
#     ?VatIdRaw string:notEqualIgnoringCase "null" .
#   } => {
#     ?Cust a ex:Customer .
#     ?Cust ex:vatKey ?VatKey .
#     ?Cust ex:vatIdRaw ?VatIdRaw .
#     ?Cust ex:email ?Email .
#     ?Order ex:customer ?Cust .
#   } .
# with substitution (on rule variables):
#   ?Cust = <urn:example:customer:vat:NL999999999B01>
#   ?CustUriStr = "urn:example:customer:vat:NL999999999B01"
#   ?Email = "acct@company.nl"
#   ?Order = <urn:example:order:A300>
#   ?VatIdRaw = "NL999999999B01"
#   ?VatKey = "NL999999999B01"
# Therefore the derived triple above is entailed by the rules and facts.
# ----------------------------------------------------------------------

<urn:example:customer:vat:NL999999999B01> ex:vatIdRaw "NL999999999B01" .

# ----------------------------------------------------------------------
# Proof for derived triple:
#   <urn:example:customer:vat:NL999999999B01> ex:email "acct@company.nl" .
# It holds because the following instance of the rule body is provable:
#   <urn:example:order:A300> a ex:Order .
#   <urn:example:order:A300> ex:vatIdRaw "NL999999999B01" .
#   <urn:example:order:A300> ex:email "acct@company.nl" .
#   ("NL999999999B01" "[^0-9A-Za-z]" "") string:replace "NL999999999B01" .
#   ("urn:example:customer:vat:%s" "NL999999999B01") string:format "urn:example:customer:vat:NL999999999B01" .
#   <urn:example:customer:vat:NL999999999B01> log:uri "urn:example:customer:vat:NL999999999B01" .
#   "NL999999999B01" string:notEqualIgnoringCase "null" .
# via the schematic forward rule:
#   {
#     ?Order a ex:Order .
#     ?Order ex:vatIdRaw ?VatIdRaw .
#     ?Order ex:email ?Email .
#     (?VatIdRaw "[^0-9A-Za-z]" "") string:replace ?VatKey .
#     ("urn:example:customer:vat:%s" ?VatKey) string:format ?CustUriStr .
#     ?Cust log:uri ?CustUriStr .
#     ?VatIdRaw string:notEqualIgnoringCase "null" .
#   } => {
#     ?Cust a ex:Customer .
#     ?Cust ex:vatKey ?VatKey .
#     ?Cust ex:vatIdRaw ?VatIdRaw .
#     ?Cust ex:email ?Email .
#     ?Order ex:customer ?Cust .
#   } .
# with substitution (on rule variables):
#   ?Cust = <urn:example:customer:vat:NL999999999B01>
#   ?CustUriStr = "urn:example:customer:vat:NL999999999B01"
#   ?Email = "acct@company.nl"
#   ?Order = <urn:example:order:A300>
#   ?VatIdRaw = "NL999999999B01"
#   ?VatKey = "NL999999999B01"
# Therefore the derived triple above is entailed by the rules and facts.
# ----------------------------------------------------------------------

<urn:example:customer:vat:NL999999999B01> ex:email "acct@company.nl" .

# ----------------------------------------------------------------------
# Proof for derived triple:
#   <urn:example:order:A300> ex:customer <urn:example:customer:vat:NL999999999B01> .
# It holds because the following instance of the rule body is provable:
#   <urn:example:order:A300> a ex:Order .
#   <urn:example:order:A300> ex:vatIdRaw "NL999999999B01" .
#   <urn:example:order:A300> ex:email "acct@company.nl" .
#   ("NL999999999B01" "[^0-9A-Za-z]" "") string:replace "NL999999999B01" .
#   ("urn:example:customer:vat:%s" "NL999999999B01") string:format "urn:example:customer:vat:NL999999999B01" .
#   <urn:example:customer:vat:NL999999999B01> log:uri "urn:example:customer:vat:NL999999999B01" .
#   "NL999999999B01" string:notEqualIgnoringCase "null" .
# via the schematic forward rule:
#   {
#     ?Order a ex:Order .
#     ?Order ex:vatIdRaw ?VatIdRaw .
#     ?Order ex:email ?Email .
#     (?VatIdRaw "[^0-9A-Za-z]" "") string:replace ?VatKey .
#     ("urn:example:customer:vat:%s" ?VatKey) string:format ?CustUriStr .
#     ?Cust log:uri ?CustUriStr .
#     ?VatIdRaw string:notEqualIgnoringCase "null" .
#   } => {
#     ?Cust a ex:Customer .
#     ?Cust ex:vatKey ?VatKey .
#     ?Cust ex:vatIdRaw ?VatIdRaw .
#     ?Cust ex:email ?Email .
#     ?Order ex:customer ?Cust .
#   } .
# with substitution (on rule variables):
#   ?Cust = <urn:example:customer:vat:NL999999999B01>
#   ?CustUriStr = "urn:example:customer:vat:NL999999999B01"
#   ?Email = "acct@company.nl"
#   ?Order = <urn:example:order:A300>
#   ?VatIdRaw = "NL999999999B01"
#   ?VatKey = "NL999999999B01"
# Therefore the derived triple above is entailed by the rules and facts.
# ----------------------------------------------------------------------

<urn:example:order:A300> ex:customer <urn:example:customer:vat:NL999999999B01> .

# ----------------------------------------------------------------------
# Proof for derived triple:
#   <urn:example:customer:vat:NL999999999B01> ex:email "billing@company.nl" .
# It holds because the following instance of the rule body is provable:
#   <urn:example:order:A301> a ex:Order .
#   <urn:example:order:A301> ex:vatIdRaw "NL999999999B01" .
#   <urn:example:order:A301> ex:email "billing@company.nl" .
#   ("NL999999999B01" "[^0-9A-Za-z]" "") string:replace "NL999999999B01" .
#   ("urn:example:customer:vat:%s" "NL999999999B01") string:format "urn:example:customer:vat:NL999999999B01" .
#   <urn:example:customer:vat:NL999999999B01> log:uri "urn:example:customer:vat:NL999999999B01" .
#   "NL999999999B01" string:notEqualIgnoringCase "null" .
# via the schematic forward rule:
#   {
#     ?Order a ex:Order .
#     ?Order ex:vatIdRaw ?VatIdRaw .
#     ?Order ex:email ?Email .
#     (?VatIdRaw "[^0-9A-Za-z]" "") string:replace ?VatKey .
#     ("urn:example:customer:vat:%s" ?VatKey) string:format ?CustUriStr .
#     ?Cust log:uri ?CustUriStr .
#     ?VatIdRaw string:notEqualIgnoringCase "null" .
#   } => {
#     ?Cust a ex:Customer .
#     ?Cust ex:vatKey ?VatKey .
#     ?Cust ex:vatIdRaw ?VatIdRaw .
#     ?Cust ex:email ?Email .
#     ?Order ex:customer ?Cust .
#   } .
# with substitution (on rule variables):
#   ?Cust = <urn:example:customer:vat:NL999999999B01>
#   ?CustUriStr = "urn:example:customer:vat:NL999999999B01"
#   ?Email = "billing@company.nl"
#   ?Order = <urn:example:order:A301>
#   ?VatIdRaw = "NL999999999B01"
#   ?VatKey = "NL999999999B01"
# Therefore the derived triple above is entailed by the rules and facts.
# ----------------------------------------------------------------------

<urn:example:customer:vat:NL999999999B01> ex:email "billing@company.nl" .

# ----------------------------------------------------------------------
# Proof for derived triple:
#   <urn:example:order:A301> ex:customer <urn:example:customer:vat:NL999999999B01> .
# It holds because the following instance of the rule body is provable:
#   <urn:example:order:A301> a ex:Order .
#   <urn:example:order:A301> ex:vatIdRaw "NL999999999B01" .
#   <urn:example:order:A301> ex:email "billing@company.nl" .
#   ("NL999999999B01" "[^0-9A-Za-z]" "") string:replace "NL999999999B01" .
#   ("urn:example:customer:vat:%s" "NL999999999B01") string:format "urn:example:customer:vat:NL999999999B01" .
#   <urn:example:customer:vat:NL999999999B01> log:uri "urn:example:customer:vat:NL999999999B01" .
#   "NL999999999B01" string:notEqualIgnoringCase "null" .
# via the schematic forward rule:
#   {
#     ?Order a ex:Order .
#     ?Order ex:vatIdRaw ?VatIdRaw .
#     ?Order ex:email ?Email .
#     (?VatIdRaw "[^0-9A-Za-z]" "") string:replace ?VatKey .
#     ("urn:example:customer:vat:%s" ?VatKey) string:format ?CustUriStr .
#     ?Cust log:uri ?CustUriStr .
#     ?VatIdRaw string:notEqualIgnoringCase "null" .
#   } => {
#     ?Cust a ex:Customer .
#     ?Cust ex:vatKey ?VatKey .
#     ?Cust ex:vatIdRaw ?VatIdRaw .
#     ?Cust ex:email ?Email .
#     ?Order ex:customer ?Cust .
#   } .
# with substitution (on rule variables):
#   ?Cust = <urn:example:customer:vat:NL999999999B01>
#   ?CustUriStr = "urn:example:customer:vat:NL999999999B01"
#   ?Email = "billing@company.nl"
#   ?Order = <urn:example:order:A301>
#   ?VatIdRaw = "NL999999999B01"
#   ?VatKey = "NL999999999B01"
# Therefore the derived triple above is entailed by the rules and facts.
# ----------------------------------------------------------------------

<urn:example:order:A301> ex:customer <urn:example:customer:vat:NL999999999B01> .

# ----------------------------------------------------------------------
# Proof for derived triple:
#   genid:bf57c048-5f73-c104-a49c-c2b8b003cd8c a ex:Customer .
# It holds because the following instance of the rule body is provable:
#   <urn:example:order:A100> a ex:Order .
#   <urn:example:order:A100> ex:vatIdRaw "null" .
#   <urn:example:order:A100> ex:email "Ada@Example.ORG" .
#   "Ada@Example.ORG" log:skolem genid:bf57c048-5f73-c104-a49c-c2b8b003cd8c .
# via the schematic forward rule:
#   {
#     ?Order a ex:Order .
#     ?Order ex:vatIdRaw "null" .
#     ?Order ex:email ?Email .
#     ?Email log:skolem ?Cust .
#   } => {
#     ?Cust a ex:Customer .
#     ?Cust ex:vatIdRaw "null" .
#     ?Cust ex:email ?Email .
#     ?Order ex:customer ?Cust .
#   } .
# with substitution (on rule variables):
#   ?Cust = genid:bf57c048-5f73-c104-a49c-c2b8b003cd8c
#   ?Email = "Ada@Example.ORG"
#   ?Order = <urn:example:order:A100>
# Therefore the derived triple above is entailed by the rules and facts.
# ----------------------------------------------------------------------

genid:bf57c048-5f73-c104-a49c-c2b8b003cd8c a ex:Customer .

# ----------------------------------------------------------------------
# Proof for derived triple:
#   genid:bf57c048-5f73-c104-a49c-c2b8b003cd8c ex:vatIdRaw "null" .
# It holds because the following instance of the rule body is provable:
#   <urn:example:order:A100> a ex:Order .
#   <urn:example:order:A100> ex:vatIdRaw "null" .
#   <urn:example:order:A100> ex:email "Ada@Example.ORG" .
#   "Ada@Example.ORG" log:skolem genid:bf57c048-5f73-c104-a49c-c2b8b003cd8c .
# via the schematic forward rule:
#   {
#     ?Order a ex:Order .
#     ?Order ex:vatIdRaw "null" .
#     ?Order ex:email ?Email .
#     ?Email log:skolem ?Cust .
#   } => {
#     ?Cust a ex:Customer .
#     ?Cust ex:vatIdRaw "null" .
#     ?Cust ex:email ?Email .
#     ?Order ex:customer ?Cust .
#   } .
# with substitution (on rule variables):
#   ?Cust = genid:bf57c048-5f73-c104-a49c-c2b8b003cd8c
#   ?Email = "Ada@Example.ORG"
#   ?Order = <urn:example:order:A100>
# Therefore the derived triple above is entailed by the rules and facts.
# ----------------------------------------------------------------------

genid:bf57c048-5f73-c104-a49c-c2b8b003cd8c ex:vatIdRaw "null" .

# ----------------------------------------------------------------------
# Proof for derived triple:
#   genid:bf57c048-5f73-c104-a49c-c2b8b003cd8c ex:email "Ada@Example.ORG" .
# It holds because the following instance of the rule body is provable:
#   <urn:example:order:A100> a ex:Order .
#   <urn:example:order:A100> ex:vatIdRaw "null" .
#   <urn:example:order:A100> ex:email "Ada@Example.ORG" .
#   "Ada@Example.ORG" log:skolem genid:bf57c048-5f73-c104-a49c-c2b8b003cd8c .
# via the schematic forward rule:
#   {
#     ?Order a ex:Order .
#     ?Order ex:vatIdRaw "null" .
#     ?Order ex:email ?Email .
#     ?Email log:skolem ?Cust .
#   } => {
#     ?Cust a ex:Customer .
#     ?Cust ex:vatIdRaw "null" .
#     ?Cust ex:email ?Email .
#     ?Order ex:customer ?Cust .
#   } .
# with substitution (on rule variables):
#   ?Cust = genid:bf57c048-5f73-c104-a49c-c2b8b003cd8c
#   ?Email = "Ada@Example.ORG"
#   ?Order = <urn:example:order:A100>
# Therefore the derived triple above is entailed by the rules and facts.
# ----------------------------------------------------------------------

genid:bf57c048-5f73-c104-a49c-c2b8b003cd8c ex:email "Ada@Example.ORG" .

# ----------------------------------------------------------------------
# Proof for derived triple:
#   <urn:example:order:A100> ex:customer genid:bf57c048-5f73-c104-a49c-c2b8b003cd8c .
# It holds because the following instance of the rule body is provable:
#   <urn:example:order:A100> a ex:Order .
#   <urn:example:order:A100> ex:vatIdRaw "null" .
#   <urn:example:order:A100> ex:email "Ada@Example.ORG" .
#   "Ada@Example.ORG" log:skolem genid:bf57c048-5f73-c104-a49c-c2b8b003cd8c .
# via the schematic forward rule:
#   {
#     ?Order a ex:Order .
#     ?Order ex:vatIdRaw "null" .
#     ?Order ex:email ?Email .
#     ?Email log:skolem ?Cust .
#   } => {
#     ?Cust a ex:Customer .
#     ?Cust ex:vatIdRaw "null" .
#     ?Cust ex:email ?Email .
#     ?Order ex:customer ?Cust .
#   } .
# with substitution (on rule variables):
#   ?Cust = genid:bf57c048-5f73-c104-a49c-c2b8b003cd8c
#   ?Email = "Ada@Example.ORG"
#   ?Order = <urn:example:order:A100>
# Therefore the derived triple above is entailed by the rules and facts.
# ----------------------------------------------------------------------

<urn:example:order:A100> ex:customer genid:bf57c048-5f73-c104-a49c-c2b8b003cd8c .

# ----------------------------------------------------------------------
# Proof for derived triple:
#   genid:e8540f44-5792-3fe8-84f5-c27731a9e748 a ex:Customer .
# It holds because the following instance of the rule body is provable:
#   <urn:example:order:A200> a ex:Order .
#   <urn:example:order:A200> ex:vatIdRaw "null" .
#   <urn:example:order:A200> ex:email "bob@example.org" .
#   "bob@example.org" log:skolem genid:e8540f44-5792-3fe8-84f5-c27731a9e748 .
# via the schematic forward rule:
#   {
#     ?Order a ex:Order .
#     ?Order ex:vatIdRaw "null" .
#     ?Order ex:email ?Email .
#     ?Email log:skolem ?Cust .
#   } => {
#     ?Cust a ex:Customer .
#     ?Cust ex:vatIdRaw "null" .
#     ?Cust ex:email ?Email .
#     ?Order ex:customer ?Cust .
#   } .
# with substitution (on rule variables):
#   ?Cust = genid:e8540f44-5792-3fe8-84f5-c27731a9e748
#   ?Email = "bob@example.org"
#   ?Order = <urn:example:order:A200>
# Therefore the derived triple above is entailed by the rules and facts.
# ----------------------------------------------------------------------

genid:e8540f44-5792-3fe8-84f5-c27731a9e748 a ex:Customer .

# ----------------------------------------------------------------------
# Proof for derived triple:
#   genid:e8540f44-5792-3fe8-84f5-c27731a9e748 ex:vatIdRaw "null" .
# It holds because the following instance of the rule body is provable:
#   <urn:example:order:A200> a ex:Order .
#   <urn:example:order:A200> ex:vatIdRaw "null" .
#   <urn:example:order:A200> ex:email "bob@example.org" .
#   "bob@example.org" log:skolem genid:e8540f44-5792-3fe8-84f5-c27731a9e748 .
# via the schematic forward rule:
#   {
#     ?Order a ex:Order .
#     ?Order ex:vatIdRaw "null" .
#     ?Order ex:email ?Email .
#     ?Email log:skolem ?Cust .
#   } => {
#     ?Cust a ex:Customer .
#     ?Cust ex:vatIdRaw "null" .
#     ?Cust ex:email ?Email .
#     ?Order ex:customer ?Cust .
#   } .
# with substitution (on rule variables):
#   ?Cust = genid:e8540f44-5792-3fe8-84f5-c27731a9e748
#   ?Email = "bob@example.org"
#   ?Order = <urn:example:order:A200>
# Therefore the derived triple above is entailed by the rules and facts.
# ----------------------------------------------------------------------

genid:e8540f44-5792-3fe8-84f5-c27731a9e748 ex:vatIdRaw "null" .

# ----------------------------------------------------------------------
# Proof for derived triple:
#   genid:e8540f44-5792-3fe8-84f5-c27731a9e748 ex:email "bob@example.org" .
# It holds because the following instance of the rule body is provable:
#   <urn:example:order:A200> a ex:Order .
#   <urn:example:order:A200> ex:vatIdRaw "null" .
#   <urn:example:order:A200> ex:email "bob@example.org" .
#   "bob@example.org" log:skolem genid:e8540f44-5792-3fe8-84f5-c27731a9e748 .
# via the schematic forward rule:
#   {
#     ?Order a ex:Order .
#     ?Order ex:vatIdRaw "null" .
#     ?Order ex:email ?Email .
#     ?Email log:skolem ?Cust .
#   } => {
#     ?Cust a ex:Customer .
#     ?Cust ex:vatIdRaw "null" .
#     ?Cust ex:email ?Email .
#     ?Order ex:customer ?Cust .
#   } .
# with substitution (on rule variables):
#   ?Cust = genid:e8540f44-5792-3fe8-84f5-c27731a9e748
#   ?Email = "bob@example.org"
#   ?Order = <urn:example:order:A200>
# Therefore the derived triple above is entailed by the rules and facts.
# ----------------------------------------------------------------------

genid:e8540f44-5792-3fe8-84f5-c27731a9e748 ex:email "bob@example.org" .

# ----------------------------------------------------------------------
# Proof for derived triple:
#   <urn:example:order:A200> ex:customer genid:e8540f44-5792-3fe8-84f5-c27731a9e748 .
# It holds because the following instance of the rule body is provable:
#   <urn:example:order:A200> a ex:Order .
#   <urn:example:order:A200> ex:vatIdRaw "null" .
#   <urn:example:order:A200> ex:email "bob@example.org" .
#   "bob@example.org" log:skolem genid:e8540f44-5792-3fe8-84f5-c27731a9e748 .
# via the schematic forward rule:
#   {
#     ?Order a ex:Order .
#     ?Order ex:vatIdRaw "null" .
#     ?Order ex:email ?Email .
#     ?Email log:skolem ?Cust .
#   } => {
#     ?Cust a ex:Customer .
#     ?Cust ex:vatIdRaw "null" .
#     ?Cust ex:email ?Email .
#     ?Order ex:customer ?Cust .
#   } .
# with substitution (on rule variables):
#   ?Cust = genid:e8540f44-5792-3fe8-84f5-c27731a9e748
#   ?Email = "bob@example.org"
#   ?Order = <urn:example:order:A200>
# Therefore the derived triple above is entailed by the rules and facts.
# ----------------------------------------------------------------------

<urn:example:order:A200> ex:customer genid:e8540f44-5792-3fe8-84f5-c27731a9e748 .

# ----------------------------------------------------------------------
# Proof for derived triple:
#   genid:8e2eaee7-90fd-39b8-cf83-6d8c8e5816c8 a ex:Customer .
# It holds because the following instance of the rule body is provable:
#   <urn:example:order:A400> a ex:Order .
#   <urn:example:order:A400> ex:vatIdRaw "null" .
#   <urn:example:order:A400> ex:email "ada@other.example" .
#   "ada@other.example" log:skolem genid:8e2eaee7-90fd-39b8-cf83-6d8c8e5816c8 .
# via the schematic forward rule:
#   {
#     ?Order a ex:Order .
#     ?Order ex:vatIdRaw "null" .
#     ?Order ex:email ?Email .
#     ?Email log:skolem ?Cust .
#   } => {
#     ?Cust a ex:Customer .
#     ?Cust ex:vatIdRaw "null" .
#     ?Cust ex:email ?Email .
#     ?Order ex:customer ?Cust .
#   } .
# with substitution (on rule variables):
#   ?Cust = genid:8e2eaee7-90fd-39b8-cf83-6d8c8e5816c8
#   ?Email = "ada@other.example"
#   ?Order = <urn:example:order:A400>
# Therefore the derived triple above is entailed by the rules and facts.
# ----------------------------------------------------------------------

genid:8e2eaee7-90fd-39b8-cf83-6d8c8e5816c8 a ex:Customer .

# ----------------------------------------------------------------------
# Proof for derived triple:
#   genid:8e2eaee7-90fd-39b8-cf83-6d8c8e5816c8 ex:vatIdRaw "null" .
# It holds because the following instance of the rule body is provable:
#   <urn:example:order:A400> a ex:Order .
#   <urn:example:order:A400> ex:vatIdRaw "null" .
#   <urn:example:order:A400> ex:email "ada@other.example" .
#   "ada@other.example" log:skolem genid:8e2eaee7-90fd-39b8-cf83-6d8c8e5816c8 .
# via the schematic forward rule:
#   {
#     ?Order a ex:Order .
#     ?Order ex:vatIdRaw "null" .
#     ?Order ex:email ?Email .
#     ?Email log:skolem ?Cust .
#   } => {
#     ?Cust a ex:Customer .
#     ?Cust ex:vatIdRaw "null" .
#     ?Cust ex:email ?Email .
#     ?Order ex:customer ?Cust .
#   } .
# with substitution (on rule variables):
#   ?Cust = genid:8e2eaee7-90fd-39b8-cf83-6d8c8e5816c8
#   ?Email = "ada@other.example"
#   ?Order = <urn:example:order:A400>
# Therefore the derived triple above is entailed by the rules and facts.
# ----------------------------------------------------------------------

genid:8e2eaee7-90fd-39b8-cf83-6d8c8e5816c8 ex:vatIdRaw "null" .

# ----------------------------------------------------------------------
# Proof for derived triple:
#   genid:8e2eaee7-90fd-39b8-cf83-6d8c8e5816c8 ex:email "ada@other.example" .
# It holds because the following instance of the rule body is provable:
#   <urn:example:order:A400> a ex:Order .
#   <urn:example:order:A400> ex:vatIdRaw "null" .
#   <urn:example:order:A400> ex:email "ada@other.example" .
#   "ada@other.example" log:skolem genid:8e2eaee7-90fd-39b8-cf83-6d8c8e5816c8 .
# via the schematic forward rule:
#   {
#     ?Order a ex:Order .
#     ?Order ex:vatIdRaw "null" .
#     ?Order ex:email ?Email .
#     ?Email log:skolem ?Cust .
#   } => {
#     ?Cust a ex:Customer .
#     ?Cust ex:vatIdRaw "null" .
#     ?Cust ex:email ?Email .
#     ?Order ex:customer ?Cust .
#   } .
# with substitution (on rule variables):
#   ?Cust = genid:8e2eaee7-90fd-39b8-cf83-6d8c8e5816c8
#   ?Email = "ada@other.example"
#   ?Order = <urn:example:order:A400>
# Therefore the derived triple above is entailed by the rules and facts.
# ----------------------------------------------------------------------

genid:8e2eaee7-90fd-39b8-cf83-6d8c8e5816c8 ex:email "ada@other.example" .

# ----------------------------------------------------------------------
# Proof for derived triple:
#   <urn:example:order:A400> ex:customer genid:8e2eaee7-90fd-39b8-cf83-6d8c8e5816c8 .
# It holds because the following instance of the rule body is provable:
#   <urn:example:order:A400> a ex:Order .
#   <urn:example:order:A400> ex:vatIdRaw "null" .
#   <urn:example:order:A400> ex:email "ada@other.example" .
#   "ada@other.example" log:skolem genid:8e2eaee7-90fd-39b8-cf83-6d8c8e5816c8 .
# via the schematic forward rule:
#   {
#     ?Order a ex:Order .
#     ?Order ex:vatIdRaw "null" .
#     ?Order ex:email ?Email .
#     ?Email log:skolem ?Cust .
#   } => {
#     ?Cust a ex:Customer .
#     ?Cust ex:vatIdRaw "null" .
#     ?Cust ex:email ?Email .
#     ?Order ex:customer ?Cust .
#   } .
# with substitution (on rule variables):
#   ?Cust = genid:8e2eaee7-90fd-39b8-cf83-6d8c8e5816c8
#   ?Email = "ada@other.example"
#   ?Order = <urn:example:order:A400>
# Therefore the derived triple above is entailed by the rules and facts.
# ----------------------------------------------------------------------

<urn:example:order:A400> ex:customer genid:8e2eaee7-90fd-39b8-cf83-6d8c8e5816c8 .

# ----------------------------------------------------------------------
# Proof for derived triple:
#   <urn:example:customer:vat:NL999999999B01> = ex:RegistryNL .
# It holds because the following instance of the rule body is provable:
#   <urn:example:customer:vat:NL999999999B01> a ex:Customer .
#   <urn:example:customer:vat:NL999999999B01> ex:vatKey "NL999999999B01" .
#   ex:RegistryNL ex:vatKey "NL999999999B01" .
# via the schematic forward rule:
#   {
#     ?Cust a ex:Customer .
#     ?Cust ex:vatKey ?VatKey .
#     ?Reg ex:vatKey ?VatKey .
#   } => {
#     ?Cust = ?Reg .
#   } .
# with substitution (on rule variables):
#   ?Cust = <urn:example:customer:vat:NL999999999B01>
#   ?Reg = ex:RegistryNL
#   ?VatKey = "NL999999999B01"
# Therefore the derived triple above is entailed by the rules and facts.
# ----------------------------------------------------------------------

<urn:example:customer:vat:NL999999999B01> = ex:RegistryNL .

# ----------------------------------------------------------------------
# Proof for derived triple:
#   <urn:example:customer:vat:NL999999999B01> = <urn:example:customer:vat:NL999999999B01> .
# It holds because the following instance of the rule body is provable:
#   <urn:example:customer:vat:NL999999999B01> a ex:Customer .
#   <urn:example:customer:vat:NL999999999B01> ex:vatKey "NL999999999B01" .
#   <urn:example:customer:vat:NL999999999B01> ex:vatKey "NL999999999B01" .
# via the schematic forward rule:
#   {
#     ?Cust a ex:Customer .
#     ?Cust ex:vatKey ?VatKey .
#     ?Reg ex:vatKey ?VatKey .
#   } => {
#     ?Cust = ?Reg .
#   } .
# with substitution (on rule variables):
#   ?Cust = <urn:example:customer:vat:NL999999999B01>
#   ?Reg = <urn:example:customer:vat:NL999999999B01>
#   ?VatKey = "NL999999999B01"
# Therefore the derived triple above is entailed by the rules and facts.
# ----------------------------------------------------------------------

<urn:example:customer:vat:NL999999999B01> = <urn:example:customer:vat:NL999999999B01> .

# ----------------------------------------------------------------------
# Proof for derived triple:
#   <urn:example:customer:vat:NL999999999B01> a ex:CustomerEmailConflict .
# It holds because the following instance of the rule body is provable:
#   <urn:example:customer:vat:NL999999999B01> a ex:Customer .
#   <urn:example:customer:vat:NL999999999B01> ex:vatKey "NL999999999B01" .
#   <urn:example:customer:vat:NL999999999B01> ex:email "acct@company.nl" .
#   <urn:example:customer:vat:NL999999999B01> ex:email "billing@company.nl" .
#   "acct@company.nl" string:lessThan "billing@company.nl" .
#   "acct@company.nl" string:notEqualIgnoringCase "billing@company.nl" .
# via the schematic forward rule:
#   {
#     ?Cust a ex:Customer .
#     ?Cust ex:vatKey ?VatKey .
#     ?Cust ex:email ?E1 .
#     ?Cust ex:email ?E2 .
#     ?E1 string:lessThan ?E2 .
#     ?E1 string:notEqualIgnoringCase ?E2 .
#   } => {
#     ?Cust a ex:CustomerEmailConflict .
#     ?Cust ex:conflictingEmail ?E1 .
#     ?Cust ex:conflictingEmail ?E2 .
#   } .
# with substitution (on rule variables):
#   ?Cust = <urn:example:customer:vat:NL999999999B01>
#   ?E1 = "acct@company.nl"
#   ?E2 = "billing@company.nl"
#   ?VatKey = "NL999999999B01"
# Therefore the derived triple above is entailed by the rules and facts.
# ----------------------------------------------------------------------

<urn:example:customer:vat:NL999999999B01> a ex:CustomerEmailConflict .

# ----------------------------------------------------------------------
# Proof for derived triple:
#   <urn:example:customer:vat:NL999999999B01> ex:conflictingEmail "acct@company.nl" .
# It holds because the following instance of the rule body is provable:
#   <urn:example:customer:vat:NL999999999B01> a ex:Customer .
#   <urn:example:customer:vat:NL999999999B01> ex:vatKey "NL999999999B01" .
#   <urn:example:customer:vat:NL999999999B01> ex:email "acct@company.nl" .
#   <urn:example:customer:vat:NL999999999B01> ex:email "billing@company.nl" .
#   "acct@company.nl" string:lessThan "billing@company.nl" .
#   "acct@company.nl" string:notEqualIgnoringCase "billing@company.nl" .
# via the schematic forward rule:
#   {
#     ?Cust a ex:Customer .
#     ?Cust ex:vatKey ?VatKey .
#     ?Cust ex:email ?E1 .
#     ?Cust ex:email ?E2 .
#     ?E1 string:lessThan ?E2 .
#     ?E1 string:notEqualIgnoringCase ?E2 .
#   } => {
#     ?Cust a ex:CustomerEmailConflict .
#     ?Cust ex:conflictingEmail ?E1 .
#     ?Cust ex:conflictingEmail ?E2 .
#   } .
# with substitution (on rule variables):
#   ?Cust = <urn:example:customer:vat:NL999999999B01>
#   ?E1 = "acct@company.nl"
#   ?E2 = "billing@company.nl"
#   ?VatKey = "NL999999999B01"
# Therefore the derived triple above is entailed by the rules and facts.
# ----------------------------------------------------------------------

<urn:example:customer:vat:NL999999999B01> ex:conflictingEmail "acct@company.nl" .

# ----------------------------------------------------------------------
# Proof for derived triple:
#   <urn:example:customer:vat:NL999999999B01> ex:conflictingEmail "billing@company.nl" .
# It holds because the following instance of the rule body is provable:
#   <urn:example:customer:vat:NL999999999B01> a ex:Customer .
#   <urn:example:customer:vat:NL999999999B01> ex:vatKey "NL999999999B01" .
#   <urn:example:customer:vat:NL999999999B01> ex:email "acct@company.nl" .
#   <urn:example:customer:vat:NL999999999B01> ex:email "billing@company.nl" .
#   "acct@company.nl" string:lessThan "billing@company.nl" .
#   "acct@company.nl" string:notEqualIgnoringCase "billing@company.nl" .
# via the schematic forward rule:
#   {
#     ?Cust a ex:Customer .
#     ?Cust ex:vatKey ?VatKey .
#     ?Cust ex:email ?E1 .
#     ?Cust ex:email ?E2 .
#     ?E1 string:lessThan ?E2 .
#     ?E1 string:notEqualIgnoringCase ?E2 .
#   } => {
#     ?Cust a ex:CustomerEmailConflict .
#     ?Cust ex:conflictingEmail ?E1 .
#     ?Cust ex:conflictingEmail ?E2 .
#   } .
# with substitution (on rule variables):
#   ?Cust = <urn:example:customer:vat:NL999999999B01>
#   ?E1 = "acct@company.nl"
#   ?E2 = "billing@company.nl"
#   ?VatKey = "NL999999999B01"
# Therefore the derived triple above is entailed by the rules and facts.
# ----------------------------------------------------------------------

<urn:example:customer:vat:NL999999999B01> ex:conflictingEmail "billing@company.nl" .

# ----------------------------------------------------------------------
# Proof for derived triple:
#   <urn:example:order:A400> ex:line <urn:example:order:A400#line:1> .
# It holds because the following instance of the rule body is provable:
#   ex:feed ex:json """{
#     "meta~data": { "batch": "2025-12-18" },
#     "orders": [
#       {
#         "orderId": "A100",
#         "shipTo": { "country": "BE" },
#         "customer": { "email": "Ada@Example.ORG", "vatId": null },
#         "lines": [
#           { "sku": "wid-001", "qty": 2, "unitCents": 999 },
#           { "sku": "GAD-002", "qty": 1, "unitCents": 1500 }
#         ],
#         "declared": { "netCents": 3498, "vatCents": 509, "grossCents": 4007 }
#       },
#       {
#         "orderId": "A200",
#         "shipTo": { "country": "US" },
#         "customer": { "email": "bob@example.org", "vatId": null },
#         "lines": [
#           { "sku": "WID-001", "qty": 2, "unitCents": 999 },
#           { "sku": "GAD-002", "qty": 1, "unitCents": 1500 }
#         ],
#         "declared": { "netCents": 3498, "vatCents": 0, "grossCents": 3498 }
#       },
#       {
#         "orderId": "A300",
#         "shipTo": { "country": "NL" },
#         "customer": { "email": "acct@company.nl", "vatId": "NL999999999B01" },
#         "lines": [
#           { "sku": "WID-001", "qty": 2, "unitCents": 999 },
#           { "sku": "GAD-002", "qty": 1, "unitCents": 1500 }
#         ],
#         "declared": { "netCents": 3498, "vatCents": 0, "grossCents": 3498 }
#       },
#       {
#         "orderId": "A301",
#         "shipTo": { "country": "NL" },
#         "customer": { "email": "billing@company.nl", "vatId": "NL999999999B01" },
#         "lines": [
#           { "sku": "WID-001", "qty": 2, "unitCents": 999 },
#           { "sku": "GAD-002", "qty": 1, "unitCents": 1500 }
#         ],
#         "declared": { "netCents": 3498, "vatCents": 0, "grossCents": 3498 }
#       },
#       {
#         "orderId": "A400",
#         "shipTo": { "country": "BE" },
#         "customer": { "email": "ada@other.example", "vatId": null },
#         "lines": [
#           { "sku": "WID-001", "qty": 2, "unitCents": 999 },
#           { "sku": "GAD-002", "qty": 1, "unitCents": 1500 }
#         ],
#         "declared": { "netCents": 3498, "vatCents": 508, "grossCents": 4006 }
#       }
#     ]
#   }"""^^rdf:JSON .
#   ("""{
#     "meta~data": { "batch": "2025-12-18" },
#     "orders": [
#       {
#         "orderId": "A100",
#         "shipTo": { "country": "BE" },
#         "customer": { "email": "Ada@Example.ORG", "vatId": null },
#         "lines": [
#           { "sku": "wid-001", "qty": 2, "unitCents": 999 },
#           { "sku": "GAD-002", "qty": 1, "unitCents": 1500 }
#         ],
#         "declared": { "netCents": 3498, "vatCents": 509, "grossCents": 4007 }
#       },
#       {
#         "orderId": "A200",
#         "shipTo": { "country": "US" },
#         "customer": { "email": "bob@example.org", "vatId": null },
#         "lines": [
#           { "sku": "WID-001", "qty": 2, "unitCents": 999 },
#           { "sku": "GAD-002", "qty": 1, "unitCents": 1500 }
#         ],
#         "declared": { "netCents": 3498, "vatCents": 0, "grossCents": 3498 }
#       },
#       {
#         "orderId": "A300",
#         "shipTo": { "country": "NL" },
#         "customer": { "email": "acct@company.nl", "vatId": "NL999999999B01" },
#         "lines": [
#           { "sku": "WID-001", "qty": 2, "unitCents": 999 },
#           { "sku": "GAD-002", "qty": 1, "unitCents": 1500 }
#         ],
#         "declared": { "netCents": 3498, "vatCents": 0, "grossCents": 3498 }
#       },
#       {
#         "orderId": "A301",
#         "shipTo": { "country": "NL" },
#         "customer": { "email": "billing@company.nl", "vatId": "NL999999999B01" },
#         "lines": [
#           { "sku": "WID-001", "qty": 2, "unitCents": 999 },
#           { "sku": "GAD-002", "qty": 1, "unitCents": 1500 }
#         ],
#         "declared": { "netCents": 3498, "vatCents": 0, "grossCents": 3498 }
#       },
#       {
#         "orderId": "A400",
#         "shipTo": { "country": "BE" },
#         "customer": { "email": "ada@other.example", "vatId": null },
#         "lines": [
#           { "sku": "WID-001", "qty": 2, "unitCents": 999 },
#           { "sku": "GAD-002", "qty": 1, "unitCents": 1500 }
#         ],
#         "declared": { "netCents": 3498, "vatCents": 508, "grossCents": 4006 }
#       }
#     ]
#   }"""^^rdf:JSON "/orders") string:jsonPointer ("""{"orderId":"A100","shipTo":{"country":"BE"},"customer":{"email":"Ada@Example.ORG","vatId":null},"lines":[{"sku":"wid-001","qty":2,"unitCents":999},{"sku":"GAD-002","qty":1,"unitCents":1500}],"declared":{"netCents":3498,"vatCents":509,"grossCents":4007}}"""^^rdf:JSON """{"orderId":"A200","shipTo":{"country":"US"},"customer":{"email":"bob@example.org","vatId":null},"lines":[{"sku":"WID-001","qty":2,"unitCents":999},{"sku":"GAD-002","qty":1,"unitCents":1500}],"declared":{"netCents":3498,"vatCents":0,"grossCents":3498}}"""^^rdf:JSON """{"orderId":"A300","shipTo":{"country":"NL"},"customer":{"email":"acct@company.nl","vatId":"NL999999999B01"},"lines":[{"sku":"WID-001","qty":2,"unitCents":999},{"sku":"GAD-002","qty":1,"unitCents":1500}],"declared":{"netCents":3498,"vatCents":0,"grossCents":3498}}"""^^rdf:JSON """{"orderId":"A301","shipTo":{"country":"NL"},"customer":{"email":"billing@company.nl","vatId":"NL999999999B01"},"lines":[{"sku":"WID-001","qty":2,"unitCents":999},{"sku":"GAD-002","qty":1,"unitCents":1500}],"declared":{"netCents":3498,"vatCents":0,"grossCents":3498}}"""^^rdf:JSON """{"orderId":"A400","shipTo":{"country":"BE"},"customer":{"email":"ada@other.example","vatId":null},"lines":[{"sku":"WID-001","qty":2,"unitCents":999},{"sku":"GAD-002","qty":1,"unitCents":1500}],"declared":{"netCents":3498,"vatCents":508,"grossCents":4006}}"""^^rdf:JSON) .
#   ("""{"orderId":"A100","shipTo":{"country":"BE"},"customer":{"email":"Ada@Example.ORG","vatId":null},"lines":[{"sku":"wid-001","qty":2,"unitCents":999},{"sku":"GAD-002","qty":1,"unitCents":1500}],"declared":{"netCents":3498,"vatCents":509,"grossCents":4007}}"""^^rdf:JSON """{"orderId":"A200","shipTo":{"country":"US"},"customer":{"email":"bob@example.org","vatId":null},"lines":[{"sku":"WID-001","qty":2,"unitCents":999},{"sku":"GAD-002","qty":1,"unitCents":1500}],"declared":{"netCents":3498,"vatCents":0,"grossCents":3498}}"""^^rdf:JSON """{"orderId":"A300","shipTo":{"country":"NL"},"customer":{"email":"acct@company.nl","vatId":"NL999999999B01"},"lines":[{"sku":"WID-001","qty":2,"unitCents":999},{"sku":"GAD-002","qty":1,"unitCents":1500}],"declared":{"netCents":3498,"vatCents":0,"grossCents":3498}}"""^^rdf:JSON """{"orderId":"A301","shipTo":{"country":"NL"},"customer":{"email":"billing@company.nl","vatId":"NL999999999B01"},"lines":[{"sku":"WID-001","qty":2,"unitCents":999},{"sku":"GAD-002","qty":1,"unitCents":1500}],"declared":{"netCents":3498,"vatCents":0,"grossCents":3498}}"""^^rdf:JSON """{"orderId":"A400","shipTo":{"country":"BE"},"customer":{"email":"ada@other.example","vatId":null},"lines":[{"sku":"WID-001","qty":2,"unitCents":999},{"sku":"GAD-002","qty":1,"unitCents":1500}],"declared":{"netCents":3498,"vatCents":508,"grossCents":4006}}"""^^rdf:JSON) list:iterate (4 """{"orderId":"A400","shipTo":{"country":"BE"},"customer":{"email":"ada@other.example","vatId":null},"lines":[{"sku":"WID-001","qty":2,"unitCents":999},{"sku":"GAD-002","qty":1,"unitCents":1500}],"declared":{"netCents":3498,"vatCents":508,"grossCents":4006}}"""^^rdf:JSON) .
#   ("""{"orderId":"A400","shipTo":{"country":"BE"},"customer":{"email":"ada@other.example","vatId":null},"lines":[{"sku":"WID-001","qty":2,"unitCents":999},{"sku":"GAD-002","qty":1,"unitCents":1500}],"declared":{"netCents":3498,"vatCents":508,"grossCents":4006}}"""^^rdf:JSON "/orderId") string:jsonPointer "A400" .
#   ("urn:example:order:%s" "A400") string:format "urn:example:order:A400" .
#   <urn:example:order:A400> log:uri "urn:example:order:A400" .
#   ("""{"orderId":"A400","shipTo":{"country":"BE"},"customer":{"email":"ada@other.example","vatId":null},"lines":[{"sku":"WID-001","qty":2,"unitCents":999},{"sku":"GAD-002","qty":1,"unitCents":1500}],"declared":{"netCents":3498,"vatCents":508,"grossCents":4006}}"""^^rdf:JSON "/lines") string:jsonPointer ("""{"sku":"WID-001","qty":2,"unitCents":999}"""^^rdf:JSON """{"sku":"GAD-002","qty":1,"unitCents":1500}"""^^rdf:JSON) .
#   ("""{"sku":"WID-001","qty":2,"unitCents":999}"""^^rdf:JSON """{"sku":"GAD-002","qty":1,"unitCents":1500}"""^^rdf:JSON) list:iterate (1 """{"sku":"GAD-002","qty":1,"unitCents":1500}"""^^rdf:JSON) .
#   ("""{"sku":"GAD-002","qty":1,"unitCents":1500}"""^^rdf:JSON "/sku") string:jsonPointer "GAD-002" .
#   ("""{"sku":"GAD-002","qty":1,"unitCents":1500}"""^^rdf:JSON "/qty") string:jsonPointer 1 .
#   ("""{"sku":"GAD-002","qty":1,"unitCents":1500}"""^^rdf:JSON "/unitCents") string:jsonPointer 1500 .
#   ex:Gadget a ex:Product .
#   ex:Gadget ex:sku "GAD-002" .
#   (1 1500) math:product 1500 .
#   ("urn:example:order:%s#line:%s" "A400" 1) string:format "urn:example:order:A400#line:1" .
#   <urn:example:order:A400#line:1> log:uri "urn:example:order:A400#line:1" .
#   "GAD-002" string:equalIgnoringCase "GAD-002" .
# via the schematic forward rule:
#   {
#     ex:feed ex:json ?J .
#     (?J "/orders") string:jsonPointer ?Orders .
#     ?Orders list:iterate (?OrderIndex ?OrderJson) .
#     (?OrderJson "/orderId") string:jsonPointer ?OrderId .
#     ("urn:example:order:%s" ?OrderId) string:format ?OrderUriStr .
#     ?Order log:uri ?OrderUriStr .
#     (?OrderJson "/lines") string:jsonPointer ?Lines .
#     ?Lines list:iterate (?LineIndex ?LineJson) .
#     (?LineJson "/sku") string:jsonPointer ?SkuJson .
#     (?LineJson "/qty") string:jsonPointer ?Qty .
#     (?LineJson "/unitCents") string:jsonPointer ?UnitCents .
#     ?Product a ex:Product .
#     ?Product ex:sku ?SkuCat .
#     (?Qty ?UnitCents) math:product ?NetCents .
#     ("urn:example:order:%s#line:%s" ?OrderId ?LineIndex) string:format ?LineUriStr .
#     ?Line log:uri ?LineUriStr .
#     ?SkuJson string:equalIgnoringCase ?SkuCat .
#   } => {
#     ?Order ex:line ?Line .
#     ?Line a ex:OrderLine .
#     ?Line ex:lineIndex ?LineIndex .
#     ?Line ex:product ?Product .
#     ?Line ex:sku ?SkuCat .
#     ?Line ex:qty ?Qty .
#     ?Line ex:unitCents ?UnitCents .
#     ?Line ex:netCents ?NetCents .
#   } .
# with substitution (on rule variables):
#   ?J = """{
#     "meta~data": { "batch": "2025-12-18" },
#     "orders": [
#     {
#     "orderId": "A100",
#     "shipTo": { "country": "BE" },
#     "customer": { "email": "Ada@Example.ORG", "vatId": null },
#     "lines": [
#     { "sku": "wid-001", "qty": 2, "unitCents": 999 },
#     { "sku": "GAD-002", "qty": 1, "unitCents": 1500 }
#     ],
#     "declared": { "netCents": 3498, "vatCents": 509, "grossCents": 4007 }
#     },
#     {
#     "orderId": "A200",
#     "shipTo": { "country": "US" },
#     "customer": { "email": "bob@example.org", "vatId": null },
#     "lines": [
#     { "sku": "WID-001", "qty": 2, "unitCents": 999 },
#     { "sku": "GAD-002", "qty": 1, "unitCents": 1500 }
#     ],
#     "declared": { "netCents": 3498, "vatCents": 0, "grossCents": 3498 }
#     },
#     {
#     "orderId": "A300",
#     "shipTo": { "country": "NL" },
#     "customer": { "email": "acct@company.nl", "vatId": "NL999999999B01" },
#     "lines": [
#     { "sku": "WID-001", "qty": 2, "unitCents": 999 },
#     { "sku": "GAD-002", "qty": 1, "unitCents": 1500 }
#     ],
#     "declared": { "netCents": 3498, "vatCents": 0, "grossCents": 3498 }
#     },
#     {
#     "orderId": "A301",
#     "shipTo": { "country": "NL" },
#     "customer": { "email": "billing@company.nl", "vatId": "NL999999999B01" },
#     "lines": [
#     { "sku": "WID-001", "qty": 2, "unitCents": 999 },
#     { "sku": "GAD-002", "qty": 1, "unitCents": 1500 }
#     ],
#     "declared": { "netCents": 3498, "vatCents": 0, "grossCents": 3498 }
#     },
#     {
#     "orderId": "A400",
#     "shipTo": { "country": "BE" },
#     "customer": { "email": "ada@other.example", "vatId": null },
#     "lines": [
#     { "sku": "WID-001", "qty": 2, "unitCents": 999 },
#     { "sku": "GAD-002", "qty": 1, "unitCents": 1500 }
#     ],
#     "declared": { "netCents": 3498, "vatCents": 508, "grossCents": 4006 }
#     }
#     ]
#   }"""^^rdf:JSON
#   ?Line = <urn:example:order:A400#line:1>
#   ?LineIndex = 1
#   ?LineJson = """{"sku":"GAD-002","qty":1,"unitCents":1500}"""^^rdf:JSON
#   ?LineUriStr = "urn:example:order:A400#line:1"
#   ?Lines = ("""{"sku":"WID-001","qty":2,"unitCents":999}"""^^rdf:JSON """{"sku":"GAD-002","qty":1,"unitCents":1500}"""^^rdf:JSON)
#   ?NetCents = 1500
#   ?Order = <urn:example:order:A400>
#   ?OrderId = "A400"
#   ?OrderIndex = 4
#   ?OrderJson = """{"orderId":"A400","shipTo":{"country":"BE"},"customer":{"email":"ada@other.example","vatId":null},"lines":[{"sku":"WID-001","qty":2,"unitCents":999},{"sku":"GAD-002","qty":1,"unitCents":1500}],"declared":{"netCents":3498,"vatCents":508,"grossCents":4006}}"""^^rdf:JSON
#   ?OrderUriStr = "urn:example:order:A400"
#   ?Orders = ("""{"orderId":"A100","shipTo":{"country":"BE"},"customer":{"email":"Ada@Example.ORG","vatId":null},"lines":[{"sku":"wid-001","qty":2,"unitCents":999},{"sku":"GAD-002","qty":1,"unitCents":1500}],"declared":{"netCents":3498,"vatCents":509,"grossCents":4007}}"""^^rdf:JSON """{"orderId":"A200","shipTo":{"country":"US"},"customer":{"email":"bob@example.org","vatId":null},"lines":[{"sku":"WID-001","qty":2,"unitCents":999},{"sku":"GAD-002","qty":1,"unitCents":1500}],"declared":{"netCents":3498,"vatCents":0,"grossCents":3498}}"""^^rdf:JSON """{"orderId":"A300","shipTo":{"country":"NL"},"customer":{"email":"acct@company.nl","vatId":"NL999999999B01"},"lines":[{"sku":"WID-001","qty":2,"unitCents":999},{"sku":"GAD-002","qty":1,"unitCents":1500}],"declared":{"netCents":3498,"vatCents":0,"grossCents":3498}}"""^^rdf:JSON """{"orderId":"A301","shipTo":{"country":"NL"},"customer":{"email":"billing@company.nl","vatId":"NL999999999B01"},"lines":[{"sku":"WID-001","qty":2,"unitCents":999},{"sku":"GAD-002","qty":1,"unitCents":1500}],"declared":{"netCents":3498,"vatCents":0,"grossCents":3498}}"""^^rdf:JSON """{"orderId":"A400","shipTo":{"country":"BE"},"customer":{"email":"ada@other.example","vatId":null},"lines":[{"sku":"WID-001","qty":2,"unitCents":999},{"sku":"GAD-002","qty":1,"unitCents":1500}],"declared":{"netCents":3498,"vatCents":508,"grossCents":4006}}"""^^rdf:JSON)
#   ?Product = ex:Gadget
#   ?Qty = 1
#   ?SkuCat = "GAD-002"
#   ?SkuJson = "GAD-002"
#   ?UnitCents = 1500
# Therefore the derived triple above is entailed by the rules and facts.
# ----------------------------------------------------------------------

<urn:example:order:A400> ex:line <urn:example:order:A400#line:1> .

# ----------------------------------------------------------------------
# Proof for derived triple:
#   <urn:example:order:A400#line:1> a ex:OrderLine .
# It holds because the following instance of the rule body is provable:
#   ex:feed ex:json """{
#     "meta~data": { "batch": "2025-12-18" },
#     "orders": [
#       {
#         "orderId": "A100",
#         "shipTo": { "country": "BE" },
#         "customer": { "email": "Ada@Example.ORG", "vatId": null },
#         "lines": [
#           { "sku": "wid-001", "qty": 2, "unitCents": 999 },
#           { "sku": "GAD-002", "qty": 1, "unitCents": 1500 }
#         ],
#         "declared": { "netCents": 3498, "vatCents": 509, "grossCents": 4007 }
#       },
#       {
#         "orderId": "A200",
#         "shipTo": { "country": "US" },
#         "customer": { "email": "bob@example.org", "vatId": null },
#         "lines": [
#           { "sku": "WID-001", "qty": 2, "unitCents": 999 },
#           { "sku": "GAD-002", "qty": 1, "unitCents": 1500 }
#         ],
#         "declared": { "netCents": 3498, "vatCents": 0, "grossCents": 3498 }
#       },
#       {
#         "orderId": "A300",
#         "shipTo": { "country": "NL" },
#         "customer": { "email": "acct@company.nl", "vatId": "NL999999999B01" },
#         "lines": [
#           { "sku": "WID-001", "qty": 2, "unitCents": 999 },
#           { "sku": "GAD-002", "qty": 1, "unitCents": 1500 }
#         ],
#         "declared": { "netCents": 3498, "vatCents": 0, "grossCents": 3498 }
#       },
#       {
#         "orderId": "A301",
#         "shipTo": { "country": "NL" },
#         "customer": { "email": "billing@company.nl", "vatId": "NL999999999B01" },
#         "lines": [
#           { "sku": "WID-001", "qty": 2, "unitCents": 999 },
#           { "sku": "GAD-002", "qty": 1, "unitCents": 1500 }
#         ],
#         "declared": { "netCents": 3498, "vatCents": 0, "grossCents": 3498 }
#       },
#       {
#         "orderId": "A400",
#         "shipTo": { "country": "BE" },
#         "customer": { "email": "ada@other.example", "vatId": null },
#         "lines": [
#           { "sku": "WID-001", "qty": 2, "unitCents": 999 },
#           { "sku": "GAD-002", "qty": 1, "unitCents": 1500 }
#         ],
#         "declared": { "netCents": 3498, "vatCents": 508, "grossCents": 4006 }
#       }
#     ]
#   }"""^^rdf:JSON .
#   ("""{
#     "meta~data": { "batch": "2025-12-18" },
#     "orders": [
#       {
#         "orderId": "A100",
#         "shipTo": { "country": "BE" },
#         "customer": { "email": "Ada@Example.ORG", "vatId": null },
#         "lines": [
#           { "sku": "wid-001", "qty": 2, "unitCents": 999 },
#           { "sku": "GAD-002", "qty": 1, "unitCents": 1500 }
#         ],
#         "declared": { "netCents": 3498, "vatCents": 509, "grossCents": 4007 }
#       },
#       {
#         "orderId": "A200",
#         "shipTo": { "country": "US" },
#         "customer": { "email": "bob@example.org", "vatId": null },
#         "lines": [
#           { "sku": "WID-001", "qty": 2, "unitCents": 999 },
#           { "sku": "GAD-002", "qty": 1, "unitCents": 1500 }
#         ],
#         "declared": { "netCents": 3498, "vatCents": 0, "grossCents": 3498 }
#       },
#       {
#         "orderId": "A300",
#         "shipTo": { "country": "NL" },
#         "customer": { "email": "acct@company.nl", "vatId": "NL999999999B01" },
#         "lines": [
#           { "sku": "WID-001", "qty": 2, "unitCents": 999 },
#           { "sku": "GAD-002", "qty": 1, "unitCents": 1500 }
#         ],
#         "declared": { "netCents": 3498, "vatCents": 0, "grossCents": 3498 }
#       },
#       {
#         "orderId": "A301",
#         "shipTo": { "country": "NL" },
#         "customer": { "email": "billing@company.nl", "vatId": "NL999999999B01" },
#         "lines": [
#           { "sku": "WID-001", "qty": 2, "unitCents": 999 },
#           { "sku": "GAD-002", "qty": 1, "unitCents": 1500 }
#         ],
#         "declared": { "netCents": 3498, "vatCents": 0, "grossCents": 3498 }
#       },
#       {
#         "orderId": "A400",
#         "shipTo": { "country": "BE" },
#         "customer": { "email": "ada@other.example", "vatId": null },
#         "lines": [
#           { "sku": "WID-001", "qty": 2, "unitCents": 999 },
#           { "sku": "GAD-002", "qty": 1, "unitCents": 1500 }
#         ],
#         "declared": { "netCents": 3498, "vatCents": 508, "grossCents": 4006 }
#       }
#     ]
#   }"""^^rdf:JSON "/orders") string:jsonPointer ("""{"orderId":"A100","shipTo":{"country":"BE"},"customer":{"email":"Ada@Example.ORG","vatId":null},"lines":[{"sku":"wid-001","qty":2,"unitCents":999},{"sku":"GAD-002","qty":1,"unitCents":1500}],"declared":{"netCents":3498,"vatCents":509,"grossCents":4007}}"""^^rdf:JSON """{"orderId":"A200","shipTo":{"country":"US"},"customer":{"email":"bob@example.org","vatId":null},"lines":[{"sku":"WID-001","qty":2,"unitCents":999},{"sku":"GAD-002","qty":1,"unitCents":1500}],"declared":{"netCents":3498,"vatCents":0,"grossCents":3498}}"""^^rdf:JSON """{"orderId":"A300","shipTo":{"country":"NL"},"customer":{"email":"acct@company.nl","vatId":"NL999999999B01"},"lines":[{"sku":"WID-001","qty":2,"unitCents":999},{"sku":"GAD-002","qty":1,"unitCents":1500}],"declared":{"netCents":3498,"vatCents":0,"grossCents":3498}}"""^^rdf:JSON """{"orderId":"A301","shipTo":{"country":"NL"},"customer":{"email":"billing@company.nl","vatId":"NL999999999B01"},"lines":[{"sku":"WID-001","qty":2,"unitCents":999},{"sku":"GAD-002","qty":1,"unitCents":1500}],"declared":{"netCents":3498,"vatCents":0,"grossCents":3498}}"""^^rdf:JSON """{"orderId":"A400","shipTo":{"country":"BE"},"customer":{"email":"ada@other.example","vatId":null},"lines":[{"sku":"WID-001","qty":2,"unitCents":999},{"sku":"GAD-002","qty":1,"unitCents":1500}],"declared":{"netCents":3498,"vatCents":508,"grossCents":4006}}"""^^rdf:JSON) .
#   ("""{"orderId":"A100","shipTo":{"country":"BE"},"customer":{"email":"Ada@Example.ORG","vatId":null},"lines":[{"sku":"wid-001","qty":2,"unitCents":999},{"sku":"GAD-002","qty":1,"unitCents":1500}],"declared":{"netCents":3498,"vatCents":509,"grossCents":4007}}"""^^rdf:JSON """{"orderId":"A200","shipTo":{"country":"US"},"customer":{"email":"bob@example.org","vatId":null},"lines":[{"sku":"WID-001","qty":2,"unitCents":999},{"sku":"GAD-002","qty":1,"unitCents":1500}],"declared":{"netCents":3498,"vatCents":0,"grossCents":3498}}"""^^rdf:JSON """{"orderId":"A300","shipTo":{"country":"NL"},"customer":{"email":"acct@company.nl","vatId":"NL999999999B01"},"lines":[{"sku":"WID-001","qty":2,"unitCents":999},{"sku":"GAD-002","qty":1,"unitCents":1500}],"declared":{"netCents":3498,"vatCents":0,"grossCents":3498}}"""^^rdf:JSON """{"orderId":"A301","shipTo":{"country":"NL"},"customer":{"email":"billing@company.nl","vatId":"NL999999999B01"},"lines":[{"sku":"WID-001","qty":2,"unitCents":999},{"sku":"GAD-002","qty":1,"unitCents":1500}],"declared":{"netCents":3498,"vatCents":0,"grossCents":3498}}"""^^rdf:JSON """{"orderId":"A400","shipTo":{"country":"BE"},"customer":{"email":"ada@other.example","vatId":null},"lines":[{"sku":"WID-001","qty":2,"unitCents":999},{"sku":"GAD-002","qty":1,"unitCents":1500}],"declared":{"netCents":3498,"vatCents":508,"grossCents":4006}}"""^^rdf:JSON) list:iterate (4 """{"orderId":"A400","shipTo":{"country":"BE"},"customer":{"email":"ada@other.example","vatId":null},"lines":[{"sku":"WID-001","qty":2,"unitCents":999},{"sku":"GAD-002","qty":1,"unitCents":1500}],"declared":{"netCents":3498,"vatCents":508,"grossCents":4006}}"""^^rdf:JSON) .
#   ("""{"orderId":"A400","shipTo":{"country":"BE"},"customer":{"email":"ada@other.example","vatId":null},"lines":[{"sku":"WID-001","qty":2,"unitCents":999},{"sku":"GAD-002","qty":1,"unitCents":1500}],"declared":{"netCents":3498,"vatCents":508,"grossCents":4006}}"""^^rdf:JSON "/orderId") string:jsonPointer "A400" .
#   ("urn:example:order:%s" "A400") string:format "urn:example:order:A400" .
#   <urn:example:order:A400> log:uri "urn:example:order:A400" .
#   ("""{"orderId":"A400","shipTo":{"country":"BE"},"customer":{"email":"ada@other.example","vatId":null},"lines":[{"sku":"WID-001","qty":2,"unitCents":999},{"sku":"GAD-002","qty":1,"unitCents":1500}],"declared":{"netCents":3498,"vatCents":508,"grossCents":4006}}"""^^rdf:JSON "/lines") string:jsonPointer ("""{"sku":"WID-001","qty":2,"unitCents":999}"""^^rdf:JSON """{"sku":"GAD-002","qty":1,"unitCents":1500}"""^^rdf:JSON) .
#   ("""{"sku":"WID-001","qty":2,"unitCents":999}"""^^rdf:JSON """{"sku":"GAD-002","qty":1,"unitCents":1500}"""^^rdf:JSON) list:iterate (1 """{"sku":"GAD-002","qty":1,"unitCents":1500}"""^^rdf:JSON) .
#   ("""{"sku":"GAD-002","qty":1,"unitCents":1500}"""^^rdf:JSON "/sku") string:jsonPointer "GAD-002" .
#   ("""{"sku":"GAD-002","qty":1,"unitCents":1500}"""^^rdf:JSON "/qty") string:jsonPointer 1 .
#   ("""{"sku":"GAD-002","qty":1,"unitCents":1500}"""^^rdf:JSON "/unitCents") string:jsonPointer 1500 .
#   ex:Gadget a ex:Product .
#   ex:Gadget ex:sku "GAD-002" .
#   (1 1500) math:product 1500 .
#   ("urn:example:order:%s#line:%s" "A400" 1) string:format "urn:example:order:A400#line:1" .
#   <urn:example:order:A400#line:1> log:uri "urn:example:order:A400#line:1" .
#   "GAD-002" string:equalIgnoringCase "GAD-002" .
# via the schematic forward rule:
#   {
#     ex:feed ex:json ?J .
#     (?J "/orders") string:jsonPointer ?Orders .
#     ?Orders list:iterate (?OrderIndex ?OrderJson) .
#     (?OrderJson "/orderId") string:jsonPointer ?OrderId .
#     ("urn:example:order:%s" ?OrderId) string:format ?OrderUriStr .
#     ?Order log:uri ?OrderUriStr .
#     (?OrderJson "/lines") string:jsonPointer ?Lines .
#     ?Lines list:iterate (?LineIndex ?LineJson) .
#     (?LineJson "/sku") string:jsonPointer ?SkuJson .
#     (?LineJson "/qty") string:jsonPointer ?Qty .
#     (?LineJson "/unitCents") string:jsonPointer ?UnitCents .
#     ?Product a ex:Product .
#     ?Product ex:sku ?SkuCat .
#     (?Qty ?UnitCents) math:product ?NetCents .
#     ("urn:example:order:%s#line:%s" ?OrderId ?LineIndex) string:format ?LineUriStr .
#     ?Line log:uri ?LineUriStr .
#     ?SkuJson string:equalIgnoringCase ?SkuCat .
#   } => {
#     ?Order ex:line ?Line .
#     ?Line a ex:OrderLine .
#     ?Line ex:lineIndex ?LineIndex .
#     ?Line ex:product ?Product .
#     ?Line ex:sku ?SkuCat .
#     ?Line ex:qty ?Qty .
#     ?Line ex:unitCents ?UnitCents .
#     ?Line ex:netCents ?NetCents .
#   } .
# with substitution (on rule variables):
#   ?J = """{
#     "meta~data": { "batch": "2025-12-18" },
#     "orders": [
#     {
#     "orderId": "A100",
#     "shipTo": { "country": "BE" },
#     "customer": { "email": "Ada@Example.ORG", "vatId": null },
#     "lines": [
#     { "sku": "wid-001", "qty": 2, "unitCents": 999 },
#     { "sku": "GAD-002", "qty": 1, "unitCents": 1500 }
#     ],
#     "declared": { "netCents": 3498, "vatCents": 509, "grossCents": 4007 }
#     },
#     {
#     "orderId": "A200",
#     "shipTo": { "country": "US" },
#     "customer": { "email": "bob@example.org", "vatId": null },
#     "lines": [
#     { "sku": "WID-001", "qty": 2, "unitCents": 999 },
#     { "sku": "GAD-002", "qty": 1, "unitCents": 1500 }
#     ],
#     "declared": { "netCents": 3498, "vatCents": 0, "grossCents": 3498 }
#     },
#     {
#     "orderId": "A300",
#     "shipTo": { "country": "NL" },
#     "customer": { "email": "acct@company.nl", "vatId": "NL999999999B01" },
#     "lines": [
#     { "sku": "WID-001", "qty": 2, "unitCents": 999 },
#     { "sku": "GAD-002", "qty": 1, "unitCents": 1500 }
#     ],
#     "declared": { "netCents": 3498, "vatCents": 0, "grossCents": 3498 }
#     },
#     {
#     "orderId": "A301",
#     "shipTo": { "country": "NL" },
#     "customer": { "email": "billing@company.nl", "vatId": "NL999999999B01" },
#     "lines": [
#     { "sku": "WID-001", "qty": 2, "unitCents": 999 },
#     { "sku": "GAD-002", "qty": 1, "unitCents": 1500 }
#     ],
#     "declared": { "netCents": 3498, "vatCents": 0, "grossCents": 3498 }
#     },
#     {
#     "orderId": "A400",
#     "shipTo": { "country": "BE" },
#     "customer": { "email": "ada@other.example", "vatId": null },
#     "lines": [
#     { "sku": "WID-001", "qty": 2, "unitCents": 999 },
#     { "sku": "GAD-002", "qty": 1, "unitCents": 1500 }
#     ],
#     "declared": { "netCents": 3498, "vatCents": 508, "grossCents": 4006 }
#     }
#     ]
#   }"""^^rdf:JSON
#   ?Line = <urn:example:order:A400#line:1>
#   ?LineIndex = 1
#   ?LineJson = """{"sku":"GAD-002","qty":1,"unitCents":1500}"""^^rdf:JSON
#   ?LineUriStr = "urn:example:order:A400#line:1"
#   ?Lines = ("""{"sku":"WID-001","qty":2,"unitCents":999}"""^^rdf:JSON """{"sku":"GAD-002","qty":1,"unitCents":1500}"""^^rdf:JSON)
#   ?NetCents = 1500
#   ?Order = <urn:example:order:A400>
#   ?OrderId = "A400"
#   ?OrderIndex = 4
#   ?OrderJson = """{"orderId":"A400","shipTo":{"country":"BE"},"customer":{"email":"ada@other.example","vatId":null},"lines":[{"sku":"WID-001","qty":2,"unitCents":999},{"sku":"GAD-002","qty":1,"unitCents":1500}],"declared":{"netCents":3498,"vatCents":508,"grossCents":4006}}"""^^rdf:JSON
#   ?OrderUriStr = "urn:example:order:A400"
#   ?Orders = ("""{"orderId":"A100","shipTo":{"country":"BE"},"customer":{"email":"Ada@Example.ORG","vatId":null},"lines":[{"sku":"wid-001","qty":2,"unitCents":999},{"sku":"GAD-002","qty":1,"unitCents":1500}],"declared":{"netCents":3498,"vatCents":509,"grossCents":4007}}"""^^rdf:JSON """{"orderId":"A200","shipTo":{"country":"US"},"customer":{"email":"bob@example.org","vatId":null},"lines":[{"sku":"WID-001","qty":2,"unitCents":999},{"sku":"GAD-002","qty":1,"unitCents":1500}],"declared":{"netCents":3498,"vatCents":0,"grossCents":3498}}"""^^rdf:JSON """{"orderId":"A300","shipTo":{"country":"NL"},"customer":{"email":"acct@company.nl","vatId":"NL999999999B01"},"lines":[{"sku":"WID-001","qty":2,"unitCents":999},{"sku":"GAD-002","qty":1,"unitCents":1500}],"declared":{"netCents":3498,"vatCents":0,"grossCents":3498}}"""^^rdf:JSON """{"orderId":"A301","shipTo":{"country":"NL"},"customer":{"email":"billing@company.nl","vatId":"NL999999999B01"},"lines":[{"sku":"WID-001","qty":2,"unitCents":999},{"sku":"GAD-002","qty":1,"unitCents":1500}],"declared":{"netCents":3498,"vatCents":0,"grossCents":3498}}"""^^rdf:JSON """{"orderId":"A400","shipTo":{"country":"BE"},"customer":{"email":"ada@other.example","vatId":null},"lines":[{"sku":"WID-001","qty":2,"unitCents":999},{"sku":"GAD-002","qty":1,"unitCents":1500}],"declared":{"netCents":3498,"vatCents":508,"grossCents":4006}}"""^^rdf:JSON)
#   ?Product = ex:Gadget
#   ?Qty = 1
#   ?SkuCat = "GAD-002"
#   ?SkuJson = "GAD-002"
#   ?UnitCents = 1500
# Therefore the derived triple above is entailed by the rules and facts.
# ----------------------------------------------------------------------

<urn:example:order:A400#line:1> a ex:OrderLine .

# ----------------------------------------------------------------------
# Proof for derived triple:
#   <urn:example:order:A400#line:1> ex:lineIndex 1 .
# It holds because the following instance of the rule body is provable:
#   ex:feed ex:json """{
#     "meta~data": { "batch": "2025-12-18" },
#     "orders": [
#       {
#         "orderId": "A100",
#         "shipTo": { "country": "BE" },
#         "customer": { "email": "Ada@Example.ORG", "vatId": null },
#         "lines": [
#           { "sku": "wid-001", "qty": 2, "unitCents": 999 },
#           { "sku": "GAD-002", "qty": 1, "unitCents": 1500 }
#         ],
#         "declared": { "netCents": 3498, "vatCents": 509, "grossCents": 4007 }
#       },
#       {
#         "orderId": "A200",
#         "shipTo": { "country": "US" },
#         "customer": { "email": "bob@example.org", "vatId": null },
#         "lines": [
#           { "sku": "WID-001", "qty": 2, "unitCents": 999 },
#           { "sku": "GAD-002", "qty": 1, "unitCents": 1500 }
#         ],
#         "declared": { "netCents": 3498, "vatCents": 0, "grossCents": 3498 }
#       },
#       {
#         "orderId": "A300",
#         "shipTo": { "country": "NL" },
#         "customer": { "email": "acct@company.nl", "vatId": "NL999999999B01" },
#         "lines": [
#           { "sku": "WID-001", "qty": 2, "unitCents": 999 },
#           { "sku": "GAD-002", "qty": 1, "unitCents": 1500 }
#         ],
#         "declared": { "netCents": 3498, "vatCents": 0, "grossCents": 3498 }
#       },
#       {
#         "orderId": "A301",
#         "shipTo": { "country": "NL" },
#         "customer": { "email": "billing@company.nl", "vatId": "NL999999999B01" },
#         "lines": [
#           { "sku": "WID-001", "qty": 2, "unitCents": 999 },
#           { "sku": "GAD-002", "qty": 1, "unitCents": 1500 }
#         ],
#         "declared": { "netCents": 3498, "vatCents": 0, "grossCents": 3498 }
#       },
#       {
#         "orderId": "A400",
#         "shipTo": { "country": "BE" },
#         "customer": { "email": "ada@other.example", "vatId": null },
#         "lines": [
#           { "sku": "WID-001", "qty": 2, "unitCents": 999 },
#           { "sku": "GAD-002", "qty": 1, "unitCents": 1500 }
#         ],
#         "declared": { "netCents": 3498, "vatCents": 508, "grossCents": 4006 }
#       }
#     ]
#   }"""^^rdf:JSON .
#   ("""{
#     "meta~data": { "batch": "2025-12-18" },
#     "orders": [
#       {
#         "orderId": "A100",
#         "shipTo": { "country": "BE" },
#         "customer": { "email": "Ada@Example.ORG", "vatId": null },
#         "lines": [
#           { "sku": "wid-001", "qty": 2, "unitCents": 999 },
#           { "sku": "GAD-002", "qty": 1, "unitCents": 1500 }
#         ],
#         "declared": { "netCents": 3498, "vatCents": 509, "grossCents": 4007 }
#       },
#       {
#         "orderId": "A200",
#         "shipTo": { "country": "US" },
#         "customer": { "email": "bob@example.org", "vatId": null },
#         "lines": [
#           { "sku": "WID-001", "qty": 2, "unitCents": 999 },
#           { "sku": "GAD-002", "qty": 1, "unitCents": 1500 }
#         ],
#         "declared": { "netCents": 3498, "vatCents": 0, "grossCents": 3498 }
#       },
#       {
#         "orderId": "A300",
#         "shipTo": { "country": "NL" },
#         "customer": { "email": "acct@company.nl", "vatId": "NL999999999B01" },
#         "lines": [
#           { "sku": "WID-001", "qty": 2, "unitCents": 999 },
#           { "sku": "GAD-002", "qty": 1, "unitCents": 1500 }
#         ],
#         "declared": { "netCents": 3498, "vatCents": 0, "grossCents": 3498 }
#       },
#       {
#         "orderId": "A301",
#         "shipTo": { "country": "NL" },
#         "customer": { "email": "billing@company.nl", "vatId": "NL999999999B01" },
#         "lines": [
#           { "sku": "WID-001", "qty": 2, "unitCents": 999 },
#           { "sku": "GAD-002", "qty": 1, "unitCents": 1500 }
#         ],
#         "declared": { "netCents": 3498, "vatCents": 0, "grossCents": 3498 }
#       },
#       {
#         "orderId": "A400",
#         "shipTo": { "country": "BE" },
#         "customer": { "email": "ada@other.example", "vatId": null },
#         "lines": [
#           { "sku": "WID-001", "qty": 2, "unitCents": 999 },
#           { "sku": "GAD-002", "qty": 1, "unitCents": 1500 }
#         ],
#         "declared": { "netCents": 3498, "vatCents": 508, "grossCents": 4006 }
#       }
#     ]
#   }"""^^rdf:JSON "/orders") string:jsonPointer ("""{"orderId":"A100","shipTo":{"country":"BE"},"customer":{"email":"Ada@Example.ORG","vatId":null},"lines":[{"sku":"wid-001","qty":2,"unitCents":999},{"sku":"GAD-002","qty":1,"unitCents":1500}],"declared":{"netCents":3498,"vatCents":509,"grossCents":4007}}"""^^rdf:JSON """{"orderId":"A200","shipTo":{"country":"US"},"customer":{"email":"bob@example.org","vatId":null},"lines":[{"sku":"WID-001","qty":2,"unitCents":999},{"sku":"GAD-002","qty":1,"unitCents":1500}],"declared":{"netCents":3498,"vatCents":0,"grossCents":3498}}"""^^rdf:JSON """{"orderId":"A300","shipTo":{"country":"NL"},"customer":{"email":"acct@company.nl","vatId":"NL999999999B01"},"lines":[{"sku":"WID-001","qty":2,"unitCents":999},{"sku":"GAD-002","qty":1,"unitCents":1500}],"declared":{"netCents":3498,"vatCents":0,"grossCents":3498}}"""^^rdf:JSON """{"orderId":"A301","shipTo":{"country":"NL"},"customer":{"email":"billing@company.nl","vatId":"NL999999999B01"},"lines":[{"sku":"WID-001","qty":2,"unitCents":999},{"sku":"GAD-002","qty":1,"unitCents":1500}],"declared":{"netCents":3498,"vatCents":0,"grossCents":3498}}"""^^rdf:JSON """{"orderId":"A400","shipTo":{"country":"BE"},"customer":{"email":"ada@other.example","vatId":null},"lines":[{"sku":"WID-001","qty":2,"unitCents":999},{"sku":"GAD-002","qty":1,"unitCents":1500}],"declared":{"netCents":3498,"vatCents":508,"grossCents":4006}}"""^^rdf:JSON) .
#   ("""{"orderId":"A100","shipTo":{"country":"BE"},"customer":{"email":"Ada@Example.ORG","vatId":null},"lines":[{"sku":"wid-001","qty":2,"unitCents":999},{"sku":"GAD-002","qty":1,"unitCents":1500}],"declared":{"netCents":3498,"vatCents":509,"grossCents":4007}}"""^^rdf:JSON """{"orderId":"A200","shipTo":{"country":"US"},"customer":{"email":"bob@example.org","vatId":null},"lines":[{"sku":"WID-001","qty":2,"unitCents":999},{"sku":"GAD-002","qty":1,"unitCents":1500}],"declared":{"netCents":3498,"vatCents":0,"grossCents":3498}}"""^^rdf:JSON """{"orderId":"A300","shipTo":{"country":"NL"},"customer":{"email":"acct@company.nl","vatId":"NL999999999B01"},"lines":[{"sku":"WID-001","qty":2,"unitCents":999},{"sku":"GAD-002","qty":1,"unitCents":1500}],"declared":{"netCents":3498,"vatCents":0,"grossCents":3498}}"""^^rdf:JSON """{"orderId":"A301","shipTo":{"country":"NL"},"customer":{"email":"billing@company.nl","vatId":"NL999999999B01"},"lines":[{"sku":"WID-001","qty":2,"unitCents":999},{"sku":"GAD-002","qty":1,"unitCents":1500}],"declared":{"netCents":3498,"vatCents":0,"grossCents":3498}}"""^^rdf:JSON """{"orderId":"A400","shipTo":{"country":"BE"},"customer":{"email":"ada@other.example","vatId":null},"lines":[{"sku":"WID-001","qty":2,"unitCents":999},{"sku":"GAD-002","qty":1,"unitCents":1500}],"declared":{"netCents":3498,"vatCents":508,"grossCents":4006}}"""^^rdf:JSON) list:iterate (4 """{"orderId":"A400","shipTo":{"country":"BE"},"customer":{"email":"ada@other.example","vatId":null},"lines":[{"sku":"WID-001","qty":2,"unitCents":999},{"sku":"GAD-002","qty":1,"unitCents":1500}],"declared":{"netCents":3498,"vatCents":508,"grossCents":4006}}"""^^rdf:JSON) .
#   ("""{"orderId":"A400","shipTo":{"country":"BE"},"customer":{"email":"ada@other.example","vatId":null},"lines":[{"sku":"WID-001","qty":2,"unitCents":999},{"sku":"GAD-002","qty":1,"unitCents":1500}],"declared":{"netCents":3498,"vatCents":508,"grossCents":4006}}"""^^rdf:JSON "/orderId") string:jsonPointer "A400" .
#   ("urn:example:order:%s" "A400") string:format "urn:example:order:A400" .
#   <urn:example:order:A400> log:uri "urn:example:order:A400" .
#   ("""{"orderId":"A400","shipTo":{"country":"BE"},"customer":{"email":"ada@other.example","vatId":null},"lines":[{"sku":"WID-001","qty":2,"unitCents":999},{"sku":"GAD-002","qty":1,"unitCents":1500}],"declared":{"netCents":3498,"vatCents":508,"grossCents":4006}}"""^^rdf:JSON "/lines") string:jsonPointer ("""{"sku":"WID-001","qty":2,"unitCents":999}"""^^rdf:JSON """{"sku":"GAD-002","qty":1,"unitCents":1500}"""^^rdf:JSON) .
#   ("""{"sku":"WID-001","qty":2,"unitCents":999}"""^^rdf:JSON """{"sku":"GAD-002","qty":1,"unitCents":1500}"""^^rdf:JSON) list:iterate (1 """{"sku":"GAD-002","qty":1,"unitCents":1500}"""^^rdf:JSON) .
#   ("""{"sku":"GAD-002","qty":1,"unitCents":1500}"""^^rdf:JSON "/sku") string:jsonPointer "GAD-002" .
#   ("""{"sku":"GAD-002","qty":1,"unitCents":1500}"""^^rdf:JSON "/qty") string:jsonPointer 1 .
#   ("""{"sku":"GAD-002","qty":1,"unitCents":1500}"""^^rdf:JSON "/unitCents") string:jsonPointer 1500 .
#   ex:Gadget a ex:Product .
#   ex:Gadget ex:sku "GAD-002" .
#   (1 1500) math:product 1500 .
#   ("urn:example:order:%s#line:%s" "A400" 1) string:format "urn:example:order:A400#line:1" .
#   <urn:example:order:A400#line:1> log:uri "urn:example:order:A400#line:1" .
#   "GAD-002" string:equalIgnoringCase "GAD-002" .
# via the schematic forward rule:
#   {
#     ex:feed ex:json ?J .
#     (?J "/orders") string:jsonPointer ?Orders .
#     ?Orders list:iterate (?OrderIndex ?OrderJson) .
#     (?OrderJson "/orderId") string:jsonPointer ?OrderId .
#     ("urn:example:order:%s" ?OrderId) string:format ?OrderUriStr .
#     ?Order log:uri ?OrderUriStr .
#     (?OrderJson "/lines") string:jsonPointer ?Lines .
#     ?Lines list:iterate (?LineIndex ?LineJson) .
#     (?LineJson "/sku") string:jsonPointer ?SkuJson .
#     (?LineJson "/qty") string:jsonPointer ?Qty .
#     (?LineJson "/unitCents") string:jsonPointer ?UnitCents .
#     ?Product a ex:Product .
#     ?Product ex:sku ?SkuCat .
#     (?Qty ?UnitCents) math:product ?NetCents .
#     ("urn:example:order:%s#line:%s" ?OrderId ?LineIndex) string:format ?LineUriStr .
#     ?Line log:uri ?LineUriStr .
#     ?SkuJson string:equalIgnoringCase ?SkuCat .
#   } => {
#     ?Order ex:line ?Line .
#     ?Line a ex:OrderLine .
#     ?Line ex:lineIndex ?LineIndex .
#     ?Line ex:product ?Product .
#     ?Line ex:sku ?SkuCat .
#     ?Line ex:qty ?Qty .
#     ?Line ex:unitCents ?UnitCents .
#     ?Line ex:netCents ?NetCents .
#   } .
# with substitution (on rule variables):
#   ?J = """{
#     "meta~data": { "batch": "2025-12-18" },
#     "orders": [
#     {
#     "orderId": "A100",
#     "shipTo": { "country": "BE" },
#     "customer": { "email": "Ada@Example.ORG", "vatId": null },
#     "lines": [
#     { "sku": "wid-001", "qty": 2, "unitCents": 999 },
#     { "sku": "GAD-002", "qty": 1, "unitCents": 1500 }
#     ],
#     "declared": { "netCents": 3498, "vatCents": 509, "grossCents": 4007 }
#     },
#     {
#     "orderId": "A200",
#     "shipTo": { "country": "US" },
#     "customer": { "email": "bob@example.org", "vatId": null },
#     "lines": [
#     { "sku": "WID-001", "qty": 2, "unitCents": 999 },
#     { "sku": "GAD-002", "qty": 1, "unitCents": 1500 }
#     ],
#     "declared": { "netCents": 3498, "vatCents": 0, "grossCents": 3498 }
#     },
#     {
#     "orderId": "A300",
#     "shipTo": { "country": "NL" },
#     "customer": { "email": "acct@company.nl", "vatId": "NL999999999B01" },
#     "lines": [
#     { "sku": "WID-001", "qty": 2, "unitCents": 999 },
#     { "sku": "GAD-002", "qty": 1, "unitCents": 1500 }
#     ],
#     "declared": { "netCents": 3498, "vatCents": 0, "grossCents": 3498 }
#     },
#     {
#     "orderId": "A301",
#     "shipTo": { "country": "NL" },
#     "customer": { "email": "billing@company.nl", "vatId": "NL999999999B01" },
#     "lines": [
#     { "sku": "WID-001", "qty": 2, "unitCents": 999 },
#     { "sku": "GAD-002", "qty": 1, "unitCents": 1500 }
#     ],
#     "declared": { "netCents": 3498, "vatCents": 0, "grossCents": 3498 }
#     },
#     {
#     "orderId": "A400",
#     "shipTo": { "country": "BE" },
#     "customer": { "email": "ada@other.example", "vatId": null },
#     "lines": [
#     { "sku": "WID-001", "qty": 2, "unitCents": 999 },
#     { "sku": "GAD-002", "qty": 1, "unitCents": 1500 }
#     ],
#     "declared": { "netCents": 3498, "vatCents": 508, "grossCents": 4006 }
#     }
#     ]
#   }"""^^rdf:JSON
#   ?Line = <urn:example:order:A400#line:1>
#   ?LineIndex = 1
#   ?LineJson = """{"sku":"GAD-002","qty":1,"unitCents":1500}"""^^rdf:JSON
#   ?LineUriStr = "urn:example:order:A400#line:1"
#   ?Lines = ("""{"sku":"WID-001","qty":2,"unitCents":999}"""^^rdf:JSON """{"sku":"GAD-002","qty":1,"unitCents":1500}"""^^rdf:JSON)
#   ?NetCents = 1500
#   ?Order = <urn:example:order:A400>
#   ?OrderId = "A400"
#   ?OrderIndex = 4
#   ?OrderJson = """{"orderId":"A400","shipTo":{"country":"BE"},"customer":{"email":"ada@other.example","vatId":null},"lines":[{"sku":"WID-001","qty":2,"unitCents":999},{"sku":"GAD-002","qty":1,"unitCents":1500}],"declared":{"netCents":3498,"vatCents":508,"grossCents":4006}}"""^^rdf:JSON
#   ?OrderUriStr = "urn:example:order:A400"
#   ?Orders = ("""{"orderId":"A100","shipTo":{"country":"BE"},"customer":{"email":"Ada@Example.ORG","vatId":null},"lines":[{"sku":"wid-001","qty":2,"unitCents":999},{"sku":"GAD-002","qty":1,"unitCents":1500}],"declared":{"netCents":3498,"vatCents":509,"grossCents":4007}}"""^^rdf:JSON """{"orderId":"A200","shipTo":{"country":"US"},"customer":{"email":"bob@example.org","vatId":null},"lines":[{"sku":"WID-001","qty":2,"unitCents":999},{"sku":"GAD-002","qty":1,"unitCents":1500}],"declared":{"netCents":3498,"vatCents":0,"grossCents":3498}}"""^^rdf:JSON """{"orderId":"A300","shipTo":{"country":"NL"},"customer":{"email":"acct@company.nl","vatId":"NL999999999B01"},"lines":[{"sku":"WID-001","qty":2,"unitCents":999},{"sku":"GAD-002","qty":1,"unitCents":1500}],"declared":{"netCents":3498,"vatCents":0,"grossCents":3498}}"""^^rdf:JSON """{"orderId":"A301","shipTo":{"country":"NL"},"customer":{"email":"billing@company.nl","vatId":"NL999999999B01"},"lines":[{"sku":"WID-001","qty":2,"unitCents":999},{"sku":"GAD-002","qty":1,"unitCents":1500}],"declared":{"netCents":3498,"vatCents":0,"grossCents":3498}}"""^^rdf:JSON """{"orderId":"A400","shipTo":{"country":"BE"},"customer":{"email":"ada@other.example","vatId":null},"lines":[{"sku":"WID-001","qty":2,"unitCents":999},{"sku":"GAD-002","qty":1,"unitCents":1500}],"declared":{"netCents":3498,"vatCents":508,"grossCents":4006}}"""^^rdf:JSON)
#   ?Product = ex:Gadget
#   ?Qty = 1
#   ?SkuCat = "GAD-002"
#   ?SkuJson = "GAD-002"
#   ?UnitCents = 1500
# Therefore the derived triple above is entailed by the rules and facts.
# ----------------------------------------------------------------------

<urn:example:order:A400#line:1> ex:lineIndex 1 .

# ----------------------------------------------------------------------
# Proof for derived triple:
#   <urn:example:order:A400#line:1> ex:product ex:Gadget .
# It holds because the following instance of the rule body is provable:
#   ex:feed ex:json """{
#     "meta~data": { "batch": "2025-12-18" },
#     "orders": [
#       {
#         "orderId": "A100",
#         "shipTo": { "country": "BE" },
#         "customer": { "email": "Ada@Example.ORG", "vatId": null },
#         "lines": [
#           { "sku": "wid-001", "qty": 2, "unitCents": 999 },
#           { "sku": "GAD-002", "qty": 1, "unitCents": 1500 }
#         ],
#         "declared": { "netCents": 3498, "vatCents": 509, "grossCents": 4007 }
#       },
#       {
#         "orderId": "A200",
#         "shipTo": { "country": "US" },
#         "customer": { "email": "bob@example.org", "vatId": null },
#         "lines": [
#           { "sku": "WID-001", "qty": 2, "unitCents": 999 },
#           { "sku": "GAD-002", "qty": 1, "unitCents": 1500 }
#         ],
#         "declared": { "netCents": 3498, "vatCents": 0, "grossCents": 3498 }
#       },
#       {
#         "orderId": "A300",
#         "shipTo": { "country": "NL" },
#         "customer": { "email": "acct@company.nl", "vatId": "NL999999999B01" },
#         "lines": [
#           { "sku": "WID-001", "qty": 2, "unitCents": 999 },
#           { "sku": "GAD-002", "qty": 1, "unitCents": 1500 }
#         ],
#         "declared": { "netCents": 3498, "vatCents": 0, "grossCents": 3498 }
#       },
#       {
#         "orderId": "A301",
#         "shipTo": { "country": "NL" },
#         "customer": { "email": "billing@company.nl", "vatId": "NL999999999B01" },
#         "lines": [
#           { "sku": "WID-001", "qty": 2, "unitCents": 999 },
#           { "sku": "GAD-002", "qty": 1, "unitCents": 1500 }
#         ],
#         "declared": { "netCents": 3498, "vatCents": 0, "grossCents": 3498 }
#       },
#       {
#         "orderId": "A400",
#         "shipTo": { "country": "BE" },
#         "customer": { "email": "ada@other.example", "vatId": null },
#         "lines": [
#           { "sku": "WID-001", "qty": 2, "unitCents": 999 },
#           { "sku": "GAD-002", "qty": 1, "unitCents": 1500 }
#         ],
#         "declared": { "netCents": 3498, "vatCents": 508, "grossCents": 4006 }
#       }
#     ]
#   }"""^^rdf:JSON .
#   ("""{
#     "meta~data": { "batch": "2025-12-18" },
#     "orders": [
#       {
#         "orderId": "A100",
#         "shipTo": { "country": "BE" },
#         "customer": { "email": "Ada@Example.ORG", "vatId": null },
#         "lines": [
#           { "sku": "wid-001", "qty": 2, "unitCents": 999 },
#           { "sku": "GAD-002", "qty": 1, "unitCents": 1500 }
#         ],
#         "declared": { "netCents": 3498, "vatCents": 509, "grossCents": 4007 }
#       },
#       {
#         "orderId": "A200",
#         "shipTo": { "country": "US" },
#         "customer": { "email": "bob@example.org", "vatId": null },
#         "lines": [
#           { "sku": "WID-001", "qty": 2, "unitCents": 999 },
#           { "sku": "GAD-002", "qty": 1, "unitCents": 1500 }
#         ],
#         "declared": { "netCents": 3498, "vatCents": 0, "grossCents": 3498 }
#       },
#       {
#         "orderId": "A300",
#         "shipTo": { "country": "NL" },
#         "customer": { "email": "acct@company.nl", "vatId": "NL999999999B01" },
#         "lines": [
#           { "sku": "WID-001", "qty": 2, "unitCents": 999 },
#           { "sku": "GAD-002", "qty": 1, "unitCents": 1500 }
#         ],
#         "declared": { "netCents": 3498, "vatCents": 0, "grossCents": 3498 }
#       },
#       {
#         "orderId": "A301",
#         "shipTo": { "country": "NL" },
#         "customer": { "email": "billing@company.nl", "vatId": "NL999999999B01" },
#         "lines": [
#           { "sku": "WID-001", "qty": 2, "unitCents": 999 },
#           { "sku": "GAD-002", "qty": 1, "unitCents": 1500 }
#         ],
#         "declared": { "netCents": 3498, "vatCents": 0, "grossCents": 3498 }
#       },
#       {
#         "orderId": "A400",
#         "shipTo": { "country": "BE" },
#         "customer": { "email": "ada@other.example", "vatId": null },
#         "lines": [
#           { "sku": "WID-001", "qty": 2, "unitCents": 999 },
#           { "sku": "GAD-002", "qty": 1, "unitCents": 1500 }
#         ],
#         "declared": { "netCents": 3498, "vatCents": 508, "grossCents": 4006 }
#       }
#     ]
#   }"""^^rdf:JSON "/orders") string:jsonPointer ("""{"orderId":"A100","shipTo":{"country":"BE"},"customer":{"email":"Ada@Example.ORG","vatId":null},"lines":[{"sku":"wid-001","qty":2,"unitCents":999},{"sku":"GAD-002","qty":1,"unitCents":1500}],"declared":{"netCents":3498,"vatCents":509,"grossCents":4007}}"""^^rdf:JSON """{"orderId":"A200","shipTo":{"country":"US"},"customer":{"email":"bob@example.org","vatId":null},"lines":[{"sku":"WID-001","qty":2,"unitCents":999},{"sku":"GAD-002","qty":1,"unitCents":1500}],"declared":{"netCents":3498,"vatCents":0,"grossCents":3498}}"""^^rdf:JSON """{"orderId":"A300","shipTo":{"country":"NL"},"customer":{"email":"acct@company.nl","vatId":"NL999999999B01"},"lines":[{"sku":"WID-001","qty":2,"unitCents":999},{"sku":"GAD-002","qty":1,"unitCents":1500}],"declared":{"netCents":3498,"vatCents":0,"grossCents":3498}}"""^^rdf:JSON """{"orderId":"A301","shipTo":{"country":"NL"},"customer":{"email":"billing@company.nl","vatId":"NL999999999B01"},"lines":[{"sku":"WID-001","qty":2,"unitCents":999},{"sku":"GAD-002","qty":1,"unitCents":1500}],"declared":{"netCents":3498,"vatCents":0,"grossCents":3498}}"""^^rdf:JSON """{"orderId":"A400","shipTo":{"country":"BE"},"customer":{"email":"ada@other.example","vatId":null},"lines":[{"sku":"WID-001","qty":2,"unitCents":999},{"sku":"GAD-002","qty":1,"unitCents":1500}],"declared":{"netCents":3498,"vatCents":508,"grossCents":4006}}"""^^rdf:JSON) .
#   ("""{"orderId":"A100","shipTo":{"country":"BE"},"customer":{"email":"Ada@Example.ORG","vatId":null},"lines":[{"sku":"wid-001","qty":2,"unitCents":999},{"sku":"GAD-002","qty":1,"unitCents":1500}],"declared":{"netCents":3498,"vatCents":509,"grossCents":4007}}"""^^rdf:JSON """{"orderId":"A200","shipTo":{"country":"US"},"customer":{"email":"bob@example.org","vatId":null},"lines":[{"sku":"WID-001","qty":2,"unitCents":999},{"sku":"GAD-002","qty":1,"unitCents":1500}],"declared":{"netCents":3498,"vatCents":0,"grossCents":3498}}"""^^rdf:JSON """{"orderId":"A300","shipTo":{"country":"NL"},"customer":{"email":"acct@company.nl","vatId":"NL999999999B01"},"lines":[{"sku":"WID-001","qty":2,"unitCents":999},{"sku":"GAD-002","qty":1,"unitCents":1500}],"declared":{"netCents":3498,"vatCents":0,"grossCents":3498}}"""^^rdf:JSON """{"orderId":"A301","shipTo":{"country":"NL"},"customer":{"email":"billing@company.nl","vatId":"NL999999999B01"},"lines":[{"sku":"WID-001","qty":2,"unitCents":999},{"sku":"GAD-002","qty":1,"unitCents":1500}],"declared":{"netCents":3498,"vatCents":0,"grossCents":3498}}"""^^rdf:JSON """{"orderId":"A400","shipTo":{"country":"BE"},"customer":{"email":"ada@other.example","vatId":null},"lines":[{"sku":"WID-001","qty":2,"unitCents":999},{"sku":"GAD-002","qty":1,"unitCents":1500}],"declared":{"netCents":3498,"vatCents":508,"grossCents":4006}}"""^^rdf:JSON) list:iterate (4 """{"orderId":"A400","shipTo":{"country":"BE"},"customer":{"email":"ada@other.example","vatId":null},"lines":[{"sku":"WID-001","qty":2,"unitCents":999},{"sku":"GAD-002","qty":1,"unitCents":1500}],"declared":{"netCents":3498,"vatCents":508,"grossCents":4006}}"""^^rdf:JSON) .
#   ("""{"orderId":"A400","shipTo":{"country":"BE"},"customer":{"email":"ada@other.example","vatId":null},"lines":[{"sku":"WID-001","qty":2,"unitCents":999},{"sku":"GAD-002","qty":1,"unitCents":1500}],"declared":{"netCents":3498,"vatCents":508,"grossCents":4006}}"""^^rdf:JSON "/orderId") string:jsonPointer "A400" .
#   ("urn:example:order:%s" "A400") string:format "urn:example:order:A400" .
#   <urn:example:order:A400> log:uri "urn:example:order:A400" .
#   ("""{"orderId":"A400","shipTo":{"country":"BE"},"customer":{"email":"ada@other.example","vatId":null},"lines":[{"sku":"WID-001","qty":2,"unitCents":999},{"sku":"GAD-002","qty":1,"unitCents":1500}],"declared":{"netCents":3498,"vatCents":508,"grossCents":4006}}"""^^rdf:JSON "/lines") string:jsonPointer ("""{"sku":"WID-001","qty":2,"unitCents":999}"""^^rdf:JSON """{"sku":"GAD-002","qty":1,"unitCents":1500}"""^^rdf:JSON) .
#   ("""{"sku":"WID-001","qty":2,"unitCents":999}"""^^rdf:JSON """{"sku":"GAD-002","qty":1,"unitCents":1500}"""^^rdf:JSON) list:iterate (1 """{"sku":"GAD-002","qty":1,"unitCents":1500}"""^^rdf:JSON) .
#   ("""{"sku":"GAD-002","qty":1,"unitCents":1500}"""^^rdf:JSON "/sku") string:jsonPointer "GAD-002" .
#   ("""{"sku":"GAD-002","qty":1,"unitCents":1500}"""^^rdf:JSON "/qty") string:jsonPointer 1 .
#   ("""{"sku":"GAD-002","qty":1,"unitCents":1500}"""^^rdf:JSON "/unitCents") string:jsonPointer 1500 .
#   ex:Gadget a ex:Product .
#   ex:Gadget ex:sku "GAD-002" .
#   (1 1500) math:product 1500 .
#   ("urn:example:order:%s#line:%s" "A400" 1) string:format "urn:example:order:A400#line:1" .
#   <urn:example:order:A400#line:1> log:uri "urn:example:order:A400#line:1" .
#   "GAD-002" string:equalIgnoringCase "GAD-002" .
# via the schematic forward rule:
#   {
#     ex:feed ex:json ?J .
#     (?J "/orders") string:jsonPointer ?Orders .
#     ?Orders list:iterate (?OrderIndex ?OrderJson) .
#     (?OrderJson "/orderId") string:jsonPointer ?OrderId .
#     ("urn:example:order:%s" ?OrderId) string:format ?OrderUriStr .
#     ?Order log:uri ?OrderUriStr .
#     (?OrderJson "/lines") string:jsonPointer ?Lines .
#     ?Lines list:iterate (?LineIndex ?LineJson) .
#     (?LineJson "/sku") string:jsonPointer ?SkuJson .
#     (?LineJson "/qty") string:jsonPointer ?Qty .
#     (?LineJson "/unitCents") string:jsonPointer ?UnitCents .
#     ?Product a ex:Product .
#     ?Product ex:sku ?SkuCat .
#     (?Qty ?UnitCents) math:product ?NetCents .
#     ("urn:example:order:%s#line:%s" ?OrderId ?LineIndex) string:format ?LineUriStr .
#     ?Line log:uri ?LineUriStr .
#     ?SkuJson string:equalIgnoringCase ?SkuCat .
#   } => {
#     ?Order ex:line ?Line .
#     ?Line a ex:OrderLine .
#     ?Line ex:lineIndex ?LineIndex .
#     ?Line ex:product ?Product .
#     ?Line ex:sku ?SkuCat .
#     ?Line ex:qty ?Qty .
#     ?Line ex:unitCents ?UnitCents .
#     ?Line ex:netCents ?NetCents .
#   } .
# with substitution (on rule variables):
#   ?J = """{
#     "meta~data": { "batch": "2025-12-18" },
#     "orders": [
#     {
#     "orderId": "A100",
#     "shipTo": { "country": "BE" },
#     "customer": { "email": "Ada@Example.ORG", "vatId": null },
#     "lines": [
#     { "sku": "wid-001", "qty": 2, "unitCents": 999 },
#     { "sku": "GAD-002", "qty": 1, "unitCents": 1500 }
#     ],
#     "declared": { "netCents": 3498, "vatCents": 509, "grossCents": 4007 }
#     },
#     {
#     "orderId": "A200",
#     "shipTo": { "country": "US" },
#     "customer": { "email": "bob@example.org", "vatId": null },
#     "lines": [
#     { "sku": "WID-001", "qty": 2, "unitCents": 999 },
#     { "sku": "GAD-002", "qty": 1, "unitCents": 1500 }
#     ],
#     "declared": { "netCents": 3498, "vatCents": 0, "grossCents": 3498 }
#     },
#     {
#     "orderId": "A300",
#     "shipTo": { "country": "NL" },
#     "customer": { "email": "acct@company.nl", "vatId": "NL999999999B01" },
#     "lines": [
#     { "sku": "WID-001", "qty": 2, "unitCents": 999 },
#     { "sku": "GAD-002", "qty": 1, "unitCents": 1500 }
#     ],
#     "declared": { "netCents": 3498, "vatCents": 0, "grossCents": 3498 }
#     },
#     {
#     "orderId": "A301",
#     "shipTo": { "country": "NL" },
#     "customer": { "email": "billing@company.nl", "vatId": "NL999999999B01" },
#     "lines": [
#     { "sku": "WID-001", "qty": 2, "unitCents": 999 },
#     { "sku": "GAD-002", "qty": 1, "unitCents": 1500 }
#     ],
#     "declared": { "netCents": 3498, "vatCents": 0, "grossCents": 3498 }
#     },
#     {
#     "orderId": "A400",
#     "shipTo": { "country": "BE" },
#     "customer": { "email": "ada@other.example", "vatId": null },
#     "lines": [
#     { "sku": "WID-001", "qty": 2, "unitCents": 999 },
#     { "sku": "GAD-002", "qty": 1, "unitCents": 1500 }
#     ],
#     "declared": { "netCents": 3498, "vatCents": 508, "grossCents": 4006 }
#     }
#     ]
#   }"""^^rdf:JSON
#   ?Line = <urn:example:order:A400#line:1>
#   ?LineIndex = 1
#   ?LineJson = """{"sku":"GAD-002","qty":1,"unitCents":1500}"""^^rdf:JSON
#   ?LineUriStr = "urn:example:order:A400#line:1"
#   ?Lines = ("""{"sku":"WID-001","qty":2,"unitCents":999}"""^^rdf:JSON """{"sku":"GAD-002","qty":1,"unitCents":1500}"""^^rdf:JSON)
#   ?NetCents = 1500
#   ?Order = <urn:example:order:A400>
#   ?OrderId = "A400"
#   ?OrderIndex = 4
#   ?OrderJson = """{"orderId":"A400","shipTo":{"country":"BE"},"customer":{"email":"ada@other.example","vatId":null},"lines":[{"sku":"WID-001","qty":2,"unitCents":999},{"sku":"GAD-002","qty":1,"unitCents":1500}],"declared":{"netCents":3498,"vatCents":508,"grossCents":4006}}"""^^rdf:JSON
#   ?OrderUriStr = "urn:example:order:A400"
#   ?Orders = ("""{"orderId":"A100","shipTo":{"country":"BE"},"customer":{"email":"Ada@Example.ORG","vatId":null},"lines":[{"sku":"wid-001","qty":2,"unitCents":999},{"sku":"GAD-002","qty":1,"unitCents":1500}],"declared":{"netCents":3498,"vatCents":509,"grossCents":4007}}"""^^rdf:JSON """{"orderId":"A200","shipTo":{"country":"US"},"customer":{"email":"bob@example.org","vatId":null},"lines":[{"sku":"WID-001","qty":2,"unitCents":999},{"sku":"GAD-002","qty":1,"unitCents":1500}],"declared":{"netCents":3498,"vatCents":0,"grossCents":3498}}"""^^rdf:JSON """{"orderId":"A300","shipTo":{"country":"NL"},"customer":{"email":"acct@company.nl","vatId":"NL999999999B01"},"lines":[{"sku":"WID-001","qty":2,"unitCents":999},{"sku":"GAD-002","qty":1,"unitCents":1500}],"declared":{"netCents":3498,"vatCents":0,"grossCents":3498}}"""^^rdf:JSON """{"orderId":"A301","shipTo":{"country":"NL"},"customer":{"email":"billing@company.nl","vatId":"NL999999999B01"},"lines":[{"sku":"WID-001","qty":2,"unitCents":999},{"sku":"GAD-002","qty":1,"unitCents":1500}],"declared":{"netCents":3498,"vatCents":0,"grossCents":3498}}"""^^rdf:JSON """{"orderId":"A400","shipTo":{"country":"BE"},"customer":{"email":"ada@other.example","vatId":null},"lines":[{"sku":"WID-001","qty":2,"unitCents":999},{"sku":"GAD-002","qty":1,"unitCents":1500}],"declared":{"netCents":3498,"vatCents":508,"grossCents":4006}}"""^^rdf:JSON)
#   ?Product = ex:Gadget
#   ?Qty = 1
#   ?SkuCat = "GAD-002"
#   ?SkuJson = "GAD-002"
#   ?UnitCents = 1500
# Therefore the derived triple above is entailed by the rules and facts.
# ----------------------------------------------------------------------

<urn:example:order:A400#line:1> ex:product ex:Gadget .

# ----------------------------------------------------------------------
# Proof for derived triple:
#   <urn:example:order:A400#line:1> ex:sku "GAD-002" .
# It holds because the following instance of the rule body is provable:
#   ex:feed ex:json """{
#     "meta~data": { "batch": "2025-12-18" },
#     "orders": [
#       {
#         "orderId": "A100",
#         "shipTo": { "country": "BE" },
#         "customer": { "email": "Ada@Example.ORG", "vatId": null },
#         "lines": [
#           { "sku": "wid-001", "qty": 2, "unitCents": 999 },
#           { "sku": "GAD-002", "qty": 1, "unitCents": 1500 }
#         ],
#         "declared": { "netCents": 3498, "vatCents": 509, "grossCents": 4007 }
#       },
#       {
#         "orderId": "A200",
#         "shipTo": { "country": "US" },
#         "customer": { "email": "bob@example.org", "vatId": null },
#         "lines": [
#           { "sku": "WID-001", "qty": 2, "unitCents": 999 },
#           { "sku": "GAD-002", "qty": 1, "unitCents": 1500 }
#         ],
#         "declared": { "netCents": 3498, "vatCents": 0, "grossCents": 3498 }
#       },
#       {
#         "orderId": "A300",
#         "shipTo": { "country": "NL" },
#         "customer": { "email": "acct@company.nl", "vatId": "NL999999999B01" },
#         "lines": [
#           { "sku": "WID-001", "qty": 2, "unitCents": 999 },
#           { "sku": "GAD-002", "qty": 1, "unitCents": 1500 }
#         ],
#         "declared": { "netCents": 3498, "vatCents": 0, "grossCents": 3498 }
#       },
#       {
#         "orderId": "A301",
#         "shipTo": { "country": "NL" },
#         "customer": { "email": "billing@company.nl", "vatId": "NL999999999B01" },
#         "lines": [
#           { "sku": "WID-001", "qty": 2, "unitCents": 999 },
#           { "sku": "GAD-002", "qty": 1, "unitCents": 1500 }
#         ],
#         "declared": { "netCents": 3498, "vatCents": 0, "grossCents": 3498 }
#       },
#       {
#         "orderId": "A400",
#         "shipTo": { "country": "BE" },
#         "customer": { "email": "ada@other.example", "vatId": null },
#         "lines": [
#           { "sku": "WID-001", "qty": 2, "unitCents": 999 },
#           { "sku": "GAD-002", "qty": 1, "unitCents": 1500 }
#         ],
#         "declared": { "netCents": 3498, "vatCents": 508, "grossCents": 4006 }
#       }
#     ]
#   }"""^^rdf:JSON .
#   ("""{
#     "meta~data": { "batch": "2025-12-18" },
#     "orders": [
#       {
#         "orderId": "A100",
#         "shipTo": { "country": "BE" },
#         "customer": { "email": "Ada@Example.ORG", "vatId": null },
#         "lines": [
#           { "sku": "wid-001", "qty": 2, "unitCents": 999 },
#           { "sku": "GAD-002", "qty": 1, "unitCents": 1500 }
#         ],
#         "declared": { "netCents": 3498, "vatCents": 509, "grossCents": 4007 }
#       },
#       {
#         "orderId": "A200",
#         "shipTo": { "country": "US" },
#         "customer": { "email": "bob@example.org", "vatId": null },
#         "lines": [
#           { "sku": "WID-001", "qty": 2, "unitCents": 999 },
#           { "sku": "GAD-002", "qty": 1, "unitCents": 1500 }
#         ],
#         "declared": { "netCents": 3498, "vatCents": 0, "grossCents": 3498 }
#       },
#       {
#         "orderId": "A300",
#         "shipTo": { "country": "NL" },
#         "customer": { "email": "acct@company.nl", "vatId": "NL999999999B01" },
#         "lines": [
#           { "sku": "WID-001", "qty": 2, "unitCents": 999 },
#           { "sku": "GAD-002", "qty": 1, "unitCents": 1500 }
#         ],
#         "declared": { "netCents": 3498, "vatCents": 0, "grossCents": 3498 }
#       },
#       {
#         "orderId": "A301",
#         "shipTo": { "country": "NL" },
#         "customer": { "email": "billing@company.nl", "vatId": "NL999999999B01" },
#         "lines": [
#           { "sku": "WID-001", "qty": 2, "unitCents": 999 },
#           { "sku": "GAD-002", "qty": 1, "unitCents": 1500 }
#         ],
#         "declared": { "netCents": 3498, "vatCents": 0, "grossCents": 3498 }
#       },
#       {
#         "orderId": "A400",
#         "shipTo": { "country": "BE" },
#         "customer": { "email": "ada@other.example", "vatId": null },
#         "lines": [
#           { "sku": "WID-001", "qty": 2, "unitCents": 999 },
#           { "sku": "GAD-002", "qty": 1, "unitCents": 1500 }
#         ],
#         "declared": { "netCents": 3498, "vatCents": 508, "grossCents": 4006 }
#       }
#     ]
#   }"""^^rdf:JSON "/orders") string:jsonPointer ("""{"orderId":"A100","shipTo":{"country":"BE"},"customer":{"email":"Ada@Example.ORG","vatId":null},"lines":[{"sku":"wid-001","qty":2,"unitCents":999},{"sku":"GAD-002","qty":1,"unitCents":1500}],"declared":{"netCents":3498,"vatCents":509,"grossCents":4007}}"""^^rdf:JSON """{"orderId":"A200","shipTo":{"country":"US"},"customer":{"email":"bob@example.org","vatId":null},"lines":[{"sku":"WID-001","qty":2,"unitCents":999},{"sku":"GAD-002","qty":1,"unitCents":1500}],"declared":{"netCents":3498,"vatCents":0,"grossCents":3498}}"""^^rdf:JSON """{"orderId":"A300","shipTo":{"country":"NL"},"customer":{"email":"acct@company.nl","vatId":"NL999999999B01"},"lines":[{"sku":"WID-001","qty":2,"unitCents":999},{"sku":"GAD-002","qty":1,"unitCents":1500}],"declared":{"netCents":3498,"vatCents":0,"grossCents":3498}}"""^^rdf:JSON """{"orderId":"A301","shipTo":{"country":"NL"},"customer":{"email":"billing@company.nl","vatId":"NL999999999B01"},"lines":[{"sku":"WID-001","qty":2,"unitCents":999},{"sku":"GAD-002","qty":1,"unitCents":1500}],"declared":{"netCents":3498,"vatCents":0,"grossCents":3498}}"""^^rdf:JSON """{"orderId":"A400","shipTo":{"country":"BE"},"customer":{"email":"ada@other.example","vatId":null},"lines":[{"sku":"WID-001","qty":2,"unitCents":999},{"sku":"GAD-002","qty":1,"unitCents":1500}],"declared":{"netCents":3498,"vatCents":508,"grossCents":4006}}"""^^rdf:JSON) .
#   ("""{"orderId":"A100","shipTo":{"country":"BE"},"customer":{"email":"Ada@Example.ORG","vatId":null},"lines":[{"sku":"wid-001","qty":2,"unitCents":999},{"sku":"GAD-002","qty":1,"unitCents":1500}],"declared":{"netCents":3498,"vatCents":509,"grossCents":4007}}"""^^rdf:JSON """{"orderId":"A200","shipTo":{"country":"US"},"customer":{"email":"bob@example.org","vatId":null},"lines":[{"sku":"WID-001","qty":2,"unitCents":999},{"sku":"GAD-002","qty":1,"unitCents":1500}],"declared":{"netCents":3498,"vatCents":0,"grossCents":3498}}"""^^rdf:JSON """{"orderId":"A300","shipTo":{"country":"NL"},"customer":{"email":"acct@company.nl","vatId":"NL999999999B01"},"lines":[{"sku":"WID-001","qty":2,"unitCents":999},{"sku":"GAD-002","qty":1,"unitCents":1500}],"declared":{"netCents":3498,"vatCents":0,"grossCents":3498}}"""^^rdf:JSON """{"orderId":"A301","shipTo":{"country":"NL"},"customer":{"email":"billing@company.nl","vatId":"NL999999999B01"},"lines":[{"sku":"WID-001","qty":2,"unitCents":999},{"sku":"GAD-002","qty":1,"unitCents":1500}],"declared":{"netCents":3498,"vatCents":0,"grossCents":3498}}"""^^rdf:JSON """{"orderId":"A400","shipTo":{"country":"BE"},"customer":{"email":"ada@other.example","vatId":null},"lines":[{"sku":"WID-001","qty":2,"unitCents":999},{"sku":"GAD-002","qty":1,"unitCents":1500}],"declared":{"netCents":3498,"vatCents":508,"grossCents":4006}}"""^^rdf:JSON) list:iterate (4 """{"orderId":"A400","shipTo":{"country":"BE"},"customer":{"email":"ada@other.example","vatId":null},"lines":[{"sku":"WID-001","qty":2,"unitCents":999},{"sku":"GAD-002","qty":1,"unitCents":1500}],"declared":{"netCents":3498,"vatCents":508,"grossCents":4006}}"""^^rdf:JSON) .
#   ("""{"orderId":"A400","shipTo":{"country":"BE"},"customer":{"email":"ada@other.example","vatId":null},"lines":[{"sku":"WID-001","qty":2,"unitCents":999},{"sku":"GAD-002","qty":1,"unitCents":1500}],"declared":{"netCents":3498,"vatCents":508,"grossCents":4006}}"""^^rdf:JSON "/orderId") string:jsonPointer "A400" .
#   ("urn:example:order:%s" "A400") string:format "urn:example:order:A400" .
#   <urn:example:order:A400> log:uri "urn:example:order:A400" .
#   ("""{"orderId":"A400","shipTo":{"country":"BE"},"customer":{"email":"ada@other.example","vatId":null},"lines":[{"sku":"WID-001","qty":2,"unitCents":999},{"sku":"GAD-002","qty":1,"unitCents":1500}],"declared":{"netCents":3498,"vatCents":508,"grossCents":4006}}"""^^rdf:JSON "/lines") string:jsonPointer ("""{"sku":"WID-001","qty":2,"unitCents":999}"""^^rdf:JSON """{"sku":"GAD-002","qty":1,"unitCents":1500}"""^^rdf:JSON) .
#   ("""{"sku":"WID-001","qty":2,"unitCents":999}"""^^rdf:JSON """{"sku":"GAD-002","qty":1,"unitCents":1500}"""^^rdf:JSON) list:iterate (1 """{"sku":"GAD-002","qty":1,"unitCents":1500}"""^^rdf:JSON) .
#   ("""{"sku":"GAD-002","qty":1,"unitCents":1500}"""^^rdf:JSON "/sku") string:jsonPointer "GAD-002" .
#   ("""{"sku":"GAD-002","qty":1,"unitCents":1500}"""^^rdf:JSON "/qty") string:jsonPointer 1 .
#   ("""{"sku":"GAD-002","qty":1,"unitCents":1500}"""^^rdf:JSON "/unitCents") string:jsonPointer 1500 .
#   ex:Gadget a ex:Product .
#   ex:Gadget ex:sku "GAD-002" .
#   (1 1500) math:product 1500 .
#   ("urn:example:order:%s#line:%s" "A400" 1) string:format "urn:example:order:A400#line:1" .
#   <urn:example:order:A400#line:1> log:uri "urn:example:order:A400#line:1" .
#   "GAD-002" string:equalIgnoringCase "GAD-002" .
# via the schematic forward rule:
#   {
#     ex:feed ex:json ?J .
#     (?J "/orders") string:jsonPointer ?Orders .
#     ?Orders list:iterate (?OrderIndex ?OrderJson) .
#     (?OrderJson "/orderId") string:jsonPointer ?OrderId .
#     ("urn:example:order:%s" ?OrderId) string:format ?OrderUriStr .
#     ?Order log:uri ?OrderUriStr .
#     (?OrderJson "/lines") string:jsonPointer ?Lines .
#     ?Lines list:iterate (?LineIndex ?LineJson) .
#     (?LineJson "/sku") string:jsonPointer ?SkuJson .
#     (?LineJson "/qty") string:jsonPointer ?Qty .
#     (?LineJson "/unitCents") string:jsonPointer ?UnitCents .
#     ?Product a ex:Product .
#     ?Product ex:sku ?SkuCat .
#     (?Qty ?UnitCents) math:product ?NetCents .
#     ("urn:example:order:%s#line:%s" ?OrderId ?LineIndex) string:format ?LineUriStr .
#     ?Line log:uri ?LineUriStr .
#     ?SkuJson string:equalIgnoringCase ?SkuCat .
#   } => {
#     ?Order ex:line ?Line .
#     ?Line a ex:OrderLine .
#     ?Line ex:lineIndex ?LineIndex .
#     ?Line ex:product ?Product .
#     ?Line ex:sku ?SkuCat .
#     ?Line ex:qty ?Qty .
#     ?Line ex:unitCents ?UnitCents .
#     ?Line ex:netCents ?NetCents .
#   } .
# with substitution (on rule variables):
#   ?J = """{
#     "meta~data": { "batch": "2025-12-18" },
#     "orders": [
#     {
#     "orderId": "A100",
#     "shipTo": { "country": "BE" },
#     "customer": { "email": "Ada@Example.ORG", "vatId": null },
#     "lines": [
#     { "sku": "wid-001", "qty": 2, "unitCents": 999 },
#     { "sku": "GAD-002", "qty": 1, "unitCents": 1500 }
#     ],
#     "declared": { "netCents": 3498, "vatCents": 509, "grossCents": 4007 }
#     },
#     {
#     "orderId": "A200",
#     "shipTo": { "country": "US" },
#     "customer": { "email": "bob@example.org", "vatId": null },
#     "lines": [
#     { "sku": "WID-001", "qty": 2, "unitCents": 999 },
#     { "sku": "GAD-002", "qty": 1, "unitCents": 1500 }
#     ],
#     "declared": { "netCents": 3498, "vatCents": 0, "grossCents": 3498 }
#     },
#     {
#     "orderId": "A300",
#     "shipTo": { "country": "NL" },
#     "customer": { "email": "acct@company.nl", "vatId": "NL999999999B01" },
#     "lines": [
#     { "sku": "WID-001", "qty": 2, "unitCents": 999 },
#     { "sku": "GAD-002", "qty": 1, "unitCents": 1500 }
#     ],
#     "declared": { "netCents": 3498, "vatCents": 0, "grossCents": 3498 }
#     },
#     {
#     "orderId": "A301",
#     "shipTo": { "country": "NL" },
#     "customer": { "email": "billing@company.nl", "vatId": "NL999999999B01" },
#     "lines": [
#     { "sku": "WID-001", "qty": 2, "unitCents": 999 },
#     { "sku": "GAD-002", "qty": 1, "unitCents": 1500 }
#     ],
#     "declared": { "netCents": 3498, "vatCents": 0, "grossCents": 3498 }
#     },
#     {
#     "orderId": "A400",
#     "shipTo": { "country": "BE" },
#     "customer": { "email": "ada@other.example", "vatId": null },
#     "lines": [
#     { "sku": "WID-001", "qty": 2, "unitCents": 999 },
#     { "sku": "GAD-002", "qty": 1, "unitCents": 1500 }
#     ],
#     "declared": { "netCents": 3498, "vatCents": 508, "grossCents": 4006 }
#     }
#     ]
#   }"""^^rdf:JSON
#   ?Line = <urn:example:order:A400#line:1>
#   ?LineIndex = 1
#   ?LineJson = """{"sku":"GAD-002","qty":1,"unitCents":1500}"""^^rdf:JSON
#   ?LineUriStr = "urn:example:order:A400#line:1"
#   ?Lines = ("""{"sku":"WID-001","qty":2,"unitCents":999}"""^^rdf:JSON """{"sku":"GAD-002","qty":1,"unitCents":1500}"""^^rdf:JSON)
#   ?NetCents = 1500
#   ?Order = <urn:example:order:A400>
#   ?OrderId = "A400"
#   ?OrderIndex = 4
#   ?OrderJson = """{"orderId":"A400","shipTo":{"country":"BE"},"customer":{"email":"ada@other.example","vatId":null},"lines":[{"sku":"WID-001","qty":2,"unitCents":999},{"sku":"GAD-002","qty":1,"unitCents":1500}],"declared":{"netCents":3498,"vatCents":508,"grossCents":4006}}"""^^rdf:JSON
#   ?OrderUriStr = "urn:example:order:A400"
#   ?Orders = ("""{"orderId":"A100","shipTo":{"country":"BE"},"customer":{"email":"Ada@Example.ORG","vatId":null},"lines":[{"sku":"wid-001","qty":2,"unitCents":999},{"sku":"GAD-002","qty":1,"unitCents":1500}],"declared":{"netCents":3498,"vatCents":509,"grossCents":4007}}"""^^rdf:JSON """{"orderId":"A200","shipTo":{"country":"US"},"customer":{"email":"bob@example.org","vatId":null},"lines":[{"sku":"WID-001","qty":2,"unitCents":999},{"sku":"GAD-002","qty":1,"unitCents":1500}],"declared":{"netCents":3498,"vatCents":0,"grossCents":3498}}"""^^rdf:JSON """{"orderId":"A300","shipTo":{"country":"NL"},"customer":{"email":"acct@company.nl","vatId":"NL999999999B01"},"lines":[{"sku":"WID-001","qty":2,"unitCents":999},{"sku":"GAD-002","qty":1,"unitCents":1500}],"declared":{"netCents":3498,"vatCents":0,"grossCents":3498}}"""^^rdf:JSON """{"orderId":"A301","shipTo":{"country":"NL"},"customer":{"email":"billing@company.nl","vatId":"NL999999999B01"},"lines":[{"sku":"WID-001","qty":2,"unitCents":999},{"sku":"GAD-002","qty":1,"unitCents":1500}],"declared":{"netCents":3498,"vatCents":0,"grossCents":3498}}"""^^rdf:JSON """{"orderId":"A400","shipTo":{"country":"BE"},"customer":{"email":"ada@other.example","vatId":null},"lines":[{"sku":"WID-001","qty":2,"unitCents":999},{"sku":"GAD-002","qty":1,"unitCents":1500}],"declared":{"netCents":3498,"vatCents":508,"grossCents":4006}}"""^^rdf:JSON)
#   ?Product = ex:Gadget
#   ?Qty = 1
#   ?SkuCat = "GAD-002"
#   ?SkuJson = "GAD-002"
#   ?UnitCents = 1500
# Therefore the derived triple above is entailed by the rules and facts.
# ----------------------------------------------------------------------

<urn:example:order:A400#line:1> ex:sku "GAD-002" .

# ----------------------------------------------------------------------
# Proof for derived triple:
#   <urn:example:order:A400#line:1> ex:qty 1 .
# It holds because the following instance of the rule body is provable:
#   ex:feed ex:json """{
#     "meta~data": { "batch": "2025-12-18" },
#     "orders": [
#       {
#         "orderId": "A100",
#         "shipTo": { "country": "BE" },
#         "customer": { "email": "Ada@Example.ORG", "vatId": null },
#         "lines": [
#           { "sku": "wid-001", "qty": 2, "unitCents": 999 },
#           { "sku": "GAD-002", "qty": 1, "unitCents": 1500 }
#         ],
#         "declared": { "netCents": 3498, "vatCents": 509, "grossCents": 4007 }
#       },
#       {
#         "orderId": "A200",
#         "shipTo": { "country": "US" },
#         "customer": { "email": "bob@example.org", "vatId": null },
#         "lines": [
#           { "sku": "WID-001", "qty": 2, "unitCents": 999 },
#           { "sku": "GAD-002", "qty": 1, "unitCents": 1500 }
#         ],
#         "declared": { "netCents": 3498, "vatCents": 0, "grossCents": 3498 }
#       },
#       {
#         "orderId": "A300",
#         "shipTo": { "country": "NL" },
#         "customer": { "email": "acct@company.nl", "vatId": "NL999999999B01" },
#         "lines": [
#           { "sku": "WID-001", "qty": 2, "unitCents": 999 },
#           { "sku": "GAD-002", "qty": 1, "unitCents": 1500 }
#         ],
#         "declared": { "netCents": 3498, "vatCents": 0, "grossCents": 3498 }
#       },
#       {
#         "orderId": "A301",
#         "shipTo": { "country": "NL" },
#         "customer": { "email": "billing@company.nl", "vatId": "NL999999999B01" },
#         "lines": [
#           { "sku": "WID-001", "qty": 2, "unitCents": 999 },
#           { "sku": "GAD-002", "qty": 1, "unitCents": 1500 }
#         ],
#         "declared": { "netCents": 3498, "vatCents": 0, "grossCents": 3498 }
#       },
#       {
#         "orderId": "A400",
#         "shipTo": { "country": "BE" },
#         "customer": { "email": "ada@other.example", "vatId": null },
#         "lines": [
#           { "sku": "WID-001", "qty": 2, "unitCents": 999 },
#           { "sku": "GAD-002", "qty": 1, "unitCents": 1500 }
#         ],
#         "declared": { "netCents": 3498, "vatCents": 508, "grossCents": 4006 }
#       }
#     ]
#   }"""^^rdf:JSON .
#   ("""{
#     "meta~data": { "batch": "2025-12-18" },
#     "orders": [
#       {
#         "orderId": "A100",
#         "shipTo": { "country": "BE" },
#         "customer": { "email": "Ada@Example.ORG", "vatId": null },
#         "lines": [
#           { "sku": "wid-001", "qty": 2, "unitCents": 999 },
#           { "sku": "GAD-002", "qty": 1, "unitCents": 1500 }
#         ],
#         "declared": { "netCents": 3498, "vatCents": 509, "grossCents": 4007 }
#       },
#       {
#         "orderId": "A200",
#         "shipTo": { "country": "US" },
#         "customer": { "email": "bob@example.org", "vatId": null },
#         "lines": [
#           { "sku": "WID-001", "qty": 2, "unitCents": 999 },
#           { "sku": "GAD-002", "qty": 1, "unitCents": 1500 }
#         ],
#         "declared": { "netCents": 3498, "vatCents": 0, "grossCents": 3498 }
#       },
#       {
#         "orderId": "A300",
#         "shipTo": { "country": "NL" },
#         "customer": { "email": "acct@company.nl", "vatId": "NL999999999B01" },
#         "lines": [
#           { "sku": "WID-001", "qty": 2, "unitCents": 999 },
#           { "sku": "GAD-002", "qty": 1, "unitCents": 1500 }
#         ],
#         "declared": { "netCents": 3498, "vatCents": 0, "grossCents": 3498 }
#       },
#       {
#         "orderId": "A301",
#         "shipTo": { "country": "NL" },
#         "customer": { "email": "billing@company.nl", "vatId": "NL999999999B01" },
#         "lines": [
#           { "sku": "WID-001", "qty": 2, "unitCents": 999 },
#           { "sku": "GAD-002", "qty": 1, "unitCents": 1500 }
#         ],
#         "declared": { "netCents": 3498, "vatCents": 0, "grossCents": 3498 }
#       },
#       {
#         "orderId": "A400",
#         "shipTo": { "country": "BE" },
#         "customer": { "email": "ada@other.example", "vatId": null },
#         "lines": [
#           { "sku": "WID-001", "qty": 2, "unitCents": 999 },
#           { "sku": "GAD-002", "qty": 1, "unitCents": 1500 }
#         ],
#         "declared": { "netCents": 3498, "vatCents": 508, "grossCents": 4006 }
#       }
#     ]
#   }"""^^rdf:JSON "/orders") string:jsonPointer ("""{"orderId":"A100","shipTo":{"country":"BE"},"customer":{"email":"Ada@Example.ORG","vatId":null},"lines":[{"sku":"wid-001","qty":2,"unitCents":999},{"sku":"GAD-002","qty":1,"unitCents":1500}],"declared":{"netCents":3498,"vatCents":509,"grossCents":4007}}"""^^rdf:JSON """{"orderId":"A200","shipTo":{"country":"US"},"customer":{"email":"bob@example.org","vatId":null},"lines":[{"sku":"WID-001","qty":2,"unitCents":999},{"sku":"GAD-002","qty":1,"unitCents":1500}],"declared":{"netCents":3498,"vatCents":0,"grossCents":3498}}"""^^rdf:JSON """{"orderId":"A300","shipTo":{"country":"NL"},"customer":{"email":"acct@company.nl","vatId":"NL999999999B01"},"lines":[{"sku":"WID-001","qty":2,"unitCents":999},{"sku":"GAD-002","qty":1,"unitCents":1500}],"declared":{"netCents":3498,"vatCents":0,"grossCents":3498}}"""^^rdf:JSON """{"orderId":"A301","shipTo":{"country":"NL"},"customer":{"email":"billing@company.nl","vatId":"NL999999999B01"},"lines":[{"sku":"WID-001","qty":2,"unitCents":999},{"sku":"GAD-002","qty":1,"unitCents":1500}],"declared":{"netCents":3498,"vatCents":0,"grossCents":3498}}"""^^rdf:JSON """{"orderId":"A400","shipTo":{"country":"BE"},"customer":{"email":"ada@other.example","vatId":null},"lines":[{"sku":"WID-001","qty":2,"unitCents":999},{"sku":"GAD-002","qty":1,"unitCents":1500}],"declared":{"netCents":3498,"vatCents":508,"grossCents":4006}}"""^^rdf:JSON) .
#   ("""{"orderId":"A100","shipTo":{"country":"BE"},"customer":{"email":"Ada@Example.ORG","vatId":null},"lines":[{"sku":"wid-001","qty":2,"unitCents":999},{"sku":"GAD-002","qty":1,"unitCents":1500}],"declared":{"netCents":3498,"vatCents":509,"grossCents":4007}}"""^^rdf:JSON """{"orderId":"A200","shipTo":{"country":"US"},"customer":{"email":"bob@example.org","vatId":null},"lines":[{"sku":"WID-001","qty":2,"unitCents":999},{"sku":"GAD-002","qty":1,"unitCents":1500}],"declared":{"netCents":3498,"vatCents":0,"grossCents":3498}}"""^^rdf:JSON """{"orderId":"A300","shipTo":{"country":"NL"},"customer":{"email":"acct@company.nl","vatId":"NL999999999B01"},"lines":[{"sku":"WID-001","qty":2,"unitCents":999},{"sku":"GAD-002","qty":1,"unitCents":1500}],"declared":{"netCents":3498,"vatCents":0,"grossCents":3498}}"""^^rdf:JSON """{"orderId":"A301","shipTo":{"country":"NL"},"customer":{"email":"billing@company.nl","vatId":"NL999999999B01"},"lines":[{"sku":"WID-001","qty":2,"unitCents":999},{"sku":"GAD-002","qty":1,"unitCents":1500}],"declared":{"netCents":3498,"vatCents":0,"grossCents":3498}}"""^^rdf:JSON """{"orderId":"A400","shipTo":{"country":"BE"},"customer":{"email":"ada@other.example","vatId":null},"lines":[{"sku":"WID-001","qty":2,"unitCents":999},{"sku":"GAD-002","qty":1,"unitCents":1500}],"declared":{"netCents":3498,"vatCents":508,"grossCents":4006}}"""^^rdf:JSON) list:iterate (4 """{"orderId":"A400","shipTo":{"country":"BE"},"customer":{"email":"ada@other.example","vatId":null},"lines":[{"sku":"WID-001","qty":2,"unitCents":999},{"sku":"GAD-002","qty":1,"unitCents":1500}],"declared":{"netCents":3498,"vatCents":508,"grossCents":4006}}"""^^rdf:JSON) .
#   ("""{"orderId":"A400","shipTo":{"country":"BE"},"customer":{"email":"ada@other.example","vatId":null},"lines":[{"sku":"WID-001","qty":2,"unitCents":999},{"sku":"GAD-002","qty":1,"unitCents":1500}],"declared":{"netCents":3498,"vatCents":508,"grossCents":4006}}"""^^rdf:JSON "/orderId") string:jsonPointer "A400" .
#   ("urn:example:order:%s" "A400") string:format "urn:example:order:A400" .
#   <urn:example:order:A400> log:uri "urn:example:order:A400" .
#   ("""{"orderId":"A400","shipTo":{"country":"BE"},"customer":{"email":"ada@other.example","vatId":null},"lines":[{"sku":"WID-001","qty":2,"unitCents":999},{"sku":"GAD-002","qty":1,"unitCents":1500}],"declared":{"netCents":3498,"vatCents":508,"grossCents":4006}}"""^^rdf:JSON "/lines") string:jsonPointer ("""{"sku":"WID-001","qty":2,"unitCents":999}"""^^rdf:JSON """{"sku":"GAD-002","qty":1,"unitCents":1500}"""^^rdf:JSON) .
#   ("""{"sku":"WID-001","qty":2,"unitCents":999}"""^^rdf:JSON """{"sku":"GAD-002","qty":1,"unitCents":1500}"""^^rdf:JSON) list:iterate (1 """{"sku":"GAD-002","qty":1,"unitCents":1500}"""^^rdf:JSON) .
#   ("""{"sku":"GAD-002","qty":1,"unitCents":1500}"""^^rdf:JSON "/sku") string:jsonPointer "GAD-002" .
#   ("""{"sku":"GAD-002","qty":1,"unitCents":1500}"""^^rdf:JSON "/qty") string:jsonPointer 1 .
#   ("""{"sku":"GAD-002","qty":1,"unitCents":1500}"""^^rdf:JSON "/unitCents") string:jsonPointer 1500 .
#   ex:Gadget a ex:Product .
#   ex:Gadget ex:sku "GAD-002" .
#   (1 1500) math:product 1500 .
#   ("urn:example:order:%s#line:%s" "A400" 1) string:format "urn:example:order:A400#line:1" .
#   <urn:example:order:A400#line:1> log:uri "urn:example:order:A400#line:1" .
#   "GAD-002" string:equalIgnoringCase "GAD-002" .
# via the schematic forward rule:
#   {
#     ex:feed ex:json ?J .
#     (?J "/orders") string:jsonPointer ?Orders .
#     ?Orders list:iterate (?OrderIndex ?OrderJson) .
#     (?OrderJson "/orderId") string:jsonPointer ?OrderId .
#     ("urn:example:order:%s" ?OrderId) string:format ?OrderUriStr .
#     ?Order log:uri ?OrderUriStr .
#     (?OrderJson "/lines") string:jsonPointer ?Lines .
#     ?Lines list:iterate (?LineIndex ?LineJson) .
#     (?LineJson "/sku") string:jsonPointer ?SkuJson .
#     (?LineJson "/qty") string:jsonPointer ?Qty .
#     (?LineJson "/unitCents") string:jsonPointer ?UnitCents .
#     ?Product a ex:Product .
#     ?Product ex:sku ?SkuCat .
#     (?Qty ?UnitCents) math:product ?NetCents .
#     ("urn:example:order:%s#line:%s" ?OrderId ?LineIndex) string:format ?LineUriStr .
#     ?Line log:uri ?LineUriStr .
#     ?SkuJson string:equalIgnoringCase ?SkuCat .
#   } => {
#     ?Order ex:line ?Line .
#     ?Line a ex:OrderLine .
#     ?Line ex:lineIndex ?LineIndex .
#     ?Line ex:product ?Product .
#     ?Line ex:sku ?SkuCat .
#     ?Line ex:qty ?Qty .
#     ?Line ex:unitCents ?UnitCents .
#     ?Line ex:netCents ?NetCents .
#   } .
# with substitution (on rule variables):
#   ?J = """{
#     "meta~data": { "batch": "2025-12-18" },
#     "orders": [
#     {
#     "orderId": "A100",
#     "shipTo": { "country": "BE" },
#     "customer": { "email": "Ada@Example.ORG", "vatId": null },
#     "lines": [
#     { "sku": "wid-001", "qty": 2, "unitCents": 999 },
#     { "sku": "GAD-002", "qty": 1, "unitCents": 1500 }
#     ],
#     "declared": { "netCents": 3498, "vatCents": 509, "grossCents": 4007 }
#     },
#     {
#     "orderId": "A200",
#     "shipTo": { "country": "US" },
#     "customer": { "email": "bob@example.org", "vatId": null },
#     "lines": [
#     { "sku": "WID-001", "qty": 2, "unitCents": 999 },
#     { "sku": "GAD-002", "qty": 1, "unitCents": 1500 }
#     ],
#     "declared": { "netCents": 3498, "vatCents": 0, "grossCents": 3498 }
#     },
#     {
#     "orderId": "A300",
#     "shipTo": { "country": "NL" },
#     "customer": { "email": "acct@company.nl", "vatId": "NL999999999B01" },
#     "lines": [
#     { "sku": "WID-001", "qty": 2, "unitCents": 999 },
#     { "sku": "GAD-002", "qty": 1, "unitCents": 1500 }
#     ],
#     "declared": { "netCents": 3498, "vatCents": 0, "grossCents": 3498 }
#     },
#     {
#     "orderId": "A301",
#     "shipTo": { "country": "NL" },
#     "customer": { "email": "billing@company.nl", "vatId": "NL999999999B01" },
#     "lines": [
#     { "sku": "WID-001", "qty": 2, "unitCents": 999 },
#     { "sku": "GAD-002", "qty": 1, "unitCents": 1500 }
#     ],
#     "declared": { "netCents": 3498, "vatCents": 0, "grossCents": 3498 }
#     },
#     {
#     "orderId": "A400",
#     "shipTo": { "country": "BE" },
#     "customer": { "email": "ada@other.example", "vatId": null },
#     "lines": [
#     { "sku": "WID-001", "qty": 2, "unitCents": 999 },
#     { "sku": "GAD-002", "qty": 1, "unitCents": 1500 }
#     ],
#     "declared": { "netCents": 3498, "vatCents": 508, "grossCents": 4006 }
#     }
#     ]
#   }"""^^rdf:JSON
#   ?Line = <urn:example:order:A400#line:1>
#   ?LineIndex = 1
#   ?LineJson = """{"sku":"GAD-002","qty":1,"unitCents":1500}"""^^rdf:JSON
#   ?LineUriStr = "urn:example:order:A400#line:1"
#   ?Lines = ("""{"sku":"WID-001","qty":2,"unitCents":999}"""^^rdf:JSON """{"sku":"GAD-002","qty":1,"unitCents":1500}"""^^rdf:JSON)
#   ?NetCents = 1500
#   ?Order = <urn:example:order:A400>
#   ?OrderId = "A400"
#   ?OrderIndex = 4
#   ?OrderJson = """{"orderId":"A400","shipTo":{"country":"BE"},"customer":{"email":"ada@other.example","vatId":null},"lines":[{"sku":"WID-001","qty":2,"unitCents":999},{"sku":"GAD-002","qty":1,"unitCents":1500}],"declared":{"netCents":3498,"vatCents":508,"grossCents":4006}}"""^^rdf:JSON
#   ?OrderUriStr = "urn:example:order:A400"
#   ?Orders = ("""{"orderId":"A100","shipTo":{"country":"BE"},"customer":{"email":"Ada@Example.ORG","vatId":null},"lines":[{"sku":"wid-001","qty":2,"unitCents":999},{"sku":"GAD-002","qty":1,"unitCents":1500}],"declared":{"netCents":3498,"vatCents":509,"grossCents":4007}}"""^^rdf:JSON """{"orderId":"A200","shipTo":{"country":"US"},"customer":{"email":"bob@example.org","vatId":null},"lines":[{"sku":"WID-001","qty":2,"unitCents":999},{"sku":"GAD-002","qty":1,"unitCents":1500}],"declared":{"netCents":3498,"vatCents":0,"grossCents":3498}}"""^^rdf:JSON """{"orderId":"A300","shipTo":{"country":"NL"},"customer":{"email":"acct@company.nl","vatId":"NL999999999B01"},"lines":[{"sku":"WID-001","qty":2,"unitCents":999},{"sku":"GAD-002","qty":1,"unitCents":1500}],"declared":{"netCents":3498,"vatCents":0,"grossCents":3498}}"""^^rdf:JSON """{"orderId":"A301","shipTo":{"country":"NL"},"customer":{"email":"billing@company.nl","vatId":"NL999999999B01"},"lines":[{"sku":"WID-001","qty":2,"unitCents":999},{"sku":"GAD-002","qty":1,"unitCents":1500}],"declared":{"netCents":3498,"vatCents":0,"grossCents":3498}}"""^^rdf:JSON """{"orderId":"A400","shipTo":{"country":"BE"},"customer":{"email":"ada@other.example","vatId":null},"lines":[{"sku":"WID-001","qty":2,"unitCents":999},{"sku":"GAD-002","qty":1,"unitCents":1500}],"declared":{"netCents":3498,"vatCents":508,"grossCents":4006}}"""^^rdf:JSON)
#   ?Product = ex:Gadget
#   ?Qty = 1
#   ?SkuCat = "GAD-002"
#   ?SkuJson = "GAD-002"
#   ?UnitCents = 1500
# Therefore the derived triple above is entailed by the rules and facts.
# ----------------------------------------------------------------------

<urn:example:order:A400#line:1> ex:qty 1 .

# ----------------------------------------------------------------------
# Proof for derived triple:
#   <urn:example:order:A400#line:1> ex:unitCents 1500 .
# It holds because the following instance of the rule body is provable:
#   ex:feed ex:json """{
#     "meta~data": { "batch": "2025-12-18" },
#     "orders": [
#       {
#         "orderId": "A100",
#         "shipTo": { "country": "BE" },
#         "customer": { "email": "Ada@Example.ORG", "vatId": null },
#         "lines": [
#           { "sku": "wid-001", "qty": 2, "unitCents": 999 },
#           { "sku": "GAD-002", "qty": 1, "unitCents": 1500 }
#         ],
#         "declared": { "netCents": 3498, "vatCents": 509, "grossCents": 4007 }
#       },
#       {
#         "orderId": "A200",
#         "shipTo": { "country": "US" },
#         "customer": { "email": "bob@example.org", "vatId": null },
#         "lines": [
#           { "sku": "WID-001", "qty": 2, "unitCents": 999 },
#           { "sku": "GAD-002", "qty": 1, "unitCents": 1500 }
#         ],
#         "declared": { "netCents": 3498, "vatCents": 0, "grossCents": 3498 }
#       },
#       {
#         "orderId": "A300",
#         "shipTo": { "country": "NL" },
#         "customer": { "email": "acct@company.nl", "vatId": "NL999999999B01" },
#         "lines": [
#           { "sku": "WID-001", "qty": 2, "unitCents": 999 },
#           { "sku": "GAD-002", "qty": 1, "unitCents": 1500 }
#         ],
#         "declared": { "netCents": 3498, "vatCents": 0, "grossCents": 3498 }
#       },
#       {
#         "orderId": "A301",
#         "shipTo": { "country": "NL" },
#         "customer": { "email": "billing@company.nl", "vatId": "NL999999999B01" },
#         "lines": [
#           { "sku": "WID-001", "qty": 2, "unitCents": 999 },
#           { "sku": "GAD-002", "qty": 1, "unitCents": 1500 }
#         ],
#         "declared": { "netCents": 3498, "vatCents": 0, "grossCents": 3498 }
#       },
#       {
#         "orderId": "A400",
#         "shipTo": { "country": "BE" },
#         "customer": { "email": "ada@other.example", "vatId": null },
#         "lines": [
#           { "sku": "WID-001", "qty": 2, "unitCents": 999 },
#           { "sku": "GAD-002", "qty": 1, "unitCents": 1500 }
#         ],
#         "declared": { "netCents": 3498, "vatCents": 508, "grossCents": 4006 }
#       }
#     ]
#   }"""^^rdf:JSON .
#   ("""{
#     "meta~data": { "batch": "2025-12-18" },
#     "orders": [
#       {
#         "orderId": "A100",
#         "shipTo": { "country": "BE" },
#         "customer": { "email": "Ada@Example.ORG", "vatId": null },
#         "lines": [
#           { "sku": "wid-001", "qty": 2, "unitCents": 999 },
#           { "sku": "GAD-002", "qty": 1, "unitCents": 1500 }
#         ],
#         "declared": { "netCents": 3498, "vatCents": 509, "grossCents": 4007 }
#       },
#       {
#         "orderId": "A200",
#         "shipTo": { "country": "US" },
#         "customer": { "email": "bob@example.org", "vatId": null },
#         "lines": [
#           { "sku": "WID-001", "qty": 2, "unitCents": 999 },
#           { "sku": "GAD-002", "qty": 1, "unitCents": 1500 }
#         ],
#         "declared": { "netCents": 3498, "vatCents": 0, "grossCents": 3498 }
#       },
#       {
#         "orderId": "A300",
#         "shipTo": { "country": "NL" },
#         "customer": { "email": "acct@company.nl", "vatId": "NL999999999B01" },
#         "lines": [
#           { "sku": "WID-001", "qty": 2, "unitCents": 999 },
#           { "sku": "GAD-002", "qty": 1, "unitCents": 1500 }
#         ],
#         "declared": { "netCents": 3498, "vatCents": 0, "grossCents": 3498 }
#       },
#       {
#         "orderId": "A301",
#         "shipTo": { "country": "NL" },
#         "customer": { "email": "billing@company.nl", "vatId": "NL999999999B01" },
#         "lines": [
#           { "sku": "WID-001", "qty": 2, "unitCents": 999 },
#           { "sku": "GAD-002", "qty": 1, "unitCents": 1500 }
#         ],
#         "declared": { "netCents": 3498, "vatCents": 0, "grossCents": 3498 }
#       },
#       {
#         "orderId": "A400",
#         "shipTo": { "country": "BE" },
#         "customer": { "email": "ada@other.example", "vatId": null },
#         "lines": [
#           { "sku": "WID-001", "qty": 2, "unitCents": 999 },
#           { "sku": "GAD-002", "qty": 1, "unitCents": 1500 }
#         ],
#         "declared": { "netCents": 3498, "vatCents": 508, "grossCents": 4006 }
#       }
#     ]
#   }"""^^rdf:JSON "/orders") string:jsonPointer ("""{"orderId":"A100","shipTo":{"country":"BE"},"customer":{"email":"Ada@Example.ORG","vatId":null},"lines":[{"sku":"wid-001","qty":2,"unitCents":999},{"sku":"GAD-002","qty":1,"unitCents":1500}],"declared":{"netCents":3498,"vatCents":509,"grossCents":4007}}"""^^rdf:JSON """{"orderId":"A200","shipTo":{"country":"US"},"customer":{"email":"bob@example.org","vatId":null},"lines":[{"sku":"WID-001","qty":2,"unitCents":999},{"sku":"GAD-002","qty":1,"unitCents":1500}],"declared":{"netCents":3498,"vatCents":0,"grossCents":3498}}"""^^rdf:JSON """{"orderId":"A300","shipTo":{"country":"NL"},"customer":{"email":"acct@company.nl","vatId":"NL999999999B01"},"lines":[{"sku":"WID-001","qty":2,"unitCents":999},{"sku":"GAD-002","qty":1,"unitCents":1500}],"declared":{"netCents":3498,"vatCents":0,"grossCents":3498}}"""^^rdf:JSON """{"orderId":"A301","shipTo":{"country":"NL"},"customer":{"email":"billing@company.nl","vatId":"NL999999999B01"},"lines":[{"sku":"WID-001","qty":2,"unitCents":999},{"sku":"GAD-002","qty":1,"unitCents":1500}],"declared":{"netCents":3498,"vatCents":0,"grossCents":3498}}"""^^rdf:JSON """{"orderId":"A400","shipTo":{"country":"BE"},"customer":{"email":"ada@other.example","vatId":null},"lines":[{"sku":"WID-001","qty":2,"unitCents":999},{"sku":"GAD-002","qty":1,"unitCents":1500}],"declared":{"netCents":3498,"vatCents":508,"grossCents":4006}}"""^^rdf:JSON) .
#   ("""{"orderId":"A100","shipTo":{"country":"BE"},"customer":{"email":"Ada@Example.ORG","vatId":null},"lines":[{"sku":"wid-001","qty":2,"unitCents":999},{"sku":"GAD-002","qty":1,"unitCents":1500}],"declared":{"netCents":3498,"vatCents":509,"grossCents":4007}}"""^^rdf:JSON """{"orderId":"A200","shipTo":{"country":"US"},"customer":{"email":"bob@example.org","vatId":null},"lines":[{"sku":"WID-001","qty":2,"unitCents":999},{"sku":"GAD-002","qty":1,"unitCents":1500}],"declared":{"netCents":3498,"vatCents":0,"grossCents":3498}}"""^^rdf:JSON """{"orderId":"A300","shipTo":{"country":"NL"},"customer":{"email":"acct@company.nl","vatId":"NL999999999B01"},"lines":[{"sku":"WID-001","qty":2,"unitCents":999},{"sku":"GAD-002","qty":1,"unitCents":1500}],"declared":{"netCents":3498,"vatCents":0,"grossCents":3498}}"""^^rdf:JSON """{"orderId":"A301","shipTo":{"country":"NL"},"customer":{"email":"billing@company.nl","vatId":"NL999999999B01"},"lines":[{"sku":"WID-001","qty":2,"unitCents":999},{"sku":"GAD-002","qty":1,"unitCents":1500}],"declared":{"netCents":3498,"vatCents":0,"grossCents":3498}}"""^^rdf:JSON """{"orderId":"A400","shipTo":{"country":"BE"},"customer":{"email":"ada@other.example","vatId":null},"lines":[{"sku":"WID-001","qty":2,"unitCents":999},{"sku":"GAD-002","qty":1,"unitCents":1500}],"declared":{"netCents":3498,"vatCents":508,"grossCents":4006}}"""^^rdf:JSON) list:iterate (4 """{"orderId":"A400","shipTo":{"country":"BE"},"customer":{"email":"ada@other.example","vatId":null},"lines":[{"sku":"WID-001","qty":2,"unitCents":999},{"sku":"GAD-002","qty":1,"unitCents":1500}],"declared":{"netCents":3498,"vatCents":508,"grossCents":4006}}"""^^rdf:JSON) .
#   ("""{"orderId":"A400","shipTo":{"country":"BE"},"customer":{"email":"ada@other.example","vatId":null},"lines":[{"sku":"WID-001","qty":2,"unitCents":999},{"sku":"GAD-002","qty":1,"unitCents":1500}],"declared":{"netCents":3498,"vatCents":508,"grossCents":4006}}"""^^rdf:JSON "/orderId") string:jsonPointer "A400" .
#   ("urn:example:order:%s" "A400") string:format "urn:example:order:A400" .
#   <urn:example:order:A400> log:uri "urn:example:order:A400" .
#   ("""{"orderId":"A400","shipTo":{"country":"BE"},"customer":{"email":"ada@other.example","vatId":null},"lines":[{"sku":"WID-001","qty":2,"unitCents":999},{"sku":"GAD-002","qty":1,"unitCents":1500}],"declared":{"netCents":3498,"vatCents":508,"grossCents":4006}}"""^^rdf:JSON "/lines") string:jsonPointer ("""{"sku":"WID-001","qty":2,"unitCents":999}"""^^rdf:JSON """{"sku":"GAD-002","qty":1,"unitCents":1500}"""^^rdf:JSON) .
#   ("""{"sku":"WID-001","qty":2,"unitCents":999}"""^^rdf:JSON """{"sku":"GAD-002","qty":1,"unitCents":1500}"""^^rdf:JSON) list:iterate (1 """{"sku":"GAD-002","qty":1,"unitCents":1500}"""^^rdf:JSON) .
#   ("""{"sku":"GAD-002","qty":1,"unitCents":1500}"""^^rdf:JSON "/sku") string:jsonPointer "GAD-002" .
#   ("""{"sku":"GAD-002","qty":1,"unitCents":1500}"""^^rdf:JSON "/qty") string:jsonPointer 1 .
#   ("""{"sku":"GAD-002","qty":1,"unitCents":1500}"""^^rdf:JSON "/unitCents") string:jsonPointer 1500 .
#   ex:Gadget a ex:Product .
#   ex:Gadget ex:sku "GAD-002" .
#   (1 1500) math:product 1500 .
#   ("urn:example:order:%s#line:%s" "A400" 1) string:format "urn:example:order:A400#line:1" .
#   <urn:example:order:A400#line:1> log:uri "urn:example:order:A400#line:1" .
#   "GAD-002" string:equalIgnoringCase "GAD-002" .
# via the schematic forward rule:
#   {
#     ex:feed ex:json ?J .
#     (?J "/orders") string:jsonPointer ?Orders .
#     ?Orders list:iterate (?OrderIndex ?OrderJson) .
#     (?OrderJson "/orderId") string:jsonPointer ?OrderId .
#     ("urn:example:order:%s" ?OrderId) string:format ?OrderUriStr .
#     ?Order log:uri ?OrderUriStr .
#     (?OrderJson "/lines") string:jsonPointer ?Lines .
#     ?Lines list:iterate (?LineIndex ?LineJson) .
#     (?LineJson "/sku") string:jsonPointer ?SkuJson .
#     (?LineJson "/qty") string:jsonPointer ?Qty .
#     (?LineJson "/unitCents") string:jsonPointer ?UnitCents .
#     ?Product a ex:Product .
#     ?Product ex:sku ?SkuCat .
#     (?Qty ?UnitCents) math:product ?NetCents .
#     ("urn:example:order:%s#line:%s" ?OrderId ?LineIndex) string:format ?LineUriStr .
#     ?Line log:uri ?LineUriStr .
#     ?SkuJson string:equalIgnoringCase ?SkuCat .
#   } => {
#     ?Order ex:line ?Line .
#     ?Line a ex:OrderLine .
#     ?Line ex:lineIndex ?LineIndex .
#     ?Line ex:product ?Product .
#     ?Line ex:sku ?SkuCat .
#     ?Line ex:qty ?Qty .
#     ?Line ex:unitCents ?UnitCents .
#     ?Line ex:netCents ?NetCents .
#   } .
# with substitution (on rule variables):
#   ?J = """{
#     "meta~data": { "batch": "2025-12-18" },
#     "orders": [
#     {
#     "orderId": "A100",
#     "shipTo": { "country": "BE" },
#     "customer": { "email": "Ada@Example.ORG", "vatId": null },
#     "lines": [
#     { "sku": "wid-001", "qty": 2, "unitCents": 999 },
#     { "sku": "GAD-002", "qty": 1, "unitCents": 1500 }
#     ],
#     "declared": { "netCents": 3498, "vatCents": 509, "grossCents": 4007 }
#     },
#     {
#     "orderId": "A200",
#     "shipTo": { "country": "US" },
#     "customer": { "email": "bob@example.org", "vatId": null },
#     "lines": [
#     { "sku": "WID-001", "qty": 2, "unitCents": 999 },
#     { "sku": "GAD-002", "qty": 1, "unitCents": 1500 }
#     ],
#     "declared": { "netCents": 3498, "vatCents": 0, "grossCents": 3498 }
#     },
#     {
#     "orderId": "A300",
#     "shipTo": { "country": "NL" },
#     "customer": { "email": "acct@company.nl", "vatId": "NL999999999B01" },
#     "lines": [
#     { "sku": "WID-001", "qty": 2, "unitCents": 999 },
#     { "sku": "GAD-002", "qty": 1, "unitCents": 1500 }
#     ],
#     "declared": { "netCents": 3498, "vatCents": 0, "grossCents": 3498 }
#     },
#     {
#     "orderId": "A301",
#     "shipTo": { "country": "NL" },
#     "customer": { "email": "billing@company.nl", "vatId": "NL999999999B01" },
#     "lines": [
#     { "sku": "WID-001", "qty": 2, "unitCents": 999 },
#     { "sku": "GAD-002", "qty": 1, "unitCents": 1500 }
#     ],
#     "declared": { "netCents": 3498, "vatCents": 0, "grossCents": 3498 }
#     },
#     {
#     "orderId": "A400",
#     "shipTo": { "country": "BE" },
#     "customer": { "email": "ada@other.example", "vatId": null },
#     "lines": [
#     { "sku": "WID-001", "qty": 2, "unitCents": 999 },
#     { "sku": "GAD-002", "qty": 1, "unitCents": 1500 }
#     ],
#     "declared": { "netCents": 3498, "vatCents": 508, "grossCents": 4006 }
#     }
#     ]
#   }"""^^rdf:JSON
#   ?Line = <urn:example:order:A400#line:1>
#   ?LineIndex = 1
#   ?LineJson = """{"sku":"GAD-002","qty":1,"unitCents":1500}"""^^rdf:JSON
#   ?LineUriStr = "urn:example:order:A400#line:1"
#   ?Lines = ("""{"sku":"WID-001","qty":2,"unitCents":999}"""^^rdf:JSON """{"sku":"GAD-002","qty":1,"unitCents":1500}"""^^rdf:JSON)
#   ?NetCents = 1500
#   ?Order = <urn:example:order:A400>
#   ?OrderId = "A400"
#   ?OrderIndex = 4
#   ?OrderJson = """{"orderId":"A400","shipTo":{"country":"BE"},"customer":{"email":"ada@other.example","vatId":null},"lines":[{"sku":"WID-001","qty":2,"unitCents":999},{"sku":"GAD-002","qty":1,"unitCents":1500}],"declared":{"netCents":3498,"vatCents":508,"grossCents":4006}}"""^^rdf:JSON
#   ?OrderUriStr = "urn:example:order:A400"
#   ?Orders = ("""{"orderId":"A100","shipTo":{"country":"BE"},"customer":{"email":"Ada@Example.ORG","vatId":null},"lines":[{"sku":"wid-001","qty":2,"unitCents":999},{"sku":"GAD-002","qty":1,"unitCents":1500}],"declared":{"netCents":3498,"vatCents":509,"grossCents":4007}}"""^^rdf:JSON """{"orderId":"A200","shipTo":{"country":"US"},"customer":{"email":"bob@example.org","vatId":null},"lines":[{"sku":"WID-001","qty":2,"unitCents":999},{"sku":"GAD-002","qty":1,"unitCents":1500}],"declared":{"netCents":3498,"vatCents":0,"grossCents":3498}}"""^^rdf:JSON """{"orderId":"A300","shipTo":{"country":"NL"},"customer":{"email":"acct@company.nl","vatId":"NL999999999B01"},"lines":[{"sku":"WID-001","qty":2,"unitCents":999},{"sku":"GAD-002","qty":1,"unitCents":1500}],"declared":{"netCents":3498,"vatCents":0,"grossCents":3498}}"""^^rdf:JSON """{"orderId":"A301","shipTo":{"country":"NL"},"customer":{"email":"billing@company.nl","vatId":"NL999999999B01"},"lines":[{"sku":"WID-001","qty":2,"unitCents":999},{"sku":"GAD-002","qty":1,"unitCents":1500}],"declared":{"netCents":3498,"vatCents":0,"grossCents":3498}}"""^^rdf:JSON """{"orderId":"A400","shipTo":{"country":"BE"},"customer":{"email":"ada@other.example","vatId":null},"lines":[{"sku":"WID-001","qty":2,"unitCents":999},{"sku":"GAD-002","qty":1,"unitCents":1500}],"declared":{"netCents":3498,"vatCents":508,"grossCents":4006}}"""^^rdf:JSON)
#   ?Product = ex:Gadget
#   ?Qty = 1
#   ?SkuCat = "GAD-002"
#   ?SkuJson = "GAD-002"
#   ?UnitCents = 1500
# Therefore the derived triple above is entailed by the rules and facts.
# ----------------------------------------------------------------------

<urn:example:order:A400#line:1> ex:unitCents 1500 .

# ----------------------------------------------------------------------
# Proof for derived triple:
#   <urn:example:order:A400#line:1> ex:netCents 1500 .
# It holds because the following instance of the rule body is provable:
#   ex:feed ex:json """{
#     "meta~data": { "batch": "2025-12-18" },
#     "orders": [
#       {
#         "orderId": "A100",
#         "shipTo": { "country": "BE" },
#         "customer": { "email": "Ada@Example.ORG", "vatId": null },
#         "lines": [
#           { "sku": "wid-001", "qty": 2, "unitCents": 999 },
#           { "sku": "GAD-002", "qty": 1, "unitCents": 1500 }
#         ],
#         "declared": { "netCents": 3498, "vatCents": 509, "grossCents": 4007 }
#       },
#       {
#         "orderId": "A200",
#         "shipTo": { "country": "US" },
#         "customer": { "email": "bob@example.org", "vatId": null },
#         "lines": [
#           { "sku": "WID-001", "qty": 2, "unitCents": 999 },
#           { "sku": "GAD-002", "qty": 1, "unitCents": 1500 }
#         ],
#         "declared": { "netCents": 3498, "vatCents": 0, "grossCents": 3498 }
#       },
#       {
#         "orderId": "A300",
#         "shipTo": { "country": "NL" },
#         "customer": { "email": "acct@company.nl", "vatId": "NL999999999B01" },
#         "lines": [
#           { "sku": "WID-001", "qty": 2, "unitCents": 999 },
#           { "sku": "GAD-002", "qty": 1, "unitCents": 1500 }
#         ],
#         "declared": { "netCents": 3498, "vatCents": 0, "grossCents": 3498 }
#       },
#       {
#         "orderId": "A301",
#         "shipTo": { "country": "NL" },
#         "customer": { "email": "billing@company.nl", "vatId": "NL999999999B01" },
#         "lines": [
#           { "sku": "WID-001", "qty": 2, "unitCents": 999 },
#           { "sku": "GAD-002", "qty": 1, "unitCents": 1500 }
#         ],
#         "declared": { "netCents": 3498, "vatCents": 0, "grossCents": 3498 }
#       },
#       {
#         "orderId": "A400",
#         "shipTo": { "country": "BE" },
#         "customer": { "email": "ada@other.example", "vatId": null },
#         "lines": [
#           { "sku": "WID-001", "qty": 2, "unitCents": 999 },
#           { "sku": "GAD-002", "qty": 1, "unitCents": 1500 }
#         ],
#         "declared": { "netCents": 3498, "vatCents": 508, "grossCents": 4006 }
#       }
#     ]
#   }"""^^rdf:JSON .
#   ("""{
#     "meta~data": { "batch": "2025-12-18" },
#     "orders": [
#       {
#         "orderId": "A100",
#         "shipTo": { "country": "BE" },
#         "customer": { "email": "Ada@Example.ORG", "vatId": null },
#         "lines": [
#           { "sku": "wid-001", "qty": 2, "unitCents": 999 },
#           { "sku": "GAD-002", "qty": 1, "unitCents": 1500 }
#         ],
#         "declared": { "netCents": 3498, "vatCents": 509, "grossCents": 4007 }
#       },
#       {
#         "orderId": "A200",
#         "shipTo": { "country": "US" },
#         "customer": { "email": "bob@example.org", "vatId": null },
#         "lines": [
#           { "sku": "WID-001", "qty": 2, "unitCents": 999 },
#           { "sku": "GAD-002", "qty": 1, "unitCents": 1500 }
#         ],
#         "declared": { "netCents": 3498, "vatCents": 0, "grossCents": 3498 }
#       },
#       {
#         "orderId": "A300",
#         "shipTo": { "country": "NL" },
#         "customer": { "email": "acct@company.nl", "vatId": "NL999999999B01" },
#         "lines": [
#           { "sku": "WID-001", "qty": 2, "unitCents": 999 },
#           { "sku": "GAD-002", "qty": 1, "unitCents": 1500 }
#         ],
#         "declared": { "netCents": 3498, "vatCents": 0, "grossCents": 3498 }
#       },
#       {
#         "orderId": "A301",
#         "shipTo": { "country": "NL" },
#         "customer": { "email": "billing@company.nl", "vatId": "NL999999999B01" },
#         "lines": [
#           { "sku": "WID-001", "qty": 2, "unitCents": 999 },
#           { "sku": "GAD-002", "qty": 1, "unitCents": 1500 }
#         ],
#         "declared": { "netCents": 3498, "vatCents": 0, "grossCents": 3498 }
#       },
#       {
#         "orderId": "A400",
#         "shipTo": { "country": "BE" },
#         "customer": { "email": "ada@other.example", "vatId": null },
#         "lines": [
#           { "sku": "WID-001", "qty": 2, "unitCents": 999 },
#           { "sku": "GAD-002", "qty": 1, "unitCents": 1500 }
#         ],
#         "declared": { "netCents": 3498, "vatCents": 508, "grossCents": 4006 }
#       }
#     ]
#   }"""^^rdf:JSON "/orders") string:jsonPointer ("""{"orderId":"A100","shipTo":{"country":"BE"},"customer":{"email":"Ada@Example.ORG","vatId":null},"lines":[{"sku":"wid-001","qty":2,"unitCents":999},{"sku":"GAD-002","qty":1,"unitCents":1500}],"declared":{"netCents":3498,"vatCents":509,"grossCents":4007}}"""^^rdf:JSON """{"orderId":"A200","shipTo":{"country":"US"},"customer":{"email":"bob@example.org","vatId":null},"lines":[{"sku":"WID-001","qty":2,"unitCents":999},{"sku":"GAD-002","qty":1,"unitCents":1500}],"declared":{"netCents":3498,"vatCents":0,"grossCents":3498}}"""^^rdf:JSON """{"orderId":"A300","shipTo":{"country":"NL"},"customer":{"email":"acct@company.nl","vatId":"NL999999999B01"},"lines":[{"sku":"WID-001","qty":2,"unitCents":999},{"sku":"GAD-002","qty":1,"unitCents":1500}],"declared":{"netCents":3498,"vatCents":0,"grossCents":3498}}"""^^rdf:JSON """{"orderId":"A301","shipTo":{"country":"NL"},"customer":{"email":"billing@company.nl","vatId":"NL999999999B01"},"lines":[{"sku":"WID-001","qty":2,"unitCents":999},{"sku":"GAD-002","qty":1,"unitCents":1500}],"declared":{"netCents":3498,"vatCents":0,"grossCents":3498}}"""^^rdf:JSON """{"orderId":"A400","shipTo":{"country":"BE"},"customer":{"email":"ada@other.example","vatId":null},"lines":[{"sku":"WID-001","qty":2,"unitCents":999},{"sku":"GAD-002","qty":1,"unitCents":1500}],"declared":{"netCents":3498,"vatCents":508,"grossCents":4006}}"""^^rdf:JSON) .
#   ("""{"orderId":"A100","shipTo":{"country":"BE"},"customer":{"email":"Ada@Example.ORG","vatId":null},"lines":[{"sku":"wid-001","qty":2,"unitCents":999},{"sku":"GAD-002","qty":1,"unitCents":1500}],"declared":{"netCents":3498,"vatCents":509,"grossCents":4007}}"""^^rdf:JSON """{"orderId":"A200","shipTo":{"country":"US"},"customer":{"email":"bob@example.org","vatId":null},"lines":[{"sku":"WID-001","qty":2,"unitCents":999},{"sku":"GAD-002","qty":1,"unitCents":1500}],"declared":{"netCents":3498,"vatCents":0,"grossCents":3498}}"""^^rdf:JSON """{"orderId":"A300","shipTo":{"country":"NL"},"customer":{"email":"acct@company.nl","vatId":"NL999999999B01"},"lines":[{"sku":"WID-001","qty":2,"unitCents":999},{"sku":"GAD-002","qty":1,"unitCents":1500}],"declared":{"netCents":3498,"vatCents":0,"grossCents":3498}}"""^^rdf:JSON """{"orderId":"A301","shipTo":{"country":"NL"},"customer":{"email":"billing@company.nl","vatId":"NL999999999B01"},"lines":[{"sku":"WID-001","qty":2,"unitCents":999},{"sku":"GAD-002","qty":1,"unitCents":1500}],"declared":{"netCents":3498,"vatCents":0,"grossCents":3498}}"""^^rdf:JSON """{"orderId":"A400","shipTo":{"country":"BE"},"customer":{"email":"ada@other.example","vatId":null},"lines":[{"sku":"WID-001","qty":2,"unitCents":999},{"sku":"GAD-002","qty":1,"unitCents":1500}],"declared":{"netCents":3498,"vatCents":508,"grossCents":4006}}"""^^rdf:JSON) list:iterate (4 """{"orderId":"A400","shipTo":{"country":"BE"},"customer":{"email":"ada@other.example","vatId":null},"lines":[{"sku":"WID-001","qty":2,"unitCents":999},{"sku":"GAD-002","qty":1,"unitCents":1500}],"declared":{"netCents":3498,"vatCents":508,"grossCents":4006}}"""^^rdf:JSON) .
#   ("""{"orderId":"A400","shipTo":{"country":"BE"},"customer":{"email":"ada@other.example","vatId":null},"lines":[{"sku":"WID-001","qty":2,"unitCents":999},{"sku":"GAD-002","qty":1,"unitCents":1500}],"declared":{"netCents":3498,"vatCents":508,"grossCents":4006}}"""^^rdf:JSON "/orderId") string:jsonPointer "A400" .
#   ("urn:example:order:%s" "A400") string:format "urn:example:order:A400" .
#   <urn:example:order:A400> log:uri "urn:example:order:A400" .
#   ("""{"orderId":"A400","shipTo":{"country":"BE"},"customer":{"email":"ada@other.example","vatId":null},"lines":[{"sku":"WID-001","qty":2,"unitCents":999},{"sku":"GAD-002","qty":1,"unitCents":1500}],"declared":{"netCents":3498,"vatCents":508,"grossCents":4006}}"""^^rdf:JSON "/lines") string:jsonPointer ("""{"sku":"WID-001","qty":2,"unitCents":999}"""^^rdf:JSON """{"sku":"GAD-002","qty":1,"unitCents":1500}"""^^rdf:JSON) .
#   ("""{"sku":"WID-001","qty":2,"unitCents":999}"""^^rdf:JSON """{"sku":"GAD-002","qty":1,"unitCents":1500}"""^^rdf:JSON) list:iterate (1 """{"sku":"GAD-002","qty":1,"unitCents":1500}"""^^rdf:JSON) .
#   ("""{"sku":"GAD-002","qty":1,"unitCents":1500}"""^^rdf:JSON "/sku") string:jsonPointer "GAD-002" .
#   ("""{"sku":"GAD-002","qty":1,"unitCents":1500}"""^^rdf:JSON "/qty") string:jsonPointer 1 .
#   ("""{"sku":"GAD-002","qty":1,"unitCents":1500}"""^^rdf:JSON "/unitCents") string:jsonPointer 1500 .
#   ex:Gadget a ex:Product .
#   ex:Gadget ex:sku "GAD-002" .
#   (1 1500) math:product 1500 .
#   ("urn:example:order:%s#line:%s" "A400" 1) string:format "urn:example:order:A400#line:1" .
#   <urn:example:order:A400#line:1> log:uri "urn:example:order:A400#line:1" .
#   "GAD-002" string:equalIgnoringCase "GAD-002" .
# via the schematic forward rule:
#   {
#     ex:feed ex:json ?J .
#     (?J "/orders") string:jsonPointer ?Orders .
#     ?Orders list:iterate (?OrderIndex ?OrderJson) .
#     (?OrderJson "/orderId") string:jsonPointer ?OrderId .
#     ("urn:example:order:%s" ?OrderId) string:format ?OrderUriStr .
#     ?Order log:uri ?OrderUriStr .
#     (?OrderJson "/lines") string:jsonPointer ?Lines .
#     ?Lines list:iterate (?LineIndex ?LineJson) .
#     (?LineJson "/sku") string:jsonPointer ?SkuJson .
#     (?LineJson "/qty") string:jsonPointer ?Qty .
#     (?LineJson "/unitCents") string:jsonPointer ?UnitCents .
#     ?Product a ex:Product .
#     ?Product ex:sku ?SkuCat .
#     (?Qty ?UnitCents) math:product ?NetCents .
#     ("urn:example:order:%s#line:%s" ?OrderId ?LineIndex) string:format ?LineUriStr .
#     ?Line log:uri ?LineUriStr .
#     ?SkuJson string:equalIgnoringCase ?SkuCat .
#   } => {
#     ?Order ex:line ?Line .
#     ?Line a ex:OrderLine .
#     ?Line ex:lineIndex ?LineIndex .
#     ?Line ex:product ?Product .
#     ?Line ex:sku ?SkuCat .
#     ?Line ex:qty ?Qty .
#     ?Line ex:unitCents ?UnitCents .
#     ?Line ex:netCents ?NetCents .
#   } .
# with substitution (on rule variables):
#   ?J = """{
#     "meta~data": { "batch": "2025-12-18" },
#     "orders": [
#     {
#     "orderId": "A100",
#     "shipTo": { "country": "BE" },
#     "customer": { "email": "Ada@Example.ORG", "vatId": null },
#     "lines": [
#     { "sku": "wid-001", "qty": 2, "unitCents": 999 },
#     { "sku": "GAD-002", "qty": 1, "unitCents": 1500 }
#     ],
#     "declared": { "netCents": 3498, "vatCents": 509, "grossCents": 4007 }
#     },
#     {
#     "orderId": "A200",
#     "shipTo": { "country": "US" },
#     "customer": { "email": "bob@example.org", "vatId": null },
#     "lines": [
#     { "sku": "WID-001", "qty": 2, "unitCents": 999 },
#     { "sku": "GAD-002", "qty": 1, "unitCents": 1500 }
#     ],
#     "declared": { "netCents": 3498, "vatCents": 0, "grossCents": 3498 }
#     },
#     {
#     "orderId": "A300",
#     "shipTo": { "country": "NL" },
#     "customer": { "email": "acct@company.nl", "vatId": "NL999999999B01" },
#     "lines": [
#     { "sku": "WID-001", "qty": 2, "unitCents": 999 },
#     { "sku": "GAD-002", "qty": 1, "unitCents": 1500 }
#     ],
#     "declared": { "netCents": 3498, "vatCents": 0, "grossCents": 3498 }
#     },
#     {
#     "orderId": "A301",
#     "shipTo": { "country": "NL" },
#     "customer": { "email": "billing@company.nl", "vatId": "NL999999999B01" },
#     "lines": [
#     { "sku": "WID-001", "qty": 2, "unitCents": 999 },
#     { "sku": "GAD-002", "qty": 1, "unitCents": 1500 }
#     ],
#     "declared": { "netCents": 3498, "vatCents": 0, "grossCents": 3498 }
#     },
#     {
#     "orderId": "A400",
#     "shipTo": { "country": "BE" },
#     "customer": { "email": "ada@other.example", "vatId": null },
#     "lines": [
#     { "sku": "WID-001", "qty": 2, "unitCents": 999 },
#     { "sku": "GAD-002", "qty": 1, "unitCents": 1500 }
#     ],
#     "declared": { "netCents": 3498, "vatCents": 508, "grossCents": 4006 }
#     }
#     ]
#   }"""^^rdf:JSON
#   ?Line = <urn:example:order:A400#line:1>
#   ?LineIndex = 1
#   ?LineJson = """{"sku":"GAD-002","qty":1,"unitCents":1500}"""^^rdf:JSON
#   ?LineUriStr = "urn:example:order:A400#line:1"
#   ?Lines = ("""{"sku":"WID-001","qty":2,"unitCents":999}"""^^rdf:JSON """{"sku":"GAD-002","qty":1,"unitCents":1500}"""^^rdf:JSON)
#   ?NetCents = 1500
#   ?Order = <urn:example:order:A400>
#   ?OrderId = "A400"
#   ?OrderIndex = 4
#   ?OrderJson = """{"orderId":"A400","shipTo":{"country":"BE"},"customer":{"email":"ada@other.example","vatId":null},"lines":[{"sku":"WID-001","qty":2,"unitCents":999},{"sku":"GAD-002","qty":1,"unitCents":1500}],"declared":{"netCents":3498,"vatCents":508,"grossCents":4006}}"""^^rdf:JSON
#   ?OrderUriStr = "urn:example:order:A400"
#   ?Orders = ("""{"orderId":"A100","shipTo":{"country":"BE"},"customer":{"email":"Ada@Example.ORG","vatId":null},"lines":[{"sku":"wid-001","qty":2,"unitCents":999},{"sku":"GAD-002","qty":1,"unitCents":1500}],"declared":{"netCents":3498,"vatCents":509,"grossCents":4007}}"""^^rdf:JSON """{"orderId":"A200","shipTo":{"country":"US"},"customer":{"email":"bob@example.org","vatId":null},"lines":[{"sku":"WID-001","qty":2,"unitCents":999},{"sku":"GAD-002","qty":1,"unitCents":1500}],"declared":{"netCents":3498,"vatCents":0,"grossCents":3498}}"""^^rdf:JSON """{"orderId":"A300","shipTo":{"country":"NL"},"customer":{"email":"acct@company.nl","vatId":"NL999999999B01"},"lines":[{"sku":"WID-001","qty":2,"unitCents":999},{"sku":"GAD-002","qty":1,"unitCents":1500}],"declared":{"netCents":3498,"vatCents":0,"grossCents":3498}}"""^^rdf:JSON """{"orderId":"A301","shipTo":{"country":"NL"},"customer":{"email":"billing@company.nl","vatId":"NL999999999B01"},"lines":[{"sku":"WID-001","qty":2,"unitCents":999},{"sku":"GAD-002","qty":1,"unitCents":1500}],"declared":{"netCents":3498,"vatCents":0,"grossCents":3498}}"""^^rdf:JSON """{"orderId":"A400","shipTo":{"country":"BE"},"customer":{"email":"ada@other.example","vatId":null},"lines":[{"sku":"WID-001","qty":2,"unitCents":999},{"sku":"GAD-002","qty":1,"unitCents":1500}],"declared":{"netCents":3498,"vatCents":508,"grossCents":4006}}"""^^rdf:JSON)
#   ?Product = ex:Gadget
#   ?Qty = 1
#   ?SkuCat = "GAD-002"
#   ?SkuJson = "GAD-002"
#   ?UnitCents = 1500
# Therefore the derived triple above is entailed by the rules and facts.
# ----------------------------------------------------------------------

<urn:example:order:A400#line:1> ex:netCents 1500 .

# ----------------------------------------------------------------------
# Proof for derived triple:
#   <urn:example:order:A400> ex:line <urn:example:order:A400#line:0> .
# It holds because the following instance of the rule body is provable:
#   ex:feed ex:json """{
#     "meta~data": { "batch": "2025-12-18" },
#     "orders": [
#       {
#         "orderId": "A100",
#         "shipTo": { "country": "BE" },
#         "customer": { "email": "Ada@Example.ORG", "vatId": null },
#         "lines": [
#           { "sku": "wid-001", "qty": 2, "unitCents": 999 },
#           { "sku": "GAD-002", "qty": 1, "unitCents": 1500 }
#         ],
#         "declared": { "netCents": 3498, "vatCents": 509, "grossCents": 4007 }
#       },
#       {
#         "orderId": "A200",
#         "shipTo": { "country": "US" },
#         "customer": { "email": "bob@example.org", "vatId": null },
#         "lines": [
#           { "sku": "WID-001", "qty": 2, "unitCents": 999 },
#           { "sku": "GAD-002", "qty": 1, "unitCents": 1500 }
#         ],
#         "declared": { "netCents": 3498, "vatCents": 0, "grossCents": 3498 }
#       },
#       {
#         "orderId": "A300",
#         "shipTo": { "country": "NL" },
#         "customer": { "email": "acct@company.nl", "vatId": "NL999999999B01" },
#         "lines": [
#           { "sku": "WID-001", "qty": 2, "unitCents": 999 },
#           { "sku": "GAD-002", "qty": 1, "unitCents": 1500 }
#         ],
#         "declared": { "netCents": 3498, "vatCents": 0, "grossCents": 3498 }
#       },
#       {
#         "orderId": "A301",
#         "shipTo": { "country": "NL" },
#         "customer": { "email": "billing@company.nl", "vatId": "NL999999999B01" },
#         "lines": [
#           { "sku": "WID-001", "qty": 2, "unitCents": 999 },
#           { "sku": "GAD-002", "qty": 1, "unitCents": 1500 }
#         ],
#         "declared": { "netCents": 3498, "vatCents": 0, "grossCents": 3498 }
#       },
#       {
#         "orderId": "A400",
#         "shipTo": { "country": "BE" },
#         "customer": { "email": "ada@other.example", "vatId": null },
#         "lines": [
#           { "sku": "WID-001", "qty": 2, "unitCents": 999 },
#           { "sku": "GAD-002", "qty": 1, "unitCents": 1500 }
#         ],
#         "declared": { "netCents": 3498, "vatCents": 508, "grossCents": 4006 }
#       }
#     ]
#   }"""^^rdf:JSON .
#   ("""{
#     "meta~data": { "batch": "2025-12-18" },
#     "orders": [
#       {
#         "orderId": "A100",
#         "shipTo": { "country": "BE" },
#         "customer": { "email": "Ada@Example.ORG", "vatId": null },
#         "lines": [
#           { "sku": "wid-001", "qty": 2, "unitCents": 999 },
#           { "sku": "GAD-002", "qty": 1, "unitCents": 1500 }
#         ],
#         "declared": { "netCents": 3498, "vatCents": 509, "grossCents": 4007 }
#       },
#       {
#         "orderId": "A200",
#         "shipTo": { "country": "US" },
#         "customer": { "email": "bob@example.org", "vatId": null },
#         "lines": [
#           { "sku": "WID-001", "qty": 2, "unitCents": 999 },
#           { "sku": "GAD-002", "qty": 1, "unitCents": 1500 }
#         ],
#         "declared": { "netCents": 3498, "vatCents": 0, "grossCents": 3498 }
#       },
#       {
#         "orderId": "A300",
#         "shipTo": { "country": "NL" },
#         "customer": { "email": "acct@company.nl", "vatId": "NL999999999B01" },
#         "lines": [
#           { "sku": "WID-001", "qty": 2, "unitCents": 999 },
#           { "sku": "GAD-002", "qty": 1, "unitCents": 1500 }
#         ],
#         "declared": { "netCents": 3498, "vatCents": 0, "grossCents": 3498 }
#       },
#       {
#         "orderId": "A301",
#         "shipTo": { "country": "NL" },
#         "customer": { "email": "billing@company.nl", "vatId": "NL999999999B01" },
#         "lines": [
#           { "sku": "WID-001", "qty": 2, "unitCents": 999 },
#           { "sku": "GAD-002", "qty": 1, "unitCents": 1500 }
#         ],
#         "declared": { "netCents": 3498, "vatCents": 0, "grossCents": 3498 }
#       },
#       {
#         "orderId": "A400",
#         "shipTo": { "country": "BE" },
#         "customer": { "email": "ada@other.example", "vatId": null },
#         "lines": [
#           { "sku": "WID-001", "qty": 2, "unitCents": 999 },
#           { "sku": "GAD-002", "qty": 1, "unitCents": 1500 }
#         ],
#         "declared": { "netCents": 3498, "vatCents": 508, "grossCents": 4006 }
#       }
#     ]
#   }"""^^rdf:JSON "/orders") string:jsonPointer ("""{"orderId":"A100","shipTo":{"country":"BE"},"customer":{"email":"Ada@Example.ORG","vatId":null},"lines":[{"sku":"wid-001","qty":2,"unitCents":999},{"sku":"GAD-002","qty":1,"unitCents":1500}],"declared":{"netCents":3498,"vatCents":509,"grossCents":4007}}"""^^rdf:JSON """{"orderId":"A200","shipTo":{"country":"US"},"customer":{"email":"bob@example.org","vatId":null},"lines":[{"sku":"WID-001","qty":2,"unitCents":999},{"sku":"GAD-002","qty":1,"unitCents":1500}],"declared":{"netCents":3498,"vatCents":0,"grossCents":3498}}"""^^rdf:JSON """{"orderId":"A300","shipTo":{"country":"NL"},"customer":{"email":"acct@company.nl","vatId":"NL999999999B01"},"lines":[{"sku":"WID-001","qty":2,"unitCents":999},{"sku":"GAD-002","qty":1,"unitCents":1500}],"declared":{"netCents":3498,"vatCents":0,"grossCents":3498}}"""^^rdf:JSON """{"orderId":"A301","shipTo":{"country":"NL"},"customer":{"email":"billing@company.nl","vatId":"NL999999999B01"},"lines":[{"sku":"WID-001","qty":2,"unitCents":999},{"sku":"GAD-002","qty":1,"unitCents":1500}],"declared":{"netCents":3498,"vatCents":0,"grossCents":3498}}"""^^rdf:JSON """{"orderId":"A400","shipTo":{"country":"BE"},"customer":{"email":"ada@other.example","vatId":null},"lines":[{"sku":"WID-001","qty":2,"unitCents":999},{"sku":"GAD-002","qty":1,"unitCents":1500}],"declared":{"netCents":3498,"vatCents":508,"grossCents":4006}}"""^^rdf:JSON) .
#   ("""{"orderId":"A100","shipTo":{"country":"BE"},"customer":{"email":"Ada@Example.ORG","vatId":null},"lines":[{"sku":"wid-001","qty":2,"unitCents":999},{"sku":"GAD-002","qty":1,"unitCents":1500}],"declared":{"netCents":3498,"vatCents":509,"grossCents":4007}}"""^^rdf:JSON """{"orderId":"A200","shipTo":{"country":"US"},"customer":{"email":"bob@example.org","vatId":null},"lines":[{"sku":"WID-001","qty":2,"unitCents":999},{"sku":"GAD-002","qty":1,"unitCents":1500}],"declared":{"netCents":3498,"vatCents":0,"grossCents":3498}}"""^^rdf:JSON """{"orderId":"A300","shipTo":{"country":"NL"},"customer":{"email":"acct@company.nl","vatId":"NL999999999B01"},"lines":[{"sku":"WID-001","qty":2,"unitCents":999},{"sku":"GAD-002","qty":1,"unitCents":1500}],"declared":{"netCents":3498,"vatCents":0,"grossCents":3498}}"""^^rdf:JSON """{"orderId":"A301","shipTo":{"country":"NL"},"customer":{"email":"billing@company.nl","vatId":"NL999999999B01"},"lines":[{"sku":"WID-001","qty":2,"unitCents":999},{"sku":"GAD-002","qty":1,"unitCents":1500}],"declared":{"netCents":3498,"vatCents":0,"grossCents":3498}}"""^^rdf:JSON """{"orderId":"A400","shipTo":{"country":"BE"},"customer":{"email":"ada@other.example","vatId":null},"lines":[{"sku":"WID-001","qty":2,"unitCents":999},{"sku":"GAD-002","qty":1,"unitCents":1500}],"declared":{"netCents":3498,"vatCents":508,"grossCents":4006}}"""^^rdf:JSON) list:iterate (4 """{"orderId":"A400","shipTo":{"country":"BE"},"customer":{"email":"ada@other.example","vatId":null},"lines":[{"sku":"WID-001","qty":2,"unitCents":999},{"sku":"GAD-002","qty":1,"unitCents":1500}],"declared":{"netCents":3498,"vatCents":508,"grossCents":4006}}"""^^rdf:JSON) .
#   ("""{"orderId":"A400","shipTo":{"country":"BE"},"customer":{"email":"ada@other.example","vatId":null},"lines":[{"sku":"WID-001","qty":2,"unitCents":999},{"sku":"GAD-002","qty":1,"unitCents":1500}],"declared":{"netCents":3498,"vatCents":508,"grossCents":4006}}"""^^rdf:JSON "/orderId") string:jsonPointer "A400" .
#   ("urn:example:order:%s" "A400") string:format "urn:example:order:A400" .
#   <urn:example:order:A400> log:uri "urn:example:order:A400" .
#   ("""{"orderId":"A400","shipTo":{"country":"BE"},"customer":{"email":"ada@other.example","vatId":null},"lines":[{"sku":"WID-001","qty":2,"unitCents":999},{"sku":"GAD-002","qty":1,"unitCents":1500}],"declared":{"netCents":3498,"vatCents":508,"grossCents":4006}}"""^^rdf:JSON "/lines") string:jsonPointer ("""{"sku":"WID-001","qty":2,"unitCents":999}"""^^rdf:JSON """{"sku":"GAD-002","qty":1,"unitCents":1500}"""^^rdf:JSON) .
#   ("""{"sku":"WID-001","qty":2,"unitCents":999}"""^^rdf:JSON """{"sku":"GAD-002","qty":1,"unitCents":1500}"""^^rdf:JSON) list:iterate (0 """{"sku":"WID-001","qty":2,"unitCents":999}"""^^rdf:JSON) .
#   ("""{"sku":"WID-001","qty":2,"unitCents":999}"""^^rdf:JSON "/sku") string:jsonPointer "WID-001" .
#   ("""{"sku":"WID-001","qty":2,"unitCents":999}"""^^rdf:JSON "/qty") string:jsonPointer 2 .
#   ("""{"sku":"WID-001","qty":2,"unitCents":999}"""^^rdf:JSON "/unitCents") string:jsonPointer 999 .
#   ex:Widget a ex:Product .
#   ex:Widget ex:sku "WID-001" .
#   (2 999) math:product 1998 .
#   ("urn:example:order:%s#line:%s" "A400" 0) string:format "urn:example:order:A400#line:0" .
#   <urn:example:order:A400#line:0> log:uri "urn:example:order:A400#line:0" .
#   "WID-001" string:equalIgnoringCase "WID-001" .
# via the schematic forward rule:
#   {
#     ex:feed ex:json ?J .
#     (?J "/orders") string:jsonPointer ?Orders .
#     ?Orders list:iterate (?OrderIndex ?OrderJson) .
#     (?OrderJson "/orderId") string:jsonPointer ?OrderId .
#     ("urn:example:order:%s" ?OrderId) string:format ?OrderUriStr .
#     ?Order log:uri ?OrderUriStr .
#     (?OrderJson "/lines") string:jsonPointer ?Lines .
#     ?Lines list:iterate (?LineIndex ?LineJson) .
#     (?LineJson "/sku") string:jsonPointer ?SkuJson .
#     (?LineJson "/qty") string:jsonPointer ?Qty .
#     (?LineJson "/unitCents") string:jsonPointer ?UnitCents .
#     ?Product a ex:Product .
#     ?Product ex:sku ?SkuCat .
#     (?Qty ?UnitCents) math:product ?NetCents .
#     ("urn:example:order:%s#line:%s" ?OrderId ?LineIndex) string:format ?LineUriStr .
#     ?Line log:uri ?LineUriStr .
#     ?SkuJson string:equalIgnoringCase ?SkuCat .
#   } => {
#     ?Order ex:line ?Line .
#     ?Line a ex:OrderLine .
#     ?Line ex:lineIndex ?LineIndex .
#     ?Line ex:product ?Product .
#     ?Line ex:sku ?SkuCat .
#     ?Line ex:qty ?Qty .
#     ?Line ex:unitCents ?UnitCents .
#     ?Line ex:netCents ?NetCents .
#   } .
# with substitution (on rule variables):
#   ?J = """{
#     "meta~data": { "batch": "2025-12-18" },
#     "orders": [
#     {
#     "orderId": "A100",
#     "shipTo": { "country": "BE" },
#     "customer": { "email": "Ada@Example.ORG", "vatId": null },
#     "lines": [
#     { "sku": "wid-001", "qty": 2, "unitCents": 999 },
#     { "sku": "GAD-002", "qty": 1, "unitCents": 1500 }
#     ],
#     "declared": { "netCents": 3498, "vatCents": 509, "grossCents": 4007 }
#     },
#     {
#     "orderId": "A200",
#     "shipTo": { "country": "US" },
#     "customer": { "email": "bob@example.org", "vatId": null },
#     "lines": [
#     { "sku": "WID-001", "qty": 2, "unitCents": 999 },
#     { "sku": "GAD-002", "qty": 1, "unitCents": 1500 }
#     ],
#     "declared": { "netCents": 3498, "vatCents": 0, "grossCents": 3498 }
#     },
#     {
#     "orderId": "A300",
#     "shipTo": { "country": "NL" },
#     "customer": { "email": "acct@company.nl", "vatId": "NL999999999B01" },
#     "lines": [
#     { "sku": "WID-001", "qty": 2, "unitCents": 999 },
#     { "sku": "GAD-002", "qty": 1, "unitCents": 1500 }
#     ],
#     "declared": { "netCents": 3498, "vatCents": 0, "grossCents": 3498 }
#     },
#     {
#     "orderId": "A301",
#     "shipTo": { "country": "NL" },
#     "customer": { "email": "billing@company.nl", "vatId": "NL999999999B01" },
#     "lines": [
#     { "sku": "WID-001", "qty": 2, "unitCents": 999 },
#     { "sku": "GAD-002", "qty": 1, "unitCents": 1500 }
#     ],
#     "declared": { "netCents": 3498, "vatCents": 0, "grossCents": 3498 }
#     },
#     {
#     "orderId": "A400",
#     "shipTo": { "country": "BE" },
#     "customer": { "email": "ada@other.example", "vatId": null },
#     "lines": [
#     { "sku": "WID-001", "qty": 2, "unitCents": 999 },
#     { "sku": "GAD-002", "qty": 1, "unitCents": 1500 }
#     ],
#     "declared": { "netCents": 3498, "vatCents": 508, "grossCents": 4006 }
#     }
#     ]
#   }"""^^rdf:JSON
#   ?Line = <urn:example:order:A400#line:0>
#   ?LineIndex = 0
#   ?LineJson = """{"sku":"WID-001","qty":2,"unitCents":999}"""^^rdf:JSON
#   ?LineUriStr = "urn:example:order:A400#line:0"
#   ?Lines = ("""{"sku":"WID-001","qty":2,"unitCents":999}"""^^rdf:JSON """{"sku":"GAD-002","qty":1,"unitCents":1500}"""^^rdf:JSON)
#   ?NetCents = 1998
#   ?Order = <urn:example:order:A400>
#   ?OrderId = "A400"
#   ?OrderIndex = 4
#   ?OrderJson = """{"orderId":"A400","shipTo":{"country":"BE"},"customer":{"email":"ada@other.example","vatId":null},"lines":[{"sku":"WID-001","qty":2,"unitCents":999},{"sku":"GAD-002","qty":1,"unitCents":1500}],"declared":{"netCents":3498,"vatCents":508,"grossCents":4006}}"""^^rdf:JSON
#   ?OrderUriStr = "urn:example:order:A400"
#   ?Orders = ("""{"orderId":"A100","shipTo":{"country":"BE"},"customer":{"email":"Ada@Example.ORG","vatId":null},"lines":[{"sku":"wid-001","qty":2,"unitCents":999},{"sku":"GAD-002","qty":1,"unitCents":1500}],"declared":{"netCents":3498,"vatCents":509,"grossCents":4007}}"""^^rdf:JSON """{"orderId":"A200","shipTo":{"country":"US"},"customer":{"email":"bob@example.org","vatId":null},"lines":[{"sku":"WID-001","qty":2,"unitCents":999},{"sku":"GAD-002","qty":1,"unitCents":1500}],"declared":{"netCents":3498,"vatCents":0,"grossCents":3498}}"""^^rdf:JSON """{"orderId":"A300","shipTo":{"country":"NL"},"customer":{"email":"acct@company.nl","vatId":"NL999999999B01"},"lines":[{"sku":"WID-001","qty":2,"unitCents":999},{"sku":"GAD-002","qty":1,"unitCents":1500}],"declared":{"netCents":3498,"vatCents":0,"grossCents":3498}}"""^^rdf:JSON """{"orderId":"A301","shipTo":{"country":"NL"},"customer":{"email":"billing@company.nl","vatId":"NL999999999B01"},"lines":[{"sku":"WID-001","qty":2,"unitCents":999},{"sku":"GAD-002","qty":1,"unitCents":1500}],"declared":{"netCents":3498,"vatCents":0,"grossCents":3498}}"""^^rdf:JSON """{"orderId":"A400","shipTo":{"country":"BE"},"customer":{"email":"ada@other.example","vatId":null},"lines":[{"sku":"WID-001","qty":2,"unitCents":999},{"sku":"GAD-002","qty":1,"unitCents":1500}],"declared":{"netCents":3498,"vatCents":508,"grossCents":4006}}"""^^rdf:JSON)
#   ?Product = ex:Widget
#   ?Qty = 2
#   ?SkuCat = "WID-001"
#   ?SkuJson = "WID-001"
#   ?UnitCents = 999
# Therefore the derived triple above is entailed by the rules and facts.
# ----------------------------------------------------------------------

<urn:example:order:A400> ex:line <urn:example:order:A400#line:0> .

# ----------------------------------------------------------------------
# Proof for derived triple:
#   <urn:example:order:A400#line:0> a ex:OrderLine .
# It holds because the following instance of the rule body is provable:
#   ex:feed ex:json """{
#     "meta~data": { "batch": "2025-12-18" },
#     "orders": [
#       {
#         "orderId": "A100",
#         "shipTo": { "country": "BE" },
#         "customer": { "email": "Ada@Example.ORG", "vatId": null },
#         "lines": [
#           { "sku": "wid-001", "qty": 2, "unitCents": 999 },
#           { "sku": "GAD-002", "qty": 1, "unitCents": 1500 }
#         ],
#         "declared": { "netCents": 3498, "vatCents": 509, "grossCents": 4007 }
#       },
#       {
#         "orderId": "A200",
#         "shipTo": { "country": "US" },
#         "customer": { "email": "bob@example.org", "vatId": null },
#         "lines": [
#           { "sku": "WID-001", "qty": 2, "unitCents": 999 },
#           { "sku": "GAD-002", "qty": 1, "unitCents": 1500 }
#         ],
#         "declared": { "netCents": 3498, "vatCents": 0, "grossCents": 3498 }
#       },
#       {
#         "orderId": "A300",
#         "shipTo": { "country": "NL" },
#         "customer": { "email": "acct@company.nl", "vatId": "NL999999999B01" },
#         "lines": [
#           { "sku": "WID-001", "qty": 2, "unitCents": 999 },
#           { "sku": "GAD-002", "qty": 1, "unitCents": 1500 }
#         ],
#         "declared": { "netCents": 3498, "vatCents": 0, "grossCents": 3498 }
#       },
#       {
#         "orderId": "A301",
#         "shipTo": { "country": "NL" },
#         "customer": { "email": "billing@company.nl", "vatId": "NL999999999B01" },
#         "lines": [
#           { "sku": "WID-001", "qty": 2, "unitCents": 999 },
#           { "sku": "GAD-002", "qty": 1, "unitCents": 1500 }
#         ],
#         "declared": { "netCents": 3498, "vatCents": 0, "grossCents": 3498 }
#       },
#       {
#         "orderId": "A400",
#         "shipTo": { "country": "BE" },
#         "customer": { "email": "ada@other.example", "vatId": null },
#         "lines": [
#           { "sku": "WID-001", "qty": 2, "unitCents": 999 },
#           { "sku": "GAD-002", "qty": 1, "unitCents": 1500 }
#         ],
#         "declared": { "netCents": 3498, "vatCents": 508, "grossCents": 4006 }
#       }
#     ]
#   }"""^^rdf:JSON .
#   ("""{
#     "meta~data": { "batch": "2025-12-18" },
#     "orders": [
#       {
#         "orderId": "A100",
#         "shipTo": { "country": "BE" },
#         "customer": { "email": "Ada@Example.ORG", "vatId": null },
#         "lines": [
#           { "sku": "wid-001", "qty": 2, "unitCents": 999 },
#           { "sku": "GAD-002", "qty": 1, "unitCents": 1500 }
#         ],
#         "declared": { "netCents": 3498, "vatCents": 509, "grossCents": 4007 }
#       },
#       {
#         "orderId": "A200",
#         "shipTo": { "country": "US" },
#         "customer": { "email": "bob@example.org", "vatId": null },
#         "lines": [
#           { "sku": "WID-001", "qty": 2, "unitCents": 999 },
#           { "sku": "GAD-002", "qty": 1, "unitCents": 1500 }
#         ],
#         "declared": { "netCents": 3498, "vatCents": 0, "grossCents": 3498 }
#       },
#       {
#         "orderId": "A300",
#         "shipTo": { "country": "NL" },
#         "customer": { "email": "acct@company.nl", "vatId": "NL999999999B01" },
#         "lines": [
#           { "sku": "WID-001", "qty": 2, "unitCents": 999 },
#           { "sku": "GAD-002", "qty": 1, "unitCents": 1500 }
#         ],
#         "declared": { "netCents": 3498, "vatCents": 0, "grossCents": 3498 }
#       },
#       {
#         "orderId": "A301",
#         "shipTo": { "country": "NL" },
#         "customer": { "email": "billing@company.nl", "vatId": "NL999999999B01" },
#         "lines": [
#           { "sku": "WID-001", "qty": 2, "unitCents": 999 },
#           { "sku": "GAD-002", "qty": 1, "unitCents": 1500 }
#         ],
#         "declared": { "netCents": 3498, "vatCents": 0, "grossCents": 3498 }
#       },
#       {
#         "orderId": "A400",
#         "shipTo": { "country": "BE" },
#         "customer": { "email": "ada@other.example", "vatId": null },
#         "lines": [
#           { "sku": "WID-001", "qty": 2, "unitCents": 999 },
#           { "sku": "GAD-002", "qty": 1, "unitCents": 1500 }
#         ],
#         "declared": { "netCents": 3498, "vatCents": 508, "grossCents": 4006 }
#       }
#     ]
#   }"""^^rdf:JSON "/orders") string:jsonPointer ("""{"orderId":"A100","shipTo":{"country":"BE"},"customer":{"email":"Ada@Example.ORG","vatId":null},"lines":[{"sku":"wid-001","qty":2,"unitCents":999},{"sku":"GAD-002","qty":1,"unitCents":1500}],"declared":{"netCents":3498,"vatCents":509,"grossCents":4007}}"""^^rdf:JSON """{"orderId":"A200","shipTo":{"country":"US"},"customer":{"email":"bob@example.org","vatId":null},"lines":[{"sku":"WID-001","qty":2,"unitCents":999},{"sku":"GAD-002","qty":1,"unitCents":1500}],"declared":{"netCents":3498,"vatCents":0,"grossCents":3498}}"""^^rdf:JSON """{"orderId":"A300","shipTo":{"country":"NL"},"customer":{"email":"acct@company.nl","vatId":"NL999999999B01"},"lines":[{"sku":"WID-001","qty":2,"unitCents":999},{"sku":"GAD-002","qty":1,"unitCents":1500}],"declared":{"netCents":3498,"vatCents":0,"grossCents":3498}}"""^^rdf:JSON """{"orderId":"A301","shipTo":{"country":"NL"},"customer":{"email":"billing@company.nl","vatId":"NL999999999B01"},"lines":[{"sku":"WID-001","qty":2,"unitCents":999},{"sku":"GAD-002","qty":1,"unitCents":1500}],"declared":{"netCents":3498,"vatCents":0,"grossCents":3498}}"""^^rdf:JSON """{"orderId":"A400","shipTo":{"country":"BE"},"customer":{"email":"ada@other.example","vatId":null},"lines":[{"sku":"WID-001","qty":2,"unitCents":999},{"sku":"GAD-002","qty":1,"unitCents":1500}],"declared":{"netCents":3498,"vatCents":508,"grossCents":4006}}"""^^rdf:JSON) .
#   ("""{"orderId":"A100","shipTo":{"country":"BE"},"customer":{"email":"Ada@Example.ORG","vatId":null},"lines":[{"sku":"wid-001","qty":2,"unitCents":999},{"sku":"GAD-002","qty":1,"unitCents":1500}],"declared":{"netCents":3498,"vatCents":509,"grossCents":4007}}"""^^rdf:JSON """{"orderId":"A200","shipTo":{"country":"US"},"customer":{"email":"bob@example.org","vatId":null},"lines":[{"sku":"WID-001","qty":2,"unitCents":999},{"sku":"GAD-002","qty":1,"unitCents":1500}],"declared":{"netCents":3498,"vatCents":0,"grossCents":3498}}"""^^rdf:JSON """{"orderId":"A300","shipTo":{"country":"NL"},"customer":{"email":"acct@company.nl","vatId":"NL999999999B01"},"lines":[{"sku":"WID-001","qty":2,"unitCents":999},{"sku":"GAD-002","qty":1,"unitCents":1500}],"declared":{"netCents":3498,"vatCents":0,"grossCents":3498}}"""^^rdf:JSON """{"orderId":"A301","shipTo":{"country":"NL"},"customer":{"email":"billing@company.nl","vatId":"NL999999999B01"},"lines":[{"sku":"WID-001","qty":2,"unitCents":999},{"sku":"GAD-002","qty":1,"unitCents":1500}],"declared":{"netCents":3498,"vatCents":0,"grossCents":3498}}"""^^rdf:JSON """{"orderId":"A400","shipTo":{"country":"BE"},"customer":{"email":"ada@other.example","vatId":null},"lines":[{"sku":"WID-001","qty":2,"unitCents":999},{"sku":"GAD-002","qty":1,"unitCents":1500}],"declared":{"netCents":3498,"vatCents":508,"grossCents":4006}}"""^^rdf:JSON) list:iterate (4 """{"orderId":"A400","shipTo":{"country":"BE"},"customer":{"email":"ada@other.example","vatId":null},"lines":[{"sku":"WID-001","qty":2,"unitCents":999},{"sku":"GAD-002","qty":1,"unitCents":1500}],"declared":{"netCents":3498,"vatCents":508,"grossCents":4006}}"""^^rdf:JSON) .
#   ("""{"orderId":"A400","shipTo":{"country":"BE"},"customer":{"email":"ada@other.example","vatId":null},"lines":[{"sku":"WID-001","qty":2,"unitCents":999},{"sku":"GAD-002","qty":1,"unitCents":1500}],"declared":{"netCents":3498,"vatCents":508,"grossCents":4006}}"""^^rdf:JSON "/orderId") string:jsonPointer "A400" .
#   ("urn:example:order:%s" "A400") string:format "urn:example:order:A400" .
#   <urn:example:order:A400> log:uri "urn:example:order:A400" .
#   ("""{"orderId":"A400","shipTo":{"country":"BE"},"customer":{"email":"ada@other.example","vatId":null},"lines":[{"sku":"WID-001","qty":2,"unitCents":999},{"sku":"GAD-002","qty":1,"unitCents":1500}],"declared":{"netCents":3498,"vatCents":508,"grossCents":4006}}"""^^rdf:JSON "/lines") string:jsonPointer ("""{"sku":"WID-001","qty":2,"unitCents":999}"""^^rdf:JSON """{"sku":"GAD-002","qty":1,"unitCents":1500}"""^^rdf:JSON) .
#   ("""{"sku":"WID-001","qty":2,"unitCents":999}"""^^rdf:JSON """{"sku":"GAD-002","qty":1,"unitCents":1500}"""^^rdf:JSON) list:iterate (0 """{"sku":"WID-001","qty":2,"unitCents":999}"""^^rdf:JSON) .
#   ("""{"sku":"WID-001","qty":2,"unitCents":999}"""^^rdf:JSON "/sku") string:jsonPointer "WID-001" .
#   ("""{"sku":"WID-001","qty":2,"unitCents":999}"""^^rdf:JSON "/qty") string:jsonPointer 2 .
#   ("""{"sku":"WID-001","qty":2,"unitCents":999}"""^^rdf:JSON "/unitCents") string:jsonPointer 999 .
#   ex:Widget a ex:Product .
#   ex:Widget ex:sku "WID-001" .
#   (2 999) math:product 1998 .
#   ("urn:example:order:%s#line:%s" "A400" 0) string:format "urn:example:order:A400#line:0" .
#   <urn:example:order:A400#line:0> log:uri "urn:example:order:A400#line:0" .
#   "WID-001" string:equalIgnoringCase "WID-001" .
# via the schematic forward rule:
#   {
#     ex:feed ex:json ?J .
#     (?J "/orders") string:jsonPointer ?Orders .
#     ?Orders list:iterate (?OrderIndex ?OrderJson) .
#     (?OrderJson "/orderId") string:jsonPointer ?OrderId .
#     ("urn:example:order:%s" ?OrderId) string:format ?OrderUriStr .
#     ?Order log:uri ?OrderUriStr .
#     (?OrderJson "/lines") string:jsonPointer ?Lines .
#     ?Lines list:iterate (?LineIndex ?LineJson) .
#     (?LineJson "/sku") string:jsonPointer ?SkuJson .
#     (?LineJson "/qty") string:jsonPointer ?Qty .
#     (?LineJson "/unitCents") string:jsonPointer ?UnitCents .
#     ?Product a ex:Product .
#     ?Product ex:sku ?SkuCat .
#     (?Qty ?UnitCents) math:product ?NetCents .
#     ("urn:example:order:%s#line:%s" ?OrderId ?LineIndex) string:format ?LineUriStr .
#     ?Line log:uri ?LineUriStr .
#     ?SkuJson string:equalIgnoringCase ?SkuCat .
#   } => {
#     ?Order ex:line ?Line .
#     ?Line a ex:OrderLine .
#     ?Line ex:lineIndex ?LineIndex .
#     ?Line ex:product ?Product .
#     ?Line ex:sku ?SkuCat .
#     ?Line ex:qty ?Qty .
#     ?Line ex:unitCents ?UnitCents .
#     ?Line ex:netCents ?NetCents .
#   } .
# with substitution (on rule variables):
#   ?J = """{
#     "meta~data": { "batch": "2025-12-18" },
#     "orders": [
#     {
#     "orderId": "A100",
#     "shipTo": { "country": "BE" },
#     "customer": { "email": "Ada@Example.ORG", "vatId": null },
#     "lines": [
#     { "sku": "wid-001", "qty": 2, "unitCents": 999 },
#     { "sku": "GAD-002", "qty": 1, "unitCents": 1500 }
#     ],
#     "declared": { "netCents": 3498, "vatCents": 509, "grossCents": 4007 }
#     },
#     {
#     "orderId": "A200",
#     "shipTo": { "country": "US" },
#     "customer": { "email": "bob@example.org", "vatId": null },
#     "lines": [
#     { "sku": "WID-001", "qty": 2, "unitCents": 999 },
#     { "sku": "GAD-002", "qty": 1, "unitCents": 1500 }
#     ],
#     "declared": { "netCents": 3498, "vatCents": 0, "grossCents": 3498 }
#     },
#     {
#     "orderId": "A300",
#     "shipTo": { "country": "NL" },
#     "customer": { "email": "acct@company.nl", "vatId": "NL999999999B01" },
#     "lines": [
#     { "sku": "WID-001", "qty": 2, "unitCents": 999 },
#     { "sku": "GAD-002", "qty": 1, "unitCents": 1500 }
#     ],
#     "declared": { "netCents": 3498, "vatCents": 0, "grossCents": 3498 }
#     },
#     {
#     "orderId": "A301",
#     "shipTo": { "country": "NL" },
#     "customer": { "email": "billing@company.nl", "vatId": "NL999999999B01" },
#     "lines": [
#     { "sku": "WID-001", "qty": 2, "unitCents": 999 },
#     { "sku": "GAD-002", "qty": 1, "unitCents": 1500 }
#     ],
#     "declared": { "netCents": 3498, "vatCents": 0, "grossCents": 3498 }
#     },
#     {
#     "orderId": "A400",
#     "shipTo": { "country": "BE" },
#     "customer": { "email": "ada@other.example", "vatId": null },
#     "lines": [
#     { "sku": "WID-001", "qty": 2, "unitCents": 999 },
#     { "sku": "GAD-002", "qty": 1, "unitCents": 1500 }
#     ],
#     "declared": { "netCents": 3498, "vatCents": 508, "grossCents": 4006 }
#     }
#     ]
#   }"""^^rdf:JSON
#   ?Line = <urn:example:order:A400#line:0>
#   ?LineIndex = 0
#   ?LineJson = """{"sku":"WID-001","qty":2,"unitCents":999}"""^^rdf:JSON
#   ?LineUriStr = "urn:example:order:A400#line:0"
#   ?Lines = ("""{"sku":"WID-001","qty":2,"unitCents":999}"""^^rdf:JSON """{"sku":"GAD-002","qty":1,"unitCents":1500}"""^^rdf:JSON)
#   ?NetCents = 1998
#   ?Order = <urn:example:order:A400>
#   ?OrderId = "A400"
#   ?OrderIndex = 4
#   ?OrderJson = """{"orderId":"A400","shipTo":{"country":"BE"},"customer":{"email":"ada@other.example","vatId":null},"lines":[{"sku":"WID-001","qty":2,"unitCents":999},{"sku":"GAD-002","qty":1,"unitCents":1500}],"declared":{"netCents":3498,"vatCents":508,"grossCents":4006}}"""^^rdf:JSON
#   ?OrderUriStr = "urn:example:order:A400"
#   ?Orders = ("""{"orderId":"A100","shipTo":{"country":"BE"},"customer":{"email":"Ada@Example.ORG","vatId":null},"lines":[{"sku":"wid-001","qty":2,"unitCents":999},{"sku":"GAD-002","qty":1,"unitCents":1500}],"declared":{"netCents":3498,"vatCents":509,"grossCents":4007}}"""^^rdf:JSON """{"orderId":"A200","shipTo":{"country":"US"},"customer":{"email":"bob@example.org","vatId":null},"lines":[{"sku":"WID-001","qty":2,"unitCents":999},{"sku":"GAD-002","qty":1,"unitCents":1500}],"declared":{"netCents":3498,"vatCents":0,"grossCents":3498}}"""^^rdf:JSON """{"orderId":"A300","shipTo":{"country":"NL"},"customer":{"email":"acct@company.nl","vatId":"NL999999999B01"},"lines":[{"sku":"WID-001","qty":2,"unitCents":999},{"sku":"GAD-002","qty":1,"unitCents":1500}],"declared":{"netCents":3498,"vatCents":0,"grossCents":3498}}"""^^rdf:JSON """{"orderId":"A301","shipTo":{"country":"NL"},"customer":{"email":"billing@company.nl","vatId":"NL999999999B01"},"lines":[{"sku":"WID-001","qty":2,"unitCents":999},{"sku":"GAD-002","qty":1,"unitCents":1500}],"declared":{"netCents":3498,"vatCents":0,"grossCents":3498}}"""^^rdf:JSON """{"orderId":"A400","shipTo":{"country":"BE"},"customer":{"email":"ada@other.example","vatId":null},"lines":[{"sku":"WID-001","qty":2,"unitCents":999},{"sku":"GAD-002","qty":1,"unitCents":1500}],"declared":{"netCents":3498,"vatCents":508,"grossCents":4006}}"""^^rdf:JSON)
#   ?Product = ex:Widget
#   ?Qty = 2
#   ?SkuCat = "WID-001"
#   ?SkuJson = "WID-001"
#   ?UnitCents = 999
# Therefore the derived triple above is entailed by the rules and facts.
# ----------------------------------------------------------------------

<urn:example:order:A400#line:0> a ex:OrderLine .

# ----------------------------------------------------------------------
# Proof for derived triple:
#   <urn:example:order:A400#line:0> ex:lineIndex 0 .
# It holds because the following instance of the rule body is provable:
#   ex:feed ex:json """{
#     "meta~data": { "batch": "2025-12-18" },
#     "orders": [
#       {
#         "orderId": "A100",
#         "shipTo": { "country": "BE" },
#         "customer": { "email": "Ada@Example.ORG", "vatId": null },
#         "lines": [
#           { "sku": "wid-001", "qty": 2, "unitCents": 999 },
#           { "sku": "GAD-002", "qty": 1, "unitCents": 1500 }
#         ],
#         "declared": { "netCents": 3498, "vatCents": 509, "grossCents": 4007 }
#       },
#       {
#         "orderId": "A200",
#         "shipTo": { "country": "US" },
#         "customer": { "email": "bob@example.org", "vatId": null },
#         "lines": [
#           { "sku": "WID-001", "qty": 2, "unitCents": 999 },
#           { "sku": "GAD-002", "qty": 1, "unitCents": 1500 }
#         ],
#         "declared": { "netCents": 3498, "vatCents": 0, "grossCents": 3498 }
#       },
#       {
#         "orderId": "A300",
#         "shipTo": { "country": "NL" },
#         "customer": { "email": "acct@company.nl", "vatId": "NL999999999B01" },
#         "lines": [
#           { "sku": "WID-001", "qty": 2, "unitCents": 999 },
#           { "sku": "GAD-002", "qty": 1, "unitCents": 1500 }
#         ],
#         "declared": { "netCents": 3498, "vatCents": 0, "grossCents": 3498 }
#       },
#       {
#         "orderId": "A301",
#         "shipTo": { "country": "NL" },
#         "customer": { "email": "billing@company.nl", "vatId": "NL999999999B01" },
#         "lines": [
#           { "sku": "WID-001", "qty": 2, "unitCents": 999 },
#           { "sku": "GAD-002", "qty": 1, "unitCents": 1500 }
#         ],
#         "declared": { "netCents": 3498, "vatCents": 0, "grossCents": 3498 }
#       },
#       {
#         "orderId": "A400",
#         "shipTo": { "country": "BE" },
#         "customer": { "email": "ada@other.example", "vatId": null },
#         "lines": [
#           { "sku": "WID-001", "qty": 2, "unitCents": 999 },
#           { "sku": "GAD-002", "qty": 1, "unitCents": 1500 }
#         ],
#         "declared": { "netCents": 3498, "vatCents": 508, "grossCents": 4006 }
#       }
#     ]
#   }"""^^rdf:JSON .
#   ("""{
#     "meta~data": { "batch": "2025-12-18" },
#     "orders": [
#       {
#         "orderId": "A100",
#         "shipTo": { "country": "BE" },
#         "customer": { "email": "Ada@Example.ORG", "vatId": null },
#         "lines": [
#           { "sku": "wid-001", "qty": 2, "unitCents": 999 },
#           { "sku": "GAD-002", "qty": 1, "unitCents": 1500 }
#         ],
#         "declared": { "netCents": 3498, "vatCents": 509, "grossCents": 4007 }
#       },
#       {
#         "orderId": "A200",
#         "shipTo": { "country": "US" },
#         "customer": { "email": "bob@example.org", "vatId": null },
#         "lines": [
#           { "sku": "WID-001", "qty": 2, "unitCents": 999 },
#           { "sku": "GAD-002", "qty": 1, "unitCents": 1500 }
#         ],
#         "declared": { "netCents": 3498, "vatCents": 0, "grossCents": 3498 }
#       },
#       {
#         "orderId": "A300",
#         "shipTo": { "country": "NL" },
#         "customer": { "email": "acct@company.nl", "vatId": "NL999999999B01" },
#         "lines": [
#           { "sku": "WID-001", "qty": 2, "unitCents": 999 },
#           { "sku": "GAD-002", "qty": 1, "unitCents": 1500 }
#         ],
#         "declared": { "netCents": 3498, "vatCents": 0, "grossCents": 3498 }
#       },
#       {
#         "orderId": "A301",
#         "shipTo": { "country": "NL" },
#         "customer": { "email": "billing@company.nl", "vatId": "NL999999999B01" },
#         "lines": [
#           { "sku": "WID-001", "qty": 2, "unitCents": 999 },
#           { "sku": "GAD-002", "qty": 1, "unitCents": 1500 }
#         ],
#         "declared": { "netCents": 3498, "vatCents": 0, "grossCents": 3498 }
#       },
#       {
#         "orderId": "A400",
#         "shipTo": { "country": "BE" },
#         "customer": { "email": "ada@other.example", "vatId": null },
#         "lines": [
#           { "sku": "WID-001", "qty": 2, "unitCents": 999 },
#           { "sku": "GAD-002", "qty": 1, "unitCents": 1500 }
#         ],
#         "declared": { "netCents": 3498, "vatCents": 508, "grossCents": 4006 }
#       }
#     ]
#   }"""^^rdf:JSON "/orders") string:jsonPointer ("""{"orderId":"A100","shipTo":{"country":"BE"},"customer":{"email":"Ada@Example.ORG","vatId":null},"lines":[{"sku":"wid-001","qty":2,"unitCents":999},{"sku":"GAD-002","qty":1,"unitCents":1500}],"declared":{"netCents":3498,"vatCents":509,"grossCents":4007}}"""^^rdf:JSON """{"orderId":"A200","shipTo":{"country":"US"},"customer":{"email":"bob@example.org","vatId":null},"lines":[{"sku":"WID-001","qty":2,"unitCents":999},{"sku":"GAD-002","qty":1,"unitCents":1500}],"declared":{"netCents":3498,"vatCents":0,"grossCents":3498}}"""^^rdf:JSON """{"orderId":"A300","shipTo":{"country":"NL"},"customer":{"email":"acct@company.nl","vatId":"NL999999999B01"},"lines":[{"sku":"WID-001","qty":2,"unitCents":999},{"sku":"GAD-002","qty":1,"unitCents":1500}],"declared":{"netCents":3498,"vatCents":0,"grossCents":3498}}"""^^rdf:JSON """{"orderId":"A301","shipTo":{"country":"NL"},"customer":{"email":"billing@company.nl","vatId":"NL999999999B01"},"lines":[{"sku":"WID-001","qty":2,"unitCents":999},{"sku":"GAD-002","qty":1,"unitCents":1500}],"declared":{"netCents":3498,"vatCents":0,"grossCents":3498}}"""^^rdf:JSON """{"orderId":"A400","shipTo":{"country":"BE"},"customer":{"email":"ada@other.example","vatId":null},"lines":[{"sku":"WID-001","qty":2,"unitCents":999},{"sku":"GAD-002","qty":1,"unitCents":1500}],"declared":{"netCents":3498,"vatCents":508,"grossCents":4006}}"""^^rdf:JSON) .
#   ("""{"orderId":"A100","shipTo":{"country":"BE"},"customer":{"email":"Ada@Example.ORG","vatId":null},"lines":[{"sku":"wid-001","qty":2,"unitCents":999},{"sku":"GAD-002","qty":1,"unitCents":1500}],"declared":{"netCents":3498,"vatCents":509,"grossCents":4007}}"""^^rdf:JSON """{"orderId":"A200","shipTo":{"country":"US"},"customer":{"email":"bob@example.org","vatId":null},"lines":[{"sku":"WID-001","qty":2,"unitCents":999},{"sku":"GAD-002","qty":1,"unitCents":1500}],"declared":{"netCents":3498,"vatCents":0,"grossCents":3498}}"""^^rdf:JSON """{"orderId":"A300","shipTo":{"country":"NL"},"customer":{"email":"acct@company.nl","vatId":"NL999999999B01"},"lines":[{"sku":"WID-001","qty":2,"unitCents":999},{"sku":"GAD-002","qty":1,"unitCents":1500}],"declared":{"netCents":3498,"vatCents":0,"grossCents":3498}}"""^^rdf:JSON """{"orderId":"A301","shipTo":{"country":"NL"},"customer":{"email":"billing@company.nl","vatId":"NL999999999B01"},"lines":[{"sku":"WID-001","qty":2,"unitCents":999},{"sku":"GAD-002","qty":1,"unitCents":1500}],"declared":{"netCents":3498,"vatCents":0,"grossCents":3498}}"""^^rdf:JSON """{"orderId":"A400","shipTo":{"country":"BE"},"customer":{"email":"ada@other.example","vatId":null},"lines":[{"sku":"WID-001","qty":2,"unitCents":999},{"sku":"GAD-002","qty":1,"unitCents":1500}],"declared":{"netCents":3498,"vatCents":508,"grossCents":4006}}"""^^rdf:JSON) list:iterate (4 """{"orderId":"A400","shipTo":{"country":"BE"},"customer":{"email":"ada@other.example","vatId":null},"lines":[{"sku":"WID-001","qty":2,"unitCents":999},{"sku":"GAD-002","qty":1,"unitCents":1500}],"declared":{"netCents":3498,"vatCents":508,"grossCents":4006}}"""^^rdf:JSON) .
#   ("""{"orderId":"A400","shipTo":{"country":"BE"},"customer":{"email":"ada@other.example","vatId":null},"lines":[{"sku":"WID-001","qty":2,"unitCents":999},{"sku":"GAD-002","qty":1,"unitCents":1500}],"declared":{"netCents":3498,"vatCents":508,"grossCents":4006}}"""^^rdf:JSON "/orderId") string:jsonPointer "A400" .
#   ("urn:example:order:%s" "A400") string:format "urn:example:order:A400" .
#   <urn:example:order:A400> log:uri "urn:example:order:A400" .
#   ("""{"orderId":"A400","shipTo":{"country":"BE"},"customer":{"email":"ada@other.example","vatId":null},"lines":[{"sku":"WID-001","qty":2,"unitCents":999},{"sku":"GAD-002","qty":1,"unitCents":1500}],"declared":{"netCents":3498,"vatCents":508,"grossCents":4006}}"""^^rdf:JSON "/lines") string:jsonPointer ("""{"sku":"WID-001","qty":2,"unitCents":999}"""^^rdf:JSON """{"sku":"GAD-002","qty":1,"unitCents":1500}"""^^rdf:JSON) .
#   ("""{"sku":"WID-001","qty":2,"unitCents":999}"""^^rdf:JSON """{"sku":"GAD-002","qty":1,"unitCents":1500}"""^^rdf:JSON) list:iterate (0 """{"sku":"WID-001","qty":2,"unitCents":999}"""^^rdf:JSON) .
#   ("""{"sku":"WID-001","qty":2,"unitCents":999}"""^^rdf:JSON "/sku") string:jsonPointer "WID-001" .
#   ("""{"sku":"WID-001","qty":2,"unitCents":999}"""^^rdf:JSON "/qty") string:jsonPointer 2 .
#   ("""{"sku":"WID-001","qty":2,"unitCents":999}"""^^rdf:JSON "/unitCents") string:jsonPointer 999 .
#   ex:Widget a ex:Product .
#   ex:Widget ex:sku "WID-001" .
#   (2 999) math:product 1998 .
#   ("urn:example:order:%s#line:%s" "A400" 0) string:format "urn:example:order:A400#line:0" .
#   <urn:example:order:A400#line:0> log:uri "urn:example:order:A400#line:0" .
#   "WID-001" string:equalIgnoringCase "WID-001" .
# via the schematic forward rule:
#   {
#     ex:feed ex:json ?J .
#     (?J "/orders") string:jsonPointer ?Orders .
#     ?Orders list:iterate (?OrderIndex ?OrderJson) .
#     (?OrderJson "/orderId") string:jsonPointer ?OrderId .
#     ("urn:example:order:%s" ?OrderId) string:format ?OrderUriStr .
#     ?Order log:uri ?OrderUriStr .
#     (?OrderJson "/lines") string:jsonPointer ?Lines .
#     ?Lines list:iterate (?LineIndex ?LineJson) .
#     (?LineJson "/sku") string:jsonPointer ?SkuJson .
#     (?LineJson "/qty") string:jsonPointer ?Qty .
#     (?LineJson "/unitCents") string:jsonPointer ?UnitCents .
#     ?Product a ex:Product .
#     ?Product ex:sku ?SkuCat .
#     (?Qty ?UnitCents) math:product ?NetCents .
#     ("urn:example:order:%s#line:%s" ?OrderId ?LineIndex) string:format ?LineUriStr .
#     ?Line log:uri ?LineUriStr .
#     ?SkuJson string:equalIgnoringCase ?SkuCat .
#   } => {
#     ?Order ex:line ?Line .
#     ?Line a ex:OrderLine .
#     ?Line ex:lineIndex ?LineIndex .
#     ?Line ex:product ?Product .
#     ?Line ex:sku ?SkuCat .
#     ?Line ex:qty ?Qty .
#     ?Line ex:unitCents ?UnitCents .
#     ?Line ex:netCents ?NetCents .
#   } .
# with substitution (on rule variables):
#   ?J = """{
#     "meta~data": { "batch": "2025-12-18" },
#     "orders": [
#     {
#     "orderId": "A100",
#     "shipTo": { "country": "BE" },
#     "customer": { "email": "Ada@Example.ORG", "vatId": null },
#     "lines": [
#     { "sku": "wid-001", "qty": 2, "unitCents": 999 },
#     { "sku": "GAD-002", "qty": 1, "unitCents": 1500 }
#     ],
#     "declared": { "netCents": 3498, "vatCents": 509, "grossCents": 4007 }
#     },
#     {
#     "orderId": "A200",
#     "shipTo": { "country": "US" },
#     "customer": { "email": "bob@example.org", "vatId": null },
#     "lines": [
#     { "sku": "WID-001", "qty": 2, "unitCents": 999 },
#     { "sku": "GAD-002", "qty": 1, "unitCents": 1500 }
#     ],
#     "declared": { "netCents": 3498, "vatCents": 0, "grossCents": 3498 }
#     },
#     {
#     "orderId": "A300",
#     "shipTo": { "country": "NL" },
#     "customer": { "email": "acct@company.nl", "vatId": "NL999999999B01" },
#     "lines": [
#     { "sku": "WID-001", "qty": 2, "unitCents": 999 },
#     { "sku": "GAD-002", "qty": 1, "unitCents": 1500 }
#     ],
#     "declared": { "netCents": 3498, "vatCents": 0, "grossCents": 3498 }
#     },
#     {
#     "orderId": "A301",
#     "shipTo": { "country": "NL" },
#     "customer": { "email": "billing@company.nl", "vatId": "NL999999999B01" },
#     "lines": [
#     { "sku": "WID-001", "qty": 2, "unitCents": 999 },
#     { "sku": "GAD-002", "qty": 1, "unitCents": 1500 }
#     ],
#     "declared": { "netCents": 3498, "vatCents": 0, "grossCents": 3498 }
#     },
#     {
#     "orderId": "A400",
#     "shipTo": { "country": "BE" },
#     "customer": { "email": "ada@other.example", "vatId": null },
#     "lines": [
#     { "sku": "WID-001", "qty": 2, "unitCents": 999 },
#     { "sku": "GAD-002", "qty": 1, "unitCents": 1500 }
#     ],
#     "declared": { "netCents": 3498, "vatCents": 508, "grossCents": 4006 }
#     }
#     ]
#   }"""^^rdf:JSON
#   ?Line = <urn:example:order:A400#line:0>
#   ?LineIndex = 0
#   ?LineJson = """{"sku":"WID-001","qty":2,"unitCents":999}"""^^rdf:JSON
#   ?LineUriStr = "urn:example:order:A400#line:0"
#   ?Lines = ("""{"sku":"WID-001","qty":2,"unitCents":999}"""^^rdf:JSON """{"sku":"GAD-002","qty":1,"unitCents":1500}"""^^rdf:JSON)
#   ?NetCents = 1998
#   ?Order = <urn:example:order:A400>
#   ?OrderId = "A400"
#   ?OrderIndex = 4
#   ?OrderJson = """{"orderId":"A400","shipTo":{"country":"BE"},"customer":{"email":"ada@other.example","vatId":null},"lines":[{"sku":"WID-001","qty":2,"unitCents":999},{"sku":"GAD-002","qty":1,"unitCents":1500}],"declared":{"netCents":3498,"vatCents":508,"grossCents":4006}}"""^^rdf:JSON
#   ?OrderUriStr = "urn:example:order:A400"
#   ?Orders = ("""{"orderId":"A100","shipTo":{"country":"BE"},"customer":{"email":"Ada@Example.ORG","vatId":null},"lines":[{"sku":"wid-001","qty":2,"unitCents":999},{"sku":"GAD-002","qty":1,"unitCents":1500}],"declared":{"netCents":3498,"vatCents":509,"grossCents":4007}}"""^^rdf:JSON """{"orderId":"A200","shipTo":{"country":"US"},"customer":{"email":"bob@example.org","vatId":null},"lines":[{"sku":"WID-001","qty":2,"unitCents":999},{"sku":"GAD-002","qty":1,"unitCents":1500}],"declared":{"netCents":3498,"vatCents":0,"grossCents":3498}}"""^^rdf:JSON """{"orderId":"A300","shipTo":{"country":"NL"},"customer":{"email":"acct@company.nl","vatId":"NL999999999B01"},"lines":[{"sku":"WID-001","qty":2,"unitCents":999},{"sku":"GAD-002","qty":1,"unitCents":1500}],"declared":{"netCents":3498,"vatCents":0,"grossCents":3498}}"""^^rdf:JSON """{"orderId":"A301","shipTo":{"country":"NL"},"customer":{"email":"billing@company.nl","vatId":"NL999999999B01"},"lines":[{"sku":"WID-001","qty":2,"unitCents":999},{"sku":"GAD-002","qty":1,"unitCents":1500}],"declared":{"netCents":3498,"vatCents":0,"grossCents":3498}}"""^^rdf:JSON """{"orderId":"A400","shipTo":{"country":"BE"},"customer":{"email":"ada@other.example","vatId":null},"lines":[{"sku":"WID-001","qty":2,"unitCents":999},{"sku":"GAD-002","qty":1,"unitCents":1500}],"declared":{"netCents":3498,"vatCents":508,"grossCents":4006}}"""^^rdf:JSON)
#   ?Product = ex:Widget
#   ?Qty = 2
#   ?SkuCat = "WID-001"
#   ?SkuJson = "WID-001"
#   ?UnitCents = 999
# Therefore the derived triple above is entailed by the rules and facts.
# ----------------------------------------------------------------------

<urn:example:order:A400#line:0> ex:lineIndex 0 .

# ----------------------------------------------------------------------
# Proof for derived triple:
#   <urn:example:order:A400#line:0> ex:product ex:Widget .
# It holds because the following instance of the rule body is provable:
#   ex:feed ex:json """{
#     "meta~data": { "batch": "2025-12-18" },
#     "orders": [
#       {
#         "orderId": "A100",
#         "shipTo": { "country": "BE" },
#         "customer": { "email": "Ada@Example.ORG", "vatId": null },
#         "lines": [
#           { "sku": "wid-001", "qty": 2, "unitCents": 999 },
#           { "sku": "GAD-002", "qty": 1, "unitCents": 1500 }
#         ],
#         "declared": { "netCents": 3498, "vatCents": 509, "grossCents": 4007 }
#       },
#       {
#         "orderId": "A200",
#         "shipTo": { "country": "US" },
#         "customer": { "email": "bob@example.org", "vatId": null },
#         "lines": [
#           { "sku": "WID-001", "qty": 2, "unitCents": 999 },
#           { "sku": "GAD-002", "qty": 1, "unitCents": 1500 }
#         ],
#         "declared": { "netCents": 3498, "vatCents": 0, "grossCents": 3498 }
#       },
#       {
#         "orderId": "A300",
#         "shipTo": { "country": "NL" },
#         "customer": { "email": "acct@company.nl", "vatId": "NL999999999B01" },
#         "lines": [
#           { "sku": "WID-001", "qty": 2, "unitCents": 999 },
#           { "sku": "GAD-002", "qty": 1, "unitCents": 1500 }
#         ],
#         "declared": { "netCents": 3498, "vatCents": 0, "grossCents": 3498 }
#       },
#       {
#         "orderId": "A301",
#         "shipTo": { "country": "NL" },
#         "customer": { "email": "billing@company.nl", "vatId": "NL999999999B01" },
#         "lines": [
#           { "sku": "WID-001", "qty": 2, "unitCents": 999 },
#           { "sku": "GAD-002", "qty": 1, "unitCents": 1500 }
#         ],
#         "declared": { "netCents": 3498, "vatCents": 0, "grossCents": 3498 }
#       },
#       {
#         "orderId": "A400",
#         "shipTo": { "country": "BE" },
#         "customer": { "email": "ada@other.example", "vatId": null },
#         "lines": [
#           { "sku": "WID-001", "qty": 2, "unitCents": 999 },
#           { "sku": "GAD-002", "qty": 1, "unitCents": 1500 }
#         ],
#         "declared": { "netCents": 3498, "vatCents": 508, "grossCents": 4006 }
#       }
#     ]
#   }"""^^rdf:JSON .
#   ("""{
#     "meta~data": { "batch": "2025-12-18" },
#     "orders": [
#       {
#         "orderId": "A100",
#         "shipTo": { "country": "BE" },
#         "customer": { "email": "Ada@Example.ORG", "vatId": null },
#         "lines": [
#           { "sku": "wid-001", "qty": 2, "unitCents": 999 },
#           { "sku": "GAD-002", "qty": 1, "unitCents": 1500 }
#         ],
#         "declared": { "netCents": 3498, "vatCents": 509, "grossCents": 4007 }
#       },
#       {
#         "orderId": "A200",
#         "shipTo": { "country": "US" },
#         "customer": { "email": "bob@example.org", "vatId": null },
#         "lines": [
#           { "sku": "WID-001", "qty": 2, "unitCents": 999 },
#           { "sku": "GAD-002", "qty": 1, "unitCents": 1500 }
#         ],
#         "declared": { "netCents": 3498, "vatCents": 0, "grossCents": 3498 }
#       },
#       {
#         "orderId": "A300",
#         "shipTo": { "country": "NL" },
#         "customer": { "email": "acct@company.nl", "vatId": "NL999999999B01" },
#         "lines": [
#           { "sku": "WID-001", "qty": 2, "unitCents": 999 },
#           { "sku": "GAD-002", "qty": 1, "unitCents": 1500 }
#         ],
#         "declared": { "netCents": 3498, "vatCents": 0, "grossCents": 3498 }
#       },
#       {
#         "orderId": "A301",
#         "shipTo": { "country": "NL" },
#         "customer": { "email": "billing@company.nl", "vatId": "NL999999999B01" },
#         "lines": [
#           { "sku": "WID-001", "qty": 2, "unitCents": 999 },
#           { "sku": "GAD-002", "qty": 1, "unitCents": 1500 }
#         ],
#         "declared": { "netCents": 3498, "vatCents": 0, "grossCents": 3498 }
#       },
#       {
#         "orderId": "A400",
#         "shipTo": { "country": "BE" },
#         "customer": { "email": "ada@other.example", "vatId": null },
#         "lines": [
#           { "sku": "WID-001", "qty": 2, "unitCents": 999 },
#           { "sku": "GAD-002", "qty": 1, "unitCents": 1500 }
#         ],
#         "declared": { "netCents": 3498, "vatCents": 508, "grossCents": 4006 }
#       }
#     ]
#   }"""^^rdf:JSON "/orders") string:jsonPointer ("""{"orderId":"A100","shipTo":{"country":"BE"},"customer":{"email":"Ada@Example.ORG","vatId":null},"lines":[{"sku":"wid-001","qty":2,"unitCents":999},{"sku":"GAD-002","qty":1,"unitCents":1500}],"declared":{"netCents":3498,"vatCents":509,"grossCents":4007}}"""^^rdf:JSON """{"orderId":"A200","shipTo":{"country":"US"},"customer":{"email":"bob@example.org","vatId":null},"lines":[{"sku":"WID-001","qty":2,"unitCents":999},{"sku":"GAD-002","qty":1,"unitCents":1500}],"declared":{"netCents":3498,"vatCents":0,"grossCents":3498}}"""^^rdf:JSON """{"orderId":"A300","shipTo":{"country":"NL"},"customer":{"email":"acct@company.nl","vatId":"NL999999999B01"},"lines":[{"sku":"WID-001","qty":2,"unitCents":999},{"sku":"GAD-002","qty":1,"unitCents":1500}],"declared":{"netCents":3498,"vatCents":0,"grossCents":3498}}"""^^rdf:JSON """{"orderId":"A301","shipTo":{"country":"NL"},"customer":{"email":"billing@company.nl","vatId":"NL999999999B01"},"lines":[{"sku":"WID-001","qty":2,"unitCents":999},{"sku":"GAD-002","qty":1,"unitCents":1500}],"declared":{"netCents":3498,"vatCents":0,"grossCents":3498}}"""^^rdf:JSON """{"orderId":"A400","shipTo":{"country":"BE"},"customer":{"email":"ada@other.example","vatId":null},"lines":[{"sku":"WID-001","qty":2,"unitCents":999},{"sku":"GAD-002","qty":1,"unitCents":1500}],"declared":{"netCents":3498,"vatCents":508,"grossCents":4006}}"""^^rdf:JSON) .
#   ("""{"orderId":"A100","shipTo":{"country":"BE"},"customer":{"email":"Ada@Example.ORG","vatId":null},"lines":[{"sku":"wid-001","qty":2,"unitCents":999},{"sku":"GAD-002","qty":1,"unitCents":1500}],"declared":{"netCents":3498,"vatCents":509,"grossCents":4007}}"""^^rdf:JSON """{"orderId":"A200","shipTo":{"country":"US"},"customer":{"email":"bob@example.org","vatId":null},"lines":[{"sku":"WID-001","qty":2,"unitCents":999},{"sku":"GAD-002","qty":1,"unitCents":1500}],"declared":{"netCents":3498,"vatCents":0,"grossCents":3498}}"""^^rdf:JSON """{"orderId":"A300","shipTo":{"country":"NL"},"customer":{"email":"acct@company.nl","vatId":"NL999999999B01"},"lines":[{"sku":"WID-001","qty":2,"unitCents":999},{"sku":"GAD-002","qty":1,"unitCents":1500}],"declared":{"netCents":3498,"vatCents":0,"grossCents":3498}}"""^^rdf:JSON """{"orderId":"A301","shipTo":{"country":"NL"},"customer":{"email":"billing@company.nl","vatId":"NL999999999B01"},"lines":[{"sku":"WID-001","qty":2,"unitCents":999},{"sku":"GAD-002","qty":1,"unitCents":1500}],"declared":{"netCents":3498,"vatCents":0,"grossCents":3498}}"""^^rdf:JSON """{"orderId":"A400","shipTo":{"country":"BE"},"customer":{"email":"ada@other.example","vatId":null},"lines":[{"sku":"WID-001","qty":2,"unitCents":999},{"sku":"GAD-002","qty":1,"unitCents":1500}],"declared":{"netCents":3498,"vatCents":508,"grossCents":4006}}"""^^rdf:JSON) list:iterate (4 """{"orderId":"A400","shipTo":{"country":"BE"},"customer":{"email":"ada@other.example","vatId":null},"lines":[{"sku":"WID-001","qty":2,"unitCents":999},{"sku":"GAD-002","qty":1,"unitCents":1500}],"declared":{"netCents":3498,"vatCents":508,"grossCents":4006}}"""^^rdf:JSON) .
#   ("""{"orderId":"A400","shipTo":{"country":"BE"},"customer":{"email":"ada@other.example","vatId":null},"lines":[{"sku":"WID-001","qty":2,"unitCents":999},{"sku":"GAD-002","qty":1,"unitCents":1500}],"declared":{"netCents":3498,"vatCents":508,"grossCents":4006}}"""^^rdf:JSON "/orderId") string:jsonPointer "A400" .
#   ("urn:example:order:%s" "A400") string:format "urn:example:order:A400" .
#   <urn:example:order:A400> log:uri "urn:example:order:A400" .
#   ("""{"orderId":"A400","shipTo":{"country":"BE"},"customer":{"email":"ada@other.example","vatId":null},"lines":[{"sku":"WID-001","qty":2,"unitCents":999},{"sku":"GAD-002","qty":1,"unitCents":1500}],"declared":{"netCents":3498,"vatCents":508,"grossCents":4006}}"""^^rdf:JSON "/lines") string:jsonPointer ("""{"sku":"WID-001","qty":2,"unitCents":999}"""^^rdf:JSON """{"sku":"GAD-002","qty":1,"unitCents":1500}"""^^rdf:JSON) .
#   ("""{"sku":"WID-001","qty":2,"unitCents":999}"""^^rdf:JSON """{"sku":"GAD-002","qty":1,"unitCents":1500}"""^^rdf:JSON) list:iterate (0 """{"sku":"WID-001","qty":2,"unitCents":999}"""^^rdf:JSON) .
#   ("""{"sku":"WID-001","qty":2,"unitCents":999}"""^^rdf:JSON "/sku") string:jsonPointer "WID-001" .
#   ("""{"sku":"WID-001","qty":2,"unitCents":999}"""^^rdf:JSON "/qty") string:jsonPointer 2 .
#   ("""{"sku":"WID-001","qty":2,"unitCents":999}"""^^rdf:JSON "/unitCents") string:jsonPointer 999 .
#   ex:Widget a ex:Product .
#   ex:Widget ex:sku "WID-001" .
#   (2 999) math:product 1998 .
#   ("urn:example:order:%s#line:%s" "A400" 0) string:format "urn:example:order:A400#line:0" .
#   <urn:example:order:A400#line:0> log:uri "urn:example:order:A400#line:0" .
#   "WID-001" string:equalIgnoringCase "WID-001" .
# via the schematic forward rule:
#   {
#     ex:feed ex:json ?J .
#     (?J "/orders") string:jsonPointer ?Orders .
#     ?Orders list:iterate (?OrderIndex ?OrderJson) .
#     (?OrderJson "/orderId") string:jsonPointer ?OrderId .
#     ("urn:example:order:%s" ?OrderId) string:format ?OrderUriStr .
#     ?Order log:uri ?OrderUriStr .
#     (?OrderJson "/lines") string:jsonPointer ?Lines .
#     ?Lines list:iterate (?LineIndex ?LineJson) .
#     (?LineJson "/sku") string:jsonPointer ?SkuJson .
#     (?LineJson "/qty") string:jsonPointer ?Qty .
#     (?LineJson "/unitCents") string:jsonPointer ?UnitCents .
#     ?Product a ex:Product .
#     ?Product ex:sku ?SkuCat .
#     (?Qty ?UnitCents) math:product ?NetCents .
#     ("urn:example:order:%s#line:%s" ?OrderId ?LineIndex) string:format ?LineUriStr .
#     ?Line log:uri ?LineUriStr .
#     ?SkuJson string:equalIgnoringCase ?SkuCat .
#   } => {
#     ?Order ex:line ?Line .
#     ?Line a ex:OrderLine .
#     ?Line ex:lineIndex ?LineIndex .
#     ?Line ex:product ?Product .
#     ?Line ex:sku ?SkuCat .
#     ?Line ex:qty ?Qty .
#     ?Line ex:unitCents ?UnitCents .
#     ?Line ex:netCents ?NetCents .
#   } .
# with substitution (on rule variables):
#   ?J = """{
#     "meta~data": { "batch": "2025-12-18" },
#     "orders": [
#     {
#     "orderId": "A100",
#     "shipTo": { "country": "BE" },
#     "customer": { "email": "Ada@Example.ORG", "vatId": null },
#     "lines": [
#     { "sku": "wid-001", "qty": 2, "unitCents": 999 },
#     { "sku": "GAD-002", "qty": 1, "unitCents": 1500 }
#     ],
#     "declared": { "netCents": 3498, "vatCents": 509, "grossCents": 4007 }
#     },
#     {
#     "orderId": "A200",
#     "shipTo": { "country": "US" },
#     "customer": { "email": "bob@example.org", "vatId": null },
#     "lines": [
#     { "sku": "WID-001", "qty": 2, "unitCents": 999 },
#     { "sku": "GAD-002", "qty": 1, "unitCents": 1500 }
#     ],
#     "declared": { "netCents": 3498, "vatCents": 0, "grossCents": 3498 }
#     },
#     {
#     "orderId": "A300",
#     "shipTo": { "country": "NL" },
#     "customer": { "email": "acct@company.nl", "vatId": "NL999999999B01" },
#     "lines": [
#     { "sku": "WID-001", "qty": 2, "unitCents": 999 },
#     { "sku": "GAD-002", "qty": 1, "unitCents": 1500 }
#     ],
#     "declared": { "netCents": 3498, "vatCents": 0, "grossCents": 3498 }
#     },
#     {
#     "orderId": "A301",
#     "shipTo": { "country": "NL" },
#     "customer": { "email": "billing@company.nl", "vatId": "NL999999999B01" },
#     "lines": [
#     { "sku": "WID-001", "qty": 2, "unitCents": 999 },
#     { "sku": "GAD-002", "qty": 1, "unitCents": 1500 }
#     ],
#     "declared": { "netCents": 3498, "vatCents": 0, "grossCents": 3498 }
#     },
#     {
#     "orderId": "A400",
#     "shipTo": { "country": "BE" },
#     "customer": { "email": "ada@other.example", "vatId": null },
#     "lines": [
#     { "sku": "WID-001", "qty": 2, "unitCents": 999 },
#     { "sku": "GAD-002", "qty": 1, "unitCents": 1500 }
#     ],
#     "declared": { "netCents": 3498, "vatCents": 508, "grossCents": 4006 }
#     }
#     ]
#   }"""^^rdf:JSON
#   ?Line = <urn:example:order:A400#line:0>
#   ?LineIndex = 0
#   ?LineJson = """{"sku":"WID-001","qty":2,"unitCents":999}"""^^rdf:JSON
#   ?LineUriStr = "urn:example:order:A400#line:0"
#   ?Lines = ("""{"sku":"WID-001","qty":2,"unitCents":999}"""^^rdf:JSON """{"sku":"GAD-002","qty":1,"unitCents":1500}"""^^rdf:JSON)
#   ?NetCents = 1998
#   ?Order = <urn:example:order:A400>
#   ?OrderId = "A400"
#   ?OrderIndex = 4
#   ?OrderJson = """{"orderId":"A400","shipTo":{"country":"BE"},"customer":{"email":"ada@other.example","vatId":null},"lines":[{"sku":"WID-001","qty":2,"unitCents":999},{"sku":"GAD-002","qty":1,"unitCents":1500}],"declared":{"netCents":3498,"vatCents":508,"grossCents":4006}}"""^^rdf:JSON
#   ?OrderUriStr = "urn:example:order:A400"
#   ?Orders = ("""{"orderId":"A100","shipTo":{"country":"BE"},"customer":{"email":"Ada@Example.ORG","vatId":null},"lines":[{"sku":"wid-001","qty":2,"unitCents":999},{"sku":"GAD-002","qty":1,"unitCents":1500}],"declared":{"netCents":3498,"vatCents":509,"grossCents":4007}}"""^^rdf:JSON """{"orderId":"A200","shipTo":{"country":"US"},"customer":{"email":"bob@example.org","vatId":null},"lines":[{"sku":"WID-001","qty":2,"unitCents":999},{"sku":"GAD-002","qty":1,"unitCents":1500}],"declared":{"netCents":3498,"vatCents":0,"grossCents":3498}}"""^^rdf:JSON """{"orderId":"A300","shipTo":{"country":"NL"},"customer":{"email":"acct@company.nl","vatId":"NL999999999B01"},"lines":[{"sku":"WID-001","qty":2,"unitCents":999},{"sku":"GAD-002","qty":1,"unitCents":1500}],"declared":{"netCents":3498,"vatCents":0,"grossCents":3498}}"""^^rdf:JSON """{"orderId":"A301","shipTo":{"country":"NL"},"customer":{"email":"billing@company.nl","vatId":"NL999999999B01"},"lines":[{"sku":"WID-001","qty":2,"unitCents":999},{"sku":"GAD-002","qty":1,"unitCents":1500}],"declared":{"netCents":3498,"vatCents":0,"grossCents":3498}}"""^^rdf:JSON """{"orderId":"A400","shipTo":{"country":"BE"},"customer":{"email":"ada@other.example","vatId":null},"lines":[{"sku":"WID-001","qty":2,"unitCents":999},{"sku":"GAD-002","qty":1,"unitCents":1500}],"declared":{"netCents":3498,"vatCents":508,"grossCents":4006}}"""^^rdf:JSON)
#   ?Product = ex:Widget
#   ?Qty = 2
#   ?SkuCat = "WID-001"
#   ?SkuJson = "WID-001"
#   ?UnitCents = 999
# Therefore the derived triple above is entailed by the rules and facts.
# ----------------------------------------------------------------------

<urn:example:order:A400#line:0> ex:product ex:Widget .

# ----------------------------------------------------------------------
# Proof for derived triple:
#   <urn:example:order:A400#line:0> ex:sku "WID-001" .
# It holds because the following instance of the rule body is provable:
#   ex:feed ex:json """{
#     "meta~data": { "batch": "2025-12-18" },
#     "orders": [
#       {
#         "orderId": "A100",
#         "shipTo": { "country": "BE" },
#         "customer": { "email": "Ada@Example.ORG", "vatId": null },
#         "lines": [
#           { "sku": "wid-001", "qty": 2, "unitCents": 999 },
#           { "sku": "GAD-002", "qty": 1, "unitCents": 1500 }
#         ],
#         "declared": { "netCents": 3498, "vatCents": 509, "grossCents": 4007 }
#       },
#       {
#         "orderId": "A200",
#         "shipTo": { "country": "US" },
#         "customer": { "email": "bob@example.org", "vatId": null },
#         "lines": [
#           { "sku": "WID-001", "qty": 2, "unitCents": 999 },
#           { "sku": "GAD-002", "qty": 1, "unitCents": 1500 }
#         ],
#         "declared": { "netCents": 3498, "vatCents": 0, "grossCents": 3498 }
#       },
#       {
#         "orderId": "A300",
#         "shipTo": { "country": "NL" },
#         "customer": { "email": "acct@company.nl", "vatId": "NL999999999B01" },
#         "lines": [
#           { "sku": "WID-001", "qty": 2, "unitCents": 999 },
#           { "sku": "GAD-002", "qty": 1, "unitCents": 1500 }
#         ],
#         "declared": { "netCents": 3498, "vatCents": 0, "grossCents": 3498 }
#       },
#       {
#         "orderId": "A301",
#         "shipTo": { "country": "NL" },
#         "customer": { "email": "billing@company.nl", "vatId": "NL999999999B01" },
#         "lines": [
#           { "sku": "WID-001", "qty": 2, "unitCents": 999 },
#           { "sku": "GAD-002", "qty": 1, "unitCents": 1500 }
#         ],
#         "declared": { "netCents": 3498, "vatCents": 0, "grossCents": 3498 }
#       },
#       {
#         "orderId": "A400",
#         "shipTo": { "country": "BE" },
#         "customer": { "email": "ada@other.example", "vatId": null },
#         "lines": [
#           { "sku": "WID-001", "qty": 2, "unitCents": 999 },
#           { "sku": "GAD-002", "qty": 1, "unitCents": 1500 }
#         ],
#         "declared": { "netCents": 3498, "vatCents": 508, "grossCents": 4006 }
#       }
#     ]
#   }"""^^rdf:JSON .
#   ("""{
#     "meta~data": { "batch": "2025-12-18" },
#     "orders": [
#       {
#         "orderId": "A100",
#         "shipTo": { "country": "BE" },
#         "customer": { "email": "Ada@Example.ORG", "vatId": null },
#         "lines": [
#           { "sku": "wid-001", "qty": 2, "unitCents": 999 },
#           { "sku": "GAD-002", "qty": 1, "unitCents": 1500 }
#         ],
#         "declared": { "netCents": 3498, "vatCents": 509, "grossCents": 4007 }
#       },
#       {
#         "orderId": "A200",
#         "shipTo": { "country": "US" },
#         "customer": { "email": "bob@example.org", "vatId": null },
#         "lines": [
#           { "sku": "WID-001", "qty": 2, "unitCents": 999 },
#           { "sku": "GAD-002", "qty": 1, "unitCents": 1500 }
#         ],
#         "declared": { "netCents": 3498, "vatCents": 0, "grossCents": 3498 }
#       },
#       {
#         "orderId": "A300",
#         "shipTo": { "country": "NL" },
#         "customer": { "email": "acct@company.nl", "vatId": "NL999999999B01" },
#         "lines": [
#           { "sku": "WID-001", "qty": 2, "unitCents": 999 },
#           { "sku": "GAD-002", "qty": 1, "unitCents": 1500 }
#         ],
#         "declared": { "netCents": 3498, "vatCents": 0, "grossCents": 3498 }
#       },
#       {
#         "orderId": "A301",
#         "shipTo": { "country": "NL" },
#         "customer": { "email": "billing@company.nl", "vatId": "NL999999999B01" },
#         "lines": [
#           { "sku": "WID-001", "qty": 2, "unitCents": 999 },
#           { "sku": "GAD-002", "qty": 1, "unitCents": 1500 }
#         ],
#         "declared": { "netCents": 3498, "vatCents": 0, "grossCents": 3498 }
#       },
#       {
#         "orderId": "A400",
#         "shipTo": { "country": "BE" },
#         "customer": { "email": "ada@other.example", "vatId": null },
#         "lines": [
#           { "sku": "WID-001", "qty": 2, "unitCents": 999 },
#           { "sku": "GAD-002", "qty": 1, "unitCents": 1500 }
#         ],
#         "declared": { "netCents": 3498, "vatCents": 508, "grossCents": 4006 }
#       }
#     ]
#   }"""^^rdf:JSON "/orders") string:jsonPointer ("""{"orderId":"A100","shipTo":{"country":"BE"},"customer":{"email":"Ada@Example.ORG","vatId":null},"lines":[{"sku":"wid-001","qty":2,"unitCents":999},{"sku":"GAD-002","qty":1,"unitCents":1500}],"declared":{"netCents":3498,"vatCents":509,"grossCents":4007}}"""^^rdf:JSON """{"orderId":"A200","shipTo":{"country":"US"},"customer":{"email":"bob@example.org","vatId":null},"lines":[{"sku":"WID-001","qty":2,"unitCents":999},{"sku":"GAD-002","qty":1,"unitCents":1500}],"declared":{"netCents":3498,"vatCents":0,"grossCents":3498}}"""^^rdf:JSON """{"orderId":"A300","shipTo":{"country":"NL"},"customer":{"email":"acct@company.nl","vatId":"NL999999999B01"},"lines":[{"sku":"WID-001","qty":2,"unitCents":999},{"sku":"GAD-002","qty":1,"unitCents":1500}],"declared":{"netCents":3498,"vatCents":0,"grossCents":3498}}"""^^rdf:JSON """{"orderId":"A301","shipTo":{"country":"NL"},"customer":{"email":"billing@company.nl","vatId":"NL999999999B01"},"lines":[{"sku":"WID-001","qty":2,"unitCents":999},{"sku":"GAD-002","qty":1,"unitCents":1500}],"declared":{"netCents":3498,"vatCents":0,"grossCents":3498}}"""^^rdf:JSON """{"orderId":"A400","shipTo":{"country":"BE"},"customer":{"email":"ada@other.example","vatId":null},"lines":[{"sku":"WID-001","qty":2,"unitCents":999},{"sku":"GAD-002","qty":1,"unitCents":1500}],"declared":{"netCents":3498,"vatCents":508,"grossCents":4006}}"""^^rdf:JSON) .
#   ("""{"orderId":"A100","shipTo":{"country":"BE"},"customer":{"email":"Ada@Example.ORG","vatId":null},"lines":[{"sku":"wid-001","qty":2,"unitCents":999},{"sku":"GAD-002","qty":1,"unitCents":1500}],"declared":{"netCents":3498,"vatCents":509,"grossCents":4007}}"""^^rdf:JSON """{"orderId":"A200","shipTo":{"country":"US"},"customer":{"email":"bob@example.org","vatId":null},"lines":[{"sku":"WID-001","qty":2,"unitCents":999},{"sku":"GAD-002","qty":1,"unitCents":1500}],"declared":{"netCents":3498,"vatCents":0,"grossCents":3498}}"""^^rdf:JSON """{"orderId":"A300","shipTo":{"country":"NL"},"customer":{"email":"acct@company.nl","vatId":"NL999999999B01"},"lines":[{"sku":"WID-001","qty":2,"unitCents":999},{"sku":"GAD-002","qty":1,"unitCents":1500}],"declared":{"netCents":3498,"vatCents":0,"grossCents":3498}}"""^^rdf:JSON """{"orderId":"A301","shipTo":{"country":"NL"},"customer":{"email":"billing@company.nl","vatId":"NL999999999B01"},"lines":[{"sku":"WID-001","qty":2,"unitCents":999},{"sku":"GAD-002","qty":1,"unitCents":1500}],"declared":{"netCents":3498,"vatCents":0,"grossCents":3498}}"""^^rdf:JSON """{"orderId":"A400","shipTo":{"country":"BE"},"customer":{"email":"ada@other.example","vatId":null},"lines":[{"sku":"WID-001","qty":2,"unitCents":999},{"sku":"GAD-002","qty":1,"unitCents":1500}],"declared":{"netCents":3498,"vatCents":508,"grossCents":4006}}"""^^rdf:JSON) list:iterate (4 """{"orderId":"A400","shipTo":{"country":"BE"},"customer":{"email":"ada@other.example","vatId":null},"lines":[{"sku":"WID-001","qty":2,"unitCents":999},{"sku":"GAD-002","qty":1,"unitCents":1500}],"declared":{"netCents":3498,"vatCents":508,"grossCents":4006}}"""^^rdf:JSON) .
#   ("""{"orderId":"A400","shipTo":{"country":"BE"},"customer":{"email":"ada@other.example","vatId":null},"lines":[{"sku":"WID-001","qty":2,"unitCents":999},{"sku":"GAD-002","qty":1,"unitCents":1500}],"declared":{"netCents":3498,"vatCents":508,"grossCents":4006}}"""^^rdf:JSON "/orderId") string:jsonPointer "A400" .
#   ("urn:example:order:%s" "A400") string:format "urn:example:order:A400" .
#   <urn:example:order:A400> log:uri "urn:example:order:A400" .
#   ("""{"orderId":"A400","shipTo":{"country":"BE"},"customer":{"email":"ada@other.example","vatId":null},"lines":[{"sku":"WID-001","qty":2,"unitCents":999},{"sku":"GAD-002","qty":1,"unitCents":1500}],"declared":{"netCents":3498,"vatCents":508,"grossCents":4006}}"""^^rdf:JSON "/lines") string:jsonPointer ("""{"sku":"WID-001","qty":2,"unitCents":999}"""^^rdf:JSON """{"sku":"GAD-002","qty":1,"unitCents":1500}"""^^rdf:JSON) .
#   ("""{"sku":"WID-001","qty":2,"unitCents":999}"""^^rdf:JSON """{"sku":"GAD-002","qty":1,"unitCents":1500}"""^^rdf:JSON) list:iterate (0 """{"sku":"WID-001","qty":2,"unitCents":999}"""^^rdf:JSON) .
#   ("""{"sku":"WID-001","qty":2,"unitCents":999}"""^^rdf:JSON "/sku") string:jsonPointer "WID-001" .
#   ("""{"sku":"WID-001","qty":2,"unitCents":999}"""^^rdf:JSON "/qty") string:jsonPointer 2 .
#   ("""{"sku":"WID-001","qty":2,"unitCents":999}"""^^rdf:JSON "/unitCents") string:jsonPointer 999 .
#   ex:Widget a ex:Product .
#   ex:Widget ex:sku "WID-001" .
#   (2 999) math:product 1998 .
#   ("urn:example:order:%s#line:%s" "A400" 0) string:format "urn:example:order:A400#line:0" .
#   <urn:example:order:A400#line:0> log:uri "urn:example:order:A400#line:0" .
#   "WID-001" string:equalIgnoringCase "WID-001" .
# via the schematic forward rule:
#   {
#     ex:feed ex:json ?J .
#     (?J "/orders") string:jsonPointer ?Orders .
#     ?Orders list:iterate (?OrderIndex ?OrderJson) .
#     (?OrderJson "/orderId") string:jsonPointer ?OrderId .
#     ("urn:example:order:%s" ?OrderId) string:format ?OrderUriStr .
#     ?Order log:uri ?OrderUriStr .
#     (?OrderJson "/lines") string:jsonPointer ?Lines .
#     ?Lines list:iterate (?LineIndex ?LineJson) .
#     (?LineJson "/sku") string:jsonPointer ?SkuJson .
#     (?LineJson "/qty") string:jsonPointer ?Qty .
#     (?LineJson "/unitCents") string:jsonPointer ?UnitCents .
#     ?Product a ex:Product .
#     ?Product ex:sku ?SkuCat .
#     (?Qty ?UnitCents) math:product ?NetCents .
#     ("urn:example:order:%s#line:%s" ?OrderId ?LineIndex) string:format ?LineUriStr .
#     ?Line log:uri ?LineUriStr .
#     ?SkuJson string:equalIgnoringCase ?SkuCat .
#   } => {
#     ?Order ex:line ?Line .
#     ?Line a ex:OrderLine .
#     ?Line ex:lineIndex ?LineIndex .
#     ?Line ex:product ?Product .
#     ?Line ex:sku ?SkuCat .
#     ?Line ex:qty ?Qty .
#     ?Line ex:unitCents ?UnitCents .
#     ?Line ex:netCents ?NetCents .
#   } .
# with substitution (on rule variables):
#   ?J = """{
#     "meta~data": { "batch": "2025-12-18" },
#     "orders": [
#     {
#     "orderId": "A100",
#     "shipTo": { "country": "BE" },
#     "customer": { "email": "Ada@Example.ORG", "vatId": null },
#     "lines": [
#     { "sku": "wid-001", "qty": 2, "unitCents": 999 },
#     { "sku": "GAD-002", "qty": 1, "unitCents": 1500 }
#     ],
#     "declared": { "netCents": 3498, "vatCents": 509, "grossCents": 4007 }
#     },
#     {
#     "orderId": "A200",
#     "shipTo": { "country": "US" },
#     "customer": { "email": "bob@example.org", "vatId": null },
#     "lines": [
#     { "sku": "WID-001", "qty": 2, "unitCents": 999 },
#     { "sku": "GAD-002", "qty": 1, "unitCents": 1500 }
#     ],
#     "declared": { "netCents": 3498, "vatCents": 0, "grossCents": 3498 }
#     },
#     {
#     "orderId": "A300",
#     "shipTo": { "country": "NL" },
#     "customer": { "email": "acct@company.nl", "vatId": "NL999999999B01" },
#     "lines": [
#     { "sku": "WID-001", "qty": 2, "unitCents": 999 },
#     { "sku": "GAD-002", "qty": 1, "unitCents": 1500 }
#     ],
#     "declared": { "netCents": 3498, "vatCents": 0, "grossCents": 3498 }
#     },
#     {
#     "orderId": "A301",
#     "shipTo": { "country": "NL" },
#     "customer": { "email": "billing@company.nl", "vatId": "NL999999999B01" },
#     "lines": [
#     { "sku": "WID-001", "qty": 2, "unitCents": 999 },
#     { "sku": "GAD-002", "qty": 1, "unitCents": 1500 }
#     ],
#     "declared": { "netCents": 3498, "vatCents": 0, "grossCents": 3498 }
#     },
#     {
#     "orderId": "A400",
#     "shipTo": { "country": "BE" },
#     "customer": { "email": "ada@other.example", "vatId": null },
#     "lines": [
#     { "sku": "WID-001", "qty": 2, "unitCents": 999 },
#     { "sku": "GAD-002", "qty": 1, "unitCents": 1500 }
#     ],
#     "declared": { "netCents": 3498, "vatCents": 508, "grossCents": 4006 }
#     }
#     ]
#   }"""^^rdf:JSON
#   ?Line = <urn:example:order:A400#line:0>
#   ?LineIndex = 0
#   ?LineJson = """{"sku":"WID-001","qty":2,"unitCents":999}"""^^rdf:JSON
#   ?LineUriStr = "urn:example:order:A400#line:0"
#   ?Lines = ("""{"sku":"WID-001","qty":2,"unitCents":999}"""^^rdf:JSON """{"sku":"GAD-002","qty":1,"unitCents":1500}"""^^rdf:JSON)
#   ?NetCents = 1998
#   ?Order = <urn:example:order:A400>
#   ?OrderId = "A400"
#   ?OrderIndex = 4
#   ?OrderJson = """{"orderId":"A400","shipTo":{"country":"BE"},"customer":{"email":"ada@other.example","vatId":null},"lines":[{"sku":"WID-001","qty":2,"unitCents":999},{"sku":"GAD-002","qty":1,"unitCents":1500}],"declared":{"netCents":3498,"vatCents":508,"grossCents":4006}}"""^^rdf:JSON
#   ?OrderUriStr = "urn:example:order:A400"
#   ?Orders = ("""{"orderId":"A100","shipTo":{"country":"BE"},"customer":{"email":"Ada@Example.ORG","vatId":null},"lines":[{"sku":"wid-001","qty":2,"unitCents":999},{"sku":"GAD-002","qty":1,"unitCents":1500}],"declared":{"netCents":3498,"vatCents":509,"grossCents":4007}}"""^^rdf:JSON """{"orderId":"A200","shipTo":{"country":"US"},"customer":{"email":"bob@example.org","vatId":null},"lines":[{"sku":"WID-001","qty":2,"unitCents":999},{"sku":"GAD-002","qty":1,"unitCents":1500}],"declared":{"netCents":3498,"vatCents":0,"grossCents":3498}}"""^^rdf:JSON """{"orderId":"A300","shipTo":{"country":"NL"},"customer":{"email":"acct@company.nl","vatId":"NL999999999B01"},"lines":[{"sku":"WID-001","qty":2,"unitCents":999},{"sku":"GAD-002","qty":1,"unitCents":1500}],"declared":{"netCents":3498,"vatCents":0,"grossCents":3498}}"""^^rdf:JSON """{"orderId":"A301","shipTo":{"country":"NL"},"customer":{"email":"billing@company.nl","vatId":"NL999999999B01"},"lines":[{"sku":"WID-001","qty":2,"unitCents":999},{"sku":"GAD-002","qty":1,"unitCents":1500}],"declared":{"netCents":3498,"vatCents":0,"grossCents":3498}}"""^^rdf:JSON """{"orderId":"A400","shipTo":{"country":"BE"},"customer":{"email":"ada@other.example","vatId":null},"lines":[{"sku":"WID-001","qty":2,"unitCents":999},{"sku":"GAD-002","qty":1,"unitCents":1500}],"declared":{"netCents":3498,"vatCents":508,"grossCents":4006}}"""^^rdf:JSON)
#   ?Product = ex:Widget
#   ?Qty = 2
#   ?SkuCat = "WID-001"
#   ?SkuJson = "WID-001"
#   ?UnitCents = 999
# Therefore the derived triple above is entailed by the rules and facts.
# ----------------------------------------------------------------------

<urn:example:order:A400#line:0> ex:sku "WID-001" .

# ----------------------------------------------------------------------
# Proof for derived triple:
#   <urn:example:order:A400#line:0> ex:qty 2 .
# It holds because the following instance of the rule body is provable:
#   ex:feed ex:json """{
#     "meta~data": { "batch": "2025-12-18" },
#     "orders": [
#       {
#         "orderId": "A100",
#         "shipTo": { "country": "BE" },
#         "customer": { "email": "Ada@Example.ORG", "vatId": null },
#         "lines": [
#           { "sku": "wid-001", "qty": 2, "unitCents": 999 },
#           { "sku": "GAD-002", "qty": 1, "unitCents": 1500 }
#         ],
#         "declared": { "netCents": 3498, "vatCents": 509, "grossCents": 4007 }
#       },
#       {
#         "orderId": "A200",
#         "shipTo": { "country": "US" },
#         "customer": { "email": "bob@example.org", "vatId": null },
#         "lines": [
#           { "sku": "WID-001", "qty": 2, "unitCents": 999 },
#           { "sku": "GAD-002", "qty": 1, "unitCents": 1500 }
#         ],
#         "declared": { "netCents": 3498, "vatCents": 0, "grossCents": 3498 }
#       },
#       {
#         "orderId": "A300",
#         "shipTo": { "country": "NL" },
#         "customer": { "email": "acct@company.nl", "vatId": "NL999999999B01" },
#         "lines": [
#           { "sku": "WID-001", "qty": 2, "unitCents": 999 },
#           { "sku": "GAD-002", "qty": 1, "unitCents": 1500 }
#         ],
#         "declared": { "netCents": 3498, "vatCents": 0, "grossCents": 3498 }
#       },
#       {
#         "orderId": "A301",
#         "shipTo": { "country": "NL" },
#         "customer": { "email": "billing@company.nl", "vatId": "NL999999999B01" },
#         "lines": [
#           { "sku": "WID-001", "qty": 2, "unitCents": 999 },
#           { "sku": "GAD-002", "qty": 1, "unitCents": 1500 }
#         ],
#         "declared": { "netCents": 3498, "vatCents": 0, "grossCents": 3498 }
#       },
#       {
#         "orderId": "A400",
#         "shipTo": { "country": "BE" },
#         "customer": { "email": "ada@other.example", "vatId": null },
#         "lines": [
#           { "sku": "WID-001", "qty": 2, "unitCents": 999 },
#           { "sku": "GAD-002", "qty": 1, "unitCents": 1500 }
#         ],
#         "declared": { "netCents": 3498, "vatCents": 508, "grossCents": 4006 }
#       }
#     ]
#   }"""^^rdf:JSON .
#   ("""{
#     "meta~data": { "batch": "2025-12-18" },
#     "orders": [
#       {
#         "orderId": "A100",
#         "shipTo": { "country": "BE" },
#         "customer": { "email": "Ada@Example.ORG", "vatId": null },
#         "lines": [
#           { "sku": "wid-001", "qty": 2, "unitCents": 999 },
#           { "sku": "GAD-002", "qty": 1, "unitCents": 1500 }
#         ],
#         "declared": { "netCents": 3498, "vatCents": 509, "grossCents": 4007 }
#       },
#       {
#         "orderId": "A200",
#         "shipTo": { "country": "US" },
#         "customer": { "email": "bob@example.org", "vatId": null },
#         "lines": [
#           { "sku": "WID-001", "qty": 2, "unitCents": 999 },
#           { "sku": "GAD-002", "qty": 1, "unitCents": 1500 }
#         ],
#         "declared": { "netCents": 3498, "vatCents": 0, "grossCents": 3498 }
#       },
#       {
#         "orderId": "A300",
#         "shipTo": { "country": "NL" },
#         "customer": { "email": "acct@company.nl", "vatId": "NL999999999B01" },
#         "lines": [
#           { "sku": "WID-001", "qty": 2, "unitCents": 999 },
#           { "sku": "GAD-002", "qty": 1, "unitCents": 1500 }
#         ],
#         "declared": { "netCents": 3498, "vatCents": 0, "grossCents": 3498 }
#       },
#       {
#         "orderId": "A301",
#         "shipTo": { "country": "NL" },
#         "customer": { "email": "billing@company.nl", "vatId": "NL999999999B01" },
#         "lines": [
#           { "sku": "WID-001", "qty": 2, "unitCents": 999 },
#           { "sku": "GAD-002", "qty": 1, "unitCents": 1500 }
#         ],
#         "declared": { "netCents": 3498, "vatCents": 0, "grossCents": 3498 }
#       },
#       {
#         "orderId": "A400",
#         "shipTo": { "country": "BE" },
#         "customer": { "email": "ada@other.example", "vatId": null },
#         "lines": [
#           { "sku": "WID-001", "qty": 2, "unitCents": 999 },
#           { "sku": "GAD-002", "qty": 1, "unitCents": 1500 }
#         ],
#         "declared": { "netCents": 3498, "vatCents": 508, "grossCents": 4006 }
#       }
#     ]
#   }"""^^rdf:JSON "/orders") string:jsonPointer ("""{"orderId":"A100","shipTo":{"country":"BE"},"customer":{"email":"Ada@Example.ORG","vatId":null},"lines":[{"sku":"wid-001","qty":2,"unitCents":999},{"sku":"GAD-002","qty":1,"unitCents":1500}],"declared":{"netCents":3498,"vatCents":509,"grossCents":4007}}"""^^rdf:JSON """{"orderId":"A200","shipTo":{"country":"US"},"customer":{"email":"bob@example.org","vatId":null},"lines":[{"sku":"WID-001","qty":2,"unitCents":999},{"sku":"GAD-002","qty":1,"unitCents":1500}],"declared":{"netCents":3498,"vatCents":0,"grossCents":3498}}"""^^rdf:JSON """{"orderId":"A300","shipTo":{"country":"NL"},"customer":{"email":"acct@company.nl","vatId":"NL999999999B01"},"lines":[{"sku":"WID-001","qty":2,"unitCents":999},{"sku":"GAD-002","qty":1,"unitCents":1500}],"declared":{"netCents":3498,"vatCents":0,"grossCents":3498}}"""^^rdf:JSON """{"orderId":"A301","shipTo":{"country":"NL"},"customer":{"email":"billing@company.nl","vatId":"NL999999999B01"},"lines":[{"sku":"WID-001","qty":2,"unitCents":999},{"sku":"GAD-002","qty":1,"unitCents":1500}],"declared":{"netCents":3498,"vatCents":0,"grossCents":3498}}"""^^rdf:JSON """{"orderId":"A400","shipTo":{"country":"BE"},"customer":{"email":"ada@other.example","vatId":null},"lines":[{"sku":"WID-001","qty":2,"unitCents":999},{"sku":"GAD-002","qty":1,"unitCents":1500}],"declared":{"netCents":3498,"vatCents":508,"grossCents":4006}}"""^^rdf:JSON) .
#   ("""{"orderId":"A100","shipTo":{"country":"BE"},"customer":{"email":"Ada@Example.ORG","vatId":null},"lines":[{"sku":"wid-001","qty":2,"unitCents":999},{"sku":"GAD-002","qty":1,"unitCents":1500}],"declared":{"netCents":3498,"vatCents":509,"grossCents":4007}}"""^^rdf:JSON """{"orderId":"A200","shipTo":{"country":"US"},"customer":{"email":"bob@example.org","vatId":null},"lines":[{"sku":"WID-001","qty":2,"unitCents":999},{"sku":"GAD-002","qty":1,"unitCents":1500}],"declared":{"netCents":3498,"vatCents":0,"grossCents":3498}}"""^^rdf:JSON """{"orderId":"A300","shipTo":{"country":"NL"},"customer":{"email":"acct@company.nl","vatId":"NL999999999B01"},"lines":[{"sku":"WID-001","qty":2,"unitCents":999},{"sku":"GAD-002","qty":1,"unitCents":1500}],"declared":{"netCents":3498,"vatCents":0,"grossCents":3498}}"""^^rdf:JSON """{"orderId":"A301","shipTo":{"country":"NL"},"customer":{"email":"billing@company.nl","vatId":"NL999999999B01"},"lines":[{"sku":"WID-001","qty":2,"unitCents":999},{"sku":"GAD-002","qty":1,"unitCents":1500}],"declared":{"netCents":3498,"vatCents":0,"grossCents":3498}}"""^^rdf:JSON """{"orderId":"A400","shipTo":{"country":"BE"},"customer":{"email":"ada@other.example","vatId":null},"lines":[{"sku":"WID-001","qty":2,"unitCents":999},{"sku":"GAD-002","qty":1,"unitCents":1500}],"declared":{"netCents":3498,"vatCents":508,"grossCents":4006}}"""^^rdf:JSON) list:iterate (4 """{"orderId":"A400","shipTo":{"country":"BE"},"customer":{"email":"ada@other.example","vatId":null},"lines":[{"sku":"WID-001","qty":2,"unitCents":999},{"sku":"GAD-002","qty":1,"unitCents":1500}],"declared":{"netCents":3498,"vatCents":508,"grossCents":4006}}"""^^rdf:JSON) .
#   ("""{"orderId":"A400","shipTo":{"country":"BE"},"customer":{"email":"ada@other.example","vatId":null},"lines":[{"sku":"WID-001","qty":2,"unitCents":999},{"sku":"GAD-002","qty":1,"unitCents":1500}],"declared":{"netCents":3498,"vatCents":508,"grossCents":4006}}"""^^rdf:JSON "/orderId") string:jsonPointer "A400" .
#   ("urn:example:order:%s" "A400") string:format "urn:example:order:A400" .
#   <urn:example:order:A400> log:uri "urn:example:order:A400" .
#   ("""{"orderId":"A400","shipTo":{"country":"BE"},"customer":{"email":"ada@other.example","vatId":null},"lines":[{"sku":"WID-001","qty":2,"unitCents":999},{"sku":"GAD-002","qty":1,"unitCents":1500}],"declared":{"netCents":3498,"vatCents":508,"grossCents":4006}}"""^^rdf:JSON "/lines") string:jsonPointer ("""{"sku":"WID-001","qty":2,"unitCents":999}"""^^rdf:JSON """{"sku":"GAD-002","qty":1,"unitCents":1500}"""^^rdf:JSON) .
#   ("""{"sku":"WID-001","qty":2,"unitCents":999}"""^^rdf:JSON """{"sku":"GAD-002","qty":1,"unitCents":1500}"""^^rdf:JSON) list:iterate (0 """{"sku":"WID-001","qty":2,"unitCents":999}"""^^rdf:JSON) .
#   ("""{"sku":"WID-001","qty":2,"unitCents":999}"""^^rdf:JSON "/sku") string:jsonPointer "WID-001" .
#   ("""{"sku":"WID-001","qty":2,"unitCents":999}"""^^rdf:JSON "/qty") string:jsonPointer 2 .
#   ("""{"sku":"WID-001","qty":2,"unitCents":999}"""^^rdf:JSON "/unitCents") string:jsonPointer 999 .
#   ex:Widget a ex:Product .
#   ex:Widget ex:sku "WID-001" .
#   (2 999) math:product 1998 .
#   ("urn:example:order:%s#line:%s" "A400" 0) string:format "urn:example:order:A400#line:0" .
#   <urn:example:order:A400#line:0> log:uri "urn:example:order:A400#line:0" .
#   "WID-001" string:equalIgnoringCase "WID-001" .
# via the schematic forward rule:
#   {
#     ex:feed ex:json ?J .
#     (?J "/orders") string:jsonPointer ?Orders .
#     ?Orders list:iterate (?OrderIndex ?OrderJson) .
#     (?OrderJson "/orderId") string:jsonPointer ?OrderId .
#     ("urn:example:order:%s" ?OrderId) string:format ?OrderUriStr .
#     ?Order log:uri ?OrderUriStr .
#     (?OrderJson "/lines") string:jsonPointer ?Lines .
#     ?Lines list:iterate (?LineIndex ?LineJson) .
#     (?LineJson "/sku") string:jsonPointer ?SkuJson .
#     (?LineJson "/qty") string:jsonPointer ?Qty .
#     (?LineJson "/unitCents") string:jsonPointer ?UnitCents .
#     ?Product a ex:Product .
#     ?Product ex:sku ?SkuCat .
#     (?Qty ?UnitCents) math:product ?NetCents .
#     ("urn:example:order:%s#line:%s" ?OrderId ?LineIndex) string:format ?LineUriStr .
#     ?Line log:uri ?LineUriStr .
#     ?SkuJson string:equalIgnoringCase ?SkuCat .
#   } => {
#     ?Order ex:line ?Line .
#     ?Line a ex:OrderLine .
#     ?Line ex:lineIndex ?LineIndex .
#     ?Line ex:product ?Product .
#     ?Line ex:sku ?SkuCat .
#     ?Line ex:qty ?Qty .
#     ?Line ex:unitCents ?UnitCents .
#     ?Line ex:netCents ?NetCents .
#   } .
# with substitution (on rule variables):
#   ?J = """{
#     "meta~data": { "batch": "2025-12-18" },
#     "orders": [
#     {
#     "orderId": "A100",
#     "shipTo": { "country": "BE" },
#     "customer": { "email": "Ada@Example.ORG", "vatId": null },
#     "lines": [
#     { "sku": "wid-001", "qty": 2, "unitCents": 999 },
#     { "sku": "GAD-002", "qty": 1, "unitCents": 1500 }
#     ],
#     "declared": { "netCents": 3498, "vatCents": 509, "grossCents": 4007 }
#     },
#     {
#     "orderId": "A200",
#     "shipTo": { "country": "US" },
#     "customer": { "email": "bob@example.org", "vatId": null },
#     "lines": [
#     { "sku": "WID-001", "qty": 2, "unitCents": 999 },
#     { "sku": "GAD-002", "qty": 1, "unitCents": 1500 }
#     ],
#     "declared": { "netCents": 3498, "vatCents": 0, "grossCents": 3498 }
#     },
#     {
#     "orderId": "A300",
#     "shipTo": { "country": "NL" },
#     "customer": { "email": "acct@company.nl", "vatId": "NL999999999B01" },
#     "lines": [
#     { "sku": "WID-001", "qty": 2, "unitCents": 999 },
#     { "sku": "GAD-002", "qty": 1, "unitCents": 1500 }
#     ],
#     "declared": { "netCents": 3498, "vatCents": 0, "grossCents": 3498 }
#     },
#     {
#     "orderId": "A301",
#     "shipTo": { "country": "NL" },
#     "customer": { "email": "billing@company.nl", "vatId": "NL999999999B01" },
#     "lines": [
#     { "sku": "WID-001", "qty": 2, "unitCents": 999 },
#     { "sku": "GAD-002", "qty": 1, "unitCents": 1500 }
#     ],
#     "declared": { "netCents": 3498, "vatCents": 0, "grossCents": 3498 }
#     },
#     {
#     "orderId": "A400",
#     "shipTo": { "country": "BE" },
#     "customer": { "email": "ada@other.example", "vatId": null },
#     "lines": [
#     { "sku": "WID-001", "qty": 2, "unitCents": 999 },
#     { "sku": "GAD-002", "qty": 1, "unitCents": 1500 }
#     ],
#     "declared": { "netCents": 3498, "vatCents": 508, "grossCents": 4006 }
#     }
#     ]
#   }"""^^rdf:JSON
#   ?Line = <urn:example:order:A400#line:0>
#   ?LineIndex = 0
#   ?LineJson = """{"sku":"WID-001","qty":2,"unitCents":999}"""^^rdf:JSON
#   ?LineUriStr = "urn:example:order:A400#line:0"
#   ?Lines = ("""{"sku":"WID-001","qty":2,"unitCents":999}"""^^rdf:JSON """{"sku":"GAD-002","qty":1,"unitCents":1500}"""^^rdf:JSON)
#   ?NetCents = 1998
#   ?Order = <urn:example:order:A400>
#   ?OrderId = "A400"
#   ?OrderIndex = 4
#   ?OrderJson = """{"orderId":"A400","shipTo":{"country":"BE"},"customer":{"email":"ada@other.example","vatId":null},"lines":[{"sku":"WID-001","qty":2,"unitCents":999},{"sku":"GAD-002","qty":1,"unitCents":1500}],"declared":{"netCents":3498,"vatCents":508,"grossCents":4006}}"""^^rdf:JSON
#   ?OrderUriStr = "urn:example:order:A400"
#   ?Orders = ("""{"orderId":"A100","shipTo":{"country":"BE"},"customer":{"email":"Ada@Example.ORG","vatId":null},"lines":[{"sku":"wid-001","qty":2,"unitCents":999},{"sku":"GAD-002","qty":1,"unitCents":1500}],"declared":{"netCents":3498,"vatCents":509,"grossCents":4007}}"""^^rdf:JSON """{"orderId":"A200","shipTo":{"country":"US"},"customer":{"email":"bob@example.org","vatId":null},"lines":[{"sku":"WID-001","qty":2,"unitCents":999},{"sku":"GAD-002","qty":1,"unitCents":1500}],"declared":{"netCents":3498,"vatCents":0,"grossCents":3498}}"""^^rdf:JSON """{"orderId":"A300","shipTo":{"country":"NL"},"customer":{"email":"acct@company.nl","vatId":"NL999999999B01"},"lines":[{"sku":"WID-001","qty":2,"unitCents":999},{"sku":"GAD-002","qty":1,"unitCents":1500}],"declared":{"netCents":3498,"vatCents":0,"grossCents":3498}}"""^^rdf:JSON """{"orderId":"A301","shipTo":{"country":"NL"},"customer":{"email":"billing@company.nl","vatId":"NL999999999B01"},"lines":[{"sku":"WID-001","qty":2,"unitCents":999},{"sku":"GAD-002","qty":1,"unitCents":1500}],"declared":{"netCents":3498,"vatCents":0,"grossCents":3498}}"""^^rdf:JSON """{"orderId":"A400","shipTo":{"country":"BE"},"customer":{"email":"ada@other.example","vatId":null},"lines":[{"sku":"WID-001","qty":2,"unitCents":999},{"sku":"GAD-002","qty":1,"unitCents":1500}],"declared":{"netCents":3498,"vatCents":508,"grossCents":4006}}"""^^rdf:JSON)
#   ?Product = ex:Widget
#   ?Qty = 2
#   ?SkuCat = "WID-001"
#   ?SkuJson = "WID-001"
#   ?UnitCents = 999
# Therefore the derived triple above is entailed by the rules and facts.
# ----------------------------------------------------------------------

<urn:example:order:A400#line:0> ex:qty 2 .

# ----------------------------------------------------------------------
# Proof for derived triple:
#   <urn:example:order:A400#line:0> ex:unitCents 999 .
# It holds because the following instance of the rule body is provable:
#   ex:feed ex:json """{
#     "meta~data": { "batch": "2025-12-18" },
#     "orders": [
#       {
#         "orderId": "A100",
#         "shipTo": { "country": "BE" },
#         "customer": { "email": "Ada@Example.ORG", "vatId": null },
#         "lines": [
#           { "sku": "wid-001", "qty": 2, "unitCents": 999 },
#           { "sku": "GAD-002", "qty": 1, "unitCents": 1500 }
#         ],
#         "declared": { "netCents": 3498, "vatCents": 509, "grossCents": 4007 }
#       },
#       {
#         "orderId": "A200",
#         "shipTo": { "country": "US" },
#         "customer": { "email": "bob@example.org", "vatId": null },
#         "lines": [
#           { "sku": "WID-001", "qty": 2, "unitCents": 999 },
#           { "sku": "GAD-002", "qty": 1, "unitCents": 1500 }
#         ],
#         "declared": { "netCents": 3498, "vatCents": 0, "grossCents": 3498 }
#       },
#       {
#         "orderId": "A300",
#         "shipTo": { "country": "NL" },
#         "customer": { "email": "acct@company.nl", "vatId": "NL999999999B01" },
#         "lines": [
#           { "sku": "WID-001", "qty": 2, "unitCents": 999 },
#           { "sku": "GAD-002", "qty": 1, "unitCents": 1500 }
#         ],
#         "declared": { "netCents": 3498, "vatCents": 0, "grossCents": 3498 }
#       },
#       {
#         "orderId": "A301",
#         "shipTo": { "country": "NL" },
#         "customer": { "email": "billing@company.nl", "vatId": "NL999999999B01" },
#         "lines": [
#           { "sku": "WID-001", "qty": 2, "unitCents": 999 },
#           { "sku": "GAD-002", "qty": 1, "unitCents": 1500 }
#         ],
#         "declared": { "netCents": 3498, "vatCents": 0, "grossCents": 3498 }
#       },
#       {
#         "orderId": "A400",
#         "shipTo": { "country": "BE" },
#         "customer": { "email": "ada@other.example", "vatId": null },
#         "lines": [
#           { "sku": "WID-001", "qty": 2, "unitCents": 999 },
#           { "sku": "GAD-002", "qty": 1, "unitCents": 1500 }
#         ],
#         "declared": { "netCents": 3498, "vatCents": 508, "grossCents": 4006 }
#       }
#     ]
#   }"""^^rdf:JSON .
#   ("""{
#     "meta~data": { "batch": "2025-12-18" },
#     "orders": [
#       {
#         "orderId": "A100",
#         "shipTo": { "country": "BE" },
#         "customer": { "email": "Ada@Example.ORG", "vatId": null },
#         "lines": [
#           { "sku": "wid-001", "qty": 2, "unitCents": 999 },
#           { "sku": "GAD-002", "qty": 1, "unitCents": 1500 }
#         ],
#         "declared": { "netCents": 3498, "vatCents": 509, "grossCents": 4007 }
#       },
#       {
#         "orderId": "A200",
#         "shipTo": { "country": "US" },
#         "customer": { "email": "bob@example.org", "vatId": null },
#         "lines": [
#           { "sku": "WID-001", "qty": 2, "unitCents": 999 },
#           { "sku": "GAD-002", "qty": 1, "unitCents": 1500 }
#         ],
#         "declared": { "netCents": 3498, "vatCents": 0, "grossCents": 3498 }
#       },
#       {
#         "orderId": "A300",
#         "shipTo": { "country": "NL" },
#         "customer": { "email": "acct@company.nl", "vatId": "NL999999999B01" },
#         "lines": [
#           { "sku": "WID-001", "qty": 2, "unitCents": 999 },
#           { "sku": "GAD-002", "qty": 1, "unitCents": 1500 }
#         ],
#         "declared": { "netCents": 3498, "vatCents": 0, "grossCents": 3498 }
#       },
#       {
#         "orderId": "A301",
#         "shipTo": { "country": "NL" },
#         "customer": { "email": "billing@company.nl", "vatId": "NL999999999B01" },
#         "lines": [
#           { "sku": "WID-001", "qty": 2, "unitCents": 999 },
#           { "sku": "GAD-002", "qty": 1, "unitCents": 1500 }
#         ],
#         "declared": { "netCents": 3498, "vatCents": 0, "grossCents": 3498 }
#       },
#       {
#         "orderId": "A400",
#         "shipTo": { "country": "BE" },
#         "customer": { "email": "ada@other.example", "vatId": null },
#         "lines": [
#           { "sku": "WID-001", "qty": 2, "unitCents": 999 },
#           { "sku": "GAD-002", "qty": 1, "unitCents": 1500 }
#         ],
#         "declared": { "netCents": 3498, "vatCents": 508, "grossCents": 4006 }
#       }
#     ]
#   }"""^^rdf:JSON "/orders") string:jsonPointer ("""{"orderId":"A100","shipTo":{"country":"BE"},"customer":{"email":"Ada@Example.ORG","vatId":null},"lines":[{"sku":"wid-001","qty":2,"unitCents":999},{"sku":"GAD-002","qty":1,"unitCents":1500}],"declared":{"netCents":3498,"vatCents":509,"grossCents":4007}}"""^^rdf:JSON """{"orderId":"A200","shipTo":{"country":"US"},"customer":{"email":"bob@example.org","vatId":null},"lines":[{"sku":"WID-001","qty":2,"unitCents":999},{"sku":"GAD-002","qty":1,"unitCents":1500}],"declared":{"netCents":3498,"vatCents":0,"grossCents":3498}}"""^^rdf:JSON """{"orderId":"A300","shipTo":{"country":"NL"},"customer":{"email":"acct@company.nl","vatId":"NL999999999B01"},"lines":[{"sku":"WID-001","qty":2,"unitCents":999},{"sku":"GAD-002","qty":1,"unitCents":1500}],"declared":{"netCents":3498,"vatCents":0,"grossCents":3498}}"""^^rdf:JSON """{"orderId":"A301","shipTo":{"country":"NL"},"customer":{"email":"billing@company.nl","vatId":"NL999999999B01"},"lines":[{"sku":"WID-001","qty":2,"unitCents":999},{"sku":"GAD-002","qty":1,"unitCents":1500}],"declared":{"netCents":3498,"vatCents":0,"grossCents":3498}}"""^^rdf:JSON """{"orderId":"A400","shipTo":{"country":"BE"},"customer":{"email":"ada@other.example","vatId":null},"lines":[{"sku":"WID-001","qty":2,"unitCents":999},{"sku":"GAD-002","qty":1,"unitCents":1500}],"declared":{"netCents":3498,"vatCents":508,"grossCents":4006}}"""^^rdf:JSON) .
#   ("""{"orderId":"A100","shipTo":{"country":"BE"},"customer":{"email":"Ada@Example.ORG","vatId":null},"lines":[{"sku":"wid-001","qty":2,"unitCents":999},{"sku":"GAD-002","qty":1,"unitCents":1500}],"declared":{"netCents":3498,"vatCents":509,"grossCents":4007}}"""^^rdf:JSON """{"orderId":"A200","shipTo":{"country":"US"},"customer":{"email":"bob@example.org","vatId":null},"lines":[{"sku":"WID-001","qty":2,"unitCents":999},{"sku":"GAD-002","qty":1,"unitCents":1500}],"declared":{"netCents":3498,"vatCents":0,"grossCents":3498}}"""^^rdf:JSON """{"orderId":"A300","shipTo":{"country":"NL"},"customer":{"email":"acct@company.nl","vatId":"NL999999999B01"},"lines":[{"sku":"WID-001","qty":2,"unitCents":999},{"sku":"GAD-002","qty":1,"unitCents":1500}],"declared":{"netCents":3498,"vatCents":0,"grossCents":3498}}"""^^rdf:JSON """{"orderId":"A301","shipTo":{"country":"NL"},"customer":{"email":"billing@company.nl","vatId":"NL999999999B01"},"lines":[{"sku":"WID-001","qty":2,"unitCents":999},{"sku":"GAD-002","qty":1,"unitCents":1500}],"declared":{"netCents":3498,"vatCents":0,"grossCents":3498}}"""^^rdf:JSON """{"orderId":"A400","shipTo":{"country":"BE"},"customer":{"email":"ada@other.example","vatId":null},"lines":[{"sku":"WID-001","qty":2,"unitCents":999},{"sku":"GAD-002","qty":1,"unitCents":1500}],"declared":{"netCents":3498,"vatCents":508,"grossCents":4006}}"""^^rdf:JSON) list:iterate (4 """{"orderId":"A400","shipTo":{"country":"BE"},"customer":{"email":"ada@other.example","vatId":null},"lines":[{"sku":"WID-001","qty":2,"unitCents":999},{"sku":"GAD-002","qty":1,"unitCents":1500}],"declared":{"netCents":3498,"vatCents":508,"grossCents":4006}}"""^^rdf:JSON) .
#   ("""{"orderId":"A400","shipTo":{"country":"BE"},"customer":{"email":"ada@other.example","vatId":null},"lines":[{"sku":"WID-001","qty":2,"unitCents":999},{"sku":"GAD-002","qty":1,"unitCents":1500}],"declared":{"netCents":3498,"vatCents":508,"grossCents":4006}}"""^^rdf:JSON "/orderId") string:jsonPointer "A400" .
#   ("urn:example:order:%s" "A400") string:format "urn:example:order:A400" .
#   <urn:example:order:A400> log:uri "urn:example:order:A400" .
#   ("""{"orderId":"A400","shipTo":{"country":"BE"},"customer":{"email":"ada@other.example","vatId":null},"lines":[{"sku":"WID-001","qty":2,"unitCents":999},{"sku":"GAD-002","qty":1,"unitCents":1500}],"declared":{"netCents":3498,"vatCents":508,"grossCents":4006}}"""^^rdf:JSON "/lines") string:jsonPointer ("""{"sku":"WID-001","qty":2,"unitCents":999}"""^^rdf:JSON """{"sku":"GAD-002","qty":1,"unitCents":1500}"""^^rdf:JSON) .
#   ("""{"sku":"WID-001","qty":2,"unitCents":999}"""^^rdf:JSON """{"sku":"GAD-002","qty":1,"unitCents":1500}"""^^rdf:JSON) list:iterate (0 """{"sku":"WID-001","qty":2,"unitCents":999}"""^^rdf:JSON) .
#   ("""{"sku":"WID-001","qty":2,"unitCents":999}"""^^rdf:JSON "/sku") string:jsonPointer "WID-001" .
#   ("""{"sku":"WID-001","qty":2,"unitCents":999}"""^^rdf:JSON "/qty") string:jsonPointer 2 .
#   ("""{"sku":"WID-001","qty":2,"unitCents":999}"""^^rdf:JSON "/unitCents") string:jsonPointer 999 .
#   ex:Widget a ex:Product .
#   ex:Widget ex:sku "WID-001" .
#   (2 999) math:product 1998 .
#   ("urn:example:order:%s#line:%s" "A400" 0) string:format "urn:example:order:A400#line:0" .
#   <urn:example:order:A400#line:0> log:uri "urn:example:order:A400#line:0" .
#   "WID-001" string:equalIgnoringCase "WID-001" .
# via the schematic forward rule:
#   {
#     ex:feed ex:json ?J .
#     (?J "/orders") string:jsonPointer ?Orders .
#     ?Orders list:iterate (?OrderIndex ?OrderJson) .
#     (?OrderJson "/orderId") string:jsonPointer ?OrderId .
#     ("urn:example:order:%s" ?OrderId) string:format ?OrderUriStr .
#     ?Order log:uri ?OrderUriStr .
#     (?OrderJson "/lines") string:jsonPointer ?Lines .
#     ?Lines list:iterate (?LineIndex ?LineJson) .
#     (?LineJson "/sku") string:jsonPointer ?SkuJson .
#     (?LineJson "/qty") string:jsonPointer ?Qty .
#     (?LineJson "/unitCents") string:jsonPointer ?UnitCents .
#     ?Product a ex:Product .
#     ?Product ex:sku ?SkuCat .
#     (?Qty ?UnitCents) math:product ?NetCents .
#     ("urn:example:order:%s#line:%s" ?OrderId ?LineIndex) string:format ?LineUriStr .
#     ?Line log:uri ?LineUriStr .
#     ?SkuJson string:equalIgnoringCase ?SkuCat .
#   } => {
#     ?Order ex:line ?Line .
#     ?Line a ex:OrderLine .
#     ?Line ex:lineIndex ?LineIndex .
#     ?Line ex:product ?Product .
#     ?Line ex:sku ?SkuCat .
#     ?Line ex:qty ?Qty .
#     ?Line ex:unitCents ?UnitCents .
#     ?Line ex:netCents ?NetCents .
#   } .
# with substitution (on rule variables):
#   ?J = """{
#     "meta~data": { "batch": "2025-12-18" },
#     "orders": [
#     {
#     "orderId": "A100",
#     "shipTo": { "country": "BE" },
#     "customer": { "email": "Ada@Example.ORG", "vatId": null },
#     "lines": [
#     { "sku": "wid-001", "qty": 2, "unitCents": 999 },
#     { "sku": "GAD-002", "qty": 1, "unitCents": 1500 }
#     ],
#     "declared": { "netCents": 3498, "vatCents": 509, "grossCents": 4007 }
#     },
#     {
#     "orderId": "A200",
#     "shipTo": { "country": "US" },
#     "customer": { "email": "bob@example.org", "vatId": null },
#     "lines": [
#     { "sku": "WID-001", "qty": 2, "unitCents": 999 },
#     { "sku": "GAD-002", "qty": 1, "unitCents": 1500 }
#     ],
#     "declared": { "netCents": 3498, "vatCents": 0, "grossCents": 3498 }
#     },
#     {
#     "orderId": "A300",
#     "shipTo": { "country": "NL" },
#     "customer": { "email": "acct@company.nl", "vatId": "NL999999999B01" },
#     "lines": [
#     { "sku": "WID-001", "qty": 2, "unitCents": 999 },
#     { "sku": "GAD-002", "qty": 1, "unitCents": 1500 }
#     ],
#     "declared": { "netCents": 3498, "vatCents": 0, "grossCents": 3498 }
#     },
#     {
#     "orderId": "A301",
#     "shipTo": { "country": "NL" },
#     "customer": { "email": "billing@company.nl", "vatId": "NL999999999B01" },
#     "lines": [
#     { "sku": "WID-001", "qty": 2, "unitCents": 999 },
#     { "sku": "GAD-002", "qty": 1, "unitCents": 1500 }
#     ],
#     "declared": { "netCents": 3498, "vatCents": 0, "grossCents": 3498 }
#     },
#     {
#     "orderId": "A400",
#     "shipTo": { "country": "BE" },
#     "customer": { "email": "ada@other.example", "vatId": null },
#     "lines": [
#     { "sku": "WID-001", "qty": 2, "unitCents": 999 },
#     { "sku": "GAD-002", "qty": 1, "unitCents": 1500 }
#     ],
#     "declared": { "netCents": 3498, "vatCents": 508, "grossCents": 4006 }
#     }
#     ]
#   }"""^^rdf:JSON
#   ?Line = <urn:example:order:A400#line:0>
#   ?LineIndex = 0
#   ?LineJson = """{"sku":"WID-001","qty":2,"unitCents":999}"""^^rdf:JSON
#   ?LineUriStr = "urn:example:order:A400#line:0"
#   ?Lines = ("""{"sku":"WID-001","qty":2,"unitCents":999}"""^^rdf:JSON """{"sku":"GAD-002","qty":1,"unitCents":1500}"""^^rdf:JSON)
#   ?NetCents = 1998
#   ?Order = <urn:example:order:A400>
#   ?OrderId = "A400"
#   ?OrderIndex = 4
#   ?OrderJson = """{"orderId":"A400","shipTo":{"country":"BE"},"customer":{"email":"ada@other.example","vatId":null},"lines":[{"sku":"WID-001","qty":2,"unitCents":999},{"sku":"GAD-002","qty":1,"unitCents":1500}],"declared":{"netCents":3498,"vatCents":508,"grossCents":4006}}"""^^rdf:JSON
#   ?OrderUriStr = "urn:example:order:A400"
#   ?Orders = ("""{"orderId":"A100","shipTo":{"country":"BE"},"customer":{"email":"Ada@Example.ORG","vatId":null},"lines":[{"sku":"wid-001","qty":2,"unitCents":999},{"sku":"GAD-002","qty":1,"unitCents":1500}],"declared":{"netCents":3498,"vatCents":509,"grossCents":4007}}"""^^rdf:JSON """{"orderId":"A200","shipTo":{"country":"US"},"customer":{"email":"bob@example.org","vatId":null},"lines":[{"sku":"WID-001","qty":2,"unitCents":999},{"sku":"GAD-002","qty":1,"unitCents":1500}],"declared":{"netCents":3498,"vatCents":0,"grossCents":3498}}"""^^rdf:JSON """{"orderId":"A300","shipTo":{"country":"NL"},"customer":{"email":"acct@company.nl","vatId":"NL999999999B01"},"lines":[{"sku":"WID-001","qty":2,"unitCents":999},{"sku":"GAD-002","qty":1,"unitCents":1500}],"declared":{"netCents":3498,"vatCents":0,"grossCents":3498}}"""^^rdf:JSON """{"orderId":"A301","shipTo":{"country":"NL"},"customer":{"email":"billing@company.nl","vatId":"NL999999999B01"},"lines":[{"sku":"WID-001","qty":2,"unitCents":999},{"sku":"GAD-002","qty":1,"unitCents":1500}],"declared":{"netCents":3498,"vatCents":0,"grossCents":3498}}"""^^rdf:JSON """{"orderId":"A400","shipTo":{"country":"BE"},"customer":{"email":"ada@other.example","vatId":null},"lines":[{"sku":"WID-001","qty":2,"unitCents":999},{"sku":"GAD-002","qty":1,"unitCents":1500}],"declared":{"netCents":3498,"vatCents":508,"grossCents":4006}}"""^^rdf:JSON)
#   ?Product = ex:Widget
#   ?Qty = 2
#   ?SkuCat = "WID-001"
#   ?SkuJson = "WID-001"
#   ?UnitCents = 999
# Therefore the derived triple above is entailed by the rules and facts.
# ----------------------------------------------------------------------

<urn:example:order:A400#line:0> ex:unitCents 999 .

# ----------------------------------------------------------------------
# Proof for derived triple:
#   <urn:example:order:A400#line:0> ex:netCents 1998 .
# It holds because the following instance of the rule body is provable:
#   ex:feed ex:json """{
#     "meta~data": { "batch": "2025-12-18" },
#     "orders": [
#       {
#         "orderId": "A100",
#         "shipTo": { "country": "BE" },
#         "customer": { "email": "Ada@Example.ORG", "vatId": null },
#         "lines": [
#           { "sku": "wid-001", "qty": 2, "unitCents": 999 },
#           { "sku": "GAD-002", "qty": 1, "unitCents": 1500 }
#         ],
#         "declared": { "netCents": 3498, "vatCents": 509, "grossCents": 4007 }
#       },
#       {
#         "orderId": "A200",
#         "shipTo": { "country": "US" },
#         "customer": { "email": "bob@example.org", "vatId": null },
#         "lines": [
#           { "sku": "WID-001", "qty": 2, "unitCents": 999 },
#           { "sku": "GAD-002", "qty": 1, "unitCents": 1500 }
#         ],
#         "declared": { "netCents": 3498, "vatCents": 0, "grossCents": 3498 }
#       },
#       {
#         "orderId": "A300",
#         "shipTo": { "country": "NL" },
#         "customer": { "email": "acct@company.nl", "vatId": "NL999999999B01" },
#         "lines": [
#           { "sku": "WID-001", "qty": 2, "unitCents": 999 },
#           { "sku": "GAD-002", "qty": 1, "unitCents": 1500 }
#         ],
#         "declared": { "netCents": 3498, "vatCents": 0, "grossCents": 3498 }
#       },
#       {
#         "orderId": "A301",
#         "shipTo": { "country": "NL" },
#         "customer": { "email": "billing@company.nl", "vatId": "NL999999999B01" },
#         "lines": [
#           { "sku": "WID-001", "qty": 2, "unitCents": 999 },
#           { "sku": "GAD-002", "qty": 1, "unitCents": 1500 }
#         ],
#         "declared": { "netCents": 3498, "vatCents": 0, "grossCents": 3498 }
#       },
#       {
#         "orderId": "A400",
#         "shipTo": { "country": "BE" },
#         "customer": { "email": "ada@other.example", "vatId": null },
#         "lines": [
#           { "sku": "WID-001", "qty": 2, "unitCents": 999 },
#           { "sku": "GAD-002", "qty": 1, "unitCents": 1500 }
#         ],
#         "declared": { "netCents": 3498, "vatCents": 508, "grossCents": 4006 }
#       }
#     ]
#   }"""^^rdf:JSON .
#   ("""{
#     "meta~data": { "batch": "2025-12-18" },
#     "orders": [
#       {
#         "orderId": "A100",
#         "shipTo": { "country": "BE" },
#         "customer": { "email": "Ada@Example.ORG", "vatId": null },
#         "lines": [
#           { "sku": "wid-001", "qty": 2, "unitCents": 999 },
#           { "sku": "GAD-002", "qty": 1, "unitCents": 1500 }
#         ],
#         "declared": { "netCents": 3498, "vatCents": 509, "grossCents": 4007 }
#       },
#       {
#         "orderId": "A200",
#         "shipTo": { "country": "US" },
#         "customer": { "email": "bob@example.org", "vatId": null },
#         "lines": [
#           { "sku": "WID-001", "qty": 2, "unitCents": 999 },
#           { "sku": "GAD-002", "qty": 1, "unitCents": 1500 }
#         ],
#         "declared": { "netCents": 3498, "vatCents": 0, "grossCents": 3498 }
#       },
#       {
#         "orderId": "A300",
#         "shipTo": { "country": "NL" },
#         "customer": { "email": "acct@company.nl", "vatId": "NL999999999B01" },
#         "lines": [
#           { "sku": "WID-001", "qty": 2, "unitCents": 999 },
#           { "sku": "GAD-002", "qty": 1, "unitCents": 1500 }
#         ],
#         "declared": { "netCents": 3498, "vatCents": 0, "grossCents": 3498 }
#       },
#       {
#         "orderId": "A301",
#         "shipTo": { "country": "NL" },
#         "customer": { "email": "billing@company.nl", "vatId": "NL999999999B01" },
#         "lines": [
#           { "sku": "WID-001", "qty": 2, "unitCents": 999 },
#           { "sku": "GAD-002", "qty": 1, "unitCents": 1500 }
#         ],
#         "declared": { "netCents": 3498, "vatCents": 0, "grossCents": 3498 }
#       },
#       {
#         "orderId": "A400",
#         "shipTo": { "country": "BE" },
#         "customer": { "email": "ada@other.example", "vatId": null },
#         "lines": [
#           { "sku": "WID-001", "qty": 2, "unitCents": 999 },
#           { "sku": "GAD-002", "qty": 1, "unitCents": 1500 }
#         ],
#         "declared": { "netCents": 3498, "vatCents": 508, "grossCents": 4006 }
#       }
#     ]
#   }"""^^rdf:JSON "/orders") string:jsonPointer ("""{"orderId":"A100","shipTo":{"country":"BE"},"customer":{"email":"Ada@Example.ORG","vatId":null},"lines":[{"sku":"wid-001","qty":2,"unitCents":999},{"sku":"GAD-002","qty":1,"unitCents":1500}],"declared":{"netCents":3498,"vatCents":509,"grossCents":4007}}"""^^rdf:JSON """{"orderId":"A200","shipTo":{"country":"US"},"customer":{"email":"bob@example.org","vatId":null},"lines":[{"sku":"WID-001","qty":2,"unitCents":999},{"sku":"GAD-002","qty":1,"unitCents":1500}],"declared":{"netCents":3498,"vatCents":0,"grossCents":3498}}"""^^rdf:JSON """{"orderId":"A300","shipTo":{"country":"NL"},"customer":{"email":"acct@company.nl","vatId":"NL999999999B01"},"lines":[{"sku":"WID-001","qty":2,"unitCents":999},{"sku":"GAD-002","qty":1,"unitCents":1500}],"declared":{"netCents":3498,"vatCents":0,"grossCents":3498}}"""^^rdf:JSON """{"orderId":"A301","shipTo":{"country":"NL"},"customer":{"email":"billing@company.nl","vatId":"NL999999999B01"},"lines":[{"sku":"WID-001","qty":2,"unitCents":999},{"sku":"GAD-002","qty":1,"unitCents":1500}],"declared":{"netCents":3498,"vatCents":0,"grossCents":3498}}"""^^rdf:JSON """{"orderId":"A400","shipTo":{"country":"BE"},"customer":{"email":"ada@other.example","vatId":null},"lines":[{"sku":"WID-001","qty":2,"unitCents":999},{"sku":"GAD-002","qty":1,"unitCents":1500}],"declared":{"netCents":3498,"vatCents":508,"grossCents":4006}}"""^^rdf:JSON) .
#   ("""{"orderId":"A100","shipTo":{"country":"BE"},"customer":{"email":"Ada@Example.ORG","vatId":null},"lines":[{"sku":"wid-001","qty":2,"unitCents":999},{"sku":"GAD-002","qty":1,"unitCents":1500}],"declared":{"netCents":3498,"vatCents":509,"grossCents":4007}}"""^^rdf:JSON """{"orderId":"A200","shipTo":{"country":"US"},"customer":{"email":"bob@example.org","vatId":null},"lines":[{"sku":"WID-001","qty":2,"unitCents":999},{"sku":"GAD-002","qty":1,"unitCents":1500}],"declared":{"netCents":3498,"vatCents":0,"grossCents":3498}}"""^^rdf:JSON """{"orderId":"A300","shipTo":{"country":"NL"},"customer":{"email":"acct@company.nl","vatId":"NL999999999B01"},"lines":[{"sku":"WID-001","qty":2,"unitCents":999},{"sku":"GAD-002","qty":1,"unitCents":1500}],"declared":{"netCents":3498,"vatCents":0,"grossCents":3498}}"""^^rdf:JSON """{"orderId":"A301","shipTo":{"country":"NL"},"customer":{"email":"billing@company.nl","vatId":"NL999999999B01"},"lines":[{"sku":"WID-001","qty":2,"unitCents":999},{"sku":"GAD-002","qty":1,"unitCents":1500}],"declared":{"netCents":3498,"vatCents":0,"grossCents":3498}}"""^^rdf:JSON """{"orderId":"A400","shipTo":{"country":"BE"},"customer":{"email":"ada@other.example","vatId":null},"lines":[{"sku":"WID-001","qty":2,"unitCents":999},{"sku":"GAD-002","qty":1,"unitCents":1500}],"declared":{"netCents":3498,"vatCents":508,"grossCents":4006}}"""^^rdf:JSON) list:iterate (4 """{"orderId":"A400","shipTo":{"country":"BE"},"customer":{"email":"ada@other.example","vatId":null},"lines":[{"sku":"WID-001","qty":2,"unitCents":999},{"sku":"GAD-002","qty":1,"unitCents":1500}],"declared":{"netCents":3498,"vatCents":508,"grossCents":4006}}"""^^rdf:JSON) .
#   ("""{"orderId":"A400","shipTo":{"country":"BE"},"customer":{"email":"ada@other.example","vatId":null},"lines":[{"sku":"WID-001","qty":2,"unitCents":999},{"sku":"GAD-002","qty":1,"unitCents":1500}],"declared":{"netCents":3498,"vatCents":508,"grossCents":4006}}"""^^rdf:JSON "/orderId") string:jsonPointer "A400" .
#   ("urn:example:order:%s" "A400") string:format "urn:example:order:A400" .
#   <urn:example:order:A400> log:uri "urn:example:order:A400" .
#   ("""{"orderId":"A400","shipTo":{"country":"BE"},"customer":{"email":"ada@other.example","vatId":null},"lines":[{"sku":"WID-001","qty":2,"unitCents":999},{"sku":"GAD-002","qty":1,"unitCents":1500}],"declared":{"netCents":3498,"vatCents":508,"grossCents":4006}}"""^^rdf:JSON "/lines") string:jsonPointer ("""{"sku":"WID-001","qty":2,"unitCents":999}"""^^rdf:JSON """{"sku":"GAD-002","qty":1,"unitCents":1500}"""^^rdf:JSON) .
#   ("""{"sku":"WID-001","qty":2,"unitCents":999}"""^^rdf:JSON """{"sku":"GAD-002","qty":1,"unitCents":1500}"""^^rdf:JSON) list:iterate (0 """{"sku":"WID-001","qty":2,"unitCents":999}"""^^rdf:JSON) .
#   ("""{"sku":"WID-001","qty":2,"unitCents":999}"""^^rdf:JSON "/sku") string:jsonPointer "WID-001" .
#   ("""{"sku":"WID-001","qty":2,"unitCents":999}"""^^rdf:JSON "/qty") string:jsonPointer 2 .
#   ("""{"sku":"WID-001","qty":2,"unitCents":999}"""^^rdf:JSON "/unitCents") string:jsonPointer 999 .
#   ex:Widget a ex:Product .
#   ex:Widget ex:sku "WID-001" .
#   (2 999) math:product 1998 .
#   ("urn:example:order:%s#line:%s" "A400" 0) string:format "urn:example:order:A400#line:0" .
#   <urn:example:order:A400#line:0> log:uri "urn:example:order:A400#line:0" .
#   "WID-001" string:equalIgnoringCase "WID-001" .
# via the schematic forward rule:
#   {
#     ex:feed ex:json ?J .
#     (?J "/orders") string:jsonPointer ?Orders .
#     ?Orders list:iterate (?OrderIndex ?OrderJson) .
#     (?OrderJson "/orderId") string:jsonPointer ?OrderId .
#     ("urn:example:order:%s" ?OrderId) string:format ?OrderUriStr .
#     ?Order log:uri ?OrderUriStr .
#     (?OrderJson "/lines") string:jsonPointer ?Lines .
#     ?Lines list:iterate (?LineIndex ?LineJson) .
#     (?LineJson "/sku") string:jsonPointer ?SkuJson .
#     (?LineJson "/qty") string:jsonPointer ?Qty .
#     (?LineJson "/unitCents") string:jsonPointer ?UnitCents .
#     ?Product a ex:Product .
#     ?Product ex:sku ?SkuCat .
#     (?Qty ?UnitCents) math:product ?NetCents .
#     ("urn:example:order:%s#line:%s" ?OrderId ?LineIndex) string:format ?LineUriStr .
#     ?Line log:uri ?LineUriStr .
#     ?SkuJson string:equalIgnoringCase ?SkuCat .
#   } => {
#     ?Order ex:line ?Line .
#     ?Line a ex:OrderLine .
#     ?Line ex:lineIndex ?LineIndex .
#     ?Line ex:product ?Product .
#     ?Line ex:sku ?SkuCat .
#     ?Line ex:qty ?Qty .
#     ?Line ex:unitCents ?UnitCents .
#     ?Line ex:netCents ?NetCents .
#   } .
# with substitution (on rule variables):
#   ?J = """{
#     "meta~data": { "batch": "2025-12-18" },
#     "orders": [
#     {
#     "orderId": "A100",
#     "shipTo": { "country": "BE" },
#     "customer": { "email": "Ada@Example.ORG", "vatId": null },
#     "lines": [
#     { "sku": "wid-001", "qty": 2, "unitCents": 999 },
#     { "sku": "GAD-002", "qty": 1, "unitCents": 1500 }
#     ],
#     "declared": { "netCents": 3498, "vatCents": 509, "grossCents": 4007 }
#     },
#     {
#     "orderId": "A200",
#     "shipTo": { "country": "US" },
#     "customer": { "email": "bob@example.org", "vatId": null },
#     "lines": [
#     { "sku": "WID-001", "qty": 2, "unitCents": 999 },
#     { "sku": "GAD-002", "qty": 1, "unitCents": 1500 }
#     ],
#     "declared": { "netCents": 3498, "vatCents": 0, "grossCents": 3498 }
#     },
#     {
#     "orderId": "A300",
#     "shipTo": { "country": "NL" },
#     "customer": { "email": "acct@company.nl", "vatId": "NL999999999B01" },
#     "lines": [
#     { "sku": "WID-001", "qty": 2, "unitCents": 999 },
#     { "sku": "GAD-002", "qty": 1, "unitCents": 1500 }
#     ],
#     "declared": { "netCents": 3498, "vatCents": 0, "grossCents": 3498 }
#     },
#     {
#     "orderId": "A301",
#     "shipTo": { "country": "NL" },
#     "customer": { "email": "billing@company.nl", "vatId": "NL999999999B01" },
#     "lines": [
#     { "sku": "WID-001", "qty": 2, "unitCents": 999 },
#     { "sku": "GAD-002", "qty": 1, "unitCents": 1500 }
#     ],
#     "declared": { "netCents": 3498, "vatCents": 0, "grossCents": 3498 }
#     },
#     {
#     "orderId": "A400",
#     "shipTo": { "country": "BE" },
#     "customer": { "email": "ada@other.example", "vatId": null },
#     "lines": [
#     { "sku": "WID-001", "qty": 2, "unitCents": 999 },
#     { "sku": "GAD-002", "qty": 1, "unitCents": 1500 }
#     ],
#     "declared": { "netCents": 3498, "vatCents": 508, "grossCents": 4006 }
#     }
#     ]
#   }"""^^rdf:JSON
#   ?Line = <urn:example:order:A400#line:0>
#   ?LineIndex = 0
#   ?LineJson = """{"sku":"WID-001","qty":2,"unitCents":999}"""^^rdf:JSON
#   ?LineUriStr = "urn:example:order:A400#line:0"
#   ?Lines = ("""{"sku":"WID-001","qty":2,"unitCents":999}"""^^rdf:JSON """{"sku":"GAD-002","qty":1,"unitCents":1500}"""^^rdf:JSON)
#   ?NetCents = 1998
#   ?Order = <urn:example:order:A400>
#   ?OrderId = "A400"
#   ?OrderIndex = 4
#   ?OrderJson = """{"orderId":"A400","shipTo":{"country":"BE"},"customer":{"email":"ada@other.example","vatId":null},"lines":[{"sku":"WID-001","qty":2,"unitCents":999},{"sku":"GAD-002","qty":1,"unitCents":1500}],"declared":{"netCents":3498,"vatCents":508,"grossCents":4006}}"""^^rdf:JSON
#   ?OrderUriStr = "urn:example:order:A400"
#   ?Orders = ("""{"orderId":"A100","shipTo":{"country":"BE"},"customer":{"email":"Ada@Example.ORG","vatId":null},"lines":[{"sku":"wid-001","qty":2,"unitCents":999},{"sku":"GAD-002","qty":1,"unitCents":1500}],"declared":{"netCents":3498,"vatCents":509,"grossCents":4007}}"""^^rdf:JSON """{"orderId":"A200","shipTo":{"country":"US"},"customer":{"email":"bob@example.org","vatId":null},"lines":[{"sku":"WID-001","qty":2,"unitCents":999},{"sku":"GAD-002","qty":1,"unitCents":1500}],"declared":{"netCents":3498,"vatCents":0,"grossCents":3498}}"""^^rdf:JSON """{"orderId":"A300","shipTo":{"country":"NL"},"customer":{"email":"acct@company.nl","vatId":"NL999999999B01"},"lines":[{"sku":"WID-001","qty":2,"unitCents":999},{"sku":"GAD-002","qty":1,"unitCents":1500}],"declared":{"netCents":3498,"vatCents":0,"grossCents":3498}}"""^^rdf:JSON """{"orderId":"A301","shipTo":{"country":"NL"},"customer":{"email":"billing@company.nl","vatId":"NL999999999B01"},"lines":[{"sku":"WID-001","qty":2,"unitCents":999},{"sku":"GAD-002","qty":1,"unitCents":1500}],"declared":{"netCents":3498,"vatCents":0,"grossCents":3498}}"""^^rdf:JSON """{"orderId":"A400","shipTo":{"country":"BE"},"customer":{"email":"ada@other.example","vatId":null},"lines":[{"sku":"WID-001","qty":2,"unitCents":999},{"sku":"GAD-002","qty":1,"unitCents":1500}],"declared":{"netCents":3498,"vatCents":508,"grossCents":4006}}"""^^rdf:JSON)
#   ?Product = ex:Widget
#   ?Qty = 2
#   ?SkuCat = "WID-001"
#   ?SkuJson = "WID-001"
#   ?UnitCents = 999
# Therefore the derived triple above is entailed by the rules and facts.
# ----------------------------------------------------------------------

<urn:example:order:A400#line:0> ex:netCents 1998 .

# ----------------------------------------------------------------------
# Proof for derived triple:
#   <urn:example:order:A301> ex:line <urn:example:order:A301#line:1> .
# It holds because the following instance of the rule body is provable:
#   ex:feed ex:json """{
#     "meta~data": { "batch": "2025-12-18" },
#     "orders": [
#       {
#         "orderId": "A100",
#         "shipTo": { "country": "BE" },
#         "customer": { "email": "Ada@Example.ORG", "vatId": null },
#         "lines": [
#           { "sku": "wid-001", "qty": 2, "unitCents": 999 },
#           { "sku": "GAD-002", "qty": 1, "unitCents": 1500 }
#         ],
#         "declared": { "netCents": 3498, "vatCents": 509, "grossCents": 4007 }
#       },
#       {
#         "orderId": "A200",
#         "shipTo": { "country": "US" },
#         "customer": { "email": "bob@example.org", "vatId": null },
#         "lines": [
#           { "sku": "WID-001", "qty": 2, "unitCents": 999 },
#           { "sku": "GAD-002", "qty": 1, "unitCents": 1500 }
#         ],
#         "declared": { "netCents": 3498, "vatCents": 0, "grossCents": 3498 }
#       },
#       {
#         "orderId": "A300",
#         "shipTo": { "country": "NL" },
#         "customer": { "email": "acct@company.nl", "vatId": "NL999999999B01" },
#         "lines": [
#           { "sku": "WID-001", "qty": 2, "unitCents": 999 },
#           { "sku": "GAD-002", "qty": 1, "unitCents": 1500 }
#         ],
#         "declared": { "netCents": 3498, "vatCents": 0, "grossCents": 3498 }
#       },
#       {
#         "orderId": "A301",
#         "shipTo": { "country": "NL" },
#         "customer": { "email": "billing@company.nl", "vatId": "NL999999999B01" },
#         "lines": [
#           { "sku": "WID-001", "qty": 2, "unitCents": 999 },
#           { "sku": "GAD-002", "qty": 1, "unitCents": 1500 }
#         ],
#         "declared": { "netCents": 3498, "vatCents": 0, "grossCents": 3498 }
#       },
#       {
#         "orderId": "A400",
#         "shipTo": { "country": "BE" },
#         "customer": { "email": "ada@other.example", "vatId": null },
#         "lines": [
#           { "sku": "WID-001", "qty": 2, "unitCents": 999 },
#           { "sku": "GAD-002", "qty": 1, "unitCents": 1500 }
#         ],
#         "declared": { "netCents": 3498, "vatCents": 508, "grossCents": 4006 }
#       }
#     ]
#   }"""^^rdf:JSON .
#   ("""{
#     "meta~data": { "batch": "2025-12-18" },
#     "orders": [
#       {
#         "orderId": "A100",
#         "shipTo": { "country": "BE" },
#         "customer": { "email": "Ada@Example.ORG", "vatId": null },
#         "lines": [
#           { "sku": "wid-001", "qty": 2, "unitCents": 999 },
#           { "sku": "GAD-002", "qty": 1, "unitCents": 1500 }
#         ],
#         "declared": { "netCents": 3498, "vatCents": 509, "grossCents": 4007 }
#       },
#       {
#         "orderId": "A200",
#         "shipTo": { "country": "US" },
#         "customer": { "email": "bob@example.org", "vatId": null },
#         "lines": [
#           { "sku": "WID-001", "qty": 2, "unitCents": 999 },
#           { "sku": "GAD-002", "qty": 1, "unitCents": 1500 }
#         ],
#         "declared": { "netCents": 3498, "vatCents": 0, "grossCents": 3498 }
#       },
#       {
#         "orderId": "A300",
#         "shipTo": { "country": "NL" },
#         "customer": { "email": "acct@company.nl", "vatId": "NL999999999B01" },
#         "lines": [
#           { "sku": "WID-001", "qty": 2, "unitCents": 999 },
#           { "sku": "GAD-002", "qty": 1, "unitCents": 1500 }
#         ],
#         "declared": { "netCents": 3498, "vatCents": 0, "grossCents": 3498 }
#       },
#       {
#         "orderId": "A301",
#         "shipTo": { "country": "NL" },
#         "customer": { "email": "billing@company.nl", "vatId": "NL999999999B01" },
#         "lines": [
#           { "sku": "WID-001", "qty": 2, "unitCents": 999 },
#           { "sku": "GAD-002", "qty": 1, "unitCents": 1500 }
#         ],
#         "declared": { "netCents": 3498, "vatCents": 0, "grossCents": 3498 }
#       },
#       {
#         "orderId": "A400",
#         "shipTo": { "country": "BE" },
#         "customer": { "email": "ada@other.example", "vatId": null },
#         "lines": [
#           { "sku": "WID-001", "qty": 2, "unitCents": 999 },
#           { "sku": "GAD-002", "qty": 1, "unitCents": 1500 }
#         ],
#         "declared": { "netCents": 3498, "vatCents": 508, "grossCents": 4006 }
#       }
#     ]
#   }"""^^rdf:JSON "/orders") string:jsonPointer ("""{"orderId":"A100","shipTo":{"country":"BE"},"customer":{"email":"Ada@Example.ORG","vatId":null},"lines":[{"sku":"wid-001","qty":2,"unitCents":999},{"sku":"GAD-002","qty":1,"unitCents":1500}],"declared":{"netCents":3498,"vatCents":509,"grossCents":4007}}"""^^rdf:JSON """{"orderId":"A200","shipTo":{"country":"US"},"customer":{"email":"bob@example.org","vatId":null},"lines":[{"sku":"WID-001","qty":2,"unitCents":999},{"sku":"GAD-002","qty":1,"unitCents":1500}],"declared":{"netCents":3498,"vatCents":0,"grossCents":3498}}"""^^rdf:JSON """{"orderId":"A300","shipTo":{"country":"NL"},"customer":{"email":"acct@company.nl","vatId":"NL999999999B01"},"lines":[{"sku":"WID-001","qty":2,"unitCents":999},{"sku":"GAD-002","qty":1,"unitCents":1500}],"declared":{"netCents":3498,"vatCents":0,"grossCents":3498}}"""^^rdf:JSON """{"orderId":"A301","shipTo":{"country":"NL"},"customer":{"email":"billing@company.nl","vatId":"NL999999999B01"},"lines":[{"sku":"WID-001","qty":2,"unitCents":999},{"sku":"GAD-002","qty":1,"unitCents":1500}],"declared":{"netCents":3498,"vatCents":0,"grossCents":3498}}"""^^rdf:JSON """{"orderId":"A400","shipTo":{"country":"BE"},"customer":{"email":"ada@other.example","vatId":null},"lines":[{"sku":"WID-001","qty":2,"unitCents":999},{"sku":"GAD-002","qty":1,"unitCents":1500}],"declared":{"netCents":3498,"vatCents":508,"grossCents":4006}}"""^^rdf:JSON) .
#   ("""{"orderId":"A100","shipTo":{"country":"BE"},"customer":{"email":"Ada@Example.ORG","vatId":null},"lines":[{"sku":"wid-001","qty":2,"unitCents":999},{"sku":"GAD-002","qty":1,"unitCents":1500}],"declared":{"netCents":3498,"vatCents":509,"grossCents":4007}}"""^^rdf:JSON """{"orderId":"A200","shipTo":{"country":"US"},"customer":{"email":"bob@example.org","vatId":null},"lines":[{"sku":"WID-001","qty":2,"unitCents":999},{"sku":"GAD-002","qty":1,"unitCents":1500}],"declared":{"netCents":3498,"vatCents":0,"grossCents":3498}}"""^^rdf:JSON """{"orderId":"A300","shipTo":{"country":"NL"},"customer":{"email":"acct@company.nl","vatId":"NL999999999B01"},"lines":[{"sku":"WID-001","qty":2,"unitCents":999},{"sku":"GAD-002","qty":1,"unitCents":1500}],"declared":{"netCents":3498,"vatCents":0,"grossCents":3498}}"""^^rdf:JSON """{"orderId":"A301","shipTo":{"country":"NL"},"customer":{"email":"billing@company.nl","vatId":"NL999999999B01"},"lines":[{"sku":"WID-001","qty":2,"unitCents":999},{"sku":"GAD-002","qty":1,"unitCents":1500}],"declared":{"netCents":3498,"vatCents":0,"grossCents":3498}}"""^^rdf:JSON """{"orderId":"A400","shipTo":{"country":"BE"},"customer":{"email":"ada@other.example","vatId":null},"lines":[{"sku":"WID-001","qty":2,"unitCents":999},{"sku":"GAD-002","qty":1,"unitCents":1500}],"declared":{"netCents":3498,"vatCents":508,"grossCents":4006}}"""^^rdf:JSON) list:iterate (3 """{"orderId":"A301","shipTo":{"country":"NL"},"customer":{"email":"billing@company.nl","vatId":"NL999999999B01"},"lines":[{"sku":"WID-001","qty":2,"unitCents":999},{"sku":"GAD-002","qty":1,"unitCents":1500}],"declared":{"netCents":3498,"vatCents":0,"grossCents":3498}}"""^^rdf:JSON) .
#   ("""{"orderId":"A301","shipTo":{"country":"NL"},"customer":{"email":"billing@company.nl","vatId":"NL999999999B01"},"lines":[{"sku":"WID-001","qty":2,"unitCents":999},{"sku":"GAD-002","qty":1,"unitCents":1500}],"declared":{"netCents":3498,"vatCents":0,"grossCents":3498}}"""^^rdf:JSON "/orderId") string:jsonPointer "A301" .
#   ("urn:example:order:%s" "A301") string:format "urn:example:order:A301" .
#   <urn:example:order:A301> log:uri "urn:example:order:A301" .
#   ("""{"orderId":"A301","shipTo":{"country":"NL"},"customer":{"email":"billing@company.nl","vatId":"NL999999999B01"},"lines":[{"sku":"WID-001","qty":2,"unitCents":999},{"sku":"GAD-002","qty":1,"unitCents":1500}],"declared":{"netCents":3498,"vatCents":0,"grossCents":3498}}"""^^rdf:JSON "/lines") string:jsonPointer ("""{"sku":"WID-001","qty":2,"unitCents":999}"""^^rdf:JSON """{"sku":"GAD-002","qty":1,"unitCents":1500}"""^^rdf:JSON) .
#   ("""{"sku":"WID-001","qty":2,"unitCents":999}"""^^rdf:JSON """{"sku":"GAD-002","qty":1,"unitCents":1500}"""^^rdf:JSON) list:iterate (1 """{"sku":"GAD-002","qty":1,"unitCents":1500}"""^^rdf:JSON) .
#   ("""{"sku":"GAD-002","qty":1,"unitCents":1500}"""^^rdf:JSON "/sku") string:jsonPointer "GAD-002" .
#   ("""{"sku":"GAD-002","qty":1,"unitCents":1500}"""^^rdf:JSON "/qty") string:jsonPointer 1 .
#   ("""{"sku":"GAD-002","qty":1,"unitCents":1500}"""^^rdf:JSON "/unitCents") string:jsonPointer 1500 .
#   ex:Gadget a ex:Product .
#   ex:Gadget ex:sku "GAD-002" .
#   (1 1500) math:product 1500 .
#   ("urn:example:order:%s#line:%s" "A301" 1) string:format "urn:example:order:A301#line:1" .
#   <urn:example:order:A301#line:1> log:uri "urn:example:order:A301#line:1" .
#   "GAD-002" string:equalIgnoringCase "GAD-002" .
# via the schematic forward rule:
#   {
#     ex:feed ex:json ?J .
#     (?J "/orders") string:jsonPointer ?Orders .
#     ?Orders list:iterate (?OrderIndex ?OrderJson) .
#     (?OrderJson "/orderId") string:jsonPointer ?OrderId .
#     ("urn:example:order:%s" ?OrderId) string:format ?OrderUriStr .
#     ?Order log:uri ?OrderUriStr .
#     (?OrderJson "/lines") string:jsonPointer ?Lines .
#     ?Lines list:iterate (?LineIndex ?LineJson) .
#     (?LineJson "/sku") string:jsonPointer ?SkuJson .
#     (?LineJson "/qty") string:jsonPointer ?Qty .
#     (?LineJson "/unitCents") string:jsonPointer ?UnitCents .
#     ?Product a ex:Product .
#     ?Product ex:sku ?SkuCat .
#     (?Qty ?UnitCents) math:product ?NetCents .
#     ("urn:example:order:%s#line:%s" ?OrderId ?LineIndex) string:format ?LineUriStr .
#     ?Line log:uri ?LineUriStr .
#     ?SkuJson string:equalIgnoringCase ?SkuCat .
#   } => {
#     ?Order ex:line ?Line .
#     ?Line a ex:OrderLine .
#     ?Line ex:lineIndex ?LineIndex .
#     ?Line ex:product ?Product .
#     ?Line ex:sku ?SkuCat .
#     ?Line ex:qty ?Qty .
#     ?Line ex:unitCents ?UnitCents .
#     ?Line ex:netCents ?NetCents .
#   } .
# with substitution (on rule variables):
#   ?J = """{
#     "meta~data": { "batch": "2025-12-18" },
#     "orders": [
#     {
#     "orderId": "A100",
#     "shipTo": { "country": "BE" },
#     "customer": { "email": "Ada@Example.ORG", "vatId": null },
#     "lines": [
#     { "sku": "wid-001", "qty": 2, "unitCents": 999 },
#     { "sku": "GAD-002", "qty": 1, "unitCents": 1500 }
#     ],
#     "declared": { "netCents": 3498, "vatCents": 509, "grossCents": 4007 }
#     },
#     {
#     "orderId": "A200",
#     "shipTo": { "country": "US" },
#     "customer": { "email": "bob@example.org", "vatId": null },
#     "lines": [
#     { "sku": "WID-001", "qty": 2, "unitCents": 999 },
#     { "sku": "GAD-002", "qty": 1, "unitCents": 1500 }
#     ],
#     "declared": { "netCents": 3498, "vatCents": 0, "grossCents": 3498 }
#     },
#     {
#     "orderId": "A300",
#     "shipTo": { "country": "NL" },
#     "customer": { "email": "acct@company.nl", "vatId": "NL999999999B01" },
#     "lines": [
#     { "sku": "WID-001", "qty": 2, "unitCents": 999 },
#     { "sku": "GAD-002", "qty": 1, "unitCents": 1500 }
#     ],
#     "declared": { "netCents": 3498, "vatCents": 0, "grossCents": 3498 }
#     },
#     {
#     "orderId": "A301",
#     "shipTo": { "country": "NL" },
#     "customer": { "email": "billing@company.nl", "vatId": "NL999999999B01" },
#     "lines": [
#     { "sku": "WID-001", "qty": 2, "unitCents": 999 },
#     { "sku": "GAD-002", "qty": 1, "unitCents": 1500 }
#     ],
#     "declared": { "netCents": 3498, "vatCents": 0, "grossCents": 3498 }
#     },
#     {
#     "orderId": "A400",
#     "shipTo": { "country": "BE" },
#     "customer": { "email": "ada@other.example", "vatId": null },
#     "lines": [
#     { "sku": "WID-001", "qty": 2, "unitCents": 999 },
#     { "sku": "GAD-002", "qty": 1, "unitCents": 1500 }
#     ],
#     "declared": { "netCents": 3498, "vatCents": 508, "grossCents": 4006 }
#     }
#     ]
#   }"""^^rdf:JSON
#   ?Line = <urn:example:order:A301#line:1>
#   ?LineIndex = 1
#   ?LineJson = """{"sku":"GAD-002","qty":1,"unitCents":1500}"""^^rdf:JSON
#   ?LineUriStr = "urn:example:order:A301#line:1"
#   ?Lines = ("""{"sku":"WID-001","qty":2,"unitCents":999}"""^^rdf:JSON """{"sku":"GAD-002","qty":1,"unitCents":1500}"""^^rdf:JSON)
#   ?NetCents = 1500
#   ?Order = <urn:example:order:A301>
#   ?OrderId = "A301"
#   ?OrderIndex = 3
#   ?OrderJson = """{"orderId":"A301","shipTo":{"country":"NL"},"customer":{"email":"billing@company.nl","vatId":"NL999999999B01"},"lines":[{"sku":"WID-001","qty":2,"unitCents":999},{"sku":"GAD-002","qty":1,"unitCents":1500}],"declared":{"netCents":3498,"vatCents":0,"grossCents":3498}}"""^^rdf:JSON
#   ?OrderUriStr = "urn:example:order:A301"
#   ?Orders = ("""{"orderId":"A100","shipTo":{"country":"BE"},"customer":{"email":"Ada@Example.ORG","vatId":null},"lines":[{"sku":"wid-001","qty":2,"unitCents":999},{"sku":"GAD-002","qty":1,"unitCents":1500}],"declared":{"netCents":3498,"vatCents":509,"grossCents":4007}}"""^^rdf:JSON """{"orderId":"A200","shipTo":{"country":"US"},"customer":{"email":"bob@example.org","vatId":null},"lines":[{"sku":"WID-001","qty":2,"unitCents":999},{"sku":"GAD-002","qty":1,"unitCents":1500}],"declared":{"netCents":3498,"vatCents":0,"grossCents":3498}}"""^^rdf:JSON """{"orderId":"A300","shipTo":{"country":"NL"},"customer":{"email":"acct@company.nl","vatId":"NL999999999B01"},"lines":[{"sku":"WID-001","qty":2,"unitCents":999},{"sku":"GAD-002","qty":1,"unitCents":1500}],"declared":{"netCents":3498,"vatCents":0,"grossCents":3498}}"""^^rdf:JSON """{"orderId":"A301","shipTo":{"country":"NL"},"customer":{"email":"billing@company.nl","vatId":"NL999999999B01"},"lines":[{"sku":"WID-001","qty":2,"unitCents":999},{"sku":"GAD-002","qty":1,"unitCents":1500}],"declared":{"netCents":3498,"vatCents":0,"grossCents":3498}}"""^^rdf:JSON """{"orderId":"A400","shipTo":{"country":"BE"},"customer":{"email":"ada@other.example","vatId":null},"lines":[{"sku":"WID-001","qty":2,"unitCents":999},{"sku":"GAD-002","qty":1,"unitCents":1500}],"declared":{"netCents":3498,"vatCents":508,"grossCents":4006}}"""^^rdf:JSON)
#   ?Product = ex:Gadget
#   ?Qty = 1
#   ?SkuCat = "GAD-002"
#   ?SkuJson = "GAD-002"
#   ?UnitCents = 1500
# Therefore the derived triple above is entailed by the rules and facts.
# ----------------------------------------------------------------------

<urn:example:order:A301> ex:line <urn:example:order:A301#line:1> .

# ----------------------------------------------------------------------
# Proof for derived triple:
#   <urn:example:order:A301#line:1> a ex:OrderLine .
# It holds because the following instance of the rule body is provable:
#   ex:feed ex:json """{
#     "meta~data": { "batch": "2025-12-18" },
#     "orders": [
#       {
#         "orderId": "A100",
#         "shipTo": { "country": "BE" },
#         "customer": { "email": "Ada@Example.ORG", "vatId": null },
#         "lines": [
#           { "sku": "wid-001", "qty": 2, "unitCents": 999 },
#           { "sku": "GAD-002", "qty": 1, "unitCents": 1500 }
#         ],
#         "declared": { "netCents": 3498, "vatCents": 509, "grossCents": 4007 }
#       },
#       {
#         "orderId": "A200",
#         "shipTo": { "country": "US" },
#         "customer": { "email": "bob@example.org", "vatId": null },
#         "lines": [
#           { "sku": "WID-001", "qty": 2, "unitCents": 999 },
#           { "sku": "GAD-002", "qty": 1, "unitCents": 1500 }
#         ],
#         "declared": { "netCents": 3498, "vatCents": 0, "grossCents": 3498 }
#       },
#       {
#         "orderId": "A300",
#         "shipTo": { "country": "NL" },
#         "customer": { "email": "acct@company.nl", "vatId": "NL999999999B01" },
#         "lines": [
#           { "sku": "WID-001", "qty": 2, "unitCents": 999 },
#           { "sku": "GAD-002", "qty": 1, "unitCents": 1500 }
#         ],
#         "declared": { "netCents": 3498, "vatCents": 0, "grossCents": 3498 }
#       },
#       {
#         "orderId": "A301",
#         "shipTo": { "country": "NL" },
#         "customer": { "email": "billing@company.nl", "vatId": "NL999999999B01" },
#         "lines": [
#           { "sku": "WID-001", "qty": 2, "unitCents": 999 },
#           { "sku": "GAD-002", "qty": 1, "unitCents": 1500 }
#         ],
#         "declared": { "netCents": 3498, "vatCents": 0, "grossCents": 3498 }
#       },
#       {
#         "orderId": "A400",
#         "shipTo": { "country": "BE" },
#         "customer": { "email": "ada@other.example", "vatId": null },
#         "lines": [
#           { "sku": "WID-001", "qty": 2, "unitCents": 999 },
#           { "sku": "GAD-002", "qty": 1, "unitCents": 1500 }
#         ],
#         "declared": { "netCents": 3498, "vatCents": 508, "grossCents": 4006 }
#       }
#     ]
#   }"""^^rdf:JSON .
#   ("""{
#     "meta~data": { "batch": "2025-12-18" },
#     "orders": [
#       {
#         "orderId": "A100",
#         "shipTo": { "country": "BE" },
#         "customer": { "email": "Ada@Example.ORG", "vatId": null },
#         "lines": [
#           { "sku": "wid-001", "qty": 2, "unitCents": 999 },
#           { "sku": "GAD-002", "qty": 1, "unitCents": 1500 }
#         ],
#         "declared": { "netCents": 3498, "vatCents": 509, "grossCents": 4007 }
#       },
#       {
#         "orderId": "A200",
#         "shipTo": { "country": "US" },
#         "customer": { "email": "bob@example.org", "vatId": null },
#         "lines": [
#           { "sku": "WID-001", "qty": 2, "unitCents": 999 },
#           { "sku": "GAD-002", "qty": 1, "unitCents": 1500 }
#         ],
#         "declared": { "netCents": 3498, "vatCents": 0, "grossCents": 3498 }
#       },
#       {
#         "orderId": "A300",
#         "shipTo": { "country": "NL" },
#         "customer": { "email": "acct@company.nl", "vatId": "NL999999999B01" },
#         "lines": [
#           { "sku": "WID-001", "qty": 2, "unitCents": 999 },
#           { "sku": "GAD-002", "qty": 1, "unitCents": 1500 }
#         ],
#         "declared": { "netCents": 3498, "vatCents": 0, "grossCents": 3498 }
#       },
#       {
#         "orderId": "A301",
#         "shipTo": { "country": "NL" },
#         "customer": { "email": "billing@company.nl", "vatId": "NL999999999B01" },
#         "lines": [
#           { "sku": "WID-001", "qty": 2, "unitCents": 999 },
#           { "sku": "GAD-002", "qty": 1, "unitCents": 1500 }
#         ],
#         "declared": { "netCents": 3498, "vatCents": 0, "grossCents": 3498 }
#       },
#       {
#         "orderId": "A400",
#         "shipTo": { "country": "BE" },
#         "customer": { "email": "ada@other.example", "vatId": null },
#         "lines": [
#           { "sku": "WID-001", "qty": 2, "unitCents": 999 },
#           { "sku": "GAD-002", "qty": 1, "unitCents": 1500 }
#         ],
#         "declared": { "netCents": 3498, "vatCents": 508, "grossCents": 4006 }
#       }
#     ]
#   }"""^^rdf:JSON "/orders") string:jsonPointer ("""{"orderId":"A100","shipTo":{"country":"BE"},"customer":{"email":"Ada@Example.ORG","vatId":null},"lines":[{"sku":"wid-001","qty":2,"unitCents":999},{"sku":"GAD-002","qty":1,"unitCents":1500}],"declared":{"netCents":3498,"vatCents":509,"grossCents":4007}}"""^^rdf:JSON """{"orderId":"A200","shipTo":{"country":"US"},"customer":{"email":"bob@example.org","vatId":null},"lines":[{"sku":"WID-001","qty":2,"unitCents":999},{"sku":"GAD-002","qty":1,"unitCents":1500}],"declared":{"netCents":3498,"vatCents":0,"grossCents":3498}}"""^^rdf:JSON """{"orderId":"A300","shipTo":{"country":"NL"},"customer":{"email":"acct@company.nl","vatId":"NL999999999B01"},"lines":[{"sku":"WID-001","qty":2,"unitCents":999},{"sku":"GAD-002","qty":1,"unitCents":1500}],"declared":{"netCents":3498,"vatCents":0,"grossCents":3498}}"""^^rdf:JSON """{"orderId":"A301","shipTo":{"country":"NL"},"customer":{"email":"billing@company.nl","vatId":"NL999999999B01"},"lines":[{"sku":"WID-001","qty":2,"unitCents":999},{"sku":"GAD-002","qty":1,"unitCents":1500}],"declared":{"netCents":3498,"vatCents":0,"grossCents":3498}}"""^^rdf:JSON """{"orderId":"A400","shipTo":{"country":"BE"},"customer":{"email":"ada@other.example","vatId":null},"lines":[{"sku":"WID-001","qty":2,"unitCents":999},{"sku":"GAD-002","qty":1,"unitCents":1500}],"declared":{"netCents":3498,"vatCents":508,"grossCents":4006}}"""^^rdf:JSON) .
#   ("""{"orderId":"A100","shipTo":{"country":"BE"},"customer":{"email":"Ada@Example.ORG","vatId":null},"lines":[{"sku":"wid-001","qty":2,"unitCents":999},{"sku":"GAD-002","qty":1,"unitCents":1500}],"declared":{"netCents":3498,"vatCents":509,"grossCents":4007}}"""^^rdf:JSON """{"orderId":"A200","shipTo":{"country":"US"},"customer":{"email":"bob@example.org","vatId":null},"lines":[{"sku":"WID-001","qty":2,"unitCents":999},{"sku":"GAD-002","qty":1,"unitCents":1500}],"declared":{"netCents":3498,"vatCents":0,"grossCents":3498}}"""^^rdf:JSON """{"orderId":"A300","shipTo":{"country":"NL"},"customer":{"email":"acct@company.nl","vatId":"NL999999999B01"},"lines":[{"sku":"WID-001","qty":2,"unitCents":999},{"sku":"GAD-002","qty":1,"unitCents":1500}],"declared":{"netCents":3498,"vatCents":0,"grossCents":3498}}"""^^rdf:JSON """{"orderId":"A301","shipTo":{"country":"NL"},"customer":{"email":"billing@company.nl","vatId":"NL999999999B01"},"lines":[{"sku":"WID-001","qty":2,"unitCents":999},{"sku":"GAD-002","qty":1,"unitCents":1500}],"declared":{"netCents":3498,"vatCents":0,"grossCents":3498}}"""^^rdf:JSON """{"orderId":"A400","shipTo":{"country":"BE"},"customer":{"email":"ada@other.example","vatId":null},"lines":[{"sku":"WID-001","qty":2,"unitCents":999},{"sku":"GAD-002","qty":1,"unitCents":1500}],"declared":{"netCents":3498,"vatCents":508,"grossCents":4006}}"""^^rdf:JSON) list:iterate (3 """{"orderId":"A301","shipTo":{"country":"NL"},"customer":{"email":"billing@company.nl","vatId":"NL999999999B01"},"lines":[{"sku":"WID-001","qty":2,"unitCents":999},{"sku":"GAD-002","qty":1,"unitCents":1500}],"declared":{"netCents":3498,"vatCents":0,"grossCents":3498}}"""^^rdf:JSON) .
#   ("""{"orderId":"A301","shipTo":{"country":"NL"},"customer":{"email":"billing@company.nl","vatId":"NL999999999B01"},"lines":[{"sku":"WID-001","qty":2,"unitCents":999},{"sku":"GAD-002","qty":1,"unitCents":1500}],"declared":{"netCents":3498,"vatCents":0,"grossCents":3498}}"""^^rdf:JSON "/orderId") string:jsonPointer "A301" .
#   ("urn:example:order:%s" "A301") string:format "urn:example:order:A301" .
#   <urn:example:order:A301> log:uri "urn:example:order:A301" .
#   ("""{"orderId":"A301","shipTo":{"country":"NL"},"customer":{"email":"billing@company.nl","vatId":"NL999999999B01"},"lines":[{"sku":"WID-001","qty":2,"unitCents":999},{"sku":"GAD-002","qty":1,"unitCents":1500}],"declared":{"netCents":3498,"vatCents":0,"grossCents":3498}}"""^^rdf:JSON "/lines") string:jsonPointer ("""{"sku":"WID-001","qty":2,"unitCents":999}"""^^rdf:JSON """{"sku":"GAD-002","qty":1,"unitCents":1500}"""^^rdf:JSON) .
#   ("""{"sku":"WID-001","qty":2,"unitCents":999}"""^^rdf:JSON """{"sku":"GAD-002","qty":1,"unitCents":1500}"""^^rdf:JSON) list:iterate (1 """{"sku":"GAD-002","qty":1,"unitCents":1500}"""^^rdf:JSON) .
#   ("""{"sku":"GAD-002","qty":1,"unitCents":1500}"""^^rdf:JSON "/sku") string:jsonPointer "GAD-002" .
#   ("""{"sku":"GAD-002","qty":1,"unitCents":1500}"""^^rdf:JSON "/qty") string:jsonPointer 1 .
#   ("""{"sku":"GAD-002","qty":1,"unitCents":1500}"""^^rdf:JSON "/unitCents") string:jsonPointer 1500 .
#   ex:Gadget a ex:Product .
#   ex:Gadget ex:sku "GAD-002" .
#   (1 1500) math:product 1500 .
#   ("urn:example:order:%s#line:%s" "A301" 1) string:format "urn:example:order:A301#line:1" .
#   <urn:example:order:A301#line:1> log:uri "urn:example:order:A301#line:1" .
#   "GAD-002" string:equalIgnoringCase "GAD-002" .
# via the schematic forward rule:
#   {
#     ex:feed ex:json ?J .
#     (?J "/orders") string:jsonPointer ?Orders .
#     ?Orders list:iterate (?OrderIndex ?OrderJson) .
#     (?OrderJson "/orderId") string:jsonPointer ?OrderId .
#     ("urn:example:order:%s" ?OrderId) string:format ?OrderUriStr .
#     ?Order log:uri ?OrderUriStr .
#     (?OrderJson "/lines") string:jsonPointer ?Lines .
#     ?Lines list:iterate (?LineIndex ?LineJson) .
#     (?LineJson "/sku") string:jsonPointer ?SkuJson .
#     (?LineJson "/qty") string:jsonPointer ?Qty .
#     (?LineJson "/unitCents") string:jsonPointer ?UnitCents .
#     ?Product a ex:Product .
#     ?Product ex:sku ?SkuCat .
#     (?Qty ?UnitCents) math:product ?NetCents .
#     ("urn:example:order:%s#line:%s" ?OrderId ?LineIndex) string:format ?LineUriStr .
#     ?Line log:uri ?LineUriStr .
#     ?SkuJson string:equalIgnoringCase ?SkuCat .
#   } => {
#     ?Order ex:line ?Line .
#     ?Line a ex:OrderLine .
#     ?Line ex:lineIndex ?LineIndex .
#     ?Line ex:product ?Product .
#     ?Line ex:sku ?SkuCat .
#     ?Line ex:qty ?Qty .
#     ?Line ex:unitCents ?UnitCents .
#     ?Line ex:netCents ?NetCents .
#   } .
# with substitution (on rule variables):
#   ?J = """{
#     "meta~data": { "batch": "2025-12-18" },
#     "orders": [
#     {
#     "orderId": "A100",
#     "shipTo": { "country": "BE" },
#     "customer": { "email": "Ada@Example.ORG", "vatId": null },
#     "lines": [
#     { "sku": "wid-001", "qty": 2, "unitCents": 999 },
#     { "sku": "GAD-002", "qty": 1, "unitCents": 1500 }
#     ],
#     "declared": { "netCents": 3498, "vatCents": 509, "grossCents": 4007 }
#     },
#     {
#     "orderId": "A200",
#     "shipTo": { "country": "US" },
#     "customer": { "email": "bob@example.org", "vatId": null },
#     "lines": [
#     { "sku": "WID-001", "qty": 2, "unitCents": 999 },
#     { "sku": "GAD-002", "qty": 1, "unitCents": 1500 }
#     ],
#     "declared": { "netCents": 3498, "vatCents": 0, "grossCents": 3498 }
#     },
#     {
#     "orderId": "A300",
#     "shipTo": { "country": "NL" },
#     "customer": { "email": "acct@company.nl", "vatId": "NL999999999B01" },
#     "lines": [
#     { "sku": "WID-001", "qty": 2, "unitCents": 999 },
#     { "sku": "GAD-002", "qty": 1, "unitCents": 1500 }
#     ],
#     "declared": { "netCents": 3498, "vatCents": 0, "grossCents": 3498 }
#     },
#     {
#     "orderId": "A301",
#     "shipTo": { "country": "NL" },
#     "customer": { "email": "billing@company.nl", "vatId": "NL999999999B01" },
#     "lines": [
#     { "sku": "WID-001", "qty": 2, "unitCents": 999 },
#     { "sku": "GAD-002", "qty": 1, "unitCents": 1500 }
#     ],
#     "declared": { "netCents": 3498, "vatCents": 0, "grossCents": 3498 }
#     },
#     {
#     "orderId": "A400",
#     "shipTo": { "country": "BE" },
#     "customer": { "email": "ada@other.example", "vatId": null },
#     "lines": [
#     { "sku": "WID-001", "qty": 2, "unitCents": 999 },
#     { "sku": "GAD-002", "qty": 1, "unitCents": 1500 }
#     ],
#     "declared": { "netCents": 3498, "vatCents": 508, "grossCents": 4006 }
#     }
#     ]
#   }"""^^rdf:JSON
#   ?Line = <urn:example:order:A301#line:1>
#   ?LineIndex = 1
#   ?LineJson = """{"sku":"GAD-002","qty":1,"unitCents":1500}"""^^rdf:JSON
#   ?LineUriStr = "urn:example:order:A301#line:1"
#   ?Lines = ("""{"sku":"WID-001","qty":2,"unitCents":999}"""^^rdf:JSON """{"sku":"GAD-002","qty":1,"unitCents":1500}"""^^rdf:JSON)
#   ?NetCents = 1500
#   ?Order = <urn:example:order:A301>
#   ?OrderId = "A301"
#   ?OrderIndex = 3
#   ?OrderJson = """{"orderId":"A301","shipTo":{"country":"NL"},"customer":{"email":"billing@company.nl","vatId":"NL999999999B01"},"lines":[{"sku":"WID-001","qty":2,"unitCents":999},{"sku":"GAD-002","qty":1,"unitCents":1500}],"declared":{"netCents":3498,"vatCents":0,"grossCents":3498}}"""^^rdf:JSON
#   ?OrderUriStr = "urn:example:order:A301"
#   ?Orders = ("""{"orderId":"A100","shipTo":{"country":"BE"},"customer":{"email":"Ada@Example.ORG","vatId":null},"lines":[{"sku":"wid-001","qty":2,"unitCents":999},{"sku":"GAD-002","qty":1,"unitCents":1500}],"declared":{"netCents":3498,"vatCents":509,"grossCents":4007}}"""^^rdf:JSON """{"orderId":"A200","shipTo":{"country":"US"},"customer":{"email":"bob@example.org","vatId":null},"lines":[{"sku":"WID-001","qty":2,"unitCents":999},{"sku":"GAD-002","qty":1,"unitCents":1500}],"declared":{"netCents":3498,"vatCents":0,"grossCents":3498}}"""^^rdf:JSON """{"orderId":"A300","shipTo":{"country":"NL"},"customer":{"email":"acct@company.nl","vatId":"NL999999999B01"},"lines":[{"sku":"WID-001","qty":2,"unitCents":999},{"sku":"GAD-002","qty":1,"unitCents":1500}],"declared":{"netCents":3498,"vatCents":0,"grossCents":3498}}"""^^rdf:JSON """{"orderId":"A301","shipTo":{"country":"NL"},"customer":{"email":"billing@company.nl","vatId":"NL999999999B01"},"lines":[{"sku":"WID-001","qty":2,"unitCents":999},{"sku":"GAD-002","qty":1,"unitCents":1500}],"declared":{"netCents":3498,"vatCents":0,"grossCents":3498}}"""^^rdf:JSON """{"orderId":"A400","shipTo":{"country":"BE"},"customer":{"email":"ada@other.example","vatId":null},"lines":[{"sku":"WID-001","qty":2,"unitCents":999},{"sku":"GAD-002","qty":1,"unitCents":1500}],"declared":{"netCents":3498,"vatCents":508,"grossCents":4006}}"""^^rdf:JSON)
#   ?Product = ex:Gadget
#   ?Qty = 1
#   ?SkuCat = "GAD-002"
#   ?SkuJson = "GAD-002"
#   ?UnitCents = 1500
# Therefore the derived triple above is entailed by the rules and facts.
# ----------------------------------------------------------------------

<urn:example:order:A301#line:1> a ex:OrderLine .

# ----------------------------------------------------------------------
# Proof for derived triple:
#   <urn:example:order:A301#line:1> ex:lineIndex 1 .
# It holds because the following instance of the rule body is provable:
#   ex:feed ex:json """{
#     "meta~data": { "batch": "2025-12-18" },
#     "orders": [
#       {
#         "orderId": "A100",
#         "shipTo": { "country": "BE" },
#         "customer": { "email": "Ada@Example.ORG", "vatId": null },
#         "lines": [
#           { "sku": "wid-001", "qty": 2, "unitCents": 999 },
#           { "sku": "GAD-002", "qty": 1, "unitCents": 1500 }
#         ],
#         "declared": { "netCents": 3498, "vatCents": 509, "grossCents": 4007 }
#       },
#       {
#         "orderId": "A200",
#         "shipTo": { "country": "US" },
#         "customer": { "email": "bob@example.org", "vatId": null },
#         "lines": [
#           { "sku": "WID-001", "qty": 2, "unitCents": 999 },
#           { "sku": "GAD-002", "qty": 1, "unitCents": 1500 }
#         ],
#         "declared": { "netCents": 3498, "vatCents": 0, "grossCents": 3498 }
#       },
#       {
#         "orderId": "A300",
#         "shipTo": { "country": "NL" },
#         "customer": { "email": "acct@company.nl", "vatId": "NL999999999B01" },
#         "lines": [
#           { "sku": "WID-001", "qty": 2, "unitCents": 999 },
#           { "sku": "GAD-002", "qty": 1, "unitCents": 1500 }
#         ],
#         "declared": { "netCents": 3498, "vatCents": 0, "grossCents": 3498 }
#       },
#       {
#         "orderId": "A301",
#         "shipTo": { "country": "NL" },
#         "customer": { "email": "billing@company.nl", "vatId": "NL999999999B01" },
#         "lines": [
#           { "sku": "WID-001", "qty": 2, "unitCents": 999 },
#           { "sku": "GAD-002", "qty": 1, "unitCents": 1500 }
#         ],
#         "declared": { "netCents": 3498, "vatCents": 0, "grossCents": 3498 }
#       },
#       {
#         "orderId": "A400",
#         "shipTo": { "country": "BE" },
#         "customer": { "email": "ada@other.example", "vatId": null },
#         "lines": [
#           { "sku": "WID-001", "qty": 2, "unitCents": 999 },
#           { "sku": "GAD-002", "qty": 1, "unitCents": 1500 }
#         ],
#         "declared": { "netCents": 3498, "vatCents": 508, "grossCents": 4006 }
#       }
#     ]
#   }"""^^rdf:JSON .
#   ("""{
#     "meta~data": { "batch": "2025-12-18" },
#     "orders": [
#       {
#         "orderId": "A100",
#         "shipTo": { "country": "BE" },
#         "customer": { "email": "Ada@Example.ORG", "vatId": null },
#         "lines": [
#           { "sku": "wid-001", "qty": 2, "unitCents": 999 },
#           { "sku": "GAD-002", "qty": 1, "unitCents": 1500 }
#         ],
#         "declared": { "netCents": 3498, "vatCents": 509, "grossCents": 4007 }
#       },
#       {
#         "orderId": "A200",
#         "shipTo": { "country": "US" },
#         "customer": { "email": "bob@example.org", "vatId": null },
#         "lines": [
#           { "sku": "WID-001", "qty": 2, "unitCents": 999 },
#           { "sku": "GAD-002", "qty": 1, "unitCents": 1500 }
#         ],
#         "declared": { "netCents": 3498, "vatCents": 0, "grossCents": 3498 }
#       },
#       {
#         "orderId": "A300",
#         "shipTo": { "country": "NL" },
#         "customer": { "email": "acct@company.nl", "vatId": "NL999999999B01" },
#         "lines": [
#           { "sku": "WID-001", "qty": 2, "unitCents": 999 },
#           { "sku": "GAD-002", "qty": 1, "unitCents": 1500 }
#         ],
#         "declared": { "netCents": 3498, "vatCents": 0, "grossCents": 3498 }
#       },
#       {
#         "orderId": "A301",
#         "shipTo": { "country": "NL" },
#         "customer": { "email": "billing@company.nl", "vatId": "NL999999999B01" },
#         "lines": [
#           { "sku": "WID-001", "qty": 2, "unitCents": 999 },
#           { "sku": "GAD-002", "qty": 1, "unitCents": 1500 }
#         ],
#         "declared": { "netCents": 3498, "vatCents": 0, "grossCents": 3498 }
#       },
#       {
#         "orderId": "A400",
#         "shipTo": { "country": "BE" },
#         "customer": { "email": "ada@other.example", "vatId": null },
#         "lines": [
#           { "sku": "WID-001", "qty": 2, "unitCents": 999 },
#           { "sku": "GAD-002", "qty": 1, "unitCents": 1500 }
#         ],
#         "declared": { "netCents": 3498, "vatCents": 508, "grossCents": 4006 }
#       }
#     ]
#   }"""^^rdf:JSON "/orders") string:jsonPointer ("""{"orderId":"A100","shipTo":{"country":"BE"},"customer":{"email":"Ada@Example.ORG","vatId":null},"lines":[{"sku":"wid-001","qty":2,"unitCents":999},{"sku":"GAD-002","qty":1,"unitCents":1500}],"declared":{"netCents":3498,"vatCents":509,"grossCents":4007}}"""^^rdf:JSON """{"orderId":"A200","shipTo":{"country":"US"},"customer":{"email":"bob@example.org","vatId":null},"lines":[{"sku":"WID-001","qty":2,"unitCents":999},{"sku":"GAD-002","qty":1,"unitCents":1500}],"declared":{"netCents":3498,"vatCents":0,"grossCents":3498}}"""^^rdf:JSON """{"orderId":"A300","shipTo":{"country":"NL"},"customer":{"email":"acct@company.nl","vatId":"NL999999999B01"},"lines":[{"sku":"WID-001","qty":2,"unitCents":999},{"sku":"GAD-002","qty":1,"unitCents":1500}],"declared":{"netCents":3498,"vatCents":0,"grossCents":3498}}"""^^rdf:JSON """{"orderId":"A301","shipTo":{"country":"NL"},"customer":{"email":"billing@company.nl","vatId":"NL999999999B01"},"lines":[{"sku":"WID-001","qty":2,"unitCents":999},{"sku":"GAD-002","qty":1,"unitCents":1500}],"declared":{"netCents":3498,"vatCents":0,"grossCents":3498}}"""^^rdf:JSON """{"orderId":"A400","shipTo":{"country":"BE"},"customer":{"email":"ada@other.example","vatId":null},"lines":[{"sku":"WID-001","qty":2,"unitCents":999},{"sku":"GAD-002","qty":1,"unitCents":1500}],"declared":{"netCents":3498,"vatCents":508,"grossCents":4006}}"""^^rdf:JSON) .
#   ("""{"orderId":"A100","shipTo":{"country":"BE"},"customer":{"email":"Ada@Example.ORG","vatId":null},"lines":[{"sku":"wid-001","qty":2,"unitCents":999},{"sku":"GAD-002","qty":1,"unitCents":1500}],"declared":{"netCents":3498,"vatCents":509,"grossCents":4007}}"""^^rdf:JSON """{"orderId":"A200","shipTo":{"country":"US"},"customer":{"email":"bob@example.org","vatId":null},"lines":[{"sku":"WID-001","qty":2,"unitCents":999},{"sku":"GAD-002","qty":1,"unitCents":1500}],"declared":{"netCents":3498,"vatCents":0,"grossCents":3498}}"""^^rdf:JSON """{"orderId":"A300","shipTo":{"country":"NL"},"customer":{"email":"acct@company.nl","vatId":"NL999999999B01"},"lines":[{"sku":"WID-001","qty":2,"unitCents":999},{"sku":"GAD-002","qty":1,"unitCents":1500}],"declared":{"netCents":3498,"vatCents":0,"grossCents":3498}}"""^^rdf:JSON """{"orderId":"A301","shipTo":{"country":"NL"},"customer":{"email":"billing@company.nl","vatId":"NL999999999B01"},"lines":[{"sku":"WID-001","qty":2,"unitCents":999},{"sku":"GAD-002","qty":1,"unitCents":1500}],"declared":{"netCents":3498,"vatCents":0,"grossCents":3498}}"""^^rdf:JSON """{"orderId":"A400","shipTo":{"country":"BE"},"customer":{"email":"ada@other.example","vatId":null},"lines":[{"sku":"WID-001","qty":2,"unitCents":999},{"sku":"GAD-002","qty":1,"unitCents":1500}],"declared":{"netCents":3498,"vatCents":508,"grossCents":4006}}"""^^rdf:JSON) list:iterate (3 """{"orderId":"A301","shipTo":{"country":"NL"},"customer":{"email":"billing@company.nl","vatId":"NL999999999B01"},"lines":[{"sku":"WID-001","qty":2,"unitCents":999},{"sku":"GAD-002","qty":1,"unitCents":1500}],"declared":{"netCents":3498,"vatCents":0,"grossCents":3498}}"""^^rdf:JSON) .
#   ("""{"orderId":"A301","shipTo":{"country":"NL"},"customer":{"email":"billing@company.nl","vatId":"NL999999999B01"},"lines":[{"sku":"WID-001","qty":2,"unitCents":999},{"sku":"GAD-002","qty":1,"unitCents":1500}],"declared":{"netCents":3498,"vatCents":0,"grossCents":3498}}"""^^rdf:JSON "/orderId") string:jsonPointer "A301" .
#   ("urn:example:order:%s" "A301") string:format "urn:example:order:A301" .
#   <urn:example:order:A301> log:uri "urn:example:order:A301" .
#   ("""{"orderId":"A301","shipTo":{"country":"NL"},"customer":{"email":"billing@company.nl","vatId":"NL999999999B01"},"lines":[{"sku":"WID-001","qty":2,"unitCents":999},{"sku":"GAD-002","qty":1,"unitCents":1500}],"declared":{"netCents":3498,"vatCents":0,"grossCents":3498}}"""^^rdf:JSON "/lines") string:jsonPointer ("""{"sku":"WID-001","qty":2,"unitCents":999}"""^^rdf:JSON """{"sku":"GAD-002","qty":1,"unitCents":1500}"""^^rdf:JSON) .
#   ("""{"sku":"WID-001","qty":2,"unitCents":999}"""^^rdf:JSON """{"sku":"GAD-002","qty":1,"unitCents":1500}"""^^rdf:JSON) list:iterate (1 """{"sku":"GAD-002","qty":1,"unitCents":1500}"""^^rdf:JSON) .
#   ("""{"sku":"GAD-002","qty":1,"unitCents":1500}"""^^rdf:JSON "/sku") string:jsonPointer "GAD-002" .
#   ("""{"sku":"GAD-002","qty":1,"unitCents":1500}"""^^rdf:JSON "/qty") string:jsonPointer 1 .
#   ("""{"sku":"GAD-002","qty":1,"unitCents":1500}"""^^rdf:JSON "/unitCents") string:jsonPointer 1500 .
#   ex:Gadget a ex:Product .
#   ex:Gadget ex:sku "GAD-002" .
#   (1 1500) math:product 1500 .
#   ("urn:example:order:%s#line:%s" "A301" 1) string:format "urn:example:order:A301#line:1" .
#   <urn:example:order:A301#line:1> log:uri "urn:example:order:A301#line:1" .
#   "GAD-002" string:equalIgnoringCase "GAD-002" .
# via the schematic forward rule:
#   {
#     ex:feed ex:json ?J .
#     (?J "/orders") string:jsonPointer ?Orders .
#     ?Orders list:iterate (?OrderIndex ?OrderJson) .
#     (?OrderJson "/orderId") string:jsonPointer ?OrderId .
#     ("urn:example:order:%s" ?OrderId) string:format ?OrderUriStr .
#     ?Order log:uri ?OrderUriStr .
#     (?OrderJson "/lines") string:jsonPointer ?Lines .
#     ?Lines list:iterate (?LineIndex ?LineJson) .
#     (?LineJson "/sku") string:jsonPointer ?SkuJson .
#     (?LineJson "/qty") string:jsonPointer ?Qty .
#     (?LineJson "/unitCents") string:jsonPointer ?UnitCents .
#     ?Product a ex:Product .
#     ?Product ex:sku ?SkuCat .
#     (?Qty ?UnitCents) math:product ?NetCents .
#     ("urn:example:order:%s#line:%s" ?OrderId ?LineIndex) string:format ?LineUriStr .
#     ?Line log:uri ?LineUriStr .
#     ?SkuJson string:equalIgnoringCase ?SkuCat .
#   } => {
#     ?Order ex:line ?Line .
#     ?Line a ex:OrderLine .
#     ?Line ex:lineIndex ?LineIndex .
#     ?Line ex:product ?Product .
#     ?Line ex:sku ?SkuCat .
#     ?Line ex:qty ?Qty .
#     ?Line ex:unitCents ?UnitCents .
#     ?Line ex:netCents ?NetCents .
#   } .
# with substitution (on rule variables):
#   ?J = """{
#     "meta~data": { "batch": "2025-12-18" },
#     "orders": [
#     {
#     "orderId": "A100",
#     "shipTo": { "country": "BE" },
#     "customer": { "email": "Ada@Example.ORG", "vatId": null },
#     "lines": [
#     { "sku": "wid-001", "qty": 2, "unitCents": 999 },
#     { "sku": "GAD-002", "qty": 1, "unitCents": 1500 }
#     ],
#     "declared": { "netCents": 3498, "vatCents": 509, "grossCents": 4007 }
#     },
#     {
#     "orderId": "A200",
#     "shipTo": { "country": "US" },
#     "customer": { "email": "bob@example.org", "vatId": null },
#     "lines": [
#     { "sku": "WID-001", "qty": 2, "unitCents": 999 },
#     { "sku": "GAD-002", "qty": 1, "unitCents": 1500 }
#     ],
#     "declared": { "netCents": 3498, "vatCents": 0, "grossCents": 3498 }
#     },
#     {
#     "orderId": "A300",
#     "shipTo": { "country": "NL" },
#     "customer": { "email": "acct@company.nl", "vatId": "NL999999999B01" },
#     "lines": [
#     { "sku": "WID-001", "qty": 2, "unitCents": 999 },
#     { "sku": "GAD-002", "qty": 1, "unitCents": 1500 }
#     ],
#     "declared": { "netCents": 3498, "vatCents": 0, "grossCents": 3498 }
#     },
#     {
#     "orderId": "A301",
#     "shipTo": { "country": "NL" },
#     "customer": { "email": "billing@company.nl", "vatId": "NL999999999B01" },
#     "lines": [
#     { "sku": "WID-001", "qty": 2, "unitCents": 999 },
#     { "sku": "GAD-002", "qty": 1, "unitCents": 1500 }
#     ],
#     "declared": { "netCents": 3498, "vatCents": 0, "grossCents": 3498 }
#     },
#     {
#     "orderId": "A400",
#     "shipTo": { "country": "BE" },
#     "customer": { "email": "ada@other.example", "vatId": null },
#     "lines": [
#     { "sku": "WID-001", "qty": 2, "unitCents": 999 },
#     { "sku": "GAD-002", "qty": 1, "unitCents": 1500 }
#     ],
#     "declared": { "netCents": 3498, "vatCents": 508, "grossCents": 4006 }
#     }
#     ]
#   }"""^^rdf:JSON
#   ?Line = <urn:example:order:A301#line:1>
#   ?LineIndex = 1
#   ?LineJson = """{"sku":"GAD-002","qty":1,"unitCents":1500}"""^^rdf:JSON
#   ?LineUriStr = "urn:example:order:A301#line:1"
#   ?Lines = ("""{"sku":"WID-001","qty":2,"unitCents":999}"""^^rdf:JSON """{"sku":"GAD-002","qty":1,"unitCents":1500}"""^^rdf:JSON)
#   ?NetCents = 1500
#   ?Order = <urn:example:order:A301>
#   ?OrderId = "A301"
#   ?OrderIndex = 3
#   ?OrderJson = """{"orderId":"A301","shipTo":{"country":"NL"},"customer":{"email":"billing@company.nl","vatId":"NL999999999B01"},"lines":[{"sku":"WID-001","qty":2,"unitCents":999},{"sku":"GAD-002","qty":1,"unitCents":1500}],"declared":{"netCents":3498,"vatCents":0,"grossCents":3498}}"""^^rdf:JSON
#   ?OrderUriStr = "urn:example:order:A301"
#   ?Orders = ("""{"orderId":"A100","shipTo":{"country":"BE"},"customer":{"email":"Ada@Example.ORG","vatId":null},"lines":[{"sku":"wid-001","qty":2,"unitCents":999},{"sku":"GAD-002","qty":1,"unitCents":1500}],"declared":{"netCents":3498,"vatCents":509,"grossCents":4007}}"""^^rdf:JSON """{"orderId":"A200","shipTo":{"country":"US"},"customer":{"email":"bob@example.org","vatId":null},"lines":[{"sku":"WID-001","qty":2,"unitCents":999},{"sku":"GAD-002","qty":1,"unitCents":1500}],"declared":{"netCents":3498,"vatCents":0,"grossCents":3498}}"""^^rdf:JSON """{"orderId":"A300","shipTo":{"country":"NL"},"customer":{"email":"acct@company.nl","vatId":"NL999999999B01"},"lines":[{"sku":"WID-001","qty":2,"unitCents":999},{"sku":"GAD-002","qty":1,"unitCents":1500}],"declared":{"netCents":3498,"vatCents":0,"grossCents":3498}}"""^^rdf:JSON """{"orderId":"A301","shipTo":{"country":"NL"},"customer":{"email":"billing@company.nl","vatId":"NL999999999B01"},"lines":[{"sku":"WID-001","qty":2,"unitCents":999},{"sku":"GAD-002","qty":1,"unitCents":1500}],"declared":{"netCents":3498,"vatCents":0,"grossCents":3498}}"""^^rdf:JSON """{"orderId":"A400","shipTo":{"country":"BE"},"customer":{"email":"ada@other.example","vatId":null},"lines":[{"sku":"WID-001","qty":2,"unitCents":999},{"sku":"GAD-002","qty":1,"unitCents":1500}],"declared":{"netCents":3498,"vatCents":508,"grossCents":4006}}"""^^rdf:JSON)
#   ?Product = ex:Gadget
#   ?Qty = 1
#   ?SkuCat = "GAD-002"
#   ?SkuJson = "GAD-002"
#   ?UnitCents = 1500
# Therefore the derived triple above is entailed by the rules and facts.
# ----------------------------------------------------------------------

<urn:example:order:A301#line:1> ex:lineIndex 1 .

# ----------------------------------------------------------------------
# Proof for derived triple:
#   <urn:example:order:A301#line:1> ex:product ex:Gadget .
# It holds because the following instance of the rule body is provable:
#   ex:feed ex:json """{
#     "meta~data": { "batch": "2025-12-18" },
#     "orders": [
#       {
#         "orderId": "A100",
#         "shipTo": { "country": "BE" },
#         "customer": { "email": "Ada@Example.ORG", "vatId": null },
#         "lines": [
#           { "sku": "wid-001", "qty": 2, "unitCents": 999 },
#           { "sku": "GAD-002", "qty": 1, "unitCents": 1500 }
#         ],
#         "declared": { "netCents": 3498, "vatCents": 509, "grossCents": 4007 }
#       },
#       {
#         "orderId": "A200",
#         "shipTo": { "country": "US" },
#         "customer": { "email": "bob@example.org", "vatId": null },
#         "lines": [
#           { "sku": "WID-001", "qty": 2, "unitCents": 999 },
#           { "sku": "GAD-002", "qty": 1, "unitCents": 1500 }
#         ],
#         "declared": { "netCents": 3498, "vatCents": 0, "grossCents": 3498 }
#       },
#       {
#         "orderId": "A300",
#         "shipTo": { "country": "NL" },
#         "customer": { "email": "acct@company.nl", "vatId": "NL999999999B01" },
#         "lines": [
#           { "sku": "WID-001", "qty": 2, "unitCents": 999 },
#           { "sku": "GAD-002", "qty": 1, "unitCents": 1500 }
#         ],
#         "declared": { "netCents": 3498, "vatCents": 0, "grossCents": 3498 }
#       },
#       {
#         "orderId": "A301",
#         "shipTo": { "country": "NL" },
#         "customer": { "email": "billing@company.nl", "vatId": "NL999999999B01" },
#         "lines": [
#           { "sku": "WID-001", "qty": 2, "unitCents": 999 },
#           { "sku": "GAD-002", "qty": 1, "unitCents": 1500 }
#         ],
#         "declared": { "netCents": 3498, "vatCents": 0, "grossCents": 3498 }
#       },
#       {
#         "orderId": "A400",
#         "shipTo": { "country": "BE" },
#         "customer": { "email": "ada@other.example", "vatId": null },
#         "lines": [
#           { "sku": "WID-001", "qty": 2, "unitCents": 999 },
#           { "sku": "GAD-002", "qty": 1, "unitCents": 1500 }
#         ],
#         "declared": { "netCents": 3498, "vatCents": 508, "grossCents": 4006 }
#       }
#     ]
#   }"""^^rdf:JSON .
#   ("""{
#     "meta~data": { "batch": "2025-12-18" },
#     "orders": [
#       {
#         "orderId": "A100",
#         "shipTo": { "country": "BE" },
#         "customer": { "email": "Ada@Example.ORG", "vatId": null },
#         "lines": [
#           { "sku": "wid-001", "qty": 2, "unitCents": 999 },
#           { "sku": "GAD-002", "qty": 1, "unitCents": 1500 }
#         ],
#         "declared": { "netCents": 3498, "vatCents": 509, "grossCents": 4007 }
#       },
#       {
#         "orderId": "A200",
#         "shipTo": { "country": "US" },
#         "customer": { "email": "bob@example.org", "vatId": null },
#         "lines": [
#           { "sku": "WID-001", "qty": 2, "unitCents": 999 },
#           { "sku": "GAD-002", "qty": 1, "unitCents": 1500 }
#         ],
#         "declared": { "netCents": 3498, "vatCents": 0, "grossCents": 3498 }
#       },
#       {
#         "orderId": "A300",
#         "shipTo": { "country": "NL" },
#         "customer": { "email": "acct@company.nl", "vatId": "NL999999999B01" },
#         "lines": [
#           { "sku": "WID-001", "qty": 2, "unitCents": 999 },
#           { "sku": "GAD-002", "qty": 1, "unitCents": 1500 }
#         ],
#         "declared": { "netCents": 3498, "vatCents": 0, "grossCents": 3498 }
#       },
#       {
#         "orderId": "A301",
#         "shipTo": { "country": "NL" },
#         "customer": { "email": "billing@company.nl", "vatId": "NL999999999B01" },
#         "lines": [
#           { "sku": "WID-001", "qty": 2, "unitCents": 999 },
#           { "sku": "GAD-002", "qty": 1, "unitCents": 1500 }
#         ],
#         "declared": { "netCents": 3498, "vatCents": 0, "grossCents": 3498 }
#       },
#       {
#         "orderId": "A400",
#         "shipTo": { "country": "BE" },
#         "customer": { "email": "ada@other.example", "vatId": null },
#         "lines": [
#           { "sku": "WID-001", "qty": 2, "unitCents": 999 },
#           { "sku": "GAD-002", "qty": 1, "unitCents": 1500 }
#         ],
#         "declared": { "netCents": 3498, "vatCents": 508, "grossCents": 4006 }
#       }
#     ]
#   }"""^^rdf:JSON "/orders") string:jsonPointer ("""{"orderId":"A100","shipTo":{"country":"BE"},"customer":{"email":"Ada@Example.ORG","vatId":null},"lines":[{"sku":"wid-001","qty":2,"unitCents":999},{"sku":"GAD-002","qty":1,"unitCents":1500}],"declared":{"netCents":3498,"vatCents":509,"grossCents":4007}}"""^^rdf:JSON """{"orderId":"A200","shipTo":{"country":"US"},"customer":{"email":"bob@example.org","vatId":null},"lines":[{"sku":"WID-001","qty":2,"unitCents":999},{"sku":"GAD-002","qty":1,"unitCents":1500}],"declared":{"netCents":3498,"vatCents":0,"grossCents":3498}}"""^^rdf:JSON """{"orderId":"A300","shipTo":{"country":"NL"},"customer":{"email":"acct@company.nl","vatId":"NL999999999B01"},"lines":[{"sku":"WID-001","qty":2,"unitCents":999},{"sku":"GAD-002","qty":1,"unitCents":1500}],"declared":{"netCents":3498,"vatCents":0,"grossCents":3498}}"""^^rdf:JSON """{"orderId":"A301","shipTo":{"country":"NL"},"customer":{"email":"billing@company.nl","vatId":"NL999999999B01"},"lines":[{"sku":"WID-001","qty":2,"unitCents":999},{"sku":"GAD-002","qty":1,"unitCents":1500}],"declared":{"netCents":3498,"vatCents":0,"grossCents":3498}}"""^^rdf:JSON """{"orderId":"A400","shipTo":{"country":"BE"},"customer":{"email":"ada@other.example","vatId":null},"lines":[{"sku":"WID-001","qty":2,"unitCents":999},{"sku":"GAD-002","qty":1,"unitCents":1500}],"declared":{"netCents":3498,"vatCents":508,"grossCents":4006}}"""^^rdf:JSON) .
#   ("""{"orderId":"A100","shipTo":{"country":"BE"},"customer":{"email":"Ada@Example.ORG","vatId":null},"lines":[{"sku":"wid-001","qty":2,"unitCents":999},{"sku":"GAD-002","qty":1,"unitCents":1500}],"declared":{"netCents":3498,"vatCents":509,"grossCents":4007}}"""^^rdf:JSON """{"orderId":"A200","shipTo":{"country":"US"},"customer":{"email":"bob@example.org","vatId":null},"lines":[{"sku":"WID-001","qty":2,"unitCents":999},{"sku":"GAD-002","qty":1,"unitCents":1500}],"declared":{"netCents":3498,"vatCents":0,"grossCents":3498}}"""^^rdf:JSON """{"orderId":"A300","shipTo":{"country":"NL"},"customer":{"email":"acct@company.nl","vatId":"NL999999999B01"},"lines":[{"sku":"WID-001","qty":2,"unitCents":999},{"sku":"GAD-002","qty":1,"unitCents":1500}],"declared":{"netCents":3498,"vatCents":0,"grossCents":3498}}"""^^rdf:JSON """{"orderId":"A301","shipTo":{"country":"NL"},"customer":{"email":"billing@company.nl","vatId":"NL999999999B01"},"lines":[{"sku":"WID-001","qty":2,"unitCents":999},{"sku":"GAD-002","qty":1,"unitCents":1500}],"declared":{"netCents":3498,"vatCents":0,"grossCents":3498}}"""^^rdf:JSON """{"orderId":"A400","shipTo":{"country":"BE"},"customer":{"email":"ada@other.example","vatId":null},"lines":[{"sku":"WID-001","qty":2,"unitCents":999},{"sku":"GAD-002","qty":1,"unitCents":1500}],"declared":{"netCents":3498,"vatCents":508,"grossCents":4006}}"""^^rdf:JSON) list:iterate (3 """{"orderId":"A301","shipTo":{"country":"NL"},"customer":{"email":"billing@company.nl","vatId":"NL999999999B01"},"lines":[{"sku":"WID-001","qty":2,"unitCents":999},{"sku":"GAD-002","qty":1,"unitCents":1500}],"declared":{"netCents":3498,"vatCents":0,"grossCents":3498}}"""^^rdf:JSON) .
#   ("""{"orderId":"A301","shipTo":{"country":"NL"},"customer":{"email":"billing@company.nl","vatId":"NL999999999B01"},"lines":[{"sku":"WID-001","qty":2,"unitCents":999},{"sku":"GAD-002","qty":1,"unitCents":1500}],"declared":{"netCents":3498,"vatCents":0,"grossCents":3498}}"""^^rdf:JSON "/orderId") string:jsonPointer "A301" .
#   ("urn:example:order:%s" "A301") string:format "urn:example:order:A301" .
#   <urn:example:order:A301> log:uri "urn:example:order:A301" .
#   ("""{"orderId":"A301","shipTo":{"country":"NL"},"customer":{"email":"billing@company.nl","vatId":"NL999999999B01"},"lines":[{"sku":"WID-001","qty":2,"unitCents":999},{"sku":"GAD-002","qty":1,"unitCents":1500}],"declared":{"netCents":3498,"vatCents":0,"grossCents":3498}}"""^^rdf:JSON "/lines") string:jsonPointer ("""{"sku":"WID-001","qty":2,"unitCents":999}"""^^rdf:JSON """{"sku":"GAD-002","qty":1,"unitCents":1500}"""^^rdf:JSON) .
#   ("""{"sku":"WID-001","qty":2,"unitCents":999}"""^^rdf:JSON """{"sku":"GAD-002","qty":1,"unitCents":1500}"""^^rdf:JSON) list:iterate (1 """{"sku":"GAD-002","qty":1,"unitCents":1500}"""^^rdf:JSON) .
#   ("""{"sku":"GAD-002","qty":1,"unitCents":1500}"""^^rdf:JSON "/sku") string:jsonPointer "GAD-002" .
#   ("""{"sku":"GAD-002","qty":1,"unitCents":1500}"""^^rdf:JSON "/qty") string:jsonPointer 1 .
#   ("""{"sku":"GAD-002","qty":1,"unitCents":1500}"""^^rdf:JSON "/unitCents") string:jsonPointer 1500 .
#   ex:Gadget a ex:Product .
#   ex:Gadget ex:sku "GAD-002" .
#   (1 1500) math:product 1500 .
#   ("urn:example:order:%s#line:%s" "A301" 1) string:format "urn:example:order:A301#line:1" .
#   <urn:example:order:A301#line:1> log:uri "urn:example:order:A301#line:1" .
#   "GAD-002" string:equalIgnoringCase "GAD-002" .
# via the schematic forward rule:
#   {
#     ex:feed ex:json ?J .
#     (?J "/orders") string:jsonPointer ?Orders .
#     ?Orders list:iterate (?OrderIndex ?OrderJson) .
#     (?OrderJson "/orderId") string:jsonPointer ?OrderId .
#     ("urn:example:order:%s" ?OrderId) string:format ?OrderUriStr .
#     ?Order log:uri ?OrderUriStr .
#     (?OrderJson "/lines") string:jsonPointer ?Lines .
#     ?Lines list:iterate (?LineIndex ?LineJson) .
#     (?LineJson "/sku") string:jsonPointer ?SkuJson .
#     (?LineJson "/qty") string:jsonPointer ?Qty .
#     (?LineJson "/unitCents") string:jsonPointer ?UnitCents .
#     ?Product a ex:Product .
#     ?Product ex:sku ?SkuCat .
#     (?Qty ?UnitCents) math:product ?NetCents .
#     ("urn:example:order:%s#line:%s" ?OrderId ?LineIndex) string:format ?LineUriStr .
#     ?Line log:uri ?LineUriStr .
#     ?SkuJson string:equalIgnoringCase ?SkuCat .
#   } => {
#     ?Order ex:line ?Line .
#     ?Line a ex:OrderLine .
#     ?Line ex:lineIndex ?LineIndex .
#     ?Line ex:product ?Product .
#     ?Line ex:sku ?SkuCat .
#     ?Line ex:qty ?Qty .
#     ?Line ex:unitCents ?UnitCents .
#     ?Line ex:netCents ?NetCents .
#   } .
# with substitution (on rule variables):
#   ?J = """{
#     "meta~data": { "batch": "2025-12-18" },
#     "orders": [
#     {
#     "orderId": "A100",
#     "shipTo": { "country": "BE" },
#     "customer": { "email": "Ada@Example.ORG", "vatId": null },
#     "lines": [
#     { "sku": "wid-001", "qty": 2, "unitCents": 999 },
#     { "sku": "GAD-002", "qty": 1, "unitCents": 1500 }
#     ],
#     "declared": { "netCents": 3498, "vatCents": 509, "grossCents": 4007 }
#     },
#     {
#     "orderId": "A200",
#     "shipTo": { "country": "US" },
#     "customer": { "email": "bob@example.org", "vatId": null },
#     "lines": [
#     { "sku": "WID-001", "qty": 2, "unitCents": 999 },
#     { "sku": "GAD-002", "qty": 1, "unitCents": 1500 }
#     ],
#     "declared": { "netCents": 3498, "vatCents": 0, "grossCents": 3498 }
#     },
#     {
#     "orderId": "A300",
#     "shipTo": { "country": "NL" },
#     "customer": { "email": "acct@company.nl", "vatId": "NL999999999B01" },
#     "lines": [
#     { "sku": "WID-001", "qty": 2, "unitCents": 999 },
#     { "sku": "GAD-002", "qty": 1, "unitCents": 1500 }
#     ],
#     "declared": { "netCents": 3498, "vatCents": 0, "grossCents": 3498 }
#     },
#     {
#     "orderId": "A301",
#     "shipTo": { "country": "NL" },
#     "customer": { "email": "billing@company.nl", "vatId": "NL999999999B01" },
#     "lines": [
#     { "sku": "WID-001", "qty": 2, "unitCents": 999 },
#     { "sku": "GAD-002", "qty": 1, "unitCents": 1500 }
#     ],
#     "declared": { "netCents": 3498, "vatCents": 0, "grossCents": 3498 }
#     },
#     {
#     "orderId": "A400",
#     "shipTo": { "country": "BE" },
#     "customer": { "email": "ada@other.example", "vatId": null },
#     "lines": [
#     { "sku": "WID-001", "qty": 2, "unitCents": 999 },
#     { "sku": "GAD-002", "qty": 1, "unitCents": 1500 }
#     ],
#     "declared": { "netCents": 3498, "vatCents": 508, "grossCents": 4006 }
#     }
#     ]
#   }"""^^rdf:JSON
#   ?Line = <urn:example:order:A301#line:1>
#   ?LineIndex = 1
#   ?LineJson = """{"sku":"GAD-002","qty":1,"unitCents":1500}"""^^rdf:JSON
#   ?LineUriStr = "urn:example:order:A301#line:1"
#   ?Lines = ("""{"sku":"WID-001","qty":2,"unitCents":999}"""^^rdf:JSON """{"sku":"GAD-002","qty":1,"unitCents":1500}"""^^rdf:JSON)
#   ?NetCents = 1500
#   ?Order = <urn:example:order:A301>
#   ?OrderId = "A301"
#   ?OrderIndex = 3
#   ?OrderJson = """{"orderId":"A301","shipTo":{"country":"NL"},"customer":{"email":"billing@company.nl","vatId":"NL999999999B01"},"lines":[{"sku":"WID-001","qty":2,"unitCents":999},{"sku":"GAD-002","qty":1,"unitCents":1500}],"declared":{"netCents":3498,"vatCents":0,"grossCents":3498}}"""^^rdf:JSON
#   ?OrderUriStr = "urn:example:order:A301"
#   ?Orders = ("""{"orderId":"A100","shipTo":{"country":"BE"},"customer":{"email":"Ada@Example.ORG","vatId":null},"lines":[{"sku":"wid-001","qty":2,"unitCents":999},{"sku":"GAD-002","qty":1,"unitCents":1500}],"declared":{"netCents":3498,"vatCents":509,"grossCents":4007}}"""^^rdf:JSON """{"orderId":"A200","shipTo":{"country":"US"},"customer":{"email":"bob@example.org","vatId":null},"lines":[{"sku":"WID-001","qty":2,"unitCents":999},{"sku":"GAD-002","qty":1,"unitCents":1500}],"declared":{"netCents":3498,"vatCents":0,"grossCents":3498}}"""^^rdf:JSON """{"orderId":"A300","shipTo":{"country":"NL"},"customer":{"email":"acct@company.nl","vatId":"NL999999999B01"},"lines":[{"sku":"WID-001","qty":2,"unitCents":999},{"sku":"GAD-002","qty":1,"unitCents":1500}],"declared":{"netCents":3498,"vatCents":0,"grossCents":3498}}"""^^rdf:JSON """{"orderId":"A301","shipTo":{"country":"NL"},"customer":{"email":"billing@company.nl","vatId":"NL999999999B01"},"lines":[{"sku":"WID-001","qty":2,"unitCents":999},{"sku":"GAD-002","qty":1,"unitCents":1500}],"declared":{"netCents":3498,"vatCents":0,"grossCents":3498}}"""^^rdf:JSON """{"orderId":"A400","shipTo":{"country":"BE"},"customer":{"email":"ada@other.example","vatId":null},"lines":[{"sku":"WID-001","qty":2,"unitCents":999},{"sku":"GAD-002","qty":1,"unitCents":1500}],"declared":{"netCents":3498,"vatCents":508,"grossCents":4006}}"""^^rdf:JSON)
#   ?Product = ex:Gadget
#   ?Qty = 1
#   ?SkuCat = "GAD-002"
#   ?SkuJson = "GAD-002"
#   ?UnitCents = 1500
# Therefore the derived triple above is entailed by the rules and facts.
# ----------------------------------------------------------------------

<urn:example:order:A301#line:1> ex:product ex:Gadget .

# ----------------------------------------------------------------------
# Proof for derived triple:
#   <urn:example:order:A301#line:1> ex:sku "GAD-002" .
# It holds because the following instance of the rule body is provable:
#   ex:feed ex:json """{
#     "meta~data": { "batch": "2025-12-18" },
#     "orders": [
#       {
#         "orderId": "A100",
#         "shipTo": { "country": "BE" },
#         "customer": { "email": "Ada@Example.ORG", "vatId": null },
#         "lines": [
#           { "sku": "wid-001", "qty": 2, "unitCents": 999 },
#           { "sku": "GAD-002", "qty": 1, "unitCents": 1500 }
#         ],
#         "declared": { "netCents": 3498, "vatCents": 509, "grossCents": 4007 }
#       },
#       {
#         "orderId": "A200",
#         "shipTo": { "country": "US" },
#         "customer": { "email": "bob@example.org", "vatId": null },
#         "lines": [
#           { "sku": "WID-001", "qty": 2, "unitCents": 999 },
#           { "sku": "GAD-002", "qty": 1, "unitCents": 1500 }
#         ],
#         "declared": { "netCents": 3498, "vatCents": 0, "grossCents": 3498 }
#       },
#       {
#         "orderId": "A300",
#         "shipTo": { "country": "NL" },
#         "customer": { "email": "acct@company.nl", "vatId": "NL999999999B01" },
#         "lines": [
#           { "sku": "WID-001", "qty": 2, "unitCents": 999 },
#           { "sku": "GAD-002", "qty": 1, "unitCents": 1500 }
#         ],
#         "declared": { "netCents": 3498, "vatCents": 0, "grossCents": 3498 }
#       },
#       {
#         "orderId": "A301",
#         "shipTo": { "country": "NL" },
#         "customer": { "email": "billing@company.nl", "vatId": "NL999999999B01" },
#         "lines": [
#           { "sku": "WID-001", "qty": 2, "unitCents": 999 },
#           { "sku": "GAD-002", "qty": 1, "unitCents": 1500 }
#         ],
#         "declared": { "netCents": 3498, "vatCents": 0, "grossCents": 3498 }
#       },
#       {
#         "orderId": "A400",
#         "shipTo": { "country": "BE" },
#         "customer": { "email": "ada@other.example", "vatId": null },
#         "lines": [
#           { "sku": "WID-001", "qty": 2, "unitCents": 999 },
#           { "sku": "GAD-002", "qty": 1, "unitCents": 1500 }
#         ],
#         "declared": { "netCents": 3498, "vatCents": 508, "grossCents": 4006 }
#       }
#     ]
#   }"""^^rdf:JSON .
#   ("""{
#     "meta~data": { "batch": "2025-12-18" },
#     "orders": [
#       {
#         "orderId": "A100",
#         "shipTo": { "country": "BE" },
#         "customer": { "email": "Ada@Example.ORG", "vatId": null },
#         "lines": [
#           { "sku": "wid-001", "qty": 2, "unitCents": 999 },
#           { "sku": "GAD-002", "qty": 1, "unitCents": 1500 }
#         ],
#         "declared": { "netCents": 3498, "vatCents": 509, "grossCents": 4007 }
#       },
#       {
#         "orderId": "A200",
#         "shipTo": { "country": "US" },
#         "customer": { "email": "bob@example.org", "vatId": null },
#         "lines": [
#           { "sku": "WID-001", "qty": 2, "unitCents": 999 },
#           { "sku": "GAD-002", "qty": 1, "unitCents": 1500 }
#         ],
#         "declared": { "netCents": 3498, "vatCents": 0, "grossCents": 3498 }
#       },
#       {
#         "orderId": "A300",
#         "shipTo": { "country": "NL" },
#         "customer": { "email": "acct@company.nl", "vatId": "NL999999999B01" },
#         "lines": [
#           { "sku": "WID-001", "qty": 2, "unitCents": 999 },
#           { "sku": "GAD-002", "qty": 1, "unitCents": 1500 }
#         ],
#         "declared": { "netCents": 3498, "vatCents": 0, "grossCents": 3498 }
#       },
#       {
#         "orderId": "A301",
#         "shipTo": { "country": "NL" },
#         "customer": { "email": "billing@company.nl", "vatId": "NL999999999B01" },
#         "lines": [
#           { "sku": "WID-001", "qty": 2, "unitCents": 999 },
#           { "sku": "GAD-002", "qty": 1, "unitCents": 1500 }
#         ],
#         "declared": { "netCents": 3498, "vatCents": 0, "grossCents": 3498 }
#       },
#       {
#         "orderId": "A400",
#         "shipTo": { "country": "BE" },
#         "customer": { "email": "ada@other.example", "vatId": null },
#         "lines": [
#           { "sku": "WID-001", "qty": 2, "unitCents": 999 },
#           { "sku": "GAD-002", "qty": 1, "unitCents": 1500 }
#         ],
#         "declared": { "netCents": 3498, "vatCents": 508, "grossCents": 4006 }
#       }
#     ]
#   }"""^^rdf:JSON "/orders") string:jsonPointer ("""{"orderId":"A100","shipTo":{"country":"BE"},"customer":{"email":"Ada@Example.ORG","vatId":null},"lines":[{"sku":"wid-001","qty":2,"unitCents":999},{"sku":"GAD-002","qty":1,"unitCents":1500}],"declared":{"netCents":3498,"vatCents":509,"grossCents":4007}}"""^^rdf:JSON """{"orderId":"A200","shipTo":{"country":"US"},"customer":{"email":"bob@example.org","vatId":null},"lines":[{"sku":"WID-001","qty":2,"unitCents":999},{"sku":"GAD-002","qty":1,"unitCents":1500}],"declared":{"netCents":3498,"vatCents":0,"grossCents":3498}}"""^^rdf:JSON """{"orderId":"A300","shipTo":{"country":"NL"},"customer":{"email":"acct@company.nl","vatId":"NL999999999B01"},"lines":[{"sku":"WID-001","qty":2,"unitCents":999},{"sku":"GAD-002","qty":1,"unitCents":1500}],"declared":{"netCents":3498,"vatCents":0,"grossCents":3498}}"""^^rdf:JSON """{"orderId":"A301","shipTo":{"country":"NL"},"customer":{"email":"billing@company.nl","vatId":"NL999999999B01"},"lines":[{"sku":"WID-001","qty":2,"unitCents":999},{"sku":"GAD-002","qty":1,"unitCents":1500}],"declared":{"netCents":3498,"vatCents":0,"grossCents":3498}}"""^^rdf:JSON """{"orderId":"A400","shipTo":{"country":"BE"},"customer":{"email":"ada@other.example","vatId":null},"lines":[{"sku":"WID-001","qty":2,"unitCents":999},{"sku":"GAD-002","qty":1,"unitCents":1500}],"declared":{"netCents":3498,"vatCents":508,"grossCents":4006}}"""^^rdf:JSON) .
#   ("""{"orderId":"A100","shipTo":{"country":"BE"},"customer":{"email":"Ada@Example.ORG","vatId":null},"lines":[{"sku":"wid-001","qty":2,"unitCents":999},{"sku":"GAD-002","qty":1,"unitCents":1500}],"declared":{"netCents":3498,"vatCents":509,"grossCents":4007}}"""^^rdf:JSON """{"orderId":"A200","shipTo":{"country":"US"},"customer":{"email":"bob@example.org","vatId":null},"lines":[{"sku":"WID-001","qty":2,"unitCents":999},{"sku":"GAD-002","qty":1,"unitCents":1500}],"declared":{"netCents":3498,"vatCents":0,"grossCents":3498}}"""^^rdf:JSON """{"orderId":"A300","shipTo":{"country":"NL"},"customer":{"email":"acct@company.nl","vatId":"NL999999999B01"},"lines":[{"sku":"WID-001","qty":2,"unitCents":999},{"sku":"GAD-002","qty":1,"unitCents":1500}],"declared":{"netCents":3498,"vatCents":0,"grossCents":3498}}"""^^rdf:JSON """{"orderId":"A301","shipTo":{"country":"NL"},"customer":{"email":"billing@company.nl","vatId":"NL999999999B01"},"lines":[{"sku":"WID-001","qty":2,"unitCents":999},{"sku":"GAD-002","qty":1,"unitCents":1500}],"declared":{"netCents":3498,"vatCents":0,"grossCents":3498}}"""^^rdf:JSON """{"orderId":"A400","shipTo":{"country":"BE"},"customer":{"email":"ada@other.example","vatId":null},"lines":[{"sku":"WID-001","qty":2,"unitCents":999},{"sku":"GAD-002","qty":1,"unitCents":1500}],"declared":{"netCents":3498,"vatCents":508,"grossCents":4006}}"""^^rdf:JSON) list:iterate (3 """{"orderId":"A301","shipTo":{"country":"NL"},"customer":{"email":"billing@company.nl","vatId":"NL999999999B01"},"lines":[{"sku":"WID-001","qty":2,"unitCents":999},{"sku":"GAD-002","qty":1,"unitCents":1500}],"declared":{"netCents":3498,"vatCents":0,"grossCents":3498}}"""^^rdf:JSON) .
#   ("""{"orderId":"A301","shipTo":{"country":"NL"},"customer":{"email":"billing@company.nl","vatId":"NL999999999B01"},"lines":[{"sku":"WID-001","qty":2,"unitCents":999},{"sku":"GAD-002","qty":1,"unitCents":1500}],"declared":{"netCents":3498,"vatCents":0,"grossCents":3498}}"""^^rdf:JSON "/orderId") string:jsonPointer "A301" .
#   ("urn:example:order:%s" "A301") string:format "urn:example:order:A301" .
#   <urn:example:order:A301> log:uri "urn:example:order:A301" .
#   ("""{"orderId":"A301","shipTo":{"country":"NL"},"customer":{"email":"billing@company.nl","vatId":"NL999999999B01"},"lines":[{"sku":"WID-001","qty":2,"unitCents":999},{"sku":"GAD-002","qty":1,"unitCents":1500}],"declared":{"netCents":3498,"vatCents":0,"grossCents":3498}}"""^^rdf:JSON "/lines") string:jsonPointer ("""{"sku":"WID-001","qty":2,"unitCents":999}"""^^rdf:JSON """{"sku":"GAD-002","qty":1,"unitCents":1500}"""^^rdf:JSON) .
#   ("""{"sku":"WID-001","qty":2,"unitCents":999}"""^^rdf:JSON """{"sku":"GAD-002","qty":1,"unitCents":1500}"""^^rdf:JSON) list:iterate (1 """{"sku":"GAD-002","qty":1,"unitCents":1500}"""^^rdf:JSON) .
#   ("""{"sku":"GAD-002","qty":1,"unitCents":1500}"""^^rdf:JSON "/sku") string:jsonPointer "GAD-002" .
#   ("""{"sku":"GAD-002","qty":1,"unitCents":1500}"""^^rdf:JSON "/qty") string:jsonPointer 1 .
#   ("""{"sku":"GAD-002","qty":1,"unitCents":1500}"""^^rdf:JSON "/unitCents") string:jsonPointer 1500 .
#   ex:Gadget a ex:Product .
#   ex:Gadget ex:sku "GAD-002" .
#   (1 1500) math:product 1500 .
#   ("urn:example:order:%s#line:%s" "A301" 1) string:format "urn:example:order:A301#line:1" .
#   <urn:example:order:A301#line:1> log:uri "urn:example:order:A301#line:1" .
#   "GAD-002" string:equalIgnoringCase "GAD-002" .
# via the schematic forward rule:
#   {
#     ex:feed ex:json ?J .
#     (?J "/orders") string:jsonPointer ?Orders .
#     ?Orders list:iterate (?OrderIndex ?OrderJson) .
#     (?OrderJson "/orderId") string:jsonPointer ?OrderId .
#     ("urn:example:order:%s" ?OrderId) string:format ?OrderUriStr .
#     ?Order log:uri ?OrderUriStr .
#     (?OrderJson "/lines") string:jsonPointer ?Lines .
#     ?Lines list:iterate (?LineIndex ?LineJson) .
#     (?LineJson "/sku") string:jsonPointer ?SkuJson .
#     (?LineJson "/qty") string:jsonPointer ?Qty .
#     (?LineJson "/unitCents") string:jsonPointer ?UnitCents .
#     ?Product a ex:Product .
#     ?Product ex:sku ?SkuCat .
#     (?Qty ?UnitCents) math:product ?NetCents .
#     ("urn:example:order:%s#line:%s" ?OrderId ?LineIndex) string:format ?LineUriStr .
#     ?Line log:uri ?LineUriStr .
#     ?SkuJson string:equalIgnoringCase ?SkuCat .
#   } => {
#     ?Order ex:line ?Line .
#     ?Line a ex:OrderLine .
#     ?Line ex:lineIndex ?LineIndex .
#     ?Line ex:product ?Product .
#     ?Line ex:sku ?SkuCat .
#     ?Line ex:qty ?Qty .
#     ?Line ex:unitCents ?UnitCents .
#     ?Line ex:netCents ?NetCents .
#   } .
# with substitution (on rule variables):
#   ?J = """{
#     "meta~data": { "batch": "2025-12-18" },
#     "orders": [
#     {
#     "orderId": "A100",
#     "shipTo": { "country": "BE" },
#     "customer": { "email": "Ada@Example.ORG", "vatId": null },
#     "lines": [
#     { "sku": "wid-001", "qty": 2, "unitCents": 999 },
#     { "sku": "GAD-002", "qty": 1, "unitCents": 1500 }
#     ],
#     "declared": { "netCents": 3498, "vatCents": 509, "grossCents": 4007 }
#     },
#     {
#     "orderId": "A200",
#     "shipTo": { "country": "US" },
#     "customer": { "email": "bob@example.org", "vatId": null },
#     "lines": [
#     { "sku": "WID-001", "qty": 2, "unitCents": 999 },
#     { "sku": "GAD-002", "qty": 1, "unitCents": 1500 }
#     ],
#     "declared": { "netCents": 3498, "vatCents": 0, "grossCents": 3498 }
#     },
#     {
#     "orderId": "A300",
#     "shipTo": { "country": "NL" },
#     "customer": { "email": "acct@company.nl", "vatId": "NL999999999B01" },
#     "lines": [
#     { "sku": "WID-001", "qty": 2, "unitCents": 999 },
#     { "sku": "GAD-002", "qty": 1, "unitCents": 1500 }
#     ],
#     "declared": { "netCents": 3498, "vatCents": 0, "grossCents": 3498 }
#     },
#     {
#     "orderId": "A301",
#     "shipTo": { "country": "NL" },
#     "customer": { "email": "billing@company.nl", "vatId": "NL999999999B01" },
#     "lines": [
#     { "sku": "WID-001", "qty": 2, "unitCents": 999 },
#     { "sku": "GAD-002", "qty": 1, "unitCents": 1500 }
#     ],
#     "declared": { "netCents": 3498, "vatCents": 0, "grossCents": 3498 }
#     },
#     {
#     "orderId": "A400",
#     "shipTo": { "country": "BE" },
#     "customer": { "email": "ada@other.example", "vatId": null },
#     "lines": [
#     { "sku": "WID-001", "qty": 2, "unitCents": 999 },
#     { "sku": "GAD-002", "qty": 1, "unitCents": 1500 }
#     ],
#     "declared": { "netCents": 3498, "vatCents": 508, "grossCents": 4006 }
#     }
#     ]
#   }"""^^rdf:JSON
#   ?Line = <urn:example:order:A301#line:1>
#   ?LineIndex = 1
#   ?LineJson = """{"sku":"GAD-002","qty":1,"unitCents":1500}"""^^rdf:JSON
#   ?LineUriStr = "urn:example:order:A301#line:1"
#   ?Lines = ("""{"sku":"WID-001","qty":2,"unitCents":999}"""^^rdf:JSON """{"sku":"GAD-002","qty":1,"unitCents":1500}"""^^rdf:JSON)
#   ?NetCents = 1500
#   ?Order = <urn:example:order:A301>
#   ?OrderId = "A301"
#   ?OrderIndex = 3
#   ?OrderJson = """{"orderId":"A301","shipTo":{"country":"NL"},"customer":{"email":"billing@company.nl","vatId":"NL999999999B01"},"lines":[{"sku":"WID-001","qty":2,"unitCents":999},{"sku":"GAD-002","qty":1,"unitCents":1500}],"declared":{"netCents":3498,"vatCents":0,"grossCents":3498}}"""^^rdf:JSON
#   ?OrderUriStr = "urn:example:order:A301"
#   ?Orders = ("""{"orderId":"A100","shipTo":{"country":"BE"},"customer":{"email":"Ada@Example.ORG","vatId":null},"lines":[{"sku":"wid-001","qty":2,"unitCents":999},{"sku":"GAD-002","qty":1,"unitCents":1500}],"declared":{"netCents":3498,"vatCents":509,"grossCents":4007}}"""^^rdf:JSON """{"orderId":"A200","shipTo":{"country":"US"},"customer":{"email":"bob@example.org","vatId":null},"lines":[{"sku":"WID-001","qty":2,"unitCents":999},{"sku":"GAD-002","qty":1,"unitCents":1500}],"declared":{"netCents":3498,"vatCents":0,"grossCents":3498}}"""^^rdf:JSON """{"orderId":"A300","shipTo":{"country":"NL"},"customer":{"email":"acct@company.nl","vatId":"NL999999999B01"},"lines":[{"sku":"WID-001","qty":2,"unitCents":999},{"sku":"GAD-002","qty":1,"unitCents":1500}],"declared":{"netCents":3498,"vatCents":0,"grossCents":3498}}"""^^rdf:JSON """{"orderId":"A301","shipTo":{"country":"NL"},"customer":{"email":"billing@company.nl","vatId":"NL999999999B01"},"lines":[{"sku":"WID-001","qty":2,"unitCents":999},{"sku":"GAD-002","qty":1,"unitCents":1500}],"declared":{"netCents":3498,"vatCents":0,"grossCents":3498}}"""^^rdf:JSON """{"orderId":"A400","shipTo":{"country":"BE"},"customer":{"email":"ada@other.example","vatId":null},"lines":[{"sku":"WID-001","qty":2,"unitCents":999},{"sku":"GAD-002","qty":1,"unitCents":1500}],"declared":{"netCents":3498,"vatCents":508,"grossCents":4006}}"""^^rdf:JSON)
#   ?Product = ex:Gadget
#   ?Qty = 1
#   ?SkuCat = "GAD-002"
#   ?SkuJson = "GAD-002"
#   ?UnitCents = 1500
# Therefore the derived triple above is entailed by the rules and facts.
# ----------------------------------------------------------------------

<urn:example:order:A301#line:1> ex:sku "GAD-002" .

# ----------------------------------------------------------------------
# Proof for derived triple:
#   <urn:example:order:A301#line:1> ex:qty 1 .
# It holds because the following instance of the rule body is provable:
#   ex:feed ex:json """{
#     "meta~data": { "batch": "2025-12-18" },
#     "orders": [
#       {
#         "orderId": "A100",
#         "shipTo": { "country": "BE" },
#         "customer": { "email": "Ada@Example.ORG", "vatId": null },
#         "lines": [
#           { "sku": "wid-001", "qty": 2, "unitCents": 999 },
#           { "sku": "GAD-002", "qty": 1, "unitCents": 1500 }
#         ],
#         "declared": { "netCents": 3498, "vatCents": 509, "grossCents": 4007 }
#       },
#       {
#         "orderId": "A200",
#         "shipTo": { "country": "US" },
#         "customer": { "email": "bob@example.org", "vatId": null },
#         "lines": [
#           { "sku": "WID-001", "qty": 2, "unitCents": 999 },
#           { "sku": "GAD-002", "qty": 1, "unitCents": 1500 }
#         ],
#         "declared": { "netCents": 3498, "vatCents": 0, "grossCents": 3498 }
#       },
#       {
#         "orderId": "A300",
#         "shipTo": { "country": "NL" },
#         "customer": { "email": "acct@company.nl", "vatId": "NL999999999B01" },
#         "lines": [
#           { "sku": "WID-001", "qty": 2, "unitCents": 999 },
#           { "sku": "GAD-002", "qty": 1, "unitCents": 1500 }
#         ],
#         "declared": { "netCents": 3498, "vatCents": 0, "grossCents": 3498 }
#       },
#       {
#         "orderId": "A301",
#         "shipTo": { "country": "NL" },
#         "customer": { "email": "billing@company.nl", "vatId": "NL999999999B01" },
#         "lines": [
#           { "sku": "WID-001", "qty": 2, "unitCents": 999 },
#           { "sku": "GAD-002", "qty": 1, "unitCents": 1500 }
#         ],
#         "declared": { "netCents": 3498, "vatCents": 0, "grossCents": 3498 }
#       },
#       {
#         "orderId": "A400",
#         "shipTo": { "country": "BE" },
#         "customer": { "email": "ada@other.example", "vatId": null },
#         "lines": [
#           { "sku": "WID-001", "qty": 2, "unitCents": 999 },
#           { "sku": "GAD-002", "qty": 1, "unitCents": 1500 }
#         ],
#         "declared": { "netCents": 3498, "vatCents": 508, "grossCents": 4006 }
#       }
#     ]
#   }"""^^rdf:JSON .
#   ("""{
#     "meta~data": { "batch": "2025-12-18" },
#     "orders": [
#       {
#         "orderId": "A100",
#         "shipTo": { "country": "BE" },
#         "customer": { "email": "Ada@Example.ORG", "vatId": null },
#         "lines": [
#           { "sku": "wid-001", "qty": 2, "unitCents": 999 },
#           { "sku": "GAD-002", "qty": 1, "unitCents": 1500 }
#         ],
#         "declared": { "netCents": 3498, "vatCents": 509, "grossCents": 4007 }
#       },
#       {
#         "orderId": "A200",
#         "shipTo": { "country": "US" },
#         "customer": { "email": "bob@example.org", "vatId": null },
#         "lines": [
#           { "sku": "WID-001", "qty": 2, "unitCents": 999 },
#           { "sku": "GAD-002", "qty": 1, "unitCents": 1500 }
#         ],
#         "declared": { "netCents": 3498, "vatCents": 0, "grossCents": 3498 }
#       },
#       {
#         "orderId": "A300",
#         "shipTo": { "country": "NL" },
#         "customer": { "email": "acct@company.nl", "vatId": "NL999999999B01" },
#         "lines": [
#           { "sku": "WID-001", "qty": 2, "unitCents": 999 },
#           { "sku": "GAD-002", "qty": 1, "unitCents": 1500 }
#         ],
#         "declared": { "netCents": 3498, "vatCents": 0, "grossCents": 3498 }
#       },
#       {
#         "orderId": "A301",
#         "shipTo": { "country": "NL" },
#         "customer": { "email": "billing@company.nl", "vatId": "NL999999999B01" },
#         "lines": [
#           { "sku": "WID-001", "qty": 2, "unitCents": 999 },
#           { "sku": "GAD-002", "qty": 1, "unitCents": 1500 }
#         ],
#         "declared": { "netCents": 3498, "vatCents": 0, "grossCents": 3498 }
#       },
#       {
#         "orderId": "A400",
#         "shipTo": { "country": "BE" },
#         "customer": { "email": "ada@other.example", "vatId": null },
#         "lines": [
#           { "sku": "WID-001", "qty": 2, "unitCents": 999 },
#           { "sku": "GAD-002", "qty": 1, "unitCents": 1500 }
#         ],
#         "declared": { "netCents": 3498, "vatCents": 508, "grossCents": 4006 }
#       }
#     ]
#   }"""^^rdf:JSON "/orders") string:jsonPointer ("""{"orderId":"A100","shipTo":{"country":"BE"},"customer":{"email":"Ada@Example.ORG","vatId":null},"lines":[{"sku":"wid-001","qty":2,"unitCents":999},{"sku":"GAD-002","qty":1,"unitCents":1500}],"declared":{"netCents":3498,"vatCents":509,"grossCents":4007}}"""^^rdf:JSON """{"orderId":"A200","shipTo":{"country":"US"},"customer":{"email":"bob@example.org","vatId":null},"lines":[{"sku":"WID-001","qty":2,"unitCents":999},{"sku":"GAD-002","qty":1,"unitCents":1500}],"declared":{"netCents":3498,"vatCents":0,"grossCents":3498}}"""^^rdf:JSON """{"orderId":"A300","shipTo":{"country":"NL"},"customer":{"email":"acct@company.nl","vatId":"NL999999999B01"},"lines":[{"sku":"WID-001","qty":2,"unitCents":999},{"sku":"GAD-002","qty":1,"unitCents":1500}],"declared":{"netCents":3498,"vatCents":0,"grossCents":3498}}"""^^rdf:JSON """{"orderId":"A301","shipTo":{"country":"NL"},"customer":{"email":"billing@company.nl","vatId":"NL999999999B01"},"lines":[{"sku":"WID-001","qty":2,"unitCents":999},{"sku":"GAD-002","qty":1,"unitCents":1500}],"declared":{"netCents":3498,"vatCents":0,"grossCents":3498}}"""^^rdf:JSON """{"orderId":"A400","shipTo":{"country":"BE"},"customer":{"email":"ada@other.example","vatId":null},"lines":[{"sku":"WID-001","qty":2,"unitCents":999},{"sku":"GAD-002","qty":1,"unitCents":1500}],"declared":{"netCents":3498,"vatCents":508,"grossCents":4006}}"""^^rdf:JSON) .
#   ("""{"orderId":"A100","shipTo":{"country":"BE"},"customer":{"email":"Ada@Example.ORG","vatId":null},"lines":[{"sku":"wid-001","qty":2,"unitCents":999},{"sku":"GAD-002","qty":1,"unitCents":1500}],"declared":{"netCents":3498,"vatCents":509,"grossCents":4007}}"""^^rdf:JSON """{"orderId":"A200","shipTo":{"country":"US"},"customer":{"email":"bob@example.org","vatId":null},"lines":[{"sku":"WID-001","qty":2,"unitCents":999},{"sku":"GAD-002","qty":1,"unitCents":1500}],"declared":{"netCents":3498,"vatCents":0,"grossCents":3498}}"""^^rdf:JSON """{"orderId":"A300","shipTo":{"country":"NL"},"customer":{"email":"acct@company.nl","vatId":"NL999999999B01"},"lines":[{"sku":"WID-001","qty":2,"unitCents":999},{"sku":"GAD-002","qty":1,"unitCents":1500}],"declared":{"netCents":3498,"vatCents":0,"grossCents":3498}}"""^^rdf:JSON """{"orderId":"A301","shipTo":{"country":"NL"},"customer":{"email":"billing@company.nl","vatId":"NL999999999B01"},"lines":[{"sku":"WID-001","qty":2,"unitCents":999},{"sku":"GAD-002","qty":1,"unitCents":1500}],"declared":{"netCents":3498,"vatCents":0,"grossCents":3498}}"""^^rdf:JSON """{"orderId":"A400","shipTo":{"country":"BE"},"customer":{"email":"ada@other.example","vatId":null},"lines":[{"sku":"WID-001","qty":2,"unitCents":999},{"sku":"GAD-002","qty":1,"unitCents":1500}],"declared":{"netCents":3498,"vatCents":508,"grossCents":4006}}"""^^rdf:JSON) list:iterate (3 """{"orderId":"A301","shipTo":{"country":"NL"},"customer":{"email":"billing@company.nl","vatId":"NL999999999B01"},"lines":[{"sku":"WID-001","qty":2,"unitCents":999},{"sku":"GAD-002","qty":1,"unitCents":1500}],"declared":{"netCents":3498,"vatCents":0,"grossCents":3498}}"""^^rdf:JSON) .
#   ("""{"orderId":"A301","shipTo":{"country":"NL"},"customer":{"email":"billing@company.nl","vatId":"NL999999999B01"},"lines":[{"sku":"WID-001","qty":2,"unitCents":999},{"sku":"GAD-002","qty":1,"unitCents":1500}],"declared":{"netCents":3498,"vatCents":0,"grossCents":3498}}"""^^rdf:JSON "/orderId") string:jsonPointer "A301" .
#   ("urn:example:order:%s" "A301") string:format "urn:example:order:A301" .
#   <urn:example:order:A301> log:uri "urn:example:order:A301" .
#   ("""{"orderId":"A301","shipTo":{"country":"NL"},"customer":{"email":"billing@company.nl","vatId":"NL999999999B01"},"lines":[{"sku":"WID-001","qty":2,"unitCents":999},{"sku":"GAD-002","qty":1,"unitCents":1500}],"declared":{"netCents":3498,"vatCents":0,"grossCents":3498}}"""^^rdf:JSON "/lines") string:jsonPointer ("""{"sku":"WID-001","qty":2,"unitCents":999}"""^^rdf:JSON """{"sku":"GAD-002","qty":1,"unitCents":1500}"""^^rdf:JSON) .
#   ("""{"sku":"WID-001","qty":2,"unitCents":999}"""^^rdf:JSON """{"sku":"GAD-002","qty":1,"unitCents":1500}"""^^rdf:JSON) list:iterate (1 """{"sku":"GAD-002","qty":1,"unitCents":1500}"""^^rdf:JSON) .
#   ("""{"sku":"GAD-002","qty":1,"unitCents":1500}"""^^rdf:JSON "/sku") string:jsonPointer "GAD-002" .
#   ("""{"sku":"GAD-002","qty":1,"unitCents":1500}"""^^rdf:JSON "/qty") string:jsonPointer 1 .
#   ("""{"sku":"GAD-002","qty":1,"unitCents":1500}"""^^rdf:JSON "/unitCents") string:jsonPointer 1500 .
#   ex:Gadget a ex:Product .
#   ex:Gadget ex:sku "GAD-002" .
#   (1 1500) math:product 1500 .
#   ("urn:example:order:%s#line:%s" "A301" 1) string:format "urn:example:order:A301#line:1" .
#   <urn:example:order:A301#line:1> log:uri "urn:example:order:A301#line:1" .
#   "GAD-002" string:equalIgnoringCase "GAD-002" .
# via the schematic forward rule:
#   {
#     ex:feed ex:json ?J .
#     (?J "/orders") string:jsonPointer ?Orders .
#     ?Orders list:iterate (?OrderIndex ?OrderJson) .
#     (?OrderJson "/orderId") string:jsonPointer ?OrderId .
#     ("urn:example:order:%s" ?OrderId) string:format ?OrderUriStr .
#     ?Order log:uri ?OrderUriStr .
#     (?OrderJson "/lines") string:jsonPointer ?Lines .
#     ?Lines list:iterate (?LineIndex ?LineJson) .
#     (?LineJson "/sku") string:jsonPointer ?SkuJson .
#     (?LineJson "/qty") string:jsonPointer ?Qty .
#     (?LineJson "/unitCents") string:jsonPointer ?UnitCents .
#     ?Product a ex:Product .
#     ?Product ex:sku ?SkuCat .
#     (?Qty ?UnitCents) math:product ?NetCents .
#     ("urn:example:order:%s#line:%s" ?OrderId ?LineIndex) string:format ?LineUriStr .
#     ?Line log:uri ?LineUriStr .
#     ?SkuJson string:equalIgnoringCase ?SkuCat .
#   } => {
#     ?Order ex:line ?Line .
#     ?Line a ex:OrderLine .
#     ?Line ex:lineIndex ?LineIndex .
#     ?Line ex:product ?Product .
#     ?Line ex:sku ?SkuCat .
#     ?Line ex:qty ?Qty .
#     ?Line ex:unitCents ?UnitCents .
#     ?Line ex:netCents ?NetCents .
#   } .
# with substitution (on rule variables):
#   ?J = """{
#     "meta~data": { "batch": "2025-12-18" },
#     "orders": [
#     {
#     "orderId": "A100",
#     "shipTo": { "country": "BE" },
#     "customer": { "email": "Ada@Example.ORG", "vatId": null },
#     "lines": [
#     { "sku": "wid-001", "qty": 2, "unitCents": 999 },
#     { "sku": "GAD-002", "qty": 1, "unitCents": 1500 }
#     ],
#     "declared": { "netCents": 3498, "vatCents": 509, "grossCents": 4007 }
#     },
#     {
#     "orderId": "A200",
#     "shipTo": { "country": "US" },
#     "customer": { "email": "bob@example.org", "vatId": null },
#     "lines": [
#     { "sku": "WID-001", "qty": 2, "unitCents": 999 },
#     { "sku": "GAD-002", "qty": 1, "unitCents": 1500 }
#     ],
#     "declared": { "netCents": 3498, "vatCents": 0, "grossCents": 3498 }
#     },
#     {
#     "orderId": "A300",
#     "shipTo": { "country": "NL" },
#     "customer": { "email": "acct@company.nl", "vatId": "NL999999999B01" },
#     "lines": [
#     { "sku": "WID-001", "qty": 2, "unitCents": 999 },
#     { "sku": "GAD-002", "qty": 1, "unitCents": 1500 }
#     ],
#     "declared": { "netCents": 3498, "vatCents": 0, "grossCents": 3498 }
#     },
#     {
#     "orderId": "A301",
#     "shipTo": { "country": "NL" },
#     "customer": { "email": "billing@company.nl", "vatId": "NL999999999B01" },
#     "lines": [
#     { "sku": "WID-001", "qty": 2, "unitCents": 999 },
#     { "sku": "GAD-002", "qty": 1, "unitCents": 1500 }
#     ],
#     "declared": { "netCents": 3498, "vatCents": 0, "grossCents": 3498 }
#     },
#     {
#     "orderId": "A400",
#     "shipTo": { "country": "BE" },
#     "customer": { "email": "ada@other.example", "vatId": null },
#     "lines": [
#     { "sku": "WID-001", "qty": 2, "unitCents": 999 },
#     { "sku": "GAD-002", "qty": 1, "unitCents": 1500 }
#     ],
#     "declared": { "netCents": 3498, "vatCents": 508, "grossCents": 4006 }
#     }
#     ]
#   }"""^^rdf:JSON
#   ?Line = <urn:example:order:A301#line:1>
#   ?LineIndex = 1
#   ?LineJson = """{"sku":"GAD-002","qty":1,"unitCents":1500}"""^^rdf:JSON
#   ?LineUriStr = "urn:example:order:A301#line:1"
#   ?Lines = ("""{"sku":"WID-001","qty":2,"unitCents":999}"""^^rdf:JSON """{"sku":"GAD-002","qty":1,"unitCents":1500}"""^^rdf:JSON)
#   ?NetCents = 1500
#   ?Order = <urn:example:order:A301>
#   ?OrderId = "A301"
#   ?OrderIndex = 3
#   ?OrderJson = """{"orderId":"A301","shipTo":{"country":"NL"},"customer":{"email":"billing@company.nl","vatId":"NL999999999B01"},"lines":[{"sku":"WID-001","qty":2,"unitCents":999},{"sku":"GAD-002","qty":1,"unitCents":1500}],"declared":{"netCents":3498,"vatCents":0,"grossCents":3498}}"""^^rdf:JSON
#   ?OrderUriStr = "urn:example:order:A301"
#   ?Orders = ("""{"orderId":"A100","shipTo":{"country":"BE"},"customer":{"email":"Ada@Example.ORG","vatId":null},"lines":[{"sku":"wid-001","qty":2,"unitCents":999},{"sku":"GAD-002","qty":1,"unitCents":1500}],"declared":{"netCents":3498,"vatCents":509,"grossCents":4007}}"""^^rdf:JSON """{"orderId":"A200","shipTo":{"country":"US"},"customer":{"email":"bob@example.org","vatId":null},"lines":[{"sku":"WID-001","qty":2,"unitCents":999},{"sku":"GAD-002","qty":1,"unitCents":1500}],"declared":{"netCents":3498,"vatCents":0,"grossCents":3498}}"""^^rdf:JSON """{"orderId":"A300","shipTo":{"country":"NL"},"customer":{"email":"acct@company.nl","vatId":"NL999999999B01"},"lines":[{"sku":"WID-001","qty":2,"unitCents":999},{"sku":"GAD-002","qty":1,"unitCents":1500}],"declared":{"netCents":3498,"vatCents":0,"grossCents":3498}}"""^^rdf:JSON """{"orderId":"A301","shipTo":{"country":"NL"},"customer":{"email":"billing@company.nl","vatId":"NL999999999B01"},"lines":[{"sku":"WID-001","qty":2,"unitCents":999},{"sku":"GAD-002","qty":1,"unitCents":1500}],"declared":{"netCents":3498,"vatCents":0,"grossCents":3498}}"""^^rdf:JSON """{"orderId":"A400","shipTo":{"country":"BE"},"customer":{"email":"ada@other.example","vatId":null},"lines":[{"sku":"WID-001","qty":2,"unitCents":999},{"sku":"GAD-002","qty":1,"unitCents":1500}],"declared":{"netCents":3498,"vatCents":508,"grossCents":4006}}"""^^rdf:JSON)
#   ?Product = ex:Gadget
#   ?Qty = 1
#   ?SkuCat = "GAD-002"
#   ?SkuJson = "GAD-002"
#   ?UnitCents = 1500
# Therefore the derived triple above is entailed by the rules and facts.
# ----------------------------------------------------------------------

<urn:example:order:A301#line:1> ex:qty 1 .

# ----------------------------------------------------------------------
# Proof for derived triple:
#   <urn:example:order:A301#line:1> ex:unitCents 1500 .
# It holds because the following instance of the rule body is provable:
#   ex:feed ex:json """{
#     "meta~data": { "batch": "2025-12-18" },
#     "orders": [
#       {
#         "orderId": "A100",
#         "shipTo": { "country": "BE" },
#         "customer": { "email": "Ada@Example.ORG", "vatId": null },
#         "lines": [
#           { "sku": "wid-001", "qty": 2, "unitCents": 999 },
#           { "sku": "GAD-002", "qty": 1, "unitCents": 1500 }
#         ],
#         "declared": { "netCents": 3498, "vatCents": 509, "grossCents": 4007 }
#       },
#       {
#         "orderId": "A200",
#         "shipTo": { "country": "US" },
#         "customer": { "email": "bob@example.org", "vatId": null },
#         "lines": [
#           { "sku": "WID-001", "qty": 2, "unitCents": 999 },
#           { "sku": "GAD-002", "qty": 1, "unitCents": 1500 }
#         ],
#         "declared": { "netCents": 3498, "vatCents": 0, "grossCents": 3498 }
#       },
#       {
#         "orderId": "A300",
#         "shipTo": { "country": "NL" },
#         "customer": { "email": "acct@company.nl", "vatId": "NL999999999B01" },
#         "lines": [
#           { "sku": "WID-001", "qty": 2, "unitCents": 999 },
#           { "sku": "GAD-002", "qty": 1, "unitCents": 1500 }
#         ],
#         "declared": { "netCents": 3498, "vatCents": 0, "grossCents": 3498 }
#       },
#       {
#         "orderId": "A301",
#         "shipTo": { "country": "NL" },
#         "customer": { "email": "billing@company.nl", "vatId": "NL999999999B01" },
#         "lines": [
#           { "sku": "WID-001", "qty": 2, "unitCents": 999 },
#           { "sku": "GAD-002", "qty": 1, "unitCents": 1500 }
#         ],
#         "declared": { "netCents": 3498, "vatCents": 0, "grossCents": 3498 }
#       },
#       {
#         "orderId": "A400",
#         "shipTo": { "country": "BE" },
#         "customer": { "email": "ada@other.example", "vatId": null },
#         "lines": [
#           { "sku": "WID-001", "qty": 2, "unitCents": 999 },
#           { "sku": "GAD-002", "qty": 1, "unitCents": 1500 }
#         ],
#         "declared": { "netCents": 3498, "vatCents": 508, "grossCents": 4006 }
#       }
#     ]
#   }"""^^rdf:JSON .
#   ("""{
#     "meta~data": { "batch": "2025-12-18" },
#     "orders": [
#       {
#         "orderId": "A100",
#         "shipTo": { "country": "BE" },
#         "customer": { "email": "Ada@Example.ORG", "vatId": null },
#         "lines": [
#           { "sku": "wid-001", "qty": 2, "unitCents": 999 },
#           { "sku": "GAD-002", "qty": 1, "unitCents": 1500 }
#         ],
#         "declared": { "netCents": 3498, "vatCents": 509, "grossCents": 4007 }
#       },
#       {
#         "orderId": "A200",
#         "shipTo": { "country": "US" },
#         "customer": { "email": "bob@example.org", "vatId": null },
#         "lines": [
#           { "sku": "WID-001", "qty": 2, "unitCents": 999 },
#           { "sku": "GAD-002", "qty": 1, "unitCents": 1500 }
#         ],
#         "declared": { "netCents": 3498, "vatCents": 0, "grossCents": 3498 }
#       },
#       {
#         "orderId": "A300",
#         "shipTo": { "country": "NL" },
#         "customer": { "email": "acct@company.nl", "vatId": "NL999999999B01" },
#         "lines": [
#           { "sku": "WID-001", "qty": 2, "unitCents": 999 },
#           { "sku": "GAD-002", "qty": 1, "unitCents": 1500 }
#         ],
#         "declared": { "netCents": 3498, "vatCents": 0, "grossCents": 3498 }
#       },
#       {
#         "orderId": "A301",
#         "shipTo": { "country": "NL" },
#         "customer": { "email": "billing@company.nl", "vatId": "NL999999999B01" },
#         "lines": [
#           { "sku": "WID-001", "qty": 2, "unitCents": 999 },
#           { "sku": "GAD-002", "qty": 1, "unitCents": 1500 }
#         ],
#         "declared": { "netCents": 3498, "vatCents": 0, "grossCents": 3498 }
#       },
#       {
#         "orderId": "A400",
#         "shipTo": { "country": "BE" },
#         "customer": { "email": "ada@other.example", "vatId": null },
#         "lines": [
#           { "sku": "WID-001", "qty": 2, "unitCents": 999 },
#           { "sku": "GAD-002", "qty": 1, "unitCents": 1500 }
#         ],
#         "declared": { "netCents": 3498, "vatCents": 508, "grossCents": 4006 }
#       }
#     ]
#   }"""^^rdf:JSON "/orders") string:jsonPointer ("""{"orderId":"A100","shipTo":{"country":"BE"},"customer":{"email":"Ada@Example.ORG","vatId":null},"lines":[{"sku":"wid-001","qty":2,"unitCents":999},{"sku":"GAD-002","qty":1,"unitCents":1500}],"declared":{"netCents":3498,"vatCents":509,"grossCents":4007}}"""^^rdf:JSON """{"orderId":"A200","shipTo":{"country":"US"},"customer":{"email":"bob@example.org","vatId":null},"lines":[{"sku":"WID-001","qty":2,"unitCents":999},{"sku":"GAD-002","qty":1,"unitCents":1500}],"declared":{"netCents":3498,"vatCents":0,"grossCents":3498}}"""^^rdf:JSON """{"orderId":"A300","shipTo":{"country":"NL"},"customer":{"email":"acct@company.nl","vatId":"NL999999999B01"},"lines":[{"sku":"WID-001","qty":2,"unitCents":999},{"sku":"GAD-002","qty":1,"unitCents":1500}],"declared":{"netCents":3498,"vatCents":0,"grossCents":3498}}"""^^rdf:JSON """{"orderId":"A301","shipTo":{"country":"NL"},"customer":{"email":"billing@company.nl","vatId":"NL999999999B01"},"lines":[{"sku":"WID-001","qty":2,"unitCents":999},{"sku":"GAD-002","qty":1,"unitCents":1500}],"declared":{"netCents":3498,"vatCents":0,"grossCents":3498}}"""^^rdf:JSON """{"orderId":"A400","shipTo":{"country":"BE"},"customer":{"email":"ada@other.example","vatId":null},"lines":[{"sku":"WID-001","qty":2,"unitCents":999},{"sku":"GAD-002","qty":1,"unitCents":1500}],"declared":{"netCents":3498,"vatCents":508,"grossCents":4006}}"""^^rdf:JSON) .
#   ("""{"orderId":"A100","shipTo":{"country":"BE"},"customer":{"email":"Ada@Example.ORG","vatId":null},"lines":[{"sku":"wid-001","qty":2,"unitCents":999},{"sku":"GAD-002","qty":1,"unitCents":1500}],"declared":{"netCents":3498,"vatCents":509,"grossCents":4007}}"""^^rdf:JSON """{"orderId":"A200","shipTo":{"country":"US"},"customer":{"email":"bob@example.org","vatId":null},"lines":[{"sku":"WID-001","qty":2,"unitCents":999},{"sku":"GAD-002","qty":1,"unitCents":1500}],"declared":{"netCents":3498,"vatCents":0,"grossCents":3498}}"""^^rdf:JSON """{"orderId":"A300","shipTo":{"country":"NL"},"customer":{"email":"acct@company.nl","vatId":"NL999999999B01"},"lines":[{"sku":"WID-001","qty":2,"unitCents":999},{"sku":"GAD-002","qty":1,"unitCents":1500}],"declared":{"netCents":3498,"vatCents":0,"grossCents":3498}}"""^^rdf:JSON """{"orderId":"A301","shipTo":{"country":"NL"},"customer":{"email":"billing@company.nl","vatId":"NL999999999B01"},"lines":[{"sku":"WID-001","qty":2,"unitCents":999},{"sku":"GAD-002","qty":1,"unitCents":1500}],"declared":{"netCents":3498,"vatCents":0,"grossCents":3498}}"""^^rdf:JSON """{"orderId":"A400","shipTo":{"country":"BE"},"customer":{"email":"ada@other.example","vatId":null},"lines":[{"sku":"WID-001","qty":2,"unitCents":999},{"sku":"GAD-002","qty":1,"unitCents":1500}],"declared":{"netCents":3498,"vatCents":508,"grossCents":4006}}"""^^rdf:JSON) list:iterate (3 """{"orderId":"A301","shipTo":{"country":"NL"},"customer":{"email":"billing@company.nl","vatId":"NL999999999B01"},"lines":[{"sku":"WID-001","qty":2,"unitCents":999},{"sku":"GAD-002","qty":1,"unitCents":1500}],"declared":{"netCents":3498,"vatCents":0,"grossCents":3498}}"""^^rdf:JSON) .
#   ("""{"orderId":"A301","shipTo":{"country":"NL"},"customer":{"email":"billing@company.nl","vatId":"NL999999999B01"},"lines":[{"sku":"WID-001","qty":2,"unitCents":999},{"sku":"GAD-002","qty":1,"unitCents":1500}],"declared":{"netCents":3498,"vatCents":0,"grossCents":3498}}"""^^rdf:JSON "/orderId") string:jsonPointer "A301" .
#   ("urn:example:order:%s" "A301") string:format "urn:example:order:A301" .
#   <urn:example:order:A301> log:uri "urn:example:order:A301" .
#   ("""{"orderId":"A301","shipTo":{"country":"NL"},"customer":{"email":"billing@company.nl","vatId":"NL999999999B01"},"lines":[{"sku":"WID-001","qty":2,"unitCents":999},{"sku":"GAD-002","qty":1,"unitCents":1500}],"declared":{"netCents":3498,"vatCents":0,"grossCents":3498}}"""^^rdf:JSON "/lines") string:jsonPointer ("""{"sku":"WID-001","qty":2,"unitCents":999}"""^^rdf:JSON """{"sku":"GAD-002","qty":1,"unitCents":1500}"""^^rdf:JSON) .
#   ("""{"sku":"WID-001","qty":2,"unitCents":999}"""^^rdf:JSON """{"sku":"GAD-002","qty":1,"unitCents":1500}"""^^rdf:JSON) list:iterate (1 """{"sku":"GAD-002","qty":1,"unitCents":1500}"""^^rdf:JSON) .
#   ("""{"sku":"GAD-002","qty":1,"unitCents":1500}"""^^rdf:JSON "/sku") string:jsonPointer "GAD-002" .
#   ("""{"sku":"GAD-002","qty":1,"unitCents":1500}"""^^rdf:JSON "/qty") string:jsonPointer 1 .
#   ("""{"sku":"GAD-002","qty":1,"unitCents":1500}"""^^rdf:JSON "/unitCents") string:jsonPointer 1500 .
#   ex:Gadget a ex:Product .
#   ex:Gadget ex:sku "GAD-002" .
#   (1 1500) math:product 1500 .
#   ("urn:example:order:%s#line:%s" "A301" 1) string:format "urn:example:order:A301#line:1" .
#   <urn:example:order:A301#line:1> log:uri "urn:example:order:A301#line:1" .
#   "GAD-002" string:equalIgnoringCase "GAD-002" .
# via the schematic forward rule:
#   {
#     ex:feed ex:json ?J .
#     (?J "/orders") string:jsonPointer ?Orders .
#     ?Orders list:iterate (?OrderIndex ?OrderJson) .
#     (?OrderJson "/orderId") string:jsonPointer ?OrderId .
#     ("urn:example:order:%s" ?OrderId) string:format ?OrderUriStr .
#     ?Order log:uri ?OrderUriStr .
#     (?OrderJson "/lines") string:jsonPointer ?Lines .
#     ?Lines list:iterate (?LineIndex ?LineJson) .
#     (?LineJson "/sku") string:jsonPointer ?SkuJson .
#     (?LineJson "/qty") string:jsonPointer ?Qty .
#     (?LineJson "/unitCents") string:jsonPointer ?UnitCents .
#     ?Product a ex:Product .
#     ?Product ex:sku ?SkuCat .
#     (?Qty ?UnitCents) math:product ?NetCents .
#     ("urn:example:order:%s#line:%s" ?OrderId ?LineIndex) string:format ?LineUriStr .
#     ?Line log:uri ?LineUriStr .
#     ?SkuJson string:equalIgnoringCase ?SkuCat .
#   } => {
#     ?Order ex:line ?Line .
#     ?Line a ex:OrderLine .
#     ?Line ex:lineIndex ?LineIndex .
#     ?Line ex:product ?Product .
#     ?Line ex:sku ?SkuCat .
#     ?Line ex:qty ?Qty .
#     ?Line ex:unitCents ?UnitCents .
#     ?Line ex:netCents ?NetCents .
#   } .
# with substitution (on rule variables):
#   ?J = """{
#     "meta~data": { "batch": "2025-12-18" },
#     "orders": [
#     {
#     "orderId": "A100",
#     "shipTo": { "country": "BE" },
#     "customer": { "email": "Ada@Example.ORG", "vatId": null },
#     "lines": [
#     { "sku": "wid-001", "qty": 2, "unitCents": 999 },
#     { "sku": "GAD-002", "qty": 1, "unitCents": 1500 }
#     ],
#     "declared": { "netCents": 3498, "vatCents": 509, "grossCents": 4007 }
#     },
#     {
#     "orderId": "A200",
#     "shipTo": { "country": "US" },
#     "customer": { "email": "bob@example.org", "vatId": null },
#     "lines": [
#     { "sku": "WID-001", "qty": 2, "unitCents": 999 },
#     { "sku": "GAD-002", "qty": 1, "unitCents": 1500 }
#     ],
#     "declared": { "netCents": 3498, "vatCents": 0, "grossCents": 3498 }
#     },
#     {
#     "orderId": "A300",
#     "shipTo": { "country": "NL" },
#     "customer": { "email": "acct@company.nl", "vatId": "NL999999999B01" },
#     "lines": [
#     { "sku": "WID-001", "qty": 2, "unitCents": 999 },
#     { "sku": "GAD-002", "qty": 1, "unitCents": 1500 }
#     ],
#     "declared": { "netCents": 3498, "vatCents": 0, "grossCents": 3498 }
#     },
#     {
#     "orderId": "A301",
#     "shipTo": { "country": "NL" },
#     "customer": { "email": "billing@company.nl", "vatId": "NL999999999B01" },
#     "lines": [
#     { "sku": "WID-001", "qty": 2, "unitCents": 999 },
#     { "sku": "GAD-002", "qty": 1, "unitCents": 1500 }
#     ],
#     "declared": { "netCents": 3498, "vatCents": 0, "grossCents": 3498 }
#     },
#     {
#     "orderId": "A400",
#     "shipTo": { "country": "BE" },
#     "customer": { "email": "ada@other.example", "vatId": null },
#     "lines": [
#     { "sku": "WID-001", "qty": 2, "unitCents": 999 },
#     { "sku": "GAD-002", "qty": 1, "unitCents": 1500 }
#     ],
#     "declared": { "netCents": 3498, "vatCents": 508, "grossCents": 4006 }
#     }
#     ]
#   }"""^^rdf:JSON
#   ?Line = <urn:example:order:A301#line:1>
#   ?LineIndex = 1
#   ?LineJson = """{"sku":"GAD-002","qty":1,"unitCents":1500}"""^^rdf:JSON
#   ?LineUriStr = "urn:example:order:A301#line:1"
#   ?Lines = ("""{"sku":"WID-001","qty":2,"unitCents":999}"""^^rdf:JSON """{"sku":"GAD-002","qty":1,"unitCents":1500}"""^^rdf:JSON)
#   ?NetCents = 1500
#   ?Order = <urn:example:order:A301>
#   ?OrderId = "A301"
#   ?OrderIndex = 3
#   ?OrderJson = """{"orderId":"A301","shipTo":{"country":"NL"},"customer":{"email":"billing@company.nl","vatId":"NL999999999B01"},"lines":[{"sku":"WID-001","qty":2,"unitCents":999},{"sku":"GAD-002","qty":1,"unitCents":1500}],"declared":{"netCents":3498,"vatCents":0,"grossCents":3498}}"""^^rdf:JSON
#   ?OrderUriStr = "urn:example:order:A301"
#   ?Orders = ("""{"orderId":"A100","shipTo":{"country":"BE"},"customer":{"email":"Ada@Example.ORG","vatId":null},"lines":[{"sku":"wid-001","qty":2,"unitCents":999},{"sku":"GAD-002","qty":1,"unitCents":1500}],"declared":{"netCents":3498,"vatCents":509,"grossCents":4007}}"""^^rdf:JSON """{"orderId":"A200","shipTo":{"country":"US"},"customer":{"email":"bob@example.org","vatId":null},"lines":[{"sku":"WID-001","qty":2,"unitCents":999},{"sku":"GAD-002","qty":1,"unitCents":1500}],"declared":{"netCents":3498,"vatCents":0,"grossCents":3498}}"""^^rdf:JSON """{"orderId":"A300","shipTo":{"country":"NL"},"customer":{"email":"acct@company.nl","vatId":"NL999999999B01"},"lines":[{"sku":"WID-001","qty":2,"unitCents":999},{"sku":"GAD-002","qty":1,"unitCents":1500}],"declared":{"netCents":3498,"vatCents":0,"grossCents":3498}}"""^^rdf:JSON """{"orderId":"A301","shipTo":{"country":"NL"},"customer":{"email":"billing@company.nl","vatId":"NL999999999B01"},"lines":[{"sku":"WID-001","qty":2,"unitCents":999},{"sku":"GAD-002","qty":1,"unitCents":1500}],"declared":{"netCents":3498,"vatCents":0,"grossCents":3498}}"""^^rdf:JSON """{"orderId":"A400","shipTo":{"country":"BE"},"customer":{"email":"ada@other.example","vatId":null},"lines":[{"sku":"WID-001","qty":2,"unitCents":999},{"sku":"GAD-002","qty":1,"unitCents":1500}],"declared":{"netCents":3498,"vatCents":508,"grossCents":4006}}"""^^rdf:JSON)
#   ?Product = ex:Gadget
#   ?Qty = 1
#   ?SkuCat = "GAD-002"
#   ?SkuJson = "GAD-002"
#   ?UnitCents = 1500
# Therefore the derived triple above is entailed by the rules and facts.
# ----------------------------------------------------------------------

<urn:example:order:A301#line:1> ex:unitCents 1500 .

# ----------------------------------------------------------------------
# Proof for derived triple:
#   <urn:example:order:A301#line:1> ex:netCents 1500 .
# It holds because the following instance of the rule body is provable:
#   ex:feed ex:json """{
#     "meta~data": { "batch": "2025-12-18" },
#     "orders": [
#       {
#         "orderId": "A100",
#         "shipTo": { "country": "BE" },
#         "customer": { "email": "Ada@Example.ORG", "vatId": null },
#         "lines": [
#           { "sku": "wid-001", "qty": 2, "unitCents": 999 },
#           { "sku": "GAD-002", "qty": 1, "unitCents": 1500 }
#         ],
#         "declared": { "netCents": 3498, "vatCents": 509, "grossCents": 4007 }
#       },
#       {
#         "orderId": "A200",
#         "shipTo": { "country": "US" },
#         "customer": { "email": "bob@example.org", "vatId": null },
#         "lines": [
#           { "sku": "WID-001", "qty": 2, "unitCents": 999 },
#           { "sku": "GAD-002", "qty": 1, "unitCents": 1500 }
#         ],
#         "declared": { "netCents": 3498, "vatCents": 0, "grossCents": 3498 }
#       },
#       {
#         "orderId": "A300",
#         "shipTo": { "country": "NL" },
#         "customer": { "email": "acct@company.nl", "vatId": "NL999999999B01" },
#         "lines": [
#           { "sku": "WID-001", "qty": 2, "unitCents": 999 },
#           { "sku": "GAD-002", "qty": 1, "unitCents": 1500 }
#         ],
#         "declared": { "netCents": 3498, "vatCents": 0, "grossCents": 3498 }
#       },
#       {
#         "orderId": "A301",
#         "shipTo": { "country": "NL" },
#         "customer": { "email": "billing@company.nl", "vatId": "NL999999999B01" },
#         "lines": [
#           { "sku": "WID-001", "qty": 2, "unitCents": 999 },
#           { "sku": "GAD-002", "qty": 1, "unitCents": 1500 }
#         ],
#         "declared": { "netCents": 3498, "vatCents": 0, "grossCents": 3498 }
#       },
#       {
#         "orderId": "A400",
#         "shipTo": { "country": "BE" },
#         "customer": { "email": "ada@other.example", "vatId": null },
#         "lines": [
#           { "sku": "WID-001", "qty": 2, "unitCents": 999 },
#           { "sku": "GAD-002", "qty": 1, "unitCents": 1500 }
#         ],
#         "declared": { "netCents": 3498, "vatCents": 508, "grossCents": 4006 }
#       }
#     ]
#   }"""^^rdf:JSON .
#   ("""{
#     "meta~data": { "batch": "2025-12-18" },
#     "orders": [
#       {
#         "orderId": "A100",
#         "shipTo": { "country": "BE" },
#         "customer": { "email": "Ada@Example.ORG", "vatId": null },
#         "lines": [
#           { "sku": "wid-001", "qty": 2, "unitCents": 999 },
#           { "sku": "GAD-002", "qty": 1, "unitCents": 1500 }
#         ],
#         "declared": { "netCents": 3498, "vatCents": 509, "grossCents": 4007 }
#       },
#       {
#         "orderId": "A200",
#         "shipTo": { "country": "US" },
#         "customer": { "email": "bob@example.org", "vatId": null },
#         "lines": [
#           { "sku": "WID-001", "qty": 2, "unitCents": 999 },
#           { "sku": "GAD-002", "qty": 1, "unitCents": 1500 }
#         ],
#         "declared": { "netCents": 3498, "vatCents": 0, "grossCents": 3498 }
#       },
#       {
#         "orderId": "A300",
#         "shipTo": { "country": "NL" },
#         "customer": { "email": "acct@company.nl", "vatId": "NL999999999B01" },
#         "lines": [
#           { "sku": "WID-001", "qty": 2, "unitCents": 999 },
#           { "sku": "GAD-002", "qty": 1, "unitCents": 1500 }
#         ],
#         "declared": { "netCents": 3498, "vatCents": 0, "grossCents": 3498 }
#       },
#       {
#         "orderId": "A301",
#         "shipTo": { "country": "NL" },
#         "customer": { "email": "billing@company.nl", "vatId": "NL999999999B01" },
#         "lines": [
#           { "sku": "WID-001", "qty": 2, "unitCents": 999 },
#           { "sku": "GAD-002", "qty": 1, "unitCents": 1500 }
#         ],
#         "declared": { "netCents": 3498, "vatCents": 0, "grossCents": 3498 }
#       },
#       {
#         "orderId": "A400",
#         "shipTo": { "country": "BE" },
#         "customer": { "email": "ada@other.example", "vatId": null },
#         "lines": [
#           { "sku": "WID-001", "qty": 2, "unitCents": 999 },
#           { "sku": "GAD-002", "qty": 1, "unitCents": 1500 }
#         ],
#         "declared": { "netCents": 3498, "vatCents": 508, "grossCents": 4006 }
#       }
#     ]
#   }"""^^rdf:JSON "/orders") string:jsonPointer ("""{"orderId":"A100","shipTo":{"country":"BE"},"customer":{"email":"Ada@Example.ORG","vatId":null},"lines":[{"sku":"wid-001","qty":2,"unitCents":999},{"sku":"GAD-002","qty":1,"unitCents":1500}],"declared":{"netCents":3498,"vatCents":509,"grossCents":4007}}"""^^rdf:JSON """{"orderId":"A200","shipTo":{"country":"US"},"customer":{"email":"bob@example.org","vatId":null},"lines":[{"sku":"WID-001","qty":2,"unitCents":999},{"sku":"GAD-002","qty":1,"unitCents":1500}],"declared":{"netCents":3498,"vatCents":0,"grossCents":3498}}"""^^rdf:JSON """{"orderId":"A300","shipTo":{"country":"NL"},"customer":{"email":"acct@company.nl","vatId":"NL999999999B01"},"lines":[{"sku":"WID-001","qty":2,"unitCents":999},{"sku":"GAD-002","qty":1,"unitCents":1500}],"declared":{"netCents":3498,"vatCents":0,"grossCents":3498}}"""^^rdf:JSON """{"orderId":"A301","shipTo":{"country":"NL"},"customer":{"email":"billing@company.nl","vatId":"NL999999999B01"},"lines":[{"sku":"WID-001","qty":2,"unitCents":999},{"sku":"GAD-002","qty":1,"unitCents":1500}],"declared":{"netCents":3498,"vatCents":0,"grossCents":3498}}"""^^rdf:JSON """{"orderId":"A400","shipTo":{"country":"BE"},"customer":{"email":"ada@other.example","vatId":null},"lines":[{"sku":"WID-001","qty":2,"unitCents":999},{"sku":"GAD-002","qty":1,"unitCents":1500}],"declared":{"netCents":3498,"vatCents":508,"grossCents":4006}}"""^^rdf:JSON) .
#   ("""{"orderId":"A100","shipTo":{"country":"BE"},"customer":{"email":"Ada@Example.ORG","vatId":null},"lines":[{"sku":"wid-001","qty":2,"unitCents":999},{"sku":"GAD-002","qty":1,"unitCents":1500}],"declared":{"netCents":3498,"vatCents":509,"grossCents":4007}}"""^^rdf:JSON """{"orderId":"A200","shipTo":{"country":"US"},"customer":{"email":"bob@example.org","vatId":null},"lines":[{"sku":"WID-001","qty":2,"unitCents":999},{"sku":"GAD-002","qty":1,"unitCents":1500}],"declared":{"netCents":3498,"vatCents":0,"grossCents":3498}}"""^^rdf:JSON """{"orderId":"A300","shipTo":{"country":"NL"},"customer":{"email":"acct@company.nl","vatId":"NL999999999B01"},"lines":[{"sku":"WID-001","qty":2,"unitCents":999},{"sku":"GAD-002","qty":1,"unitCents":1500}],"declared":{"netCents":3498,"vatCents":0,"grossCents":3498}}"""^^rdf:JSON """{"orderId":"A301","shipTo":{"country":"NL"},"customer":{"email":"billing@company.nl","vatId":"NL999999999B01"},"lines":[{"sku":"WID-001","qty":2,"unitCents":999},{"sku":"GAD-002","qty":1,"unitCents":1500}],"declared":{"netCents":3498,"vatCents":0,"grossCents":3498}}"""^^rdf:JSON """{"orderId":"A400","shipTo":{"country":"BE"},"customer":{"email":"ada@other.example","vatId":null},"lines":[{"sku":"WID-001","qty":2,"unitCents":999},{"sku":"GAD-002","qty":1,"unitCents":1500}],"declared":{"netCents":3498,"vatCents":508,"grossCents":4006}}"""^^rdf:JSON) list:iterate (3 """{"orderId":"A301","shipTo":{"country":"NL"},"customer":{"email":"billing@company.nl","vatId":"NL999999999B01"},"lines":[{"sku":"WID-001","qty":2,"unitCents":999},{"sku":"GAD-002","qty":1,"unitCents":1500}],"declared":{"netCents":3498,"vatCents":0,"grossCents":3498}}"""^^rdf:JSON) .
#   ("""{"orderId":"A301","shipTo":{"country":"NL"},"customer":{"email":"billing@company.nl","vatId":"NL999999999B01"},"lines":[{"sku":"WID-001","qty":2,"unitCents":999},{"sku":"GAD-002","qty":1,"unitCents":1500}],"declared":{"netCents":3498,"vatCents":0,"grossCents":3498}}"""^^rdf:JSON "/orderId") string:jsonPointer "A301" .
#   ("urn:example:order:%s" "A301") string:format "urn:example:order:A301" .
#   <urn:example:order:A301> log:uri "urn:example:order:A301" .
#   ("""{"orderId":"A301","shipTo":{"country":"NL"},"customer":{"email":"billing@company.nl","vatId":"NL999999999B01"},"lines":[{"sku":"WID-001","qty":2,"unitCents":999},{"sku":"GAD-002","qty":1,"unitCents":1500}],"declared":{"netCents":3498,"vatCents":0,"grossCents":3498}}"""^^rdf:JSON "/lines") string:jsonPointer ("""{"sku":"WID-001","qty":2,"unitCents":999}"""^^rdf:JSON """{"sku":"GAD-002","qty":1,"unitCents":1500}"""^^rdf:JSON) .
#   ("""{"sku":"WID-001","qty":2,"unitCents":999}"""^^rdf:JSON """{"sku":"GAD-002","qty":1,"unitCents":1500}"""^^rdf:JSON) list:iterate (1 """{"sku":"GAD-002","qty":1,"unitCents":1500}"""^^rdf:JSON) .
#   ("""{"sku":"GAD-002","qty":1,"unitCents":1500}"""^^rdf:JSON "/sku") string:jsonPointer "GAD-002" .
#   ("""{"sku":"GAD-002","qty":1,"unitCents":1500}"""^^rdf:JSON "/qty") string:jsonPointer 1 .
#   ("""{"sku":"GAD-002","qty":1,"unitCents":1500}"""^^rdf:JSON "/unitCents") string:jsonPointer 1500 .
#   ex:Gadget a ex:Product .
#   ex:Gadget ex:sku "GAD-002" .
#   (1 1500) math:product 1500 .
#   ("urn:example:order:%s#line:%s" "A301" 1) string:format "urn:example:order:A301#line:1" .
#   <urn:example:order:A301#line:1> log:uri "urn:example:order:A301#line:1" .
#   "GAD-002" string:equalIgnoringCase "GAD-002" .
# via the schematic forward rule:
#   {
#     ex:feed ex:json ?J .
#     (?J "/orders") string:jsonPointer ?Orders .
#     ?Orders list:iterate (?OrderIndex ?OrderJson) .
#     (?OrderJson "/orderId") string:jsonPointer ?OrderId .
#     ("urn:example:order:%s" ?OrderId) string:format ?OrderUriStr .
#     ?Order log:uri ?OrderUriStr .
#     (?OrderJson "/lines") string:jsonPointer ?Lines .
#     ?Lines list:iterate (?LineIndex ?LineJson) .
#     (?LineJson "/sku") string:jsonPointer ?SkuJson .
#     (?LineJson "/qty") string:jsonPointer ?Qty .
#     (?LineJson "/unitCents") string:jsonPointer ?UnitCents .
#     ?Product a ex:Product .
#     ?Product ex:sku ?SkuCat .
#     (?Qty ?UnitCents) math:product ?NetCents .
#     ("urn:example:order:%s#line:%s" ?OrderId ?LineIndex) string:format ?LineUriStr .
#     ?Line log:uri ?LineUriStr .
#     ?SkuJson string:equalIgnoringCase ?SkuCat .
#   } => {
#     ?Order ex:line ?Line .
#     ?Line a ex:OrderLine .
#     ?Line ex:lineIndex ?LineIndex .
#     ?Line ex:product ?Product .
#     ?Line ex:sku ?SkuCat .
#     ?Line ex:qty ?Qty .
#     ?Line ex:unitCents ?UnitCents .
#     ?Line ex:netCents ?NetCents .
#   } .
# with substitution (on rule variables):
#   ?J = """{
#     "meta~data": { "batch": "2025-12-18" },
#     "orders": [
#     {
#     "orderId": "A100",
#     "shipTo": { "country": "BE" },
#     "customer": { "email": "Ada@Example.ORG", "vatId": null },
#     "lines": [
#     { "sku": "wid-001", "qty": 2, "unitCents": 999 },
#     { "sku": "GAD-002", "qty": 1, "unitCents": 1500 }
#     ],
#     "declared": { "netCents": 3498, "vatCents": 509, "grossCents": 4007 }
#     },
#     {
#     "orderId": "A200",
#     "shipTo": { "country": "US" },
#     "customer": { "email": "bob@example.org", "vatId": null },
#     "lines": [
#     { "sku": "WID-001", "qty": 2, "unitCents": 999 },
#     { "sku": "GAD-002", "qty": 1, "unitCents": 1500 }
#     ],
#     "declared": { "netCents": 3498, "vatCents": 0, "grossCents": 3498 }
#     },
#     {
#     "orderId": "A300",
#     "shipTo": { "country": "NL" },
#     "customer": { "email": "acct@company.nl", "vatId": "NL999999999B01" },
#     "lines": [
#     { "sku": "WID-001", "qty": 2, "unitCents": 999 },
#     { "sku": "GAD-002", "qty": 1, "unitCents": 1500 }
#     ],
#     "declared": { "netCents": 3498, "vatCents": 0, "grossCents": 3498 }
#     },
#     {
#     "orderId": "A301",
#     "shipTo": { "country": "NL" },
#     "customer": { "email": "billing@company.nl", "vatId": "NL999999999B01" },
#     "lines": [
#     { "sku": "WID-001", "qty": 2, "unitCents": 999 },
#     { "sku": "GAD-002", "qty": 1, "unitCents": 1500 }
#     ],
#     "declared": { "netCents": 3498, "vatCents": 0, "grossCents": 3498 }
#     },
#     {
#     "orderId": "A400",
#     "shipTo": { "country": "BE" },
#     "customer": { "email": "ada@other.example", "vatId": null },
#     "lines": [
#     { "sku": "WID-001", "qty": 2, "unitCents": 999 },
#     { "sku": "GAD-002", "qty": 1, "unitCents": 1500 }
#     ],
#     "declared": { "netCents": 3498, "vatCents": 508, "grossCents": 4006 }
#     }
#     ]
#   }"""^^rdf:JSON
#   ?Line = <urn:example:order:A301#line:1>
#   ?LineIndex = 1
#   ?LineJson = """{"sku":"GAD-002","qty":1,"unitCents":1500}"""^^rdf:JSON
#   ?LineUriStr = "urn:example:order:A301#line:1"
#   ?Lines = ("""{"sku":"WID-001","qty":2,"unitCents":999}"""^^rdf:JSON """{"sku":"GAD-002","qty":1,"unitCents":1500}"""^^rdf:JSON)
#   ?NetCents = 1500
#   ?Order = <urn:example:order:A301>
#   ?OrderId = "A301"
#   ?OrderIndex = 3
#   ?OrderJson = """{"orderId":"A301","shipTo":{"country":"NL"},"customer":{"email":"billing@company.nl","vatId":"NL999999999B01"},"lines":[{"sku":"WID-001","qty":2,"unitCents":999},{"sku":"GAD-002","qty":1,"unitCents":1500}],"declared":{"netCents":3498,"vatCents":0,"grossCents":3498}}"""^^rdf:JSON
#   ?OrderUriStr = "urn:example:order:A301"
#   ?Orders = ("""{"orderId":"A100","shipTo":{"country":"BE"},"customer":{"email":"Ada@Example.ORG","vatId":null},"lines":[{"sku":"wid-001","qty":2,"unitCents":999},{"sku":"GAD-002","qty":1,"unitCents":1500}],"declared":{"netCents":3498,"vatCents":509,"grossCents":4007}}"""^^rdf:JSON """{"orderId":"A200","shipTo":{"country":"US"},"customer":{"email":"bob@example.org","vatId":null},"lines":[{"sku":"WID-001","qty":2,"unitCents":999},{"sku":"GAD-002","qty":1,"unitCents":1500}],"declared":{"netCents":3498,"vatCents":0,"grossCents":3498}}"""^^rdf:JSON """{"orderId":"A300","shipTo":{"country":"NL"},"customer":{"email":"acct@company.nl","vatId":"NL999999999B01"},"lines":[{"sku":"WID-001","qty":2,"unitCents":999},{"sku":"GAD-002","qty":1,"unitCents":1500}],"declared":{"netCents":3498,"vatCents":0,"grossCents":3498}}"""^^rdf:JSON """{"orderId":"A301","shipTo":{"country":"NL"},"customer":{"email":"billing@company.nl","vatId":"NL999999999B01"},"lines":[{"sku":"WID-001","qty":2,"unitCents":999},{"sku":"GAD-002","qty":1,"unitCents":1500}],"declared":{"netCents":3498,"vatCents":0,"grossCents":3498}}"""^^rdf:JSON """{"orderId":"A400","shipTo":{"country":"BE"},"customer":{"email":"ada@other.example","vatId":null},"lines":[{"sku":"WID-001","qty":2,"unitCents":999},{"sku":"GAD-002","qty":1,"unitCents":1500}],"declared":{"netCents":3498,"vatCents":508,"grossCents":4006}}"""^^rdf:JSON)
#   ?Product = ex:Gadget
#   ?Qty = 1
#   ?SkuCat = "GAD-002"
#   ?SkuJson = "GAD-002"
#   ?UnitCents = 1500
# Therefore the derived triple above is entailed by the rules and facts.
# ----------------------------------------------------------------------

<urn:example:order:A301#line:1> ex:netCents 1500 .

# ----------------------------------------------------------------------
# Proof for derived triple:
#   <urn:example:order:A301> ex:line <urn:example:order:A301#line:0> .
# It holds because the following instance of the rule body is provable:
#   ex:feed ex:json """{
#     "meta~data": { "batch": "2025-12-18" },
#     "orders": [
#       {
#         "orderId": "A100",
#         "shipTo": { "country": "BE" },
#         "customer": { "email": "Ada@Example.ORG", "vatId": null },
#         "lines": [
#           { "sku": "wid-001", "qty": 2, "unitCents": 999 },
#           { "sku": "GAD-002", "qty": 1, "unitCents": 1500 }
#         ],
#         "declared": { "netCents": 3498, "vatCents": 509, "grossCents": 4007 }
#       },
#       {
#         "orderId": "A200",
#         "shipTo": { "country": "US" },
#         "customer": { "email": "bob@example.org", "vatId": null },
#         "lines": [
#           { "sku": "WID-001", "qty": 2, "unitCents": 999 },
#           { "sku": "GAD-002", "qty": 1, "unitCents": 1500 }
#         ],
#         "declared": { "netCents": 3498, "vatCents": 0, "grossCents": 3498 }
#       },
#       {
#         "orderId": "A300",
#         "shipTo": { "country": "NL" },
#         "customer": { "email": "acct@company.nl", "vatId": "NL999999999B01" },
#         "lines": [
#           { "sku": "WID-001", "qty": 2, "unitCents": 999 },
#           { "sku": "GAD-002", "qty": 1, "unitCents": 1500 }
#         ],
#         "declared": { "netCents": 3498, "vatCents": 0, "grossCents": 3498 }
#       },
#       {
#         "orderId": "A301",
#         "shipTo": { "country": "NL" },
#         "customer": { "email": "billing@company.nl", "vatId": "NL999999999B01" },
#         "lines": [
#           { "sku": "WID-001", "qty": 2, "unitCents": 999 },
#           { "sku": "GAD-002", "qty": 1, "unitCents": 1500 }
#         ],
#         "declared": { "netCents": 3498, "vatCents": 0, "grossCents": 3498 }
#       },
#       {
#         "orderId": "A400",
#         "shipTo": { "country": "BE" },
#         "customer": { "email": "ada@other.example", "vatId": null },
#         "lines": [
#           { "sku": "WID-001", "qty": 2, "unitCents": 999 },
#           { "sku": "GAD-002", "qty": 1, "unitCents": 1500 }
#         ],
#         "declared": { "netCents": 3498, "vatCents": 508, "grossCents": 4006 }
#       }
#     ]
#   }"""^^rdf:JSON .
#   ("""{
#     "meta~data": { "batch": "2025-12-18" },
#     "orders": [
#       {
#         "orderId": "A100",
#         "shipTo": { "country": "BE" },
#         "customer": { "email": "Ada@Example.ORG", "vatId": null },
#         "lines": [
#           { "sku": "wid-001", "qty": 2, "unitCents": 999 },
#           { "sku": "GAD-002", "qty": 1, "unitCents": 1500 }
#         ],
#         "declared": { "netCents": 3498, "vatCents": 509, "grossCents": 4007 }
#       },
#       {
#         "orderId": "A200",
#         "shipTo": { "country": "US" },
#         "customer": { "email": "bob@example.org", "vatId": null },
#         "lines": [
#           { "sku": "WID-001", "qty": 2, "unitCents": 999 },
#           { "sku": "GAD-002", "qty": 1, "unitCents": 1500 }
#         ],
#         "declared": { "netCents": 3498, "vatCents": 0, "grossCents": 3498 }
#       },
#       {
#         "orderId": "A300",
#         "shipTo": { "country": "NL" },
#         "customer": { "email": "acct@company.nl", "vatId": "NL999999999B01" },
#         "lines": [
#           { "sku": "WID-001", "qty": 2, "unitCents": 999 },
#           { "sku": "GAD-002", "qty": 1, "unitCents": 1500 }
#         ],
#         "declared": { "netCents": 3498, "vatCents": 0, "grossCents": 3498 }
#       },
#       {
#         "orderId": "A301",
#         "shipTo": { "country": "NL" },
#         "customer": { "email": "billing@company.nl", "vatId": "NL999999999B01" },
#         "lines": [
#           { "sku": "WID-001", "qty": 2, "unitCents": 999 },
#           { "sku": "GAD-002", "qty": 1, "unitCents": 1500 }
#         ],
#         "declared": { "netCents": 3498, "vatCents": 0, "grossCents": 3498 }
#       },
#       {
#         "orderId": "A400",
#         "shipTo": { "country": "BE" },
#         "customer": { "email": "ada@other.example", "vatId": null },
#         "lines": [
#           { "sku": "WID-001", "qty": 2, "unitCents": 999 },
#           { "sku": "GAD-002", "qty": 1, "unitCents": 1500 }
#         ],
#         "declared": { "netCents": 3498, "vatCents": 508, "grossCents": 4006 }
#       }
#     ]
#   }"""^^rdf:JSON "/orders") string:jsonPointer ("""{"orderId":"A100","shipTo":{"country":"BE"},"customer":{"email":"Ada@Example.ORG","vatId":null},"lines":[{"sku":"wid-001","qty":2,"unitCents":999},{"sku":"GAD-002","qty":1,"unitCents":1500}],"declared":{"netCents":3498,"vatCents":509,"grossCents":4007}}"""^^rdf:JSON """{"orderId":"A200","shipTo":{"country":"US"},"customer":{"email":"bob@example.org","vatId":null},"lines":[{"sku":"WID-001","qty":2,"unitCents":999},{"sku":"GAD-002","qty":1,"unitCents":1500}],"declared":{"netCents":3498,"vatCents":0,"grossCents":3498}}"""^^rdf:JSON """{"orderId":"A300","shipTo":{"country":"NL"},"customer":{"email":"acct@company.nl","vatId":"NL999999999B01"},"lines":[{"sku":"WID-001","qty":2,"unitCents":999},{"sku":"GAD-002","qty":1,"unitCents":1500}],"declared":{"netCents":3498,"vatCents":0,"grossCents":3498}}"""^^rdf:JSON """{"orderId":"A301","shipTo":{"country":"NL"},"customer":{"email":"billing@company.nl","vatId":"NL999999999B01"},"lines":[{"sku":"WID-001","qty":2,"unitCents":999},{"sku":"GAD-002","qty":1,"unitCents":1500}],"declared":{"netCents":3498,"vatCents":0,"grossCents":3498}}"""^^rdf:JSON """{"orderId":"A400","shipTo":{"country":"BE"},"customer":{"email":"ada@other.example","vatId":null},"lines":[{"sku":"WID-001","qty":2,"unitCents":999},{"sku":"GAD-002","qty":1,"unitCents":1500}],"declared":{"netCents":3498,"vatCents":508,"grossCents":4006}}"""^^rdf:JSON) .
#   ("""{"orderId":"A100","shipTo":{"country":"BE"},"customer":{"email":"Ada@Example.ORG","vatId":null},"lines":[{"sku":"wid-001","qty":2,"unitCents":999},{"sku":"GAD-002","qty":1,"unitCents":1500}],"declared":{"netCents":3498,"vatCents":509,"grossCents":4007}}"""^^rdf:JSON """{"orderId":"A200","shipTo":{"country":"US"},"customer":{"email":"bob@example.org","vatId":null},"lines":[{"sku":"WID-001","qty":2,"unitCents":999},{"sku":"GAD-002","qty":1,"unitCents":1500}],"declared":{"netCents":3498,"vatCents":0,"grossCents":3498}}"""^^rdf:JSON """{"orderId":"A300","shipTo":{"country":"NL"},"customer":{"email":"acct@company.nl","vatId":"NL999999999B01"},"lines":[{"sku":"WID-001","qty":2,"unitCents":999},{"sku":"GAD-002","qty":1,"unitCents":1500}],"declared":{"netCents":3498,"vatCents":0,"grossCents":3498}}"""^^rdf:JSON """{"orderId":"A301","shipTo":{"country":"NL"},"customer":{"email":"billing@company.nl","vatId":"NL999999999B01"},"lines":[{"sku":"WID-001","qty":2,"unitCents":999},{"sku":"GAD-002","qty":1,"unitCents":1500}],"declared":{"netCents":3498,"vatCents":0,"grossCents":3498}}"""^^rdf:JSON """{"orderId":"A400","shipTo":{"country":"BE"},"customer":{"email":"ada@other.example","vatId":null},"lines":[{"sku":"WID-001","qty":2,"unitCents":999},{"sku":"GAD-002","qty":1,"unitCents":1500}],"declared":{"netCents":3498,"vatCents":508,"grossCents":4006}}"""^^rdf:JSON) list:iterate (3 """{"orderId":"A301","shipTo":{"country":"NL"},"customer":{"email":"billing@company.nl","vatId":"NL999999999B01"},"lines":[{"sku":"WID-001","qty":2,"unitCents":999},{"sku":"GAD-002","qty":1,"unitCents":1500}],"declared":{"netCents":3498,"vatCents":0,"grossCents":3498}}"""^^rdf:JSON) .
#   ("""{"orderId":"A301","shipTo":{"country":"NL"},"customer":{"email":"billing@company.nl","vatId":"NL999999999B01"},"lines":[{"sku":"WID-001","qty":2,"unitCents":999},{"sku":"GAD-002","qty":1,"unitCents":1500}],"declared":{"netCents":3498,"vatCents":0,"grossCents":3498}}"""^^rdf:JSON "/orderId") string:jsonPointer "A301" .
#   ("urn:example:order:%s" "A301") string:format "urn:example:order:A301" .
#   <urn:example:order:A301> log:uri "urn:example:order:A301" .
#   ("""{"orderId":"A301","shipTo":{"country":"NL"},"customer":{"email":"billing@company.nl","vatId":"NL999999999B01"},"lines":[{"sku":"WID-001","qty":2,"unitCents":999},{"sku":"GAD-002","qty":1,"unitCents":1500}],"declared":{"netCents":3498,"vatCents":0,"grossCents":3498}}"""^^rdf:JSON "/lines") string:jsonPointer ("""{"sku":"WID-001","qty":2,"unitCents":999}"""^^rdf:JSON """{"sku":"GAD-002","qty":1,"unitCents":1500}"""^^rdf:JSON) .
#   ("""{"sku":"WID-001","qty":2,"unitCents":999}"""^^rdf:JSON """{"sku":"GAD-002","qty":1,"unitCents":1500}"""^^rdf:JSON) list:iterate (0 """{"sku":"WID-001","qty":2,"unitCents":999}"""^^rdf:JSON) .
#   ("""{"sku":"WID-001","qty":2,"unitCents":999}"""^^rdf:JSON "/sku") string:jsonPointer "WID-001" .
#   ("""{"sku":"WID-001","qty":2,"unitCents":999}"""^^rdf:JSON "/qty") string:jsonPointer 2 .
#   ("""{"sku":"WID-001","qty":2,"unitCents":999}"""^^rdf:JSON "/unitCents") string:jsonPointer 999 .
#   ex:Widget a ex:Product .
#   ex:Widget ex:sku "WID-001" .
#   (2 999) math:product 1998 .
#   ("urn:example:order:%s#line:%s" "A301" 0) string:format "urn:example:order:A301#line:0" .
#   <urn:example:order:A301#line:0> log:uri "urn:example:order:A301#line:0" .
#   "WID-001" string:equalIgnoringCase "WID-001" .
# via the schematic forward rule:
#   {
#     ex:feed ex:json ?J .
#     (?J "/orders") string:jsonPointer ?Orders .
#     ?Orders list:iterate (?OrderIndex ?OrderJson) .
#     (?OrderJson "/orderId") string:jsonPointer ?OrderId .
#     ("urn:example:order:%s" ?OrderId) string:format ?OrderUriStr .
#     ?Order log:uri ?OrderUriStr .
#     (?OrderJson "/lines") string:jsonPointer ?Lines .
#     ?Lines list:iterate (?LineIndex ?LineJson) .
#     (?LineJson "/sku") string:jsonPointer ?SkuJson .
#     (?LineJson "/qty") string:jsonPointer ?Qty .
#     (?LineJson "/unitCents") string:jsonPointer ?UnitCents .
#     ?Product a ex:Product .
#     ?Product ex:sku ?SkuCat .
#     (?Qty ?UnitCents) math:product ?NetCents .
#     ("urn:example:order:%s#line:%s" ?OrderId ?LineIndex) string:format ?LineUriStr .
#     ?Line log:uri ?LineUriStr .
#     ?SkuJson string:equalIgnoringCase ?SkuCat .
#   } => {
#     ?Order ex:line ?Line .
#     ?Line a ex:OrderLine .
#     ?Line ex:lineIndex ?LineIndex .
#     ?Line ex:product ?Product .
#     ?Line ex:sku ?SkuCat .
#     ?Line ex:qty ?Qty .
#     ?Line ex:unitCents ?UnitCents .
#     ?Line ex:netCents ?NetCents .
#   } .
# with substitution (on rule variables):
#   ?J = """{
#     "meta~data": { "batch": "2025-12-18" },
#     "orders": [
#     {
#     "orderId": "A100",
#     "shipTo": { "country": "BE" },
#     "customer": { "email": "Ada@Example.ORG", "vatId": null },
#     "lines": [
#     { "sku": "wid-001", "qty": 2, "unitCents": 999 },
#     { "sku": "GAD-002", "qty": 1, "unitCents": 1500 }
#     ],
#     "declared": { "netCents": 3498, "vatCents": 509, "grossCents": 4007 }
#     },
#     {
#     "orderId": "A200",
#     "shipTo": { "country": "US" },
#     "customer": { "email": "bob@example.org", "vatId": null },
#     "lines": [
#     { "sku": "WID-001", "qty": 2, "unitCents": 999 },
#     { "sku": "GAD-002", "qty": 1, "unitCents": 1500 }
#     ],
#     "declared": { "netCents": 3498, "vatCents": 0, "grossCents": 3498 }
#     },
#     {
#     "orderId": "A300",
#     "shipTo": { "country": "NL" },
#     "customer": { "email": "acct@company.nl", "vatId": "NL999999999B01" },
#     "lines": [
#     { "sku": "WID-001", "qty": 2, "unitCents": 999 },
#     { "sku": "GAD-002", "qty": 1, "unitCents": 1500 }
#     ],
#     "declared": { "netCents": 3498, "vatCents": 0, "grossCents": 3498 }
#     },
#     {
#     "orderId": "A301",
#     "shipTo": { "country": "NL" },
#     "customer": { "email": "billing@company.nl", "vatId": "NL999999999B01" },
#     "lines": [
#     { "sku": "WID-001", "qty": 2, "unitCents": 999 },
#     { "sku": "GAD-002", "qty": 1, "unitCents": 1500 }
#     ],
#     "declared": { "netCents": 3498, "vatCents": 0, "grossCents": 3498 }
#     },
#     {
#     "orderId": "A400",
#     "shipTo": { "country": "BE" },
#     "customer": { "email": "ada@other.example", "vatId": null },
#     "lines": [
#     { "sku": "WID-001", "qty": 2, "unitCents": 999 },
#     { "sku": "GAD-002", "qty": 1, "unitCents": 1500 }
#     ],
#     "declared": { "netCents": 3498, "vatCents": 508, "grossCents": 4006 }
#     }
#     ]
#   }"""^^rdf:JSON
#   ?Line = <urn:example:order:A301#line:0>
#   ?LineIndex = 0
#   ?LineJson = """{"sku":"WID-001","qty":2,"unitCents":999}"""^^rdf:JSON
#   ?LineUriStr = "urn:example:order:A301#line:0"
#   ?Lines = ("""{"sku":"WID-001","qty":2,"unitCents":999}"""^^rdf:JSON """{"sku":"GAD-002","qty":1,"unitCents":1500}"""^^rdf:JSON)
#   ?NetCents = 1998
#   ?Order = <urn:example:order:A301>
#   ?OrderId = "A301"
#   ?OrderIndex = 3
#   ?OrderJson = """{"orderId":"A301","shipTo":{"country":"NL"},"customer":{"email":"billing@company.nl","vatId":"NL999999999B01"},"lines":[{"sku":"WID-001","qty":2,"unitCents":999},{"sku":"GAD-002","qty":1,"unitCents":1500}],"declared":{"netCents":3498,"vatCents":0,"grossCents":3498}}"""^^rdf:JSON
#   ?OrderUriStr = "urn:example:order:A301"
#   ?Orders = ("""{"orderId":"A100","shipTo":{"country":"BE"},"customer":{"email":"Ada@Example.ORG","vatId":null},"lines":[{"sku":"wid-001","qty":2,"unitCents":999},{"sku":"GAD-002","qty":1,"unitCents":1500}],"declared":{"netCents":3498,"vatCents":509,"grossCents":4007}}"""^^rdf:JSON """{"orderId":"A200","shipTo":{"country":"US"},"customer":{"email":"bob@example.org","vatId":null},"lines":[{"sku":"WID-001","qty":2,"unitCents":999},{"sku":"GAD-002","qty":1,"unitCents":1500}],"declared":{"netCents":3498,"vatCents":0,"grossCents":3498}}"""^^rdf:JSON """{"orderId":"A300","shipTo":{"country":"NL"},"customer":{"email":"acct@company.nl","vatId":"NL999999999B01"},"lines":[{"sku":"WID-001","qty":2,"unitCents":999},{"sku":"GAD-002","qty":1,"unitCents":1500}],"declared":{"netCents":3498,"vatCents":0,"grossCents":3498}}"""^^rdf:JSON """{"orderId":"A301","shipTo":{"country":"NL"},"customer":{"email":"billing@company.nl","vatId":"NL999999999B01"},"lines":[{"sku":"WID-001","qty":2,"unitCents":999},{"sku":"GAD-002","qty":1,"unitCents":1500}],"declared":{"netCents":3498,"vatCents":0,"grossCents":3498}}"""^^rdf:JSON """{"orderId":"A400","shipTo":{"country":"BE"},"customer":{"email":"ada@other.example","vatId":null},"lines":[{"sku":"WID-001","qty":2,"unitCents":999},{"sku":"GAD-002","qty":1,"unitCents":1500}],"declared":{"netCents":3498,"vatCents":508,"grossCents":4006}}"""^^rdf:JSON)
#   ?Product = ex:Widget
#   ?Qty = 2
#   ?SkuCat = "WID-001"
#   ?SkuJson = "WID-001"
#   ?UnitCents = 999
# Therefore the derived triple above is entailed by the rules and facts.
# ----------------------------------------------------------------------

<urn:example:order:A301> ex:line <urn:example:order:A301#line:0> .

# ----------------------------------------------------------------------
# Proof for derived triple:
#   <urn:example:order:A301#line:0> a ex:OrderLine .
# It holds because the following instance of the rule body is provable:
#   ex:feed ex:json """{
#     "meta~data": { "batch": "2025-12-18" },
#     "orders": [
#       {
#         "orderId": "A100",
#         "shipTo": { "country": "BE" },
#         "customer": { "email": "Ada@Example.ORG", "vatId": null },
#         "lines": [
#           { "sku": "wid-001", "qty": 2, "unitCents": 999 },
#           { "sku": "GAD-002", "qty": 1, "unitCents": 1500 }
#         ],
#         "declared": { "netCents": 3498, "vatCents": 509, "grossCents": 4007 }
#       },
#       {
#         "orderId": "A200",
#         "shipTo": { "country": "US" },
#         "customer": { "email": "bob@example.org", "vatId": null },
#         "lines": [
#           { "sku": "WID-001", "qty": 2, "unitCents": 999 },
#           { "sku": "GAD-002", "qty": 1, "unitCents": 1500 }
#         ],
#         "declared": { "netCents": 3498, "vatCents": 0, "grossCents": 3498 }
#       },
#       {
#         "orderId": "A300",
#         "shipTo": { "country": "NL" },
#         "customer": { "email": "acct@company.nl", "vatId": "NL999999999B01" },
#         "lines": [
#           { "sku": "WID-001", "qty": 2, "unitCents": 999 },
#           { "sku": "GAD-002", "qty": 1, "unitCents": 1500 }
#         ],
#         "declared": { "netCents": 3498, "vatCents": 0, "grossCents": 3498 }
#       },
#       {
#         "orderId": "A301",
#         "shipTo": { "country": "NL" },
#         "customer": { "email": "billing@company.nl", "vatId": "NL999999999B01" },
#         "lines": [
#           { "sku": "WID-001", "qty": 2, "unitCents": 999 },
#           { "sku": "GAD-002", "qty": 1, "unitCents": 1500 }
#         ],
#         "declared": { "netCents": 3498, "vatCents": 0, "grossCents": 3498 }
#       },
#       {
#         "orderId": "A400",
#         "shipTo": { "country": "BE" },
#         "customer": { "email": "ada@other.example", "vatId": null },
#         "lines": [
#           { "sku": "WID-001", "qty": 2, "unitCents": 999 },
#           { "sku": "GAD-002", "qty": 1, "unitCents": 1500 }
#         ],
#         "declared": { "netCents": 3498, "vatCents": 508, "grossCents": 4006 }
#       }
#     ]
#   }"""^^rdf:JSON .
#   ("""{
#     "meta~data": { "batch": "2025-12-18" },
#     "orders": [
#       {
#         "orderId": "A100",
#         "shipTo": { "country": "BE" },
#         "customer": { "email": "Ada@Example.ORG", "vatId": null },
#         "lines": [
#           { "sku": "wid-001", "qty": 2, "unitCents": 999 },
#           { "sku": "GAD-002", "qty": 1, "unitCents": 1500 }
#         ],
#         "declared": { "netCents": 3498, "vatCents": 509, "grossCents": 4007 }
#       },
#       {
#         "orderId": "A200",
#         "shipTo": { "country": "US" },
#         "customer": { "email": "bob@example.org", "vatId": null },
#         "lines": [
#           { "sku": "WID-001", "qty": 2, "unitCents": 999 },
#           { "sku": "GAD-002", "qty": 1, "unitCents": 1500 }
#         ],
#         "declared": { "netCents": 3498, "vatCents": 0, "grossCents": 3498 }
#       },
#       {
#         "orderId": "A300",
#         "shipTo": { "country": "NL" },
#         "customer": { "email": "acct@company.nl", "vatId": "NL999999999B01" },
#         "lines": [
#           { "sku": "WID-001", "qty": 2, "unitCents": 999 },
#           { "sku": "GAD-002", "qty": 1, "unitCents": 1500 }
#         ],
#         "declared": { "netCents": 3498, "vatCents": 0, "grossCents": 3498 }
#       },
#       {
#         "orderId": "A301",
#         "shipTo": { "country": "NL" },
#         "customer": { "email": "billing@company.nl", "vatId": "NL999999999B01" },
#         "lines": [
#           { "sku": "WID-001", "qty": 2, "unitCents": 999 },
#           { "sku": "GAD-002", "qty": 1, "unitCents": 1500 }
#         ],
#         "declared": { "netCents": 3498, "vatCents": 0, "grossCents": 3498 }
#       },
#       {
#         "orderId": "A400",
#         "shipTo": { "country": "BE" },
#         "customer": { "email": "ada@other.example", "vatId": null },
#         "lines": [
#           { "sku": "WID-001", "qty": 2, "unitCents": 999 },
#           { "sku": "GAD-002", "qty": 1, "unitCents": 1500 }
#         ],
#         "declared": { "netCents": 3498, "vatCents": 508, "grossCents": 4006 }
#       }
#     ]
#   }"""^^rdf:JSON "/orders") string:jsonPointer ("""{"orderId":"A100","shipTo":{"country":"BE"},"customer":{"email":"Ada@Example.ORG","vatId":null},"lines":[{"sku":"wid-001","qty":2,"unitCents":999},{"sku":"GAD-002","qty":1,"unitCents":1500}],"declared":{"netCents":3498,"vatCents":509,"grossCents":4007}}"""^^rdf:JSON """{"orderId":"A200","shipTo":{"country":"US"},"customer":{"email":"bob@example.org","vatId":null},"lines":[{"sku":"WID-001","qty":2,"unitCents":999},{"sku":"GAD-002","qty":1,"unitCents":1500}],"declared":{"netCents":3498,"vatCents":0,"grossCents":3498}}"""^^rdf:JSON """{"orderId":"A300","shipTo":{"country":"NL"},"customer":{"email":"acct@company.nl","vatId":"NL999999999B01"},"lines":[{"sku":"WID-001","qty":2,"unitCents":999},{"sku":"GAD-002","qty":1,"unitCents":1500}],"declared":{"netCents":3498,"vatCents":0,"grossCents":3498}}"""^^rdf:JSON """{"orderId":"A301","shipTo":{"country":"NL"},"customer":{"email":"billing@company.nl","vatId":"NL999999999B01"},"lines":[{"sku":"WID-001","qty":2,"unitCents":999},{"sku":"GAD-002","qty":1,"unitCents":1500}],"declared":{"netCents":3498,"vatCents":0,"grossCents":3498}}"""^^rdf:JSON """{"orderId":"A400","shipTo":{"country":"BE"},"customer":{"email":"ada@other.example","vatId":null},"lines":[{"sku":"WID-001","qty":2,"unitCents":999},{"sku":"GAD-002","qty":1,"unitCents":1500}],"declared":{"netCents":3498,"vatCents":508,"grossCents":4006}}"""^^rdf:JSON) .
#   ("""{"orderId":"A100","shipTo":{"country":"BE"},"customer":{"email":"Ada@Example.ORG","vatId":null},"lines":[{"sku":"wid-001","qty":2,"unitCents":999},{"sku":"GAD-002","qty":1,"unitCents":1500}],"declared":{"netCents":3498,"vatCents":509,"grossCents":4007}}"""^^rdf:JSON """{"orderId":"A200","shipTo":{"country":"US"},"customer":{"email":"bob@example.org","vatId":null},"lines":[{"sku":"WID-001","qty":2,"unitCents":999},{"sku":"GAD-002","qty":1,"unitCents":1500}],"declared":{"netCents":3498,"vatCents":0,"grossCents":3498}}"""^^rdf:JSON """{"orderId":"A300","shipTo":{"country":"NL"},"customer":{"email":"acct@company.nl","vatId":"NL999999999B01"},"lines":[{"sku":"WID-001","qty":2,"unitCents":999},{"sku":"GAD-002","qty":1,"unitCents":1500}],"declared":{"netCents":3498,"vatCents":0,"grossCents":3498}}"""^^rdf:JSON """{"orderId":"A301","shipTo":{"country":"NL"},"customer":{"email":"billing@company.nl","vatId":"NL999999999B01"},"lines":[{"sku":"WID-001","qty":2,"unitCents":999},{"sku":"GAD-002","qty":1,"unitCents":1500}],"declared":{"netCents":3498,"vatCents":0,"grossCents":3498}}"""^^rdf:JSON """{"orderId":"A400","shipTo":{"country":"BE"},"customer":{"email":"ada@other.example","vatId":null},"lines":[{"sku":"WID-001","qty":2,"unitCents":999},{"sku":"GAD-002","qty":1,"unitCents":1500}],"declared":{"netCents":3498,"vatCents":508,"grossCents":4006}}"""^^rdf:JSON) list:iterate (3 """{"orderId":"A301","shipTo":{"country":"NL"},"customer":{"email":"billing@company.nl","vatId":"NL999999999B01"},"lines":[{"sku":"WID-001","qty":2,"unitCents":999},{"sku":"GAD-002","qty":1,"unitCents":1500}],"declared":{"netCents":3498,"vatCents":0,"grossCents":3498}}"""^^rdf:JSON) .
#   ("""{"orderId":"A301","shipTo":{"country":"NL"},"customer":{"email":"billing@company.nl","vatId":"NL999999999B01"},"lines":[{"sku":"WID-001","qty":2,"unitCents":999},{"sku":"GAD-002","qty":1,"unitCents":1500}],"declared":{"netCents":3498,"vatCents":0,"grossCents":3498}}"""^^rdf:JSON "/orderId") string:jsonPointer "A301" .
#   ("urn:example:order:%s" "A301") string:format "urn:example:order:A301" .
#   <urn:example:order:A301> log:uri "urn:example:order:A301" .
#   ("""{"orderId":"A301","shipTo":{"country":"NL"},"customer":{"email":"billing@company.nl","vatId":"NL999999999B01"},"lines":[{"sku":"WID-001","qty":2,"unitCents":999},{"sku":"GAD-002","qty":1,"unitCents":1500}],"declared":{"netCents":3498,"vatCents":0,"grossCents":3498}}"""^^rdf:JSON "/lines") string:jsonPointer ("""{"sku":"WID-001","qty":2,"unitCents":999}"""^^rdf:JSON """{"sku":"GAD-002","qty":1,"unitCents":1500}"""^^rdf:JSON) .
#   ("""{"sku":"WID-001","qty":2,"unitCents":999}"""^^rdf:JSON """{"sku":"GAD-002","qty":1,"unitCents":1500}"""^^rdf:JSON) list:iterate (0 """{"sku":"WID-001","qty":2,"unitCents":999}"""^^rdf:JSON) .
#   ("""{"sku":"WID-001","qty":2,"unitCents":999}"""^^rdf:JSON "/sku") string:jsonPointer "WID-001" .
#   ("""{"sku":"WID-001","qty":2,"unitCents":999}"""^^rdf:JSON "/qty") string:jsonPointer 2 .
#   ("""{"sku":"WID-001","qty":2,"unitCents":999}"""^^rdf:JSON "/unitCents") string:jsonPointer 999 .
#   ex:Widget a ex:Product .
#   ex:Widget ex:sku "WID-001" .
#   (2 999) math:product 1998 .
#   ("urn:example:order:%s#line:%s" "A301" 0) string:format "urn:example:order:A301#line:0" .
#   <urn:example:order:A301#line:0> log:uri "urn:example:order:A301#line:0" .
#   "WID-001" string:equalIgnoringCase "WID-001" .
# via the schematic forward rule:
#   {
#     ex:feed ex:json ?J .
#     (?J "/orders") string:jsonPointer ?Orders .
#     ?Orders list:iterate (?OrderIndex ?OrderJson) .
#     (?OrderJson "/orderId") string:jsonPointer ?OrderId .
#     ("urn:example:order:%s" ?OrderId) string:format ?OrderUriStr .
#     ?Order log:uri ?OrderUriStr .
#     (?OrderJson "/lines") string:jsonPointer ?Lines .
#     ?Lines list:iterate (?LineIndex ?LineJson) .
#     (?LineJson "/sku") string:jsonPointer ?SkuJson .
#     (?LineJson "/qty") string:jsonPointer ?Qty .
#     (?LineJson "/unitCents") string:jsonPointer ?UnitCents .
#     ?Product a ex:Product .
#     ?Product ex:sku ?SkuCat .
#     (?Qty ?UnitCents) math:product ?NetCents .
#     ("urn:example:order:%s#line:%s" ?OrderId ?LineIndex) string:format ?LineUriStr .
#     ?Line log:uri ?LineUriStr .
#     ?SkuJson string:equalIgnoringCase ?SkuCat .
#   } => {
#     ?Order ex:line ?Line .
#     ?Line a ex:OrderLine .
#     ?Line ex:lineIndex ?LineIndex .
#     ?Line ex:product ?Product .
#     ?Line ex:sku ?SkuCat .
#     ?Line ex:qty ?Qty .
#     ?Line ex:unitCents ?UnitCents .
#     ?Line ex:netCents ?NetCents .
#   } .
# with substitution (on rule variables):
#   ?J = """{
#     "meta~data": { "batch": "2025-12-18" },
#     "orders": [
#     {
#     "orderId": "A100",
#     "shipTo": { "country": "BE" },
#     "customer": { "email": "Ada@Example.ORG", "vatId": null },
#     "lines": [
#     { "sku": "wid-001", "qty": 2, "unitCents": 999 },
#     { "sku": "GAD-002", "qty": 1, "unitCents": 1500 }
#     ],
#     "declared": { "netCents": 3498, "vatCents": 509, "grossCents": 4007 }
#     },
#     {
#     "orderId": "A200",
#     "shipTo": { "country": "US" },
#     "customer": { "email": "bob@example.org", "vatId": null },
#     "lines": [
#     { "sku": "WID-001", "qty": 2, "unitCents": 999 },
#     { "sku": "GAD-002", "qty": 1, "unitCents": 1500 }
#     ],
#     "declared": { "netCents": 3498, "vatCents": 0, "grossCents": 3498 }
#     },
#     {
#     "orderId": "A300",
#     "shipTo": { "country": "NL" },
#     "customer": { "email": "acct@company.nl", "vatId": "NL999999999B01" },
#     "lines": [
#     { "sku": "WID-001", "qty": 2, "unitCents": 999 },
#     { "sku": "GAD-002", "qty": 1, "unitCents": 1500 }
#     ],
#     "declared": { "netCents": 3498, "vatCents": 0, "grossCents": 3498 }
#     },
#     {
#     "orderId": "A301",
#     "shipTo": { "country": "NL" },
#     "customer": { "email": "billing@company.nl", "vatId": "NL999999999B01" },
#     "lines": [
#     { "sku": "WID-001", "qty": 2, "unitCents": 999 },
#     { "sku": "GAD-002", "qty": 1, "unitCents": 1500 }
#     ],
#     "declared": { "netCents": 3498, "vatCents": 0, "grossCents": 3498 }
#     },
#     {
#     "orderId": "A400",
#     "shipTo": { "country": "BE" },
#     "customer": { "email": "ada@other.example", "vatId": null },
#     "lines": [
#     { "sku": "WID-001", "qty": 2, "unitCents": 999 },
#     { "sku": "GAD-002", "qty": 1, "unitCents": 1500 }
#     ],
#     "declared": { "netCents": 3498, "vatCents": 508, "grossCents": 4006 }
#     }
#     ]
#   }"""^^rdf:JSON
#   ?Line = <urn:example:order:A301#line:0>
#   ?LineIndex = 0
#   ?LineJson = """{"sku":"WID-001","qty":2,"unitCents":999}"""^^rdf:JSON
#   ?LineUriStr = "urn:example:order:A301#line:0"
#   ?Lines = ("""{"sku":"WID-001","qty":2,"unitCents":999}"""^^rdf:JSON """{"sku":"GAD-002","qty":1,"unitCents":1500}"""^^rdf:JSON)
#   ?NetCents = 1998
#   ?Order = <urn:example:order:A301>
#   ?OrderId = "A301"
#   ?OrderIndex = 3
#   ?OrderJson = """{"orderId":"A301","shipTo":{"country":"NL"},"customer":{"email":"billing@company.nl","vatId":"NL999999999B01"},"lines":[{"sku":"WID-001","qty":2,"unitCents":999},{"sku":"GAD-002","qty":1,"unitCents":1500}],"declared":{"netCents":3498,"vatCents":0,"grossCents":3498}}"""^^rdf:JSON
#   ?OrderUriStr = "urn:example:order:A301"
#   ?Orders = ("""{"orderId":"A100","shipTo":{"country":"BE"},"customer":{"email":"Ada@Example.ORG","vatId":null},"lines":[{"sku":"wid-001","qty":2,"unitCents":999},{"sku":"GAD-002","qty":1,"unitCents":1500}],"declared":{"netCents":3498,"vatCents":509,"grossCents":4007}}"""^^rdf:JSON """{"orderId":"A200","shipTo":{"country":"US"},"customer":{"email":"bob@example.org","vatId":null},"lines":[{"sku":"WID-001","qty":2,"unitCents":999},{"sku":"GAD-002","qty":1,"unitCents":1500}],"declared":{"netCents":3498,"vatCents":0,"grossCents":3498}}"""^^rdf:JSON """{"orderId":"A300","shipTo":{"country":"NL"},"customer":{"email":"acct@company.nl","vatId":"NL999999999B01"},"lines":[{"sku":"WID-001","qty":2,"unitCents":999},{"sku":"GAD-002","qty":1,"unitCents":1500}],"declared":{"netCents":3498,"vatCents":0,"grossCents":3498}}"""^^rdf:JSON """{"orderId":"A301","shipTo":{"country":"NL"},"customer":{"email":"billing@company.nl","vatId":"NL999999999B01"},"lines":[{"sku":"WID-001","qty":2,"unitCents":999},{"sku":"GAD-002","qty":1,"unitCents":1500}],"declared":{"netCents":3498,"vatCents":0,"grossCents":3498}}"""^^rdf:JSON """{"orderId":"A400","shipTo":{"country":"BE"},"customer":{"email":"ada@other.example","vatId":null},"lines":[{"sku":"WID-001","qty":2,"unitCents":999},{"sku":"GAD-002","qty":1,"unitCents":1500}],"declared":{"netCents":3498,"vatCents":508,"grossCents":4006}}"""^^rdf:JSON)
#   ?Product = ex:Widget
#   ?Qty = 2
#   ?SkuCat = "WID-001"
#   ?SkuJson = "WID-001"
#   ?UnitCents = 999
# Therefore the derived triple above is entailed by the rules and facts.
# ----------------------------------------------------------------------

<urn:example:order:A301#line:0> a ex:OrderLine .

# ----------------------------------------------------------------------
# Proof for derived triple:
#   <urn:example:order:A301#line:0> ex:lineIndex 0 .
# It holds because the following instance of the rule body is provable:
#   ex:feed ex:json """{
#     "meta~data": { "batch": "2025-12-18" },
#     "orders": [
#       {
#         "orderId": "A100",
#         "shipTo": { "country": "BE" },
#         "customer": { "email": "Ada@Example.ORG", "vatId": null },
#         "lines": [
#           { "sku": "wid-001", "qty": 2, "unitCents": 999 },
#           { "sku": "GAD-002", "qty": 1, "unitCents": 1500 }
#         ],
#         "declared": { "netCents": 3498, "vatCents": 509, "grossCents": 4007 }
#       },
#       {
#         "orderId": "A200",
#         "shipTo": { "country": "US" },
#         "customer": { "email": "bob@example.org", "vatId": null },
#         "lines": [
#           { "sku": "WID-001", "qty": 2, "unitCents": 999 },
#           { "sku": "GAD-002", "qty": 1, "unitCents": 1500 }
#         ],
#         "declared": { "netCents": 3498, "vatCents": 0, "grossCents": 3498 }
#       },
#       {
#         "orderId": "A300",
#         "shipTo": { "country": "NL" },
#         "customer": { "email": "acct@company.nl", "vatId": "NL999999999B01" },
#         "lines": [
#           { "sku": "WID-001", "qty": 2, "unitCents": 999 },
#           { "sku": "GAD-002", "qty": 1, "unitCents": 1500 }
#         ],
#         "declared": { "netCents": 3498, "vatCents": 0, "grossCents": 3498 }
#       },
#       {
#         "orderId": "A301",
#         "shipTo": { "country": "NL" },
#         "customer": { "email": "billing@company.nl", "vatId": "NL999999999B01" },
#         "lines": [
#           { "sku": "WID-001", "qty": 2, "unitCents": 999 },
#           { "sku": "GAD-002", "qty": 1, "unitCents": 1500 }
#         ],
#         "declared": { "netCents": 3498, "vatCents": 0, "grossCents": 3498 }
#       },
#       {
#         "orderId": "A400",
#         "shipTo": { "country": "BE" },
#         "customer": { "email": "ada@other.example", "vatId": null },
#         "lines": [
#           { "sku": "WID-001", "qty": 2, "unitCents": 999 },
#           { "sku": "GAD-002", "qty": 1, "unitCents": 1500 }
#         ],
#         "declared": { "netCents": 3498, "vatCents": 508, "grossCents": 4006 }
#       }
#     ]
#   }"""^^rdf:JSON .
#   ("""{
#     "meta~data": { "batch": "2025-12-18" },
#     "orders": [
#       {
#         "orderId": "A100",
#         "shipTo": { "country": "BE" },
#         "customer": { "email": "Ada@Example.ORG", "vatId": null },
#         "lines": [
#           { "sku": "wid-001", "qty": 2, "unitCents": 999 },
#           { "sku": "GAD-002", "qty": 1, "unitCents": 1500 }
#         ],
#         "declared": { "netCents": 3498, "vatCents": 509, "grossCents": 4007 }
#       },
#       {
#         "orderId": "A200",
#         "shipTo": { "country": "US" },
#         "customer": { "email": "bob@example.org", "vatId": null },
#         "lines": [
#           { "sku": "WID-001", "qty": 2, "unitCents": 999 },
#           { "sku": "GAD-002", "qty": 1, "unitCents": 1500 }
#         ],
#         "declared": { "netCents": 3498, "vatCents": 0, "grossCents": 3498 }
#       },
#       {
#         "orderId": "A300",
#         "shipTo": { "country": "NL" },
#         "customer": { "email": "acct@company.nl", "vatId": "NL999999999B01" },
#         "lines": [
#           { "sku": "WID-001", "qty": 2, "unitCents": 999 },
#           { "sku": "GAD-002", "qty": 1, "unitCents": 1500 }
#         ],
#         "declared": { "netCents": 3498, "vatCents": 0, "grossCents": 3498 }
#       },
#       {
#         "orderId": "A301",
#         "shipTo": { "country": "NL" },
#         "customer": { "email": "billing@company.nl", "vatId": "NL999999999B01" },
#         "lines": [
#           { "sku": "WID-001", "qty": 2, "unitCents": 999 },
#           { "sku": "GAD-002", "qty": 1, "unitCents": 1500 }
#         ],
#         "declared": { "netCents": 3498, "vatCents": 0, "grossCents": 3498 }
#       },
#       {
#         "orderId": "A400",
#         "shipTo": { "country": "BE" },
#         "customer": { "email": "ada@other.example", "vatId": null },
#         "lines": [
#           { "sku": "WID-001", "qty": 2, "unitCents": 999 },
#           { "sku": "GAD-002", "qty": 1, "unitCents": 1500 }
#         ],
#         "declared": { "netCents": 3498, "vatCents": 508, "grossCents": 4006 }
#       }
#     ]
#   }"""^^rdf:JSON "/orders") string:jsonPointer ("""{"orderId":"A100","shipTo":{"country":"BE"},"customer":{"email":"Ada@Example.ORG","vatId":null},"lines":[{"sku":"wid-001","qty":2,"unitCents":999},{"sku":"GAD-002","qty":1,"unitCents":1500}],"declared":{"netCents":3498,"vatCents":509,"grossCents":4007}}"""^^rdf:JSON """{"orderId":"A200","shipTo":{"country":"US"},"customer":{"email":"bob@example.org","vatId":null},"lines":[{"sku":"WID-001","qty":2,"unitCents":999},{"sku":"GAD-002","qty":1,"unitCents":1500}],"declared":{"netCents":3498,"vatCents":0,"grossCents":3498}}"""^^rdf:JSON """{"orderId":"A300","shipTo":{"country":"NL"},"customer":{"email":"acct@company.nl","vatId":"NL999999999B01"},"lines":[{"sku":"WID-001","qty":2,"unitCents":999},{"sku":"GAD-002","qty":1,"unitCents":1500}],"declared":{"netCents":3498,"vatCents":0,"grossCents":3498}}"""^^rdf:JSON """{"orderId":"A301","shipTo":{"country":"NL"},"customer":{"email":"billing@company.nl","vatId":"NL999999999B01"},"lines":[{"sku":"WID-001","qty":2,"unitCents":999},{"sku":"GAD-002","qty":1,"unitCents":1500}],"declared":{"netCents":3498,"vatCents":0,"grossCents":3498}}"""^^rdf:JSON """{"orderId":"A400","shipTo":{"country":"BE"},"customer":{"email":"ada@other.example","vatId":null},"lines":[{"sku":"WID-001","qty":2,"unitCents":999},{"sku":"GAD-002","qty":1,"unitCents":1500}],"declared":{"netCents":3498,"vatCents":508,"grossCents":4006}}"""^^rdf:JSON) .
#   ("""{"orderId":"A100","shipTo":{"country":"BE"},"customer":{"email":"Ada@Example.ORG","vatId":null},"lines":[{"sku":"wid-001","qty":2,"unitCents":999},{"sku":"GAD-002","qty":1,"unitCents":1500}],"declared":{"netCents":3498,"vatCents":509,"grossCents":4007}}"""^^rdf:JSON """{"orderId":"A200","shipTo":{"country":"US"},"customer":{"email":"bob@example.org","vatId":null},"lines":[{"sku":"WID-001","qty":2,"unitCents":999},{"sku":"GAD-002","qty":1,"unitCents":1500}],"declared":{"netCents":3498,"vatCents":0,"grossCents":3498}}"""^^rdf:JSON """{"orderId":"A300","shipTo":{"country":"NL"},"customer":{"email":"acct@company.nl","vatId":"NL999999999B01"},"lines":[{"sku":"WID-001","qty":2,"unitCents":999},{"sku":"GAD-002","qty":1,"unitCents":1500}],"declared":{"netCents":3498,"vatCents":0,"grossCents":3498}}"""^^rdf:JSON """{"orderId":"A301","shipTo":{"country":"NL"},"customer":{"email":"billing@company.nl","vatId":"NL999999999B01"},"lines":[{"sku":"WID-001","qty":2,"unitCents":999},{"sku":"GAD-002","qty":1,"unitCents":1500}],"declared":{"netCents":3498,"vatCents":0,"grossCents":3498}}"""^^rdf:JSON """{"orderId":"A400","shipTo":{"country":"BE"},"customer":{"email":"ada@other.example","vatId":null},"lines":[{"sku":"WID-001","qty":2,"unitCents":999},{"sku":"GAD-002","qty":1,"unitCents":1500}],"declared":{"netCents":3498,"vatCents":508,"grossCents":4006}}"""^^rdf:JSON) list:iterate (3 """{"orderId":"A301","shipTo":{"country":"NL"},"customer":{"email":"billing@company.nl","vatId":"NL999999999B01"},"lines":[{"sku":"WID-001","qty":2,"unitCents":999},{"sku":"GAD-002","qty":1,"unitCents":1500}],"declared":{"netCents":3498,"vatCents":0,"grossCents":3498}}"""^^rdf:JSON) .
#   ("""{"orderId":"A301","shipTo":{"country":"NL"},"customer":{"email":"billing@company.nl","vatId":"NL999999999B01"},"lines":[{"sku":"WID-001","qty":2,"unitCents":999},{"sku":"GAD-002","qty":1,"unitCents":1500}],"declared":{"netCents":3498,"vatCents":0,"grossCents":3498}}"""^^rdf:JSON "/orderId") string:jsonPointer "A301" .
#   ("urn:example:order:%s" "A301") string:format "urn:example:order:A301" .
#   <urn:example:order:A301> log:uri "urn:example:order:A301" .
#   ("""{"orderId":"A301","shipTo":{"country":"NL"},"customer":{"email":"billing@company.nl","vatId":"NL999999999B01"},"lines":[{"sku":"WID-001","qty":2,"unitCents":999},{"sku":"GAD-002","qty":1,"unitCents":1500}],"declared":{"netCents":3498,"vatCents":0,"grossCents":3498}}"""^^rdf:JSON "/lines") string:jsonPointer ("""{"sku":"WID-001","qty":2,"unitCents":999}"""^^rdf:JSON """{"sku":"GAD-002","qty":1,"unitCents":1500}"""^^rdf:JSON) .
#   ("""{"sku":"WID-001","qty":2,"unitCents":999}"""^^rdf:JSON """{"sku":"GAD-002","qty":1,"unitCents":1500}"""^^rdf:JSON) list:iterate (0 """{"sku":"WID-001","qty":2,"unitCents":999}"""^^rdf:JSON) .
#   ("""{"sku":"WID-001","qty":2,"unitCents":999}"""^^rdf:JSON "/sku") string:jsonPointer "WID-001" .
#   ("""{"sku":"WID-001","qty":2,"unitCents":999}"""^^rdf:JSON "/qty") string:jsonPointer 2 .
#   ("""{"sku":"WID-001","qty":2,"unitCents":999}"""^^rdf:JSON "/unitCents") string:jsonPointer 999 .
#   ex:Widget a ex:Product .
#   ex:Widget ex:sku "WID-001" .
#   (2 999) math:product 1998 .
#   ("urn:example:order:%s#line:%s" "A301" 0) string:format "urn:example:order:A301#line:0" .
#   <urn:example:order:A301#line:0> log:uri "urn:example:order:A301#line:0" .
#   "WID-001" string:equalIgnoringCase "WID-001" .
# via the schematic forward rule:
#   {
#     ex:feed ex:json ?J .
#     (?J "/orders") string:jsonPointer ?Orders .
#     ?Orders list:iterate (?OrderIndex ?OrderJson) .
#     (?OrderJson "/orderId") string:jsonPointer ?OrderId .
#     ("urn:example:order:%s" ?OrderId) string:format ?OrderUriStr .
#     ?Order log:uri ?OrderUriStr .
#     (?OrderJson "/lines") string:jsonPointer ?Lines .
#     ?Lines list:iterate (?LineIndex ?LineJson) .
#     (?LineJson "/sku") string:jsonPointer ?SkuJson .
#     (?LineJson "/qty") string:jsonPointer ?Qty .
#     (?LineJson "/unitCents") string:jsonPointer ?UnitCents .
#     ?Product a ex:Product .
#     ?Product ex:sku ?SkuCat .
#     (?Qty ?UnitCents) math:product ?NetCents .
#     ("urn:example:order:%s#line:%s" ?OrderId ?LineIndex) string:format ?LineUriStr .
#     ?Line log:uri ?LineUriStr .
#     ?SkuJson string:equalIgnoringCase ?SkuCat .
#   } => {
#     ?Order ex:line ?Line .
#     ?Line a ex:OrderLine .
#     ?Line ex:lineIndex ?LineIndex .
#     ?Line ex:product ?Product .
#     ?Line ex:sku ?SkuCat .
#     ?Line ex:qty ?Qty .
#     ?Line ex:unitCents ?UnitCents .
#     ?Line ex:netCents ?NetCents .
#   } .
# with substitution (on rule variables):
#   ?J = """{
#     "meta~data": { "batch": "2025-12-18" },
#     "orders": [
#     {
#     "orderId": "A100",
#     "shipTo": { "country": "BE" },
#     "customer": { "email": "Ada@Example.ORG", "vatId": null },
#     "lines": [
#     { "sku": "wid-001", "qty": 2, "unitCents": 999 },
#     { "sku": "GAD-002", "qty": 1, "unitCents": 1500 }
#     ],
#     "declared": { "netCents": 3498, "vatCents": 509, "grossCents": 4007 }
#     },
#     {
#     "orderId": "A200",
#     "shipTo": { "country": "US" },
#     "customer": { "email": "bob@example.org", "vatId": null },
#     "lines": [
#     { "sku": "WID-001", "qty": 2, "unitCents": 999 },
#     { "sku": "GAD-002", "qty": 1, "unitCents": 1500 }
#     ],
#     "declared": { "netCents": 3498, "vatCents": 0, "grossCents": 3498 }
#     },
#     {
#     "orderId": "A300",
#     "shipTo": { "country": "NL" },
#     "customer": { "email": "acct@company.nl", "vatId": "NL999999999B01" },
#     "lines": [
#     { "sku": "WID-001", "qty": 2, "unitCents": 999 },
#     { "sku": "GAD-002", "qty": 1, "unitCents": 1500 }
#     ],
#     "declared": { "netCents": 3498, "vatCents": 0, "grossCents": 3498 }
#     },
#     {
#     "orderId": "A301",
#     "shipTo": { "country": "NL" },
#     "customer": { "email": "billing@company.nl", "vatId": "NL999999999B01" },
#     "lines": [
#     { "sku": "WID-001", "qty": 2, "unitCents": 999 },
#     { "sku": "GAD-002", "qty": 1, "unitCents": 1500 }
#     ],
#     "declared": { "netCents": 3498, "vatCents": 0, "grossCents": 3498 }
#     },
#     {
#     "orderId": "A400",
#     "shipTo": { "country": "BE" },
#     "customer": { "email": "ada@other.example", "vatId": null },
#     "lines": [
#     { "sku": "WID-001", "qty": 2, "unitCents": 999 },
#     { "sku": "GAD-002", "qty": 1, "unitCents": 1500 }
#     ],
#     "declared": { "netCents": 3498, "vatCents": 508, "grossCents": 4006 }
#     }
#     ]
#   }"""^^rdf:JSON
#   ?Line = <urn:example:order:A301#line:0>
#   ?LineIndex = 0
#   ?LineJson = """{"sku":"WID-001","qty":2,"unitCents":999}"""^^rdf:JSON
#   ?LineUriStr = "urn:example:order:A301#line:0"
#   ?Lines = ("""{"sku":"WID-001","qty":2,"unitCents":999}"""^^rdf:JSON """{"sku":"GAD-002","qty":1,"unitCents":1500}"""^^rdf:JSON)
#   ?NetCents = 1998
#   ?Order = <urn:example:order:A301>
#   ?OrderId = "A301"
#   ?OrderIndex = 3
#   ?OrderJson = """{"orderId":"A301","shipTo":{"country":"NL"},"customer":{"email":"billing@company.nl","vatId":"NL999999999B01"},"lines":[{"sku":"WID-001","qty":2,"unitCents":999},{"sku":"GAD-002","qty":1,"unitCents":1500}],"declared":{"netCents":3498,"vatCents":0,"grossCents":3498}}"""^^rdf:JSON
#   ?OrderUriStr = "urn:example:order:A301"
#   ?Orders = ("""{"orderId":"A100","shipTo":{"country":"BE"},"customer":{"email":"Ada@Example.ORG","vatId":null},"lines":[{"sku":"wid-001","qty":2,"unitCents":999},{"sku":"GAD-002","qty":1,"unitCents":1500}],"declared":{"netCents":3498,"vatCents":509,"grossCents":4007}}"""^^rdf:JSON """{"orderId":"A200","shipTo":{"country":"US"},"customer":{"email":"bob@example.org","vatId":null},"lines":[{"sku":"WID-001","qty":2,"unitCents":999},{"sku":"GAD-002","qty":1,"unitCents":1500}],"declared":{"netCents":3498,"vatCents":0,"grossCents":3498}}"""^^rdf:JSON """{"orderId":"A300","shipTo":{"country":"NL"},"customer":{"email":"acct@company.nl","vatId":"NL999999999B01"},"lines":[{"sku":"WID-001","qty":2,"unitCents":999},{"sku":"GAD-002","qty":1,"unitCents":1500}],"declared":{"netCents":3498,"vatCents":0,"grossCents":3498}}"""^^rdf:JSON """{"orderId":"A301","shipTo":{"country":"NL"},"customer":{"email":"billing@company.nl","vatId":"NL999999999B01"},"lines":[{"sku":"WID-001","qty":2,"unitCents":999},{"sku":"GAD-002","qty":1,"unitCents":1500}],"declared":{"netCents":3498,"vatCents":0,"grossCents":3498}}"""^^rdf:JSON """{"orderId":"A400","shipTo":{"country":"BE"},"customer":{"email":"ada@other.example","vatId":null},"lines":[{"sku":"WID-001","qty":2,"unitCents":999},{"sku":"GAD-002","qty":1,"unitCents":1500}],"declared":{"netCents":3498,"vatCents":508,"grossCents":4006}}"""^^rdf:JSON)
#   ?Product = ex:Widget
#   ?Qty = 2
#   ?SkuCat = "WID-001"
#   ?SkuJson = "WID-001"
#   ?UnitCents = 999
# Therefore the derived triple above is entailed by the rules and facts.
# ----------------------------------------------------------------------

<urn:example:order:A301#line:0> ex:lineIndex 0 .

# ----------------------------------------------------------------------
# Proof for derived triple:
#   <urn:example:order:A301#line:0> ex:product ex:Widget .
# It holds because the following instance of the rule body is provable:
#   ex:feed ex:json """{
#     "meta~data": { "batch": "2025-12-18" },
#     "orders": [
#       {
#         "orderId": "A100",
#         "shipTo": { "country": "BE" },
#         "customer": { "email": "Ada@Example.ORG", "vatId": null },
#         "lines": [
#           { "sku": "wid-001", "qty": 2, "unitCents": 999 },
#           { "sku": "GAD-002", "qty": 1, "unitCents": 1500 }
#         ],
#         "declared": { "netCents": 3498, "vatCents": 509, "grossCents": 4007 }
#       },
#       {
#         "orderId": "A200",
#         "shipTo": { "country": "US" },
#         "customer": { "email": "bob@example.org", "vatId": null },
#         "lines": [
#           { "sku": "WID-001", "qty": 2, "unitCents": 999 },
#           { "sku": "GAD-002", "qty": 1, "unitCents": 1500 }
#         ],
#         "declared": { "netCents": 3498, "vatCents": 0, "grossCents": 3498 }
#       },
#       {
#         "orderId": "A300",
#         "shipTo": { "country": "NL" },
#         "customer": { "email": "acct@company.nl", "vatId": "NL999999999B01" },
#         "lines": [
#           { "sku": "WID-001", "qty": 2, "unitCents": 999 },
#           { "sku": "GAD-002", "qty": 1, "unitCents": 1500 }
#         ],
#         "declared": { "netCents": 3498, "vatCents": 0, "grossCents": 3498 }
#       },
#       {
#         "orderId": "A301",
#         "shipTo": { "country": "NL" },
#         "customer": { "email": "billing@company.nl", "vatId": "NL999999999B01" },
#         "lines": [
#           { "sku": "WID-001", "qty": 2, "unitCents": 999 },
#           { "sku": "GAD-002", "qty": 1, "unitCents": 1500 }
#         ],
#         "declared": { "netCents": 3498, "vatCents": 0, "grossCents": 3498 }
#       },
#       {
#         "orderId": "A400",
#         "shipTo": { "country": "BE" },
#         "customer": { "email": "ada@other.example", "vatId": null },
#         "lines": [
#           { "sku": "WID-001", "qty": 2, "unitCents": 999 },
#           { "sku": "GAD-002", "qty": 1, "unitCents": 1500 }
#         ],
#         "declared": { "netCents": 3498, "vatCents": 508, "grossCents": 4006 }
#       }
#     ]
#   }"""^^rdf:JSON .
#   ("""{
#     "meta~data": { "batch": "2025-12-18" },
#     "orders": [
#       {
#         "orderId": "A100",
#         "shipTo": { "country": "BE" },
#         "customer": { "email": "Ada@Example.ORG", "vatId": null },
#         "lines": [
#           { "sku": "wid-001", "qty": 2, "unitCents": 999 },
#           { "sku": "GAD-002", "qty": 1, "unitCents": 1500 }
#         ],
#         "declared": { "netCents": 3498, "vatCents": 509, "grossCents": 4007 }
#       },
#       {
#         "orderId": "A200",
#         "shipTo": { "country": "US" },
#         "customer": { "email": "bob@example.org", "vatId": null },
#         "lines": [
#           { "sku": "WID-001", "qty": 2, "unitCents": 999 },
#           { "sku": "GAD-002", "qty": 1, "unitCents": 1500 }
#         ],
#         "declared": { "netCents": 3498, "vatCents": 0, "grossCents": 3498 }
#       },
#       {
#         "orderId": "A300",
#         "shipTo": { "country": "NL" },
#         "customer": { "email": "acct@company.nl", "vatId": "NL999999999B01" },
#         "lines": [
#           { "sku": "WID-001", "qty": 2, "unitCents": 999 },
#           { "sku": "GAD-002", "qty": 1, "unitCents": 1500 }
#         ],
#         "declared": { "netCents": 3498, "vatCents": 0, "grossCents": 3498 }
#       },
#       {
#         "orderId": "A301",
#         "shipTo": { "country": "NL" },
#         "customer": { "email": "billing@company.nl", "vatId": "NL999999999B01" },
#         "lines": [
#           { "sku": "WID-001", "qty": 2, "unitCents": 999 },
#           { "sku": "GAD-002", "qty": 1, "unitCents": 1500 }
#         ],
#         "declared": { "netCents": 3498, "vatCents": 0, "grossCents": 3498 }
#       },
#       {
#         "orderId": "A400",
#         "shipTo": { "country": "BE" },
#         "customer": { "email": "ada@other.example", "vatId": null },
#         "lines": [
#           { "sku": "WID-001", "qty": 2, "unitCents": 999 },
#           { "sku": "GAD-002", "qty": 1, "unitCents": 1500 }
#         ],
#         "declared": { "netCents": 3498, "vatCents": 508, "grossCents": 4006 }
#       }
#     ]
#   }"""^^rdf:JSON "/orders") string:jsonPointer ("""{"orderId":"A100","shipTo":{"country":"BE"},"customer":{"email":"Ada@Example.ORG","vatId":null},"lines":[{"sku":"wid-001","qty":2,"unitCents":999},{"sku":"GAD-002","qty":1,"unitCents":1500}],"declared":{"netCents":3498,"vatCents":509,"grossCents":4007}}"""^^rdf:JSON """{"orderId":"A200","shipTo":{"country":"US"},"customer":{"email":"bob@example.org","vatId":null},"lines":[{"sku":"WID-001","qty":2,"unitCents":999},{"sku":"GAD-002","qty":1,"unitCents":1500}],"declared":{"netCents":3498,"vatCents":0,"grossCents":3498}}"""^^rdf:JSON """{"orderId":"A300","shipTo":{"country":"NL"},"customer":{"email":"acct@company.nl","vatId":"NL999999999B01"},"lines":[{"sku":"WID-001","qty":2,"unitCents":999},{"sku":"GAD-002","qty":1,"unitCents":1500}],"declared":{"netCents":3498,"vatCents":0,"grossCents":3498}}"""^^rdf:JSON """{"orderId":"A301","shipTo":{"country":"NL"},"customer":{"email":"billing@company.nl","vatId":"NL999999999B01"},"lines":[{"sku":"WID-001","qty":2,"unitCents":999},{"sku":"GAD-002","qty":1,"unitCents":1500}],"declared":{"netCents":3498,"vatCents":0,"grossCents":3498}}"""^^rdf:JSON """{"orderId":"A400","shipTo":{"country":"BE"},"customer":{"email":"ada@other.example","vatId":null},"lines":[{"sku":"WID-001","qty":2,"unitCents":999},{"sku":"GAD-002","qty":1,"unitCents":1500}],"declared":{"netCents":3498,"vatCents":508,"grossCents":4006}}"""^^rdf:JSON) .
#   ("""{"orderId":"A100","shipTo":{"country":"BE"},"customer":{"email":"Ada@Example.ORG","vatId":null},"lines":[{"sku":"wid-001","qty":2,"unitCents":999},{"sku":"GAD-002","qty":1,"unitCents":1500}],"declared":{"netCents":3498,"vatCents":509,"grossCents":4007}}"""^^rdf:JSON """{"orderId":"A200","shipTo":{"country":"US"},"customer":{"email":"bob@example.org","vatId":null},"lines":[{"sku":"WID-001","qty":2,"unitCents":999},{"sku":"GAD-002","qty":1,"unitCents":1500}],"declared":{"netCents":3498,"vatCents":0,"grossCents":3498}}"""^^rdf:JSON """{"orderId":"A300","shipTo":{"country":"NL"},"customer":{"email":"acct@company.nl","vatId":"NL999999999B01"},"lines":[{"sku":"WID-001","qty":2,"unitCents":999},{"sku":"GAD-002","qty":1,"unitCents":1500}],"declared":{"netCents":3498,"vatCents":0,"grossCents":3498}}"""^^rdf:JSON """{"orderId":"A301","shipTo":{"country":"NL"},"customer":{"email":"billing@company.nl","vatId":"NL999999999B01"},"lines":[{"sku":"WID-001","qty":2,"unitCents":999},{"sku":"GAD-002","qty":1,"unitCents":1500}],"declared":{"netCents":3498,"vatCents":0,"grossCents":3498}}"""^^rdf:JSON """{"orderId":"A400","shipTo":{"country":"BE"},"customer":{"email":"ada@other.example","vatId":null},"lines":[{"sku":"WID-001","qty":2,"unitCents":999},{"sku":"GAD-002","qty":1,"unitCents":1500}],"declared":{"netCents":3498,"vatCents":508,"grossCents":4006}}"""^^rdf:JSON) list:iterate (3 """{"orderId":"A301","shipTo":{"country":"NL"},"customer":{"email":"billing@company.nl","vatId":"NL999999999B01"},"lines":[{"sku":"WID-001","qty":2,"unitCents":999},{"sku":"GAD-002","qty":1,"unitCents":1500}],"declared":{"netCents":3498,"vatCents":0,"grossCents":3498}}"""^^rdf:JSON) .
#   ("""{"orderId":"A301","shipTo":{"country":"NL"},"customer":{"email":"billing@company.nl","vatId":"NL999999999B01"},"lines":[{"sku":"WID-001","qty":2,"unitCents":999},{"sku":"GAD-002","qty":1,"unitCents":1500}],"declared":{"netCents":3498,"vatCents":0,"grossCents":3498}}"""^^rdf:JSON "/orderId") string:jsonPointer "A301" .
#   ("urn:example:order:%s" "A301") string:format "urn:example:order:A301" .
#   <urn:example:order:A301> log:uri "urn:example:order:A301" .
#   ("""{"orderId":"A301","shipTo":{"country":"NL"},"customer":{"email":"billing@company.nl","vatId":"NL999999999B01"},"lines":[{"sku":"WID-001","qty":2,"unitCents":999},{"sku":"GAD-002","qty":1,"unitCents":1500}],"declared":{"netCents":3498,"vatCents":0,"grossCents":3498}}"""^^rdf:JSON "/lines") string:jsonPointer ("""{"sku":"WID-001","qty":2,"unitCents":999}"""^^rdf:JSON """{"sku":"GAD-002","qty":1,"unitCents":1500}"""^^rdf:JSON) .
#   ("""{"sku":"WID-001","qty":2,"unitCents":999}"""^^rdf:JSON """{"sku":"GAD-002","qty":1,"unitCents":1500}"""^^rdf:JSON) list:iterate (0 """{"sku":"WID-001","qty":2,"unitCents":999}"""^^rdf:JSON) .
#   ("""{"sku":"WID-001","qty":2,"unitCents":999}"""^^rdf:JSON "/sku") string:jsonPointer "WID-001" .
#   ("""{"sku":"WID-001","qty":2,"unitCents":999}"""^^rdf:JSON "/qty") string:jsonPointer 2 .
#   ("""{"sku":"WID-001","qty":2,"unitCents":999}"""^^rdf:JSON "/unitCents") string:jsonPointer 999 .
#   ex:Widget a ex:Product .
#   ex:Widget ex:sku "WID-001" .
#   (2 999) math:product 1998 .
#   ("urn:example:order:%s#line:%s" "A301" 0) string:format "urn:example:order:A301#line:0" .
#   <urn:example:order:A301#line:0> log:uri "urn:example:order:A301#line:0" .
#   "WID-001" string:equalIgnoringCase "WID-001" .
# via the schematic forward rule:
#   {
#     ex:feed ex:json ?J .
#     (?J "/orders") string:jsonPointer ?Orders .
#     ?Orders list:iterate (?OrderIndex ?OrderJson) .
#     (?OrderJson "/orderId") string:jsonPointer ?OrderId .
#     ("urn:example:order:%s" ?OrderId) string:format ?OrderUriStr .
#     ?Order log:uri ?OrderUriStr .
#     (?OrderJson "/lines") string:jsonPointer ?Lines .
#     ?Lines list:iterate (?LineIndex ?LineJson) .
#     (?LineJson "/sku") string:jsonPointer ?SkuJson .
#     (?LineJson "/qty") string:jsonPointer ?Qty .
#     (?LineJson "/unitCents") string:jsonPointer ?UnitCents .
#     ?Product a ex:Product .
#     ?Product ex:sku ?SkuCat .
#     (?Qty ?UnitCents) math:product ?NetCents .
#     ("urn:example:order:%s#line:%s" ?OrderId ?LineIndex) string:format ?LineUriStr .
#     ?Line log:uri ?LineUriStr .
#     ?SkuJson string:equalIgnoringCase ?SkuCat .
#   } => {
#     ?Order ex:line ?Line .
#     ?Line a ex:OrderLine .
#     ?Line ex:lineIndex ?LineIndex .
#     ?Line ex:product ?Product .
#     ?Line ex:sku ?SkuCat .
#     ?Line ex:qty ?Qty .
#     ?Line ex:unitCents ?UnitCents .
#     ?Line ex:netCents ?NetCents .
#   } .
# with substitution (on rule variables):
#   ?J = """{
#     "meta~data": { "batch": "2025-12-18" },
#     "orders": [
#     {
#     "orderId": "A100",
#     "shipTo": { "country": "BE" },
#     "customer": { "email": "Ada@Example.ORG", "vatId": null },
#     "lines": [
#     { "sku": "wid-001", "qty": 2, "unitCents": 999 },
#     { "sku": "GAD-002", "qty": 1, "unitCents": 1500 }
#     ],
#     "declared": { "netCents": 3498, "vatCents": 509, "grossCents": 4007 }
#     },
#     {
#     "orderId": "A200",
#     "shipTo": { "country": "US" },
#     "customer": { "email": "bob@example.org", "vatId": null },
#     "lines": [
#     { "sku": "WID-001", "qty": 2, "unitCents": 999 },
#     { "sku": "GAD-002", "qty": 1, "unitCents": 1500 }
#     ],
#     "declared": { "netCents": 3498, "vatCents": 0, "grossCents": 3498 }
#     },
#     {
#     "orderId": "A300",
#     "shipTo": { "country": "NL" },
#     "customer": { "email": "acct@company.nl", "vatId": "NL999999999B01" },
#     "lines": [
#     { "sku": "WID-001", "qty": 2, "unitCents": 999 },
#     { "sku": "GAD-002", "qty": 1, "unitCents": 1500 }
#     ],
#     "declared": { "netCents": 3498, "vatCents": 0, "grossCents": 3498 }
#     },
#     {
#     "orderId": "A301",
#     "shipTo": { "country": "NL" },
#     "customer": { "email": "billing@company.nl", "vatId": "NL999999999B01" },
#     "lines": [
#     { "sku": "WID-001", "qty": 2, "unitCents": 999 },
#     { "sku": "GAD-002", "qty": 1, "unitCents": 1500 }
#     ],
#     "declared": { "netCents": 3498, "vatCents": 0, "grossCents": 3498 }
#     },
#     {
#     "orderId": "A400",
#     "shipTo": { "country": "BE" },
#     "customer": { "email": "ada@other.example", "vatId": null },
#     "lines": [
#     { "sku": "WID-001", "qty": 2, "unitCents": 999 },
#     { "sku": "GAD-002", "qty": 1, "unitCents": 1500 }
#     ],
#     "declared": { "netCents": 3498, "vatCents": 508, "grossCents": 4006 }
#     }
#     ]
#   }"""^^rdf:JSON
#   ?Line = <urn:example:order:A301#line:0>
#   ?LineIndex = 0
#   ?LineJson = """{"sku":"WID-001","qty":2,"unitCents":999}"""^^rdf:JSON
#   ?LineUriStr = "urn:example:order:A301#line:0"
#   ?Lines = ("""{"sku":"WID-001","qty":2,"unitCents":999}"""^^rdf:JSON """{"sku":"GAD-002","qty":1,"unitCents":1500}"""^^rdf:JSON)
#   ?NetCents = 1998
#   ?Order = <urn:example:order:A301>
#   ?OrderId = "A301"
#   ?OrderIndex = 3
#   ?OrderJson = """{"orderId":"A301","shipTo":{"country":"NL"},"customer":{"email":"billing@company.nl","vatId":"NL999999999B01"},"lines":[{"sku":"WID-001","qty":2,"unitCents":999},{"sku":"GAD-002","qty":1,"unitCents":1500}],"declared":{"netCents":3498,"vatCents":0,"grossCents":3498}}"""^^rdf:JSON
#   ?OrderUriStr = "urn:example:order:A301"
#   ?Orders = ("""{"orderId":"A100","shipTo":{"country":"BE"},"customer":{"email":"Ada@Example.ORG","vatId":null},"lines":[{"sku":"wid-001","qty":2,"unitCents":999},{"sku":"GAD-002","qty":1,"unitCents":1500}],"declared":{"netCents":3498,"vatCents":509,"grossCents":4007}}"""^^rdf:JSON """{"orderId":"A200","shipTo":{"country":"US"},"customer":{"email":"bob@example.org","vatId":null},"lines":[{"sku":"WID-001","qty":2,"unitCents":999},{"sku":"GAD-002","qty":1,"unitCents":1500}],"declared":{"netCents":3498,"vatCents":0,"grossCents":3498}}"""^^rdf:JSON """{"orderId":"A300","shipTo":{"country":"NL"},"customer":{"email":"acct@company.nl","vatId":"NL999999999B01"},"lines":[{"sku":"WID-001","qty":2,"unitCents":999},{"sku":"GAD-002","qty":1,"unitCents":1500}],"declared":{"netCents":3498,"vatCents":0,"grossCents":3498}}"""^^rdf:JSON """{"orderId":"A301","shipTo":{"country":"NL"},"customer":{"email":"billing@company.nl","vatId":"NL999999999B01"},"lines":[{"sku":"WID-001","qty":2,"unitCents":999},{"sku":"GAD-002","qty":1,"unitCents":1500}],"declared":{"netCents":3498,"vatCents":0,"grossCents":3498}}"""^^rdf:JSON """{"orderId":"A400","shipTo":{"country":"BE"},"customer":{"email":"ada@other.example","vatId":null},"lines":[{"sku":"WID-001","qty":2,"unitCents":999},{"sku":"GAD-002","qty":1,"unitCents":1500}],"declared":{"netCents":3498,"vatCents":508,"grossCents":4006}}"""^^rdf:JSON)
#   ?Product = ex:Widget
#   ?Qty = 2
#   ?SkuCat = "WID-001"
#   ?SkuJson = "WID-001"
#   ?UnitCents = 999
# Therefore the derived triple above is entailed by the rules and facts.
# ----------------------------------------------------------------------

<urn:example:order:A301#line:0> ex:product ex:Widget .

# ----------------------------------------------------------------------
# Proof for derived triple:
#   <urn:example:order:A301#line:0> ex:sku "WID-001" .
# It holds because the following instance of the rule body is provable:
#   ex:feed ex:json """{
#     "meta~data": { "batch": "2025-12-18" },
#     "orders": [
#       {
#         "orderId": "A100",
#         "shipTo": { "country": "BE" },
#         "customer": { "email": "Ada@Example.ORG", "vatId": null },
#         "lines": [
#           { "sku": "wid-001", "qty": 2, "unitCents": 999 },
#           { "sku": "GAD-002", "qty": 1, "unitCents": 1500 }
#         ],
#         "declared": { "netCents": 3498, "vatCents": 509, "grossCents": 4007 }
#       },
#       {
#         "orderId": "A200",
#         "shipTo": { "country": "US" },
#         "customer": { "email": "bob@example.org", "vatId": null },
#         "lines": [
#           { "sku": "WID-001", "qty": 2, "unitCents": 999 },
#           { "sku": "GAD-002", "qty": 1, "unitCents": 1500 }
#         ],
#         "declared": { "netCents": 3498, "vatCents": 0, "grossCents": 3498 }
#       },
#       {
#         "orderId": "A300",
#         "shipTo": { "country": "NL" },
#         "customer": { "email": "acct@company.nl", "vatId": "NL999999999B01" },
#         "lines": [
#           { "sku": "WID-001", "qty": 2, "unitCents": 999 },
#           { "sku": "GAD-002", "qty": 1, "unitCents": 1500 }
#         ],
#         "declared": { "netCents": 3498, "vatCents": 0, "grossCents": 3498 }
#       },
#       {
#         "orderId": "A301",
#         "shipTo": { "country": "NL" },
#         "customer": { "email": "billing@company.nl", "vatId": "NL999999999B01" },
#         "lines": [
#           { "sku": "WID-001", "qty": 2, "unitCents": 999 },
#           { "sku": "GAD-002", "qty": 1, "unitCents": 1500 }
#         ],
#         "declared": { "netCents": 3498, "vatCents": 0, "grossCents": 3498 }
#       },
#       {
#         "orderId": "A400",
#         "shipTo": { "country": "BE" },
#         "customer": { "email": "ada@other.example", "vatId": null },
#         "lines": [
#           { "sku": "WID-001", "qty": 2, "unitCents": 999 },
#           { "sku": "GAD-002", "qty": 1, "unitCents": 1500 }
#         ],
#         "declared": { "netCents": 3498, "vatCents": 508, "grossCents": 4006 }
#       }
#     ]
#   }"""^^rdf:JSON .
#   ("""{
#     "meta~data": { "batch": "2025-12-18" },
#     "orders": [
#       {
#         "orderId": "A100",
#         "shipTo": { "country": "BE" },
#         "customer": { "email": "Ada@Example.ORG", "vatId": null },
#         "lines": [
#           { "sku": "wid-001", "qty": 2, "unitCents": 999 },
#           { "sku": "GAD-002", "qty": 1, "unitCents": 1500 }
#         ],
#         "declared": { "netCents": 3498, "vatCents": 509, "grossCents": 4007 }
#       },
#       {
#         "orderId": "A200",
#         "shipTo": { "country": "US" },
#         "customer": { "email": "bob@example.org", "vatId": null },
#         "lines": [
#           { "sku": "WID-001", "qty": 2, "unitCents": 999 },
#           { "sku": "GAD-002", "qty": 1, "unitCents": 1500 }
#         ],
#         "declared": { "netCents": 3498, "vatCents": 0, "grossCents": 3498 }
#       },
#       {
#         "orderId": "A300",
#         "shipTo": { "country": "NL" },
#         "customer": { "email": "acct@company.nl", "vatId": "NL999999999B01" },
#         "lines": [
#           { "sku": "WID-001", "qty": 2, "unitCents": 999 },
#           { "sku": "GAD-002", "qty": 1, "unitCents": 1500 }
#         ],
#         "declared": { "netCents": 3498, "vatCents": 0, "grossCents": 3498 }
#       },
#       {
#         "orderId": "A301",
#         "shipTo": { "country": "NL" },
#         "customer": { "email": "billing@company.nl", "vatId": "NL999999999B01" },
#         "lines": [
#           { "sku": "WID-001", "qty": 2, "unitCents": 999 },
#           { "sku": "GAD-002", "qty": 1, "unitCents": 1500 }
#         ],
#         "declared": { "netCents": 3498, "vatCents": 0, "grossCents": 3498 }
#       },
#       {
#         "orderId": "A400",
#         "shipTo": { "country": "BE" },
#         "customer": { "email": "ada@other.example", "vatId": null },
#         "lines": [
#           { "sku": "WID-001", "qty": 2, "unitCents": 999 },
#           { "sku": "GAD-002", "qty": 1, "unitCents": 1500 }
#         ],
#         "declared": { "netCents": 3498, "vatCents": 508, "grossCents": 4006 }
#       }
#     ]
#   }"""^^rdf:JSON "/orders") string:jsonPointer ("""{"orderId":"A100","shipTo":{"country":"BE"},"customer":{"email":"Ada@Example.ORG","vatId":null},"lines":[{"sku":"wid-001","qty":2,"unitCents":999},{"sku":"GAD-002","qty":1,"unitCents":1500}],"declared":{"netCents":3498,"vatCents":509,"grossCents":4007}}"""^^rdf:JSON """{"orderId":"A200","shipTo":{"country":"US"},"customer":{"email":"bob@example.org","vatId":null},"lines":[{"sku":"WID-001","qty":2,"unitCents":999},{"sku":"GAD-002","qty":1,"unitCents":1500}],"declared":{"netCents":3498,"vatCents":0,"grossCents":3498}}"""^^rdf:JSON """{"orderId":"A300","shipTo":{"country":"NL"},"customer":{"email":"acct@company.nl","vatId":"NL999999999B01"},"lines":[{"sku":"WID-001","qty":2,"unitCents":999},{"sku":"GAD-002","qty":1,"unitCents":1500}],"declared":{"netCents":3498,"vatCents":0,"grossCents":3498}}"""^^rdf:JSON """{"orderId":"A301","shipTo":{"country":"NL"},"customer":{"email":"billing@company.nl","vatId":"NL999999999B01"},"lines":[{"sku":"WID-001","qty":2,"unitCents":999},{"sku":"GAD-002","qty":1,"unitCents":1500}],"declared":{"netCents":3498,"vatCents":0,"grossCents":3498}}"""^^rdf:JSON """{"orderId":"A400","shipTo":{"country":"BE"},"customer":{"email":"ada@other.example","vatId":null},"lines":[{"sku":"WID-001","qty":2,"unitCents":999},{"sku":"GAD-002","qty":1,"unitCents":1500}],"declared":{"netCents":3498,"vatCents":508,"grossCents":4006}}"""^^rdf:JSON) .
#   ("""{"orderId":"A100","shipTo":{"country":"BE"},"customer":{"email":"Ada@Example.ORG","vatId":null},"lines":[{"sku":"wid-001","qty":2,"unitCents":999},{"sku":"GAD-002","qty":1,"unitCents":1500}],"declared":{"netCents":3498,"vatCents":509,"grossCents":4007}}"""^^rdf:JSON """{"orderId":"A200","shipTo":{"country":"US"},"customer":{"email":"bob@example.org","vatId":null},"lines":[{"sku":"WID-001","qty":2,"unitCents":999},{"sku":"GAD-002","qty":1,"unitCents":1500}],"declared":{"netCents":3498,"vatCents":0,"grossCents":3498}}"""^^rdf:JSON """{"orderId":"A300","shipTo":{"country":"NL"},"customer":{"email":"acct@company.nl","vatId":"NL999999999B01"},"lines":[{"sku":"WID-001","qty":2,"unitCents":999},{"sku":"GAD-002","qty":1,"unitCents":1500}],"declared":{"netCents":3498,"vatCents":0,"grossCents":3498}}"""^^rdf:JSON """{"orderId":"A301","shipTo":{"country":"NL"},"customer":{"email":"billing@company.nl","vatId":"NL999999999B01"},"lines":[{"sku":"WID-001","qty":2,"unitCents":999},{"sku":"GAD-002","qty":1,"unitCents":1500}],"declared":{"netCents":3498,"vatCents":0,"grossCents":3498}}"""^^rdf:JSON """{"orderId":"A400","shipTo":{"country":"BE"},"customer":{"email":"ada@other.example","vatId":null},"lines":[{"sku":"WID-001","qty":2,"unitCents":999},{"sku":"GAD-002","qty":1,"unitCents":1500}],"declared":{"netCents":3498,"vatCents":508,"grossCents":4006}}"""^^rdf:JSON) list:iterate (3 """{"orderId":"A301","shipTo":{"country":"NL"},"customer":{"email":"billing@company.nl","vatId":"NL999999999B01"},"lines":[{"sku":"WID-001","qty":2,"unitCents":999},{"sku":"GAD-002","qty":1,"unitCents":1500}],"declared":{"netCents":3498,"vatCents":0,"grossCents":3498}}"""^^rdf:JSON) .
#   ("""{"orderId":"A301","shipTo":{"country":"NL"},"customer":{"email":"billing@company.nl","vatId":"NL999999999B01"},"lines":[{"sku":"WID-001","qty":2,"unitCents":999},{"sku":"GAD-002","qty":1,"unitCents":1500}],"declared":{"netCents":3498,"vatCents":0,"grossCents":3498}}"""^^rdf:JSON "/orderId") string:jsonPointer "A301" .
#   ("urn:example:order:%s" "A301") string:format "urn:example:order:A301" .
#   <urn:example:order:A301> log:uri "urn:example:order:A301" .
#   ("""{"orderId":"A301","shipTo":{"country":"NL"},"customer":{"email":"billing@company.nl","vatId":"NL999999999B01"},"lines":[{"sku":"WID-001","qty":2,"unitCents":999},{"sku":"GAD-002","qty":1,"unitCents":1500}],"declared":{"netCents":3498,"vatCents":0,"grossCents":3498}}"""^^rdf:JSON "/lines") string:jsonPointer ("""{"sku":"WID-001","qty":2,"unitCents":999}"""^^rdf:JSON """{"sku":"GAD-002","qty":1,"unitCents":1500}"""^^rdf:JSON) .
#   ("""{"sku":"WID-001","qty":2,"unitCents":999}"""^^rdf:JSON """{"sku":"GAD-002","qty":1,"unitCents":1500}"""^^rdf:JSON) list:iterate (0 """{"sku":"WID-001","qty":2,"unitCents":999}"""^^rdf:JSON) .
#   ("""{"sku":"WID-001","qty":2,"unitCents":999}"""^^rdf:JSON "/sku") string:jsonPointer "WID-001" .
#   ("""{"sku":"WID-001","qty":2,"unitCents":999}"""^^rdf:JSON "/qty") string:jsonPointer 2 .
#   ("""{"sku":"WID-001","qty":2,"unitCents":999}"""^^rdf:JSON "/unitCents") string:jsonPointer 999 .
#   ex:Widget a ex:Product .
#   ex:Widget ex:sku "WID-001" .
#   (2 999) math:product 1998 .
#   ("urn:example:order:%s#line:%s" "A301" 0) string:format "urn:example:order:A301#line:0" .
#   <urn:example:order:A301#line:0> log:uri "urn:example:order:A301#line:0" .
#   "WID-001" string:equalIgnoringCase "WID-001" .
# via the schematic forward rule:
#   {
#     ex:feed ex:json ?J .
#     (?J "/orders") string:jsonPointer ?Orders .
#     ?Orders list:iterate (?OrderIndex ?OrderJson) .
#     (?OrderJson "/orderId") string:jsonPointer ?OrderId .
#     ("urn:example:order:%s" ?OrderId) string:format ?OrderUriStr .
#     ?Order log:uri ?OrderUriStr .
#     (?OrderJson "/lines") string:jsonPointer ?Lines .
#     ?Lines list:iterate (?LineIndex ?LineJson) .
#     (?LineJson "/sku") string:jsonPointer ?SkuJson .
#     (?LineJson "/qty") string:jsonPointer ?Qty .
#     (?LineJson "/unitCents") string:jsonPointer ?UnitCents .
#     ?Product a ex:Product .
#     ?Product ex:sku ?SkuCat .
#     (?Qty ?UnitCents) math:product ?NetCents .
#     ("urn:example:order:%s#line:%s" ?OrderId ?LineIndex) string:format ?LineUriStr .
#     ?Line log:uri ?LineUriStr .
#     ?SkuJson string:equalIgnoringCase ?SkuCat .
#   } => {
#     ?Order ex:line ?Line .
#     ?Line a ex:OrderLine .
#     ?Line ex:lineIndex ?LineIndex .
#     ?Line ex:product ?Product .
#     ?Line ex:sku ?SkuCat .
#     ?Line ex:qty ?Qty .
#     ?Line ex:unitCents ?UnitCents .
#     ?Line ex:netCents ?NetCents .
#   } .
# with substitution (on rule variables):
#   ?J = """{
#     "meta~data": { "batch": "2025-12-18" },
#     "orders": [
#     {
#     "orderId": "A100",
#     "shipTo": { "country": "BE" },
#     "customer": { "email": "Ada@Example.ORG", "vatId": null },
#     "lines": [
#     { "sku": "wid-001", "qty": 2, "unitCents": 999 },
#     { "sku": "GAD-002", "qty": 1, "unitCents": 1500 }
#     ],
#     "declared": { "netCents": 3498, "vatCents": 509, "grossCents": 4007 }
#     },
#     {
#     "orderId": "A200",
#     "shipTo": { "country": "US" },
#     "customer": { "email": "bob@example.org", "vatId": null },
#     "lines": [
#     { "sku": "WID-001", "qty": 2, "unitCents": 999 },
#     { "sku": "GAD-002", "qty": 1, "unitCents": 1500 }
#     ],
#     "declared": { "netCents": 3498, "vatCents": 0, "grossCents": 3498 }
#     },
#     {
#     "orderId": "A300",
#     "shipTo": { "country": "NL" },
#     "customer": { "email": "acct@company.nl", "vatId": "NL999999999B01" },
#     "lines": [
#     { "sku": "WID-001", "qty": 2, "unitCents": 999 },
#     { "sku": "GAD-002", "qty": 1, "unitCents": 1500 }
#     ],
#     "declared": { "netCents": 3498, "vatCents": 0, "grossCents": 3498 }
#     },
#     {
#     "orderId": "A301",
#     "shipTo": { "country": "NL" },
#     "customer": { "email": "billing@company.nl", "vatId": "NL999999999B01" },
#     "lines": [
#     { "sku": "WID-001", "qty": 2, "unitCents": 999 },
#     { "sku": "GAD-002", "qty": 1, "unitCents": 1500 }
#     ],
#     "declared": { "netCents": 3498, "vatCents": 0, "grossCents": 3498 }
#     },
#     {
#     "orderId": "A400",
#     "shipTo": { "country": "BE" },
#     "customer": { "email": "ada@other.example", "vatId": null },
#     "lines": [
#     { "sku": "WID-001", "qty": 2, "unitCents": 999 },
#     { "sku": "GAD-002", "qty": 1, "unitCents": 1500 }
#     ],
#     "declared": { "netCents": 3498, "vatCents": 508, "grossCents": 4006 }
#     }
#     ]
#   }"""^^rdf:JSON
#   ?Line = <urn:example:order:A301#line:0>
#   ?LineIndex = 0
#   ?LineJson = """{"sku":"WID-001","qty":2,"unitCents":999}"""^^rdf:JSON
#   ?LineUriStr = "urn:example:order:A301#line:0"
#   ?Lines = ("""{"sku":"WID-001","qty":2,"unitCents":999}"""^^rdf:JSON """{"sku":"GAD-002","qty":1,"unitCents":1500}"""^^rdf:JSON)
#   ?NetCents = 1998
#   ?Order = <urn:example:order:A301>
#   ?OrderId = "A301"
#   ?OrderIndex = 3
#   ?OrderJson = """{"orderId":"A301","shipTo":{"country":"NL"},"customer":{"email":"billing@company.nl","vatId":"NL999999999B01"},"lines":[{"sku":"WID-001","qty":2,"unitCents":999},{"sku":"GAD-002","qty":1,"unitCents":1500}],"declared":{"netCents":3498,"vatCents":0,"grossCents":3498}}"""^^rdf:JSON
#   ?OrderUriStr = "urn:example:order:A301"
#   ?Orders = ("""{"orderId":"A100","shipTo":{"country":"BE"},"customer":{"email":"Ada@Example.ORG","vatId":null},"lines":[{"sku":"wid-001","qty":2,"unitCents":999},{"sku":"GAD-002","qty":1,"unitCents":1500}],"declared":{"netCents":3498,"vatCents":509,"grossCents":4007}}"""^^rdf:JSON """{"orderId":"A200","shipTo":{"country":"US"},"customer":{"email":"bob@example.org","vatId":null},"lines":[{"sku":"WID-001","qty":2,"unitCents":999},{"sku":"GAD-002","qty":1,"unitCents":1500}],"declared":{"netCents":3498,"vatCents":0,"grossCents":3498}}"""^^rdf:JSON """{"orderId":"A300","shipTo":{"country":"NL"},"customer":{"email":"acct@company.nl","vatId":"NL999999999B01"},"lines":[{"sku":"WID-001","qty":2,"unitCents":999},{"sku":"GAD-002","qty":1,"unitCents":1500}],"declared":{"netCents":3498,"vatCents":0,"grossCents":3498}}"""^^rdf:JSON """{"orderId":"A301","shipTo":{"country":"NL"},"customer":{"email":"billing@company.nl","vatId":"NL999999999B01"},"lines":[{"sku":"WID-001","qty":2,"unitCents":999},{"sku":"GAD-002","qty":1,"unitCents":1500}],"declared":{"netCents":3498,"vatCents":0,"grossCents":3498}}"""^^rdf:JSON """{"orderId":"A400","shipTo":{"country":"BE"},"customer":{"email":"ada@other.example","vatId":null},"lines":[{"sku":"WID-001","qty":2,"unitCents":999},{"sku":"GAD-002","qty":1,"unitCents":1500}],"declared":{"netCents":3498,"vatCents":508,"grossCents":4006}}"""^^rdf:JSON)
#   ?Product = ex:Widget
#   ?Qty = 2
#   ?SkuCat = "WID-001"
#   ?SkuJson = "WID-001"
#   ?UnitCents = 999
# Therefore the derived triple above is entailed by the rules and facts.
# ----------------------------------------------------------------------

<urn:example:order:A301#line:0> ex:sku "WID-001" .

# ----------------------------------------------------------------------
# Proof for derived triple:
#   <urn:example:order:A301#line:0> ex:qty 2 .
# It holds because the following instance of the rule body is provable:
#   ex:feed ex:json """{
#     "meta~data": { "batch": "2025-12-18" },
#     "orders": [
#       {
#         "orderId": "A100",
#         "shipTo": { "country": "BE" },
#         "customer": { "email": "Ada@Example.ORG", "vatId": null },
#         "lines": [
#           { "sku": "wid-001", "qty": 2, "unitCents": 999 },
#           { "sku": "GAD-002", "qty": 1, "unitCents": 1500 }
#         ],
#         "declared": { "netCents": 3498, "vatCents": 509, "grossCents": 4007 }
#       },
#       {
#         "orderId": "A200",
#         "shipTo": { "country": "US" },
#         "customer": { "email": "bob@example.org", "vatId": null },
#         "lines": [
#           { "sku": "WID-001", "qty": 2, "unitCents": 999 },
#           { "sku": "GAD-002", "qty": 1, "unitCents": 1500 }
#         ],
#         "declared": { "netCents": 3498, "vatCents": 0, "grossCents": 3498 }
#       },
#       {
#         "orderId": "A300",
#         "shipTo": { "country": "NL" },
#         "customer": { "email": "acct@company.nl", "vatId": "NL999999999B01" },
#         "lines": [
#           { "sku": "WID-001", "qty": 2, "unitCents": 999 },
#           { "sku": "GAD-002", "qty": 1, "unitCents": 1500 }
#         ],
#         "declared": { "netCents": 3498, "vatCents": 0, "grossCents": 3498 }
#       },
#       {
#         "orderId": "A301",
#         "shipTo": { "country": "NL" },
#         "customer": { "email": "billing@company.nl", "vatId": "NL999999999B01" },
#         "lines": [
#           { "sku": "WID-001", "qty": 2, "unitCents": 999 },
#           { "sku": "GAD-002", "qty": 1, "unitCents": 1500 }
#         ],
#         "declared": { "netCents": 3498, "vatCents": 0, "grossCents": 3498 }
#       },
#       {
#         "orderId": "A400",
#         "shipTo": { "country": "BE" },
#         "customer": { "email": "ada@other.example", "vatId": null },
#         "lines": [
#           { "sku": "WID-001", "qty": 2, "unitCents": 999 },
#           { "sku": "GAD-002", "qty": 1, "unitCents": 1500 }
#         ],
#         "declared": { "netCents": 3498, "vatCents": 508, "grossCents": 4006 }
#       }
#     ]
#   }"""^^rdf:JSON .
#   ("""{
#     "meta~data": { "batch": "2025-12-18" },
#     "orders": [
#       {
#         "orderId": "A100",
#         "shipTo": { "country": "BE" },
#         "customer": { "email": "Ada@Example.ORG", "vatId": null },
#         "lines": [
#           { "sku": "wid-001", "qty": 2, "unitCents": 999 },
#           { "sku": "GAD-002", "qty": 1, "unitCents": 1500 }
#         ],
#         "declared": { "netCents": 3498, "vatCents": 509, "grossCents": 4007 }
#       },
#       {
#         "orderId": "A200",
#         "shipTo": { "country": "US" },
#         "customer": { "email": "bob@example.org", "vatId": null },
#         "lines": [
#           { "sku": "WID-001", "qty": 2, "unitCents": 999 },
#           { "sku": "GAD-002", "qty": 1, "unitCents": 1500 }
#         ],
#         "declared": { "netCents": 3498, "vatCents": 0, "grossCents": 3498 }
#       },
#       {
#         "orderId": "A300",
#         "shipTo": { "country": "NL" },
#         "customer": { "email": "acct@company.nl", "vatId": "NL999999999B01" },
#         "lines": [
#           { "sku": "WID-001", "qty": 2, "unitCents": 999 },
#           { "sku": "GAD-002", "qty": 1, "unitCents": 1500 }
#         ],
#         "declared": { "netCents": 3498, "vatCents": 0, "grossCents": 3498 }
#       },
#       {
#         "orderId": "A301",
#         "shipTo": { "country": "NL" },
#         "customer": { "email": "billing@company.nl", "vatId": "NL999999999B01" },
#         "lines": [
#           { "sku": "WID-001", "qty": 2, "unitCents": 999 },
#           { "sku": "GAD-002", "qty": 1, "unitCents": 1500 }
#         ],
#         "declared": { "netCents": 3498, "vatCents": 0, "grossCents": 3498 }
#       },
#       {
#         "orderId": "A400",
#         "shipTo": { "country": "BE" },
#         "customer": { "email": "ada@other.example", "vatId": null },
#         "lines": [
#           { "sku": "WID-001", "qty": 2, "unitCents": 999 },
#           { "sku": "GAD-002", "qty": 1, "unitCents": 1500 }
#         ],
#         "declared": { "netCents": 3498, "vatCents": 508, "grossCents": 4006 }
#       }
#     ]
#   }"""^^rdf:JSON "/orders") string:jsonPointer ("""{"orderId":"A100","shipTo":{"country":"BE"},"customer":{"email":"Ada@Example.ORG","vatId":null},"lines":[{"sku":"wid-001","qty":2,"unitCents":999},{"sku":"GAD-002","qty":1,"unitCents":1500}],"declared":{"netCents":3498,"vatCents":509,"grossCents":4007}}"""^^rdf:JSON """{"orderId":"A200","shipTo":{"country":"US"},"customer":{"email":"bob@example.org","vatId":null},"lines":[{"sku":"WID-001","qty":2,"unitCents":999},{"sku":"GAD-002","qty":1,"unitCents":1500}],"declared":{"netCents":3498,"vatCents":0,"grossCents":3498}}"""^^rdf:JSON """{"orderId":"A300","shipTo":{"country":"NL"},"customer":{"email":"acct@company.nl","vatId":"NL999999999B01"},"lines":[{"sku":"WID-001","qty":2,"unitCents":999},{"sku":"GAD-002","qty":1,"unitCents":1500}],"declared":{"netCents":3498,"vatCents":0,"grossCents":3498}}"""^^rdf:JSON """{"orderId":"A301","shipTo":{"country":"NL"},"customer":{"email":"billing@company.nl","vatId":"NL999999999B01"},"lines":[{"sku":"WID-001","qty":2,"unitCents":999},{"sku":"GAD-002","qty":1,"unitCents":1500}],"declared":{"netCents":3498,"vatCents":0,"grossCents":3498}}"""^^rdf:JSON """{"orderId":"A400","shipTo":{"country":"BE"},"customer":{"email":"ada@other.example","vatId":null},"lines":[{"sku":"WID-001","qty":2,"unitCents":999},{"sku":"GAD-002","qty":1,"unitCents":1500}],"declared":{"netCents":3498,"vatCents":508,"grossCents":4006}}"""^^rdf:JSON) .
#   ("""{"orderId":"A100","shipTo":{"country":"BE"},"customer":{"email":"Ada@Example.ORG","vatId":null},"lines":[{"sku":"wid-001","qty":2,"unitCents":999},{"sku":"GAD-002","qty":1,"unitCents":1500}],"declared":{"netCents":3498,"vatCents":509,"grossCents":4007}}"""^^rdf:JSON """{"orderId":"A200","shipTo":{"country":"US"},"customer":{"email":"bob@example.org","vatId":null},"lines":[{"sku":"WID-001","qty":2,"unitCents":999},{"sku":"GAD-002","qty":1,"unitCents":1500}],"declared":{"netCents":3498,"vatCents":0,"grossCents":3498}}"""^^rdf:JSON """{"orderId":"A300","shipTo":{"country":"NL"},"customer":{"email":"acct@company.nl","vatId":"NL999999999B01"},"lines":[{"sku":"WID-001","qty":2,"unitCents":999},{"sku":"GAD-002","qty":1,"unitCents":1500}],"declared":{"netCents":3498,"vatCents":0,"grossCents":3498}}"""^^rdf:JSON """{"orderId":"A301","shipTo":{"country":"NL"},"customer":{"email":"billing@company.nl","vatId":"NL999999999B01"},"lines":[{"sku":"WID-001","qty":2,"unitCents":999},{"sku":"GAD-002","qty":1,"unitCents":1500}],"declared":{"netCents":3498,"vatCents":0,"grossCents":3498}}"""^^rdf:JSON """{"orderId":"A400","shipTo":{"country":"BE"},"customer":{"email":"ada@other.example","vatId":null},"lines":[{"sku":"WID-001","qty":2,"unitCents":999},{"sku":"GAD-002","qty":1,"unitCents":1500}],"declared":{"netCents":3498,"vatCents":508,"grossCents":4006}}"""^^rdf:JSON) list:iterate (3 """{"orderId":"A301","shipTo":{"country":"NL"},"customer":{"email":"billing@company.nl","vatId":"NL999999999B01"},"lines":[{"sku":"WID-001","qty":2,"unitCents":999},{"sku":"GAD-002","qty":1,"unitCents":1500}],"declared":{"netCents":3498,"vatCents":0,"grossCents":3498}}"""^^rdf:JSON) .
#   ("""{"orderId":"A301","shipTo":{"country":"NL"},"customer":{"email":"billing@company.nl","vatId":"NL999999999B01"},"lines":[{"sku":"WID-001","qty":2,"unitCents":999},{"sku":"GAD-002","qty":1,"unitCents":1500}],"declared":{"netCents":3498,"vatCents":0,"grossCents":3498}}"""^^rdf:JSON "/orderId") string:jsonPointer "A301" .
#   ("urn:example:order:%s" "A301") string:format "urn:example:order:A301" .
#   <urn:example:order:A301> log:uri "urn:example:order:A301" .
#   ("""{"orderId":"A301","shipTo":{"country":"NL"},"customer":{"email":"billing@company.nl","vatId":"NL999999999B01"},"lines":[{"sku":"WID-001","qty":2,"unitCents":999},{"sku":"GAD-002","qty":1,"unitCents":1500}],"declared":{"netCents":3498,"vatCents":0,"grossCents":3498}}"""^^rdf:JSON "/lines") string:jsonPointer ("""{"sku":"WID-001","qty":2,"unitCents":999}"""^^rdf:JSON """{"sku":"GAD-002","qty":1,"unitCents":1500}"""^^rdf:JSON) .
#   ("""{"sku":"WID-001","qty":2,"unitCents":999}"""^^rdf:JSON """{"sku":"GAD-002","qty":1,"unitCents":1500}"""^^rdf:JSON) list:iterate (0 """{"sku":"WID-001","qty":2,"unitCents":999}"""^^rdf:JSON) .
#   ("""{"sku":"WID-001","qty":2,"unitCents":999}"""^^rdf:JSON "/sku") string:jsonPointer "WID-001" .
#   ("""{"sku":"WID-001","qty":2,"unitCents":999}"""^^rdf:JSON "/qty") string:jsonPointer 2 .
#   ("""{"sku":"WID-001","qty":2,"unitCents":999}"""^^rdf:JSON "/unitCents") string:jsonPointer 999 .
#   ex:Widget a ex:Product .
#   ex:Widget ex:sku "WID-001" .
#   (2 999) math:product 1998 .
#   ("urn:example:order:%s#line:%s" "A301" 0) string:format "urn:example:order:A301#line:0" .
#   <urn:example:order:A301#line:0> log:uri "urn:example:order:A301#line:0" .
#   "WID-001" string:equalIgnoringCase "WID-001" .
# via the schematic forward rule:
#   {
#     ex:feed ex:json ?J .
#     (?J "/orders") string:jsonPointer ?Orders .
#     ?Orders list:iterate (?OrderIndex ?OrderJson) .
#     (?OrderJson "/orderId") string:jsonPointer ?OrderId .
#     ("urn:example:order:%s" ?OrderId) string:format ?OrderUriStr .
#     ?Order log:uri ?OrderUriStr .
#     (?OrderJson "/lines") string:jsonPointer ?Lines .
#     ?Lines list:iterate (?LineIndex ?LineJson) .
#     (?LineJson "/sku") string:jsonPointer ?SkuJson .
#     (?LineJson "/qty") string:jsonPointer ?Qty .
#     (?LineJson "/unitCents") string:jsonPointer ?UnitCents .
#     ?Product a ex:Product .
#     ?Product ex:sku ?SkuCat .
#     (?Qty ?UnitCents) math:product ?NetCents .
#     ("urn:example:order:%s#line:%s" ?OrderId ?LineIndex) string:format ?LineUriStr .
#     ?Line log:uri ?LineUriStr .
#     ?SkuJson string:equalIgnoringCase ?SkuCat .
#   } => {
#     ?Order ex:line ?Line .
#     ?Line a ex:OrderLine .
#     ?Line ex:lineIndex ?LineIndex .
#     ?Line ex:product ?Product .
#     ?Line ex:sku ?SkuCat .
#     ?Line ex:qty ?Qty .
#     ?Line ex:unitCents ?UnitCents .
#     ?Line ex:netCents ?NetCents .
#   } .
# with substitution (on rule variables):
#   ?J = """{
#     "meta~data": { "batch": "2025-12-18" },
#     "orders": [
#     {
#     "orderId": "A100",
#     "shipTo": { "country": "BE" },
#     "customer": { "email": "Ada@Example.ORG", "vatId": null },
#     "lines": [
#     { "sku": "wid-001", "qty": 2, "unitCents": 999 },
#     { "sku": "GAD-002", "qty": 1, "unitCents": 1500 }
#     ],
#     "declared": { "netCents": 3498, "vatCents": 509, "grossCents": 4007 }
#     },
#     {
#     "orderId": "A200",
#     "shipTo": { "country": "US" },
#     "customer": { "email": "bob@example.org", "vatId": null },
#     "lines": [
#     { "sku": "WID-001", "qty": 2, "unitCents": 999 },
#     { "sku": "GAD-002", "qty": 1, "unitCents": 1500 }
#     ],
#     "declared": { "netCents": 3498, "vatCents": 0, "grossCents": 3498 }
#     },
#     {
#     "orderId": "A300",
#     "shipTo": { "country": "NL" },
#     "customer": { "email": "acct@company.nl", "vatId": "NL999999999B01" },
#     "lines": [
#     { "sku": "WID-001", "qty": 2, "unitCents": 999 },
#     { "sku": "GAD-002", "qty": 1, "unitCents": 1500 }
#     ],
#     "declared": { "netCents": 3498, "vatCents": 0, "grossCents": 3498 }
#     },
#     {
#     "orderId": "A301",
#     "shipTo": { "country": "NL" },
#     "customer": { "email": "billing@company.nl", "vatId": "NL999999999B01" },
#     "lines": [
#     { "sku": "WID-001", "qty": 2, "unitCents": 999 },
#     { "sku": "GAD-002", "qty": 1, "unitCents": 1500 }
#     ],
#     "declared": { "netCents": 3498, "vatCents": 0, "grossCents": 3498 }
#     },
#     {
#     "orderId": "A400",
#     "shipTo": { "country": "BE" },
#     "customer": { "email": "ada@other.example", "vatId": null },
#     "lines": [
#     { "sku": "WID-001", "qty": 2, "unitCents": 999 },
#     { "sku": "GAD-002", "qty": 1, "unitCents": 1500 }
#     ],
#     "declared": { "netCents": 3498, "vatCents": 508, "grossCents": 4006 }
#     }
#     ]
#   }"""^^rdf:JSON
#   ?Line = <urn:example:order:A301#line:0>
#   ?LineIndex = 0
#   ?LineJson = """{"sku":"WID-001","qty":2,"unitCents":999}"""^^rdf:JSON
#   ?LineUriStr = "urn:example:order:A301#line:0"
#   ?Lines = ("""{"sku":"WID-001","qty":2,"unitCents":999}"""^^rdf:JSON """{"sku":"GAD-002","qty":1,"unitCents":1500}"""^^rdf:JSON)
#   ?NetCents = 1998
#   ?Order = <urn:example:order:A301>
#   ?OrderId = "A301"
#   ?OrderIndex = 3
#   ?OrderJson = """{"orderId":"A301","shipTo":{"country":"NL"},"customer":{"email":"billing@company.nl","vatId":"NL999999999B01"},"lines":[{"sku":"WID-001","qty":2,"unitCents":999},{"sku":"GAD-002","qty":1,"unitCents":1500}],"declared":{"netCents":3498,"vatCents":0,"grossCents":3498}}"""^^rdf:JSON
#   ?OrderUriStr = "urn:example:order:A301"
#   ?Orders = ("""{"orderId":"A100","shipTo":{"country":"BE"},"customer":{"email":"Ada@Example.ORG","vatId":null},"lines":[{"sku":"wid-001","qty":2,"unitCents":999},{"sku":"GAD-002","qty":1,"unitCents":1500}],"declared":{"netCents":3498,"vatCents":509,"grossCents":4007}}"""^^rdf:JSON """{"orderId":"A200","shipTo":{"country":"US"},"customer":{"email":"bob@example.org","vatId":null},"lines":[{"sku":"WID-001","qty":2,"unitCents":999},{"sku":"GAD-002","qty":1,"unitCents":1500}],"declared":{"netCents":3498,"vatCents":0,"grossCents":3498}}"""^^rdf:JSON """{"orderId":"A300","shipTo":{"country":"NL"},"customer":{"email":"acct@company.nl","vatId":"NL999999999B01"},"lines":[{"sku":"WID-001","qty":2,"unitCents":999},{"sku":"GAD-002","qty":1,"unitCents":1500}],"declared":{"netCents":3498,"vatCents":0,"grossCents":3498}}"""^^rdf:JSON """{"orderId":"A301","shipTo":{"country":"NL"},"customer":{"email":"billing@company.nl","vatId":"NL999999999B01"},"lines":[{"sku":"WID-001","qty":2,"unitCents":999},{"sku":"GAD-002","qty":1,"unitCents":1500}],"declared":{"netCents":3498,"vatCents":0,"grossCents":3498}}"""^^rdf:JSON """{"orderId":"A400","shipTo":{"country":"BE"},"customer":{"email":"ada@other.example","vatId":null},"lines":[{"sku":"WID-001","qty":2,"unitCents":999},{"sku":"GAD-002","qty":1,"unitCents":1500}],"declared":{"netCents":3498,"vatCents":508,"grossCents":4006}}"""^^rdf:JSON)
#   ?Product = ex:Widget
#   ?Qty = 2
#   ?SkuCat = "WID-001"
#   ?SkuJson = "WID-001"
#   ?UnitCents = 999
# Therefore the derived triple above is entailed by the rules and facts.
# ----------------------------------------------------------------------

<urn:example:order:A301#line:0> ex:qty 2 .

# ----------------------------------------------------------------------
# Proof for derived triple:
#   <urn:example:order:A301#line:0> ex:unitCents 999 .
# It holds because the following instance of the rule body is provable:
#   ex:feed ex:json """{
#     "meta~data": { "batch": "2025-12-18" },
#     "orders": [
#       {
#         "orderId": "A100",
#         "shipTo": { "country": "BE" },
#         "customer": { "email": "Ada@Example.ORG", "vatId": null },
#         "lines": [
#           { "sku": "wid-001", "qty": 2, "unitCents": 999 },
#           { "sku": "GAD-002", "qty": 1, "unitCents": 1500 }
#         ],
#         "declared": { "netCents": 3498, "vatCents": 509, "grossCents": 4007 }
#       },
#       {
#         "orderId": "A200",
#         "shipTo": { "country": "US" },
#         "customer": { "email": "bob@example.org", "vatId": null },
#         "lines": [
#           { "sku": "WID-001", "qty": 2, "unitCents": 999 },
#           { "sku": "GAD-002", "qty": 1, "unitCents": 1500 }
#         ],
#         "declared": { "netCents": 3498, "vatCents": 0, "grossCents": 3498 }
#       },
#       {
#         "orderId": "A300",
#         "shipTo": { "country": "NL" },
#         "customer": { "email": "acct@company.nl", "vatId": "NL999999999B01" },
#         "lines": [
#           { "sku": "WID-001", "qty": 2, "unitCents": 999 },
#           { "sku": "GAD-002", "qty": 1, "unitCents": 1500 }
#         ],
#         "declared": { "netCents": 3498, "vatCents": 0, "grossCents": 3498 }
#       },
#       {
#         "orderId": "A301",
#         "shipTo": { "country": "NL" },
#         "customer": { "email": "billing@company.nl", "vatId": "NL999999999B01" },
#         "lines": [
#           { "sku": "WID-001", "qty": 2, "unitCents": 999 },
#           { "sku": "GAD-002", "qty": 1, "unitCents": 1500 }
#         ],
#         "declared": { "netCents": 3498, "vatCents": 0, "grossCents": 3498 }
#       },
#       {
#         "orderId": "A400",
#         "shipTo": { "country": "BE" },
#         "customer": { "email": "ada@other.example", "vatId": null },
#         "lines": [
#           { "sku": "WID-001", "qty": 2, "unitCents": 999 },
#           { "sku": "GAD-002", "qty": 1, "unitCents": 1500 }
#         ],
#         "declared": { "netCents": 3498, "vatCents": 508, "grossCents": 4006 }
#       }
#     ]
#   }"""^^rdf:JSON .
#   ("""{
#     "meta~data": { "batch": "2025-12-18" },
#     "orders": [
#       {
#         "orderId": "A100",
#         "shipTo": { "country": "BE" },
#         "customer": { "email": "Ada@Example.ORG", "vatId": null },
#         "lines": [
#           { "sku": "wid-001", "qty": 2, "unitCents": 999 },
#           { "sku": "GAD-002", "qty": 1, "unitCents": 1500 }
#         ],
#         "declared": { "netCents": 3498, "vatCents": 509, "grossCents": 4007 }
#       },
#       {
#         "orderId": "A200",
#         "shipTo": { "country": "US" },
#         "customer": { "email": "bob@example.org", "vatId": null },
#         "lines": [
#           { "sku": "WID-001", "qty": 2, "unitCents": 999 },
#           { "sku": "GAD-002", "qty": 1, "unitCents": 1500 }
#         ],
#         "declared": { "netCents": 3498, "vatCents": 0, "grossCents": 3498 }
#       },
#       {
#         "orderId": "A300",
#         "shipTo": { "country": "NL" },
#         "customer": { "email": "acct@company.nl", "vatId": "NL999999999B01" },
#         "lines": [
#           { "sku": "WID-001", "qty": 2, "unitCents": 999 },
#           { "sku": "GAD-002", "qty": 1, "unitCents": 1500 }
#         ],
#         "declared": { "netCents": 3498, "vatCents": 0, "grossCents": 3498 }
#       },
#       {
#         "orderId": "A301",
#         "shipTo": { "country": "NL" },
#         "customer": { "email": "billing@company.nl", "vatId": "NL999999999B01" },
#         "lines": [
#           { "sku": "WID-001", "qty": 2, "unitCents": 999 },
#           { "sku": "GAD-002", "qty": 1, "unitCents": 1500 }
#         ],
#         "declared": { "netCents": 3498, "vatCents": 0, "grossCents": 3498 }
#       },
#       {
#         "orderId": "A400",
#         "shipTo": { "country": "BE" },
#         "customer": { "email": "ada@other.example", "vatId": null },
#         "lines": [
#           { "sku": "WID-001", "qty": 2, "unitCents": 999 },
#           { "sku": "GAD-002", "qty": 1, "unitCents": 1500 }
#         ],
#         "declared": { "netCents": 3498, "vatCents": 508, "grossCents": 4006 }
#       }
#     ]
#   }"""^^rdf:JSON "/orders") string:jsonPointer ("""{"orderId":"A100","shipTo":{"country":"BE"},"customer":{"email":"Ada@Example.ORG","vatId":null},"lines":[{"sku":"wid-001","qty":2,"unitCents":999},{"sku":"GAD-002","qty":1,"unitCents":1500}],"declared":{"netCents":3498,"vatCents":509,"grossCents":4007}}"""^^rdf:JSON """{"orderId":"A200","shipTo":{"country":"US"},"customer":{"email":"bob@example.org","vatId":null},"lines":[{"sku":"WID-001","qty":2,"unitCents":999},{"sku":"GAD-002","qty":1,"unitCents":1500}],"declared":{"netCents":3498,"vatCents":0,"grossCents":3498}}"""^^rdf:JSON """{"orderId":"A300","shipTo":{"country":"NL"},"customer":{"email":"acct@company.nl","vatId":"NL999999999B01"},"lines":[{"sku":"WID-001","qty":2,"unitCents":999},{"sku":"GAD-002","qty":1,"unitCents":1500}],"declared":{"netCents":3498,"vatCents":0,"grossCents":3498}}"""^^rdf:JSON """{"orderId":"A301","shipTo":{"country":"NL"},"customer":{"email":"billing@company.nl","vatId":"NL999999999B01"},"lines":[{"sku":"WID-001","qty":2,"unitCents":999},{"sku":"GAD-002","qty":1,"unitCents":1500}],"declared":{"netCents":3498,"vatCents":0,"grossCents":3498}}"""^^rdf:JSON """{"orderId":"A400","shipTo":{"country":"BE"},"customer":{"email":"ada@other.example","vatId":null},"lines":[{"sku":"WID-001","qty":2,"unitCents":999},{"sku":"GAD-002","qty":1,"unitCents":1500}],"declared":{"netCents":3498,"vatCents":508,"grossCents":4006}}"""^^rdf:JSON) .
#   ("""{"orderId":"A100","shipTo":{"country":"BE"},"customer":{"email":"Ada@Example.ORG","vatId":null},"lines":[{"sku":"wid-001","qty":2,"unitCents":999},{"sku":"GAD-002","qty":1,"unitCents":1500}],"declared":{"netCents":3498,"vatCents":509,"grossCents":4007}}"""^^rdf:JSON """{"orderId":"A200","shipTo":{"country":"US"},"customer":{"email":"bob@example.org","vatId":null},"lines":[{"sku":"WID-001","qty":2,"unitCents":999},{"sku":"GAD-002","qty":1,"unitCents":1500}],"declared":{"netCents":3498,"vatCents":0,"grossCents":3498}}"""^^rdf:JSON """{"orderId":"A300","shipTo":{"country":"NL"},"customer":{"email":"acct@company.nl","vatId":"NL999999999B01"},"lines":[{"sku":"WID-001","qty":2,"unitCents":999},{"sku":"GAD-002","qty":1,"unitCents":1500}],"declared":{"netCents":3498,"vatCents":0,"grossCents":3498}}"""^^rdf:JSON """{"orderId":"A301","shipTo":{"country":"NL"},"customer":{"email":"billing@company.nl","vatId":"NL999999999B01"},"lines":[{"sku":"WID-001","qty":2,"unitCents":999},{"sku":"GAD-002","qty":1,"unitCents":1500}],"declared":{"netCents":3498,"vatCents":0,"grossCents":3498}}"""^^rdf:JSON """{"orderId":"A400","shipTo":{"country":"BE"},"customer":{"email":"ada@other.example","vatId":null},"lines":[{"sku":"WID-001","qty":2,"unitCents":999},{"sku":"GAD-002","qty":1,"unitCents":1500}],"declared":{"netCents":3498,"vatCents":508,"grossCents":4006}}"""^^rdf:JSON) list:iterate (3 """{"orderId":"A301","shipTo":{"country":"NL"},"customer":{"email":"billing@company.nl","vatId":"NL999999999B01"},"lines":[{"sku":"WID-001","qty":2,"unitCents":999},{"sku":"GAD-002","qty":1,"unitCents":1500}],"declared":{"netCents":3498,"vatCents":0,"grossCents":3498}}"""^^rdf:JSON) .
#   ("""{"orderId":"A301","shipTo":{"country":"NL"},"customer":{"email":"billing@company.nl","vatId":"NL999999999B01"},"lines":[{"sku":"WID-001","qty":2,"unitCents":999},{"sku":"GAD-002","qty":1,"unitCents":1500}],"declared":{"netCents":3498,"vatCents":0,"grossCents":3498}}"""^^rdf:JSON "/orderId") string:jsonPointer "A301" .
#   ("urn:example:order:%s" "A301") string:format "urn:example:order:A301" .
#   <urn:example:order:A301> log:uri "urn:example:order:A301" .
#   ("""{"orderId":"A301","shipTo":{"country":"NL"},"customer":{"email":"billing@company.nl","vatId":"NL999999999B01"},"lines":[{"sku":"WID-001","qty":2,"unitCents":999},{"sku":"GAD-002","qty":1,"unitCents":1500}],"declared":{"netCents":3498,"vatCents":0,"grossCents":3498}}"""^^rdf:JSON "/lines") string:jsonPointer ("""{"sku":"WID-001","qty":2,"unitCents":999}"""^^rdf:JSON """{"sku":"GAD-002","qty":1,"unitCents":1500}"""^^rdf:JSON) .
#   ("""{"sku":"WID-001","qty":2,"unitCents":999}"""^^rdf:JSON """{"sku":"GAD-002","qty":1,"unitCents":1500}"""^^rdf:JSON) list:iterate (0 """{"sku":"WID-001","qty":2,"unitCents":999}"""^^rdf:JSON) .
#   ("""{"sku":"WID-001","qty":2,"unitCents":999}"""^^rdf:JSON "/sku") string:jsonPointer "WID-001" .
#   ("""{"sku":"WID-001","qty":2,"unitCents":999}"""^^rdf:JSON "/qty") string:jsonPointer 2 .
#   ("""{"sku":"WID-001","qty":2,"unitCents":999}"""^^rdf:JSON "/unitCents") string:jsonPointer 999 .
#   ex:Widget a ex:Product .
#   ex:Widget ex:sku "WID-001" .
#   (2 999) math:product 1998 .
#   ("urn:example:order:%s#line:%s" "A301" 0) string:format "urn:example:order:A301#line:0" .
#   <urn:example:order:A301#line:0> log:uri "urn:example:order:A301#line:0" .
#   "WID-001" string:equalIgnoringCase "WID-001" .
# via the schematic forward rule:
#   {
#     ex:feed ex:json ?J .
#     (?J "/orders") string:jsonPointer ?Orders .
#     ?Orders list:iterate (?OrderIndex ?OrderJson) .
#     (?OrderJson "/orderId") string:jsonPointer ?OrderId .
#     ("urn:example:order:%s" ?OrderId) string:format ?OrderUriStr .
#     ?Order log:uri ?OrderUriStr .
#     (?OrderJson "/lines") string:jsonPointer ?Lines .
#     ?Lines list:iterate (?LineIndex ?LineJson) .
#     (?LineJson "/sku") string:jsonPointer ?SkuJson .
#     (?LineJson "/qty") string:jsonPointer ?Qty .
#     (?LineJson "/unitCents") string:jsonPointer ?UnitCents .
#     ?Product a ex:Product .
#     ?Product ex:sku ?SkuCat .
#     (?Qty ?UnitCents) math:product ?NetCents .
#     ("urn:example:order:%s#line:%s" ?OrderId ?LineIndex) string:format ?LineUriStr .
#     ?Line log:uri ?LineUriStr .
#     ?SkuJson string:equalIgnoringCase ?SkuCat .
#   } => {
#     ?Order ex:line ?Line .
#     ?Line a ex:OrderLine .
#     ?Line ex:lineIndex ?LineIndex .
#     ?Line ex:product ?Product .
#     ?Line ex:sku ?SkuCat .
#     ?Line ex:qty ?Qty .
#     ?Line ex:unitCents ?UnitCents .
#     ?Line ex:netCents ?NetCents .
#   } .
# with substitution (on rule variables):
#   ?J = """{
#     "meta~data": { "batch": "2025-12-18" },
#     "orders": [
#     {
#     "orderId": "A100",
#     "shipTo": { "country": "BE" },
#     "customer": { "email": "Ada@Example.ORG", "vatId": null },
#     "lines": [
#     { "sku": "wid-001", "qty": 2, "unitCents": 999 },
#     { "sku": "GAD-002", "qty": 1, "unitCents": 1500 }
#     ],
#     "declared": { "netCents": 3498, "vatCents": 509, "grossCents": 4007 }
#     },
#     {
#     "orderId": "A200",
#     "shipTo": { "country": "US" },
#     "customer": { "email": "bob@example.org", "vatId": null },
#     "lines": [
#     { "sku": "WID-001", "qty": 2, "unitCents": 999 },
#     { "sku": "GAD-002", "qty": 1, "unitCents": 1500 }
#     ],
#     "declared": { "netCents": 3498, "vatCents": 0, "grossCents": 3498 }
#     },
#     {
#     "orderId": "A300",
#     "shipTo": { "country": "NL" },
#     "customer": { "email": "acct@company.nl", "vatId": "NL999999999B01" },
#     "lines": [
#     { "sku": "WID-001", "qty": 2, "unitCents": 999 },
#     { "sku": "GAD-002", "qty": 1, "unitCents": 1500 }
#     ],
#     "declared": { "netCents": 3498, "vatCents": 0, "grossCents": 3498 }
#     },
#     {
#     "orderId": "A301",
#     "shipTo": { "country": "NL" },
#     "customer": { "email": "billing@company.nl", "vatId": "NL999999999B01" },
#     "lines": [
#     { "sku": "WID-001", "qty": 2, "unitCents": 999 },
#     { "sku": "GAD-002", "qty": 1, "unitCents": 1500 }
#     ],
#     "declared": { "netCents": 3498, "vatCents": 0, "grossCents": 3498 }
#     },
#     {
#     "orderId": "A400",
#     "shipTo": { "country": "BE" },
#     "customer": { "email": "ada@other.example", "vatId": null },
#     "lines": [
#     { "sku": "WID-001", "qty": 2, "unitCents": 999 },
#     { "sku": "GAD-002", "qty": 1, "unitCents": 1500 }
#     ],
#     "declared": { "netCents": 3498, "vatCents": 508, "grossCents": 4006 }
#     }
#     ]
#   }"""^^rdf:JSON
#   ?Line = <urn:example:order:A301#line:0>
#   ?LineIndex = 0
#   ?LineJson = """{"sku":"WID-001","qty":2,"unitCents":999}"""^^rdf:JSON
#   ?LineUriStr = "urn:example:order:A301#line:0"
#   ?Lines = ("""{"sku":"WID-001","qty":2,"unitCents":999}"""^^rdf:JSON """{"sku":"GAD-002","qty":1,"unitCents":1500}"""^^rdf:JSON)
#   ?NetCents = 1998
#   ?Order = <urn:example:order:A301>
#   ?OrderId = "A301"
#   ?OrderIndex = 3
#   ?OrderJson = """{"orderId":"A301","shipTo":{"country":"NL"},"customer":{"email":"billing@company.nl","vatId":"NL999999999B01"},"lines":[{"sku":"WID-001","qty":2,"unitCents":999},{"sku":"GAD-002","qty":1,"unitCents":1500}],"declared":{"netCents":3498,"vatCents":0,"grossCents":3498}}"""^^rdf:JSON
#   ?OrderUriStr = "urn:example:order:A301"
#   ?Orders = ("""{"orderId":"A100","shipTo":{"country":"BE"},"customer":{"email":"Ada@Example.ORG","vatId":null},"lines":[{"sku":"wid-001","qty":2,"unitCents":999},{"sku":"GAD-002","qty":1,"unitCents":1500}],"declared":{"netCents":3498,"vatCents":509,"grossCents":4007}}"""^^rdf:JSON """{"orderId":"A200","shipTo":{"country":"US"},"customer":{"email":"bob@example.org","vatId":null},"lines":[{"sku":"WID-001","qty":2,"unitCents":999},{"sku":"GAD-002","qty":1,"unitCents":1500}],"declared":{"netCents":3498,"vatCents":0,"grossCents":3498}}"""^^rdf:JSON """{"orderId":"A300","shipTo":{"country":"NL"},"customer":{"email":"acct@company.nl","vatId":"NL999999999B01"},"lines":[{"sku":"WID-001","qty":2,"unitCents":999},{"sku":"GAD-002","qty":1,"unitCents":1500}],"declared":{"netCents":3498,"vatCents":0,"grossCents":3498}}"""^^rdf:JSON """{"orderId":"A301","shipTo":{"country":"NL"},"customer":{"email":"billing@company.nl","vatId":"NL999999999B01"},"lines":[{"sku":"WID-001","qty":2,"unitCents":999},{"sku":"GAD-002","qty":1,"unitCents":1500}],"declared":{"netCents":3498,"vatCents":0,"grossCents":3498}}"""^^rdf:JSON """{"orderId":"A400","shipTo":{"country":"BE"},"customer":{"email":"ada@other.example","vatId":null},"lines":[{"sku":"WID-001","qty":2,"unitCents":999},{"sku":"GAD-002","qty":1,"unitCents":1500}],"declared":{"netCents":3498,"vatCents":508,"grossCents":4006}}"""^^rdf:JSON)
#   ?Product = ex:Widget
#   ?Qty = 2
#   ?SkuCat = "WID-001"
#   ?SkuJson = "WID-001"
#   ?UnitCents = 999
# Therefore the derived triple above is entailed by the rules and facts.
# ----------------------------------------------------------------------

<urn:example:order:A301#line:0> ex:unitCents 999 .

# ----------------------------------------------------------------------
# Proof for derived triple:
#   <urn:example:order:A301#line:0> ex:netCents 1998 .
# It holds because the following instance of the rule body is provable:
#   ex:feed ex:json """{
#     "meta~data": { "batch": "2025-12-18" },
#     "orders": [
#       {
#         "orderId": "A100",
#         "shipTo": { "country": "BE" },
#         "customer": { "email": "Ada@Example.ORG", "vatId": null },
#         "lines": [
#           { "sku": "wid-001", "qty": 2, "unitCents": 999 },
#           { "sku": "GAD-002", "qty": 1, "unitCents": 1500 }
#         ],
#         "declared": { "netCents": 3498, "vatCents": 509, "grossCents": 4007 }
#       },
#       {
#         "orderId": "A200",
#         "shipTo": { "country": "US" },
#         "customer": { "email": "bob@example.org", "vatId": null },
#         "lines": [
#           { "sku": "WID-001", "qty": 2, "unitCents": 999 },
#           { "sku": "GAD-002", "qty": 1, "unitCents": 1500 }
#         ],
#         "declared": { "netCents": 3498, "vatCents": 0, "grossCents": 3498 }
#       },
#       {
#         "orderId": "A300",
#         "shipTo": { "country": "NL" },
#         "customer": { "email": "acct@company.nl", "vatId": "NL999999999B01" },
#         "lines": [
#           { "sku": "WID-001", "qty": 2, "unitCents": 999 },
#           { "sku": "GAD-002", "qty": 1, "unitCents": 1500 }
#         ],
#         "declared": { "netCents": 3498, "vatCents": 0, "grossCents": 3498 }
#       },
#       {
#         "orderId": "A301",
#         "shipTo": { "country": "NL" },
#         "customer": { "email": "billing@company.nl", "vatId": "NL999999999B01" },
#         "lines": [
#           { "sku": "WID-001", "qty": 2, "unitCents": 999 },
#           { "sku": "GAD-002", "qty": 1, "unitCents": 1500 }
#         ],
#         "declared": { "netCents": 3498, "vatCents": 0, "grossCents": 3498 }
#       },
#       {
#         "orderId": "A400",
#         "shipTo": { "country": "BE" },
#         "customer": { "email": "ada@other.example", "vatId": null },
#         "lines": [
#           { "sku": "WID-001", "qty": 2, "unitCents": 999 },
#           { "sku": "GAD-002", "qty": 1, "unitCents": 1500 }
#         ],
#         "declared": { "netCents": 3498, "vatCents": 508, "grossCents": 4006 }
#       }
#     ]
#   }"""^^rdf:JSON .
#   ("""{
#     "meta~data": { "batch": "2025-12-18" },
#     "orders": [
#       {
#         "orderId": "A100",
#         "shipTo": { "country": "BE" },
#         "customer": { "email": "Ada@Example.ORG", "vatId": null },
#         "lines": [
#           { "sku": "wid-001", "qty": 2, "unitCents": 999 },
#           { "sku": "GAD-002", "qty": 1, "unitCents": 1500 }
#         ],
#         "declared": { "netCents": 3498, "vatCents": 509, "grossCents": 4007 }
#       },
#       {
#         "orderId": "A200",
#         "shipTo": { "country": "US" },
#         "customer": { "email": "bob@example.org", "vatId": null },
#         "lines": [
#           { "sku": "WID-001", "qty": 2, "unitCents": 999 },
#           { "sku": "GAD-002", "qty": 1, "unitCents": 1500 }
#         ],
#         "declared": { "netCents": 3498, "vatCents": 0, "grossCents": 3498 }
#       },
#       {
#         "orderId": "A300",
#         "shipTo": { "country": "NL" },
#         "customer": { "email": "acct@company.nl", "vatId": "NL999999999B01" },
#         "lines": [
#           { "sku": "WID-001", "qty": 2, "unitCents": 999 },
#           { "sku": "GAD-002", "qty": 1, "unitCents": 1500 }
#         ],
#         "declared": { "netCents": 3498, "vatCents": 0, "grossCents": 3498 }
#       },
#       {
#         "orderId": "A301",
#         "shipTo": { "country": "NL" },
#         "customer": { "email": "billing@company.nl", "vatId": "NL999999999B01" },
#         "lines": [
#           { "sku": "WID-001", "qty": 2, "unitCents": 999 },
#           { "sku": "GAD-002", "qty": 1, "unitCents": 1500 }
#         ],
#         "declared": { "netCents": 3498, "vatCents": 0, "grossCents": 3498 }
#       },
#       {
#         "orderId": "A400",
#         "shipTo": { "country": "BE" },
#         "customer": { "email": "ada@other.example", "vatId": null },
#         "lines": [
#           { "sku": "WID-001", "qty": 2, "unitCents": 999 },
#           { "sku": "GAD-002", "qty": 1, "unitCents": 1500 }
#         ],
#         "declared": { "netCents": 3498, "vatCents": 508, "grossCents": 4006 }
#       }
#     ]
#   }"""^^rdf:JSON "/orders") string:jsonPointer ("""{"orderId":"A100","shipTo":{"country":"BE"},"customer":{"email":"Ada@Example.ORG","vatId":null},"lines":[{"sku":"wid-001","qty":2,"unitCents":999},{"sku":"GAD-002","qty":1,"unitCents":1500}],"declared":{"netCents":3498,"vatCents":509,"grossCents":4007}}"""^^rdf:JSON """{"orderId":"A200","shipTo":{"country":"US"},"customer":{"email":"bob@example.org","vatId":null},"lines":[{"sku":"WID-001","qty":2,"unitCents":999},{"sku":"GAD-002","qty":1,"unitCents":1500}],"declared":{"netCents":3498,"vatCents":0,"grossCents":3498}}"""^^rdf:JSON """{"orderId":"A300","shipTo":{"country":"NL"},"customer":{"email":"acct@company.nl","vatId":"NL999999999B01"},"lines":[{"sku":"WID-001","qty":2,"unitCents":999},{"sku":"GAD-002","qty":1,"unitCents":1500}],"declared":{"netCents":3498,"vatCents":0,"grossCents":3498}}"""^^rdf:JSON """{"orderId":"A301","shipTo":{"country":"NL"},"customer":{"email":"billing@company.nl","vatId":"NL999999999B01"},"lines":[{"sku":"WID-001","qty":2,"unitCents":999},{"sku":"GAD-002","qty":1,"unitCents":1500}],"declared":{"netCents":3498,"vatCents":0,"grossCents":3498}}"""^^rdf:JSON """{"orderId":"A400","shipTo":{"country":"BE"},"customer":{"email":"ada@other.example","vatId":null},"lines":[{"sku":"WID-001","qty":2,"unitCents":999},{"sku":"GAD-002","qty":1,"unitCents":1500}],"declared":{"netCents":3498,"vatCents":508,"grossCents":4006}}"""^^rdf:JSON) .
#   ("""{"orderId":"A100","shipTo":{"country":"BE"},"customer":{"email":"Ada@Example.ORG","vatId":null},"lines":[{"sku":"wid-001","qty":2,"unitCents":999},{"sku":"GAD-002","qty":1,"unitCents":1500}],"declared":{"netCents":3498,"vatCents":509,"grossCents":4007}}"""^^rdf:JSON """{"orderId":"A200","shipTo":{"country":"US"},"customer":{"email":"bob@example.org","vatId":null},"lines":[{"sku":"WID-001","qty":2,"unitCents":999},{"sku":"GAD-002","qty":1,"unitCents":1500}],"declared":{"netCents":3498,"vatCents":0,"grossCents":3498}}"""^^rdf:JSON """{"orderId":"A300","shipTo":{"country":"NL"},"customer":{"email":"acct@company.nl","vatId":"NL999999999B01"},"lines":[{"sku":"WID-001","qty":2,"unitCents":999},{"sku":"GAD-002","qty":1,"unitCents":1500}],"declared":{"netCents":3498,"vatCents":0,"grossCents":3498}}"""^^rdf:JSON """{"orderId":"A301","shipTo":{"country":"NL"},"customer":{"email":"billing@company.nl","vatId":"NL999999999B01"},"lines":[{"sku":"WID-001","qty":2,"unitCents":999},{"sku":"GAD-002","qty":1,"unitCents":1500}],"declared":{"netCents":3498,"vatCents":0,"grossCents":3498}}"""^^rdf:JSON """{"orderId":"A400","shipTo":{"country":"BE"},"customer":{"email":"ada@other.example","vatId":null},"lines":[{"sku":"WID-001","qty":2,"unitCents":999},{"sku":"GAD-002","qty":1,"unitCents":1500}],"declared":{"netCents":3498,"vatCents":508,"grossCents":4006}}"""^^rdf:JSON) list:iterate (3 """{"orderId":"A301","shipTo":{"country":"NL"},"customer":{"email":"billing@company.nl","vatId":"NL999999999B01"},"lines":[{"sku":"WID-001","qty":2,"unitCents":999},{"sku":"GAD-002","qty":1,"unitCents":1500}],"declared":{"netCents":3498,"vatCents":0,"grossCents":3498}}"""^^rdf:JSON) .
#   ("""{"orderId":"A301","shipTo":{"country":"NL"},"customer":{"email":"billing@company.nl","vatId":"NL999999999B01"},"lines":[{"sku":"WID-001","qty":2,"unitCents":999},{"sku":"GAD-002","qty":1,"unitCents":1500}],"declared":{"netCents":3498,"vatCents":0,"grossCents":3498}}"""^^rdf:JSON "/orderId") string:jsonPointer "A301" .
#   ("urn:example:order:%s" "A301") string:format "urn:example:order:A301" .
#   <urn:example:order:A301> log:uri "urn:example:order:A301" .
#   ("""{"orderId":"A301","shipTo":{"country":"NL"},"customer":{"email":"billing@company.nl","vatId":"NL999999999B01"},"lines":[{"sku":"WID-001","qty":2,"unitCents":999},{"sku":"GAD-002","qty":1,"unitCents":1500}],"declared":{"netCents":3498,"vatCents":0,"grossCents":3498}}"""^^rdf:JSON "/lines") string:jsonPointer ("""{"sku":"WID-001","qty":2,"unitCents":999}"""^^rdf:JSON """{"sku":"GAD-002","qty":1,"unitCents":1500}"""^^rdf:JSON) .
#   ("""{"sku":"WID-001","qty":2,"unitCents":999}"""^^rdf:JSON """{"sku":"GAD-002","qty":1,"unitCents":1500}"""^^rdf:JSON) list:iterate (0 """{"sku":"WID-001","qty":2,"unitCents":999}"""^^rdf:JSON) .
#   ("""{"sku":"WID-001","qty":2,"unitCents":999}"""^^rdf:JSON "/sku") string:jsonPointer "WID-001" .
#   ("""{"sku":"WID-001","qty":2,"unitCents":999}"""^^rdf:JSON "/qty") string:jsonPointer 2 .
#   ("""{"sku":"WID-001","qty":2,"unitCents":999}"""^^rdf:JSON "/unitCents") string:jsonPointer 999 .
#   ex:Widget a ex:Product .
#   ex:Widget ex:sku "WID-001" .
#   (2 999) math:product 1998 .
#   ("urn:example:order:%s#line:%s" "A301" 0) string:format "urn:example:order:A301#line:0" .
#   <urn:example:order:A301#line:0> log:uri "urn:example:order:A301#line:0" .
#   "WID-001" string:equalIgnoringCase "WID-001" .
# via the schematic forward rule:
#   {
#     ex:feed ex:json ?J .
#     (?J "/orders") string:jsonPointer ?Orders .
#     ?Orders list:iterate (?OrderIndex ?OrderJson) .
#     (?OrderJson "/orderId") string:jsonPointer ?OrderId .
#     ("urn:example:order:%s" ?OrderId) string:format ?OrderUriStr .
#     ?Order log:uri ?OrderUriStr .
#     (?OrderJson "/lines") string:jsonPointer ?Lines .
#     ?Lines list:iterate (?LineIndex ?LineJson) .
#     (?LineJson "/sku") string:jsonPointer ?SkuJson .
#     (?LineJson "/qty") string:jsonPointer ?Qty .
#     (?LineJson "/unitCents") string:jsonPointer ?UnitCents .
#     ?Product a ex:Product .
#     ?Product ex:sku ?SkuCat .
#     (?Qty ?UnitCents) math:product ?NetCents .
#     ("urn:example:order:%s#line:%s" ?OrderId ?LineIndex) string:format ?LineUriStr .
#     ?Line log:uri ?LineUriStr .
#     ?SkuJson string:equalIgnoringCase ?SkuCat .
#   } => {
#     ?Order ex:line ?Line .
#     ?Line a ex:OrderLine .
#     ?Line ex:lineIndex ?LineIndex .
#     ?Line ex:product ?Product .
#     ?Line ex:sku ?SkuCat .
#     ?Line ex:qty ?Qty .
#     ?Line ex:unitCents ?UnitCents .
#     ?Line ex:netCents ?NetCents .
#   } .
# with substitution (on rule variables):
#   ?J = """{
#     "meta~data": { "batch": "2025-12-18" },
#     "orders": [
#     {
#     "orderId": "A100",
#     "shipTo": { "country": "BE" },
#     "customer": { "email": "Ada@Example.ORG", "vatId": null },
#     "lines": [
#     { "sku": "wid-001", "qty": 2, "unitCents": 999 },
#     { "sku": "GAD-002", "qty": 1, "unitCents": 1500 }
#     ],
#     "declared": { "netCents": 3498, "vatCents": 509, "grossCents": 4007 }
#     },
#     {
#     "orderId": "A200",
#     "shipTo": { "country": "US" },
#     "customer": { "email": "bob@example.org", "vatId": null },
#     "lines": [
#     { "sku": "WID-001", "qty": 2, "unitCents": 999 },
#     { "sku": "GAD-002", "qty": 1, "unitCents": 1500 }
#     ],
#     "declared": { "netCents": 3498, "vatCents": 0, "grossCents": 3498 }
#     },
#     {
#     "orderId": "A300",
#     "shipTo": { "country": "NL" },
#     "customer": { "email": "acct@company.nl", "vatId": "NL999999999B01" },
#     "lines": [
#     { "sku": "WID-001", "qty": 2, "unitCents": 999 },
#     { "sku": "GAD-002", "qty": 1, "unitCents": 1500 }
#     ],
#     "declared": { "netCents": 3498, "vatCents": 0, "grossCents": 3498 }
#     },
#     {
#     "orderId": "A301",
#     "shipTo": { "country": "NL" },
#     "customer": { "email": "billing@company.nl", "vatId": "NL999999999B01" },
#     "lines": [
#     { "sku": "WID-001", "qty": 2, "unitCents": 999 },
#     { "sku": "GAD-002", "qty": 1, "unitCents": 1500 }
#     ],
#     "declared": { "netCents": 3498, "vatCents": 0, "grossCents": 3498 }
#     },
#     {
#     "orderId": "A400",
#     "shipTo": { "country": "BE" },
#     "customer": { "email": "ada@other.example", "vatId": null },
#     "lines": [
#     { "sku": "WID-001", "qty": 2, "unitCents": 999 },
#     { "sku": "GAD-002", "qty": 1, "unitCents": 1500 }
#     ],
#     "declared": { "netCents": 3498, "vatCents": 508, "grossCents": 4006 }
#     }
#     ]
#   }"""^^rdf:JSON
#   ?Line = <urn:example:order:A301#line:0>
#   ?LineIndex = 0
#   ?LineJson = """{"sku":"WID-001","qty":2,"unitCents":999}"""^^rdf:JSON
#   ?LineUriStr = "urn:example:order:A301#line:0"
#   ?Lines = ("""{"sku":"WID-001","qty":2,"unitCents":999}"""^^rdf:JSON """{"sku":"GAD-002","qty":1,"unitCents":1500}"""^^rdf:JSON)
#   ?NetCents = 1998
#   ?Order = <urn:example:order:A301>
#   ?OrderId = "A301"
#   ?OrderIndex = 3
#   ?OrderJson = """{"orderId":"A301","shipTo":{"country":"NL"},"customer":{"email":"billing@company.nl","vatId":"NL999999999B01"},"lines":[{"sku":"WID-001","qty":2,"unitCents":999},{"sku":"GAD-002","qty":1,"unitCents":1500}],"declared":{"netCents":3498,"vatCents":0,"grossCents":3498}}"""^^rdf:JSON
#   ?OrderUriStr = "urn:example:order:A301"
#   ?Orders = ("""{"orderId":"A100","shipTo":{"country":"BE"},"customer":{"email":"Ada@Example.ORG","vatId":null},"lines":[{"sku":"wid-001","qty":2,"unitCents":999},{"sku":"GAD-002","qty":1,"unitCents":1500}],"declared":{"netCents":3498,"vatCents":509,"grossCents":4007}}"""^^rdf:JSON """{"orderId":"A200","shipTo":{"country":"US"},"customer":{"email":"bob@example.org","vatId":null},"lines":[{"sku":"WID-001","qty":2,"unitCents":999},{"sku":"GAD-002","qty":1,"unitCents":1500}],"declared":{"netCents":3498,"vatCents":0,"grossCents":3498}}"""^^rdf:JSON """{"orderId":"A300","shipTo":{"country":"NL"},"customer":{"email":"acct@company.nl","vatId":"NL999999999B01"},"lines":[{"sku":"WID-001","qty":2,"unitCents":999},{"sku":"GAD-002","qty":1,"unitCents":1500}],"declared":{"netCents":3498,"vatCents":0,"grossCents":3498}}"""^^rdf:JSON """{"orderId":"A301","shipTo":{"country":"NL"},"customer":{"email":"billing@company.nl","vatId":"NL999999999B01"},"lines":[{"sku":"WID-001","qty":2,"unitCents":999},{"sku":"GAD-002","qty":1,"unitCents":1500}],"declared":{"netCents":3498,"vatCents":0,"grossCents":3498}}"""^^rdf:JSON """{"orderId":"A400","shipTo":{"country":"BE"},"customer":{"email":"ada@other.example","vatId":null},"lines":[{"sku":"WID-001","qty":2,"unitCents":999},{"sku":"GAD-002","qty":1,"unitCents":1500}],"declared":{"netCents":3498,"vatCents":508,"grossCents":4006}}"""^^rdf:JSON)
#   ?Product = ex:Widget
#   ?Qty = 2
#   ?SkuCat = "WID-001"
#   ?SkuJson = "WID-001"
#   ?UnitCents = 999
# Therefore the derived triple above is entailed by the rules and facts.
# ----------------------------------------------------------------------

<urn:example:order:A301#line:0> ex:netCents 1998 .

# ----------------------------------------------------------------------
# Proof for derived triple:
#   <urn:example:order:A300> ex:line <urn:example:order:A300#line:1> .
# It holds because the following instance of the rule body is provable:
#   ex:feed ex:json """{
#     "meta~data": { "batch": "2025-12-18" },
#     "orders": [
#       {
#         "orderId": "A100",
#         "shipTo": { "country": "BE" },
#         "customer": { "email": "Ada@Example.ORG", "vatId": null },
#         "lines": [
#           { "sku": "wid-001", "qty": 2, "unitCents": 999 },
#           { "sku": "GAD-002", "qty": 1, "unitCents": 1500 }
#         ],
#         "declared": { "netCents": 3498, "vatCents": 509, "grossCents": 4007 }
#       },
#       {
#         "orderId": "A200",
#         "shipTo": { "country": "US" },
#         "customer": { "email": "bob@example.org", "vatId": null },
#         "lines": [
#           { "sku": "WID-001", "qty": 2, "unitCents": 999 },
#           { "sku": "GAD-002", "qty": 1, "unitCents": 1500 }
#         ],
#         "declared": { "netCents": 3498, "vatCents": 0, "grossCents": 3498 }
#       },
#       {
#         "orderId": "A300",
#         "shipTo": { "country": "NL" },
#         "customer": { "email": "acct@company.nl", "vatId": "NL999999999B01" },
#         "lines": [
#           { "sku": "WID-001", "qty": 2, "unitCents": 999 },
#           { "sku": "GAD-002", "qty": 1, "unitCents": 1500 }
#         ],
#         "declared": { "netCents": 3498, "vatCents": 0, "grossCents": 3498 }
#       },
#       {
#         "orderId": "A301",
#         "shipTo": { "country": "NL" },
#         "customer": { "email": "billing@company.nl", "vatId": "NL999999999B01" },
#         "lines": [
#           { "sku": "WID-001", "qty": 2, "unitCents": 999 },
#           { "sku": "GAD-002", "qty": 1, "unitCents": 1500 }
#         ],
#         "declared": { "netCents": 3498, "vatCents": 0, "grossCents": 3498 }
#       },
#       {
#         "orderId": "A400",
#         "shipTo": { "country": "BE" },
#         "customer": { "email": "ada@other.example", "vatId": null },
#         "lines": [
#           { "sku": "WID-001", "qty": 2, "unitCents": 999 },
#           { "sku": "GAD-002", "qty": 1, "unitCents": 1500 }
#         ],
#         "declared": { "netCents": 3498, "vatCents": 508, "grossCents": 4006 }
#       }
#     ]
#   }"""^^rdf:JSON .
#   ("""{
#     "meta~data": { "batch": "2025-12-18" },
#     "orders": [
#       {
#         "orderId": "A100",
#         "shipTo": { "country": "BE" },
#         "customer": { "email": "Ada@Example.ORG", "vatId": null },
#         "lines": [
#           { "sku": "wid-001", "qty": 2, "unitCents": 999 },
#           { "sku": "GAD-002", "qty": 1, "unitCents": 1500 }
#         ],
#         "declared": { "netCents": 3498, "vatCents": 509, "grossCents": 4007 }
#       },
#       {
#         "orderId": "A200",
#         "shipTo": { "country": "US" },
#         "customer": { "email": "bob@example.org", "vatId": null },
#         "lines": [
#           { "sku": "WID-001", "qty": 2, "unitCents": 999 },
#           { "sku": "GAD-002", "qty": 1, "unitCents": 1500 }
#         ],
#         "declared": { "netCents": 3498, "vatCents": 0, "grossCents": 3498 }
#       },
#       {
#         "orderId": "A300",
#         "shipTo": { "country": "NL" },
#         "customer": { "email": "acct@company.nl", "vatId": "NL999999999B01" },
#         "lines": [
#           { "sku": "WID-001", "qty": 2, "unitCents": 999 },
#           { "sku": "GAD-002", "qty": 1, "unitCents": 1500 }
#         ],
#         "declared": { "netCents": 3498, "vatCents": 0, "grossCents": 3498 }
#       },
#       {
#         "orderId": "A301",
#         "shipTo": { "country": "NL" },
#         "customer": { "email": "billing@company.nl", "vatId": "NL999999999B01" },
#         "lines": [
#           { "sku": "WID-001", "qty": 2, "unitCents": 999 },
#           { "sku": "GAD-002", "qty": 1, "unitCents": 1500 }
#         ],
#         "declared": { "netCents": 3498, "vatCents": 0, "grossCents": 3498 }
#       },
#       {
#         "orderId": "A400",
#         "shipTo": { "country": "BE" },
#         "customer": { "email": "ada@other.example", "vatId": null },
#         "lines": [
#           { "sku": "WID-001", "qty": 2, "unitCents": 999 },
#           { "sku": "GAD-002", "qty": 1, "unitCents": 1500 }
#         ],
#         "declared": { "netCents": 3498, "vatCents": 508, "grossCents": 4006 }
#       }
#     ]
#   }"""^^rdf:JSON "/orders") string:jsonPointer ("""{"orderId":"A100","shipTo":{"country":"BE"},"customer":{"email":"Ada@Example.ORG","vatId":null},"lines":[{"sku":"wid-001","qty":2,"unitCents":999},{"sku":"GAD-002","qty":1,"unitCents":1500}],"declared":{"netCents":3498,"vatCents":509,"grossCents":4007}}"""^^rdf:JSON """{"orderId":"A200","shipTo":{"country":"US"},"customer":{"email":"bob@example.org","vatId":null},"lines":[{"sku":"WID-001","qty":2,"unitCents":999},{"sku":"GAD-002","qty":1,"unitCents":1500}],"declared":{"netCents":3498,"vatCents":0,"grossCents":3498}}"""^^rdf:JSON """{"orderId":"A300","shipTo":{"country":"NL"},"customer":{"email":"acct@company.nl","vatId":"NL999999999B01"},"lines":[{"sku":"WID-001","qty":2,"unitCents":999},{"sku":"GAD-002","qty":1,"unitCents":1500}],"declared":{"netCents":3498,"vatCents":0,"grossCents":3498}}"""^^rdf:JSON """{"orderId":"A301","shipTo":{"country":"NL"},"customer":{"email":"billing@company.nl","vatId":"NL999999999B01"},"lines":[{"sku":"WID-001","qty":2,"unitCents":999},{"sku":"GAD-002","qty":1,"unitCents":1500}],"declared":{"netCents":3498,"vatCents":0,"grossCents":3498}}"""^^rdf:JSON """{"orderId":"A400","shipTo":{"country":"BE"},"customer":{"email":"ada@other.example","vatId":null},"lines":[{"sku":"WID-001","qty":2,"unitCents":999},{"sku":"GAD-002","qty":1,"unitCents":1500}],"declared":{"netCents":3498,"vatCents":508,"grossCents":4006}}"""^^rdf:JSON) .
#   ("""{"orderId":"A100","shipTo":{"country":"BE"},"customer":{"email":"Ada@Example.ORG","vatId":null},"lines":[{"sku":"wid-001","qty":2,"unitCents":999},{"sku":"GAD-002","qty":1,"unitCents":1500}],"declared":{"netCents":3498,"vatCents":509,"grossCents":4007}}"""^^rdf:JSON """{"orderId":"A200","shipTo":{"country":"US"},"customer":{"email":"bob@example.org","vatId":null},"lines":[{"sku":"WID-001","qty":2,"unitCents":999},{"sku":"GAD-002","qty":1,"unitCents":1500}],"declared":{"netCents":3498,"vatCents":0,"grossCents":3498}}"""^^rdf:JSON """{"orderId":"A300","shipTo":{"country":"NL"},"customer":{"email":"acct@company.nl","vatId":"NL999999999B01"},"lines":[{"sku":"WID-001","qty":2,"unitCents":999},{"sku":"GAD-002","qty":1,"unitCents":1500}],"declared":{"netCents":3498,"vatCents":0,"grossCents":3498}}"""^^rdf:JSON """{"orderId":"A301","shipTo":{"country":"NL"},"customer":{"email":"billing@company.nl","vatId":"NL999999999B01"},"lines":[{"sku":"WID-001","qty":2,"unitCents":999},{"sku":"GAD-002","qty":1,"unitCents":1500}],"declared":{"netCents":3498,"vatCents":0,"grossCents":3498}}"""^^rdf:JSON """{"orderId":"A400","shipTo":{"country":"BE"},"customer":{"email":"ada@other.example","vatId":null},"lines":[{"sku":"WID-001","qty":2,"unitCents":999},{"sku":"GAD-002","qty":1,"unitCents":1500}],"declared":{"netCents":3498,"vatCents":508,"grossCents":4006}}"""^^rdf:JSON) list:iterate (2 """{"orderId":"A300","shipTo":{"country":"NL"},"customer":{"email":"acct@company.nl","vatId":"NL999999999B01"},"lines":[{"sku":"WID-001","qty":2,"unitCents":999},{"sku":"GAD-002","qty":1,"unitCents":1500}],"declared":{"netCents":3498,"vatCents":0,"grossCents":3498}}"""^^rdf:JSON) .
#   ("""{"orderId":"A300","shipTo":{"country":"NL"},"customer":{"email":"acct@company.nl","vatId":"NL999999999B01"},"lines":[{"sku":"WID-001","qty":2,"unitCents":999},{"sku":"GAD-002","qty":1,"unitCents":1500}],"declared":{"netCents":3498,"vatCents":0,"grossCents":3498}}"""^^rdf:JSON "/orderId") string:jsonPointer "A300" .
#   ("urn:example:order:%s" "A300") string:format "urn:example:order:A300" .
#   <urn:example:order:A300> log:uri "urn:example:order:A300" .
#   ("""{"orderId":"A300","shipTo":{"country":"NL"},"customer":{"email":"acct@company.nl","vatId":"NL999999999B01"},"lines":[{"sku":"WID-001","qty":2,"unitCents":999},{"sku":"GAD-002","qty":1,"unitCents":1500}],"declared":{"netCents":3498,"vatCents":0,"grossCents":3498}}"""^^rdf:JSON "/lines") string:jsonPointer ("""{"sku":"WID-001","qty":2,"unitCents":999}"""^^rdf:JSON """{"sku":"GAD-002","qty":1,"unitCents":1500}"""^^rdf:JSON) .
#   ("""{"sku":"WID-001","qty":2,"unitCents":999}"""^^rdf:JSON """{"sku":"GAD-002","qty":1,"unitCents":1500}"""^^rdf:JSON) list:iterate (1 """{"sku":"GAD-002","qty":1,"unitCents":1500}"""^^rdf:JSON) .
#   ("""{"sku":"GAD-002","qty":1,"unitCents":1500}"""^^rdf:JSON "/sku") string:jsonPointer "GAD-002" .
#   ("""{"sku":"GAD-002","qty":1,"unitCents":1500}"""^^rdf:JSON "/qty") string:jsonPointer 1 .
#   ("""{"sku":"GAD-002","qty":1,"unitCents":1500}"""^^rdf:JSON "/unitCents") string:jsonPointer 1500 .
#   ex:Gadget a ex:Product .
#   ex:Gadget ex:sku "GAD-002" .
#   (1 1500) math:product 1500 .
#   ("urn:example:order:%s#line:%s" "A300" 1) string:format "urn:example:order:A300#line:1" .
#   <urn:example:order:A300#line:1> log:uri "urn:example:order:A300#line:1" .
#   "GAD-002" string:equalIgnoringCase "GAD-002" .
# via the schematic forward rule:
#   {
#     ex:feed ex:json ?J .
#     (?J "/orders") string:jsonPointer ?Orders .
#     ?Orders list:iterate (?OrderIndex ?OrderJson) .
#     (?OrderJson "/orderId") string:jsonPointer ?OrderId .
#     ("urn:example:order:%s" ?OrderId) string:format ?OrderUriStr .
#     ?Order log:uri ?OrderUriStr .
#     (?OrderJson "/lines") string:jsonPointer ?Lines .
#     ?Lines list:iterate (?LineIndex ?LineJson) .
#     (?LineJson "/sku") string:jsonPointer ?SkuJson .
#     (?LineJson "/qty") string:jsonPointer ?Qty .
#     (?LineJson "/unitCents") string:jsonPointer ?UnitCents .
#     ?Product a ex:Product .
#     ?Product ex:sku ?SkuCat .
#     (?Qty ?UnitCents) math:product ?NetCents .
#     ("urn:example:order:%s#line:%s" ?OrderId ?LineIndex) string:format ?LineUriStr .
#     ?Line log:uri ?LineUriStr .
#     ?SkuJson string:equalIgnoringCase ?SkuCat .
#   } => {
#     ?Order ex:line ?Line .
#     ?Line a ex:OrderLine .
#     ?Line ex:lineIndex ?LineIndex .
#     ?Line ex:product ?Product .
#     ?Line ex:sku ?SkuCat .
#     ?Line ex:qty ?Qty .
#     ?Line ex:unitCents ?UnitCents .
#     ?Line ex:netCents ?NetCents .
#   } .
# with substitution (on rule variables):
#   ?J = """{
#     "meta~data": { "batch": "2025-12-18" },
#     "orders": [
#     {
#     "orderId": "A100",
#     "shipTo": { "country": "BE" },
#     "customer": { "email": "Ada@Example.ORG", "vatId": null },
#     "lines": [
#     { "sku": "wid-001", "qty": 2, "unitCents": 999 },
#     { "sku": "GAD-002", "qty": 1, "unitCents": 1500 }
#     ],
#     "declared": { "netCents": 3498, "vatCents": 509, "grossCents": 4007 }
#     },
#     {
#     "orderId": "A200",
#     "shipTo": { "country": "US" },
#     "customer": { "email": "bob@example.org", "vatId": null },
#     "lines": [
#     { "sku": "WID-001", "qty": 2, "unitCents": 999 },
#     { "sku": "GAD-002", "qty": 1, "unitCents": 1500 }
#     ],
#     "declared": { "netCents": 3498, "vatCents": 0, "grossCents": 3498 }
#     },
#     {
#     "orderId": "A300",
#     "shipTo": { "country": "NL" },
#     "customer": { "email": "acct@company.nl", "vatId": "NL999999999B01" },
#     "lines": [
#     { "sku": "WID-001", "qty": 2, "unitCents": 999 },
#     { "sku": "GAD-002", "qty": 1, "unitCents": 1500 }
#     ],
#     "declared": { "netCents": 3498, "vatCents": 0, "grossCents": 3498 }
#     },
#     {
#     "orderId": "A301",
#     "shipTo": { "country": "NL" },
#     "customer": { "email": "billing@company.nl", "vatId": "NL999999999B01" },
#     "lines": [
#     { "sku": "WID-001", "qty": 2, "unitCents": 999 },
#     { "sku": "GAD-002", "qty": 1, "unitCents": 1500 }
#     ],
#     "declared": { "netCents": 3498, "vatCents": 0, "grossCents": 3498 }
#     },
#     {
#     "orderId": "A400",
#     "shipTo": { "country": "BE" },
#     "customer": { "email": "ada@other.example", "vatId": null },
#     "lines": [
#     { "sku": "WID-001", "qty": 2, "unitCents": 999 },
#     { "sku": "GAD-002", "qty": 1, "unitCents": 1500 }
#     ],
#     "declared": { "netCents": 3498, "vatCents": 508, "grossCents": 4006 }
#     }
#     ]
#   }"""^^rdf:JSON
#   ?Line = <urn:example:order:A300#line:1>
#   ?LineIndex = 1
#   ?LineJson = """{"sku":"GAD-002","qty":1,"unitCents":1500}"""^^rdf:JSON
#   ?LineUriStr = "urn:example:order:A300#line:1"
#   ?Lines = ("""{"sku":"WID-001","qty":2,"unitCents":999}"""^^rdf:JSON """{"sku":"GAD-002","qty":1,"unitCents":1500}"""^^rdf:JSON)
#   ?NetCents = 1500
#   ?Order = <urn:example:order:A300>
#   ?OrderId = "A300"
#   ?OrderIndex = 2
#   ?OrderJson = """{"orderId":"A300","shipTo":{"country":"NL"},"customer":{"email":"acct@company.nl","vatId":"NL999999999B01"},"lines":[{"sku":"WID-001","qty":2,"unitCents":999},{"sku":"GAD-002","qty":1,"unitCents":1500}],"declared":{"netCents":3498,"vatCents":0,"grossCents":3498}}"""^^rdf:JSON
#   ?OrderUriStr = "urn:example:order:A300"
#   ?Orders = ("""{"orderId":"A100","shipTo":{"country":"BE"},"customer":{"email":"Ada@Example.ORG","vatId":null},"lines":[{"sku":"wid-001","qty":2,"unitCents":999},{"sku":"GAD-002","qty":1,"unitCents":1500}],"declared":{"netCents":3498,"vatCents":509,"grossCents":4007}}"""^^rdf:JSON """{"orderId":"A200","shipTo":{"country":"US"},"customer":{"email":"bob@example.org","vatId":null},"lines":[{"sku":"WID-001","qty":2,"unitCents":999},{"sku":"GAD-002","qty":1,"unitCents":1500}],"declared":{"netCents":3498,"vatCents":0,"grossCents":3498}}"""^^rdf:JSON """{"orderId":"A300","shipTo":{"country":"NL"},"customer":{"email":"acct@company.nl","vatId":"NL999999999B01"},"lines":[{"sku":"WID-001","qty":2,"unitCents":999},{"sku":"GAD-002","qty":1,"unitCents":1500}],"declared":{"netCents":3498,"vatCents":0,"grossCents":3498}}"""^^rdf:JSON """{"orderId":"A301","shipTo":{"country":"NL"},"customer":{"email":"billing@company.nl","vatId":"NL999999999B01"},"lines":[{"sku":"WID-001","qty":2,"unitCents":999},{"sku":"GAD-002","qty":1,"unitCents":1500}],"declared":{"netCents":3498,"vatCents":0,"grossCents":3498}}"""^^rdf:JSON """{"orderId":"A400","shipTo":{"country":"BE"},"customer":{"email":"ada@other.example","vatId":null},"lines":[{"sku":"WID-001","qty":2,"unitCents":999},{"sku":"GAD-002","qty":1,"unitCents":1500}],"declared":{"netCents":3498,"vatCents":508,"grossCents":4006}}"""^^rdf:JSON)
#   ?Product = ex:Gadget
#   ?Qty = 1
#   ?SkuCat = "GAD-002"
#   ?SkuJson = "GAD-002"
#   ?UnitCents = 1500
# Therefore the derived triple above is entailed by the rules and facts.
# ----------------------------------------------------------------------

<urn:example:order:A300> ex:line <urn:example:order:A300#line:1> .

# ----------------------------------------------------------------------
# Proof for derived triple:
#   <urn:example:order:A300#line:1> a ex:OrderLine .
# It holds because the following instance of the rule body is provable:
#   ex:feed ex:json """{
#     "meta~data": { "batch": "2025-12-18" },
#     "orders": [
#       {
#         "orderId": "A100",
#         "shipTo": { "country": "BE" },
#         "customer": { "email": "Ada@Example.ORG", "vatId": null },
#         "lines": [
#           { "sku": "wid-001", "qty": 2, "unitCents": 999 },
#           { "sku": "GAD-002", "qty": 1, "unitCents": 1500 }
#         ],
#         "declared": { "netCents": 3498, "vatCents": 509, "grossCents": 4007 }
#       },
#       {
#         "orderId": "A200",
#         "shipTo": { "country": "US" },
#         "customer": { "email": "bob@example.org", "vatId": null },
#         "lines": [
#           { "sku": "WID-001", "qty": 2, "unitCents": 999 },
#           { "sku": "GAD-002", "qty": 1, "unitCents": 1500 }
#         ],
#         "declared": { "netCents": 3498, "vatCents": 0, "grossCents": 3498 }
#       },
#       {
#         "orderId": "A300",
#         "shipTo": { "country": "NL" },
#         "customer": { "email": "acct@company.nl", "vatId": "NL999999999B01" },
#         "lines": [
#           { "sku": "WID-001", "qty": 2, "unitCents": 999 },
#           { "sku": "GAD-002", "qty": 1, "unitCents": 1500 }
#         ],
#         "declared": { "netCents": 3498, "vatCents": 0, "grossCents": 3498 }
#       },
#       {
#         "orderId": "A301",
#         "shipTo": { "country": "NL" },
#         "customer": { "email": "billing@company.nl", "vatId": "NL999999999B01" },
#         "lines": [
#           { "sku": "WID-001", "qty": 2, "unitCents": 999 },
#           { "sku": "GAD-002", "qty": 1, "unitCents": 1500 }
#         ],
#         "declared": { "netCents": 3498, "vatCents": 0, "grossCents": 3498 }
#       },
#       {
#         "orderId": "A400",
#         "shipTo": { "country": "BE" },
#         "customer": { "email": "ada@other.example", "vatId": null },
#         "lines": [
#           { "sku": "WID-001", "qty": 2, "unitCents": 999 },
#           { "sku": "GAD-002", "qty": 1, "unitCents": 1500 }
#         ],
#         "declared": { "netCents": 3498, "vatCents": 508, "grossCents": 4006 }
#       }
#     ]
#   }"""^^rdf:JSON .
#   ("""{
#     "meta~data": { "batch": "2025-12-18" },
#     "orders": [
#       {
#         "orderId": "A100",
#         "shipTo": { "country": "BE" },
#         "customer": { "email": "Ada@Example.ORG", "vatId": null },
#         "lines": [
#           { "sku": "wid-001", "qty": 2, "unitCents": 999 },
#           { "sku": "GAD-002", "qty": 1, "unitCents": 1500 }
#         ],
#         "declared": { "netCents": 3498, "vatCents": 509, "grossCents": 4007 }
#       },
#       {
#         "orderId": "A200",
#         "shipTo": { "country": "US" },
#         "customer": { "email": "bob@example.org", "vatId": null },
#         "lines": [
#           { "sku": "WID-001", "qty": 2, "unitCents": 999 },
#           { "sku": "GAD-002", "qty": 1, "unitCents": 1500 }
#         ],
#         "declared": { "netCents": 3498, "vatCents": 0, "grossCents": 3498 }
#       },
#       {
#         "orderId": "A300",
#         "shipTo": { "country": "NL" },
#         "customer": { "email": "acct@company.nl", "vatId": "NL999999999B01" },
#         "lines": [
#           { "sku": "WID-001", "qty": 2, "unitCents": 999 },
#           { "sku": "GAD-002", "qty": 1, "unitCents": 1500 }
#         ],
#         "declared": { "netCents": 3498, "vatCents": 0, "grossCents": 3498 }
#       },
#       {
#         "orderId": "A301",
#         "shipTo": { "country": "NL" },
#         "customer": { "email": "billing@company.nl", "vatId": "NL999999999B01" },
#         "lines": [
#           { "sku": "WID-001", "qty": 2, "unitCents": 999 },
#           { "sku": "GAD-002", "qty": 1, "unitCents": 1500 }
#         ],
#         "declared": { "netCents": 3498, "vatCents": 0, "grossCents": 3498 }
#       },
#       {
#         "orderId": "A400",
#         "shipTo": { "country": "BE" },
#         "customer": { "email": "ada@other.example", "vatId": null },
#         "lines": [
#           { "sku": "WID-001", "qty": 2, "unitCents": 999 },
#           { "sku": "GAD-002", "qty": 1, "unitCents": 1500 }
#         ],
#         "declared": { "netCents": 3498, "vatCents": 508, "grossCents": 4006 }
#       }
#     ]
#   }"""^^rdf:JSON "/orders") string:jsonPointer ("""{"orderId":"A100","shipTo":{"country":"BE"},"customer":{"email":"Ada@Example.ORG","vatId":null},"lines":[{"sku":"wid-001","qty":2,"unitCents":999},{"sku":"GAD-002","qty":1,"unitCents":1500}],"declared":{"netCents":3498,"vatCents":509,"grossCents":4007}}"""^^rdf:JSON """{"orderId":"A200","shipTo":{"country":"US"},"customer":{"email":"bob@example.org","vatId":null},"lines":[{"sku":"WID-001","qty":2,"unitCents":999},{"sku":"GAD-002","qty":1,"unitCents":1500}],"declared":{"netCents":3498,"vatCents":0,"grossCents":3498}}"""^^rdf:JSON """{"orderId":"A300","shipTo":{"country":"NL"},"customer":{"email":"acct@company.nl","vatId":"NL999999999B01"},"lines":[{"sku":"WID-001","qty":2,"unitCents":999},{"sku":"GAD-002","qty":1,"unitCents":1500}],"declared":{"netCents":3498,"vatCents":0,"grossCents":3498}}"""^^rdf:JSON """{"orderId":"A301","shipTo":{"country":"NL"},"customer":{"email":"billing@company.nl","vatId":"NL999999999B01"},"lines":[{"sku":"WID-001","qty":2,"unitCents":999},{"sku":"GAD-002","qty":1,"unitCents":1500}],"declared":{"netCents":3498,"vatCents":0,"grossCents":3498}}"""^^rdf:JSON """{"orderId":"A400","shipTo":{"country":"BE"},"customer":{"email":"ada@other.example","vatId":null},"lines":[{"sku":"WID-001","qty":2,"unitCents":999},{"sku":"GAD-002","qty":1,"unitCents":1500}],"declared":{"netCents":3498,"vatCents":508,"grossCents":4006}}"""^^rdf:JSON) .
#   ("""{"orderId":"A100","shipTo":{"country":"BE"},"customer":{"email":"Ada@Example.ORG","vatId":null},"lines":[{"sku":"wid-001","qty":2,"unitCents":999},{"sku":"GAD-002","qty":1,"unitCents":1500}],"declared":{"netCents":3498,"vatCents":509,"grossCents":4007}}"""^^rdf:JSON """{"orderId":"A200","shipTo":{"country":"US"},"customer":{"email":"bob@example.org","vatId":null},"lines":[{"sku":"WID-001","qty":2,"unitCents":999},{"sku":"GAD-002","qty":1,"unitCents":1500}],"declared":{"netCents":3498,"vatCents":0,"grossCents":3498}}"""^^rdf:JSON """{"orderId":"A300","shipTo":{"country":"NL"},"customer":{"email":"acct@company.nl","vatId":"NL999999999B01"},"lines":[{"sku":"WID-001","qty":2,"unitCents":999},{"sku":"GAD-002","qty":1,"unitCents":1500}],"declared":{"netCents":3498,"vatCents":0,"grossCents":3498}}"""^^rdf:JSON """{"orderId":"A301","shipTo":{"country":"NL"},"customer":{"email":"billing@company.nl","vatId":"NL999999999B01"},"lines":[{"sku":"WID-001","qty":2,"unitCents":999},{"sku":"GAD-002","qty":1,"unitCents":1500}],"declared":{"netCents":3498,"vatCents":0,"grossCents":3498}}"""^^rdf:JSON """{"orderId":"A400","shipTo":{"country":"BE"},"customer":{"email":"ada@other.example","vatId":null},"lines":[{"sku":"WID-001","qty":2,"unitCents":999},{"sku":"GAD-002","qty":1,"unitCents":1500}],"declared":{"netCents":3498,"vatCents":508,"grossCents":4006}}"""^^rdf:JSON) list:iterate (2 """{"orderId":"A300","shipTo":{"country":"NL"},"customer":{"email":"acct@company.nl","vatId":"NL999999999B01"},"lines":[{"sku":"WID-001","qty":2,"unitCents":999},{"sku":"GAD-002","qty":1,"unitCents":1500}],"declared":{"netCents":3498,"vatCents":0,"grossCents":3498}}"""^^rdf:JSON) .
#   ("""{"orderId":"A300","shipTo":{"country":"NL"},"customer":{"email":"acct@company.nl","vatId":"NL999999999B01"},"lines":[{"sku":"WID-001","qty":2,"unitCents":999},{"sku":"GAD-002","qty":1,"unitCents":1500}],"declared":{"netCents":3498,"vatCents":0,"grossCents":3498}}"""^^rdf:JSON "/orderId") string:jsonPointer "A300" .
#   ("urn:example:order:%s" "A300") string:format "urn:example:order:A300" .
#   <urn:example:order:A300> log:uri "urn:example:order:A300" .
#   ("""{"orderId":"A300","shipTo":{"country":"NL"},"customer":{"email":"acct@company.nl","vatId":"NL999999999B01"},"lines":[{"sku":"WID-001","qty":2,"unitCents":999},{"sku":"GAD-002","qty":1,"unitCents":1500}],"declared":{"netCents":3498,"vatCents":0,"grossCents":3498}}"""^^rdf:JSON "/lines") string:jsonPointer ("""{"sku":"WID-001","qty":2,"unitCents":999}"""^^rdf:JSON """{"sku":"GAD-002","qty":1,"unitCents":1500}"""^^rdf:JSON) .
#   ("""{"sku":"WID-001","qty":2,"unitCents":999}"""^^rdf:JSON """{"sku":"GAD-002","qty":1,"unitCents":1500}"""^^rdf:JSON) list:iterate (1 """{"sku":"GAD-002","qty":1,"unitCents":1500}"""^^rdf:JSON) .
#   ("""{"sku":"GAD-002","qty":1,"unitCents":1500}"""^^rdf:JSON "/sku") string:jsonPointer "GAD-002" .
#   ("""{"sku":"GAD-002","qty":1,"unitCents":1500}"""^^rdf:JSON "/qty") string:jsonPointer 1 .
#   ("""{"sku":"GAD-002","qty":1,"unitCents":1500}"""^^rdf:JSON "/unitCents") string:jsonPointer 1500 .
#   ex:Gadget a ex:Product .
#   ex:Gadget ex:sku "GAD-002" .
#   (1 1500) math:product 1500 .
#   ("urn:example:order:%s#line:%s" "A300" 1) string:format "urn:example:order:A300#line:1" .
#   <urn:example:order:A300#line:1> log:uri "urn:example:order:A300#line:1" .
#   "GAD-002" string:equalIgnoringCase "GAD-002" .
# via the schematic forward rule:
#   {
#     ex:feed ex:json ?J .
#     (?J "/orders") string:jsonPointer ?Orders .
#     ?Orders list:iterate (?OrderIndex ?OrderJson) .
#     (?OrderJson "/orderId") string:jsonPointer ?OrderId .
#     ("urn:example:order:%s" ?OrderId) string:format ?OrderUriStr .
#     ?Order log:uri ?OrderUriStr .
#     (?OrderJson "/lines") string:jsonPointer ?Lines .
#     ?Lines list:iterate (?LineIndex ?LineJson) .
#     (?LineJson "/sku") string:jsonPointer ?SkuJson .
#     (?LineJson "/qty") string:jsonPointer ?Qty .
#     (?LineJson "/unitCents") string:jsonPointer ?UnitCents .
#     ?Product a ex:Product .
#     ?Product ex:sku ?SkuCat .
#     (?Qty ?UnitCents) math:product ?NetCents .
#     ("urn:example:order:%s#line:%s" ?OrderId ?LineIndex) string:format ?LineUriStr .
#     ?Line log:uri ?LineUriStr .
#     ?SkuJson string:equalIgnoringCase ?SkuCat .
#   } => {
#     ?Order ex:line ?Line .
#     ?Line a ex:OrderLine .
#     ?Line ex:lineIndex ?LineIndex .
#     ?Line ex:product ?Product .
#     ?Line ex:sku ?SkuCat .
#     ?Line ex:qty ?Qty .
#     ?Line ex:unitCents ?UnitCents .
#     ?Line ex:netCents ?NetCents .
#   } .
# with substitution (on rule variables):
#   ?J = """{
#     "meta~data": { "batch": "2025-12-18" },
#     "orders": [
#     {
#     "orderId": "A100",
#     "shipTo": { "country": "BE" },
#     "customer": { "email": "Ada@Example.ORG", "vatId": null },
#     "lines": [
#     { "sku": "wid-001", "qty": 2, "unitCents": 999 },
#     { "sku": "GAD-002", "qty": 1, "unitCents": 1500 }
#     ],
#     "declared": { "netCents": 3498, "vatCents": 509, "grossCents": 4007 }
#     },
#     {
#     "orderId": "A200",
#     "shipTo": { "country": "US" },
#     "customer": { "email": "bob@example.org", "vatId": null },
#     "lines": [
#     { "sku": "WID-001", "qty": 2, "unitCents": 999 },
#     { "sku": "GAD-002", "qty": 1, "unitCents": 1500 }
#     ],
#     "declared": { "netCents": 3498, "vatCents": 0, "grossCents": 3498 }
#     },
#     {
#     "orderId": "A300",
#     "shipTo": { "country": "NL" },
#     "customer": { "email": "acct@company.nl", "vatId": "NL999999999B01" },
#     "lines": [
#     { "sku": "WID-001", "qty": 2, "unitCents": 999 },
#     { "sku": "GAD-002", "qty": 1, "unitCents": 1500 }
#     ],
#     "declared": { "netCents": 3498, "vatCents": 0, "grossCents": 3498 }
#     },
#     {
#     "orderId": "A301",
#     "shipTo": { "country": "NL" },
#     "customer": { "email": "billing@company.nl", "vatId": "NL999999999B01" },
#     "lines": [
#     { "sku": "WID-001", "qty": 2, "unitCents": 999 },
#     { "sku": "GAD-002", "qty": 1, "unitCents": 1500 }
#     ],
#     "declared": { "netCents": 3498, "vatCents": 0, "grossCents": 3498 }
#     },
#     {
#     "orderId": "A400",
#     "shipTo": { "country": "BE" },
#     "customer": { "email": "ada@other.example", "vatId": null },
#     "lines": [
#     { "sku": "WID-001", "qty": 2, "unitCents": 999 },
#     { "sku": "GAD-002", "qty": 1, "unitCents": 1500 }
#     ],
#     "declared": { "netCents": 3498, "vatCents": 508, "grossCents": 4006 }
#     }
#     ]
#   }"""^^rdf:JSON
#   ?Line = <urn:example:order:A300#line:1>
#   ?LineIndex = 1
#   ?LineJson = """{"sku":"GAD-002","qty":1,"unitCents":1500}"""^^rdf:JSON
#   ?LineUriStr = "urn:example:order:A300#line:1"
#   ?Lines = ("""{"sku":"WID-001","qty":2,"unitCents":999}"""^^rdf:JSON """{"sku":"GAD-002","qty":1,"unitCents":1500}"""^^rdf:JSON)
#   ?NetCents = 1500
#   ?Order = <urn:example:order:A300>
#   ?OrderId = "A300"
#   ?OrderIndex = 2
#   ?OrderJson = """{"orderId":"A300","shipTo":{"country":"NL"},"customer":{"email":"acct@company.nl","vatId":"NL999999999B01"},"lines":[{"sku":"WID-001","qty":2,"unitCents":999},{"sku":"GAD-002","qty":1,"unitCents":1500}],"declared":{"netCents":3498,"vatCents":0,"grossCents":3498}}"""^^rdf:JSON
#   ?OrderUriStr = "urn:example:order:A300"
#   ?Orders = ("""{"orderId":"A100","shipTo":{"country":"BE"},"customer":{"email":"Ada@Example.ORG","vatId":null},"lines":[{"sku":"wid-001","qty":2,"unitCents":999},{"sku":"GAD-002","qty":1,"unitCents":1500}],"declared":{"netCents":3498,"vatCents":509,"grossCents":4007}}"""^^rdf:JSON """{"orderId":"A200","shipTo":{"country":"US"},"customer":{"email":"bob@example.org","vatId":null},"lines":[{"sku":"WID-001","qty":2,"unitCents":999},{"sku":"GAD-002","qty":1,"unitCents":1500}],"declared":{"netCents":3498,"vatCents":0,"grossCents":3498}}"""^^rdf:JSON """{"orderId":"A300","shipTo":{"country":"NL"},"customer":{"email":"acct@company.nl","vatId":"NL999999999B01"},"lines":[{"sku":"WID-001","qty":2,"unitCents":999},{"sku":"GAD-002","qty":1,"unitCents":1500}],"declared":{"netCents":3498,"vatCents":0,"grossCents":3498}}"""^^rdf:JSON """{"orderId":"A301","shipTo":{"country":"NL"},"customer":{"email":"billing@company.nl","vatId":"NL999999999B01"},"lines":[{"sku":"WID-001","qty":2,"unitCents":999},{"sku":"GAD-002","qty":1,"unitCents":1500}],"declared":{"netCents":3498,"vatCents":0,"grossCents":3498}}"""^^rdf:JSON """{"orderId":"A400","shipTo":{"country":"BE"},"customer":{"email":"ada@other.example","vatId":null},"lines":[{"sku":"WID-001","qty":2,"unitCents":999},{"sku":"GAD-002","qty":1,"unitCents":1500}],"declared":{"netCents":3498,"vatCents":508,"grossCents":4006}}"""^^rdf:JSON)
#   ?Product = ex:Gadget
#   ?Qty = 1
#   ?SkuCat = "GAD-002"
#   ?SkuJson = "GAD-002"
#   ?UnitCents = 1500
# Therefore the derived triple above is entailed by the rules and facts.
# ----------------------------------------------------------------------

<urn:example:order:A300#line:1> a ex:OrderLine .

# ----------------------------------------------------------------------
# Proof for derived triple:
#   <urn:example:order:A300#line:1> ex:lineIndex 1 .
# It holds because the following instance of the rule body is provable:
#   ex:feed ex:json """{
#     "meta~data": { "batch": "2025-12-18" },
#     "orders": [
#       {
#         "orderId": "A100",
#         "shipTo": { "country": "BE" },
#         "customer": { "email": "Ada@Example.ORG", "vatId": null },
#         "lines": [
#           { "sku": "wid-001", "qty": 2, "unitCents": 999 },
#           { "sku": "GAD-002", "qty": 1, "unitCents": 1500 }
#         ],
#         "declared": { "netCents": 3498, "vatCents": 509, "grossCents": 4007 }
#       },
#       {
#         "orderId": "A200",
#         "shipTo": { "country": "US" },
#         "customer": { "email": "bob@example.org", "vatId": null },
#         "lines": [
#           { "sku": "WID-001", "qty": 2, "unitCents": 999 },
#           { "sku": "GAD-002", "qty": 1, "unitCents": 1500 }
#         ],
#         "declared": { "netCents": 3498, "vatCents": 0, "grossCents": 3498 }
#       },
#       {
#         "orderId": "A300",
#         "shipTo": { "country": "NL" },
#         "customer": { "email": "acct@company.nl", "vatId": "NL999999999B01" },
#         "lines": [
#           { "sku": "WID-001", "qty": 2, "unitCents": 999 },
#           { "sku": "GAD-002", "qty": 1, "unitCents": 1500 }
#         ],
#         "declared": { "netCents": 3498, "vatCents": 0, "grossCents": 3498 }
#       },
#       {
#         "orderId": "A301",
#         "shipTo": { "country": "NL" },
#         "customer": { "email": "billing@company.nl", "vatId": "NL999999999B01" },
#         "lines": [
#           { "sku": "WID-001", "qty": 2, "unitCents": 999 },
#           { "sku": "GAD-002", "qty": 1, "unitCents": 1500 }
#         ],
#         "declared": { "netCents": 3498, "vatCents": 0, "grossCents": 3498 }
#       },
#       {
#         "orderId": "A400",
#         "shipTo": { "country": "BE" },
#         "customer": { "email": "ada@other.example", "vatId": null },
#         "lines": [
#           { "sku": "WID-001", "qty": 2, "unitCents": 999 },
#           { "sku": "GAD-002", "qty": 1, "unitCents": 1500 }
#         ],
#         "declared": { "netCents": 3498, "vatCents": 508, "grossCents": 4006 }
#       }
#     ]
#   }"""^^rdf:JSON .
#   ("""{
#     "meta~data": { "batch": "2025-12-18" },
#     "orders": [
#       {
#         "orderId": "A100",
#         "shipTo": { "country": "BE" },
#         "customer": { "email": "Ada@Example.ORG", "vatId": null },
#         "lines": [
#           { "sku": "wid-001", "qty": 2, "unitCents": 999 },
#           { "sku": "GAD-002", "qty": 1, "unitCents": 1500 }
#         ],
#         "declared": { "netCents": 3498, "vatCents": 509, "grossCents": 4007 }
#       },
#       {
#         "orderId": "A200",
#         "shipTo": { "country": "US" },
#         "customer": { "email": "bob@example.org", "vatId": null },
#         "lines": [
#           { "sku": "WID-001", "qty": 2, "unitCents": 999 },
#           { "sku": "GAD-002", "qty": 1, "unitCents": 1500 }
#         ],
#         "declared": { "netCents": 3498, "vatCents": 0, "grossCents": 3498 }
#       },
#       {
#         "orderId": "A300",
#         "shipTo": { "country": "NL" },
#         "customer": { "email": "acct@company.nl", "vatId": "NL999999999B01" },
#         "lines": [
#           { "sku": "WID-001", "qty": 2, "unitCents": 999 },
#           { "sku": "GAD-002", "qty": 1, "unitCents": 1500 }
#         ],
#         "declared": { "netCents": 3498, "vatCents": 0, "grossCents": 3498 }
#       },
#       {
#         "orderId": "A301",
#         "shipTo": { "country": "NL" },
#         "customer": { "email": "billing@company.nl", "vatId": "NL999999999B01" },
#         "lines": [
#           { "sku": "WID-001", "qty": 2, "unitCents": 999 },
#           { "sku": "GAD-002", "qty": 1, "unitCents": 1500 }
#         ],
#         "declared": { "netCents": 3498, "vatCents": 0, "grossCents": 3498 }
#       },
#       {
#         "orderId": "A400",
#         "shipTo": { "country": "BE" },
#         "customer": { "email": "ada@other.example", "vatId": null },
#         "lines": [
#           { "sku": "WID-001", "qty": 2, "unitCents": 999 },
#           { "sku": "GAD-002", "qty": 1, "unitCents": 1500 }
#         ],
#         "declared": { "netCents": 3498, "vatCents": 508, "grossCents": 4006 }
#       }
#     ]
#   }"""^^rdf:JSON "/orders") string:jsonPointer ("""{"orderId":"A100","shipTo":{"country":"BE"},"customer":{"email":"Ada@Example.ORG","vatId":null},"lines":[{"sku":"wid-001","qty":2,"unitCents":999},{"sku":"GAD-002","qty":1,"unitCents":1500}],"declared":{"netCents":3498,"vatCents":509,"grossCents":4007}}"""^^rdf:JSON """{"orderId":"A200","shipTo":{"country":"US"},"customer":{"email":"bob@example.org","vatId":null},"lines":[{"sku":"WID-001","qty":2,"unitCents":999},{"sku":"GAD-002","qty":1,"unitCents":1500}],"declared":{"netCents":3498,"vatCents":0,"grossCents":3498}}"""^^rdf:JSON """{"orderId":"A300","shipTo":{"country":"NL"},"customer":{"email":"acct@company.nl","vatId":"NL999999999B01"},"lines":[{"sku":"WID-001","qty":2,"unitCents":999},{"sku":"GAD-002","qty":1,"unitCents":1500}],"declared":{"netCents":3498,"vatCents":0,"grossCents":3498}}"""^^rdf:JSON """{"orderId":"A301","shipTo":{"country":"NL"},"customer":{"email":"billing@company.nl","vatId":"NL999999999B01"},"lines":[{"sku":"WID-001","qty":2,"unitCents":999},{"sku":"GAD-002","qty":1,"unitCents":1500}],"declared":{"netCents":3498,"vatCents":0,"grossCents":3498}}"""^^rdf:JSON """{"orderId":"A400","shipTo":{"country":"BE"},"customer":{"email":"ada@other.example","vatId":null},"lines":[{"sku":"WID-001","qty":2,"unitCents":999},{"sku":"GAD-002","qty":1,"unitCents":1500}],"declared":{"netCents":3498,"vatCents":508,"grossCents":4006}}"""^^rdf:JSON) .
#   ("""{"orderId":"A100","shipTo":{"country":"BE"},"customer":{"email":"Ada@Example.ORG","vatId":null},"lines":[{"sku":"wid-001","qty":2,"unitCents":999},{"sku":"GAD-002","qty":1,"unitCents":1500}],"declared":{"netCents":3498,"vatCents":509,"grossCents":4007}}"""^^rdf:JSON """{"orderId":"A200","shipTo":{"country":"US"},"customer":{"email":"bob@example.org","vatId":null},"lines":[{"sku":"WID-001","qty":2,"unitCents":999},{"sku":"GAD-002","qty":1,"unitCents":1500}],"declared":{"netCents":3498,"vatCents":0,"grossCents":3498}}"""^^rdf:JSON """{"orderId":"A300","shipTo":{"country":"NL"},"customer":{"email":"acct@company.nl","vatId":"NL999999999B01"},"lines":[{"sku":"WID-001","qty":2,"unitCents":999},{"sku":"GAD-002","qty":1,"unitCents":1500}],"declared":{"netCents":3498,"vatCents":0,"grossCents":3498}}"""^^rdf:JSON """{"orderId":"A301","shipTo":{"country":"NL"},"customer":{"email":"billing@company.nl","vatId":"NL999999999B01"},"lines":[{"sku":"WID-001","qty":2,"unitCents":999},{"sku":"GAD-002","qty":1,"unitCents":1500}],"declared":{"netCents":3498,"vatCents":0,"grossCents":3498}}"""^^rdf:JSON """{"orderId":"A400","shipTo":{"country":"BE"},"customer":{"email":"ada@other.example","vatId":null},"lines":[{"sku":"WID-001","qty":2,"unitCents":999},{"sku":"GAD-002","qty":1,"unitCents":1500}],"declared":{"netCents":3498,"vatCents":508,"grossCents":4006}}"""^^rdf:JSON) list:iterate (2 """{"orderId":"A300","shipTo":{"country":"NL"},"customer":{"email":"acct@company.nl","vatId":"NL999999999B01"},"lines":[{"sku":"WID-001","qty":2,"unitCents":999},{"sku":"GAD-002","qty":1,"unitCents":1500}],"declared":{"netCents":3498,"vatCents":0,"grossCents":3498}}"""^^rdf:JSON) .
#   ("""{"orderId":"A300","shipTo":{"country":"NL"},"customer":{"email":"acct@company.nl","vatId":"NL999999999B01"},"lines":[{"sku":"WID-001","qty":2,"unitCents":999},{"sku":"GAD-002","qty":1,"unitCents":1500}],"declared":{"netCents":3498,"vatCents":0,"grossCents":3498}}"""^^rdf:JSON "/orderId") string:jsonPointer "A300" .
#   ("urn:example:order:%s" "A300") string:format "urn:example:order:A300" .
#   <urn:example:order:A300> log:uri "urn:example:order:A300" .
#   ("""{"orderId":"A300","shipTo":{"country":"NL"},"customer":{"email":"acct@company.nl","vatId":"NL999999999B01"},"lines":[{"sku":"WID-001","qty":2,"unitCents":999},{"sku":"GAD-002","qty":1,"unitCents":1500}],"declared":{"netCents":3498,"vatCents":0,"grossCents":3498}}"""^^rdf:JSON "/lines") string:jsonPointer ("""{"sku":"WID-001","qty":2,"unitCents":999}"""^^rdf:JSON """{"sku":"GAD-002","qty":1,"unitCents":1500}"""^^rdf:JSON) .
#   ("""{"sku":"WID-001","qty":2,"unitCents":999}"""^^rdf:JSON """{"sku":"GAD-002","qty":1,"unitCents":1500}"""^^rdf:JSON) list:iterate (1 """{"sku":"GAD-002","qty":1,"unitCents":1500}"""^^rdf:JSON) .
#   ("""{"sku":"GAD-002","qty":1,"unitCents":1500}"""^^rdf:JSON "/sku") string:jsonPointer "GAD-002" .
#   ("""{"sku":"GAD-002","qty":1,"unitCents":1500}"""^^rdf:JSON "/qty") string:jsonPointer 1 .
#   ("""{"sku":"GAD-002","qty":1,"unitCents":1500}"""^^rdf:JSON "/unitCents") string:jsonPointer 1500 .
#   ex:Gadget a ex:Product .
#   ex:Gadget ex:sku "GAD-002" .
#   (1 1500) math:product 1500 .
#   ("urn:example:order:%s#line:%s" "A300" 1) string:format "urn:example:order:A300#line:1" .
#   <urn:example:order:A300#line:1> log:uri "urn:example:order:A300#line:1" .
#   "GAD-002" string:equalIgnoringCase "GAD-002" .
# via the schematic forward rule:
#   {
#     ex:feed ex:json ?J .
#     (?J "/orders") string:jsonPointer ?Orders .
#     ?Orders list:iterate (?OrderIndex ?OrderJson) .
#     (?OrderJson "/orderId") string:jsonPointer ?OrderId .
#     ("urn:example:order:%s" ?OrderId) string:format ?OrderUriStr .
#     ?Order log:uri ?OrderUriStr .
#     (?OrderJson "/lines") string:jsonPointer ?Lines .
#     ?Lines list:iterate (?LineIndex ?LineJson) .
#     (?LineJson "/sku") string:jsonPointer ?SkuJson .
#     (?LineJson "/qty") string:jsonPointer ?Qty .
#     (?LineJson "/unitCents") string:jsonPointer ?UnitCents .
#     ?Product a ex:Product .
#     ?Product ex:sku ?SkuCat .
#     (?Qty ?UnitCents) math:product ?NetCents .
#     ("urn:example:order:%s#line:%s" ?OrderId ?LineIndex) string:format ?LineUriStr .
#     ?Line log:uri ?LineUriStr .
#     ?SkuJson string:equalIgnoringCase ?SkuCat .
#   } => {
#     ?Order ex:line ?Line .
#     ?Line a ex:OrderLine .
#     ?Line ex:lineIndex ?LineIndex .
#     ?Line ex:product ?Product .
#     ?Line ex:sku ?SkuCat .
#     ?Line ex:qty ?Qty .
#     ?Line ex:unitCents ?UnitCents .
#     ?Line ex:netCents ?NetCents .
#   } .
# with substitution (on rule variables):
#   ?J = """{
#     "meta~data": { "batch": "2025-12-18" },
#     "orders": [
#     {
#     "orderId": "A100",
#     "shipTo": { "country": "BE" },
#     "customer": { "email": "Ada@Example.ORG", "vatId": null },
#     "lines": [
#     { "sku": "wid-001", "qty": 2, "unitCents": 999 },
#     { "sku": "GAD-002", "qty": 1, "unitCents": 1500 }
#     ],
#     "declared": { "netCents": 3498, "vatCents": 509, "grossCents": 4007 }
#     },
#     {
#     "orderId": "A200",
#     "shipTo": { "country": "US" },
#     "customer": { "email": "bob@example.org", "vatId": null },
#     "lines": [
#     { "sku": "WID-001", "qty": 2, "unitCents": 999 },
#     { "sku": "GAD-002", "qty": 1, "unitCents": 1500 }
#     ],
#     "declared": { "netCents": 3498, "vatCents": 0, "grossCents": 3498 }
#     },
#     {
#     "orderId": "A300",
#     "shipTo": { "country": "NL" },
#     "customer": { "email": "acct@company.nl", "vatId": "NL999999999B01" },
#     "lines": [
#     { "sku": "WID-001", "qty": 2, "unitCents": 999 },
#     { "sku": "GAD-002", "qty": 1, "unitCents": 1500 }
#     ],
#     "declared": { "netCents": 3498, "vatCents": 0, "grossCents": 3498 }
#     },
#     {
#     "orderId": "A301",
#     "shipTo": { "country": "NL" },
#     "customer": { "email": "billing@company.nl", "vatId": "NL999999999B01" },
#     "lines": [
#     { "sku": "WID-001", "qty": 2, "unitCents": 999 },
#     { "sku": "GAD-002", "qty": 1, "unitCents": 1500 }
#     ],
#     "declared": { "netCents": 3498, "vatCents": 0, "grossCents": 3498 }
#     },
#     {
#     "orderId": "A400",
#     "shipTo": { "country": "BE" },
#     "customer": { "email": "ada@other.example", "vatId": null },
#     "lines": [
#     { "sku": "WID-001", "qty": 2, "unitCents": 999 },
#     { "sku": "GAD-002", "qty": 1, "unitCents": 1500 }
#     ],
#     "declared": { "netCents": 3498, "vatCents": 508, "grossCents": 4006 }
#     }
#     ]
#   }"""^^rdf:JSON
#   ?Line = <urn:example:order:A300#line:1>
#   ?LineIndex = 1
#   ?LineJson = """{"sku":"GAD-002","qty":1,"unitCents":1500}"""^^rdf:JSON
#   ?LineUriStr = "urn:example:order:A300#line:1"
#   ?Lines = ("""{"sku":"WID-001","qty":2,"unitCents":999}"""^^rdf:JSON """{"sku":"GAD-002","qty":1,"unitCents":1500}"""^^rdf:JSON)
#   ?NetCents = 1500
#   ?Order = <urn:example:order:A300>
#   ?OrderId = "A300"
#   ?OrderIndex = 2
#   ?OrderJson = """{"orderId":"A300","shipTo":{"country":"NL"},"customer":{"email":"acct@company.nl","vatId":"NL999999999B01"},"lines":[{"sku":"WID-001","qty":2,"unitCents":999},{"sku":"GAD-002","qty":1,"unitCents":1500}],"declared":{"netCents":3498,"vatCents":0,"grossCents":3498}}"""^^rdf:JSON
#   ?OrderUriStr = "urn:example:order:A300"
#   ?Orders = ("""{"orderId":"A100","shipTo":{"country":"BE"},"customer":{"email":"Ada@Example.ORG","vatId":null},"lines":[{"sku":"wid-001","qty":2,"unitCents":999},{"sku":"GAD-002","qty":1,"unitCents":1500}],"declared":{"netCents":3498,"vatCents":509,"grossCents":4007}}"""^^rdf:JSON """{"orderId":"A200","shipTo":{"country":"US"},"customer":{"email":"bob@example.org","vatId":null},"lines":[{"sku":"WID-001","qty":2,"unitCents":999},{"sku":"GAD-002","qty":1,"unitCents":1500}],"declared":{"netCents":3498,"vatCents":0,"grossCents":3498}}"""^^rdf:JSON """{"orderId":"A300","shipTo":{"country":"NL"},"customer":{"email":"acct@company.nl","vatId":"NL999999999B01"},"lines":[{"sku":"WID-001","qty":2,"unitCents":999},{"sku":"GAD-002","qty":1,"unitCents":1500}],"declared":{"netCents":3498,"vatCents":0,"grossCents":3498}}"""^^rdf:JSON """{"orderId":"A301","shipTo":{"country":"NL"},"customer":{"email":"billing@company.nl","vatId":"NL999999999B01"},"lines":[{"sku":"WID-001","qty":2,"unitCents":999},{"sku":"GAD-002","qty":1,"unitCents":1500}],"declared":{"netCents":3498,"vatCents":0,"grossCents":3498}}"""^^rdf:JSON """{"orderId":"A400","shipTo":{"country":"BE"},"customer":{"email":"ada@other.example","vatId":null},"lines":[{"sku":"WID-001","qty":2,"unitCents":999},{"sku":"GAD-002","qty":1,"unitCents":1500}],"declared":{"netCents":3498,"vatCents":508,"grossCents":4006}}"""^^rdf:JSON)
#   ?Product = ex:Gadget
#   ?Qty = 1
#   ?SkuCat = "GAD-002"
#   ?SkuJson = "GAD-002"
#   ?UnitCents = 1500
# Therefore the derived triple above is entailed by the rules and facts.
# ----------------------------------------------------------------------

<urn:example:order:A300#line:1> ex:lineIndex 1 .

# ----------------------------------------------------------------------
# Proof for derived triple:
#   <urn:example:order:A300#line:1> ex:product ex:Gadget .
# It holds because the following instance of the rule body is provable:
#   ex:feed ex:json """{
#     "meta~data": { "batch": "2025-12-18" },
#     "orders": [
#       {
#         "orderId": "A100",
#         "shipTo": { "country": "BE" },
#         "customer": { "email": "Ada@Example.ORG", "vatId": null },
#         "lines": [
#           { "sku": "wid-001", "qty": 2, "unitCents": 999 },
#           { "sku": "GAD-002", "qty": 1, "unitCents": 1500 }
#         ],
#         "declared": { "netCents": 3498, "vatCents": 509, "grossCents": 4007 }
#       },
#       {
#         "orderId": "A200",
#         "shipTo": { "country": "US" },
#         "customer": { "email": "bob@example.org", "vatId": null },
#         "lines": [
#           { "sku": "WID-001", "qty": 2, "unitCents": 999 },
#           { "sku": "GAD-002", "qty": 1, "unitCents": 1500 }
#         ],
#         "declared": { "netCents": 3498, "vatCents": 0, "grossCents": 3498 }
#       },
#       {
#         "orderId": "A300",
#         "shipTo": { "country": "NL" },
#         "customer": { "email": "acct@company.nl", "vatId": "NL999999999B01" },
#         "lines": [
#           { "sku": "WID-001", "qty": 2, "unitCents": 999 },
#           { "sku": "GAD-002", "qty": 1, "unitCents": 1500 }
#         ],
#         "declared": { "netCents": 3498, "vatCents": 0, "grossCents": 3498 }
#       },
#       {
#         "orderId": "A301",
#         "shipTo": { "country": "NL" },
#         "customer": { "email": "billing@company.nl", "vatId": "NL999999999B01" },
#         "lines": [
#           { "sku": "WID-001", "qty": 2, "unitCents": 999 },
#           { "sku": "GAD-002", "qty": 1, "unitCents": 1500 }
#         ],
#         "declared": { "netCents": 3498, "vatCents": 0, "grossCents": 3498 }
#       },
#       {
#         "orderId": "A400",
#         "shipTo": { "country": "BE" },
#         "customer": { "email": "ada@other.example", "vatId": null },
#         "lines": [
#           { "sku": "WID-001", "qty": 2, "unitCents": 999 },
#           { "sku": "GAD-002", "qty": 1, "unitCents": 1500 }
#         ],
#         "declared": { "netCents": 3498, "vatCents": 508, "grossCents": 4006 }
#       }
#     ]
#   }"""^^rdf:JSON .
#   ("""{
#     "meta~data": { "batch": "2025-12-18" },
#     "orders": [
#       {
#         "orderId": "A100",
#         "shipTo": { "country": "BE" },
#         "customer": { "email": "Ada@Example.ORG", "vatId": null },
#         "lines": [
#           { "sku": "wid-001", "qty": 2, "unitCents": 999 },
#           { "sku": "GAD-002", "qty": 1, "unitCents": 1500 }
#         ],
#         "declared": { "netCents": 3498, "vatCents": 509, "grossCents": 4007 }
#       },
#       {
#         "orderId": "A200",
#         "shipTo": { "country": "US" },
#         "customer": { "email": "bob@example.org", "vatId": null },
#         "lines": [
#           { "sku": "WID-001", "qty": 2, "unitCents": 999 },
#           { "sku": "GAD-002", "qty": 1, "unitCents": 1500 }
#         ],
#         "declared": { "netCents": 3498, "vatCents": 0, "grossCents": 3498 }
#       },
#       {
#         "orderId": "A300",
#         "shipTo": { "country": "NL" },
#         "customer": { "email": "acct@company.nl", "vatId": "NL999999999B01" },
#         "lines": [
#           { "sku": "WID-001", "qty": 2, "unitCents": 999 },
#           { "sku": "GAD-002", "qty": 1, "unitCents": 1500 }
#         ],
#         "declared": { "netCents": 3498, "vatCents": 0, "grossCents": 3498 }
#       },
#       {
#         "orderId": "A301",
#         "shipTo": { "country": "NL" },
#         "customer": { "email": "billing@company.nl", "vatId": "NL999999999B01" },
#         "lines": [
#           { "sku": "WID-001", "qty": 2, "unitCents": 999 },
#           { "sku": "GAD-002", "qty": 1, "unitCents": 1500 }
#         ],
#         "declared": { "netCents": 3498, "vatCents": 0, "grossCents": 3498 }
#       },
#       {
#         "orderId": "A400",
#         "shipTo": { "country": "BE" },
#         "customer": { "email": "ada@other.example", "vatId": null },
#         "lines": [
#           { "sku": "WID-001", "qty": 2, "unitCents": 999 },
#           { "sku": "GAD-002", "qty": 1, "unitCents": 1500 }
#         ],
#         "declared": { "netCents": 3498, "vatCents": 508, "grossCents": 4006 }
#       }
#     ]
#   }"""^^rdf:JSON "/orders") string:jsonPointer ("""{"orderId":"A100","shipTo":{"country":"BE"},"customer":{"email":"Ada@Example.ORG","vatId":null},"lines":[{"sku":"wid-001","qty":2,"unitCents":999},{"sku":"GAD-002","qty":1,"unitCents":1500}],"declared":{"netCents":3498,"vatCents":509,"grossCents":4007}}"""^^rdf:JSON """{"orderId":"A200","shipTo":{"country":"US"},"customer":{"email":"bob@example.org","vatId":null},"lines":[{"sku":"WID-001","qty":2,"unitCents":999},{"sku":"GAD-002","qty":1,"unitCents":1500}],"declared":{"netCents":3498,"vatCents":0,"grossCents":3498}}"""^^rdf:JSON """{"orderId":"A300","shipTo":{"country":"NL"},"customer":{"email":"acct@company.nl","vatId":"NL999999999B01"},"lines":[{"sku":"WID-001","qty":2,"unitCents":999},{"sku":"GAD-002","qty":1,"unitCents":1500}],"declared":{"netCents":3498,"vatCents":0,"grossCents":3498}}"""^^rdf:JSON """{"orderId":"A301","shipTo":{"country":"NL"},"customer":{"email":"billing@company.nl","vatId":"NL999999999B01"},"lines":[{"sku":"WID-001","qty":2,"unitCents":999},{"sku":"GAD-002","qty":1,"unitCents":1500}],"declared":{"netCents":3498,"vatCents":0,"grossCents":3498}}"""^^rdf:JSON """{"orderId":"A400","shipTo":{"country":"BE"},"customer":{"email":"ada@other.example","vatId":null},"lines":[{"sku":"WID-001","qty":2,"unitCents":999},{"sku":"GAD-002","qty":1,"unitCents":1500}],"declared":{"netCents":3498,"vatCents":508,"grossCents":4006}}"""^^rdf:JSON) .
#   ("""{"orderId":"A100","shipTo":{"country":"BE"},"customer":{"email":"Ada@Example.ORG","vatId":null},"lines":[{"sku":"wid-001","qty":2,"unitCents":999},{"sku":"GAD-002","qty":1,"unitCents":1500}],"declared":{"netCents":3498,"vatCents":509,"grossCents":4007}}"""^^rdf:JSON """{"orderId":"A200","shipTo":{"country":"US"},"customer":{"email":"bob@example.org","vatId":null},"lines":[{"sku":"WID-001","qty":2,"unitCents":999},{"sku":"GAD-002","qty":1,"unitCents":1500}],"declared":{"netCents":3498,"vatCents":0,"grossCents":3498}}"""^^rdf:JSON """{"orderId":"A300","shipTo":{"country":"NL"},"customer":{"email":"acct@company.nl","vatId":"NL999999999B01"},"lines":[{"sku":"WID-001","qty":2,"unitCents":999},{"sku":"GAD-002","qty":1,"unitCents":1500}],"declared":{"netCents":3498,"vatCents":0,"grossCents":3498}}"""^^rdf:JSON """{"orderId":"A301","shipTo":{"country":"NL"},"customer":{"email":"billing@company.nl","vatId":"NL999999999B01"},"lines":[{"sku":"WID-001","qty":2,"unitCents":999},{"sku":"GAD-002","qty":1,"unitCents":1500}],"declared":{"netCents":3498,"vatCents":0,"grossCents":3498}}"""^^rdf:JSON """{"orderId":"A400","shipTo":{"country":"BE"},"customer":{"email":"ada@other.example","vatId":null},"lines":[{"sku":"WID-001","qty":2,"unitCents":999},{"sku":"GAD-002","qty":1,"unitCents":1500}],"declared":{"netCents":3498,"vatCents":508,"grossCents":4006}}"""^^rdf:JSON) list:iterate (2 """{"orderId":"A300","shipTo":{"country":"NL"},"customer":{"email":"acct@company.nl","vatId":"NL999999999B01"},"lines":[{"sku":"WID-001","qty":2,"unitCents":999},{"sku":"GAD-002","qty":1,"unitCents":1500}],"declared":{"netCents":3498,"vatCents":0,"grossCents":3498}}"""^^rdf:JSON) .
#   ("""{"orderId":"A300","shipTo":{"country":"NL"},"customer":{"email":"acct@company.nl","vatId":"NL999999999B01"},"lines":[{"sku":"WID-001","qty":2,"unitCents":999},{"sku":"GAD-002","qty":1,"unitCents":1500}],"declared":{"netCents":3498,"vatCents":0,"grossCents":3498}}"""^^rdf:JSON "/orderId") string:jsonPointer "A300" .
#   ("urn:example:order:%s" "A300") string:format "urn:example:order:A300" .
#   <urn:example:order:A300> log:uri "urn:example:order:A300" .
#   ("""{"orderId":"A300","shipTo":{"country":"NL"},"customer":{"email":"acct@company.nl","vatId":"NL999999999B01"},"lines":[{"sku":"WID-001","qty":2,"unitCents":999},{"sku":"GAD-002","qty":1,"unitCents":1500}],"declared":{"netCents":3498,"vatCents":0,"grossCents":3498}}"""^^rdf:JSON "/lines") string:jsonPointer ("""{"sku":"WID-001","qty":2,"unitCents":999}"""^^rdf:JSON """{"sku":"GAD-002","qty":1,"unitCents":1500}"""^^rdf:JSON) .
#   ("""{"sku":"WID-001","qty":2,"unitCents":999}"""^^rdf:JSON """{"sku":"GAD-002","qty":1,"unitCents":1500}"""^^rdf:JSON) list:iterate (1 """{"sku":"GAD-002","qty":1,"unitCents":1500}"""^^rdf:JSON) .
#   ("""{"sku":"GAD-002","qty":1,"unitCents":1500}"""^^rdf:JSON "/sku") string:jsonPointer "GAD-002" .
#   ("""{"sku":"GAD-002","qty":1,"unitCents":1500}"""^^rdf:JSON "/qty") string:jsonPointer 1 .
#   ("""{"sku":"GAD-002","qty":1,"unitCents":1500}"""^^rdf:JSON "/unitCents") string:jsonPointer 1500 .
#   ex:Gadget a ex:Product .
#   ex:Gadget ex:sku "GAD-002" .
#   (1 1500) math:product 1500 .
#   ("urn:example:order:%s#line:%s" "A300" 1) string:format "urn:example:order:A300#line:1" .
#   <urn:example:order:A300#line:1> log:uri "urn:example:order:A300#line:1" .
#   "GAD-002" string:equalIgnoringCase "GAD-002" .
# via the schematic forward rule:
#   {
#     ex:feed ex:json ?J .
#     (?J "/orders") string:jsonPointer ?Orders .
#     ?Orders list:iterate (?OrderIndex ?OrderJson) .
#     (?OrderJson "/orderId") string:jsonPointer ?OrderId .
#     ("urn:example:order:%s" ?OrderId) string:format ?OrderUriStr .
#     ?Order log:uri ?OrderUriStr .
#     (?OrderJson "/lines") string:jsonPointer ?Lines .
#     ?Lines list:iterate (?LineIndex ?LineJson) .
#     (?LineJson "/sku") string:jsonPointer ?SkuJson .
#     (?LineJson "/qty") string:jsonPointer ?Qty .
#     (?LineJson "/unitCents") string:jsonPointer ?UnitCents .
#     ?Product a ex:Product .
#     ?Product ex:sku ?SkuCat .
#     (?Qty ?UnitCents) math:product ?NetCents .
#     ("urn:example:order:%s#line:%s" ?OrderId ?LineIndex) string:format ?LineUriStr .
#     ?Line log:uri ?LineUriStr .
#     ?SkuJson string:equalIgnoringCase ?SkuCat .
#   } => {
#     ?Order ex:line ?Line .
#     ?Line a ex:OrderLine .
#     ?Line ex:lineIndex ?LineIndex .
#     ?Line ex:product ?Product .
#     ?Line ex:sku ?SkuCat .
#     ?Line ex:qty ?Qty .
#     ?Line ex:unitCents ?UnitCents .
#     ?Line ex:netCents ?NetCents .
#   } .
# with substitution (on rule variables):
#   ?J = """{
#     "meta~data": { "batch": "2025-12-18" },
#     "orders": [
#     {
#     "orderId": "A100",
#     "shipTo": { "country": "BE" },
#     "customer": { "email": "Ada@Example.ORG", "vatId": null },
#     "lines": [
#     { "sku": "wid-001", "qty": 2, "unitCents": 999 },
#     { "sku": "GAD-002", "qty": 1, "unitCents": 1500 }
#     ],
#     "declared": { "netCents": 3498, "vatCents": 509, "grossCents": 4007 }
#     },
#     {
#     "orderId": "A200",
#     "shipTo": { "country": "US" },
#     "customer": { "email": "bob@example.org", "vatId": null },
#     "lines": [
#     { "sku": "WID-001", "qty": 2, "unitCents": 999 },
#     { "sku": "GAD-002", "qty": 1, "unitCents": 1500 }
#     ],
#     "declared": { "netCents": 3498, "vatCents": 0, "grossCents": 3498 }
#     },
#     {
#     "orderId": "A300",
#     "shipTo": { "country": "NL" },
#     "customer": { "email": "acct@company.nl", "vatId": "NL999999999B01" },
#     "lines": [
#     { "sku": "WID-001", "qty": 2, "unitCents": 999 },
#     { "sku": "GAD-002", "qty": 1, "unitCents": 1500 }
#     ],
#     "declared": { "netCents": 3498, "vatCents": 0, "grossCents": 3498 }
#     },
#     {
#     "orderId": "A301",
#     "shipTo": { "country": "NL" },
#     "customer": { "email": "billing@company.nl", "vatId": "NL999999999B01" },
#     "lines": [
#     { "sku": "WID-001", "qty": 2, "unitCents": 999 },
#     { "sku": "GAD-002", "qty": 1, "unitCents": 1500 }
#     ],
#     "declared": { "netCents": 3498, "vatCents": 0, "grossCents": 3498 }
#     },
#     {
#     "orderId": "A400",
#     "shipTo": { "country": "BE" },
#     "customer": { "email": "ada@other.example", "vatId": null },
#     "lines": [
#     { "sku": "WID-001", "qty": 2, "unitCents": 999 },
#     { "sku": "GAD-002", "qty": 1, "unitCents": 1500 }
#     ],
#     "declared": { "netCents": 3498, "vatCents": 508, "grossCents": 4006 }
#     }
#     ]
#   }"""^^rdf:JSON
#   ?Line = <urn:example:order:A300#line:1>
#   ?LineIndex = 1
#   ?LineJson = """{"sku":"GAD-002","qty":1,"unitCents":1500}"""^^rdf:JSON
#   ?LineUriStr = "urn:example:order:A300#line:1"
#   ?Lines = ("""{"sku":"WID-001","qty":2,"unitCents":999}"""^^rdf:JSON """{"sku":"GAD-002","qty":1,"unitCents":1500}"""^^rdf:JSON)
#   ?NetCents = 1500
#   ?Order = <urn:example:order:A300>
#   ?OrderId = "A300"
#   ?OrderIndex = 2
#   ?OrderJson = """{"orderId":"A300","shipTo":{"country":"NL"},"customer":{"email":"acct@company.nl","vatId":"NL999999999B01"},"lines":[{"sku":"WID-001","qty":2,"unitCents":999},{"sku":"GAD-002","qty":1,"unitCents":1500}],"declared":{"netCents":3498,"vatCents":0,"grossCents":3498}}"""^^rdf:JSON
#   ?OrderUriStr = "urn:example:order:A300"
#   ?Orders = ("""{"orderId":"A100","shipTo":{"country":"BE"},"customer":{"email":"Ada@Example.ORG","vatId":null},"lines":[{"sku":"wid-001","qty":2,"unitCents":999},{"sku":"GAD-002","qty":1,"unitCents":1500}],"declared":{"netCents":3498,"vatCents":509,"grossCents":4007}}"""^^rdf:JSON """{"orderId":"A200","shipTo":{"country":"US"},"customer":{"email":"bob@example.org","vatId":null},"lines":[{"sku":"WID-001","qty":2,"unitCents":999},{"sku":"GAD-002","qty":1,"unitCents":1500}],"declared":{"netCents":3498,"vatCents":0,"grossCents":3498}}"""^^rdf:JSON """{"orderId":"A300","shipTo":{"country":"NL"},"customer":{"email":"acct@company.nl","vatId":"NL999999999B01"},"lines":[{"sku":"WID-001","qty":2,"unitCents":999},{"sku":"GAD-002","qty":1,"unitCents":1500}],"declared":{"netCents":3498,"vatCents":0,"grossCents":3498}}"""^^rdf:JSON """{"orderId":"A301","shipTo":{"country":"NL"},"customer":{"email":"billing@company.nl","vatId":"NL999999999B01"},"lines":[{"sku":"WID-001","qty":2,"unitCents":999},{"sku":"GAD-002","qty":1,"unitCents":1500}],"declared":{"netCents":3498,"vatCents":0,"grossCents":3498}}"""^^rdf:JSON """{"orderId":"A400","shipTo":{"country":"BE"},"customer":{"email":"ada@other.example","vatId":null},"lines":[{"sku":"WID-001","qty":2,"unitCents":999},{"sku":"GAD-002","qty":1,"unitCents":1500}],"declared":{"netCents":3498,"vatCents":508,"grossCents":4006}}"""^^rdf:JSON)
#   ?Product = ex:Gadget
#   ?Qty = 1
#   ?SkuCat = "GAD-002"
#   ?SkuJson = "GAD-002"
#   ?UnitCents = 1500
# Therefore the derived triple above is entailed by the rules and facts.
# ----------------------------------------------------------------------

<urn:example:order:A300#line:1> ex:product ex:Gadget .

# ----------------------------------------------------------------------
# Proof for derived triple:
#   <urn:example:order:A300#line:1> ex:sku "GAD-002" .
# It holds because the following instance of the rule body is provable:
#   ex:feed ex:json """{
#     "meta~data": { "batch": "2025-12-18" },
#     "orders": [
#       {
#         "orderId": "A100",
#         "shipTo": { "country": "BE" },
#         "customer": { "email": "Ada@Example.ORG", "vatId": null },
#         "lines": [
#           { "sku": "wid-001", "qty": 2, "unitCents": 999 },
#           { "sku": "GAD-002", "qty": 1, "unitCents": 1500 }
#         ],
#         "declared": { "netCents": 3498, "vatCents": 509, "grossCents": 4007 }
#       },
#       {
#         "orderId": "A200",
#         "shipTo": { "country": "US" },
#         "customer": { "email": "bob@example.org", "vatId": null },
#         "lines": [
#           { "sku": "WID-001", "qty": 2, "unitCents": 999 },
#           { "sku": "GAD-002", "qty": 1, "unitCents": 1500 }
#         ],
#         "declared": { "netCents": 3498, "vatCents": 0, "grossCents": 3498 }
#       },
#       {
#         "orderId": "A300",
#         "shipTo": { "country": "NL" },
#         "customer": { "email": "acct@company.nl", "vatId": "NL999999999B01" },
#         "lines": [
#           { "sku": "WID-001", "qty": 2, "unitCents": 999 },
#           { "sku": "GAD-002", "qty": 1, "unitCents": 1500 }
#         ],
#         "declared": { "netCents": 3498, "vatCents": 0, "grossCents": 3498 }
#       },
#       {
#         "orderId": "A301",
#         "shipTo": { "country": "NL" },
#         "customer": { "email": "billing@company.nl", "vatId": "NL999999999B01" },
#         "lines": [
#           { "sku": "WID-001", "qty": 2, "unitCents": 999 },
#           { "sku": "GAD-002", "qty": 1, "unitCents": 1500 }
#         ],
#         "declared": { "netCents": 3498, "vatCents": 0, "grossCents": 3498 }
#       },
#       {
#         "orderId": "A400",
#         "shipTo": { "country": "BE" },
#         "customer": { "email": "ada@other.example", "vatId": null },
#         "lines": [
#           { "sku": "WID-001", "qty": 2, "unitCents": 999 },
#           { "sku": "GAD-002", "qty": 1, "unitCents": 1500 }
#         ],
#         "declared": { "netCents": 3498, "vatCents": 508, "grossCents": 4006 }
#       }
#     ]
#   }"""^^rdf:JSON .
#   ("""{
#     "meta~data": { "batch": "2025-12-18" },
#     "orders": [
#       {
#         "orderId": "A100",
#         "shipTo": { "country": "BE" },
#         "customer": { "email": "Ada@Example.ORG", "vatId": null },
#         "lines": [
#           { "sku": "wid-001", "qty": 2, "unitCents": 999 },
#           { "sku": "GAD-002", "qty": 1, "unitCents": 1500 }
#         ],
#         "declared": { "netCents": 3498, "vatCents": 509, "grossCents": 4007 }
#       },
#       {
#         "orderId": "A200",
#         "shipTo": { "country": "US" },
#         "customer": { "email": "bob@example.org", "vatId": null },
#         "lines": [
#           { "sku": "WID-001", "qty": 2, "unitCents": 999 },
#           { "sku": "GAD-002", "qty": 1, "unitCents": 1500 }
#         ],
#         "declared": { "netCents": 3498, "vatCents": 0, "grossCents": 3498 }
#       },
#       {
#         "orderId": "A300",
#         "shipTo": { "country": "NL" },
#         "customer": { "email": "acct@company.nl", "vatId": "NL999999999B01" },
#         "lines": [
#           { "sku": "WID-001", "qty": 2, "unitCents": 999 },
#           { "sku": "GAD-002", "qty": 1, "unitCents": 1500 }
#         ],
#         "declared": { "netCents": 3498, "vatCents": 0, "grossCents": 3498 }
#       },
#       {
#         "orderId": "A301",
#         "shipTo": { "country": "NL" },
#         "customer": { "email": "billing@company.nl", "vatId": "NL999999999B01" },
#         "lines": [
#           { "sku": "WID-001", "qty": 2, "unitCents": 999 },
#           { "sku": "GAD-002", "qty": 1, "unitCents": 1500 }
#         ],
#         "declared": { "netCents": 3498, "vatCents": 0, "grossCents": 3498 }
#       },
#       {
#         "orderId": "A400",
#         "shipTo": { "country": "BE" },
#         "customer": { "email": "ada@other.example", "vatId": null },
#         "lines": [
#           { "sku": "WID-001", "qty": 2, "unitCents": 999 },
#           { "sku": "GAD-002", "qty": 1, "unitCents": 1500 }
#         ],
#         "declared": { "netCents": 3498, "vatCents": 508, "grossCents": 4006 }
#       }
#     ]
#   }"""^^rdf:JSON "/orders") string:jsonPointer ("""{"orderId":"A100","shipTo":{"country":"BE"},"customer":{"email":"Ada@Example.ORG","vatId":null},"lines":[{"sku":"wid-001","qty":2,"unitCents":999},{"sku":"GAD-002","qty":1,"unitCents":1500}],"declared":{"netCents":3498,"vatCents":509,"grossCents":4007}}"""^^rdf:JSON """{"orderId":"A200","shipTo":{"country":"US"},"customer":{"email":"bob@example.org","vatId":null},"lines":[{"sku":"WID-001","qty":2,"unitCents":999},{"sku":"GAD-002","qty":1,"unitCents":1500}],"declared":{"netCents":3498,"vatCents":0,"grossCents":3498}}"""^^rdf:JSON """{"orderId":"A300","shipTo":{"country":"NL"},"customer":{"email":"acct@company.nl","vatId":"NL999999999B01"},"lines":[{"sku":"WID-001","qty":2,"unitCents":999},{"sku":"GAD-002","qty":1,"unitCents":1500}],"declared":{"netCents":3498,"vatCents":0,"grossCents":3498}}"""^^rdf:JSON """{"orderId":"A301","shipTo":{"country":"NL"},"customer":{"email":"billing@company.nl","vatId":"NL999999999B01"},"lines":[{"sku":"WID-001","qty":2,"unitCents":999},{"sku":"GAD-002","qty":1,"unitCents":1500}],"declared":{"netCents":3498,"vatCents":0,"grossCents":3498}}"""^^rdf:JSON """{"orderId":"A400","shipTo":{"country":"BE"},"customer":{"email":"ada@other.example","vatId":null},"lines":[{"sku":"WID-001","qty":2,"unitCents":999},{"sku":"GAD-002","qty":1,"unitCents":1500}],"declared":{"netCents":3498,"vatCents":508,"grossCents":4006}}"""^^rdf:JSON) .
#   ("""{"orderId":"A100","shipTo":{"country":"BE"},"customer":{"email":"Ada@Example.ORG","vatId":null},"lines":[{"sku":"wid-001","qty":2,"unitCents":999},{"sku":"GAD-002","qty":1,"unitCents":1500}],"declared":{"netCents":3498,"vatCents":509,"grossCents":4007}}"""^^rdf:JSON """{"orderId":"A200","shipTo":{"country":"US"},"customer":{"email":"bob@example.org","vatId":null},"lines":[{"sku":"WID-001","qty":2,"unitCents":999},{"sku":"GAD-002","qty":1,"unitCents":1500}],"declared":{"netCents":3498,"vatCents":0,"grossCents":3498}}"""^^rdf:JSON """{"orderId":"A300","shipTo":{"country":"NL"},"customer":{"email":"acct@company.nl","vatId":"NL999999999B01"},"lines":[{"sku":"WID-001","qty":2,"unitCents":999},{"sku":"GAD-002","qty":1,"unitCents":1500}],"declared":{"netCents":3498,"vatCents":0,"grossCents":3498}}"""^^rdf:JSON """{"orderId":"A301","shipTo":{"country":"NL"},"customer":{"email":"billing@company.nl","vatId":"NL999999999B01"},"lines":[{"sku":"WID-001","qty":2,"unitCents":999},{"sku":"GAD-002","qty":1,"unitCents":1500}],"declared":{"netCents":3498,"vatCents":0,"grossCents":3498}}"""^^rdf:JSON """{"orderId":"A400","shipTo":{"country":"BE"},"customer":{"email":"ada@other.example","vatId":null},"lines":[{"sku":"WID-001","qty":2,"unitCents":999},{"sku":"GAD-002","qty":1,"unitCents":1500}],"declared":{"netCents":3498,"vatCents":508,"grossCents":4006}}"""^^rdf:JSON) list:iterate (2 """{"orderId":"A300","shipTo":{"country":"NL"},"customer":{"email":"acct@company.nl","vatId":"NL999999999B01"},"lines":[{"sku":"WID-001","qty":2,"unitCents":999},{"sku":"GAD-002","qty":1,"unitCents":1500}],"declared":{"netCents":3498,"vatCents":0,"grossCents":3498}}"""^^rdf:JSON) .
#   ("""{"orderId":"A300","shipTo":{"country":"NL"},"customer":{"email":"acct@company.nl","vatId":"NL999999999B01"},"lines":[{"sku":"WID-001","qty":2,"unitCents":999},{"sku":"GAD-002","qty":1,"unitCents":1500}],"declared":{"netCents":3498,"vatCents":0,"grossCents":3498}}"""^^rdf:JSON "/orderId") string:jsonPointer "A300" .
#   ("urn:example:order:%s" "A300") string:format "urn:example:order:A300" .
#   <urn:example:order:A300> log:uri "urn:example:order:A300" .
#   ("""{"orderId":"A300","shipTo":{"country":"NL"},"customer":{"email":"acct@company.nl","vatId":"NL999999999B01"},"lines":[{"sku":"WID-001","qty":2,"unitCents":999},{"sku":"GAD-002","qty":1,"unitCents":1500}],"declared":{"netCents":3498,"vatCents":0,"grossCents":3498}}"""^^rdf:JSON "/lines") string:jsonPointer ("""{"sku":"WID-001","qty":2,"unitCents":999}"""^^rdf:JSON """{"sku":"GAD-002","qty":1,"unitCents":1500}"""^^rdf:JSON) .
#   ("""{"sku":"WID-001","qty":2,"unitCents":999}"""^^rdf:JSON """{"sku":"GAD-002","qty":1,"unitCents":1500}"""^^rdf:JSON) list:iterate (1 """{"sku":"GAD-002","qty":1,"unitCents":1500}"""^^rdf:JSON) .
#   ("""{"sku":"GAD-002","qty":1,"unitCents":1500}"""^^rdf:JSON "/sku") string:jsonPointer "GAD-002" .
#   ("""{"sku":"GAD-002","qty":1,"unitCents":1500}"""^^rdf:JSON "/qty") string:jsonPointer 1 .
#   ("""{"sku":"GAD-002","qty":1,"unitCents":1500}"""^^rdf:JSON "/unitCents") string:jsonPointer 1500 .
#   ex:Gadget a ex:Product .
#   ex:Gadget ex:sku "GAD-002" .
#   (1 1500) math:product 1500 .
#   ("urn:example:order:%s#line:%s" "A300" 1) string:format "urn:example:order:A300#line:1" .
#   <urn:example:order:A300#line:1> log:uri "urn:example:order:A300#line:1" .
#   "GAD-002" string:equalIgnoringCase "GAD-002" .
# via the schematic forward rule:
#   {
#     ex:feed ex:json ?J .
#     (?J "/orders") string:jsonPointer ?Orders .
#     ?Orders list:iterate (?OrderIndex ?OrderJson) .
#     (?OrderJson "/orderId") string:jsonPointer ?OrderId .
#     ("urn:example:order:%s" ?OrderId) string:format ?OrderUriStr .
#     ?Order log:uri ?OrderUriStr .
#     (?OrderJson "/lines") string:jsonPointer ?Lines .
#     ?Lines list:iterate (?LineIndex ?LineJson) .
#     (?LineJson "/sku") string:jsonPointer ?SkuJson .
#     (?LineJson "/qty") string:jsonPointer ?Qty .
#     (?LineJson "/unitCents") string:jsonPointer ?UnitCents .
#     ?Product a ex:Product .
#     ?Product ex:sku ?SkuCat .
#     (?Qty ?UnitCents) math:product ?NetCents .
#     ("urn:example:order:%s#line:%s" ?OrderId ?LineIndex) string:format ?LineUriStr .
#     ?Line log:uri ?LineUriStr .
#     ?SkuJson string:equalIgnoringCase ?SkuCat .
#   } => {
#     ?Order ex:line ?Line .
#     ?Line a ex:OrderLine .
#     ?Line ex:lineIndex ?LineIndex .
#     ?Line ex:product ?Product .
#     ?Line ex:sku ?SkuCat .
#     ?Line ex:qty ?Qty .
#     ?Line ex:unitCents ?UnitCents .
#     ?Line ex:netCents ?NetCents .
#   } .
# with substitution (on rule variables):
#   ?J = """{
#     "meta~data": { "batch": "2025-12-18" },
#     "orders": [
#     {
#     "orderId": "A100",
#     "shipTo": { "country": "BE" },
#     "customer": { "email": "Ada@Example.ORG", "vatId": null },
#     "lines": [
#     { "sku": "wid-001", "qty": 2, "unitCents": 999 },
#     { "sku": "GAD-002", "qty": 1, "unitCents": 1500 }
#     ],
#     "declared": { "netCents": 3498, "vatCents": 509, "grossCents": 4007 }
#     },
#     {
#     "orderId": "A200",
#     "shipTo": { "country": "US" },
#     "customer": { "email": "bob@example.org", "vatId": null },
#     "lines": [
#     { "sku": "WID-001", "qty": 2, "unitCents": 999 },
#     { "sku": "GAD-002", "qty": 1, "unitCents": 1500 }
#     ],
#     "declared": { "netCents": 3498, "vatCents": 0, "grossCents": 3498 }
#     },
#     {
#     "orderId": "A300",
#     "shipTo": { "country": "NL" },
#     "customer": { "email": "acct@company.nl", "vatId": "NL999999999B01" },
#     "lines": [
#     { "sku": "WID-001", "qty": 2, "unitCents": 999 },
#     { "sku": "GAD-002", "qty": 1, "unitCents": 1500 }
#     ],
#     "declared": { "netCents": 3498, "vatCents": 0, "grossCents": 3498 }
#     },
#     {
#     "orderId": "A301",
#     "shipTo": { "country": "NL" },
#     "customer": { "email": "billing@company.nl", "vatId": "NL999999999B01" },
#     "lines": [
#     { "sku": "WID-001", "qty": 2, "unitCents": 999 },
#     { "sku": "GAD-002", "qty": 1, "unitCents": 1500 }
#     ],
#     "declared": { "netCents": 3498, "vatCents": 0, "grossCents": 3498 }
#     },
#     {
#     "orderId": "A400",
#     "shipTo": { "country": "BE" },
#     "customer": { "email": "ada@other.example", "vatId": null },
#     "lines": [
#     { "sku": "WID-001", "qty": 2, "unitCents": 999 },
#     { "sku": "GAD-002", "qty": 1, "unitCents": 1500 }
#     ],
#     "declared": { "netCents": 3498, "vatCents": 508, "grossCents": 4006 }
#     }
#     ]
#   }"""^^rdf:JSON
#   ?Line = <urn:example:order:A300#line:1>
#   ?LineIndex = 1
#   ?LineJson = """{"sku":"GAD-002","qty":1,"unitCents":1500}"""^^rdf:JSON
#   ?LineUriStr = "urn:example:order:A300#line:1"
#   ?Lines = ("""{"sku":"WID-001","qty":2,"unitCents":999}"""^^rdf:JSON """{"sku":"GAD-002","qty":1,"unitCents":1500}"""^^rdf:JSON)
#   ?NetCents = 1500
#   ?Order = <urn:example:order:A300>
#   ?OrderId = "A300"
#   ?OrderIndex = 2
#   ?OrderJson = """{"orderId":"A300","shipTo":{"country":"NL"},"customer":{"email":"acct@company.nl","vatId":"NL999999999B01"},"lines":[{"sku":"WID-001","qty":2,"unitCents":999},{"sku":"GAD-002","qty":1,"unitCents":1500}],"declared":{"netCents":3498,"vatCents":0,"grossCents":3498}}"""^^rdf:JSON
#   ?OrderUriStr = "urn:example:order:A300"
#   ?Orders = ("""{"orderId":"A100","shipTo":{"country":"BE"},"customer":{"email":"Ada@Example.ORG","vatId":null},"lines":[{"sku":"wid-001","qty":2,"unitCents":999},{"sku":"GAD-002","qty":1,"unitCents":1500}],"declared":{"netCents":3498,"vatCents":509,"grossCents":4007}}"""^^rdf:JSON """{"orderId":"A200","shipTo":{"country":"US"},"customer":{"email":"bob@example.org","vatId":null},"lines":[{"sku":"WID-001","qty":2,"unitCents":999},{"sku":"GAD-002","qty":1,"unitCents":1500}],"declared":{"netCents":3498,"vatCents":0,"grossCents":3498}}"""^^rdf:JSON """{"orderId":"A300","shipTo":{"country":"NL"},"customer":{"email":"acct@company.nl","vatId":"NL999999999B01"},"lines":[{"sku":"WID-001","qty":2,"unitCents":999},{"sku":"GAD-002","qty":1,"unitCents":1500}],"declared":{"netCents":3498,"vatCents":0,"grossCents":3498}}"""^^rdf:JSON """{"orderId":"A301","shipTo":{"country":"NL"},"customer":{"email":"billing@company.nl","vatId":"NL999999999B01"},"lines":[{"sku":"WID-001","qty":2,"unitCents":999},{"sku":"GAD-002","qty":1,"unitCents":1500}],"declared":{"netCents":3498,"vatCents":0,"grossCents":3498}}"""^^rdf:JSON """{"orderId":"A400","shipTo":{"country":"BE"},"customer":{"email":"ada@other.example","vatId":null},"lines":[{"sku":"WID-001","qty":2,"unitCents":999},{"sku":"GAD-002","qty":1,"unitCents":1500}],"declared":{"netCents":3498,"vatCents":508,"grossCents":4006}}"""^^rdf:JSON)
#   ?Product = ex:Gadget
#   ?Qty = 1
#   ?SkuCat = "GAD-002"
#   ?SkuJson = "GAD-002"
#   ?UnitCents = 1500
# Therefore the derived triple above is entailed by the rules and facts.
# ----------------------------------------------------------------------

<urn:example:order:A300#line:1> ex:sku "GAD-002" .

# ----------------------------------------------------------------------
# Proof for derived triple:
#   <urn:example:order:A300#line:1> ex:qty 1 .
# It holds because the following instance of the rule body is provable:
#   ex:feed ex:json """{
#     "meta~data": { "batch": "2025-12-18" },
#     "orders": [
#       {
#         "orderId": "A100",
#         "shipTo": { "country": "BE" },
#         "customer": { "email": "Ada@Example.ORG", "vatId": null },
#         "lines": [
#           { "sku": "wid-001", "qty": 2, "unitCents": 999 },
#           { "sku": "GAD-002", "qty": 1, "unitCents": 1500 }
#         ],
#         "declared": { "netCents": 3498, "vatCents": 509, "grossCents": 4007 }
#       },
#       {
#         "orderId": "A200",
#         "shipTo": { "country": "US" },
#         "customer": { "email": "bob@example.org", "vatId": null },
#         "lines": [
#           { "sku": "WID-001", "qty": 2, "unitCents": 999 },
#           { "sku": "GAD-002", "qty": 1, "unitCents": 1500 }
#         ],
#         "declared": { "netCents": 3498, "vatCents": 0, "grossCents": 3498 }
#       },
#       {
#         "orderId": "A300",
#         "shipTo": { "country": "NL" },
#         "customer": { "email": "acct@company.nl", "vatId": "NL999999999B01" },
#         "lines": [
#           { "sku": "WID-001", "qty": 2, "unitCents": 999 },
#           { "sku": "GAD-002", "qty": 1, "unitCents": 1500 }
#         ],
#         "declared": { "netCents": 3498, "vatCents": 0, "grossCents": 3498 }
#       },
#       {
#         "orderId": "A301",
#         "shipTo": { "country": "NL" },
#         "customer": { "email": "billing@company.nl", "vatId": "NL999999999B01" },
#         "lines": [
#           { "sku": "WID-001", "qty": 2, "unitCents": 999 },
#           { "sku": "GAD-002", "qty": 1, "unitCents": 1500 }
#         ],
#         "declared": { "netCents": 3498, "vatCents": 0, "grossCents": 3498 }
#       },
#       {
#         "orderId": "A400",
#         "shipTo": { "country": "BE" },
#         "customer": { "email": "ada@other.example", "vatId": null },
#         "lines": [
#           { "sku": "WID-001", "qty": 2, "unitCents": 999 },
#           { "sku": "GAD-002", "qty": 1, "unitCents": 1500 }
#         ],
#         "declared": { "netCents": 3498, "vatCents": 508, "grossCents": 4006 }
#       }
#     ]
#   }"""^^rdf:JSON .
#   ("""{
#     "meta~data": { "batch": "2025-12-18" },
#     "orders": [
#       {
#         "orderId": "A100",
#         "shipTo": { "country": "BE" },
#         "customer": { "email": "Ada@Example.ORG", "vatId": null },
#         "lines": [
#           { "sku": "wid-001", "qty": 2, "unitCents": 999 },
#           { "sku": "GAD-002", "qty": 1, "unitCents": 1500 }
#         ],
#         "declared": { "netCents": 3498, "vatCents": 509, "grossCents": 4007 }
#       },
#       {
#         "orderId": "A200",
#         "shipTo": { "country": "US" },
#         "customer": { "email": "bob@example.org", "vatId": null },
#         "lines": [
#           { "sku": "WID-001", "qty": 2, "unitCents": 999 },
#           { "sku": "GAD-002", "qty": 1, "unitCents": 1500 }
#         ],
#         "declared": { "netCents": 3498, "vatCents": 0, "grossCents": 3498 }
#       },
#       {
#         "orderId": "A300",
#         "shipTo": { "country": "NL" },
#         "customer": { "email": "acct@company.nl", "vatId": "NL999999999B01" },
#         "lines": [
#           { "sku": "WID-001", "qty": 2, "unitCents": 999 },
#           { "sku": "GAD-002", "qty": 1, "unitCents": 1500 }
#         ],
#         "declared": { "netCents": 3498, "vatCents": 0, "grossCents": 3498 }
#       },
#       {
#         "orderId": "A301",
#         "shipTo": { "country": "NL" },
#         "customer": { "email": "billing@company.nl", "vatId": "NL999999999B01" },
#         "lines": [
#           { "sku": "WID-001", "qty": 2, "unitCents": 999 },
#           { "sku": "GAD-002", "qty": 1, "unitCents": 1500 }
#         ],
#         "declared": { "netCents": 3498, "vatCents": 0, "grossCents": 3498 }
#       },
#       {
#         "orderId": "A400",
#         "shipTo": { "country": "BE" },
#         "customer": { "email": "ada@other.example", "vatId": null },
#         "lines": [
#           { "sku": "WID-001", "qty": 2, "unitCents": 999 },
#           { "sku": "GAD-002", "qty": 1, "unitCents": 1500 }
#         ],
#         "declared": { "netCents": 3498, "vatCents": 508, "grossCents": 4006 }
#       }
#     ]
#   }"""^^rdf:JSON "/orders") string:jsonPointer ("""{"orderId":"A100","shipTo":{"country":"BE"},"customer":{"email":"Ada@Example.ORG","vatId":null},"lines":[{"sku":"wid-001","qty":2,"unitCents":999},{"sku":"GAD-002","qty":1,"unitCents":1500}],"declared":{"netCents":3498,"vatCents":509,"grossCents":4007}}"""^^rdf:JSON """{"orderId":"A200","shipTo":{"country":"US"},"customer":{"email":"bob@example.org","vatId":null},"lines":[{"sku":"WID-001","qty":2,"unitCents":999},{"sku":"GAD-002","qty":1,"unitCents":1500}],"declared":{"netCents":3498,"vatCents":0,"grossCents":3498}}"""^^rdf:JSON """{"orderId":"A300","shipTo":{"country":"NL"},"customer":{"email":"acct@company.nl","vatId":"NL999999999B01"},"lines":[{"sku":"WID-001","qty":2,"unitCents":999},{"sku":"GAD-002","qty":1,"unitCents":1500}],"declared":{"netCents":3498,"vatCents":0,"grossCents":3498}}"""^^rdf:JSON """{"orderId":"A301","shipTo":{"country":"NL"},"customer":{"email":"billing@company.nl","vatId":"NL999999999B01"},"lines":[{"sku":"WID-001","qty":2,"unitCents":999},{"sku":"GAD-002","qty":1,"unitCents":1500}],"declared":{"netCents":3498,"vatCents":0,"grossCents":3498}}"""^^rdf:JSON """{"orderId":"A400","shipTo":{"country":"BE"},"customer":{"email":"ada@other.example","vatId":null},"lines":[{"sku":"WID-001","qty":2,"unitCents":999},{"sku":"GAD-002","qty":1,"unitCents":1500}],"declared":{"netCents":3498,"vatCents":508,"grossCents":4006}}"""^^rdf:JSON) .
#   ("""{"orderId":"A100","shipTo":{"country":"BE"},"customer":{"email":"Ada@Example.ORG","vatId":null},"lines":[{"sku":"wid-001","qty":2,"unitCents":999},{"sku":"GAD-002","qty":1,"unitCents":1500}],"declared":{"netCents":3498,"vatCents":509,"grossCents":4007}}"""^^rdf:JSON """{"orderId":"A200","shipTo":{"country":"US"},"customer":{"email":"bob@example.org","vatId":null},"lines":[{"sku":"WID-001","qty":2,"unitCents":999},{"sku":"GAD-002","qty":1,"unitCents":1500}],"declared":{"netCents":3498,"vatCents":0,"grossCents":3498}}"""^^rdf:JSON """{"orderId":"A300","shipTo":{"country":"NL"},"customer":{"email":"acct@company.nl","vatId":"NL999999999B01"},"lines":[{"sku":"WID-001","qty":2,"unitCents":999},{"sku":"GAD-002","qty":1,"unitCents":1500}],"declared":{"netCents":3498,"vatCents":0,"grossCents":3498}}"""^^rdf:JSON """{"orderId":"A301","shipTo":{"country":"NL"},"customer":{"email":"billing@company.nl","vatId":"NL999999999B01"},"lines":[{"sku":"WID-001","qty":2,"unitCents":999},{"sku":"GAD-002","qty":1,"unitCents":1500}],"declared":{"netCents":3498,"vatCents":0,"grossCents":3498}}"""^^rdf:JSON """{"orderId":"A400","shipTo":{"country":"BE"},"customer":{"email":"ada@other.example","vatId":null},"lines":[{"sku":"WID-001","qty":2,"unitCents":999},{"sku":"GAD-002","qty":1,"unitCents":1500}],"declared":{"netCents":3498,"vatCents":508,"grossCents":4006}}"""^^rdf:JSON) list:iterate (2 """{"orderId":"A300","shipTo":{"country":"NL"},"customer":{"email":"acct@company.nl","vatId":"NL999999999B01"},"lines":[{"sku":"WID-001","qty":2,"unitCents":999},{"sku":"GAD-002","qty":1,"unitCents":1500}],"declared":{"netCents":3498,"vatCents":0,"grossCents":3498}}"""^^rdf:JSON) .
#   ("""{"orderId":"A300","shipTo":{"country":"NL"},"customer":{"email":"acct@company.nl","vatId":"NL999999999B01"},"lines":[{"sku":"WID-001","qty":2,"unitCents":999},{"sku":"GAD-002","qty":1,"unitCents":1500}],"declared":{"netCents":3498,"vatCents":0,"grossCents":3498}}"""^^rdf:JSON "/orderId") string:jsonPointer "A300" .
#   ("urn:example:order:%s" "A300") string:format "urn:example:order:A300" .
#   <urn:example:order:A300> log:uri "urn:example:order:A300" .
#   ("""{"orderId":"A300","shipTo":{"country":"NL"},"customer":{"email":"acct@company.nl","vatId":"NL999999999B01"},"lines":[{"sku":"WID-001","qty":2,"unitCents":999},{"sku":"GAD-002","qty":1,"unitCents":1500}],"declared":{"netCents":3498,"vatCents":0,"grossCents":3498}}"""^^rdf:JSON "/lines") string:jsonPointer ("""{"sku":"WID-001","qty":2,"unitCents":999}"""^^rdf:JSON """{"sku":"GAD-002","qty":1,"unitCents":1500}"""^^rdf:JSON) .
#   ("""{"sku":"WID-001","qty":2,"unitCents":999}"""^^rdf:JSON """{"sku":"GAD-002","qty":1,"unitCents":1500}"""^^rdf:JSON) list:iterate (1 """{"sku":"GAD-002","qty":1,"unitCents":1500}"""^^rdf:JSON) .
#   ("""{"sku":"GAD-002","qty":1,"unitCents":1500}"""^^rdf:JSON "/sku") string:jsonPointer "GAD-002" .
#   ("""{"sku":"GAD-002","qty":1,"unitCents":1500}"""^^rdf:JSON "/qty") string:jsonPointer 1 .
#   ("""{"sku":"GAD-002","qty":1,"unitCents":1500}"""^^rdf:JSON "/unitCents") string:jsonPointer 1500 .
#   ex:Gadget a ex:Product .
#   ex:Gadget ex:sku "GAD-002" .
#   (1 1500) math:product 1500 .
#   ("urn:example:order:%s#line:%s" "A300" 1) string:format "urn:example:order:A300#line:1" .
#   <urn:example:order:A300#line:1> log:uri "urn:example:order:A300#line:1" .
#   "GAD-002" string:equalIgnoringCase "GAD-002" .
# via the schematic forward rule:
#   {
#     ex:feed ex:json ?J .
#     (?J "/orders") string:jsonPointer ?Orders .
#     ?Orders list:iterate (?OrderIndex ?OrderJson) .
#     (?OrderJson "/orderId") string:jsonPointer ?OrderId .
#     ("urn:example:order:%s" ?OrderId) string:format ?OrderUriStr .
#     ?Order log:uri ?OrderUriStr .
#     (?OrderJson "/lines") string:jsonPointer ?Lines .
#     ?Lines list:iterate (?LineIndex ?LineJson) .
#     (?LineJson "/sku") string:jsonPointer ?SkuJson .
#     (?LineJson "/qty") string:jsonPointer ?Qty .
#     (?LineJson "/unitCents") string:jsonPointer ?UnitCents .
#     ?Product a ex:Product .
#     ?Product ex:sku ?SkuCat .
#     (?Qty ?UnitCents) math:product ?NetCents .
#     ("urn:example:order:%s#line:%s" ?OrderId ?LineIndex) string:format ?LineUriStr .
#     ?Line log:uri ?LineUriStr .
#     ?SkuJson string:equalIgnoringCase ?SkuCat .
#   } => {
#     ?Order ex:line ?Line .
#     ?Line a ex:OrderLine .
#     ?Line ex:lineIndex ?LineIndex .
#     ?Line ex:product ?Product .
#     ?Line ex:sku ?SkuCat .
#     ?Line ex:qty ?Qty .
#     ?Line ex:unitCents ?UnitCents .
#     ?Line ex:netCents ?NetCents .
#   } .
# with substitution (on rule variables):
#   ?J = """{
#     "meta~data": { "batch": "2025-12-18" },
#     "orders": [
#     {
#     "orderId": "A100",
#     "shipTo": { "country": "BE" },
#     "customer": { "email": "Ada@Example.ORG", "vatId": null },
#     "lines": [
#     { "sku": "wid-001", "qty": 2, "unitCents": 999 },
#     { "sku": "GAD-002", "qty": 1, "unitCents": 1500 }
#     ],
#     "declared": { "netCents": 3498, "vatCents": 509, "grossCents": 4007 }
#     },
#     {
#     "orderId": "A200",
#     "shipTo": { "country": "US" },
#     "customer": { "email": "bob@example.org", "vatId": null },
#     "lines": [
#     { "sku": "WID-001", "qty": 2, "unitCents": 999 },
#     { "sku": "GAD-002", "qty": 1, "unitCents": 1500 }
#     ],
#     "declared": { "netCents": 3498, "vatCents": 0, "grossCents": 3498 }
#     },
#     {
#     "orderId": "A300",
#     "shipTo": { "country": "NL" },
#     "customer": { "email": "acct@company.nl", "vatId": "NL999999999B01" },
#     "lines": [
#     { "sku": "WID-001", "qty": 2, "unitCents": 999 },
#     { "sku": "GAD-002", "qty": 1, "unitCents": 1500 }
#     ],
#     "declared": { "netCents": 3498, "vatCents": 0, "grossCents": 3498 }
#     },
#     {
#     "orderId": "A301",
#     "shipTo": { "country": "NL" },
#     "customer": { "email": "billing@company.nl", "vatId": "NL999999999B01" },
#     "lines": [
#     { "sku": "WID-001", "qty": 2, "unitCents": 999 },
#     { "sku": "GAD-002", "qty": 1, "unitCents": 1500 }
#     ],
#     "declared": { "netCents": 3498, "vatCents": 0, "grossCents": 3498 }
#     },
#     {
#     "orderId": "A400",
#     "shipTo": { "country": "BE" },
#     "customer": { "email": "ada@other.example", "vatId": null },
#     "lines": [
#     { "sku": "WID-001", "qty": 2, "unitCents": 999 },
#     { "sku": "GAD-002", "qty": 1, "unitCents": 1500 }
#     ],
#     "declared": { "netCents": 3498, "vatCents": 508, "grossCents": 4006 }
#     }
#     ]
#   }"""^^rdf:JSON
#   ?Line = <urn:example:order:A300#line:1>
#   ?LineIndex = 1
#   ?LineJson = """{"sku":"GAD-002","qty":1,"unitCents":1500}"""^^rdf:JSON
#   ?LineUriStr = "urn:example:order:A300#line:1"
#   ?Lines = ("""{"sku":"WID-001","qty":2,"unitCents":999}"""^^rdf:JSON """{"sku":"GAD-002","qty":1,"unitCents":1500}"""^^rdf:JSON)
#   ?NetCents = 1500
#   ?Order = <urn:example:order:A300>
#   ?OrderId = "A300"
#   ?OrderIndex = 2
#   ?OrderJson = """{"orderId":"A300","shipTo":{"country":"NL"},"customer":{"email":"acct@company.nl","vatId":"NL999999999B01"},"lines":[{"sku":"WID-001","qty":2,"unitCents":999},{"sku":"GAD-002","qty":1,"unitCents":1500}],"declared":{"netCents":3498,"vatCents":0,"grossCents":3498}}"""^^rdf:JSON
#   ?OrderUriStr = "urn:example:order:A300"
#   ?Orders = ("""{"orderId":"A100","shipTo":{"country":"BE"},"customer":{"email":"Ada@Example.ORG","vatId":null},"lines":[{"sku":"wid-001","qty":2,"unitCents":999},{"sku":"GAD-002","qty":1,"unitCents":1500}],"declared":{"netCents":3498,"vatCents":509,"grossCents":4007}}"""^^rdf:JSON """{"orderId":"A200","shipTo":{"country":"US"},"customer":{"email":"bob@example.org","vatId":null},"lines":[{"sku":"WID-001","qty":2,"unitCents":999},{"sku":"GAD-002","qty":1,"unitCents":1500}],"declared":{"netCents":3498,"vatCents":0,"grossCents":3498}}"""^^rdf:JSON """{"orderId":"A300","shipTo":{"country":"NL"},"customer":{"email":"acct@company.nl","vatId":"NL999999999B01"},"lines":[{"sku":"WID-001","qty":2,"unitCents":999},{"sku":"GAD-002","qty":1,"unitCents":1500}],"declared":{"netCents":3498,"vatCents":0,"grossCents":3498}}"""^^rdf:JSON """{"orderId":"A301","shipTo":{"country":"NL"},"customer":{"email":"billing@company.nl","vatId":"NL999999999B01"},"lines":[{"sku":"WID-001","qty":2,"unitCents":999},{"sku":"GAD-002","qty":1,"unitCents":1500}],"declared":{"netCents":3498,"vatCents":0,"grossCents":3498}}"""^^rdf:JSON """{"orderId":"A400","shipTo":{"country":"BE"},"customer":{"email":"ada@other.example","vatId":null},"lines":[{"sku":"WID-001","qty":2,"unitCents":999},{"sku":"GAD-002","qty":1,"unitCents":1500}],"declared":{"netCents":3498,"vatCents":508,"grossCents":4006}}"""^^rdf:JSON)
#   ?Product = ex:Gadget
#   ?Qty = 1
#   ?SkuCat = "GAD-002"
#   ?SkuJson = "GAD-002"
#   ?UnitCents = 1500
# Therefore the derived triple above is entailed by the rules and facts.
# ----------------------------------------------------------------------

<urn:example:order:A300#line:1> ex:qty 1 .

# ----------------------------------------------------------------------
# Proof for derived triple:
#   <urn:example:order:A300#line:1> ex:unitCents 1500 .
# It holds because the following instance of the rule body is provable:
#   ex:feed ex:json """{
#     "meta~data": { "batch": "2025-12-18" },
#     "orders": [
#       {
#         "orderId": "A100",
#         "shipTo": { "country": "BE" },
#         "customer": { "email": "Ada@Example.ORG", "vatId": null },
#         "lines": [
#           { "sku": "wid-001", "qty": 2, "unitCents": 999 },
#           { "sku": "GAD-002", "qty": 1, "unitCents": 1500 }
#         ],
#         "declared": { "netCents": 3498, "vatCents": 509, "grossCents": 4007 }
#       },
#       {
#         "orderId": "A200",
#         "shipTo": { "country": "US" },
#         "customer": { "email": "bob@example.org", "vatId": null },
#         "lines": [
#           { "sku": "WID-001", "qty": 2, "unitCents": 999 },
#           { "sku": "GAD-002", "qty": 1, "unitCents": 1500 }
#         ],
#         "declared": { "netCents": 3498, "vatCents": 0, "grossCents": 3498 }
#       },
#       {
#         "orderId": "A300",
#         "shipTo": { "country": "NL" },
#         "customer": { "email": "acct@company.nl", "vatId": "NL999999999B01" },
#         "lines": [
#           { "sku": "WID-001", "qty": 2, "unitCents": 999 },
#           { "sku": "GAD-002", "qty": 1, "unitCents": 1500 }
#         ],
#         "declared": { "netCents": 3498, "vatCents": 0, "grossCents": 3498 }
#       },
#       {
#         "orderId": "A301",
#         "shipTo": { "country": "NL" },
#         "customer": { "email": "billing@company.nl", "vatId": "NL999999999B01" },
#         "lines": [
#           { "sku": "WID-001", "qty": 2, "unitCents": 999 },
#           { "sku": "GAD-002", "qty": 1, "unitCents": 1500 }
#         ],
#         "declared": { "netCents": 3498, "vatCents": 0, "grossCents": 3498 }
#       },
#       {
#         "orderId": "A400",
#         "shipTo": { "country": "BE" },
#         "customer": { "email": "ada@other.example", "vatId": null },
#         "lines": [
#           { "sku": "WID-001", "qty": 2, "unitCents": 999 },
#           { "sku": "GAD-002", "qty": 1, "unitCents": 1500 }
#         ],
#         "declared": { "netCents": 3498, "vatCents": 508, "grossCents": 4006 }
#       }
#     ]
#   }"""^^rdf:JSON .
#   ("""{
#     "meta~data": { "batch": "2025-12-18" },
#     "orders": [
#       {
#         "orderId": "A100",
#         "shipTo": { "country": "BE" },
#         "customer": { "email": "Ada@Example.ORG", "vatId": null },
#         "lines": [
#           { "sku": "wid-001", "qty": 2, "unitCents": 999 },
#           { "sku": "GAD-002", "qty": 1, "unitCents": 1500 }
#         ],
#         "declared": { "netCents": 3498, "vatCents": 509, "grossCents": 4007 }
#       },
#       {
#         "orderId": "A200",
#         "shipTo": { "country": "US" },
#         "customer": { "email": "bob@example.org", "vatId": null },
#         "lines": [
#           { "sku": "WID-001", "qty": 2, "unitCents": 999 },
#           { "sku": "GAD-002", "qty": 1, "unitCents": 1500 }
#         ],
#         "declared": { "netCents": 3498, "vatCents": 0, "grossCents": 3498 }
#       },
#       {
#         "orderId": "A300",
#         "shipTo": { "country": "NL" },
#         "customer": { "email": "acct@company.nl", "vatId": "NL999999999B01" },
#         "lines": [
#           { "sku": "WID-001", "qty": 2, "unitCents": 999 },
#           { "sku": "GAD-002", "qty": 1, "unitCents": 1500 }
#         ],
#         "declared": { "netCents": 3498, "vatCents": 0, "grossCents": 3498 }
#       },
#       {
#         "orderId": "A301",
#         "shipTo": { "country": "NL" },
#         "customer": { "email": "billing@company.nl", "vatId": "NL999999999B01" },
#         "lines": [
#           { "sku": "WID-001", "qty": 2, "unitCents": 999 },
#           { "sku": "GAD-002", "qty": 1, "unitCents": 1500 }
#         ],
#         "declared": { "netCents": 3498, "vatCents": 0, "grossCents": 3498 }
#       },
#       {
#         "orderId": "A400",
#         "shipTo": { "country": "BE" },
#         "customer": { "email": "ada@other.example", "vatId": null },
#         "lines": [
#           { "sku": "WID-001", "qty": 2, "unitCents": 999 },
#           { "sku": "GAD-002", "qty": 1, "unitCents": 1500 }
#         ],
#         "declared": { "netCents": 3498, "vatCents": 508, "grossCents": 4006 }
#       }
#     ]
#   }"""^^rdf:JSON "/orders") string:jsonPointer ("""{"orderId":"A100","shipTo":{"country":"BE"},"customer":{"email":"Ada@Example.ORG","vatId":null},"lines":[{"sku":"wid-001","qty":2,"unitCents":999},{"sku":"GAD-002","qty":1,"unitCents":1500}],"declared":{"netCents":3498,"vatCents":509,"grossCents":4007}}"""^^rdf:JSON """{"orderId":"A200","shipTo":{"country":"US"},"customer":{"email":"bob@example.org","vatId":null},"lines":[{"sku":"WID-001","qty":2,"unitCents":999},{"sku":"GAD-002","qty":1,"unitCents":1500}],"declared":{"netCents":3498,"vatCents":0,"grossCents":3498}}"""^^rdf:JSON """{"orderId":"A300","shipTo":{"country":"NL"},"customer":{"email":"acct@company.nl","vatId":"NL999999999B01"},"lines":[{"sku":"WID-001","qty":2,"unitCents":999},{"sku":"GAD-002","qty":1,"unitCents":1500}],"declared":{"netCents":3498,"vatCents":0,"grossCents":3498}}"""^^rdf:JSON """{"orderId":"A301","shipTo":{"country":"NL"},"customer":{"email":"billing@company.nl","vatId":"NL999999999B01"},"lines":[{"sku":"WID-001","qty":2,"unitCents":999},{"sku":"GAD-002","qty":1,"unitCents":1500}],"declared":{"netCents":3498,"vatCents":0,"grossCents":3498}}"""^^rdf:JSON """{"orderId":"A400","shipTo":{"country":"BE"},"customer":{"email":"ada@other.example","vatId":null},"lines":[{"sku":"WID-001","qty":2,"unitCents":999},{"sku":"GAD-002","qty":1,"unitCents":1500}],"declared":{"netCents":3498,"vatCents":508,"grossCents":4006}}"""^^rdf:JSON) .
#   ("""{"orderId":"A100","shipTo":{"country":"BE"},"customer":{"email":"Ada@Example.ORG","vatId":null},"lines":[{"sku":"wid-001","qty":2,"unitCents":999},{"sku":"GAD-002","qty":1,"unitCents":1500}],"declared":{"netCents":3498,"vatCents":509,"grossCents":4007}}"""^^rdf:JSON """{"orderId":"A200","shipTo":{"country":"US"},"customer":{"email":"bob@example.org","vatId":null},"lines":[{"sku":"WID-001","qty":2,"unitCents":999},{"sku":"GAD-002","qty":1,"unitCents":1500}],"declared":{"netCents":3498,"vatCents":0,"grossCents":3498}}"""^^rdf:JSON """{"orderId":"A300","shipTo":{"country":"NL"},"customer":{"email":"acct@company.nl","vatId":"NL999999999B01"},"lines":[{"sku":"WID-001","qty":2,"unitCents":999},{"sku":"GAD-002","qty":1,"unitCents":1500}],"declared":{"netCents":3498,"vatCents":0,"grossCents":3498}}"""^^rdf:JSON """{"orderId":"A301","shipTo":{"country":"NL"},"customer":{"email":"billing@company.nl","vatId":"NL999999999B01"},"lines":[{"sku":"WID-001","qty":2,"unitCents":999},{"sku":"GAD-002","qty":1,"unitCents":1500}],"declared":{"netCents":3498,"vatCents":0,"grossCents":3498}}"""^^rdf:JSON """{"orderId":"A400","shipTo":{"country":"BE"},"customer":{"email":"ada@other.example","vatId":null},"lines":[{"sku":"WID-001","qty":2,"unitCents":999},{"sku":"GAD-002","qty":1,"unitCents":1500}],"declared":{"netCents":3498,"vatCents":508,"grossCents":4006}}"""^^rdf:JSON) list:iterate (2 """{"orderId":"A300","shipTo":{"country":"NL"},"customer":{"email":"acct@company.nl","vatId":"NL999999999B01"},"lines":[{"sku":"WID-001","qty":2,"unitCents":999},{"sku":"GAD-002","qty":1,"unitCents":1500}],"declared":{"netCents":3498,"vatCents":0,"grossCents":3498}}"""^^rdf:JSON) .
#   ("""{"orderId":"A300","shipTo":{"country":"NL"},"customer":{"email":"acct@company.nl","vatId":"NL999999999B01"},"lines":[{"sku":"WID-001","qty":2,"unitCents":999},{"sku":"GAD-002","qty":1,"unitCents":1500}],"declared":{"netCents":3498,"vatCents":0,"grossCents":3498}}"""^^rdf:JSON "/orderId") string:jsonPointer "A300" .
#   ("urn:example:order:%s" "A300") string:format "urn:example:order:A300" .
#   <urn:example:order:A300> log:uri "urn:example:order:A300" .
#   ("""{"orderId":"A300","shipTo":{"country":"NL"},"customer":{"email":"acct@company.nl","vatId":"NL999999999B01"},"lines":[{"sku":"WID-001","qty":2,"unitCents":999},{"sku":"GAD-002","qty":1,"unitCents":1500}],"declared":{"netCents":3498,"vatCents":0,"grossCents":3498}}"""^^rdf:JSON "/lines") string:jsonPointer ("""{"sku":"WID-001","qty":2,"unitCents":999}"""^^rdf:JSON """{"sku":"GAD-002","qty":1,"unitCents":1500}"""^^rdf:JSON) .
#   ("""{"sku":"WID-001","qty":2,"unitCents":999}"""^^rdf:JSON """{"sku":"GAD-002","qty":1,"unitCents":1500}"""^^rdf:JSON) list:iterate (1 """{"sku":"GAD-002","qty":1,"unitCents":1500}"""^^rdf:JSON) .
#   ("""{"sku":"GAD-002","qty":1,"unitCents":1500}"""^^rdf:JSON "/sku") string:jsonPointer "GAD-002" .
#   ("""{"sku":"GAD-002","qty":1,"unitCents":1500}"""^^rdf:JSON "/qty") string:jsonPointer 1 .
#   ("""{"sku":"GAD-002","qty":1,"unitCents":1500}"""^^rdf:JSON "/unitCents") string:jsonPointer 1500 .
#   ex:Gadget a ex:Product .
#   ex:Gadget ex:sku "GAD-002" .
#   (1 1500) math:product 1500 .
#   ("urn:example:order:%s#line:%s" "A300" 1) string:format "urn:example:order:A300#line:1" .
#   <urn:example:order:A300#line:1> log:uri "urn:example:order:A300#line:1" .
#   "GAD-002" string:equalIgnoringCase "GAD-002" .
# via the schematic forward rule:
#   {
#     ex:feed ex:json ?J .
#     (?J "/orders") string:jsonPointer ?Orders .
#     ?Orders list:iterate (?OrderIndex ?OrderJson) .
#     (?OrderJson "/orderId") string:jsonPointer ?OrderId .
#     ("urn:example:order:%s" ?OrderId) string:format ?OrderUriStr .
#     ?Order log:uri ?OrderUriStr .
#     (?OrderJson "/lines") string:jsonPointer ?Lines .
#     ?Lines list:iterate (?LineIndex ?LineJson) .
#     (?LineJson "/sku") string:jsonPointer ?SkuJson .
#     (?LineJson "/qty") string:jsonPointer ?Qty .
#     (?LineJson "/unitCents") string:jsonPointer ?UnitCents .
#     ?Product a ex:Product .
#     ?Product ex:sku ?SkuCat .
#     (?Qty ?UnitCents) math:product ?NetCents .
#     ("urn:example:order:%s#line:%s" ?OrderId ?LineIndex) string:format ?LineUriStr .
#     ?Line log:uri ?LineUriStr .
#     ?SkuJson string:equalIgnoringCase ?SkuCat .
#   } => {
#     ?Order ex:line ?Line .
#     ?Line a ex:OrderLine .
#     ?Line ex:lineIndex ?LineIndex .
#     ?Line ex:product ?Product .
#     ?Line ex:sku ?SkuCat .
#     ?Line ex:qty ?Qty .
#     ?Line ex:unitCents ?UnitCents .
#     ?Line ex:netCents ?NetCents .
#   } .
# with substitution (on rule variables):
#   ?J = """{
#     "meta~data": { "batch": "2025-12-18" },
#     "orders": [
#     {
#     "orderId": "A100",
#     "shipTo": { "country": "BE" },
#     "customer": { "email": "Ada@Example.ORG", "vatId": null },
#     "lines": [
#     { "sku": "wid-001", "qty": 2, "unitCents": 999 },
#     { "sku": "GAD-002", "qty": 1, "unitCents": 1500 }
#     ],
#     "declared": { "netCents": 3498, "vatCents": 509, "grossCents": 4007 }
#     },
#     {
#     "orderId": "A200",
#     "shipTo": { "country": "US" },
#     "customer": { "email": "bob@example.org", "vatId": null },
#     "lines": [
#     { "sku": "WID-001", "qty": 2, "unitCents": 999 },
#     { "sku": "GAD-002", "qty": 1, "unitCents": 1500 }
#     ],
#     "declared": { "netCents": 3498, "vatCents": 0, "grossCents": 3498 }
#     },
#     {
#     "orderId": "A300",
#     "shipTo": { "country": "NL" },
#     "customer": { "email": "acct@company.nl", "vatId": "NL999999999B01" },
#     "lines": [
#     { "sku": "WID-001", "qty": 2, "unitCents": 999 },
#     { "sku": "GAD-002", "qty": 1, "unitCents": 1500 }
#     ],
#     "declared": { "netCents": 3498, "vatCents": 0, "grossCents": 3498 }
#     },
#     {
#     "orderId": "A301",
#     "shipTo": { "country": "NL" },
#     "customer": { "email": "billing@company.nl", "vatId": "NL999999999B01" },
#     "lines": [
#     { "sku": "WID-001", "qty": 2, "unitCents": 999 },
#     { "sku": "GAD-002", "qty": 1, "unitCents": 1500 }
#     ],
#     "declared": { "netCents": 3498, "vatCents": 0, "grossCents": 3498 }
#     },
#     {
#     "orderId": "A400",
#     "shipTo": { "country": "BE" },
#     "customer": { "email": "ada@other.example", "vatId": null },
#     "lines": [
#     { "sku": "WID-001", "qty": 2, "unitCents": 999 },
#     { "sku": "GAD-002", "qty": 1, "unitCents": 1500 }
#     ],
#     "declared": { "netCents": 3498, "vatCents": 508, "grossCents": 4006 }
#     }
#     ]
#   }"""^^rdf:JSON
#   ?Line = <urn:example:order:A300#line:1>
#   ?LineIndex = 1
#   ?LineJson = """{"sku":"GAD-002","qty":1,"unitCents":1500}"""^^rdf:JSON
#   ?LineUriStr = "urn:example:order:A300#line:1"
#   ?Lines = ("""{"sku":"WID-001","qty":2,"unitCents":999}"""^^rdf:JSON """{"sku":"GAD-002","qty":1,"unitCents":1500}"""^^rdf:JSON)
#   ?NetCents = 1500
#   ?Order = <urn:example:order:A300>
#   ?OrderId = "A300"
#   ?OrderIndex = 2
#   ?OrderJson = """{"orderId":"A300","shipTo":{"country":"NL"},"customer":{"email":"acct@company.nl","vatId":"NL999999999B01"},"lines":[{"sku":"WID-001","qty":2,"unitCents":999},{"sku":"GAD-002","qty":1,"unitCents":1500}],"declared":{"netCents":3498,"vatCents":0,"grossCents":3498}}"""^^rdf:JSON
#   ?OrderUriStr = "urn:example:order:A300"
#   ?Orders = ("""{"orderId":"A100","shipTo":{"country":"BE"},"customer":{"email":"Ada@Example.ORG","vatId":null},"lines":[{"sku":"wid-001","qty":2,"unitCents":999},{"sku":"GAD-002","qty":1,"unitCents":1500}],"declared":{"netCents":3498,"vatCents":509,"grossCents":4007}}"""^^rdf:JSON """{"orderId":"A200","shipTo":{"country":"US"},"customer":{"email":"bob@example.org","vatId":null},"lines":[{"sku":"WID-001","qty":2,"unitCents":999},{"sku":"GAD-002","qty":1,"unitCents":1500}],"declared":{"netCents":3498,"vatCents":0,"grossCents":3498}}"""^^rdf:JSON """{"orderId":"A300","shipTo":{"country":"NL"},"customer":{"email":"acct@company.nl","vatId":"NL999999999B01"},"lines":[{"sku":"WID-001","qty":2,"unitCents":999},{"sku":"GAD-002","qty":1,"unitCents":1500}],"declared":{"netCents":3498,"vatCents":0,"grossCents":3498}}"""^^rdf:JSON """{"orderId":"A301","shipTo":{"country":"NL"},"customer":{"email":"billing@company.nl","vatId":"NL999999999B01"},"lines":[{"sku":"WID-001","qty":2,"unitCents":999},{"sku":"GAD-002","qty":1,"unitCents":1500}],"declared":{"netCents":3498,"vatCents":0,"grossCents":3498}}"""^^rdf:JSON """{"orderId":"A400","shipTo":{"country":"BE"},"customer":{"email":"ada@other.example","vatId":null},"lines":[{"sku":"WID-001","qty":2,"unitCents":999},{"sku":"GAD-002","qty":1,"unitCents":1500}],"declared":{"netCents":3498,"vatCents":508,"grossCents":4006}}"""^^rdf:JSON)
#   ?Product = ex:Gadget
#   ?Qty = 1
#   ?SkuCat = "GAD-002"
#   ?SkuJson = "GAD-002"
#   ?UnitCents = 1500
# Therefore the derived triple above is entailed by the rules and facts.
# ----------------------------------------------------------------------

<urn:example:order:A300#line:1> ex:unitCents 1500 .

# ----------------------------------------------------------------------
# Proof for derived triple:
#   <urn:example:order:A300#line:1> ex:netCents 1500 .
# It holds because the following instance of the rule body is provable:
#   ex:feed ex:json """{
#     "meta~data": { "batch": "2025-12-18" },
#     "orders": [
#       {
#         "orderId": "A100",
#         "shipTo": { "country": "BE" },
#         "customer": { "email": "Ada@Example.ORG", "vatId": null },
#         "lines": [
#           { "sku": "wid-001", "qty": 2, "unitCents": 999 },
#           { "sku": "GAD-002", "qty": 1, "unitCents": 1500 }
#         ],
#         "declared": { "netCents": 3498, "vatCents": 509, "grossCents": 4007 }
#       },
#       {
#         "orderId": "A200",
#         "shipTo": { "country": "US" },
#         "customer": { "email": "bob@example.org", "vatId": null },
#         "lines": [
#           { "sku": "WID-001", "qty": 2, "unitCents": 999 },
#           { "sku": "GAD-002", "qty": 1, "unitCents": 1500 }
#         ],
#         "declared": { "netCents": 3498, "vatCents": 0, "grossCents": 3498 }
#       },
#       {
#         "orderId": "A300",
#         "shipTo": { "country": "NL" },
#         "customer": { "email": "acct@company.nl", "vatId": "NL999999999B01" },
#         "lines": [
#           { "sku": "WID-001", "qty": 2, "unitCents": 999 },
#           { "sku": "GAD-002", "qty": 1, "unitCents": 1500 }
#         ],
#         "declared": { "netCents": 3498, "vatCents": 0, "grossCents": 3498 }
#       },
#       {
#         "orderId": "A301",
#         "shipTo": { "country": "NL" },
#         "customer": { "email": "billing@company.nl", "vatId": "NL999999999B01" },
#         "lines": [
#           { "sku": "WID-001", "qty": 2, "unitCents": 999 },
#           { "sku": "GAD-002", "qty": 1, "unitCents": 1500 }
#         ],
#         "declared": { "netCents": 3498, "vatCents": 0, "grossCents": 3498 }
#       },
#       {
#         "orderId": "A400",
#         "shipTo": { "country": "BE" },
#         "customer": { "email": "ada@other.example", "vatId": null },
#         "lines": [
#           { "sku": "WID-001", "qty": 2, "unitCents": 999 },
#           { "sku": "GAD-002", "qty": 1, "unitCents": 1500 }
#         ],
#         "declared": { "netCents": 3498, "vatCents": 508, "grossCents": 4006 }
#       }
#     ]
#   }"""^^rdf:JSON .
#   ("""{
#     "meta~data": { "batch": "2025-12-18" },
#     "orders": [
#       {
#         "orderId": "A100",
#         "shipTo": { "country": "BE" },
#         "customer": { "email": "Ada@Example.ORG", "vatId": null },
#         "lines": [
#           { "sku": "wid-001", "qty": 2, "unitCents": 999 },
#           { "sku": "GAD-002", "qty": 1, "unitCents": 1500 }
#         ],
#         "declared": { "netCents": 3498, "vatCents": 509, "grossCents": 4007 }
#       },
#       {
#         "orderId": "A200",
#         "shipTo": { "country": "US" },
#         "customer": { "email": "bob@example.org", "vatId": null },
#         "lines": [
#           { "sku": "WID-001", "qty": 2, "unitCents": 999 },
#           { "sku": "GAD-002", "qty": 1, "unitCents": 1500 }
#         ],
#         "declared": { "netCents": 3498, "vatCents": 0, "grossCents": 3498 }
#       },
#       {
#         "orderId": "A300",
#         "shipTo": { "country": "NL" },
#         "customer": { "email": "acct@company.nl", "vatId": "NL999999999B01" },
#         "lines": [
#           { "sku": "WID-001", "qty": 2, "unitCents": 999 },
#           { "sku": "GAD-002", "qty": 1, "unitCents": 1500 }
#         ],
#         "declared": { "netCents": 3498, "vatCents": 0, "grossCents": 3498 }
#       },
#       {
#         "orderId": "A301",
#         "shipTo": { "country": "NL" },
#         "customer": { "email": "billing@company.nl", "vatId": "NL999999999B01" },
#         "lines": [
#           { "sku": "WID-001", "qty": 2, "unitCents": 999 },
#           { "sku": "GAD-002", "qty": 1, "unitCents": 1500 }
#         ],
#         "declared": { "netCents": 3498, "vatCents": 0, "grossCents": 3498 }
#       },
#       {
#         "orderId": "A400",
#         "shipTo": { "country": "BE" },
#         "customer": { "email": "ada@other.example", "vatId": null },
#         "lines": [
#           { "sku": "WID-001", "qty": 2, "unitCents": 999 },
#           { "sku": "GAD-002", "qty": 1, "unitCents": 1500 }
#         ],
#         "declared": { "netCents": 3498, "vatCents": 508, "grossCents": 4006 }
#       }
#     ]
#   }"""^^rdf:JSON "/orders") string:jsonPointer ("""{"orderId":"A100","shipTo":{"country":"BE"},"customer":{"email":"Ada@Example.ORG","vatId":null},"lines":[{"sku":"wid-001","qty":2,"unitCents":999},{"sku":"GAD-002","qty":1,"unitCents":1500}],"declared":{"netCents":3498,"vatCents":509,"grossCents":4007}}"""^^rdf:JSON """{"orderId":"A200","shipTo":{"country":"US"},"customer":{"email":"bob@example.org","vatId":null},"lines":[{"sku":"WID-001","qty":2,"unitCents":999},{"sku":"GAD-002","qty":1,"unitCents":1500}],"declared":{"netCents":3498,"vatCents":0,"grossCents":3498}}"""^^rdf:JSON """{"orderId":"A300","shipTo":{"country":"NL"},"customer":{"email":"acct@company.nl","vatId":"NL999999999B01"},"lines":[{"sku":"WID-001","qty":2,"unitCents":999},{"sku":"GAD-002","qty":1,"unitCents":1500}],"declared":{"netCents":3498,"vatCents":0,"grossCents":3498}}"""^^rdf:JSON """{"orderId":"A301","shipTo":{"country":"NL"},"customer":{"email":"billing@company.nl","vatId":"NL999999999B01"},"lines":[{"sku":"WID-001","qty":2,"unitCents":999},{"sku":"GAD-002","qty":1,"unitCents":1500}],"declared":{"netCents":3498,"vatCents":0,"grossCents":3498}}"""^^rdf:JSON """{"orderId":"A400","shipTo":{"country":"BE"},"customer":{"email":"ada@other.example","vatId":null},"lines":[{"sku":"WID-001","qty":2,"unitCents":999},{"sku":"GAD-002","qty":1,"unitCents":1500}],"declared":{"netCents":3498,"vatCents":508,"grossCents":4006}}"""^^rdf:JSON) .
#   ("""{"orderId":"A100","shipTo":{"country":"BE"},"customer":{"email":"Ada@Example.ORG","vatId":null},"lines":[{"sku":"wid-001","qty":2,"unitCents":999},{"sku":"GAD-002","qty":1,"unitCents":1500}],"declared":{"netCents":3498,"vatCents":509,"grossCents":4007}}"""^^rdf:JSON """{"orderId":"A200","shipTo":{"country":"US"},"customer":{"email":"bob@example.org","vatId":null},"lines":[{"sku":"WID-001","qty":2,"unitCents":999},{"sku":"GAD-002","qty":1,"unitCents":1500}],"declared":{"netCents":3498,"vatCents":0,"grossCents":3498}}"""^^rdf:JSON """{"orderId":"A300","shipTo":{"country":"NL"},"customer":{"email":"acct@company.nl","vatId":"NL999999999B01"},"lines":[{"sku":"WID-001","qty":2,"unitCents":999},{"sku":"GAD-002","qty":1,"unitCents":1500}],"declared":{"netCents":3498,"vatCents":0,"grossCents":3498}}"""^^rdf:JSON """{"orderId":"A301","shipTo":{"country":"NL"},"customer":{"email":"billing@company.nl","vatId":"NL999999999B01"},"lines":[{"sku":"WID-001","qty":2,"unitCents":999},{"sku":"GAD-002","qty":1,"unitCents":1500}],"declared":{"netCents":3498,"vatCents":0,"grossCents":3498}}"""^^rdf:JSON """{"orderId":"A400","shipTo":{"country":"BE"},"customer":{"email":"ada@other.example","vatId":null},"lines":[{"sku":"WID-001","qty":2,"unitCents":999},{"sku":"GAD-002","qty":1,"unitCents":1500}],"declared":{"netCents":3498,"vatCents":508,"grossCents":4006}}"""^^rdf:JSON) list:iterate (2 """{"orderId":"A300","shipTo":{"country":"NL"},"customer":{"email":"acct@company.nl","vatId":"NL999999999B01"},"lines":[{"sku":"WID-001","qty":2,"unitCents":999},{"sku":"GAD-002","qty":1,"unitCents":1500}],"declared":{"netCents":3498,"vatCents":0,"grossCents":3498}}"""^^rdf:JSON) .
#   ("""{"orderId":"A300","shipTo":{"country":"NL"},"customer":{"email":"acct@company.nl","vatId":"NL999999999B01"},"lines":[{"sku":"WID-001","qty":2,"unitCents":999},{"sku":"GAD-002","qty":1,"unitCents":1500}],"declared":{"netCents":3498,"vatCents":0,"grossCents":3498}}"""^^rdf:JSON "/orderId") string:jsonPointer "A300" .
#   ("urn:example:order:%s" "A300") string:format "urn:example:order:A300" .
#   <urn:example:order:A300> log:uri "urn:example:order:A300" .
#   ("""{"orderId":"A300","shipTo":{"country":"NL"},"customer":{"email":"acct@company.nl","vatId":"NL999999999B01"},"lines":[{"sku":"WID-001","qty":2,"unitCents":999},{"sku":"GAD-002","qty":1,"unitCents":1500}],"declared":{"netCents":3498,"vatCents":0,"grossCents":3498}}"""^^rdf:JSON "/lines") string:jsonPointer ("""{"sku":"WID-001","qty":2,"unitCents":999}"""^^rdf:JSON """{"sku":"GAD-002","qty":1,"unitCents":1500}"""^^rdf:JSON) .
#   ("""{"sku":"WID-001","qty":2,"unitCents":999}"""^^rdf:JSON """{"sku":"GAD-002","qty":1,"unitCents":1500}"""^^rdf:JSON) list:iterate (1 """{"sku":"GAD-002","qty":1,"unitCents":1500}"""^^rdf:JSON) .
#   ("""{"sku":"GAD-002","qty":1,"unitCents":1500}"""^^rdf:JSON "/sku") string:jsonPointer "GAD-002" .
#   ("""{"sku":"GAD-002","qty":1,"unitCents":1500}"""^^rdf:JSON "/qty") string:jsonPointer 1 .
#   ("""{"sku":"GAD-002","qty":1,"unitCents":1500}"""^^rdf:JSON "/unitCents") string:jsonPointer 1500 .
#   ex:Gadget a ex:Product .
#   ex:Gadget ex:sku "GAD-002" .
#   (1 1500) math:product 1500 .
#   ("urn:example:order:%s#line:%s" "A300" 1) string:format "urn:example:order:A300#line:1" .
#   <urn:example:order:A300#line:1> log:uri "urn:example:order:A300#line:1" .
#   "GAD-002" string:equalIgnoringCase "GAD-002" .
# via the schematic forward rule:
#   {
#     ex:feed ex:json ?J .
#     (?J "/orders") string:jsonPointer ?Orders .
#     ?Orders list:iterate (?OrderIndex ?OrderJson) .
#     (?OrderJson "/orderId") string:jsonPointer ?OrderId .
#     ("urn:example:order:%s" ?OrderId) string:format ?OrderUriStr .
#     ?Order log:uri ?OrderUriStr .
#     (?OrderJson "/lines") string:jsonPointer ?Lines .
#     ?Lines list:iterate (?LineIndex ?LineJson) .
#     (?LineJson "/sku") string:jsonPointer ?SkuJson .
#     (?LineJson "/qty") string:jsonPointer ?Qty .
#     (?LineJson "/unitCents") string:jsonPointer ?UnitCents .
#     ?Product a ex:Product .
#     ?Product ex:sku ?SkuCat .
#     (?Qty ?UnitCents) math:product ?NetCents .
#     ("urn:example:order:%s#line:%s" ?OrderId ?LineIndex) string:format ?LineUriStr .
#     ?Line log:uri ?LineUriStr .
#     ?SkuJson string:equalIgnoringCase ?SkuCat .
#   } => {
#     ?Order ex:line ?Line .
#     ?Line a ex:OrderLine .
#     ?Line ex:lineIndex ?LineIndex .
#     ?Line ex:product ?Product .
#     ?Line ex:sku ?SkuCat .
#     ?Line ex:qty ?Qty .
#     ?Line ex:unitCents ?UnitCents .
#     ?Line ex:netCents ?NetCents .
#   } .
# with substitution (on rule variables):
#   ?J = """{
#     "meta~data": { "batch": "2025-12-18" },
#     "orders": [
#     {
#     "orderId": "A100",
#     "shipTo": { "country": "BE" },
#     "customer": { "email": "Ada@Example.ORG", "vatId": null },
#     "lines": [
#     { "sku": "wid-001", "qty": 2, "unitCents": 999 },
#     { "sku": "GAD-002", "qty": 1, "unitCents": 1500 }
#     ],
#     "declared": { "netCents": 3498, "vatCents": 509, "grossCents": 4007 }
#     },
#     {
#     "orderId": "A200",
#     "shipTo": { "country": "US" },
#     "customer": { "email": "bob@example.org", "vatId": null },
#     "lines": [
#     { "sku": "WID-001", "qty": 2, "unitCents": 999 },
#     { "sku": "GAD-002", "qty": 1, "unitCents": 1500 }
#     ],
#     "declared": { "netCents": 3498, "vatCents": 0, "grossCents": 3498 }
#     },
#     {
#     "orderId": "A300",
#     "shipTo": { "country": "NL" },
#     "customer": { "email": "acct@company.nl", "vatId": "NL999999999B01" },
#     "lines": [
#     { "sku": "WID-001", "qty": 2, "unitCents": 999 },
#     { "sku": "GAD-002", "qty": 1, "unitCents": 1500 }
#     ],
#     "declared": { "netCents": 3498, "vatCents": 0, "grossCents": 3498 }
#     },
#     {
#     "orderId": "A301",
#     "shipTo": { "country": "NL" },
#     "customer": { "email": "billing@company.nl", "vatId": "NL999999999B01" },
#     "lines": [
#     { "sku": "WID-001", "qty": 2, "unitCents": 999 },
#     { "sku": "GAD-002", "qty": 1, "unitCents": 1500 }
#     ],
#     "declared": { "netCents": 3498, "vatCents": 0, "grossCents": 3498 }
#     },
#     {
#     "orderId": "A400",
#     "shipTo": { "country": "BE" },
#     "customer": { "email": "ada@other.example", "vatId": null },
#     "lines": [
#     { "sku": "WID-001", "qty": 2, "unitCents": 999 },
#     { "sku": "GAD-002", "qty": 1, "unitCents": 1500 }
#     ],
#     "declared": { "netCents": 3498, "vatCents": 508, "grossCents": 4006 }
#     }
#     ]
#   }"""^^rdf:JSON
#   ?Line = <urn:example:order:A300#line:1>
#   ?LineIndex = 1
#   ?LineJson = """{"sku":"GAD-002","qty":1,"unitCents":1500}"""^^rdf:JSON
#   ?LineUriStr = "urn:example:order:A300#line:1"
#   ?Lines = ("""{"sku":"WID-001","qty":2,"unitCents":999}"""^^rdf:JSON """{"sku":"GAD-002","qty":1,"unitCents":1500}"""^^rdf:JSON)
#   ?NetCents = 1500
#   ?Order = <urn:example:order:A300>
#   ?OrderId = "A300"
#   ?OrderIndex = 2
#   ?OrderJson = """{"orderId":"A300","shipTo":{"country":"NL"},"customer":{"email":"acct@company.nl","vatId":"NL999999999B01"},"lines":[{"sku":"WID-001","qty":2,"unitCents":999},{"sku":"GAD-002","qty":1,"unitCents":1500}],"declared":{"netCents":3498,"vatCents":0,"grossCents":3498}}"""^^rdf:JSON
#   ?OrderUriStr = "urn:example:order:A300"
#   ?Orders = ("""{"orderId":"A100","shipTo":{"country":"BE"},"customer":{"email":"Ada@Example.ORG","vatId":null},"lines":[{"sku":"wid-001","qty":2,"unitCents":999},{"sku":"GAD-002","qty":1,"unitCents":1500}],"declared":{"netCents":3498,"vatCents":509,"grossCents":4007}}"""^^rdf:JSON """{"orderId":"A200","shipTo":{"country":"US"},"customer":{"email":"bob@example.org","vatId":null},"lines":[{"sku":"WID-001","qty":2,"unitCents":999},{"sku":"GAD-002","qty":1,"unitCents":1500}],"declared":{"netCents":3498,"vatCents":0,"grossCents":3498}}"""^^rdf:JSON """{"orderId":"A300","shipTo":{"country":"NL"},"customer":{"email":"acct@company.nl","vatId":"NL999999999B01"},"lines":[{"sku":"WID-001","qty":2,"unitCents":999},{"sku":"GAD-002","qty":1,"unitCents":1500}],"declared":{"netCents":3498,"vatCents":0,"grossCents":3498}}"""^^rdf:JSON """{"orderId":"A301","shipTo":{"country":"NL"},"customer":{"email":"billing@company.nl","vatId":"NL999999999B01"},"lines":[{"sku":"WID-001","qty":2,"unitCents":999},{"sku":"GAD-002","qty":1,"unitCents":1500}],"declared":{"netCents":3498,"vatCents":0,"grossCents":3498}}"""^^rdf:JSON """{"orderId":"A400","shipTo":{"country":"BE"},"customer":{"email":"ada@other.example","vatId":null},"lines":[{"sku":"WID-001","qty":2,"unitCents":999},{"sku":"GAD-002","qty":1,"unitCents":1500}],"declared":{"netCents":3498,"vatCents":508,"grossCents":4006}}"""^^rdf:JSON)
#   ?Product = ex:Gadget
#   ?Qty = 1
#   ?SkuCat = "GAD-002"
#   ?SkuJson = "GAD-002"
#   ?UnitCents = 1500
# Therefore the derived triple above is entailed by the rules and facts.
# ----------------------------------------------------------------------

<urn:example:order:A300#line:1> ex:netCents 1500 .

# ----------------------------------------------------------------------
# Proof for derived triple:
#   <urn:example:order:A300> ex:line <urn:example:order:A300#line:0> .
# It holds because the following instance of the rule body is provable:
#   ex:feed ex:json """{
#     "meta~data": { "batch": "2025-12-18" },
#     "orders": [
#       {
#         "orderId": "A100",
#         "shipTo": { "country": "BE" },
#         "customer": { "email": "Ada@Example.ORG", "vatId": null },
#         "lines": [
#           { "sku": "wid-001", "qty": 2, "unitCents": 999 },
#           { "sku": "GAD-002", "qty": 1, "unitCents": 1500 }
#         ],
#         "declared": { "netCents": 3498, "vatCents": 509, "grossCents": 4007 }
#       },
#       {
#         "orderId": "A200",
#         "shipTo": { "country": "US" },
#         "customer": { "email": "bob@example.org", "vatId": null },
#         "lines": [
#           { "sku": "WID-001", "qty": 2, "unitCents": 999 },
#           { "sku": "GAD-002", "qty": 1, "unitCents": 1500 }
#         ],
#         "declared": { "netCents": 3498, "vatCents": 0, "grossCents": 3498 }
#       },
#       {
#         "orderId": "A300",
#         "shipTo": { "country": "NL" },
#         "customer": { "email": "acct@company.nl", "vatId": "NL999999999B01" },
#         "lines": [
#           { "sku": "WID-001", "qty": 2, "unitCents": 999 },
#           { "sku": "GAD-002", "qty": 1, "unitCents": 1500 }
#         ],
#         "declared": { "netCents": 3498, "vatCents": 0, "grossCents": 3498 }
#       },
#       {
#         "orderId": "A301",
#         "shipTo": { "country": "NL" },
#         "customer": { "email": "billing@company.nl", "vatId": "NL999999999B01" },
#         "lines": [
#           { "sku": "WID-001", "qty": 2, "unitCents": 999 },
#           { "sku": "GAD-002", "qty": 1, "unitCents": 1500 }
#         ],
#         "declared": { "netCents": 3498, "vatCents": 0, "grossCents": 3498 }
#       },
#       {
#         "orderId": "A400",
#         "shipTo": { "country": "BE" },
#         "customer": { "email": "ada@other.example", "vatId": null },
#         "lines": [
#           { "sku": "WID-001", "qty": 2, "unitCents": 999 },
#           { "sku": "GAD-002", "qty": 1, "unitCents": 1500 }
#         ],
#         "declared": { "netCents": 3498, "vatCents": 508, "grossCents": 4006 }
#       }
#     ]
#   }"""^^rdf:JSON .
#   ("""{
#     "meta~data": { "batch": "2025-12-18" },
#     "orders": [
#       {
#         "orderId": "A100",
#         "shipTo": { "country": "BE" },
#         "customer": { "email": "Ada@Example.ORG", "vatId": null },
#         "lines": [
#           { "sku": "wid-001", "qty": 2, "unitCents": 999 },
#           { "sku": "GAD-002", "qty": 1, "unitCents": 1500 }
#         ],
#         "declared": { "netCents": 3498, "vatCents": 509, "grossCents": 4007 }
#       },
#       {
#         "orderId": "A200",
#         "shipTo": { "country": "US" },
#         "customer": { "email": "bob@example.org", "vatId": null },
#         "lines": [
#           { "sku": "WID-001", "qty": 2, "unitCents": 999 },
#           { "sku": "GAD-002", "qty": 1, "unitCents": 1500 }
#         ],
#         "declared": { "netCents": 3498, "vatCents": 0, "grossCents": 3498 }
#       },
#       {
#         "orderId": "A300",
#         "shipTo": { "country": "NL" },
#         "customer": { "email": "acct@company.nl", "vatId": "NL999999999B01" },
#         "lines": [
#           { "sku": "WID-001", "qty": 2, "unitCents": 999 },
#           { "sku": "GAD-002", "qty": 1, "unitCents": 1500 }
#         ],
#         "declared": { "netCents": 3498, "vatCents": 0, "grossCents": 3498 }
#       },
#       {
#         "orderId": "A301",
#         "shipTo": { "country": "NL" },
#         "customer": { "email": "billing@company.nl", "vatId": "NL999999999B01" },
#         "lines": [
#           { "sku": "WID-001", "qty": 2, "unitCents": 999 },
#           { "sku": "GAD-002", "qty": 1, "unitCents": 1500 }
#         ],
#         "declared": { "netCents": 3498, "vatCents": 0, "grossCents": 3498 }
#       },
#       {
#         "orderId": "A400",
#         "shipTo": { "country": "BE" },
#         "customer": { "email": "ada@other.example", "vatId": null },
#         "lines": [
#           { "sku": "WID-001", "qty": 2, "unitCents": 999 },
#           { "sku": "GAD-002", "qty": 1, "unitCents": 1500 }
#         ],
#         "declared": { "netCents": 3498, "vatCents": 508, "grossCents": 4006 }
#       }
#     ]
#   }"""^^rdf:JSON "/orders") string:jsonPointer ("""{"orderId":"A100","shipTo":{"country":"BE"},"customer":{"email":"Ada@Example.ORG","vatId":null},"lines":[{"sku":"wid-001","qty":2,"unitCents":999},{"sku":"GAD-002","qty":1,"unitCents":1500}],"declared":{"netCents":3498,"vatCents":509,"grossCents":4007}}"""^^rdf:JSON """{"orderId":"A200","shipTo":{"country":"US"},"customer":{"email":"bob@example.org","vatId":null},"lines":[{"sku":"WID-001","qty":2,"unitCents":999},{"sku":"GAD-002","qty":1,"unitCents":1500}],"declared":{"netCents":3498,"vatCents":0,"grossCents":3498}}"""^^rdf:JSON """{"orderId":"A300","shipTo":{"country":"NL"},"customer":{"email":"acct@company.nl","vatId":"NL999999999B01"},"lines":[{"sku":"WID-001","qty":2,"unitCents":999},{"sku":"GAD-002","qty":1,"unitCents":1500}],"declared":{"netCents":3498,"vatCents":0,"grossCents":3498}}"""^^rdf:JSON """{"orderId":"A301","shipTo":{"country":"NL"},"customer":{"email":"billing@company.nl","vatId":"NL999999999B01"},"lines":[{"sku":"WID-001","qty":2,"unitCents":999},{"sku":"GAD-002","qty":1,"unitCents":1500}],"declared":{"netCents":3498,"vatCents":0,"grossCents":3498}}"""^^rdf:JSON """{"orderId":"A400","shipTo":{"country":"BE"},"customer":{"email":"ada@other.example","vatId":null},"lines":[{"sku":"WID-001","qty":2,"unitCents":999},{"sku":"GAD-002","qty":1,"unitCents":1500}],"declared":{"netCents":3498,"vatCents":508,"grossCents":4006}}"""^^rdf:JSON) .
#   ("""{"orderId":"A100","shipTo":{"country":"BE"},"customer":{"email":"Ada@Example.ORG","vatId":null},"lines":[{"sku":"wid-001","qty":2,"unitCents":999},{"sku":"GAD-002","qty":1,"unitCents":1500}],"declared":{"netCents":3498,"vatCents":509,"grossCents":4007}}"""^^rdf:JSON """{"orderId":"A200","shipTo":{"country":"US"},"customer":{"email":"bob@example.org","vatId":null},"lines":[{"sku":"WID-001","qty":2,"unitCents":999},{"sku":"GAD-002","qty":1,"unitCents":1500}],"declared":{"netCents":3498,"vatCents":0,"grossCents":3498}}"""^^rdf:JSON """{"orderId":"A300","shipTo":{"country":"NL"},"customer":{"email":"acct@company.nl","vatId":"NL999999999B01"},"lines":[{"sku":"WID-001","qty":2,"unitCents":999},{"sku":"GAD-002","qty":1,"unitCents":1500}],"declared":{"netCents":3498,"vatCents":0,"grossCents":3498}}"""^^rdf:JSON """{"orderId":"A301","shipTo":{"country":"NL"},"customer":{"email":"billing@company.nl","vatId":"NL999999999B01"},"lines":[{"sku":"WID-001","qty":2,"unitCents":999},{"sku":"GAD-002","qty":1,"unitCents":1500}],"declared":{"netCents":3498,"vatCents":0,"grossCents":3498}}"""^^rdf:JSON """{"orderId":"A400","shipTo":{"country":"BE"},"customer":{"email":"ada@other.example","vatId":null},"lines":[{"sku":"WID-001","qty":2,"unitCents":999},{"sku":"GAD-002","qty":1,"unitCents":1500}],"declared":{"netCents":3498,"vatCents":508,"grossCents":4006}}"""^^rdf:JSON) list:iterate (2 """{"orderId":"A300","shipTo":{"country":"NL"},"customer":{"email":"acct@company.nl","vatId":"NL999999999B01"},"lines":[{"sku":"WID-001","qty":2,"unitCents":999},{"sku":"GAD-002","qty":1,"unitCents":1500}],"declared":{"netCents":3498,"vatCents":0,"grossCents":3498}}"""^^rdf:JSON) .
#   ("""{"orderId":"A300","shipTo":{"country":"NL"},"customer":{"email":"acct@company.nl","vatId":"NL999999999B01"},"lines":[{"sku":"WID-001","qty":2,"unitCents":999},{"sku":"GAD-002","qty":1,"unitCents":1500}],"declared":{"netCents":3498,"vatCents":0,"grossCents":3498}}"""^^rdf:JSON "/orderId") string:jsonPointer "A300" .
#   ("urn:example:order:%s" "A300") string:format "urn:example:order:A300" .
#   <urn:example:order:A300> log:uri "urn:example:order:A300" .
#   ("""{"orderId":"A300","shipTo":{"country":"NL"},"customer":{"email":"acct@company.nl","vatId":"NL999999999B01"},"lines":[{"sku":"WID-001","qty":2,"unitCents":999},{"sku":"GAD-002","qty":1,"unitCents":1500}],"declared":{"netCents":3498,"vatCents":0,"grossCents":3498}}"""^^rdf:JSON "/lines") string:jsonPointer ("""{"sku":"WID-001","qty":2,"unitCents":999}"""^^rdf:JSON """{"sku":"GAD-002","qty":1,"unitCents":1500}"""^^rdf:JSON) .
#   ("""{"sku":"WID-001","qty":2,"unitCents":999}"""^^rdf:JSON """{"sku":"GAD-002","qty":1,"unitCents":1500}"""^^rdf:JSON) list:iterate (0 """{"sku":"WID-001","qty":2,"unitCents":999}"""^^rdf:JSON) .
#   ("""{"sku":"WID-001","qty":2,"unitCents":999}"""^^rdf:JSON "/sku") string:jsonPointer "WID-001" .
#   ("""{"sku":"WID-001","qty":2,"unitCents":999}"""^^rdf:JSON "/qty") string:jsonPointer 2 .
#   ("""{"sku":"WID-001","qty":2,"unitCents":999}"""^^rdf:JSON "/unitCents") string:jsonPointer 999 .
#   ex:Widget a ex:Product .
#   ex:Widget ex:sku "WID-001" .
#   (2 999) math:product 1998 .
#   ("urn:example:order:%s#line:%s" "A300" 0) string:format "urn:example:order:A300#line:0" .
#   <urn:example:order:A300#line:0> log:uri "urn:example:order:A300#line:0" .
#   "WID-001" string:equalIgnoringCase "WID-001" .
# via the schematic forward rule:
#   {
#     ex:feed ex:json ?J .
#     (?J "/orders") string:jsonPointer ?Orders .
#     ?Orders list:iterate (?OrderIndex ?OrderJson) .
#     (?OrderJson "/orderId") string:jsonPointer ?OrderId .
#     ("urn:example:order:%s" ?OrderId) string:format ?OrderUriStr .
#     ?Order log:uri ?OrderUriStr .
#     (?OrderJson "/lines") string:jsonPointer ?Lines .
#     ?Lines list:iterate (?LineIndex ?LineJson) .
#     (?LineJson "/sku") string:jsonPointer ?SkuJson .
#     (?LineJson "/qty") string:jsonPointer ?Qty .
#     (?LineJson "/unitCents") string:jsonPointer ?UnitCents .
#     ?Product a ex:Product .
#     ?Product ex:sku ?SkuCat .
#     (?Qty ?UnitCents) math:product ?NetCents .
#     ("urn:example:order:%s#line:%s" ?OrderId ?LineIndex) string:format ?LineUriStr .
#     ?Line log:uri ?LineUriStr .
#     ?SkuJson string:equalIgnoringCase ?SkuCat .
#   } => {
#     ?Order ex:line ?Line .
#     ?Line a ex:OrderLine .
#     ?Line ex:lineIndex ?LineIndex .
#     ?Line ex:product ?Product .
#     ?Line ex:sku ?SkuCat .
#     ?Line ex:qty ?Qty .
#     ?Line ex:unitCents ?UnitCents .
#     ?Line ex:netCents ?NetCents .
#   } .
# with substitution (on rule variables):
#   ?J = """{
#     "meta~data": { "batch": "2025-12-18" },
#     "orders": [
#     {
#     "orderId": "A100",
#     "shipTo": { "country": "BE" },
#     "customer": { "email": "Ada@Example.ORG", "vatId": null },
#     "lines": [
#     { "sku": "wid-001", "qty": 2, "unitCents": 999 },
#     { "sku": "GAD-002", "qty": 1, "unitCents": 1500 }
#     ],
#     "declared": { "netCents": 3498, "vatCents": 509, "grossCents": 4007 }
#     },
#     {
#     "orderId": "A200",
#     "shipTo": { "country": "US" },
#     "customer": { "email": "bob@example.org", "vatId": null },
#     "lines": [
#     { "sku": "WID-001", "qty": 2, "unitCents": 999 },
#     { "sku": "GAD-002", "qty": 1, "unitCents": 1500 }
#     ],
#     "declared": { "netCents": 3498, "vatCents": 0, "grossCents": 3498 }
#     },
#     {
#     "orderId": "A300",
#     "shipTo": { "country": "NL" },
#     "customer": { "email": "acct@company.nl", "vatId": "NL999999999B01" },
#     "lines": [
#     { "sku": "WID-001", "qty": 2, "unitCents": 999 },
#     { "sku": "GAD-002", "qty": 1, "unitCents": 1500 }
#     ],
#     "declared": { "netCents": 3498, "vatCents": 0, "grossCents": 3498 }
#     },
#     {
#     "orderId": "A301",
#     "shipTo": { "country": "NL" },
#     "customer": { "email": "billing@company.nl", "vatId": "NL999999999B01" },
#     "lines": [
#     { "sku": "WID-001", "qty": 2, "unitCents": 999 },
#     { "sku": "GAD-002", "qty": 1, "unitCents": 1500 }
#     ],
#     "declared": { "netCents": 3498, "vatCents": 0, "grossCents": 3498 }
#     },
#     {
#     "orderId": "A400",
#     "shipTo": { "country": "BE" },
#     "customer": { "email": "ada@other.example", "vatId": null },
#     "lines": [
#     { "sku": "WID-001", "qty": 2, "unitCents": 999 },
#     { "sku": "GAD-002", "qty": 1, "unitCents": 1500 }
#     ],
#     "declared": { "netCents": 3498, "vatCents": 508, "grossCents": 4006 }
#     }
#     ]
#   }"""^^rdf:JSON
#   ?Line = <urn:example:order:A300#line:0>
#   ?LineIndex = 0
#   ?LineJson = """{"sku":"WID-001","qty":2,"unitCents":999}"""^^rdf:JSON
#   ?LineUriStr = "urn:example:order:A300#line:0"
#   ?Lines = ("""{"sku":"WID-001","qty":2,"unitCents":999}"""^^rdf:JSON """{"sku":"GAD-002","qty":1,"unitCents":1500}"""^^rdf:JSON)
#   ?NetCents = 1998
#   ?Order = <urn:example:order:A300>
#   ?OrderId = "A300"
#   ?OrderIndex = 2
#   ?OrderJson = """{"orderId":"A300","shipTo":{"country":"NL"},"customer":{"email":"acct@company.nl","vatId":"NL999999999B01"},"lines":[{"sku":"WID-001","qty":2,"unitCents":999},{"sku":"GAD-002","qty":1,"unitCents":1500}],"declared":{"netCents":3498,"vatCents":0,"grossCents":3498}}"""^^rdf:JSON
#   ?OrderUriStr = "urn:example:order:A300"
#   ?Orders = ("""{"orderId":"A100","shipTo":{"country":"BE"},"customer":{"email":"Ada@Example.ORG","vatId":null},"lines":[{"sku":"wid-001","qty":2,"unitCents":999},{"sku":"GAD-002","qty":1,"unitCents":1500}],"declared":{"netCents":3498,"vatCents":509,"grossCents":4007}}"""^^rdf:JSON """{"orderId":"A200","shipTo":{"country":"US"},"customer":{"email":"bob@example.org","vatId":null},"lines":[{"sku":"WID-001","qty":2,"unitCents":999},{"sku":"GAD-002","qty":1,"unitCents":1500}],"declared":{"netCents":3498,"vatCents":0,"grossCents":3498}}"""^^rdf:JSON """{"orderId":"A300","shipTo":{"country":"NL"},"customer":{"email":"acct@company.nl","vatId":"NL999999999B01"},"lines":[{"sku":"WID-001","qty":2,"unitCents":999},{"sku":"GAD-002","qty":1,"unitCents":1500}],"declared":{"netCents":3498,"vatCents":0,"grossCents":3498}}"""^^rdf:JSON """{"orderId":"A301","shipTo":{"country":"NL"},"customer":{"email":"billing@company.nl","vatId":"NL999999999B01"},"lines":[{"sku":"WID-001","qty":2,"unitCents":999},{"sku":"GAD-002","qty":1,"unitCents":1500}],"declared":{"netCents":3498,"vatCents":0,"grossCents":3498}}"""^^rdf:JSON """{"orderId":"A400","shipTo":{"country":"BE"},"customer":{"email":"ada@other.example","vatId":null},"lines":[{"sku":"WID-001","qty":2,"unitCents":999},{"sku":"GAD-002","qty":1,"unitCents":1500}],"declared":{"netCents":3498,"vatCents":508,"grossCents":4006}}"""^^rdf:JSON)
#   ?Product = ex:Widget
#   ?Qty = 2
#   ?SkuCat = "WID-001"
#   ?SkuJson = "WID-001"
#   ?UnitCents = 999
# Therefore the derived triple above is entailed by the rules and facts.
# ----------------------------------------------------------------------

<urn:example:order:A300> ex:line <urn:example:order:A300#line:0> .

# ----------------------------------------------------------------------
# Proof for derived triple:
#   <urn:example:order:A300#line:0> a ex:OrderLine .
# It holds because the following instance of the rule body is provable:
#   ex:feed ex:json """{
#     "meta~data": { "batch": "2025-12-18" },
#     "orders": [
#       {
#         "orderId": "A100",
#         "shipTo": { "country": "BE" },
#         "customer": { "email": "Ada@Example.ORG", "vatId": null },
#         "lines": [
#           { "sku": "wid-001", "qty": 2, "unitCents": 999 },
#           { "sku": "GAD-002", "qty": 1, "unitCents": 1500 }
#         ],
#         "declared": { "netCents": 3498, "vatCents": 509, "grossCents": 4007 }
#       },
#       {
#         "orderId": "A200",
#         "shipTo": { "country": "US" },
#         "customer": { "email": "bob@example.org", "vatId": null },
#         "lines": [
#           { "sku": "WID-001", "qty": 2, "unitCents": 999 },
#           { "sku": "GAD-002", "qty": 1, "unitCents": 1500 }
#         ],
#         "declared": { "netCents": 3498, "vatCents": 0, "grossCents": 3498 }
#       },
#       {
#         "orderId": "A300",
#         "shipTo": { "country": "NL" },
#         "customer": { "email": "acct@company.nl", "vatId": "NL999999999B01" },
#         "lines": [
#           { "sku": "WID-001", "qty": 2, "unitCents": 999 },
#           { "sku": "GAD-002", "qty": 1, "unitCents": 1500 }
#         ],
#         "declared": { "netCents": 3498, "vatCents": 0, "grossCents": 3498 }
#       },
#       {
#         "orderId": "A301",
#         "shipTo": { "country": "NL" },
#         "customer": { "email": "billing@company.nl", "vatId": "NL999999999B01" },
#         "lines": [
#           { "sku": "WID-001", "qty": 2, "unitCents": 999 },
#           { "sku": "GAD-002", "qty": 1, "unitCents": 1500 }
#         ],
#         "declared": { "netCents": 3498, "vatCents": 0, "grossCents": 3498 }
#       },
#       {
#         "orderId": "A400",
#         "shipTo": { "country": "BE" },
#         "customer": { "email": "ada@other.example", "vatId": null },
#         "lines": [
#           { "sku": "WID-001", "qty": 2, "unitCents": 999 },
#           { "sku": "GAD-002", "qty": 1, "unitCents": 1500 }
#         ],
#         "declared": { "netCents": 3498, "vatCents": 508, "grossCents": 4006 }
#       }
#     ]
#   }"""^^rdf:JSON .
#   ("""{
#     "meta~data": { "batch": "2025-12-18" },
#     "orders": [
#       {
#         "orderId": "A100",
#         "shipTo": { "country": "BE" },
#         "customer": { "email": "Ada@Example.ORG", "vatId": null },
#         "lines": [
#           { "sku": "wid-001", "qty": 2, "unitCents": 999 },
#           { "sku": "GAD-002", "qty": 1, "unitCents": 1500 }
#         ],
#         "declared": { "netCents": 3498, "vatCents": 509, "grossCents": 4007 }
#       },
#       {
#         "orderId": "A200",
#         "shipTo": { "country": "US" },
#         "customer": { "email": "bob@example.org", "vatId": null },
#         "lines": [
#           { "sku": "WID-001", "qty": 2, "unitCents": 999 },
#           { "sku": "GAD-002", "qty": 1, "unitCents": 1500 }
#         ],
#         "declared": { "netCents": 3498, "vatCents": 0, "grossCents": 3498 }
#       },
#       {
#         "orderId": "A300",
#         "shipTo": { "country": "NL" },
#         "customer": { "email": "acct@company.nl", "vatId": "NL999999999B01" },
#         "lines": [
#           { "sku": "WID-001", "qty": 2, "unitCents": 999 },
#           { "sku": "GAD-002", "qty": 1, "unitCents": 1500 }
#         ],
#         "declared": { "netCents": 3498, "vatCents": 0, "grossCents": 3498 }
#       },
#       {
#         "orderId": "A301",
#         "shipTo": { "country": "NL" },
#         "customer": { "email": "billing@company.nl", "vatId": "NL999999999B01" },
#         "lines": [
#           { "sku": "WID-001", "qty": 2, "unitCents": 999 },
#           { "sku": "GAD-002", "qty": 1, "unitCents": 1500 }
#         ],
#         "declared": { "netCents": 3498, "vatCents": 0, "grossCents": 3498 }
#       },
#       {
#         "orderId": "A400",
#         "shipTo": { "country": "BE" },
#         "customer": { "email": "ada@other.example", "vatId": null },
#         "lines": [
#           { "sku": "WID-001", "qty": 2, "unitCents": 999 },
#           { "sku": "GAD-002", "qty": 1, "unitCents": 1500 }
#         ],
#         "declared": { "netCents": 3498, "vatCents": 508, "grossCents": 4006 }
#       }
#     ]
#   }"""^^rdf:JSON "/orders") string:jsonPointer ("""{"orderId":"A100","shipTo":{"country":"BE"},"customer":{"email":"Ada@Example.ORG","vatId":null},"lines":[{"sku":"wid-001","qty":2,"unitCents":999},{"sku":"GAD-002","qty":1,"unitCents":1500}],"declared":{"netCents":3498,"vatCents":509,"grossCents":4007}}"""^^rdf:JSON """{"orderId":"A200","shipTo":{"country":"US"},"customer":{"email":"bob@example.org","vatId":null},"lines":[{"sku":"WID-001","qty":2,"unitCents":999},{"sku":"GAD-002","qty":1,"unitCents":1500}],"declared":{"netCents":3498,"vatCents":0,"grossCents":3498}}"""^^rdf:JSON """{"orderId":"A300","shipTo":{"country":"NL"},"customer":{"email":"acct@company.nl","vatId":"NL999999999B01"},"lines":[{"sku":"WID-001","qty":2,"unitCents":999},{"sku":"GAD-002","qty":1,"unitCents":1500}],"declared":{"netCents":3498,"vatCents":0,"grossCents":3498}}"""^^rdf:JSON """{"orderId":"A301","shipTo":{"country":"NL"},"customer":{"email":"billing@company.nl","vatId":"NL999999999B01"},"lines":[{"sku":"WID-001","qty":2,"unitCents":999},{"sku":"GAD-002","qty":1,"unitCents":1500}],"declared":{"netCents":3498,"vatCents":0,"grossCents":3498}}"""^^rdf:JSON """{"orderId":"A400","shipTo":{"country":"BE"},"customer":{"email":"ada@other.example","vatId":null},"lines":[{"sku":"WID-001","qty":2,"unitCents":999},{"sku":"GAD-002","qty":1,"unitCents":1500}],"declared":{"netCents":3498,"vatCents":508,"grossCents":4006}}"""^^rdf:JSON) .
#   ("""{"orderId":"A100","shipTo":{"country":"BE"},"customer":{"email":"Ada@Example.ORG","vatId":null},"lines":[{"sku":"wid-001","qty":2,"unitCents":999},{"sku":"GAD-002","qty":1,"unitCents":1500}],"declared":{"netCents":3498,"vatCents":509,"grossCents":4007}}"""^^rdf:JSON """{"orderId":"A200","shipTo":{"country":"US"},"customer":{"email":"bob@example.org","vatId":null},"lines":[{"sku":"WID-001","qty":2,"unitCents":999},{"sku":"GAD-002","qty":1,"unitCents":1500}],"declared":{"netCents":3498,"vatCents":0,"grossCents":3498}}"""^^rdf:JSON """{"orderId":"A300","shipTo":{"country":"NL"},"customer":{"email":"acct@company.nl","vatId":"NL999999999B01"},"lines":[{"sku":"WID-001","qty":2,"unitCents":999},{"sku":"GAD-002","qty":1,"unitCents":1500}],"declared":{"netCents":3498,"vatCents":0,"grossCents":3498}}"""^^rdf:JSON """{"orderId":"A301","shipTo":{"country":"NL"},"customer":{"email":"billing@company.nl","vatId":"NL999999999B01"},"lines":[{"sku":"WID-001","qty":2,"unitCents":999},{"sku":"GAD-002","qty":1,"unitCents":1500}],"declared":{"netCents":3498,"vatCents":0,"grossCents":3498}}"""^^rdf:JSON """{"orderId":"A400","shipTo":{"country":"BE"},"customer":{"email":"ada@other.example","vatId":null},"lines":[{"sku":"WID-001","qty":2,"unitCents":999},{"sku":"GAD-002","qty":1,"unitCents":1500}],"declared":{"netCents":3498,"vatCents":508,"grossCents":4006}}"""^^rdf:JSON) list:iterate (2 """{"orderId":"A300","shipTo":{"country":"NL"},"customer":{"email":"acct@company.nl","vatId":"NL999999999B01"},"lines":[{"sku":"WID-001","qty":2,"unitCents":999},{"sku":"GAD-002","qty":1,"unitCents":1500}],"declared":{"netCents":3498,"vatCents":0,"grossCents":3498}}"""^^rdf:JSON) .
#   ("""{"orderId":"A300","shipTo":{"country":"NL"},"customer":{"email":"acct@company.nl","vatId":"NL999999999B01"},"lines":[{"sku":"WID-001","qty":2,"unitCents":999},{"sku":"GAD-002","qty":1,"unitCents":1500}],"declared":{"netCents":3498,"vatCents":0,"grossCents":3498}}"""^^rdf:JSON "/orderId") string:jsonPointer "A300" .
#   ("urn:example:order:%s" "A300") string:format "urn:example:order:A300" .
#   <urn:example:order:A300> log:uri "urn:example:order:A300" .
#   ("""{"orderId":"A300","shipTo":{"country":"NL"},"customer":{"email":"acct@company.nl","vatId":"NL999999999B01"},"lines":[{"sku":"WID-001","qty":2,"unitCents":999},{"sku":"GAD-002","qty":1,"unitCents":1500}],"declared":{"netCents":3498,"vatCents":0,"grossCents":3498}}"""^^rdf:JSON "/lines") string:jsonPointer ("""{"sku":"WID-001","qty":2,"unitCents":999}"""^^rdf:JSON """{"sku":"GAD-002","qty":1,"unitCents":1500}"""^^rdf:JSON) .
#   ("""{"sku":"WID-001","qty":2,"unitCents":999}"""^^rdf:JSON """{"sku":"GAD-002","qty":1,"unitCents":1500}"""^^rdf:JSON) list:iterate (0 """{"sku":"WID-001","qty":2,"unitCents":999}"""^^rdf:JSON) .
#   ("""{"sku":"WID-001","qty":2,"unitCents":999}"""^^rdf:JSON "/sku") string:jsonPointer "WID-001" .
#   ("""{"sku":"WID-001","qty":2,"unitCents":999}"""^^rdf:JSON "/qty") string:jsonPointer 2 .
#   ("""{"sku":"WID-001","qty":2,"unitCents":999}"""^^rdf:JSON "/unitCents") string:jsonPointer 999 .
#   ex:Widget a ex:Product .
#   ex:Widget ex:sku "WID-001" .
#   (2 999) math:product 1998 .
#   ("urn:example:order:%s#line:%s" "A300" 0) string:format "urn:example:order:A300#line:0" .
#   <urn:example:order:A300#line:0> log:uri "urn:example:order:A300#line:0" .
#   "WID-001" string:equalIgnoringCase "WID-001" .
# via the schematic forward rule:
#   {
#     ex:feed ex:json ?J .
#     (?J "/orders") string:jsonPointer ?Orders .
#     ?Orders list:iterate (?OrderIndex ?OrderJson) .
#     (?OrderJson "/orderId") string:jsonPointer ?OrderId .
#     ("urn:example:order:%s" ?OrderId) string:format ?OrderUriStr .
#     ?Order log:uri ?OrderUriStr .
#     (?OrderJson "/lines") string:jsonPointer ?Lines .
#     ?Lines list:iterate (?LineIndex ?LineJson) .
#     (?LineJson "/sku") string:jsonPointer ?SkuJson .
#     (?LineJson "/qty") string:jsonPointer ?Qty .
#     (?LineJson "/unitCents") string:jsonPointer ?UnitCents .
#     ?Product a ex:Product .
#     ?Product ex:sku ?SkuCat .
#     (?Qty ?UnitCents) math:product ?NetCents .
#     ("urn:example:order:%s#line:%s" ?OrderId ?LineIndex) string:format ?LineUriStr .
#     ?Line log:uri ?LineUriStr .
#     ?SkuJson string:equalIgnoringCase ?SkuCat .
#   } => {
#     ?Order ex:line ?Line .
#     ?Line a ex:OrderLine .
#     ?Line ex:lineIndex ?LineIndex .
#     ?Line ex:product ?Product .
#     ?Line ex:sku ?SkuCat .
#     ?Line ex:qty ?Qty .
#     ?Line ex:unitCents ?UnitCents .
#     ?Line ex:netCents ?NetCents .
#   } .
# with substitution (on rule variables):
#   ?J = """{
#     "meta~data": { "batch": "2025-12-18" },
#     "orders": [
#     {
#     "orderId": "A100",
#     "shipTo": { "country": "BE" },
#     "customer": { "email": "Ada@Example.ORG", "vatId": null },
#     "lines": [
#     { "sku": "wid-001", "qty": 2, "unitCents": 999 },
#     { "sku": "GAD-002", "qty": 1, "unitCents": 1500 }
#     ],
#     "declared": { "netCents": 3498, "vatCents": 509, "grossCents": 4007 }
#     },
#     {
#     "orderId": "A200",
#     "shipTo": { "country": "US" },
#     "customer": { "email": "bob@example.org", "vatId": null },
#     "lines": [
#     { "sku": "WID-001", "qty": 2, "unitCents": 999 },
#     { "sku": "GAD-002", "qty": 1, "unitCents": 1500 }
#     ],
#     "declared": { "netCents": 3498, "vatCents": 0, "grossCents": 3498 }
#     },
#     {
#     "orderId": "A300",
#     "shipTo": { "country": "NL" },
#     "customer": { "email": "acct@company.nl", "vatId": "NL999999999B01" },
#     "lines": [
#     { "sku": "WID-001", "qty": 2, "unitCents": 999 },
#     { "sku": "GAD-002", "qty": 1, "unitCents": 1500 }
#     ],
#     "declared": { "netCents": 3498, "vatCents": 0, "grossCents": 3498 }
#     },
#     {
#     "orderId": "A301",
#     "shipTo": { "country": "NL" },
#     "customer": { "email": "billing@company.nl", "vatId": "NL999999999B01" },
#     "lines": [
#     { "sku": "WID-001", "qty": 2, "unitCents": 999 },
#     { "sku": "GAD-002", "qty": 1, "unitCents": 1500 }
#     ],
#     "declared": { "netCents": 3498, "vatCents": 0, "grossCents": 3498 }
#     },
#     {
#     "orderId": "A400",
#     "shipTo": { "country": "BE" },
#     "customer": { "email": "ada@other.example", "vatId": null },
#     "lines": [
#     { "sku": "WID-001", "qty": 2, "unitCents": 999 },
#     { "sku": "GAD-002", "qty": 1, "unitCents": 1500 }
#     ],
#     "declared": { "netCents": 3498, "vatCents": 508, "grossCents": 4006 }
#     }
#     ]
#   }"""^^rdf:JSON
#   ?Line = <urn:example:order:A300#line:0>
#   ?LineIndex = 0
#   ?LineJson = """{"sku":"WID-001","qty":2,"unitCents":999}"""^^rdf:JSON
#   ?LineUriStr = "urn:example:order:A300#line:0"
#   ?Lines = ("""{"sku":"WID-001","qty":2,"unitCents":999}"""^^rdf:JSON """{"sku":"GAD-002","qty":1,"unitCents":1500}"""^^rdf:JSON)
#   ?NetCents = 1998
#   ?Order = <urn:example:order:A300>
#   ?OrderId = "A300"
#   ?OrderIndex = 2
#   ?OrderJson = """{"orderId":"A300","shipTo":{"country":"NL"},"customer":{"email":"acct@company.nl","vatId":"NL999999999B01"},"lines":[{"sku":"WID-001","qty":2,"unitCents":999},{"sku":"GAD-002","qty":1,"unitCents":1500}],"declared":{"netCents":3498,"vatCents":0,"grossCents":3498}}"""^^rdf:JSON
#   ?OrderUriStr = "urn:example:order:A300"
#   ?Orders = ("""{"orderId":"A100","shipTo":{"country":"BE"},"customer":{"email":"Ada@Example.ORG","vatId":null},"lines":[{"sku":"wid-001","qty":2,"unitCents":999},{"sku":"GAD-002","qty":1,"unitCents":1500}],"declared":{"netCents":3498,"vatCents":509,"grossCents":4007}}"""^^rdf:JSON """{"orderId":"A200","shipTo":{"country":"US"},"customer":{"email":"bob@example.org","vatId":null},"lines":[{"sku":"WID-001","qty":2,"unitCents":999},{"sku":"GAD-002","qty":1,"unitCents":1500}],"declared":{"netCents":3498,"vatCents":0,"grossCents":3498}}"""^^rdf:JSON """{"orderId":"A300","shipTo":{"country":"NL"},"customer":{"email":"acct@company.nl","vatId":"NL999999999B01"},"lines":[{"sku":"WID-001","qty":2,"unitCents":999},{"sku":"GAD-002","qty":1,"unitCents":1500}],"declared":{"netCents":3498,"vatCents":0,"grossCents":3498}}"""^^rdf:JSON """{"orderId":"A301","shipTo":{"country":"NL"},"customer":{"email":"billing@company.nl","vatId":"NL999999999B01"},"lines":[{"sku":"WID-001","qty":2,"unitCents":999},{"sku":"GAD-002","qty":1,"unitCents":1500}],"declared":{"netCents":3498,"vatCents":0,"grossCents":3498}}"""^^rdf:JSON """{"orderId":"A400","shipTo":{"country":"BE"},"customer":{"email":"ada@other.example","vatId":null},"lines":[{"sku":"WID-001","qty":2,"unitCents":999},{"sku":"GAD-002","qty":1,"unitCents":1500}],"declared":{"netCents":3498,"vatCents":508,"grossCents":4006}}"""^^rdf:JSON)
#   ?Product = ex:Widget
#   ?Qty = 2
#   ?SkuCat = "WID-001"
#   ?SkuJson = "WID-001"
#   ?UnitCents = 999
# Therefore the derived triple above is entailed by the rules and facts.
# ----------------------------------------------------------------------

<urn:example:order:A300#line:0> a ex:OrderLine .

# ----------------------------------------------------------------------
# Proof for derived triple:
#   <urn:example:order:A300#line:0> ex:lineIndex 0 .
# It holds because the following instance of the rule body is provable:
#   ex:feed ex:json """{
#     "meta~data": { "batch": "2025-12-18" },
#     "orders": [
#       {
#         "orderId": "A100",
#         "shipTo": { "country": "BE" },
#         "customer": { "email": "Ada@Example.ORG", "vatId": null },
#         "lines": [
#           { "sku": "wid-001", "qty": 2, "unitCents": 999 },
#           { "sku": "GAD-002", "qty": 1, "unitCents": 1500 }
#         ],
#         "declared": { "netCents": 3498, "vatCents": 509, "grossCents": 4007 }
#       },
#       {
#         "orderId": "A200",
#         "shipTo": { "country": "US" },
#         "customer": { "email": "bob@example.org", "vatId": null },
#         "lines": [
#           { "sku": "WID-001", "qty": 2, "unitCents": 999 },
#           { "sku": "GAD-002", "qty": 1, "unitCents": 1500 }
#         ],
#         "declared": { "netCents": 3498, "vatCents": 0, "grossCents": 3498 }
#       },
#       {
#         "orderId": "A300",
#         "shipTo": { "country": "NL" },
#         "customer": { "email": "acct@company.nl", "vatId": "NL999999999B01" },
#         "lines": [
#           { "sku": "WID-001", "qty": 2, "unitCents": 999 },
#           { "sku": "GAD-002", "qty": 1, "unitCents": 1500 }
#         ],
#         "declared": { "netCents": 3498, "vatCents": 0, "grossCents": 3498 }
#       },
#       {
#         "orderId": "A301",
#         "shipTo": { "country": "NL" },
#         "customer": { "email": "billing@company.nl", "vatId": "NL999999999B01" },
#         "lines": [
#           { "sku": "WID-001", "qty": 2, "unitCents": 999 },
#           { "sku": "GAD-002", "qty": 1, "unitCents": 1500 }
#         ],
#         "declared": { "netCents": 3498, "vatCents": 0, "grossCents": 3498 }
#       },
#       {
#         "orderId": "A400",
#         "shipTo": { "country": "BE" },
#         "customer": { "email": "ada@other.example", "vatId": null },
#         "lines": [
#           { "sku": "WID-001", "qty": 2, "unitCents": 999 },
#           { "sku": "GAD-002", "qty": 1, "unitCents": 1500 }
#         ],
#         "declared": { "netCents": 3498, "vatCents": 508, "grossCents": 4006 }
#       }
#     ]
#   }"""^^rdf:JSON .
#   ("""{
#     "meta~data": { "batch": "2025-12-18" },
#     "orders": [
#       {
#         "orderId": "A100",
#         "shipTo": { "country": "BE" },
#         "customer": { "email": "Ada@Example.ORG", "vatId": null },
#         "lines": [
#           { "sku": "wid-001", "qty": 2, "unitCents": 999 },
#           { "sku": "GAD-002", "qty": 1, "unitCents": 1500 }
#         ],
#         "declared": { "netCents": 3498, "vatCents": 509, "grossCents": 4007 }
#       },
#       {
#         "orderId": "A200",
#         "shipTo": { "country": "US" },
#         "customer": { "email": "bob@example.org", "vatId": null },
#         "lines": [
#           { "sku": "WID-001", "qty": 2, "unitCents": 999 },
#           { "sku": "GAD-002", "qty": 1, "unitCents": 1500 }
#         ],
#         "declared": { "netCents": 3498, "vatCents": 0, "grossCents": 3498 }
#       },
#       {
#         "orderId": "A300",
#         "shipTo": { "country": "NL" },
#         "customer": { "email": "acct@company.nl", "vatId": "NL999999999B01" },
#         "lines": [
#           { "sku": "WID-001", "qty": 2, "unitCents": 999 },
#           { "sku": "GAD-002", "qty": 1, "unitCents": 1500 }
#         ],
#         "declared": { "netCents": 3498, "vatCents": 0, "grossCents": 3498 }
#       },
#       {
#         "orderId": "A301",
#         "shipTo": { "country": "NL" },
#         "customer": { "email": "billing@company.nl", "vatId": "NL999999999B01" },
#         "lines": [
#           { "sku": "WID-001", "qty": 2, "unitCents": 999 },
#           { "sku": "GAD-002", "qty": 1, "unitCents": 1500 }
#         ],
#         "declared": { "netCents": 3498, "vatCents": 0, "grossCents": 3498 }
#       },
#       {
#         "orderId": "A400",
#         "shipTo": { "country": "BE" },
#         "customer": { "email": "ada@other.example", "vatId": null },
#         "lines": [
#           { "sku": "WID-001", "qty": 2, "unitCents": 999 },
#           { "sku": "GAD-002", "qty": 1, "unitCents": 1500 }
#         ],
#         "declared": { "netCents": 3498, "vatCents": 508, "grossCents": 4006 }
#       }
#     ]
#   }"""^^rdf:JSON "/orders") string:jsonPointer ("""{"orderId":"A100","shipTo":{"country":"BE"},"customer":{"email":"Ada@Example.ORG","vatId":null},"lines":[{"sku":"wid-001","qty":2,"unitCents":999},{"sku":"GAD-002","qty":1,"unitCents":1500}],"declared":{"netCents":3498,"vatCents":509,"grossCents":4007}}"""^^rdf:JSON """{"orderId":"A200","shipTo":{"country":"US"},"customer":{"email":"bob@example.org","vatId":null},"lines":[{"sku":"WID-001","qty":2,"unitCents":999},{"sku":"GAD-002","qty":1,"unitCents":1500}],"declared":{"netCents":3498,"vatCents":0,"grossCents":3498}}"""^^rdf:JSON """{"orderId":"A300","shipTo":{"country":"NL"},"customer":{"email":"acct@company.nl","vatId":"NL999999999B01"},"lines":[{"sku":"WID-001","qty":2,"unitCents":999},{"sku":"GAD-002","qty":1,"unitCents":1500}],"declared":{"netCents":3498,"vatCents":0,"grossCents":3498}}"""^^rdf:JSON """{"orderId":"A301","shipTo":{"country":"NL"},"customer":{"email":"billing@company.nl","vatId":"NL999999999B01"},"lines":[{"sku":"WID-001","qty":2,"unitCents":999},{"sku":"GAD-002","qty":1,"unitCents":1500}],"declared":{"netCents":3498,"vatCents":0,"grossCents":3498}}"""^^rdf:JSON """{"orderId":"A400","shipTo":{"country":"BE"},"customer":{"email":"ada@other.example","vatId":null},"lines":[{"sku":"WID-001","qty":2,"unitCents":999},{"sku":"GAD-002","qty":1,"unitCents":1500}],"declared":{"netCents":3498,"vatCents":508,"grossCents":4006}}"""^^rdf:JSON) .
#   ("""{"orderId":"A100","shipTo":{"country":"BE"},"customer":{"email":"Ada@Example.ORG","vatId":null},"lines":[{"sku":"wid-001","qty":2,"unitCents":999},{"sku":"GAD-002","qty":1,"unitCents":1500}],"declared":{"netCents":3498,"vatCents":509,"grossCents":4007}}"""^^rdf:JSON """{"orderId":"A200","shipTo":{"country":"US"},"customer":{"email":"bob@example.org","vatId":null},"lines":[{"sku":"WID-001","qty":2,"unitCents":999},{"sku":"GAD-002","qty":1,"unitCents":1500}],"declared":{"netCents":3498,"vatCents":0,"grossCents":3498}}"""^^rdf:JSON """{"orderId":"A300","shipTo":{"country":"NL"},"customer":{"email":"acct@company.nl","vatId":"NL999999999B01"},"lines":[{"sku":"WID-001","qty":2,"unitCents":999},{"sku":"GAD-002","qty":1,"unitCents":1500}],"declared":{"netCents":3498,"vatCents":0,"grossCents":3498}}"""^^rdf:JSON """{"orderId":"A301","shipTo":{"country":"NL"},"customer":{"email":"billing@company.nl","vatId":"NL999999999B01"},"lines":[{"sku":"WID-001","qty":2,"unitCents":999},{"sku":"GAD-002","qty":1,"unitCents":1500}],"declared":{"netCents":3498,"vatCents":0,"grossCents":3498}}"""^^rdf:JSON """{"orderId":"A400","shipTo":{"country":"BE"},"customer":{"email":"ada@other.example","vatId":null},"lines":[{"sku":"WID-001","qty":2,"unitCents":999},{"sku":"GAD-002","qty":1,"unitCents":1500}],"declared":{"netCents":3498,"vatCents":508,"grossCents":4006}}"""^^rdf:JSON) list:iterate (2 """{"orderId":"A300","shipTo":{"country":"NL"},"customer":{"email":"acct@company.nl","vatId":"NL999999999B01"},"lines":[{"sku":"WID-001","qty":2,"unitCents":999},{"sku":"GAD-002","qty":1,"unitCents":1500}],"declared":{"netCents":3498,"vatCents":0,"grossCents":3498}}"""^^rdf:JSON) .
#   ("""{"orderId":"A300","shipTo":{"country":"NL"},"customer":{"email":"acct@company.nl","vatId":"NL999999999B01"},"lines":[{"sku":"WID-001","qty":2,"unitCents":999},{"sku":"GAD-002","qty":1,"unitCents":1500}],"declared":{"netCents":3498,"vatCents":0,"grossCents":3498}}"""^^rdf:JSON "/orderId") string:jsonPointer "A300" .
#   ("urn:example:order:%s" "A300") string:format "urn:example:order:A300" .
#   <urn:example:order:A300> log:uri "urn:example:order:A300" .
#   ("""{"orderId":"A300","shipTo":{"country":"NL"},"customer":{"email":"acct@company.nl","vatId":"NL999999999B01"},"lines":[{"sku":"WID-001","qty":2,"unitCents":999},{"sku":"GAD-002","qty":1,"unitCents":1500}],"declared":{"netCents":3498,"vatCents":0,"grossCents":3498}}"""^^rdf:JSON "/lines") string:jsonPointer ("""{"sku":"WID-001","qty":2,"unitCents":999}"""^^rdf:JSON """{"sku":"GAD-002","qty":1,"unitCents":1500}"""^^rdf:JSON) .
#   ("""{"sku":"WID-001","qty":2,"unitCents":999}"""^^rdf:JSON """{"sku":"GAD-002","qty":1,"unitCents":1500}"""^^rdf:JSON) list:iterate (0 """{"sku":"WID-001","qty":2,"unitCents":999}"""^^rdf:JSON) .
#   ("""{"sku":"WID-001","qty":2,"unitCents":999}"""^^rdf:JSON "/sku") string:jsonPointer "WID-001" .
#   ("""{"sku":"WID-001","qty":2,"unitCents":999}"""^^rdf:JSON "/qty") string:jsonPointer 2 .
#   ("""{"sku":"WID-001","qty":2,"unitCents":999}"""^^rdf:JSON "/unitCents") string:jsonPointer 999 .
#   ex:Widget a ex:Product .
#   ex:Widget ex:sku "WID-001" .
#   (2 999) math:product 1998 .
#   ("urn:example:order:%s#line:%s" "A300" 0) string:format "urn:example:order:A300#line:0" .
#   <urn:example:order:A300#line:0> log:uri "urn:example:order:A300#line:0" .
#   "WID-001" string:equalIgnoringCase "WID-001" .
# via the schematic forward rule:
#   {
#     ex:feed ex:json ?J .
#     (?J "/orders") string:jsonPointer ?Orders .
#     ?Orders list:iterate (?OrderIndex ?OrderJson) .
#     (?OrderJson "/orderId") string:jsonPointer ?OrderId .
#     ("urn:example:order:%s" ?OrderId) string:format ?OrderUriStr .
#     ?Order log:uri ?OrderUriStr .
#     (?OrderJson "/lines") string:jsonPointer ?Lines .
#     ?Lines list:iterate (?LineIndex ?LineJson) .
#     (?LineJson "/sku") string:jsonPointer ?SkuJson .
#     (?LineJson "/qty") string:jsonPointer ?Qty .
#     (?LineJson "/unitCents") string:jsonPointer ?UnitCents .
#     ?Product a ex:Product .
#     ?Product ex:sku ?SkuCat .
#     (?Qty ?UnitCents) math:product ?NetCents .
#     ("urn:example:order:%s#line:%s" ?OrderId ?LineIndex) string:format ?LineUriStr .
#     ?Line log:uri ?LineUriStr .
#     ?SkuJson string:equalIgnoringCase ?SkuCat .
#   } => {
#     ?Order ex:line ?Line .
#     ?Line a ex:OrderLine .
#     ?Line ex:lineIndex ?LineIndex .
#     ?Line ex:product ?Product .
#     ?Line ex:sku ?SkuCat .
#     ?Line ex:qty ?Qty .
#     ?Line ex:unitCents ?UnitCents .
#     ?Line ex:netCents ?NetCents .
#   } .
# with substitution (on rule variables):
#   ?J = """{
#     "meta~data": { "batch": "2025-12-18" },
#     "orders": [
#     {
#     "orderId": "A100",
#     "shipTo": { "country": "BE" },
#     "customer": { "email": "Ada@Example.ORG", "vatId": null },
#     "lines": [
#     { "sku": "wid-001", "qty": 2, "unitCents": 999 },
#     { "sku": "GAD-002", "qty": 1, "unitCents": 1500 }
#     ],
#     "declared": { "netCents": 3498, "vatCents": 509, "grossCents": 4007 }
#     },
#     {
#     "orderId": "A200",
#     "shipTo": { "country": "US" },
#     "customer": { "email": "bob@example.org", "vatId": null },
#     "lines": [
#     { "sku": "WID-001", "qty": 2, "unitCents": 999 },
#     { "sku": "GAD-002", "qty": 1, "unitCents": 1500 }
#     ],
#     "declared": { "netCents": 3498, "vatCents": 0, "grossCents": 3498 }
#     },
#     {
#     "orderId": "A300",
#     "shipTo": { "country": "NL" },
#     "customer": { "email": "acct@company.nl", "vatId": "NL999999999B01" },
#     "lines": [
#     { "sku": "WID-001", "qty": 2, "unitCents": 999 },
#     { "sku": "GAD-002", "qty": 1, "unitCents": 1500 }
#     ],
#     "declared": { "netCents": 3498, "vatCents": 0, "grossCents": 3498 }
#     },
#     {
#     "orderId": "A301",
#     "shipTo": { "country": "NL" },
#     "customer": { "email": "billing@company.nl", "vatId": "NL999999999B01" },
#     "lines": [
#     { "sku": "WID-001", "qty": 2, "unitCents": 999 },
#     { "sku": "GAD-002", "qty": 1, "unitCents": 1500 }
#     ],
#     "declared": { "netCents": 3498, "vatCents": 0, "grossCents": 3498 }
#     },
#     {
#     "orderId": "A400",
#     "shipTo": { "country": "BE" },
#     "customer": { "email": "ada@other.example", "vatId": null },
#     "lines": [
#     { "sku": "WID-001", "qty": 2, "unitCents": 999 },
#     { "sku": "GAD-002", "qty": 1, "unitCents": 1500 }
#     ],
#     "declared": { "netCents": 3498, "vatCents": 508, "grossCents": 4006 }
#     }
#     ]
#   }"""^^rdf:JSON
#   ?Line = <urn:example:order:A300#line:0>
#   ?LineIndex = 0
#   ?LineJson = """{"sku":"WID-001","qty":2,"unitCents":999}"""^^rdf:JSON
#   ?LineUriStr = "urn:example:order:A300#line:0"
#   ?Lines = ("""{"sku":"WID-001","qty":2,"unitCents":999}"""^^rdf:JSON """{"sku":"GAD-002","qty":1,"unitCents":1500}"""^^rdf:JSON)
#   ?NetCents = 1998
#   ?Order = <urn:example:order:A300>
#   ?OrderId = "A300"
#   ?OrderIndex = 2
#   ?OrderJson = """{"orderId":"A300","shipTo":{"country":"NL"},"customer":{"email":"acct@company.nl","vatId":"NL999999999B01"},"lines":[{"sku":"WID-001","qty":2,"unitCents":999},{"sku":"GAD-002","qty":1,"unitCents":1500}],"declared":{"netCents":3498,"vatCents":0,"grossCents":3498}}"""^^rdf:JSON
#   ?OrderUriStr = "urn:example:order:A300"
#   ?Orders = ("""{"orderId":"A100","shipTo":{"country":"BE"},"customer":{"email":"Ada@Example.ORG","vatId":null},"lines":[{"sku":"wid-001","qty":2,"unitCents":999},{"sku":"GAD-002","qty":1,"unitCents":1500}],"declared":{"netCents":3498,"vatCents":509,"grossCents":4007}}"""^^rdf:JSON """{"orderId":"A200","shipTo":{"country":"US"},"customer":{"email":"bob@example.org","vatId":null},"lines":[{"sku":"WID-001","qty":2,"unitCents":999},{"sku":"GAD-002","qty":1,"unitCents":1500}],"declared":{"netCents":3498,"vatCents":0,"grossCents":3498}}"""^^rdf:JSON """{"orderId":"A300","shipTo":{"country":"NL"},"customer":{"email":"acct@company.nl","vatId":"NL999999999B01"},"lines":[{"sku":"WID-001","qty":2,"unitCents":999},{"sku":"GAD-002","qty":1,"unitCents":1500}],"declared":{"netCents":3498,"vatCents":0,"grossCents":3498}}"""^^rdf:JSON """{"orderId":"A301","shipTo":{"country":"NL"},"customer":{"email":"billing@company.nl","vatId":"NL999999999B01"},"lines":[{"sku":"WID-001","qty":2,"unitCents":999},{"sku":"GAD-002","qty":1,"unitCents":1500}],"declared":{"netCents":3498,"vatCents":0,"grossCents":3498}}"""^^rdf:JSON """{"orderId":"A400","shipTo":{"country":"BE"},"customer":{"email":"ada@other.example","vatId":null},"lines":[{"sku":"WID-001","qty":2,"unitCents":999},{"sku":"GAD-002","qty":1,"unitCents":1500}],"declared":{"netCents":3498,"vatCents":508,"grossCents":4006}}"""^^rdf:JSON)
#   ?Product = ex:Widget
#   ?Qty = 2
#   ?SkuCat = "WID-001"
#   ?SkuJson = "WID-001"
#   ?UnitCents = 999
# Therefore the derived triple above is entailed by the rules and facts.
# ----------------------------------------------------------------------

<urn:example:order:A300#line:0> ex:lineIndex 0 .

# ----------------------------------------------------------------------
# Proof for derived triple:
#   <urn:example:order:A300#line:0> ex:product ex:Widget .
# It holds because the following instance of the rule body is provable:
#   ex:feed ex:json """{
#     "meta~data": { "batch": "2025-12-18" },
#     "orders": [
#       {
#         "orderId": "A100",
#         "shipTo": { "country": "BE" },
#         "customer": { "email": "Ada@Example.ORG", "vatId": null },
#         "lines": [
#           { "sku": "wid-001", "qty": 2, "unitCents": 999 },
#           { "sku": "GAD-002", "qty": 1, "unitCents": 1500 }
#         ],
#         "declared": { "netCents": 3498, "vatCents": 509, "grossCents": 4007 }
#       },
#       {
#         "orderId": "A200",
#         "shipTo": { "country": "US" },
#         "customer": { "email": "bob@example.org", "vatId": null },
#         "lines": [
#           { "sku": "WID-001", "qty": 2, "unitCents": 999 },
#           { "sku": "GAD-002", "qty": 1, "unitCents": 1500 }
#         ],
#         "declared": { "netCents": 3498, "vatCents": 0, "grossCents": 3498 }
#       },
#       {
#         "orderId": "A300",
#         "shipTo": { "country": "NL" },
#         "customer": { "email": "acct@company.nl", "vatId": "NL999999999B01" },
#         "lines": [
#           { "sku": "WID-001", "qty": 2, "unitCents": 999 },
#           { "sku": "GAD-002", "qty": 1, "unitCents": 1500 }
#         ],
#         "declared": { "netCents": 3498, "vatCents": 0, "grossCents": 3498 }
#       },
#       {
#         "orderId": "A301",
#         "shipTo": { "country": "NL" },
#         "customer": { "email": "billing@company.nl", "vatId": "NL999999999B01" },
#         "lines": [
#           { "sku": "WID-001", "qty": 2, "unitCents": 999 },
#           { "sku": "GAD-002", "qty": 1, "unitCents": 1500 }
#         ],
#         "declared": { "netCents": 3498, "vatCents": 0, "grossCents": 3498 }
#       },
#       {
#         "orderId": "A400",
#         "shipTo": { "country": "BE" },
#         "customer": { "email": "ada@other.example", "vatId": null },
#         "lines": [
#           { "sku": "WID-001", "qty": 2, "unitCents": 999 },
#           { "sku": "GAD-002", "qty": 1, "unitCents": 1500 }
#         ],
#         "declared": { "netCents": 3498, "vatCents": 508, "grossCents": 4006 }
#       }
#     ]
#   }"""^^rdf:JSON .
#   ("""{
#     "meta~data": { "batch": "2025-12-18" },
#     "orders": [
#       {
#         "orderId": "A100",
#         "shipTo": { "country": "BE" },
#         "customer": { "email": "Ada@Example.ORG", "vatId": null },
#         "lines": [
#           { "sku": "wid-001", "qty": 2, "unitCents": 999 },
#           { "sku": "GAD-002", "qty": 1, "unitCents": 1500 }
#         ],
#         "declared": { "netCents": 3498, "vatCents": 509, "grossCents": 4007 }
#       },
#       {
#         "orderId": "A200",
#         "shipTo": { "country": "US" },
#         "customer": { "email": "bob@example.org", "vatId": null },
#         "lines": [
#           { "sku": "WID-001", "qty": 2, "unitCents": 999 },
#           { "sku": "GAD-002", "qty": 1, "unitCents": 1500 }
#         ],
#         "declared": { "netCents": 3498, "vatCents": 0, "grossCents": 3498 }
#       },
#       {
#         "orderId": "A300",
#         "shipTo": { "country": "NL" },
#         "customer": { "email": "acct@company.nl", "vatId": "NL999999999B01" },
#         "lines": [
#           { "sku": "WID-001", "qty": 2, "unitCents": 999 },
#           { "sku": "GAD-002", "qty": 1, "unitCents": 1500 }
#         ],
#         "declared": { "netCents": 3498, "vatCents": 0, "grossCents": 3498 }
#       },
#       {
#         "orderId": "A301",
#         "shipTo": { "country": "NL" },
#         "customer": { "email": "billing@company.nl", "vatId": "NL999999999B01" },
#         "lines": [
#           { "sku": "WID-001", "qty": 2, "unitCents": 999 },
#           { "sku": "GAD-002", "qty": 1, "unitCents": 1500 }
#         ],
#         "declared": { "netCents": 3498, "vatCents": 0, "grossCents": 3498 }
#       },
#       {
#         "orderId": "A400",
#         "shipTo": { "country": "BE" },
#         "customer": { "email": "ada@other.example", "vatId": null },
#         "lines": [
#           { "sku": "WID-001", "qty": 2, "unitCents": 999 },
#           { "sku": "GAD-002", "qty": 1, "unitCents": 1500 }
#         ],
#         "declared": { "netCents": 3498, "vatCents": 508, "grossCents": 4006 }
#       }
#     ]
#   }"""^^rdf:JSON "/orders") string:jsonPointer ("""{"orderId":"A100","shipTo":{"country":"BE"},"customer":{"email":"Ada@Example.ORG","vatId":null},"lines":[{"sku":"wid-001","qty":2,"unitCents":999},{"sku":"GAD-002","qty":1,"unitCents":1500}],"declared":{"netCents":3498,"vatCents":509,"grossCents":4007}}"""^^rdf:JSON """{"orderId":"A200","shipTo":{"country":"US"},"customer":{"email":"bob@example.org","vatId":null},"lines":[{"sku":"WID-001","qty":2,"unitCents":999},{"sku":"GAD-002","qty":1,"unitCents":1500}],"declared":{"netCents":3498,"vatCents":0,"grossCents":3498}}"""^^rdf:JSON """{"orderId":"A300","shipTo":{"country":"NL"},"customer":{"email":"acct@company.nl","vatId":"NL999999999B01"},"lines":[{"sku":"WID-001","qty":2,"unitCents":999},{"sku":"GAD-002","qty":1,"unitCents":1500}],"declared":{"netCents":3498,"vatCents":0,"grossCents":3498}}"""^^rdf:JSON """{"orderId":"A301","shipTo":{"country":"NL"},"customer":{"email":"billing@company.nl","vatId":"NL999999999B01"},"lines":[{"sku":"WID-001","qty":2,"unitCents":999},{"sku":"GAD-002","qty":1,"unitCents":1500}],"declared":{"netCents":3498,"vatCents":0,"grossCents":3498}}"""^^rdf:JSON """{"orderId":"A400","shipTo":{"country":"BE"},"customer":{"email":"ada@other.example","vatId":null},"lines":[{"sku":"WID-001","qty":2,"unitCents":999},{"sku":"GAD-002","qty":1,"unitCents":1500}],"declared":{"netCents":3498,"vatCents":508,"grossCents":4006}}"""^^rdf:JSON) .
#   ("""{"orderId":"A100","shipTo":{"country":"BE"},"customer":{"email":"Ada@Example.ORG","vatId":null},"lines":[{"sku":"wid-001","qty":2,"unitCents":999},{"sku":"GAD-002","qty":1,"unitCents":1500}],"declared":{"netCents":3498,"vatCents":509,"grossCents":4007}}"""^^rdf:JSON """{"orderId":"A200","shipTo":{"country":"US"},"customer":{"email":"bob@example.org","vatId":null},"lines":[{"sku":"WID-001","qty":2,"unitCents":999},{"sku":"GAD-002","qty":1,"unitCents":1500}],"declared":{"netCents":3498,"vatCents":0,"grossCents":3498}}"""^^rdf:JSON """{"orderId":"A300","shipTo":{"country":"NL"},"customer":{"email":"acct@company.nl","vatId":"NL999999999B01"},"lines":[{"sku":"WID-001","qty":2,"unitCents":999},{"sku":"GAD-002","qty":1,"unitCents":1500}],"declared":{"netCents":3498,"vatCents":0,"grossCents":3498}}"""^^rdf:JSON """{"orderId":"A301","shipTo":{"country":"NL"},"customer":{"email":"billing@company.nl","vatId":"NL999999999B01"},"lines":[{"sku":"WID-001","qty":2,"unitCents":999},{"sku":"GAD-002","qty":1,"unitCents":1500}],"declared":{"netCents":3498,"vatCents":0,"grossCents":3498}}"""^^rdf:JSON """{"orderId":"A400","shipTo":{"country":"BE"},"customer":{"email":"ada@other.example","vatId":null},"lines":[{"sku":"WID-001","qty":2,"unitCents":999},{"sku":"GAD-002","qty":1,"unitCents":1500}],"declared":{"netCents":3498,"vatCents":508,"grossCents":4006}}"""^^rdf:JSON) list:iterate (2 """{"orderId":"A300","shipTo":{"country":"NL"},"customer":{"email":"acct@company.nl","vatId":"NL999999999B01"},"lines":[{"sku":"WID-001","qty":2,"unitCents":999},{"sku":"GAD-002","qty":1,"unitCents":1500}],"declared":{"netCents":3498,"vatCents":0,"grossCents":3498}}"""^^rdf:JSON) .
#   ("""{"orderId":"A300","shipTo":{"country":"NL"},"customer":{"email":"acct@company.nl","vatId":"NL999999999B01"},"lines":[{"sku":"WID-001","qty":2,"unitCents":999},{"sku":"GAD-002","qty":1,"unitCents":1500}],"declared":{"netCents":3498,"vatCents":0,"grossCents":3498}}"""^^rdf:JSON "/orderId") string:jsonPointer "A300" .
#   ("urn:example:order:%s" "A300") string:format "urn:example:order:A300" .
#   <urn:example:order:A300> log:uri "urn:example:order:A300" .
#   ("""{"orderId":"A300","shipTo":{"country":"NL"},"customer":{"email":"acct@company.nl","vatId":"NL999999999B01"},"lines":[{"sku":"WID-001","qty":2,"unitCents":999},{"sku":"GAD-002","qty":1,"unitCents":1500}],"declared":{"netCents":3498,"vatCents":0,"grossCents":3498}}"""^^rdf:JSON "/lines") string:jsonPointer ("""{"sku":"WID-001","qty":2,"unitCents":999}"""^^rdf:JSON """{"sku":"GAD-002","qty":1,"unitCents":1500}"""^^rdf:JSON) .
#   ("""{"sku":"WID-001","qty":2,"unitCents":999}"""^^rdf:JSON """{"sku":"GAD-002","qty":1,"unitCents":1500}"""^^rdf:JSON) list:iterate (0 """{"sku":"WID-001","qty":2,"unitCents":999}"""^^rdf:JSON) .
#   ("""{"sku":"WID-001","qty":2,"unitCents":999}"""^^rdf:JSON "/sku") string:jsonPointer "WID-001" .
#   ("""{"sku":"WID-001","qty":2,"unitCents":999}"""^^rdf:JSON "/qty") string:jsonPointer 2 .
#   ("""{"sku":"WID-001","qty":2,"unitCents":999}"""^^rdf:JSON "/unitCents") string:jsonPointer 999 .
#   ex:Widget a ex:Product .
#   ex:Widget ex:sku "WID-001" .
#   (2 999) math:product 1998 .
#   ("urn:example:order:%s#line:%s" "A300" 0) string:format "urn:example:order:A300#line:0" .
#   <urn:example:order:A300#line:0> log:uri "urn:example:order:A300#line:0" .
#   "WID-001" string:equalIgnoringCase "WID-001" .
# via the schematic forward rule:
#   {
#     ex:feed ex:json ?J .
#     (?J "/orders") string:jsonPointer ?Orders .
#     ?Orders list:iterate (?OrderIndex ?OrderJson) .
#     (?OrderJson "/orderId") string:jsonPointer ?OrderId .
#     ("urn:example:order:%s" ?OrderId) string:format ?OrderUriStr .
#     ?Order log:uri ?OrderUriStr .
#     (?OrderJson "/lines") string:jsonPointer ?Lines .
#     ?Lines list:iterate (?LineIndex ?LineJson) .
#     (?LineJson "/sku") string:jsonPointer ?SkuJson .
#     (?LineJson "/qty") string:jsonPointer ?Qty .
#     (?LineJson "/unitCents") string:jsonPointer ?UnitCents .
#     ?Product a ex:Product .
#     ?Product ex:sku ?SkuCat .
#     (?Qty ?UnitCents) math:product ?NetCents .
#     ("urn:example:order:%s#line:%s" ?OrderId ?LineIndex) string:format ?LineUriStr .
#     ?Line log:uri ?LineUriStr .
#     ?SkuJson string:equalIgnoringCase ?SkuCat .
#   } => {
#     ?Order ex:line ?Line .
#     ?Line a ex:OrderLine .
#     ?Line ex:lineIndex ?LineIndex .
#     ?Line ex:product ?Product .
#     ?Line ex:sku ?SkuCat .
#     ?Line ex:qty ?Qty .
#     ?Line ex:unitCents ?UnitCents .
#     ?Line ex:netCents ?NetCents .
#   } .
# with substitution (on rule variables):
#   ?J = """{
#     "meta~data": { "batch": "2025-12-18" },
#     "orders": [
#     {
#     "orderId": "A100",
#     "shipTo": { "country": "BE" },
#     "customer": { "email": "Ada@Example.ORG", "vatId": null },
#     "lines": [
#     { "sku": "wid-001", "qty": 2, "unitCents": 999 },
#     { "sku": "GAD-002", "qty": 1, "unitCents": 1500 }
#     ],
#     "declared": { "netCents": 3498, "vatCents": 509, "grossCents": 4007 }
#     },
#     {
#     "orderId": "A200",
#     "shipTo": { "country": "US" },
#     "customer": { "email": "bob@example.org", "vatId": null },
#     "lines": [
#     { "sku": "WID-001", "qty": 2, "unitCents": 999 },
#     { "sku": "GAD-002", "qty": 1, "unitCents": 1500 }
#     ],
#     "declared": { "netCents": 3498, "vatCents": 0, "grossCents": 3498 }
#     },
#     {
#     "orderId": "A300",
#     "shipTo": { "country": "NL" },
#     "customer": { "email": "acct@company.nl", "vatId": "NL999999999B01" },
#     "lines": [
#     { "sku": "WID-001", "qty": 2, "unitCents": 999 },
#     { "sku": "GAD-002", "qty": 1, "unitCents": 1500 }
#     ],
#     "declared": { "netCents": 3498, "vatCents": 0, "grossCents": 3498 }
#     },
#     {
#     "orderId": "A301",
#     "shipTo": { "country": "NL" },
#     "customer": { "email": "billing@company.nl", "vatId": "NL999999999B01" },
#     "lines": [
#     { "sku": "WID-001", "qty": 2, "unitCents": 999 },
#     { "sku": "GAD-002", "qty": 1, "unitCents": 1500 }
#     ],
#     "declared": { "netCents": 3498, "vatCents": 0, "grossCents": 3498 }
#     },
#     {
#     "orderId": "A400",
#     "shipTo": { "country": "BE" },
#     "customer": { "email": "ada@other.example", "vatId": null },
#     "lines": [
#     { "sku": "WID-001", "qty": 2, "unitCents": 999 },
#     { "sku": "GAD-002", "qty": 1, "unitCents": 1500 }
#     ],
#     "declared": { "netCents": 3498, "vatCents": 508, "grossCents": 4006 }
#     }
#     ]
#   }"""^^rdf:JSON
#   ?Line = <urn:example:order:A300#line:0>
#   ?LineIndex = 0
#   ?LineJson = """{"sku":"WID-001","qty":2,"unitCents":999}"""^^rdf:JSON
#   ?LineUriStr = "urn:example:order:A300#line:0"
#   ?Lines = ("""{"sku":"WID-001","qty":2,"unitCents":999}"""^^rdf:JSON """{"sku":"GAD-002","qty":1,"unitCents":1500}"""^^rdf:JSON)
#   ?NetCents = 1998
#   ?Order = <urn:example:order:A300>
#   ?OrderId = "A300"
#   ?OrderIndex = 2
#   ?OrderJson = """{"orderId":"A300","shipTo":{"country":"NL"},"customer":{"email":"acct@company.nl","vatId":"NL999999999B01"},"lines":[{"sku":"WID-001","qty":2,"unitCents":999},{"sku":"GAD-002","qty":1,"unitCents":1500}],"declared":{"netCents":3498,"vatCents":0,"grossCents":3498}}"""^^rdf:JSON
#   ?OrderUriStr = "urn:example:order:A300"
#   ?Orders = ("""{"orderId":"A100","shipTo":{"country":"BE"},"customer":{"email":"Ada@Example.ORG","vatId":null},"lines":[{"sku":"wid-001","qty":2,"unitCents":999},{"sku":"GAD-002","qty":1,"unitCents":1500}],"declared":{"netCents":3498,"vatCents":509,"grossCents":4007}}"""^^rdf:JSON """{"orderId":"A200","shipTo":{"country":"US"},"customer":{"email":"bob@example.org","vatId":null},"lines":[{"sku":"WID-001","qty":2,"unitCents":999},{"sku":"GAD-002","qty":1,"unitCents":1500}],"declared":{"netCents":3498,"vatCents":0,"grossCents":3498}}"""^^rdf:JSON """{"orderId":"A300","shipTo":{"country":"NL"},"customer":{"email":"acct@company.nl","vatId":"NL999999999B01"},"lines":[{"sku":"WID-001","qty":2,"unitCents":999},{"sku":"GAD-002","qty":1,"unitCents":1500}],"declared":{"netCents":3498,"vatCents":0,"grossCents":3498}}"""^^rdf:JSON """{"orderId":"A301","shipTo":{"country":"NL"},"customer":{"email":"billing@company.nl","vatId":"NL999999999B01"},"lines":[{"sku":"WID-001","qty":2,"unitCents":999},{"sku":"GAD-002","qty":1,"unitCents":1500}],"declared":{"netCents":3498,"vatCents":0,"grossCents":3498}}"""^^rdf:JSON """{"orderId":"A400","shipTo":{"country":"BE"},"customer":{"email":"ada@other.example","vatId":null},"lines":[{"sku":"WID-001","qty":2,"unitCents":999},{"sku":"GAD-002","qty":1,"unitCents":1500}],"declared":{"netCents":3498,"vatCents":508,"grossCents":4006}}"""^^rdf:JSON)
#   ?Product = ex:Widget
#   ?Qty = 2
#   ?SkuCat = "WID-001"
#   ?SkuJson = "WID-001"
#   ?UnitCents = 999
# Therefore the derived triple above is entailed by the rules and facts.
# ----------------------------------------------------------------------

<urn:example:order:A300#line:0> ex:product ex:Widget .

# ----------------------------------------------------------------------
# Proof for derived triple:
#   <urn:example:order:A300#line:0> ex:sku "WID-001" .
# It holds because the following instance of the rule body is provable:
#   ex:feed ex:json """{
#     "meta~data": { "batch": "2025-12-18" },
#     "orders": [
#       {
#         "orderId": "A100",
#         "shipTo": { "country": "BE" },
#         "customer": { "email": "Ada@Example.ORG", "vatId": null },
#         "lines": [
#           { "sku": "wid-001", "qty": 2, "unitCents": 999 },
#           { "sku": "GAD-002", "qty": 1, "unitCents": 1500 }
#         ],
#         "declared": { "netCents": 3498, "vatCents": 509, "grossCents": 4007 }
#       },
#       {
#         "orderId": "A200",
#         "shipTo": { "country": "US" },
#         "customer": { "email": "bob@example.org", "vatId": null },
#         "lines": [
#           { "sku": "WID-001", "qty": 2, "unitCents": 999 },
#           { "sku": "GAD-002", "qty": 1, "unitCents": 1500 }
#         ],
#         "declared": { "netCents": 3498, "vatCents": 0, "grossCents": 3498 }
#       },
#       {
#         "orderId": "A300",
#         "shipTo": { "country": "NL" },
#         "customer": { "email": "acct@company.nl", "vatId": "NL999999999B01" },
#         "lines": [
#           { "sku": "WID-001", "qty": 2, "unitCents": 999 },
#           { "sku": "GAD-002", "qty": 1, "unitCents": 1500 }
#         ],
#         "declared": { "netCents": 3498, "vatCents": 0, "grossCents": 3498 }
#       },
#       {
#         "orderId": "A301",
#         "shipTo": { "country": "NL" },
#         "customer": { "email": "billing@company.nl", "vatId": "NL999999999B01" },
#         "lines": [
#           { "sku": "WID-001", "qty": 2, "unitCents": 999 },
#           { "sku": "GAD-002", "qty": 1, "unitCents": 1500 }
#         ],
#         "declared": { "netCents": 3498, "vatCents": 0, "grossCents": 3498 }
#       },
#       {
#         "orderId": "A400",
#         "shipTo": { "country": "BE" },
#         "customer": { "email": "ada@other.example", "vatId": null },
#         "lines": [
#           { "sku": "WID-001", "qty": 2, "unitCents": 999 },
#           { "sku": "GAD-002", "qty": 1, "unitCents": 1500 }
#         ],
#         "declared": { "netCents": 3498, "vatCents": 508, "grossCents": 4006 }
#       }
#     ]
#   }"""^^rdf:JSON .
#   ("""{
#     "meta~data": { "batch": "2025-12-18" },
#     "orders": [
#       {
#         "orderId": "A100",
#         "shipTo": { "country": "BE" },
#         "customer": { "email": "Ada@Example.ORG", "vatId": null },
#         "lines": [
#           { "sku": "wid-001", "qty": 2, "unitCents": 999 },
#           { "sku": "GAD-002", "qty": 1, "unitCents": 1500 }
#         ],
#         "declared": { "netCents": 3498, "vatCents": 509, "grossCents": 4007 }
#       },
#       {
#         "orderId": "A200",
#         "shipTo": { "country": "US" },
#         "customer": { "email": "bob@example.org", "vatId": null },
#         "lines": [
#           { "sku": "WID-001", "qty": 2, "unitCents": 999 },
#           { "sku": "GAD-002", "qty": 1, "unitCents": 1500 }
#         ],
#         "declared": { "netCents": 3498, "vatCents": 0, "grossCents": 3498 }
#       },
#       {
#         "orderId": "A300",
#         "shipTo": { "country": "NL" },
#         "customer": { "email": "acct@company.nl", "vatId": "NL999999999B01" },
#         "lines": [
#           { "sku": "WID-001", "qty": 2, "unitCents": 999 },
#           { "sku": "GAD-002", "qty": 1, "unitCents": 1500 }
#         ],
#         "declared": { "netCents": 3498, "vatCents": 0, "grossCents": 3498 }
#       },
#       {
#         "orderId": "A301",
#         "shipTo": { "country": "NL" },
#         "customer": { "email": "billing@company.nl", "vatId": "NL999999999B01" },
#         "lines": [
#           { "sku": "WID-001", "qty": 2, "unitCents": 999 },
#           { "sku": "GAD-002", "qty": 1, "unitCents": 1500 }
#         ],
#         "declared": { "netCents": 3498, "vatCents": 0, "grossCents": 3498 }
#       },
#       {
#         "orderId": "A400",
#         "shipTo": { "country": "BE" },
#         "customer": { "email": "ada@other.example", "vatId": null },
#         "lines": [
#           { "sku": "WID-001", "qty": 2, "unitCents": 999 },
#           { "sku": "GAD-002", "qty": 1, "unitCents": 1500 }
#         ],
#         "declared": { "netCents": 3498, "vatCents": 508, "grossCents": 4006 }
#       }
#     ]
#   }"""^^rdf:JSON "/orders") string:jsonPointer ("""{"orderId":"A100","shipTo":{"country":"BE"},"customer":{"email":"Ada@Example.ORG","vatId":null},"lines":[{"sku":"wid-001","qty":2,"unitCents":999},{"sku":"GAD-002","qty":1,"unitCents":1500}],"declared":{"netCents":3498,"vatCents":509,"grossCents":4007}}"""^^rdf:JSON """{"orderId":"A200","shipTo":{"country":"US"},"customer":{"email":"bob@example.org","vatId":null},"lines":[{"sku":"WID-001","qty":2,"unitCents":999},{"sku":"GAD-002","qty":1,"unitCents":1500}],"declared":{"netCents":3498,"vatCents":0,"grossCents":3498}}"""^^rdf:JSON """{"orderId":"A300","shipTo":{"country":"NL"},"customer":{"email":"acct@company.nl","vatId":"NL999999999B01"},"lines":[{"sku":"WID-001","qty":2,"unitCents":999},{"sku":"GAD-002","qty":1,"unitCents":1500}],"declared":{"netCents":3498,"vatCents":0,"grossCents":3498}}"""^^rdf:JSON """{"orderId":"A301","shipTo":{"country":"NL"},"customer":{"email":"billing@company.nl","vatId":"NL999999999B01"},"lines":[{"sku":"WID-001","qty":2,"unitCents":999},{"sku":"GAD-002","qty":1,"unitCents":1500}],"declared":{"netCents":3498,"vatCents":0,"grossCents":3498}}"""^^rdf:JSON """{"orderId":"A400","shipTo":{"country":"BE"},"customer":{"email":"ada@other.example","vatId":null},"lines":[{"sku":"WID-001","qty":2,"unitCents":999},{"sku":"GAD-002","qty":1,"unitCents":1500}],"declared":{"netCents":3498,"vatCents":508,"grossCents":4006}}"""^^rdf:JSON) .
#   ("""{"orderId":"A100","shipTo":{"country":"BE"},"customer":{"email":"Ada@Example.ORG","vatId":null},"lines":[{"sku":"wid-001","qty":2,"unitCents":999},{"sku":"GAD-002","qty":1,"unitCents":1500}],"declared":{"netCents":3498,"vatCents":509,"grossCents":4007}}"""^^rdf:JSON """{"orderId":"A200","shipTo":{"country":"US"},"customer":{"email":"bob@example.org","vatId":null},"lines":[{"sku":"WID-001","qty":2,"unitCents":999},{"sku":"GAD-002","qty":1,"unitCents":1500}],"declared":{"netCents":3498,"vatCents":0,"grossCents":3498}}"""^^rdf:JSON """{"orderId":"A300","shipTo":{"country":"NL"},"customer":{"email":"acct@company.nl","vatId":"NL999999999B01"},"lines":[{"sku":"WID-001","qty":2,"unitCents":999},{"sku":"GAD-002","qty":1,"unitCents":1500}],"declared":{"netCents":3498,"vatCents":0,"grossCents":3498}}"""^^rdf:JSON """{"orderId":"A301","shipTo":{"country":"NL"},"customer":{"email":"billing@company.nl","vatId":"NL999999999B01"},"lines":[{"sku":"WID-001","qty":2,"unitCents":999},{"sku":"GAD-002","qty":1,"unitCents":1500}],"declared":{"netCents":3498,"vatCents":0,"grossCents":3498}}"""^^rdf:JSON """{"orderId":"A400","shipTo":{"country":"BE"},"customer":{"email":"ada@other.example","vatId":null},"lines":[{"sku":"WID-001","qty":2,"unitCents":999},{"sku":"GAD-002","qty":1,"unitCents":1500}],"declared":{"netCents":3498,"vatCents":508,"grossCents":4006}}"""^^rdf:JSON) list:iterate (2 """{"orderId":"A300","shipTo":{"country":"NL"},"customer":{"email":"acct@company.nl","vatId":"NL999999999B01"},"lines":[{"sku":"WID-001","qty":2,"unitCents":999},{"sku":"GAD-002","qty":1,"unitCents":1500}],"declared":{"netCents":3498,"vatCents":0,"grossCents":3498}}"""^^rdf:JSON) .
#   ("""{"orderId":"A300","shipTo":{"country":"NL"},"customer":{"email":"acct@company.nl","vatId":"NL999999999B01"},"lines":[{"sku":"WID-001","qty":2,"unitCents":999},{"sku":"GAD-002","qty":1,"unitCents":1500}],"declared":{"netCents":3498,"vatCents":0,"grossCents":3498}}"""^^rdf:JSON "/orderId") string:jsonPointer "A300" .
#   ("urn:example:order:%s" "A300") string:format "urn:example:order:A300" .
#   <urn:example:order:A300> log:uri "urn:example:order:A300" .
#   ("""{"orderId":"A300","shipTo":{"country":"NL"},"customer":{"email":"acct@company.nl","vatId":"NL999999999B01"},"lines":[{"sku":"WID-001","qty":2,"unitCents":999},{"sku":"GAD-002","qty":1,"unitCents":1500}],"declared":{"netCents":3498,"vatCents":0,"grossCents":3498}}"""^^rdf:JSON "/lines") string:jsonPointer ("""{"sku":"WID-001","qty":2,"unitCents":999}"""^^rdf:JSON """{"sku":"GAD-002","qty":1,"unitCents":1500}"""^^rdf:JSON) .
#   ("""{"sku":"WID-001","qty":2,"unitCents":999}"""^^rdf:JSON """{"sku":"GAD-002","qty":1,"unitCents":1500}"""^^rdf:JSON) list:iterate (0 """{"sku":"WID-001","qty":2,"unitCents":999}"""^^rdf:JSON) .
#   ("""{"sku":"WID-001","qty":2,"unitCents":999}"""^^rdf:JSON "/sku") string:jsonPointer "WID-001" .
#   ("""{"sku":"WID-001","qty":2,"unitCents":999}"""^^rdf:JSON "/qty") string:jsonPointer 2 .
#   ("""{"sku":"WID-001","qty":2,"unitCents":999}"""^^rdf:JSON "/unitCents") string:jsonPointer 999 .
#   ex:Widget a ex:Product .
#   ex:Widget ex:sku "WID-001" .
#   (2 999) math:product 1998 .
#   ("urn:example:order:%s#line:%s" "A300" 0) string:format "urn:example:order:A300#line:0" .
#   <urn:example:order:A300#line:0> log:uri "urn:example:order:A300#line:0" .
#   "WID-001" string:equalIgnoringCase "WID-001" .
# via the schematic forward rule:
#   {
#     ex:feed ex:json ?J .
#     (?J "/orders") string:jsonPointer ?Orders .
#     ?Orders list:iterate (?OrderIndex ?OrderJson) .
#     (?OrderJson "/orderId") string:jsonPointer ?OrderId .
#     ("urn:example:order:%s" ?OrderId) string:format ?OrderUriStr .
#     ?Order log:uri ?OrderUriStr .
#     (?OrderJson "/lines") string:jsonPointer ?Lines .
#     ?Lines list:iterate (?LineIndex ?LineJson) .
#     (?LineJson "/sku") string:jsonPointer ?SkuJson .
#     (?LineJson "/qty") string:jsonPointer ?Qty .
#     (?LineJson "/unitCents") string:jsonPointer ?UnitCents .
#     ?Product a ex:Product .
#     ?Product ex:sku ?SkuCat .
#     (?Qty ?UnitCents) math:product ?NetCents .
#     ("urn:example:order:%s#line:%s" ?OrderId ?LineIndex) string:format ?LineUriStr .
#     ?Line log:uri ?LineUriStr .
#     ?SkuJson string:equalIgnoringCase ?SkuCat .
#   } => {
#     ?Order ex:line ?Line .
#     ?Line a ex:OrderLine .
#     ?Line ex:lineIndex ?LineIndex .
#     ?Line ex:product ?Product .
#     ?Line ex:sku ?SkuCat .
#     ?Line ex:qty ?Qty .
#     ?Line ex:unitCents ?UnitCents .
#     ?Line ex:netCents ?NetCents .
#   } .
# with substitution (on rule variables):
#   ?J = """{
#     "meta~data": { "batch": "2025-12-18" },
#     "orders": [
#     {
#     "orderId": "A100",
#     "shipTo": { "country": "BE" },
#     "customer": { "email": "Ada@Example.ORG", "vatId": null },
#     "lines": [
#     { "sku": "wid-001", "qty": 2, "unitCents": 999 },
#     { "sku": "GAD-002", "qty": 1, "unitCents": 1500 }
#     ],
#     "declared": { "netCents": 3498, "vatCents": 509, "grossCents": 4007 }
#     },
#     {
#     "orderId": "A200",
#     "shipTo": { "country": "US" },
#     "customer": { "email": "bob@example.org", "vatId": null },
#     "lines": [
#     { "sku": "WID-001", "qty": 2, "unitCents": 999 },
#     { "sku": "GAD-002", "qty": 1, "unitCents": 1500 }
#     ],
#     "declared": { "netCents": 3498, "vatCents": 0, "grossCents": 3498 }
#     },
#     {
#     "orderId": "A300",
#     "shipTo": { "country": "NL" },
#     "customer": { "email": "acct@company.nl", "vatId": "NL999999999B01" },
#     "lines": [
#     { "sku": "WID-001", "qty": 2, "unitCents": 999 },
#     { "sku": "GAD-002", "qty": 1, "unitCents": 1500 }
#     ],
#     "declared": { "netCents": 3498, "vatCents": 0, "grossCents": 3498 }
#     },
#     {
#     "orderId": "A301",
#     "shipTo": { "country": "NL" },
#     "customer": { "email": "billing@company.nl", "vatId": "NL999999999B01" },
#     "lines": [
#     { "sku": "WID-001", "qty": 2, "unitCents": 999 },
#     { "sku": "GAD-002", "qty": 1, "unitCents": 1500 }
#     ],
#     "declared": { "netCents": 3498, "vatCents": 0, "grossCents": 3498 }
#     },
#     {
#     "orderId": "A400",
#     "shipTo": { "country": "BE" },
#     "customer": { "email": "ada@other.example", "vatId": null },
#     "lines": [
#     { "sku": "WID-001", "qty": 2, "unitCents": 999 },
#     { "sku": "GAD-002", "qty": 1, "unitCents": 1500 }
#     ],
#     "declared": { "netCents": 3498, "vatCents": 508, "grossCents": 4006 }
#     }
#     ]
#   }"""^^rdf:JSON
#   ?Line = <urn:example:order:A300#line:0>
#   ?LineIndex = 0
#   ?LineJson = """{"sku":"WID-001","qty":2,"unitCents":999}"""^^rdf:JSON
#   ?LineUriStr = "urn:example:order:A300#line:0"
#   ?Lines = ("""{"sku":"WID-001","qty":2,"unitCents":999}"""^^rdf:JSON """{"sku":"GAD-002","qty":1,"unitCents":1500}"""^^rdf:JSON)
#   ?NetCents = 1998
#   ?Order = <urn:example:order:A300>
#   ?OrderId = "A300"
#   ?OrderIndex = 2
#   ?OrderJson = """{"orderId":"A300","shipTo":{"country":"NL"},"customer":{"email":"acct@company.nl","vatId":"NL999999999B01"},"lines":[{"sku":"WID-001","qty":2,"unitCents":999},{"sku":"GAD-002","qty":1,"unitCents":1500}],"declared":{"netCents":3498,"vatCents":0,"grossCents":3498}}"""^^rdf:JSON
#   ?OrderUriStr = "urn:example:order:A300"
#   ?Orders = ("""{"orderId":"A100","shipTo":{"country":"BE"},"customer":{"email":"Ada@Example.ORG","vatId":null},"lines":[{"sku":"wid-001","qty":2,"unitCents":999},{"sku":"GAD-002","qty":1,"unitCents":1500}],"declared":{"netCents":3498,"vatCents":509,"grossCents":4007}}"""^^rdf:JSON """{"orderId":"A200","shipTo":{"country":"US"},"customer":{"email":"bob@example.org","vatId":null},"lines":[{"sku":"WID-001","qty":2,"unitCents":999},{"sku":"GAD-002","qty":1,"unitCents":1500}],"declared":{"netCents":3498,"vatCents":0,"grossCents":3498}}"""^^rdf:JSON """{"orderId":"A300","shipTo":{"country":"NL"},"customer":{"email":"acct@company.nl","vatId":"NL999999999B01"},"lines":[{"sku":"WID-001","qty":2,"unitCents":999},{"sku":"GAD-002","qty":1,"unitCents":1500}],"declared":{"netCents":3498,"vatCents":0,"grossCents":3498}}"""^^rdf:JSON """{"orderId":"A301","shipTo":{"country":"NL"},"customer":{"email":"billing@company.nl","vatId":"NL999999999B01"},"lines":[{"sku":"WID-001","qty":2,"unitCents":999},{"sku":"GAD-002","qty":1,"unitCents":1500}],"declared":{"netCents":3498,"vatCents":0,"grossCents":3498}}"""^^rdf:JSON """{"orderId":"A400","shipTo":{"country":"BE"},"customer":{"email":"ada@other.example","vatId":null},"lines":[{"sku":"WID-001","qty":2,"unitCents":999},{"sku":"GAD-002","qty":1,"unitCents":1500}],"declared":{"netCents":3498,"vatCents":508,"grossCents":4006}}"""^^rdf:JSON)
#   ?Product = ex:Widget
#   ?Qty = 2
#   ?SkuCat = "WID-001"
#   ?SkuJson = "WID-001"
#   ?UnitCents = 999
# Therefore the derived triple above is entailed by the rules and facts.
# ----------------------------------------------------------------------

<urn:example:order:A300#line:0> ex:sku "WID-001" .

# ----------------------------------------------------------------------
# Proof for derived triple:
#   <urn:example:order:A300#line:0> ex:qty 2 .
# It holds because the following instance of the rule body is provable:
#   ex:feed ex:json """{
#     "meta~data": { "batch": "2025-12-18" },
#     "orders": [
#       {
#         "orderId": "A100",
#         "shipTo": { "country": "BE" },
#         "customer": { "email": "Ada@Example.ORG", "vatId": null },
#         "lines": [
#           { "sku": "wid-001", "qty": 2, "unitCents": 999 },
#           { "sku": "GAD-002", "qty": 1, "unitCents": 1500 }
#         ],
#         "declared": { "netCents": 3498, "vatCents": 509, "grossCents": 4007 }
#       },
#       {
#         "orderId": "A200",
#         "shipTo": { "country": "US" },
#         "customer": { "email": "bob@example.org", "vatId": null },
#         "lines": [
#           { "sku": "WID-001", "qty": 2, "unitCents": 999 },
#           { "sku": "GAD-002", "qty": 1, "unitCents": 1500 }
#         ],
#         "declared": { "netCents": 3498, "vatCents": 0, "grossCents": 3498 }
#       },
#       {
#         "orderId": "A300",
#         "shipTo": { "country": "NL" },
#         "customer": { "email": "acct@company.nl", "vatId": "NL999999999B01" },
#         "lines": [
#           { "sku": "WID-001", "qty": 2, "unitCents": 999 },
#           { "sku": "GAD-002", "qty": 1, "unitCents": 1500 }
#         ],
#         "declared": { "netCents": 3498, "vatCents": 0, "grossCents": 3498 }
#       },
#       {
#         "orderId": "A301",
#         "shipTo": { "country": "NL" },
#         "customer": { "email": "billing@company.nl", "vatId": "NL999999999B01" },
#         "lines": [
#           { "sku": "WID-001", "qty": 2, "unitCents": 999 },
#           { "sku": "GAD-002", "qty": 1, "unitCents": 1500 }
#         ],
#         "declared": { "netCents": 3498, "vatCents": 0, "grossCents": 3498 }
#       },
#       {
#         "orderId": "A400",
#         "shipTo": { "country": "BE" },
#         "customer": { "email": "ada@other.example", "vatId": null },
#         "lines": [
#           { "sku": "WID-001", "qty": 2, "unitCents": 999 },
#           { "sku": "GAD-002", "qty": 1, "unitCents": 1500 }
#         ],
#         "declared": { "netCents": 3498, "vatCents": 508, "grossCents": 4006 }
#       }
#     ]
#   }"""^^rdf:JSON .
#   ("""{
#     "meta~data": { "batch": "2025-12-18" },
#     "orders": [
#       {
#         "orderId": "A100",
#         "shipTo": { "country": "BE" },
#         "customer": { "email": "Ada@Example.ORG", "vatId": null },
#         "lines": [
#           { "sku": "wid-001", "qty": 2, "unitCents": 999 },
#           { "sku": "GAD-002", "qty": 1, "unitCents": 1500 }
#         ],
#         "declared": { "netCents": 3498, "vatCents": 509, "grossCents": 4007 }
#       },
#       {
#         "orderId": "A200",
#         "shipTo": { "country": "US" },
#         "customer": { "email": "bob@example.org", "vatId": null },
#         "lines": [
#           { "sku": "WID-001", "qty": 2, "unitCents": 999 },
#           { "sku": "GAD-002", "qty": 1, "unitCents": 1500 }
#         ],
#         "declared": { "netCents": 3498, "vatCents": 0, "grossCents": 3498 }
#       },
#       {
#         "orderId": "A300",
#         "shipTo": { "country": "NL" },
#         "customer": { "email": "acct@company.nl", "vatId": "NL999999999B01" },
#         "lines": [
#           { "sku": "WID-001", "qty": 2, "unitCents": 999 },
#           { "sku": "GAD-002", "qty": 1, "unitCents": 1500 }
#         ],
#         "declared": { "netCents": 3498, "vatCents": 0, "grossCents": 3498 }
#       },
#       {
#         "orderId": "A301",
#         "shipTo": { "country": "NL" },
#         "customer": { "email": "billing@company.nl", "vatId": "NL999999999B01" },
#         "lines": [
#           { "sku": "WID-001", "qty": 2, "unitCents": 999 },
#           { "sku": "GAD-002", "qty": 1, "unitCents": 1500 }
#         ],
#         "declared": { "netCents": 3498, "vatCents": 0, "grossCents": 3498 }
#       },
#       {
#         "orderId": "A400",
#         "shipTo": { "country": "BE" },
#         "customer": { "email": "ada@other.example", "vatId": null },
#         "lines": [
#           { "sku": "WID-001", "qty": 2, "unitCents": 999 },
#           { "sku": "GAD-002", "qty": 1, "unitCents": 1500 }
#         ],
#         "declared": { "netCents": 3498, "vatCents": 508, "grossCents": 4006 }
#       }
#     ]
#   }"""^^rdf:JSON "/orders") string:jsonPointer ("""{"orderId":"A100","shipTo":{"country":"BE"},"customer":{"email":"Ada@Example.ORG","vatId":null},"lines":[{"sku":"wid-001","qty":2,"unitCents":999},{"sku":"GAD-002","qty":1,"unitCents":1500}],"declared":{"netCents":3498,"vatCents":509,"grossCents":4007}}"""^^rdf:JSON """{"orderId":"A200","shipTo":{"country":"US"},"customer":{"email":"bob@example.org","vatId":null},"lines":[{"sku":"WID-001","qty":2,"unitCents":999},{"sku":"GAD-002","qty":1,"unitCents":1500}],"declared":{"netCents":3498,"vatCents":0,"grossCents":3498}}"""^^rdf:JSON """{"orderId":"A300","shipTo":{"country":"NL"},"customer":{"email":"acct@company.nl","vatId":"NL999999999B01"},"lines":[{"sku":"WID-001","qty":2,"unitCents":999},{"sku":"GAD-002","qty":1,"unitCents":1500}],"declared":{"netCents":3498,"vatCents":0,"grossCents":3498}}"""^^rdf:JSON """{"orderId":"A301","shipTo":{"country":"NL"},"customer":{"email":"billing@company.nl","vatId":"NL999999999B01"},"lines":[{"sku":"WID-001","qty":2,"unitCents":999},{"sku":"GAD-002","qty":1,"unitCents":1500}],"declared":{"netCents":3498,"vatCents":0,"grossCents":3498}}"""^^rdf:JSON """{"orderId":"A400","shipTo":{"country":"BE"},"customer":{"email":"ada@other.example","vatId":null},"lines":[{"sku":"WID-001","qty":2,"unitCents":999},{"sku":"GAD-002","qty":1,"unitCents":1500}],"declared":{"netCents":3498,"vatCents":508,"grossCents":4006}}"""^^rdf:JSON) .
#   ("""{"orderId":"A100","shipTo":{"country":"BE"},"customer":{"email":"Ada@Example.ORG","vatId":null},"lines":[{"sku":"wid-001","qty":2,"unitCents":999},{"sku":"GAD-002","qty":1,"unitCents":1500}],"declared":{"netCents":3498,"vatCents":509,"grossCents":4007}}"""^^rdf:JSON """{"orderId":"A200","shipTo":{"country":"US"},"customer":{"email":"bob@example.org","vatId":null},"lines":[{"sku":"WID-001","qty":2,"unitCents":999},{"sku":"GAD-002","qty":1,"unitCents":1500}],"declared":{"netCents":3498,"vatCents":0,"grossCents":3498}}"""^^rdf:JSON """{"orderId":"A300","shipTo":{"country":"NL"},"customer":{"email":"acct@company.nl","vatId":"NL999999999B01"},"lines":[{"sku":"WID-001","qty":2,"unitCents":999},{"sku":"GAD-002","qty":1,"unitCents":1500}],"declared":{"netCents":3498,"vatCents":0,"grossCents":3498}}"""^^rdf:JSON """{"orderId":"A301","shipTo":{"country":"NL"},"customer":{"email":"billing@company.nl","vatId":"NL999999999B01"},"lines":[{"sku":"WID-001","qty":2,"unitCents":999},{"sku":"GAD-002","qty":1,"unitCents":1500}],"declared":{"netCents":3498,"vatCents":0,"grossCents":3498}}"""^^rdf:JSON """{"orderId":"A400","shipTo":{"country":"BE"},"customer":{"email":"ada@other.example","vatId":null},"lines":[{"sku":"WID-001","qty":2,"unitCents":999},{"sku":"GAD-002","qty":1,"unitCents":1500}],"declared":{"netCents":3498,"vatCents":508,"grossCents":4006}}"""^^rdf:JSON) list:iterate (2 """{"orderId":"A300","shipTo":{"country":"NL"},"customer":{"email":"acct@company.nl","vatId":"NL999999999B01"},"lines":[{"sku":"WID-001","qty":2,"unitCents":999},{"sku":"GAD-002","qty":1,"unitCents":1500}],"declared":{"netCents":3498,"vatCents":0,"grossCents":3498}}"""^^rdf:JSON) .
#   ("""{"orderId":"A300","shipTo":{"country":"NL"},"customer":{"email":"acct@company.nl","vatId":"NL999999999B01"},"lines":[{"sku":"WID-001","qty":2,"unitCents":999},{"sku":"GAD-002","qty":1,"unitCents":1500}],"declared":{"netCents":3498,"vatCents":0,"grossCents":3498}}"""^^rdf:JSON "/orderId") string:jsonPointer "A300" .
#   ("urn:example:order:%s" "A300") string:format "urn:example:order:A300" .
#   <urn:example:order:A300> log:uri "urn:example:order:A300" .
#   ("""{"orderId":"A300","shipTo":{"country":"NL"},"customer":{"email":"acct@company.nl","vatId":"NL999999999B01"},"lines":[{"sku":"WID-001","qty":2,"unitCents":999},{"sku":"GAD-002","qty":1,"unitCents":1500}],"declared":{"netCents":3498,"vatCents":0,"grossCents":3498}}"""^^rdf:JSON "/lines") string:jsonPointer ("""{"sku":"WID-001","qty":2,"unitCents":999}"""^^rdf:JSON """{"sku":"GAD-002","qty":1,"unitCents":1500}"""^^rdf:JSON) .
#   ("""{"sku":"WID-001","qty":2,"unitCents":999}"""^^rdf:JSON """{"sku":"GAD-002","qty":1,"unitCents":1500}"""^^rdf:JSON) list:iterate (0 """{"sku":"WID-001","qty":2,"unitCents":999}"""^^rdf:JSON) .
#   ("""{"sku":"WID-001","qty":2,"unitCents":999}"""^^rdf:JSON "/sku") string:jsonPointer "WID-001" .
#   ("""{"sku":"WID-001","qty":2,"unitCents":999}"""^^rdf:JSON "/qty") string:jsonPointer 2 .
#   ("""{"sku":"WID-001","qty":2,"unitCents":999}"""^^rdf:JSON "/unitCents") string:jsonPointer 999 .
#   ex:Widget a ex:Product .
#   ex:Widget ex:sku "WID-001" .
#   (2 999) math:product 1998 .
#   ("urn:example:order:%s#line:%s" "A300" 0) string:format "urn:example:order:A300#line:0" .
#   <urn:example:order:A300#line:0> log:uri "urn:example:order:A300#line:0" .
#   "WID-001" string:equalIgnoringCase "WID-001" .
# via the schematic forward rule:
#   {
#     ex:feed ex:json ?J .
#     (?J "/orders") string:jsonPointer ?Orders .
#     ?Orders list:iterate (?OrderIndex ?OrderJson) .
#     (?OrderJson "/orderId") string:jsonPointer ?OrderId .
#     ("urn:example:order:%s" ?OrderId) string:format ?OrderUriStr .
#     ?Order log:uri ?OrderUriStr .
#     (?OrderJson "/lines") string:jsonPointer ?Lines .
#     ?Lines list:iterate (?LineIndex ?LineJson) .
#     (?LineJson "/sku") string:jsonPointer ?SkuJson .
#     (?LineJson "/qty") string:jsonPointer ?Qty .
#     (?LineJson "/unitCents") string:jsonPointer ?UnitCents .
#     ?Product a ex:Product .
#     ?Product ex:sku ?SkuCat .
#     (?Qty ?UnitCents) math:product ?NetCents .
#     ("urn:example:order:%s#line:%s" ?OrderId ?LineIndex) string:format ?LineUriStr .
#     ?Line log:uri ?LineUriStr .
#     ?SkuJson string:equalIgnoringCase ?SkuCat .
#   } => {
#     ?Order ex:line ?Line .
#     ?Line a ex:OrderLine .
#     ?Line ex:lineIndex ?LineIndex .
#     ?Line ex:product ?Product .
#     ?Line ex:sku ?SkuCat .
#     ?Line ex:qty ?Qty .
#     ?Line ex:unitCents ?UnitCents .
#     ?Line ex:netCents ?NetCents .
#   } .
# with substitution (on rule variables):
#   ?J = """{
#     "meta~data": { "batch": "2025-12-18" },
#     "orders": [
#     {
#     "orderId": "A100",
#     "shipTo": { "country": "BE" },
#     "customer": { "email": "Ada@Example.ORG", "vatId": null },
#     "lines": [
#     { "sku": "wid-001", "qty": 2, "unitCents": 999 },
#     { "sku": "GAD-002", "qty": 1, "unitCents": 1500 }
#     ],
#     "declared": { "netCents": 3498, "vatCents": 509, "grossCents": 4007 }
#     },
#     {
#     "orderId": "A200",
#     "shipTo": { "country": "US" },
#     "customer": { "email": "bob@example.org", "vatId": null },
#     "lines": [
#     { "sku": "WID-001", "qty": 2, "unitCents": 999 },
#     { "sku": "GAD-002", "qty": 1, "unitCents": 1500 }
#     ],
#     "declared": { "netCents": 3498, "vatCents": 0, "grossCents": 3498 }
#     },
#     {
#     "orderId": "A300",
#     "shipTo": { "country": "NL" },
#     "customer": { "email": "acct@company.nl", "vatId": "NL999999999B01" },
#     "lines": [
#     { "sku": "WID-001", "qty": 2, "unitCents": 999 },
#     { "sku": "GAD-002", "qty": 1, "unitCents": 1500 }
#     ],
#     "declared": { "netCents": 3498, "vatCents": 0, "grossCents": 3498 }
#     },
#     {
#     "orderId": "A301",
#     "shipTo": { "country": "NL" },
#     "customer": { "email": "billing@company.nl", "vatId": "NL999999999B01" },
#     "lines": [
#     { "sku": "WID-001", "qty": 2, "unitCents": 999 },
#     { "sku": "GAD-002", "qty": 1, "unitCents": 1500 }
#     ],
#     "declared": { "netCents": 3498, "vatCents": 0, "grossCents": 3498 }
#     },
#     {
#     "orderId": "A400",
#     "shipTo": { "country": "BE" },
#     "customer": { "email": "ada@other.example", "vatId": null },
#     "lines": [
#     { "sku": "WID-001", "qty": 2, "unitCents": 999 },
#     { "sku": "GAD-002", "qty": 1, "unitCents": 1500 }
#     ],
#     "declared": { "netCents": 3498, "vatCents": 508, "grossCents": 4006 }
#     }
#     ]
#   }"""^^rdf:JSON
#   ?Line = <urn:example:order:A300#line:0>
#   ?LineIndex = 0
#   ?LineJson = """{"sku":"WID-001","qty":2,"unitCents":999}"""^^rdf:JSON
#   ?LineUriStr = "urn:example:order:A300#line:0"
#   ?Lines = ("""{"sku":"WID-001","qty":2,"unitCents":999}"""^^rdf:JSON """{"sku":"GAD-002","qty":1,"unitCents":1500}"""^^rdf:JSON)
#   ?NetCents = 1998
#   ?Order = <urn:example:order:A300>
#   ?OrderId = "A300"
#   ?OrderIndex = 2
#   ?OrderJson = """{"orderId":"A300","shipTo":{"country":"NL"},"customer":{"email":"acct@company.nl","vatId":"NL999999999B01"},"lines":[{"sku":"WID-001","qty":2,"unitCents":999},{"sku":"GAD-002","qty":1,"unitCents":1500}],"declared":{"netCents":3498,"vatCents":0,"grossCents":3498}}"""^^rdf:JSON
#   ?OrderUriStr = "urn:example:order:A300"
#   ?Orders = ("""{"orderId":"A100","shipTo":{"country":"BE"},"customer":{"email":"Ada@Example.ORG","vatId":null},"lines":[{"sku":"wid-001","qty":2,"unitCents":999},{"sku":"GAD-002","qty":1,"unitCents":1500}],"declared":{"netCents":3498,"vatCents":509,"grossCents":4007}}"""^^rdf:JSON """{"orderId":"A200","shipTo":{"country":"US"},"customer":{"email":"bob@example.org","vatId":null},"lines":[{"sku":"WID-001","qty":2,"unitCents":999},{"sku":"GAD-002","qty":1,"unitCents":1500}],"declared":{"netCents":3498,"vatCents":0,"grossCents":3498}}"""^^rdf:JSON """{"orderId":"A300","shipTo":{"country":"NL"},"customer":{"email":"acct@company.nl","vatId":"NL999999999B01"},"lines":[{"sku":"WID-001","qty":2,"unitCents":999},{"sku":"GAD-002","qty":1,"unitCents":1500}],"declared":{"netCents":3498,"vatCents":0,"grossCents":3498}}"""^^rdf:JSON """{"orderId":"A301","shipTo":{"country":"NL"},"customer":{"email":"billing@company.nl","vatId":"NL999999999B01"},"lines":[{"sku":"WID-001","qty":2,"unitCents":999},{"sku":"GAD-002","qty":1,"unitCents":1500}],"declared":{"netCents":3498,"vatCents":0,"grossCents":3498}}"""^^rdf:JSON """{"orderId":"A400","shipTo":{"country":"BE"},"customer":{"email":"ada@other.example","vatId":null},"lines":[{"sku":"WID-001","qty":2,"unitCents":999},{"sku":"GAD-002","qty":1,"unitCents":1500}],"declared":{"netCents":3498,"vatCents":508,"grossCents":4006}}"""^^rdf:JSON)
#   ?Product = ex:Widget
#   ?Qty = 2
#   ?SkuCat = "WID-001"
#   ?SkuJson = "WID-001"
#   ?UnitCents = 999
# Therefore the derived triple above is entailed by the rules and facts.
# ----------------------------------------------------------------------

<urn:example:order:A300#line:0> ex:qty 2 .

# ----------------------------------------------------------------------
# Proof for derived triple:
#   <urn:example:order:A300#line:0> ex:unitCents 999 .
# It holds because the following instance of the rule body is provable:
#   ex:feed ex:json """{
#     "meta~data": { "batch": "2025-12-18" },
#     "orders": [
#       {
#         "orderId": "A100",
#         "shipTo": { "country": "BE" },
#         "customer": { "email": "Ada@Example.ORG", "vatId": null },
#         "lines": [
#           { "sku": "wid-001", "qty": 2, "unitCents": 999 },
#           { "sku": "GAD-002", "qty": 1, "unitCents": 1500 }
#         ],
#         "declared": { "netCents": 3498, "vatCents": 509, "grossCents": 4007 }
#       },
#       {
#         "orderId": "A200",
#         "shipTo": { "country": "US" },
#         "customer": { "email": "bob@example.org", "vatId": null },
#         "lines": [
#           { "sku": "WID-001", "qty": 2, "unitCents": 999 },
#           { "sku": "GAD-002", "qty": 1, "unitCents": 1500 }
#         ],
#         "declared": { "netCents": 3498, "vatCents": 0, "grossCents": 3498 }
#       },
#       {
#         "orderId": "A300",
#         "shipTo": { "country": "NL" },
#         "customer": { "email": "acct@company.nl", "vatId": "NL999999999B01" },
#         "lines": [
#           { "sku": "WID-001", "qty": 2, "unitCents": 999 },
#           { "sku": "GAD-002", "qty": 1, "unitCents": 1500 }
#         ],
#         "declared": { "netCents": 3498, "vatCents": 0, "grossCents": 3498 }
#       },
#       {
#         "orderId": "A301",
#         "shipTo": { "country": "NL" },
#         "customer": { "email": "billing@company.nl", "vatId": "NL999999999B01" },
#         "lines": [
#           { "sku": "WID-001", "qty": 2, "unitCents": 999 },
#           { "sku": "GAD-002", "qty": 1, "unitCents": 1500 }
#         ],
#         "declared": { "netCents": 3498, "vatCents": 0, "grossCents": 3498 }
#       },
#       {
#         "orderId": "A400",
#         "shipTo": { "country": "BE" },
#         "customer": { "email": "ada@other.example", "vatId": null },
#         "lines": [
#           { "sku": "WID-001", "qty": 2, "unitCents": 999 },
#           { "sku": "GAD-002", "qty": 1, "unitCents": 1500 }
#         ],
#         "declared": { "netCents": 3498, "vatCents": 508, "grossCents": 4006 }
#       }
#     ]
#   }"""^^rdf:JSON .
#   ("""{
#     "meta~data": { "batch": "2025-12-18" },
#     "orders": [
#       {
#         "orderId": "A100",
#         "shipTo": { "country": "BE" },
#         "customer": { "email": "Ada@Example.ORG", "vatId": null },
#         "lines": [
#           { "sku": "wid-001", "qty": 2, "unitCents": 999 },
#           { "sku": "GAD-002", "qty": 1, "unitCents": 1500 }
#         ],
#         "declared": { "netCents": 3498, "vatCents": 509, "grossCents": 4007 }
#       },
#       {
#         "orderId": "A200",
#         "shipTo": { "country": "US" },
#         "customer": { "email": "bob@example.org", "vatId": null },
#         "lines": [
#           { "sku": "WID-001", "qty": 2, "unitCents": 999 },
#           { "sku": "GAD-002", "qty": 1, "unitCents": 1500 }
#         ],
#         "declared": { "netCents": 3498, "vatCents": 0, "grossCents": 3498 }
#       },
#       {
#         "orderId": "A300",
#         "shipTo": { "country": "NL" },
#         "customer": { "email": "acct@company.nl", "vatId": "NL999999999B01" },
#         "lines": [
#           { "sku": "WID-001", "qty": 2, "unitCents": 999 },
#           { "sku": "GAD-002", "qty": 1, "unitCents": 1500 }
#         ],
#         "declared": { "netCents": 3498, "vatCents": 0, "grossCents": 3498 }
#       },
#       {
#         "orderId": "A301",
#         "shipTo": { "country": "NL" },
#         "customer": { "email": "billing@company.nl", "vatId": "NL999999999B01" },
#         "lines": [
#           { "sku": "WID-001", "qty": 2, "unitCents": 999 },
#           { "sku": "GAD-002", "qty": 1, "unitCents": 1500 }
#         ],
#         "declared": { "netCents": 3498, "vatCents": 0, "grossCents": 3498 }
#       },
#       {
#         "orderId": "A400",
#         "shipTo": { "country": "BE" },
#         "customer": { "email": "ada@other.example", "vatId": null },
#         "lines": [
#           { "sku": "WID-001", "qty": 2, "unitCents": 999 },
#           { "sku": "GAD-002", "qty": 1, "unitCents": 1500 }
#         ],
#         "declared": { "netCents": 3498, "vatCents": 508, "grossCents": 4006 }
#       }
#     ]
#   }"""^^rdf:JSON "/orders") string:jsonPointer ("""{"orderId":"A100","shipTo":{"country":"BE"},"customer":{"email":"Ada@Example.ORG","vatId":null},"lines":[{"sku":"wid-001","qty":2,"unitCents":999},{"sku":"GAD-002","qty":1,"unitCents":1500}],"declared":{"netCents":3498,"vatCents":509,"grossCents":4007}}"""^^rdf:JSON """{"orderId":"A200","shipTo":{"country":"US"},"customer":{"email":"bob@example.org","vatId":null},"lines":[{"sku":"WID-001","qty":2,"unitCents":999},{"sku":"GAD-002","qty":1,"unitCents":1500}],"declared":{"netCents":3498,"vatCents":0,"grossCents":3498}}"""^^rdf:JSON """{"orderId":"A300","shipTo":{"country":"NL"},"customer":{"email":"acct@company.nl","vatId":"NL999999999B01"},"lines":[{"sku":"WID-001","qty":2,"unitCents":999},{"sku":"GAD-002","qty":1,"unitCents":1500}],"declared":{"netCents":3498,"vatCents":0,"grossCents":3498}}"""^^rdf:JSON """{"orderId":"A301","shipTo":{"country":"NL"},"customer":{"email":"billing@company.nl","vatId":"NL999999999B01"},"lines":[{"sku":"WID-001","qty":2,"unitCents":999},{"sku":"GAD-002","qty":1,"unitCents":1500}],"declared":{"netCents":3498,"vatCents":0,"grossCents":3498}}"""^^rdf:JSON """{"orderId":"A400","shipTo":{"country":"BE"},"customer":{"email":"ada@other.example","vatId":null},"lines":[{"sku":"WID-001","qty":2,"unitCents":999},{"sku":"GAD-002","qty":1,"unitCents":1500}],"declared":{"netCents":3498,"vatCents":508,"grossCents":4006}}"""^^rdf:JSON) .
#   ("""{"orderId":"A100","shipTo":{"country":"BE"},"customer":{"email":"Ada@Example.ORG","vatId":null},"lines":[{"sku":"wid-001","qty":2,"unitCents":999},{"sku":"GAD-002","qty":1,"unitCents":1500}],"declared":{"netCents":3498,"vatCents":509,"grossCents":4007}}"""^^rdf:JSON """{"orderId":"A200","shipTo":{"country":"US"},"customer":{"email":"bob@example.org","vatId":null},"lines":[{"sku":"WID-001","qty":2,"unitCents":999},{"sku":"GAD-002","qty":1,"unitCents":1500}],"declared":{"netCents":3498,"vatCents":0,"grossCents":3498}}"""^^rdf:JSON """{"orderId":"A300","shipTo":{"country":"NL"},"customer":{"email":"acct@company.nl","vatId":"NL999999999B01"},"lines":[{"sku":"WID-001","qty":2,"unitCents":999},{"sku":"GAD-002","qty":1,"unitCents":1500}],"declared":{"netCents":3498,"vatCents":0,"grossCents":3498}}"""^^rdf:JSON """{"orderId":"A301","shipTo":{"country":"NL"},"customer":{"email":"billing@company.nl","vatId":"NL999999999B01"},"lines":[{"sku":"WID-001","qty":2,"unitCents":999},{"sku":"GAD-002","qty":1,"unitCents":1500}],"declared":{"netCents":3498,"vatCents":0,"grossCents":3498}}"""^^rdf:JSON """{"orderId":"A400","shipTo":{"country":"BE"},"customer":{"email":"ada@other.example","vatId":null},"lines":[{"sku":"WID-001","qty":2,"unitCents":999},{"sku":"GAD-002","qty":1,"unitCents":1500}],"declared":{"netCents":3498,"vatCents":508,"grossCents":4006}}"""^^rdf:JSON) list:iterate (2 """{"orderId":"A300","shipTo":{"country":"NL"},"customer":{"email":"acct@company.nl","vatId":"NL999999999B01"},"lines":[{"sku":"WID-001","qty":2,"unitCents":999},{"sku":"GAD-002","qty":1,"unitCents":1500}],"declared":{"netCents":3498,"vatCents":0,"grossCents":3498}}"""^^rdf:JSON) .
#   ("""{"orderId":"A300","shipTo":{"country":"NL"},"customer":{"email":"acct@company.nl","vatId":"NL999999999B01"},"lines":[{"sku":"WID-001","qty":2,"unitCents":999},{"sku":"GAD-002","qty":1,"unitCents":1500}],"declared":{"netCents":3498,"vatCents":0,"grossCents":3498}}"""^^rdf:JSON "/orderId") string:jsonPointer "A300" .
#   ("urn:example:order:%s" "A300") string:format "urn:example:order:A300" .
#   <urn:example:order:A300> log:uri "urn:example:order:A300" .
#   ("""{"orderId":"A300","shipTo":{"country":"NL"},"customer":{"email":"acct@company.nl","vatId":"NL999999999B01"},"lines":[{"sku":"WID-001","qty":2,"unitCents":999},{"sku":"GAD-002","qty":1,"unitCents":1500}],"declared":{"netCents":3498,"vatCents":0,"grossCents":3498}}"""^^rdf:JSON "/lines") string:jsonPointer ("""{"sku":"WID-001","qty":2,"unitCents":999}"""^^rdf:JSON """{"sku":"GAD-002","qty":1,"unitCents":1500}"""^^rdf:JSON) .
#   ("""{"sku":"WID-001","qty":2,"unitCents":999}"""^^rdf:JSON """{"sku":"GAD-002","qty":1,"unitCents":1500}"""^^rdf:JSON) list:iterate (0 """{"sku":"WID-001","qty":2,"unitCents":999}"""^^rdf:JSON) .
#   ("""{"sku":"WID-001","qty":2,"unitCents":999}"""^^rdf:JSON "/sku") string:jsonPointer "WID-001" .
#   ("""{"sku":"WID-001","qty":2,"unitCents":999}"""^^rdf:JSON "/qty") string:jsonPointer 2 .
#   ("""{"sku":"WID-001","qty":2,"unitCents":999}"""^^rdf:JSON "/unitCents") string:jsonPointer 999 .
#   ex:Widget a ex:Product .
#   ex:Widget ex:sku "WID-001" .
#   (2 999) math:product 1998 .
#   ("urn:example:order:%s#line:%s" "A300" 0) string:format "urn:example:order:A300#line:0" .
#   <urn:example:order:A300#line:0> log:uri "urn:example:order:A300#line:0" .
#   "WID-001" string:equalIgnoringCase "WID-001" .
# via the schematic forward rule:
#   {
#     ex:feed ex:json ?J .
#     (?J "/orders") string:jsonPointer ?Orders .
#     ?Orders list:iterate (?OrderIndex ?OrderJson) .
#     (?OrderJson "/orderId") string:jsonPointer ?OrderId .
#     ("urn:example:order:%s" ?OrderId) string:format ?OrderUriStr .
#     ?Order log:uri ?OrderUriStr .
#     (?OrderJson "/lines") string:jsonPointer ?Lines .
#     ?Lines list:iterate (?LineIndex ?LineJson) .
#     (?LineJson "/sku") string:jsonPointer ?SkuJson .
#     (?LineJson "/qty") string:jsonPointer ?Qty .
#     (?LineJson "/unitCents") string:jsonPointer ?UnitCents .
#     ?Product a ex:Product .
#     ?Product ex:sku ?SkuCat .
#     (?Qty ?UnitCents) math:product ?NetCents .
#     ("urn:example:order:%s#line:%s" ?OrderId ?LineIndex) string:format ?LineUriStr .
#     ?Line log:uri ?LineUriStr .
#     ?SkuJson string:equalIgnoringCase ?SkuCat .
#   } => {
#     ?Order ex:line ?Line .
#     ?Line a ex:OrderLine .
#     ?Line ex:lineIndex ?LineIndex .
#     ?Line ex:product ?Product .
#     ?Line ex:sku ?SkuCat .
#     ?Line ex:qty ?Qty .
#     ?Line ex:unitCents ?UnitCents .
#     ?Line ex:netCents ?NetCents .
#   } .
# with substitution (on rule variables):
#   ?J = """{
#     "meta~data": { "batch": "2025-12-18" },
#     "orders": [
#     {
#     "orderId": "A100",
#     "shipTo": { "country": "BE" },
#     "customer": { "email": "Ada@Example.ORG", "vatId": null },
#     "lines": [
#     { "sku": "wid-001", "qty": 2, "unitCents": 999 },
#     { "sku": "GAD-002", "qty": 1, "unitCents": 1500 }
#     ],
#     "declared": { "netCents": 3498, "vatCents": 509, "grossCents": 4007 }
#     },
#     {
#     "orderId": "A200",
#     "shipTo": { "country": "US" },
#     "customer": { "email": "bob@example.org", "vatId": null },
#     "lines": [
#     { "sku": "WID-001", "qty": 2, "unitCents": 999 },
#     { "sku": "GAD-002", "qty": 1, "unitCents": 1500 }
#     ],
#     "declared": { "netCents": 3498, "vatCents": 0, "grossCents": 3498 }
#     },
#     {
#     "orderId": "A300",
#     "shipTo": { "country": "NL" },
#     "customer": { "email": "acct@company.nl", "vatId": "NL999999999B01" },
#     "lines": [
#     { "sku": "WID-001", "qty": 2, "unitCents": 999 },
#     { "sku": "GAD-002", "qty": 1, "unitCents": 1500 }
#     ],
#     "declared": { "netCents": 3498, "vatCents": 0, "grossCents": 3498 }
#     },
#     {
#     "orderId": "A301",
#     "shipTo": { "country": "NL" },
#     "customer": { "email": "billing@company.nl", "vatId": "NL999999999B01" },
#     "lines": [
#     { "sku": "WID-001", "qty": 2, "unitCents": 999 },
#     { "sku": "GAD-002", "qty": 1, "unitCents": 1500 }
#     ],
#     "declared": { "netCents": 3498, "vatCents": 0, "grossCents": 3498 }
#     },
#     {
#     "orderId": "A400",
#     "shipTo": { "country": "BE" },
#     "customer": { "email": "ada@other.example", "vatId": null },
#     "lines": [
#     { "sku": "WID-001", "qty": 2, "unitCents": 999 },
#     { "sku": "GAD-002", "qty": 1, "unitCents": 1500 }
#     ],
#     "declared": { "netCents": 3498, "vatCents": 508, "grossCents": 4006 }
#     }
#     ]
#   }"""^^rdf:JSON
#   ?Line = <urn:example:order:A300#line:0>
#   ?LineIndex = 0
#   ?LineJson = """{"sku":"WID-001","qty":2,"unitCents":999}"""^^rdf:JSON
#   ?LineUriStr = "urn:example:order:A300#line:0"
#   ?Lines = ("""{"sku":"WID-001","qty":2,"unitCents":999}"""^^rdf:JSON """{"sku":"GAD-002","qty":1,"unitCents":1500}"""^^rdf:JSON)
#   ?NetCents = 1998
#   ?Order = <urn:example:order:A300>
#   ?OrderId = "A300"
#   ?OrderIndex = 2
#   ?OrderJson = """{"orderId":"A300","shipTo":{"country":"NL"},"customer":{"email":"acct@company.nl","vatId":"NL999999999B01"},"lines":[{"sku":"WID-001","qty":2,"unitCents":999},{"sku":"GAD-002","qty":1,"unitCents":1500}],"declared":{"netCents":3498,"vatCents":0,"grossCents":3498}}"""^^rdf:JSON
#   ?OrderUriStr = "urn:example:order:A300"
#   ?Orders = ("""{"orderId":"A100","shipTo":{"country":"BE"},"customer":{"email":"Ada@Example.ORG","vatId":null},"lines":[{"sku":"wid-001","qty":2,"unitCents":999},{"sku":"GAD-002","qty":1,"unitCents":1500}],"declared":{"netCents":3498,"vatCents":509,"grossCents":4007}}"""^^rdf:JSON """{"orderId":"A200","shipTo":{"country":"US"},"customer":{"email":"bob@example.org","vatId":null},"lines":[{"sku":"WID-001","qty":2,"unitCents":999},{"sku":"GAD-002","qty":1,"unitCents":1500}],"declared":{"netCents":3498,"vatCents":0,"grossCents":3498}}"""^^rdf:JSON """{"orderId":"A300","shipTo":{"country":"NL"},"customer":{"email":"acct@company.nl","vatId":"NL999999999B01"},"lines":[{"sku":"WID-001","qty":2,"unitCents":999},{"sku":"GAD-002","qty":1,"unitCents":1500}],"declared":{"netCents":3498,"vatCents":0,"grossCents":3498}}"""^^rdf:JSON """{"orderId":"A301","shipTo":{"country":"NL"},"customer":{"email":"billing@company.nl","vatId":"NL999999999B01"},"lines":[{"sku":"WID-001","qty":2,"unitCents":999},{"sku":"GAD-002","qty":1,"unitCents":1500}],"declared":{"netCents":3498,"vatCents":0,"grossCents":3498}}"""^^rdf:JSON """{"orderId":"A400","shipTo":{"country":"BE"},"customer":{"email":"ada@other.example","vatId":null},"lines":[{"sku":"WID-001","qty":2,"unitCents":999},{"sku":"GAD-002","qty":1,"unitCents":1500}],"declared":{"netCents":3498,"vatCents":508,"grossCents":4006}}"""^^rdf:JSON)
#   ?Product = ex:Widget
#   ?Qty = 2
#   ?SkuCat = "WID-001"
#   ?SkuJson = "WID-001"
#   ?UnitCents = 999
# Therefore the derived triple above is entailed by the rules and facts.
# ----------------------------------------------------------------------

<urn:example:order:A300#line:0> ex:unitCents 999 .

# ----------------------------------------------------------------------
# Proof for derived triple:
#   <urn:example:order:A300#line:0> ex:netCents 1998 .
# It holds because the following instance of the rule body is provable:
#   ex:feed ex:json """{
#     "meta~data": { "batch": "2025-12-18" },
#     "orders": [
#       {
#         "orderId": "A100",
#         "shipTo": { "country": "BE" },
#         "customer": { "email": "Ada@Example.ORG", "vatId": null },
#         "lines": [
#           { "sku": "wid-001", "qty": 2, "unitCents": 999 },
#           { "sku": "GAD-002", "qty": 1, "unitCents": 1500 }
#         ],
#         "declared": { "netCents": 3498, "vatCents": 509, "grossCents": 4007 }
#       },
#       {
#         "orderId": "A200",
#         "shipTo": { "country": "US" },
#         "customer": { "email": "bob@example.org", "vatId": null },
#         "lines": [
#           { "sku": "WID-001", "qty": 2, "unitCents": 999 },
#           { "sku": "GAD-002", "qty": 1, "unitCents": 1500 }
#         ],
#         "declared": { "netCents": 3498, "vatCents": 0, "grossCents": 3498 }
#       },
#       {
#         "orderId": "A300",
#         "shipTo": { "country": "NL" },
#         "customer": { "email": "acct@company.nl", "vatId": "NL999999999B01" },
#         "lines": [
#           { "sku": "WID-001", "qty": 2, "unitCents": 999 },
#           { "sku": "GAD-002", "qty": 1, "unitCents": 1500 }
#         ],
#         "declared": { "netCents": 3498, "vatCents": 0, "grossCents": 3498 }
#       },
#       {
#         "orderId": "A301",
#         "shipTo": { "country": "NL" },
#         "customer": { "email": "billing@company.nl", "vatId": "NL999999999B01" },
#         "lines": [
#           { "sku": "WID-001", "qty": 2, "unitCents": 999 },
#           { "sku": "GAD-002", "qty": 1, "unitCents": 1500 }
#         ],
#         "declared": { "netCents": 3498, "vatCents": 0, "grossCents": 3498 }
#       },
#       {
#         "orderId": "A400",
#         "shipTo": { "country": "BE" },
#         "customer": { "email": "ada@other.example", "vatId": null },
#         "lines": [
#           { "sku": "WID-001", "qty": 2, "unitCents": 999 },
#           { "sku": "GAD-002", "qty": 1, "unitCents": 1500 }
#         ],
#         "declared": { "netCents": 3498, "vatCents": 508, "grossCents": 4006 }
#       }
#     ]
#   }"""^^rdf:JSON .
#   ("""{
#     "meta~data": { "batch": "2025-12-18" },
#     "orders": [
#       {
#         "orderId": "A100",
#         "shipTo": { "country": "BE" },
#         "customer": { "email": "Ada@Example.ORG", "vatId": null },
#         "lines": [
#           { "sku": "wid-001", "qty": 2, "unitCents": 999 },
#           { "sku": "GAD-002", "qty": 1, "unitCents": 1500 }
#         ],
#         "declared": { "netCents": 3498, "vatCents": 509, "grossCents": 4007 }
#       },
#       {
#         "orderId": "A200",
#         "shipTo": { "country": "US" },
#         "customer": { "email": "bob@example.org", "vatId": null },
#         "lines": [
#           { "sku": "WID-001", "qty": 2, "unitCents": 999 },
#           { "sku": "GAD-002", "qty": 1, "unitCents": 1500 }
#         ],
#         "declared": { "netCents": 3498, "vatCents": 0, "grossCents": 3498 }
#       },
#       {
#         "orderId": "A300",
#         "shipTo": { "country": "NL" },
#         "customer": { "email": "acct@company.nl", "vatId": "NL999999999B01" },
#         "lines": [
#           { "sku": "WID-001", "qty": 2, "unitCents": 999 },
#           { "sku": "GAD-002", "qty": 1, "unitCents": 1500 }
#         ],
#         "declared": { "netCents": 3498, "vatCents": 0, "grossCents": 3498 }
#       },
#       {
#         "orderId": "A301",
#         "shipTo": { "country": "NL" },
#         "customer": { "email": "billing@company.nl", "vatId": "NL999999999B01" },
#         "lines": [
#           { "sku": "WID-001", "qty": 2, "unitCents": 999 },
#           { "sku": "GAD-002", "qty": 1, "unitCents": 1500 }
#         ],
#         "declared": { "netCents": 3498, "vatCents": 0, "grossCents": 3498 }
#       },
#       {
#         "orderId": "A400",
#         "shipTo": { "country": "BE" },
#         "customer": { "email": "ada@other.example", "vatId": null },
#         "lines": [
#           { "sku": "WID-001", "qty": 2, "unitCents": 999 },
#           { "sku": "GAD-002", "qty": 1, "unitCents": 1500 }
#         ],
#         "declared": { "netCents": 3498, "vatCents": 508, "grossCents": 4006 }
#       }
#     ]
#   }"""^^rdf:JSON "/orders") string:jsonPointer ("""{"orderId":"A100","shipTo":{"country":"BE"},"customer":{"email":"Ada@Example.ORG","vatId":null},"lines":[{"sku":"wid-001","qty":2,"unitCents":999},{"sku":"GAD-002","qty":1,"unitCents":1500}],"declared":{"netCents":3498,"vatCents":509,"grossCents":4007}}"""^^rdf:JSON """{"orderId":"A200","shipTo":{"country":"US"},"customer":{"email":"bob@example.org","vatId":null},"lines":[{"sku":"WID-001","qty":2,"unitCents":999},{"sku":"GAD-002","qty":1,"unitCents":1500}],"declared":{"netCents":3498,"vatCents":0,"grossCents":3498}}"""^^rdf:JSON """{"orderId":"A300","shipTo":{"country":"NL"},"customer":{"email":"acct@company.nl","vatId":"NL999999999B01"},"lines":[{"sku":"WID-001","qty":2,"unitCents":999},{"sku":"GAD-002","qty":1,"unitCents":1500}],"declared":{"netCents":3498,"vatCents":0,"grossCents":3498}}"""^^rdf:JSON """{"orderId":"A301","shipTo":{"country":"NL"},"customer":{"email":"billing@company.nl","vatId":"NL999999999B01"},"lines":[{"sku":"WID-001","qty":2,"unitCents":999},{"sku":"GAD-002","qty":1,"unitCents":1500}],"declared":{"netCents":3498,"vatCents":0,"grossCents":3498}}"""^^rdf:JSON """{"orderId":"A400","shipTo":{"country":"BE"},"customer":{"email":"ada@other.example","vatId":null},"lines":[{"sku":"WID-001","qty":2,"unitCents":999},{"sku":"GAD-002","qty":1,"unitCents":1500}],"declared":{"netCents":3498,"vatCents":508,"grossCents":4006}}"""^^rdf:JSON) .
#   ("""{"orderId":"A100","shipTo":{"country":"BE"},"customer":{"email":"Ada@Example.ORG","vatId":null},"lines":[{"sku":"wid-001","qty":2,"unitCents":999},{"sku":"GAD-002","qty":1,"unitCents":1500}],"declared":{"netCents":3498,"vatCents":509,"grossCents":4007}}"""^^rdf:JSON """{"orderId":"A200","shipTo":{"country":"US"},"customer":{"email":"bob@example.org","vatId":null},"lines":[{"sku":"WID-001","qty":2,"unitCents":999},{"sku":"GAD-002","qty":1,"unitCents":1500}],"declared":{"netCents":3498,"vatCents":0,"grossCents":3498}}"""^^rdf:JSON """{"orderId":"A300","shipTo":{"country":"NL"},"customer":{"email":"acct@company.nl","vatId":"NL999999999B01"},"lines":[{"sku":"WID-001","qty":2,"unitCents":999},{"sku":"GAD-002","qty":1,"unitCents":1500}],"declared":{"netCents":3498,"vatCents":0,"grossCents":3498}}"""^^rdf:JSON """{"orderId":"A301","shipTo":{"country":"NL"},"customer":{"email":"billing@company.nl","vatId":"NL999999999B01"},"lines":[{"sku":"WID-001","qty":2,"unitCents":999},{"sku":"GAD-002","qty":1,"unitCents":1500}],"declared":{"netCents":3498,"vatCents":0,"grossCents":3498}}"""^^rdf:JSON """{"orderId":"A400","shipTo":{"country":"BE"},"customer":{"email":"ada@other.example","vatId":null},"lines":[{"sku":"WID-001","qty":2,"unitCents":999},{"sku":"GAD-002","qty":1,"unitCents":1500}],"declared":{"netCents":3498,"vatCents":508,"grossCents":4006}}"""^^rdf:JSON) list:iterate (2 """{"orderId":"A300","shipTo":{"country":"NL"},"customer":{"email":"acct@company.nl","vatId":"NL999999999B01"},"lines":[{"sku":"WID-001","qty":2,"unitCents":999},{"sku":"GAD-002","qty":1,"unitCents":1500}],"declared":{"netCents":3498,"vatCents":0,"grossCents":3498}}"""^^rdf:JSON) .
#   ("""{"orderId":"A300","shipTo":{"country":"NL"},"customer":{"email":"acct@company.nl","vatId":"NL999999999B01"},"lines":[{"sku":"WID-001","qty":2,"unitCents":999},{"sku":"GAD-002","qty":1,"unitCents":1500}],"declared":{"netCents":3498,"vatCents":0,"grossCents":3498}}"""^^rdf:JSON "/orderId") string:jsonPointer "A300" .
#   ("urn:example:order:%s" "A300") string:format "urn:example:order:A300" .
#   <urn:example:order:A300> log:uri "urn:example:order:A300" .
#   ("""{"orderId":"A300","shipTo":{"country":"NL"},"customer":{"email":"acct@company.nl","vatId":"NL999999999B01"},"lines":[{"sku":"WID-001","qty":2,"unitCents":999},{"sku":"GAD-002","qty":1,"unitCents":1500}],"declared":{"netCents":3498,"vatCents":0,"grossCents":3498}}"""^^rdf:JSON "/lines") string:jsonPointer ("""{"sku":"WID-001","qty":2,"unitCents":999}"""^^rdf:JSON """{"sku":"GAD-002","qty":1,"unitCents":1500}"""^^rdf:JSON) .
#   ("""{"sku":"WID-001","qty":2,"unitCents":999}"""^^rdf:JSON """{"sku":"GAD-002","qty":1,"unitCents":1500}"""^^rdf:JSON) list:iterate (0 """{"sku":"WID-001","qty":2,"unitCents":999}"""^^rdf:JSON) .
#   ("""{"sku":"WID-001","qty":2,"unitCents":999}"""^^rdf:JSON "/sku") string:jsonPointer "WID-001" .
#   ("""{"sku":"WID-001","qty":2,"unitCents":999}"""^^rdf:JSON "/qty") string:jsonPointer 2 .
#   ("""{"sku":"WID-001","qty":2,"unitCents":999}"""^^rdf:JSON "/unitCents") string:jsonPointer 999 .
#   ex:Widget a ex:Product .
#   ex:Widget ex:sku "WID-001" .
#   (2 999) math:product 1998 .
#   ("urn:example:order:%s#line:%s" "A300" 0) string:format "urn:example:order:A300#line:0" .
#   <urn:example:order:A300#line:0> log:uri "urn:example:order:A300#line:0" .
#   "WID-001" string:equalIgnoringCase "WID-001" .
# via the schematic forward rule:
#   {
#     ex:feed ex:json ?J .
#     (?J "/orders") string:jsonPointer ?Orders .
#     ?Orders list:iterate (?OrderIndex ?OrderJson) .
#     (?OrderJson "/orderId") string:jsonPointer ?OrderId .
#     ("urn:example:order:%s" ?OrderId) string:format ?OrderUriStr .
#     ?Order log:uri ?OrderUriStr .
#     (?OrderJson "/lines") string:jsonPointer ?Lines .
#     ?Lines list:iterate (?LineIndex ?LineJson) .
#     (?LineJson "/sku") string:jsonPointer ?SkuJson .
#     (?LineJson "/qty") string:jsonPointer ?Qty .
#     (?LineJson "/unitCents") string:jsonPointer ?UnitCents .
#     ?Product a ex:Product .
#     ?Product ex:sku ?SkuCat .
#     (?Qty ?UnitCents) math:product ?NetCents .
#     ("urn:example:order:%s#line:%s" ?OrderId ?LineIndex) string:format ?LineUriStr .
#     ?Line log:uri ?LineUriStr .
#     ?SkuJson string:equalIgnoringCase ?SkuCat .
#   } => {
#     ?Order ex:line ?Line .
#     ?Line a ex:OrderLine .
#     ?Line ex:lineIndex ?LineIndex .
#     ?Line ex:product ?Product .
#     ?Line ex:sku ?SkuCat .
#     ?Line ex:qty ?Qty .
#     ?Line ex:unitCents ?UnitCents .
#     ?Line ex:netCents ?NetCents .
#   } .
# with substitution (on rule variables):
#   ?J = """{
#     "meta~data": { "batch": "2025-12-18" },
#     "orders": [
#     {
#     "orderId": "A100",
#     "shipTo": { "country": "BE" },
#     "customer": { "email": "Ada@Example.ORG", "vatId": null },
#     "lines": [
#     { "sku": "wid-001", "qty": 2, "unitCents": 999 },
#     { "sku": "GAD-002", "qty": 1, "unitCents": 1500 }
#     ],
#     "declared": { "netCents": 3498, "vatCents": 509, "grossCents": 4007 }
#     },
#     {
#     "orderId": "A200",
#     "shipTo": { "country": "US" },
#     "customer": { "email": "bob@example.org", "vatId": null },
#     "lines": [
#     { "sku": "WID-001", "qty": 2, "unitCents": 999 },
#     { "sku": "GAD-002", "qty": 1, "unitCents": 1500 }
#     ],
#     "declared": { "netCents": 3498, "vatCents": 0, "grossCents": 3498 }
#     },
#     {
#     "orderId": "A300",
#     "shipTo": { "country": "NL" },
#     "customer": { "email": "acct@company.nl", "vatId": "NL999999999B01" },
#     "lines": [
#     { "sku": "WID-001", "qty": 2, "unitCents": 999 },
#     { "sku": "GAD-002", "qty": 1, "unitCents": 1500 }
#     ],
#     "declared": { "netCents": 3498, "vatCents": 0, "grossCents": 3498 }
#     },
#     {
#     "orderId": "A301",
#     "shipTo": { "country": "NL" },
#     "customer": { "email": "billing@company.nl", "vatId": "NL999999999B01" },
#     "lines": [
#     { "sku": "WID-001", "qty": 2, "unitCents": 999 },
#     { "sku": "GAD-002", "qty": 1, "unitCents": 1500 }
#     ],
#     "declared": { "netCents": 3498, "vatCents": 0, "grossCents": 3498 }
#     },
#     {
#     "orderId": "A400",
#     "shipTo": { "country": "BE" },
#     "customer": { "email": "ada@other.example", "vatId": null },
#     "lines": [
#     { "sku": "WID-001", "qty": 2, "unitCents": 999 },
#     { "sku": "GAD-002", "qty": 1, "unitCents": 1500 }
#     ],
#     "declared": { "netCents": 3498, "vatCents": 508, "grossCents": 4006 }
#     }
#     ]
#   }"""^^rdf:JSON
#   ?Line = <urn:example:order:A300#line:0>
#   ?LineIndex = 0
#   ?LineJson = """{"sku":"WID-001","qty":2,"unitCents":999}"""^^rdf:JSON
#   ?LineUriStr = "urn:example:order:A300#line:0"
#   ?Lines = ("""{"sku":"WID-001","qty":2,"unitCents":999}"""^^rdf:JSON """{"sku":"GAD-002","qty":1,"unitCents":1500}"""^^rdf:JSON)
#   ?NetCents = 1998
#   ?Order = <urn:example:order:A300>
#   ?OrderId = "A300"
#   ?OrderIndex = 2
#   ?OrderJson = """{"orderId":"A300","shipTo":{"country":"NL"},"customer":{"email":"acct@company.nl","vatId":"NL999999999B01"},"lines":[{"sku":"WID-001","qty":2,"unitCents":999},{"sku":"GAD-002","qty":1,"unitCents":1500}],"declared":{"netCents":3498,"vatCents":0,"grossCents":3498}}"""^^rdf:JSON
#   ?OrderUriStr = "urn:example:order:A300"
#   ?Orders = ("""{"orderId":"A100","shipTo":{"country":"BE"},"customer":{"email":"Ada@Example.ORG","vatId":null},"lines":[{"sku":"wid-001","qty":2,"unitCents":999},{"sku":"GAD-002","qty":1,"unitCents":1500}],"declared":{"netCents":3498,"vatCents":509,"grossCents":4007}}"""^^rdf:JSON """{"orderId":"A200","shipTo":{"country":"US"},"customer":{"email":"bob@example.org","vatId":null},"lines":[{"sku":"WID-001","qty":2,"unitCents":999},{"sku":"GAD-002","qty":1,"unitCents":1500}],"declared":{"netCents":3498,"vatCents":0,"grossCents":3498}}"""^^rdf:JSON """{"orderId":"A300","shipTo":{"country":"NL"},"customer":{"email":"acct@company.nl","vatId":"NL999999999B01"},"lines":[{"sku":"WID-001","qty":2,"unitCents":999},{"sku":"GAD-002","qty":1,"unitCents":1500}],"declared":{"netCents":3498,"vatCents":0,"grossCents":3498}}"""^^rdf:JSON """{"orderId":"A301","shipTo":{"country":"NL"},"customer":{"email":"billing@company.nl","vatId":"NL999999999B01"},"lines":[{"sku":"WID-001","qty":2,"unitCents":999},{"sku":"GAD-002","qty":1,"unitCents":1500}],"declared":{"netCents":3498,"vatCents":0,"grossCents":3498}}"""^^rdf:JSON """{"orderId":"A400","shipTo":{"country":"BE"},"customer":{"email":"ada@other.example","vatId":null},"lines":[{"sku":"WID-001","qty":2,"unitCents":999},{"sku":"GAD-002","qty":1,"unitCents":1500}],"declared":{"netCents":3498,"vatCents":508,"grossCents":4006}}"""^^rdf:JSON)
#   ?Product = ex:Widget
#   ?Qty = 2
#   ?SkuCat = "WID-001"
#   ?SkuJson = "WID-001"
#   ?UnitCents = 999
# Therefore the derived triple above is entailed by the rules and facts.
# ----------------------------------------------------------------------

<urn:example:order:A300#line:0> ex:netCents 1998 .

# ----------------------------------------------------------------------
# Proof for derived triple:
#   <urn:example:order:A200> ex:line <urn:example:order:A200#line:1> .
# It holds because the following instance of the rule body is provable:
#   ex:feed ex:json """{
#     "meta~data": { "batch": "2025-12-18" },
#     "orders": [
#       {
#         "orderId": "A100",
#         "shipTo": { "country": "BE" },
#         "customer": { "email": "Ada@Example.ORG", "vatId": null },
#         "lines": [
#           { "sku": "wid-001", "qty": 2, "unitCents": 999 },
#           { "sku": "GAD-002", "qty": 1, "unitCents": 1500 }
#         ],
#         "declared": { "netCents": 3498, "vatCents": 509, "grossCents": 4007 }
#       },
#       {
#         "orderId": "A200",
#         "shipTo": { "country": "US" },
#         "customer": { "email": "bob@example.org", "vatId": null },
#         "lines": [
#           { "sku": "WID-001", "qty": 2, "unitCents": 999 },
#           { "sku": "GAD-002", "qty": 1, "unitCents": 1500 }
#         ],
#         "declared": { "netCents": 3498, "vatCents": 0, "grossCents": 3498 }
#       },
#       {
#         "orderId": "A300",
#         "shipTo": { "country": "NL" },
#         "customer": { "email": "acct@company.nl", "vatId": "NL999999999B01" },
#         "lines": [
#           { "sku": "WID-001", "qty": 2, "unitCents": 999 },
#           { "sku": "GAD-002", "qty": 1, "unitCents": 1500 }
#         ],
#         "declared": { "netCents": 3498, "vatCents": 0, "grossCents": 3498 }
#       },
#       {
#         "orderId": "A301",
#         "shipTo": { "country": "NL" },
#         "customer": { "email": "billing@company.nl", "vatId": "NL999999999B01" },
#         "lines": [
#           { "sku": "WID-001", "qty": 2, "unitCents": 999 },
#           { "sku": "GAD-002", "qty": 1, "unitCents": 1500 }
#         ],
#         "declared": { "netCents": 3498, "vatCents": 0, "grossCents": 3498 }
#       },
#       {
#         "orderId": "A400",
#         "shipTo": { "country": "BE" },
#         "customer": { "email": "ada@other.example", "vatId": null },
#         "lines": [
#           { "sku": "WID-001", "qty": 2, "unitCents": 999 },
#           { "sku": "GAD-002", "qty": 1, "unitCents": 1500 }
#         ],
#         "declared": { "netCents": 3498, "vatCents": 508, "grossCents": 4006 }
#       }
#     ]
#   }"""^^rdf:JSON .
#   ("""{
#     "meta~data": { "batch": "2025-12-18" },
#     "orders": [
#       {
#         "orderId": "A100",
#         "shipTo": { "country": "BE" },
#         "customer": { "email": "Ada@Example.ORG", "vatId": null },
#         "lines": [
#           { "sku": "wid-001", "qty": 2, "unitCents": 999 },
#           { "sku": "GAD-002", "qty": 1, "unitCents": 1500 }
#         ],
#         "declared": { "netCents": 3498, "vatCents": 509, "grossCents": 4007 }
#       },
#       {
#         "orderId": "A200",
#         "shipTo": { "country": "US" },
#         "customer": { "email": "bob@example.org", "vatId": null },
#         "lines": [
#           { "sku": "WID-001", "qty": 2, "unitCents": 999 },
#           { "sku": "GAD-002", "qty": 1, "unitCents": 1500 }
#         ],
#         "declared": { "netCents": 3498, "vatCents": 0, "grossCents": 3498 }
#       },
#       {
#         "orderId": "A300",
#         "shipTo": { "country": "NL" },
#         "customer": { "email": "acct@company.nl", "vatId": "NL999999999B01" },
#         "lines": [
#           { "sku": "WID-001", "qty": 2, "unitCents": 999 },
#           { "sku": "GAD-002", "qty": 1, "unitCents": 1500 }
#         ],
#         "declared": { "netCents": 3498, "vatCents": 0, "grossCents": 3498 }
#       },
#       {
#         "orderId": "A301",
#         "shipTo": { "country": "NL" },
#         "customer": { "email": "billing@company.nl", "vatId": "NL999999999B01" },
#         "lines": [
#           { "sku": "WID-001", "qty": 2, "unitCents": 999 },
#           { "sku": "GAD-002", "qty": 1, "unitCents": 1500 }
#         ],
#         "declared": { "netCents": 3498, "vatCents": 0, "grossCents": 3498 }
#       },
#       {
#         "orderId": "A400",
#         "shipTo": { "country": "BE" },
#         "customer": { "email": "ada@other.example", "vatId": null },
#         "lines": [
#           { "sku": "WID-001", "qty": 2, "unitCents": 999 },
#           { "sku": "GAD-002", "qty": 1, "unitCents": 1500 }
#         ],
#         "declared": { "netCents": 3498, "vatCents": 508, "grossCents": 4006 }
#       }
#     ]
#   }"""^^rdf:JSON "/orders") string:jsonPointer ("""{"orderId":"A100","shipTo":{"country":"BE"},"customer":{"email":"Ada@Example.ORG","vatId":null},"lines":[{"sku":"wid-001","qty":2,"unitCents":999},{"sku":"GAD-002","qty":1,"unitCents":1500}],"declared":{"netCents":3498,"vatCents":509,"grossCents":4007}}"""^^rdf:JSON """{"orderId":"A200","shipTo":{"country":"US"},"customer":{"email":"bob@example.org","vatId":null},"lines":[{"sku":"WID-001","qty":2,"unitCents":999},{"sku":"GAD-002","qty":1,"unitCents":1500}],"declared":{"netCents":3498,"vatCents":0,"grossCents":3498}}"""^^rdf:JSON """{"orderId":"A300","shipTo":{"country":"NL"},"customer":{"email":"acct@company.nl","vatId":"NL999999999B01"},"lines":[{"sku":"WID-001","qty":2,"unitCents":999},{"sku":"GAD-002","qty":1,"unitCents":1500}],"declared":{"netCents":3498,"vatCents":0,"grossCents":3498}}"""^^rdf:JSON """{"orderId":"A301","shipTo":{"country":"NL"},"customer":{"email":"billing@company.nl","vatId":"NL999999999B01"},"lines":[{"sku":"WID-001","qty":2,"unitCents":999},{"sku":"GAD-002","qty":1,"unitCents":1500}],"declared":{"netCents":3498,"vatCents":0,"grossCents":3498}}"""^^rdf:JSON """{"orderId":"A400","shipTo":{"country":"BE"},"customer":{"email":"ada@other.example","vatId":null},"lines":[{"sku":"WID-001","qty":2,"unitCents":999},{"sku":"GAD-002","qty":1,"unitCents":1500}],"declared":{"netCents":3498,"vatCents":508,"grossCents":4006}}"""^^rdf:JSON) .
#   ("""{"orderId":"A100","shipTo":{"country":"BE"},"customer":{"email":"Ada@Example.ORG","vatId":null},"lines":[{"sku":"wid-001","qty":2,"unitCents":999},{"sku":"GAD-002","qty":1,"unitCents":1500}],"declared":{"netCents":3498,"vatCents":509,"grossCents":4007}}"""^^rdf:JSON """{"orderId":"A200","shipTo":{"country":"US"},"customer":{"email":"bob@example.org","vatId":null},"lines":[{"sku":"WID-001","qty":2,"unitCents":999},{"sku":"GAD-002","qty":1,"unitCents":1500}],"declared":{"netCents":3498,"vatCents":0,"grossCents":3498}}"""^^rdf:JSON """{"orderId":"A300","shipTo":{"country":"NL"},"customer":{"email":"acct@company.nl","vatId":"NL999999999B01"},"lines":[{"sku":"WID-001","qty":2,"unitCents":999},{"sku":"GAD-002","qty":1,"unitCents":1500}],"declared":{"netCents":3498,"vatCents":0,"grossCents":3498}}"""^^rdf:JSON """{"orderId":"A301","shipTo":{"country":"NL"},"customer":{"email":"billing@company.nl","vatId":"NL999999999B01"},"lines":[{"sku":"WID-001","qty":2,"unitCents":999},{"sku":"GAD-002","qty":1,"unitCents":1500}],"declared":{"netCents":3498,"vatCents":0,"grossCents":3498}}"""^^rdf:JSON """{"orderId":"A400","shipTo":{"country":"BE"},"customer":{"email":"ada@other.example","vatId":null},"lines":[{"sku":"WID-001","qty":2,"unitCents":999},{"sku":"GAD-002","qty":1,"unitCents":1500}],"declared":{"netCents":3498,"vatCents":508,"grossCents":4006}}"""^^rdf:JSON) list:iterate (1 """{"orderId":"A200","shipTo":{"country":"US"},"customer":{"email":"bob@example.org","vatId":null},"lines":[{"sku":"WID-001","qty":2,"unitCents":999},{"sku":"GAD-002","qty":1,"unitCents":1500}],"declared":{"netCents":3498,"vatCents":0,"grossCents":3498}}"""^^rdf:JSON) .
#   ("""{"orderId":"A200","shipTo":{"country":"US"},"customer":{"email":"bob@example.org","vatId":null},"lines":[{"sku":"WID-001","qty":2,"unitCents":999},{"sku":"GAD-002","qty":1,"unitCents":1500}],"declared":{"netCents":3498,"vatCents":0,"grossCents":3498}}"""^^rdf:JSON "/orderId") string:jsonPointer "A200" .
#   ("urn:example:order:%s" "A200") string:format "urn:example:order:A200" .
#   <urn:example:order:A200> log:uri "urn:example:order:A200" .
#   ("""{"orderId":"A200","shipTo":{"country":"US"},"customer":{"email":"bob@example.org","vatId":null},"lines":[{"sku":"WID-001","qty":2,"unitCents":999},{"sku":"GAD-002","qty":1,"unitCents":1500}],"declared":{"netCents":3498,"vatCents":0,"grossCents":3498}}"""^^rdf:JSON "/lines") string:jsonPointer ("""{"sku":"WID-001","qty":2,"unitCents":999}"""^^rdf:JSON """{"sku":"GAD-002","qty":1,"unitCents":1500}"""^^rdf:JSON) .
#   ("""{"sku":"WID-001","qty":2,"unitCents":999}"""^^rdf:JSON """{"sku":"GAD-002","qty":1,"unitCents":1500}"""^^rdf:JSON) list:iterate (1 """{"sku":"GAD-002","qty":1,"unitCents":1500}"""^^rdf:JSON) .
#   ("""{"sku":"GAD-002","qty":1,"unitCents":1500}"""^^rdf:JSON "/sku") string:jsonPointer "GAD-002" .
#   ("""{"sku":"GAD-002","qty":1,"unitCents":1500}"""^^rdf:JSON "/qty") string:jsonPointer 1 .
#   ("""{"sku":"GAD-002","qty":1,"unitCents":1500}"""^^rdf:JSON "/unitCents") string:jsonPointer 1500 .
#   ex:Gadget a ex:Product .
#   ex:Gadget ex:sku "GAD-002" .
#   (1 1500) math:product 1500 .
#   ("urn:example:order:%s#line:%s" "A200" 1) string:format "urn:example:order:A200#line:1" .
#   <urn:example:order:A200#line:1> log:uri "urn:example:order:A200#line:1" .
#   "GAD-002" string:equalIgnoringCase "GAD-002" .
# via the schematic forward rule:
#   {
#     ex:feed ex:json ?J .
#     (?J "/orders") string:jsonPointer ?Orders .
#     ?Orders list:iterate (?OrderIndex ?OrderJson) .
#     (?OrderJson "/orderId") string:jsonPointer ?OrderId .
#     ("urn:example:order:%s" ?OrderId) string:format ?OrderUriStr .
#     ?Order log:uri ?OrderUriStr .
#     (?OrderJson "/lines") string:jsonPointer ?Lines .
#     ?Lines list:iterate (?LineIndex ?LineJson) .
#     (?LineJson "/sku") string:jsonPointer ?SkuJson .
#     (?LineJson "/qty") string:jsonPointer ?Qty .
#     (?LineJson "/unitCents") string:jsonPointer ?UnitCents .
#     ?Product a ex:Product .
#     ?Product ex:sku ?SkuCat .
#     (?Qty ?UnitCents) math:product ?NetCents .
#     ("urn:example:order:%s#line:%s" ?OrderId ?LineIndex) string:format ?LineUriStr .
#     ?Line log:uri ?LineUriStr .
#     ?SkuJson string:equalIgnoringCase ?SkuCat .
#   } => {
#     ?Order ex:line ?Line .
#     ?Line a ex:OrderLine .
#     ?Line ex:lineIndex ?LineIndex .
#     ?Line ex:product ?Product .
#     ?Line ex:sku ?SkuCat .
#     ?Line ex:qty ?Qty .
#     ?Line ex:unitCents ?UnitCents .
#     ?Line ex:netCents ?NetCents .
#   } .
# with substitution (on rule variables):
#   ?J = """{
#     "meta~data": { "batch": "2025-12-18" },
#     "orders": [
#     {
#     "orderId": "A100",
#     "shipTo": { "country": "BE" },
#     "customer": { "email": "Ada@Example.ORG", "vatId": null },
#     "lines": [
#     { "sku": "wid-001", "qty": 2, "unitCents": 999 },
#     { "sku": "GAD-002", "qty": 1, "unitCents": 1500 }
#     ],
#     "declared": { "netCents": 3498, "vatCents": 509, "grossCents": 4007 }
#     },
#     {
#     "orderId": "A200",
#     "shipTo": { "country": "US" },
#     "customer": { "email": "bob@example.org", "vatId": null },
#     "lines": [
#     { "sku": "WID-001", "qty": 2, "unitCents": 999 },
#     { "sku": "GAD-002", "qty": 1, "unitCents": 1500 }
#     ],
#     "declared": { "netCents": 3498, "vatCents": 0, "grossCents": 3498 }
#     },
#     {
#     "orderId": "A300",
#     "shipTo": { "country": "NL" },
#     "customer": { "email": "acct@company.nl", "vatId": "NL999999999B01" },
#     "lines": [
#     { "sku": "WID-001", "qty": 2, "unitCents": 999 },
#     { "sku": "GAD-002", "qty": 1, "unitCents": 1500 }
#     ],
#     "declared": { "netCents": 3498, "vatCents": 0, "grossCents": 3498 }
#     },
#     {
#     "orderId": "A301",
#     "shipTo": { "country": "NL" },
#     "customer": { "email": "billing@company.nl", "vatId": "NL999999999B01" },
#     "lines": [
#     { "sku": "WID-001", "qty": 2, "unitCents": 999 },
#     { "sku": "GAD-002", "qty": 1, "unitCents": 1500 }
#     ],
#     "declared": { "netCents": 3498, "vatCents": 0, "grossCents": 3498 }
#     },
#     {
#     "orderId": "A400",
#     "shipTo": { "country": "BE" },
#     "customer": { "email": "ada@other.example", "vatId": null },
#     "lines": [
#     { "sku": "WID-001", "qty": 2, "unitCents": 999 },
#     { "sku": "GAD-002", "qty": 1, "unitCents": 1500 }
#     ],
#     "declared": { "netCents": 3498, "vatCents": 508, "grossCents": 4006 }
#     }
#     ]
#   }"""^^rdf:JSON
#   ?Line = <urn:example:order:A200#line:1>
#   ?LineIndex = 1
#   ?LineJson = """{"sku":"GAD-002","qty":1,"unitCents":1500}"""^^rdf:JSON
#   ?LineUriStr = "urn:example:order:A200#line:1"
#   ?Lines = ("""{"sku":"WID-001","qty":2,"unitCents":999}"""^^rdf:JSON """{"sku":"GAD-002","qty":1,"unitCents":1500}"""^^rdf:JSON)
#   ?NetCents = 1500
#   ?Order = <urn:example:order:A200>
#   ?OrderId = "A200"
#   ?OrderIndex = 1
#   ?OrderJson = """{"orderId":"A200","shipTo":{"country":"US"},"customer":{"email":"bob@example.org","vatId":null},"lines":[{"sku":"WID-001","qty":2,"unitCents":999},{"sku":"GAD-002","qty":1,"unitCents":1500}],"declared":{"netCents":3498,"vatCents":0,"grossCents":3498}}"""^^rdf:JSON
#   ?OrderUriStr = "urn:example:order:A200"
#   ?Orders = ("""{"orderId":"A100","shipTo":{"country":"BE"},"customer":{"email":"Ada@Example.ORG","vatId":null},"lines":[{"sku":"wid-001","qty":2,"unitCents":999},{"sku":"GAD-002","qty":1,"unitCents":1500}],"declared":{"netCents":3498,"vatCents":509,"grossCents":4007}}"""^^rdf:JSON """{"orderId":"A200","shipTo":{"country":"US"},"customer":{"email":"bob@example.org","vatId":null},"lines":[{"sku":"WID-001","qty":2,"unitCents":999},{"sku":"GAD-002","qty":1,"unitCents":1500}],"declared":{"netCents":3498,"vatCents":0,"grossCents":3498}}"""^^rdf:JSON """{"orderId":"A300","shipTo":{"country":"NL"},"customer":{"email":"acct@company.nl","vatId":"NL999999999B01"},"lines":[{"sku":"WID-001","qty":2,"unitCents":999},{"sku":"GAD-002","qty":1,"unitCents":1500}],"declared":{"netCents":3498,"vatCents":0,"grossCents":3498}}"""^^rdf:JSON """{"orderId":"A301","shipTo":{"country":"NL"},"customer":{"email":"billing@company.nl","vatId":"NL999999999B01"},"lines":[{"sku":"WID-001","qty":2,"unitCents":999},{"sku":"GAD-002","qty":1,"unitCents":1500}],"declared":{"netCents":3498,"vatCents":0,"grossCents":3498}}"""^^rdf:JSON """{"orderId":"A400","shipTo":{"country":"BE"},"customer":{"email":"ada@other.example","vatId":null},"lines":[{"sku":"WID-001","qty":2,"unitCents":999},{"sku":"GAD-002","qty":1,"unitCents":1500}],"declared":{"netCents":3498,"vatCents":508,"grossCents":4006}}"""^^rdf:JSON)
#   ?Product = ex:Gadget
#   ?Qty = 1
#   ?SkuCat = "GAD-002"
#   ?SkuJson = "GAD-002"
#   ?UnitCents = 1500
# Therefore the derived triple above is entailed by the rules and facts.
# ----------------------------------------------------------------------

<urn:example:order:A200> ex:line <urn:example:order:A200#line:1> .

# ----------------------------------------------------------------------
# Proof for derived triple:
#   <urn:example:order:A200#line:1> a ex:OrderLine .
# It holds because the following instance of the rule body is provable:
#   ex:feed ex:json """{
#     "meta~data": { "batch": "2025-12-18" },
#     "orders": [
#       {
#         "orderId": "A100",
#         "shipTo": { "country": "BE" },
#         "customer": { "email": "Ada@Example.ORG", "vatId": null },
#         "lines": [
#           { "sku": "wid-001", "qty": 2, "unitCents": 999 },
#           { "sku": "GAD-002", "qty": 1, "unitCents": 1500 }
#         ],
#         "declared": { "netCents": 3498, "vatCents": 509, "grossCents": 4007 }
#       },
#       {
#         "orderId": "A200",
#         "shipTo": { "country": "US" },
#         "customer": { "email": "bob@example.org", "vatId": null },
#         "lines": [
#           { "sku": "WID-001", "qty": 2, "unitCents": 999 },
#           { "sku": "GAD-002", "qty": 1, "unitCents": 1500 }
#         ],
#         "declared": { "netCents": 3498, "vatCents": 0, "grossCents": 3498 }
#       },
#       {
#         "orderId": "A300",
#         "shipTo": { "country": "NL" },
#         "customer": { "email": "acct@company.nl", "vatId": "NL999999999B01" },
#         "lines": [
#           { "sku": "WID-001", "qty": 2, "unitCents": 999 },
#           { "sku": "GAD-002", "qty": 1, "unitCents": 1500 }
#         ],
#         "declared": { "netCents": 3498, "vatCents": 0, "grossCents": 3498 }
#       },
#       {
#         "orderId": "A301",
#         "shipTo": { "country": "NL" },
#         "customer": { "email": "billing@company.nl", "vatId": "NL999999999B01" },
#         "lines": [
#           { "sku": "WID-001", "qty": 2, "unitCents": 999 },
#           { "sku": "GAD-002", "qty": 1, "unitCents": 1500 }
#         ],
#         "declared": { "netCents": 3498, "vatCents": 0, "grossCents": 3498 }
#       },
#       {
#         "orderId": "A400",
#         "shipTo": { "country": "BE" },
#         "customer": { "email": "ada@other.example", "vatId": null },
#         "lines": [
#           { "sku": "WID-001", "qty": 2, "unitCents": 999 },
#           { "sku": "GAD-002", "qty": 1, "unitCents": 1500 }
#         ],
#         "declared": { "netCents": 3498, "vatCents": 508, "grossCents": 4006 }
#       }
#     ]
#   }"""^^rdf:JSON .
#   ("""{
#     "meta~data": { "batch": "2025-12-18" },
#     "orders": [
#       {
#         "orderId": "A100",
#         "shipTo": { "country": "BE" },
#         "customer": { "email": "Ada@Example.ORG", "vatId": null },
#         "lines": [
#           { "sku": "wid-001", "qty": 2, "unitCents": 999 },
#           { "sku": "GAD-002", "qty": 1, "unitCents": 1500 }
#         ],
#         "declared": { "netCents": 3498, "vatCents": 509, "grossCents": 4007 }
#       },
#       {
#         "orderId": "A200",
#         "shipTo": { "country": "US" },
#         "customer": { "email": "bob@example.org", "vatId": null },
#         "lines": [
#           { "sku": "WID-001", "qty": 2, "unitCents": 999 },
#           { "sku": "GAD-002", "qty": 1, "unitCents": 1500 }
#         ],
#         "declared": { "netCents": 3498, "vatCents": 0, "grossCents": 3498 }
#       },
#       {
#         "orderId": "A300",
#         "shipTo": { "country": "NL" },
#         "customer": { "email": "acct@company.nl", "vatId": "NL999999999B01" },
#         "lines": [
#           { "sku": "WID-001", "qty": 2, "unitCents": 999 },
#           { "sku": "GAD-002", "qty": 1, "unitCents": 1500 }
#         ],
#         "declared": { "netCents": 3498, "vatCents": 0, "grossCents": 3498 }
#       },
#       {
#         "orderId": "A301",
#         "shipTo": { "country": "NL" },
#         "customer": { "email": "billing@company.nl", "vatId": "NL999999999B01" },
#         "lines": [
#           { "sku": "WID-001", "qty": 2, "unitCents": 999 },
#           { "sku": "GAD-002", "qty": 1, "unitCents": 1500 }
#         ],
#         "declared": { "netCents": 3498, "vatCents": 0, "grossCents": 3498 }
#       },
#       {
#         "orderId": "A400",
#         "shipTo": { "country": "BE" },
#         "customer": { "email": "ada@other.example", "vatId": null },
#         "lines": [
#           { "sku": "WID-001", "qty": 2, "unitCents": 999 },
#           { "sku": "GAD-002", "qty": 1, "unitCents": 1500 }
#         ],
#         "declared": { "netCents": 3498, "vatCents": 508, "grossCents": 4006 }
#       }
#     ]
#   }"""^^rdf:JSON "/orders") string:jsonPointer ("""{"orderId":"A100","shipTo":{"country":"BE"},"customer":{"email":"Ada@Example.ORG","vatId":null},"lines":[{"sku":"wid-001","qty":2,"unitCents":999},{"sku":"GAD-002","qty":1,"unitCents":1500}],"declared":{"netCents":3498,"vatCents":509,"grossCents":4007}}"""^^rdf:JSON """{"orderId":"A200","shipTo":{"country":"US"},"customer":{"email":"bob@example.org","vatId":null},"lines":[{"sku":"WID-001","qty":2,"unitCents":999},{"sku":"GAD-002","qty":1,"unitCents":1500}],"declared":{"netCents":3498,"vatCents":0,"grossCents":3498}}"""^^rdf:JSON """{"orderId":"A300","shipTo":{"country":"NL"},"customer":{"email":"acct@company.nl","vatId":"NL999999999B01"},"lines":[{"sku":"WID-001","qty":2,"unitCents":999},{"sku":"GAD-002","qty":1,"unitCents":1500}],"declared":{"netCents":3498,"vatCents":0,"grossCents":3498}}"""^^rdf:JSON """{"orderId":"A301","shipTo":{"country":"NL"},"customer":{"email":"billing@company.nl","vatId":"NL999999999B01"},"lines":[{"sku":"WID-001","qty":2,"unitCents":999},{"sku":"GAD-002","qty":1,"unitCents":1500}],"declared":{"netCents":3498,"vatCents":0,"grossCents":3498}}"""^^rdf:JSON """{"orderId":"A400","shipTo":{"country":"BE"},"customer":{"email":"ada@other.example","vatId":null},"lines":[{"sku":"WID-001","qty":2,"unitCents":999},{"sku":"GAD-002","qty":1,"unitCents":1500}],"declared":{"netCents":3498,"vatCents":508,"grossCents":4006}}"""^^rdf:JSON) .
#   ("""{"orderId":"A100","shipTo":{"country":"BE"},"customer":{"email":"Ada@Example.ORG","vatId":null},"lines":[{"sku":"wid-001","qty":2,"unitCents":999},{"sku":"GAD-002","qty":1,"unitCents":1500}],"declared":{"netCents":3498,"vatCents":509,"grossCents":4007}}"""^^rdf:JSON """{"orderId":"A200","shipTo":{"country":"US"},"customer":{"email":"bob@example.org","vatId":null},"lines":[{"sku":"WID-001","qty":2,"unitCents":999},{"sku":"GAD-002","qty":1,"unitCents":1500}],"declared":{"netCents":3498,"vatCents":0,"grossCents":3498}}"""^^rdf:JSON """{"orderId":"A300","shipTo":{"country":"NL"},"customer":{"email":"acct@company.nl","vatId":"NL999999999B01"},"lines":[{"sku":"WID-001","qty":2,"unitCents":999},{"sku":"GAD-002","qty":1,"unitCents":1500}],"declared":{"netCents":3498,"vatCents":0,"grossCents":3498}}"""^^rdf:JSON """{"orderId":"A301","shipTo":{"country":"NL"},"customer":{"email":"billing@company.nl","vatId":"NL999999999B01"},"lines":[{"sku":"WID-001","qty":2,"unitCents":999},{"sku":"GAD-002","qty":1,"unitCents":1500}],"declared":{"netCents":3498,"vatCents":0,"grossCents":3498}}"""^^rdf:JSON """{"orderId":"A400","shipTo":{"country":"BE"},"customer":{"email":"ada@other.example","vatId":null},"lines":[{"sku":"WID-001","qty":2,"unitCents":999},{"sku":"GAD-002","qty":1,"unitCents":1500}],"declared":{"netCents":3498,"vatCents":508,"grossCents":4006}}"""^^rdf:JSON) list:iterate (1 """{"orderId":"A200","shipTo":{"country":"US"},"customer":{"email":"bob@example.org","vatId":null},"lines":[{"sku":"WID-001","qty":2,"unitCents":999},{"sku":"GAD-002","qty":1,"unitCents":1500}],"declared":{"netCents":3498,"vatCents":0,"grossCents":3498}}"""^^rdf:JSON) .
#   ("""{"orderId":"A200","shipTo":{"country":"US"},"customer":{"email":"bob@example.org","vatId":null},"lines":[{"sku":"WID-001","qty":2,"unitCents":999},{"sku":"GAD-002","qty":1,"unitCents":1500}],"declared":{"netCents":3498,"vatCents":0,"grossCents":3498}}"""^^rdf:JSON "/orderId") string:jsonPointer "A200" .
#   ("urn:example:order:%s" "A200") string:format "urn:example:order:A200" .
#   <urn:example:order:A200> log:uri "urn:example:order:A200" .
#   ("""{"orderId":"A200","shipTo":{"country":"US"},"customer":{"email":"bob@example.org","vatId":null},"lines":[{"sku":"WID-001","qty":2,"unitCents":999},{"sku":"GAD-002","qty":1,"unitCents":1500}],"declared":{"netCents":3498,"vatCents":0,"grossCents":3498}}"""^^rdf:JSON "/lines") string:jsonPointer ("""{"sku":"WID-001","qty":2,"unitCents":999}"""^^rdf:JSON """{"sku":"GAD-002","qty":1,"unitCents":1500}"""^^rdf:JSON) .
#   ("""{"sku":"WID-001","qty":2,"unitCents":999}"""^^rdf:JSON """{"sku":"GAD-002","qty":1,"unitCents":1500}"""^^rdf:JSON) list:iterate (1 """{"sku":"GAD-002","qty":1,"unitCents":1500}"""^^rdf:JSON) .
#   ("""{"sku":"GAD-002","qty":1,"unitCents":1500}"""^^rdf:JSON "/sku") string:jsonPointer "GAD-002" .
#   ("""{"sku":"GAD-002","qty":1,"unitCents":1500}"""^^rdf:JSON "/qty") string:jsonPointer 1 .
#   ("""{"sku":"GAD-002","qty":1,"unitCents":1500}"""^^rdf:JSON "/unitCents") string:jsonPointer 1500 .
#   ex:Gadget a ex:Product .
#   ex:Gadget ex:sku "GAD-002" .
#   (1 1500) math:product 1500 .
#   ("urn:example:order:%s#line:%s" "A200" 1) string:format "urn:example:order:A200#line:1" .
#   <urn:example:order:A200#line:1> log:uri "urn:example:order:A200#line:1" .
#   "GAD-002" string:equalIgnoringCase "GAD-002" .
# via the schematic forward rule:
#   {
#     ex:feed ex:json ?J .
#     (?J "/orders") string:jsonPointer ?Orders .
#     ?Orders list:iterate (?OrderIndex ?OrderJson) .
#     (?OrderJson "/orderId") string:jsonPointer ?OrderId .
#     ("urn:example:order:%s" ?OrderId) string:format ?OrderUriStr .
#     ?Order log:uri ?OrderUriStr .
#     (?OrderJson "/lines") string:jsonPointer ?Lines .
#     ?Lines list:iterate (?LineIndex ?LineJson) .
#     (?LineJson "/sku") string:jsonPointer ?SkuJson .
#     (?LineJson "/qty") string:jsonPointer ?Qty .
#     (?LineJson "/unitCents") string:jsonPointer ?UnitCents .
#     ?Product a ex:Product .
#     ?Product ex:sku ?SkuCat .
#     (?Qty ?UnitCents) math:product ?NetCents .
#     ("urn:example:order:%s#line:%s" ?OrderId ?LineIndex) string:format ?LineUriStr .
#     ?Line log:uri ?LineUriStr .
#     ?SkuJson string:equalIgnoringCase ?SkuCat .
#   } => {
#     ?Order ex:line ?Line .
#     ?Line a ex:OrderLine .
#     ?Line ex:lineIndex ?LineIndex .
#     ?Line ex:product ?Product .
#     ?Line ex:sku ?SkuCat .
#     ?Line ex:qty ?Qty .
#     ?Line ex:unitCents ?UnitCents .
#     ?Line ex:netCents ?NetCents .
#   } .
# with substitution (on rule variables):
#   ?J = """{
#     "meta~data": { "batch": "2025-12-18" },
#     "orders": [
#     {
#     "orderId": "A100",
#     "shipTo": { "country": "BE" },
#     "customer": { "email": "Ada@Example.ORG", "vatId": null },
#     "lines": [
#     { "sku": "wid-001", "qty": 2, "unitCents": 999 },
#     { "sku": "GAD-002", "qty": 1, "unitCents": 1500 }
#     ],
#     "declared": { "netCents": 3498, "vatCents": 509, "grossCents": 4007 }
#     },
#     {
#     "orderId": "A200",
#     "shipTo": { "country": "US" },
#     "customer": { "email": "bob@example.org", "vatId": null },
#     "lines": [
#     { "sku": "WID-001", "qty": 2, "unitCents": 999 },
#     { "sku": "GAD-002", "qty": 1, "unitCents": 1500 }
#     ],
#     "declared": { "netCents": 3498, "vatCents": 0, "grossCents": 3498 }
#     },
#     {
#     "orderId": "A300",
#     "shipTo": { "country": "NL" },
#     "customer": { "email": "acct@company.nl", "vatId": "NL999999999B01" },
#     "lines": [
#     { "sku": "WID-001", "qty": 2, "unitCents": 999 },
#     { "sku": "GAD-002", "qty": 1, "unitCents": 1500 }
#     ],
#     "declared": { "netCents": 3498, "vatCents": 0, "grossCents": 3498 }
#     },
#     {
#     "orderId": "A301",
#     "shipTo": { "country": "NL" },
#     "customer": { "email": "billing@company.nl", "vatId": "NL999999999B01" },
#     "lines": [
#     { "sku": "WID-001", "qty": 2, "unitCents": 999 },
#     { "sku": "GAD-002", "qty": 1, "unitCents": 1500 }
#     ],
#     "declared": { "netCents": 3498, "vatCents": 0, "grossCents": 3498 }
#     },
#     {
#     "orderId": "A400",
#     "shipTo": { "country": "BE" },
#     "customer": { "email": "ada@other.example", "vatId": null },
#     "lines": [
#     { "sku": "WID-001", "qty": 2, "unitCents": 999 },
#     { "sku": "GAD-002", "qty": 1, "unitCents": 1500 }
#     ],
#     "declared": { "netCents": 3498, "vatCents": 508, "grossCents": 4006 }
#     }
#     ]
#   }"""^^rdf:JSON
#   ?Line = <urn:example:order:A200#line:1>
#   ?LineIndex = 1
#   ?LineJson = """{"sku":"GAD-002","qty":1,"unitCents":1500}"""^^rdf:JSON
#   ?LineUriStr = "urn:example:order:A200#line:1"
#   ?Lines = ("""{"sku":"WID-001","qty":2,"unitCents":999}"""^^rdf:JSON """{"sku":"GAD-002","qty":1,"unitCents":1500}"""^^rdf:JSON)
#   ?NetCents = 1500
#   ?Order = <urn:example:order:A200>
#   ?OrderId = "A200"
#   ?OrderIndex = 1
#   ?OrderJson = """{"orderId":"A200","shipTo":{"country":"US"},"customer":{"email":"bob@example.org","vatId":null},"lines":[{"sku":"WID-001","qty":2,"unitCents":999},{"sku":"GAD-002","qty":1,"unitCents":1500}],"declared":{"netCents":3498,"vatCents":0,"grossCents":3498}}"""^^rdf:JSON
#   ?OrderUriStr = "urn:example:order:A200"
#   ?Orders = ("""{"orderId":"A100","shipTo":{"country":"BE"},"customer":{"email":"Ada@Example.ORG","vatId":null},"lines":[{"sku":"wid-001","qty":2,"unitCents":999},{"sku":"GAD-002","qty":1,"unitCents":1500}],"declared":{"netCents":3498,"vatCents":509,"grossCents":4007}}"""^^rdf:JSON """{"orderId":"A200","shipTo":{"country":"US"},"customer":{"email":"bob@example.org","vatId":null},"lines":[{"sku":"WID-001","qty":2,"unitCents":999},{"sku":"GAD-002","qty":1,"unitCents":1500}],"declared":{"netCents":3498,"vatCents":0,"grossCents":3498}}"""^^rdf:JSON """{"orderId":"A300","shipTo":{"country":"NL"},"customer":{"email":"acct@company.nl","vatId":"NL999999999B01"},"lines":[{"sku":"WID-001","qty":2,"unitCents":999},{"sku":"GAD-002","qty":1,"unitCents":1500}],"declared":{"netCents":3498,"vatCents":0,"grossCents":3498}}"""^^rdf:JSON """{"orderId":"A301","shipTo":{"country":"NL"},"customer":{"email":"billing@company.nl","vatId":"NL999999999B01"},"lines":[{"sku":"WID-001","qty":2,"unitCents":999},{"sku":"GAD-002","qty":1,"unitCents":1500}],"declared":{"netCents":3498,"vatCents":0,"grossCents":3498}}"""^^rdf:JSON """{"orderId":"A400","shipTo":{"country":"BE"},"customer":{"email":"ada@other.example","vatId":null},"lines":[{"sku":"WID-001","qty":2,"unitCents":999},{"sku":"GAD-002","qty":1,"unitCents":1500}],"declared":{"netCents":3498,"vatCents":508,"grossCents":4006}}"""^^rdf:JSON)
#   ?Product = ex:Gadget
#   ?Qty = 1
#   ?SkuCat = "GAD-002"
#   ?SkuJson = "GAD-002"
#   ?UnitCents = 1500
# Therefore the derived triple above is entailed by the rules and facts.
# ----------------------------------------------------------------------

<urn:example:order:A200#line:1> a ex:OrderLine .

# ----------------------------------------------------------------------
# Proof for derived triple:
#   <urn:example:order:A200#line:1> ex:lineIndex 1 .
# It holds because the following instance of the rule body is provable:
#   ex:feed ex:json """{
#     "meta~data": { "batch": "2025-12-18" },
#     "orders": [
#       {
#         "orderId": "A100",
#         "shipTo": { "country": "BE" },
#         "customer": { "email": "Ada@Example.ORG", "vatId": null },
#         "lines": [
#           { "sku": "wid-001", "qty": 2, "unitCents": 999 },
#           { "sku": "GAD-002", "qty": 1, "unitCents": 1500 }
#         ],
#         "declared": { "netCents": 3498, "vatCents": 509, "grossCents": 4007 }
#       },
#       {
#         "orderId": "A200",
#         "shipTo": { "country": "US" },
#         "customer": { "email": "bob@example.org", "vatId": null },
#         "lines": [
#           { "sku": "WID-001", "qty": 2, "unitCents": 999 },
#           { "sku": "GAD-002", "qty": 1, "unitCents": 1500 }
#         ],
#         "declared": { "netCents": 3498, "vatCents": 0, "grossCents": 3498 }
#       },
#       {
#         "orderId": "A300",
#         "shipTo": { "country": "NL" },
#         "customer": { "email": "acct@company.nl", "vatId": "NL999999999B01" },
#         "lines": [
#           { "sku": "WID-001", "qty": 2, "unitCents": 999 },
#           { "sku": "GAD-002", "qty": 1, "unitCents": 1500 }
#         ],
#         "declared": { "netCents": 3498, "vatCents": 0, "grossCents": 3498 }
#       },
#       {
#         "orderId": "A301",
#         "shipTo": { "country": "NL" },
#         "customer": { "email": "billing@company.nl", "vatId": "NL999999999B01" },
#         "lines": [
#           { "sku": "WID-001", "qty": 2, "unitCents": 999 },
#           { "sku": "GAD-002", "qty": 1, "unitCents": 1500 }
#         ],
#         "declared": { "netCents": 3498, "vatCents": 0, "grossCents": 3498 }
#       },
#       {
#         "orderId": "A400",
#         "shipTo": { "country": "BE" },
#         "customer": { "email": "ada@other.example", "vatId": null },
#         "lines": [
#           { "sku": "WID-001", "qty": 2, "unitCents": 999 },
#           { "sku": "GAD-002", "qty": 1, "unitCents": 1500 }
#         ],
#         "declared": { "netCents": 3498, "vatCents": 508, "grossCents": 4006 }
#       }
#     ]
#   }"""^^rdf:JSON .
#   ("""{
#     "meta~data": { "batch": "2025-12-18" },
#     "orders": [
#       {
#         "orderId": "A100",
#         "shipTo": { "country": "BE" },
#         "customer": { "email": "Ada@Example.ORG", "vatId": null },
#         "lines": [
#           { "sku": "wid-001", "qty": 2, "unitCents": 999 },
#           { "sku": "GAD-002", "qty": 1, "unitCents": 1500 }
#         ],
#         "declared": { "netCents": 3498, "vatCents": 509, "grossCents": 4007 }
#       },
#       {
#         "orderId": "A200",
#         "shipTo": { "country": "US" },
#         "customer": { "email": "bob@example.org", "vatId": null },
#         "lines": [
#           { "sku": "WID-001", "qty": 2, "unitCents": 999 },
#           { "sku": "GAD-002", "qty": 1, "unitCents": 1500 }
#         ],
#         "declared": { "netCents": 3498, "vatCents": 0, "grossCents": 3498 }
#       },
#       {
#         "orderId": "A300",
#         "shipTo": { "country": "NL" },
#         "customer": { "email": "acct@company.nl", "vatId": "NL999999999B01" },
#         "lines": [
#           { "sku": "WID-001", "qty": 2, "unitCents": 999 },
#           { "sku": "GAD-002", "qty": 1, "unitCents": 1500 }
#         ],
#         "declared": { "netCents": 3498, "vatCents": 0, "grossCents": 3498 }
#       },
#       {
#         "orderId": "A301",
#         "shipTo": { "country": "NL" },
#         "customer": { "email": "billing@company.nl", "vatId": "NL999999999B01" },
#         "lines": [
#           { "sku": "WID-001", "qty": 2, "unitCents": 999 },
#           { "sku": "GAD-002", "qty": 1, "unitCents": 1500 }
#         ],
#         "declared": { "netCents": 3498, "vatCents": 0, "grossCents": 3498 }
#       },
#       {
#         "orderId": "A400",
#         "shipTo": { "country": "BE" },
#         "customer": { "email": "ada@other.example", "vatId": null },
#         "lines": [
#           { "sku": "WID-001", "qty": 2, "unitCents": 999 },
#           { "sku": "GAD-002", "qty": 1, "unitCents": 1500 }
#         ],
#         "declared": { "netCents": 3498, "vatCents": 508, "grossCents": 4006 }
#       }
#     ]
#   }"""^^rdf:JSON "/orders") string:jsonPointer ("""{"orderId":"A100","shipTo":{"country":"BE"},"customer":{"email":"Ada@Example.ORG","vatId":null},"lines":[{"sku":"wid-001","qty":2,"unitCents":999},{"sku":"GAD-002","qty":1,"unitCents":1500}],"declared":{"netCents":3498,"vatCents":509,"grossCents":4007}}"""^^rdf:JSON """{"orderId":"A200","shipTo":{"country":"US"},"customer":{"email":"bob@example.org","vatId":null},"lines":[{"sku":"WID-001","qty":2,"unitCents":999},{"sku":"GAD-002","qty":1,"unitCents":1500}],"declared":{"netCents":3498,"vatCents":0,"grossCents":3498}}"""^^rdf:JSON """{"orderId":"A300","shipTo":{"country":"NL"},"customer":{"email":"acct@company.nl","vatId":"NL999999999B01"},"lines":[{"sku":"WID-001","qty":2,"unitCents":999},{"sku":"GAD-002","qty":1,"unitCents":1500}],"declared":{"netCents":3498,"vatCents":0,"grossCents":3498}}"""^^rdf:JSON """{"orderId":"A301","shipTo":{"country":"NL"},"customer":{"email":"billing@company.nl","vatId":"NL999999999B01"},"lines":[{"sku":"WID-001","qty":2,"unitCents":999},{"sku":"GAD-002","qty":1,"unitCents":1500}],"declared":{"netCents":3498,"vatCents":0,"grossCents":3498}}"""^^rdf:JSON """{"orderId":"A400","shipTo":{"country":"BE"},"customer":{"email":"ada@other.example","vatId":null},"lines":[{"sku":"WID-001","qty":2,"unitCents":999},{"sku":"GAD-002","qty":1,"unitCents":1500}],"declared":{"netCents":3498,"vatCents":508,"grossCents":4006}}"""^^rdf:JSON) .
#   ("""{"orderId":"A100","shipTo":{"country":"BE"},"customer":{"email":"Ada@Example.ORG","vatId":null},"lines":[{"sku":"wid-001","qty":2,"unitCents":999},{"sku":"GAD-002","qty":1,"unitCents":1500}],"declared":{"netCents":3498,"vatCents":509,"grossCents":4007}}"""^^rdf:JSON """{"orderId":"A200","shipTo":{"country":"US"},"customer":{"email":"bob@example.org","vatId":null},"lines":[{"sku":"WID-001","qty":2,"unitCents":999},{"sku":"GAD-002","qty":1,"unitCents":1500}],"declared":{"netCents":3498,"vatCents":0,"grossCents":3498}}"""^^rdf:JSON """{"orderId":"A300","shipTo":{"country":"NL"},"customer":{"email":"acct@company.nl","vatId":"NL999999999B01"},"lines":[{"sku":"WID-001","qty":2,"unitCents":999},{"sku":"GAD-002","qty":1,"unitCents":1500}],"declared":{"netCents":3498,"vatCents":0,"grossCents":3498}}"""^^rdf:JSON """{"orderId":"A301","shipTo":{"country":"NL"},"customer":{"email":"billing@company.nl","vatId":"NL999999999B01"},"lines":[{"sku":"WID-001","qty":2,"unitCents":999},{"sku":"GAD-002","qty":1,"unitCents":1500}],"declared":{"netCents":3498,"vatCents":0,"grossCents":3498}}"""^^rdf:JSON """{"orderId":"A400","shipTo":{"country":"BE"},"customer":{"email":"ada@other.example","vatId":null},"lines":[{"sku":"WID-001","qty":2,"unitCents":999},{"sku":"GAD-002","qty":1,"unitCents":1500}],"declared":{"netCents":3498,"vatCents":508,"grossCents":4006}}"""^^rdf:JSON) list:iterate (1 """{"orderId":"A200","shipTo":{"country":"US"},"customer":{"email":"bob@example.org","vatId":null},"lines":[{"sku":"WID-001","qty":2,"unitCents":999},{"sku":"GAD-002","qty":1,"unitCents":1500}],"declared":{"netCents":3498,"vatCents":0,"grossCents":3498}}"""^^rdf:JSON) .
#   ("""{"orderId":"A200","shipTo":{"country":"US"},"customer":{"email":"bob@example.org","vatId":null},"lines":[{"sku":"WID-001","qty":2,"unitCents":999},{"sku":"GAD-002","qty":1,"unitCents":1500}],"declared":{"netCents":3498,"vatCents":0,"grossCents":3498}}"""^^rdf:JSON "/orderId") string:jsonPointer "A200" .
#   ("urn:example:order:%s" "A200") string:format "urn:example:order:A200" .
#   <urn:example:order:A200> log:uri "urn:example:order:A200" .
#   ("""{"orderId":"A200","shipTo":{"country":"US"},"customer":{"email":"bob@example.org","vatId":null},"lines":[{"sku":"WID-001","qty":2,"unitCents":999},{"sku":"GAD-002","qty":1,"unitCents":1500}],"declared":{"netCents":3498,"vatCents":0,"grossCents":3498}}"""^^rdf:JSON "/lines") string:jsonPointer ("""{"sku":"WID-001","qty":2,"unitCents":999}"""^^rdf:JSON """{"sku":"GAD-002","qty":1,"unitCents":1500}"""^^rdf:JSON) .
#   ("""{"sku":"WID-001","qty":2,"unitCents":999}"""^^rdf:JSON """{"sku":"GAD-002","qty":1,"unitCents":1500}"""^^rdf:JSON) list:iterate (1 """{"sku":"GAD-002","qty":1,"unitCents":1500}"""^^rdf:JSON) .
#   ("""{"sku":"GAD-002","qty":1,"unitCents":1500}"""^^rdf:JSON "/sku") string:jsonPointer "GAD-002" .
#   ("""{"sku":"GAD-002","qty":1,"unitCents":1500}"""^^rdf:JSON "/qty") string:jsonPointer 1 .
#   ("""{"sku":"GAD-002","qty":1,"unitCents":1500}"""^^rdf:JSON "/unitCents") string:jsonPointer 1500 .
#   ex:Gadget a ex:Product .
#   ex:Gadget ex:sku "GAD-002" .
#   (1 1500) math:product 1500 .
#   ("urn:example:order:%s#line:%s" "A200" 1) string:format "urn:example:order:A200#line:1" .
#   <urn:example:order:A200#line:1> log:uri "urn:example:order:A200#line:1" .
#   "GAD-002" string:equalIgnoringCase "GAD-002" .
# via the schematic forward rule:
#   {
#     ex:feed ex:json ?J .
#     (?J "/orders") string:jsonPointer ?Orders .
#     ?Orders list:iterate (?OrderIndex ?OrderJson) .
#     (?OrderJson "/orderId") string:jsonPointer ?OrderId .
#     ("urn:example:order:%s" ?OrderId) string:format ?OrderUriStr .
#     ?Order log:uri ?OrderUriStr .
#     (?OrderJson "/lines") string:jsonPointer ?Lines .
#     ?Lines list:iterate (?LineIndex ?LineJson) .
#     (?LineJson "/sku") string:jsonPointer ?SkuJson .
#     (?LineJson "/qty") string:jsonPointer ?Qty .
#     (?LineJson "/unitCents") string:jsonPointer ?UnitCents .
#     ?Product a ex:Product .
#     ?Product ex:sku ?SkuCat .
#     (?Qty ?UnitCents) math:product ?NetCents .
#     ("urn:example:order:%s#line:%s" ?OrderId ?LineIndex) string:format ?LineUriStr .
#     ?Line log:uri ?LineUriStr .
#     ?SkuJson string:equalIgnoringCase ?SkuCat .
#   } => {
#     ?Order ex:line ?Line .
#     ?Line a ex:OrderLine .
#     ?Line ex:lineIndex ?LineIndex .
#     ?Line ex:product ?Product .
#     ?Line ex:sku ?SkuCat .
#     ?Line ex:qty ?Qty .
#     ?Line ex:unitCents ?UnitCents .
#     ?Line ex:netCents ?NetCents .
#   } .
# with substitution (on rule variables):
#   ?J = """{
#     "meta~data": { "batch": "2025-12-18" },
#     "orders": [
#     {
#     "orderId": "A100",
#     "shipTo": { "country": "BE" },
#     "customer": { "email": "Ada@Example.ORG", "vatId": null },
#     "lines": [
#     { "sku": "wid-001", "qty": 2, "unitCents": 999 },
#     { "sku": "GAD-002", "qty": 1, "unitCents": 1500 }
#     ],
#     "declared": { "netCents": 3498, "vatCents": 509, "grossCents": 4007 }
#     },
#     {
#     "orderId": "A200",
#     "shipTo": { "country": "US" },
#     "customer": { "email": "bob@example.org", "vatId": null },
#     "lines": [
#     { "sku": "WID-001", "qty": 2, "unitCents": 999 },
#     { "sku": "GAD-002", "qty": 1, "unitCents": 1500 }
#     ],
#     "declared": { "netCents": 3498, "vatCents": 0, "grossCents": 3498 }
#     },
#     {
#     "orderId": "A300",
#     "shipTo": { "country": "NL" },
#     "customer": { "email": "acct@company.nl", "vatId": "NL999999999B01" },
#     "lines": [
#     { "sku": "WID-001", "qty": 2, "unitCents": 999 },
#     { "sku": "GAD-002", "qty": 1, "unitCents": 1500 }
#     ],
#     "declared": { "netCents": 3498, "vatCents": 0, "grossCents": 3498 }
#     },
#     {
#     "orderId": "A301",
#     "shipTo": { "country": "NL" },
#     "customer": { "email": "billing@company.nl", "vatId": "NL999999999B01" },
#     "lines": [
#     { "sku": "WID-001", "qty": 2, "unitCents": 999 },
#     { "sku": "GAD-002", "qty": 1, "unitCents": 1500 }
#     ],
#     "declared": { "netCents": 3498, "vatCents": 0, "grossCents": 3498 }
#     },
#     {
#     "orderId": "A400",
#     "shipTo": { "country": "BE" },
#     "customer": { "email": "ada@other.example", "vatId": null },
#     "lines": [
#     { "sku": "WID-001", "qty": 2, "unitCents": 999 },
#     { "sku": "GAD-002", "qty": 1, "unitCents": 1500 }
#     ],
#     "declared": { "netCents": 3498, "vatCents": 508, "grossCents": 4006 }
#     }
#     ]
#   }"""^^rdf:JSON
#   ?Line = <urn:example:order:A200#line:1>
#   ?LineIndex = 1
#   ?LineJson = """{"sku":"GAD-002","qty":1,"unitCents":1500}"""^^rdf:JSON
#   ?LineUriStr = "urn:example:order:A200#line:1"
#   ?Lines = ("""{"sku":"WID-001","qty":2,"unitCents":999}"""^^rdf:JSON """{"sku":"GAD-002","qty":1,"unitCents":1500}"""^^rdf:JSON)
#   ?NetCents = 1500
#   ?Order = <urn:example:order:A200>
#   ?OrderId = "A200"
#   ?OrderIndex = 1
#   ?OrderJson = """{"orderId":"A200","shipTo":{"country":"US"},"customer":{"email":"bob@example.org","vatId":null},"lines":[{"sku":"WID-001","qty":2,"unitCents":999},{"sku":"GAD-002","qty":1,"unitCents":1500}],"declared":{"netCents":3498,"vatCents":0,"grossCents":3498}}"""^^rdf:JSON
#   ?OrderUriStr = "urn:example:order:A200"
#   ?Orders = ("""{"orderId":"A100","shipTo":{"country":"BE"},"customer":{"email":"Ada@Example.ORG","vatId":null},"lines":[{"sku":"wid-001","qty":2,"unitCents":999},{"sku":"GAD-002","qty":1,"unitCents":1500}],"declared":{"netCents":3498,"vatCents":509,"grossCents":4007}}"""^^rdf:JSON """{"orderId":"A200","shipTo":{"country":"US"},"customer":{"email":"bob@example.org","vatId":null},"lines":[{"sku":"WID-001","qty":2,"unitCents":999},{"sku":"GAD-002","qty":1,"unitCents":1500}],"declared":{"netCents":3498,"vatCents":0,"grossCents":3498}}"""^^rdf:JSON """{"orderId":"A300","shipTo":{"country":"NL"},"customer":{"email":"acct@company.nl","vatId":"NL999999999B01"},"lines":[{"sku":"WID-001","qty":2,"unitCents":999},{"sku":"GAD-002","qty":1,"unitCents":1500}],"declared":{"netCents":3498,"vatCents":0,"grossCents":3498}}"""^^rdf:JSON """{"orderId":"A301","shipTo":{"country":"NL"},"customer":{"email":"billing@company.nl","vatId":"NL999999999B01"},"lines":[{"sku":"WID-001","qty":2,"unitCents":999},{"sku":"GAD-002","qty":1,"unitCents":1500}],"declared":{"netCents":3498,"vatCents":0,"grossCents":3498}}"""^^rdf:JSON """{"orderId":"A400","shipTo":{"country":"BE"},"customer":{"email":"ada@other.example","vatId":null},"lines":[{"sku":"WID-001","qty":2,"unitCents":999},{"sku":"GAD-002","qty":1,"unitCents":1500}],"declared":{"netCents":3498,"vatCents":508,"grossCents":4006}}"""^^rdf:JSON)
#   ?Product = ex:Gadget
#   ?Qty = 1
#   ?SkuCat = "GAD-002"
#   ?SkuJson = "GAD-002"
#   ?UnitCents = 1500
# Therefore the derived triple above is entailed by the rules and facts.
# ----------------------------------------------------------------------

<urn:example:order:A200#line:1> ex:lineIndex 1 .

# ----------------------------------------------------------------------
# Proof for derived triple:
#   <urn:example:order:A200#line:1> ex:product ex:Gadget .
# It holds because the following instance of the rule body is provable:
#   ex:feed ex:json """{
#     "meta~data": { "batch": "2025-12-18" },
#     "orders": [
#       {
#         "orderId": "A100",
#         "shipTo": { "country": "BE" },
#         "customer": { "email": "Ada@Example.ORG", "vatId": null },
#         "lines": [
#           { "sku": "wid-001", "qty": 2, "unitCents": 999 },
#           { "sku": "GAD-002", "qty": 1, "unitCents": 1500 }
#         ],
#         "declared": { "netCents": 3498, "vatCents": 509, "grossCents": 4007 }
#       },
#       {
#         "orderId": "A200",
#         "shipTo": { "country": "US" },
#         "customer": { "email": "bob@example.org", "vatId": null },
#         "lines": [
#           { "sku": "WID-001", "qty": 2, "unitCents": 999 },
#           { "sku": "GAD-002", "qty": 1, "unitCents": 1500 }
#         ],
#         "declared": { "netCents": 3498, "vatCents": 0, "grossCents": 3498 }
#       },
#       {
#         "orderId": "A300",
#         "shipTo": { "country": "NL" },
#         "customer": { "email": "acct@company.nl", "vatId": "NL999999999B01" },
#         "lines": [
#           { "sku": "WID-001", "qty": 2, "unitCents": 999 },
#           { "sku": "GAD-002", "qty": 1, "unitCents": 1500 }
#         ],
#         "declared": { "netCents": 3498, "vatCents": 0, "grossCents": 3498 }
#       },
#       {
#         "orderId": "A301",
#         "shipTo": { "country": "NL" },
#         "customer": { "email": "billing@company.nl", "vatId": "NL999999999B01" },
#         "lines": [
#           { "sku": "WID-001", "qty": 2, "unitCents": 999 },
#           { "sku": "GAD-002", "qty": 1, "unitCents": 1500 }
#         ],
#         "declared": { "netCents": 3498, "vatCents": 0, "grossCents": 3498 }
#       },
#       {
#         "orderId": "A400",
#         "shipTo": { "country": "BE" },
#         "customer": { "email": "ada@other.example", "vatId": null },
#         "lines": [
#           { "sku": "WID-001", "qty": 2, "unitCents": 999 },
#           { "sku": "GAD-002", "qty": 1, "unitCents": 1500 }
#         ],
#         "declared": { "netCents": 3498, "vatCents": 508, "grossCents": 4006 }
#       }
#     ]
#   }"""^^rdf:JSON .
#   ("""{
#     "meta~data": { "batch": "2025-12-18" },
#     "orders": [
#       {
#         "orderId": "A100",
#         "shipTo": { "country": "BE" },
#         "customer": { "email": "Ada@Example.ORG", "vatId": null },
#         "lines": [
#           { "sku": "wid-001", "qty": 2, "unitCents": 999 },
#           { "sku": "GAD-002", "qty": 1, "unitCents": 1500 }
#         ],
#         "declared": { "netCents": 3498, "vatCents": 509, "grossCents": 4007 }
#       },
#       {
#         "orderId": "A200",
#         "shipTo": { "country": "US" },
#         "customer": { "email": "bob@example.org", "vatId": null },
#         "lines": [
#           { "sku": "WID-001", "qty": 2, "unitCents": 999 },
#           { "sku": "GAD-002", "qty": 1, "unitCents": 1500 }
#         ],
#         "declared": { "netCents": 3498, "vatCents": 0, "grossCents": 3498 }
#       },
#       {
#         "orderId": "A300",
#         "shipTo": { "country": "NL" },
#         "customer": { "email": "acct@company.nl", "vatId": "NL999999999B01" },
#         "lines": [
#           { "sku": "WID-001", "qty": 2, "unitCents": 999 },
#           { "sku": "GAD-002", "qty": 1, "unitCents": 1500 }
#         ],
#         "declared": { "netCents": 3498, "vatCents": 0, "grossCents": 3498 }
#       },
#       {
#         "orderId": "A301",
#         "shipTo": { "country": "NL" },
#         "customer": { "email": "billing@company.nl", "vatId": "NL999999999B01" },
#         "lines": [
#           { "sku": "WID-001", "qty": 2, "unitCents": 999 },
#           { "sku": "GAD-002", "qty": 1, "unitCents": 1500 }
#         ],
#         "declared": { "netCents": 3498, "vatCents": 0, "grossCents": 3498 }
#       },
#       {
#         "orderId": "A400",
#         "shipTo": { "country": "BE" },
#         "customer": { "email": "ada@other.example", "vatId": null },
#         "lines": [
#           { "sku": "WID-001", "qty": 2, "unitCents": 999 },
#           { "sku": "GAD-002", "qty": 1, "unitCents": 1500 }
#         ],
#         "declared": { "netCents": 3498, "vatCents": 508, "grossCents": 4006 }
#       }
#     ]
#   }"""^^rdf:JSON "/orders") string:jsonPointer ("""{"orderId":"A100","shipTo":{"country":"BE"},"customer":{"email":"Ada@Example.ORG","vatId":null},"lines":[{"sku":"wid-001","qty":2,"unitCents":999},{"sku":"GAD-002","qty":1,"unitCents":1500}],"declared":{"netCents":3498,"vatCents":509,"grossCents":4007}}"""^^rdf:JSON """{"orderId":"A200","shipTo":{"country":"US"},"customer":{"email":"bob@example.org","vatId":null},"lines":[{"sku":"WID-001","qty":2,"unitCents":999},{"sku":"GAD-002","qty":1,"unitCents":1500}],"declared":{"netCents":3498,"vatCents":0,"grossCents":3498}}"""^^rdf:JSON """{"orderId":"A300","shipTo":{"country":"NL"},"customer":{"email":"acct@company.nl","vatId":"NL999999999B01"},"lines":[{"sku":"WID-001","qty":2,"unitCents":999},{"sku":"GAD-002","qty":1,"unitCents":1500}],"declared":{"netCents":3498,"vatCents":0,"grossCents":3498}}"""^^rdf:JSON """{"orderId":"A301","shipTo":{"country":"NL"},"customer":{"email":"billing@company.nl","vatId":"NL999999999B01"},"lines":[{"sku":"WID-001","qty":2,"unitCents":999},{"sku":"GAD-002","qty":1,"unitCents":1500}],"declared":{"netCents":3498,"vatCents":0,"grossCents":3498}}"""^^rdf:JSON """{"orderId":"A400","shipTo":{"country":"BE"},"customer":{"email":"ada@other.example","vatId":null},"lines":[{"sku":"WID-001","qty":2,"unitCents":999},{"sku":"GAD-002","qty":1,"unitCents":1500}],"declared":{"netCents":3498,"vatCents":508,"grossCents":4006}}"""^^rdf:JSON) .
#   ("""{"orderId":"A100","shipTo":{"country":"BE"},"customer":{"email":"Ada@Example.ORG","vatId":null},"lines":[{"sku":"wid-001","qty":2,"unitCents":999},{"sku":"GAD-002","qty":1,"unitCents":1500}],"declared":{"netCents":3498,"vatCents":509,"grossCents":4007}}"""^^rdf:JSON """{"orderId":"A200","shipTo":{"country":"US"},"customer":{"email":"bob@example.org","vatId":null},"lines":[{"sku":"WID-001","qty":2,"unitCents":999},{"sku":"GAD-002","qty":1,"unitCents":1500}],"declared":{"netCents":3498,"vatCents":0,"grossCents":3498}}"""^^rdf:JSON """{"orderId":"A300","shipTo":{"country":"NL"},"customer":{"email":"acct@company.nl","vatId":"NL999999999B01"},"lines":[{"sku":"WID-001","qty":2,"unitCents":999},{"sku":"GAD-002","qty":1,"unitCents":1500}],"declared":{"netCents":3498,"vatCents":0,"grossCents":3498}}"""^^rdf:JSON """{"orderId":"A301","shipTo":{"country":"NL"},"customer":{"email":"billing@company.nl","vatId":"NL999999999B01"},"lines":[{"sku":"WID-001","qty":2,"unitCents":999},{"sku":"GAD-002","qty":1,"unitCents":1500}],"declared":{"netCents":3498,"vatCents":0,"grossCents":3498}}"""^^rdf:JSON """{"orderId":"A400","shipTo":{"country":"BE"},"customer":{"email":"ada@other.example","vatId":null},"lines":[{"sku":"WID-001","qty":2,"unitCents":999},{"sku":"GAD-002","qty":1,"unitCents":1500}],"declared":{"netCents":3498,"vatCents":508,"grossCents":4006}}"""^^rdf:JSON) list:iterate (1 """{"orderId":"A200","shipTo":{"country":"US"},"customer":{"email":"bob@example.org","vatId":null},"lines":[{"sku":"WID-001","qty":2,"unitCents":999},{"sku":"GAD-002","qty":1,"unitCents":1500}],"declared":{"netCents":3498,"vatCents":0,"grossCents":3498}}"""^^rdf:JSON) .
#   ("""{"orderId":"A200","shipTo":{"country":"US"},"customer":{"email":"bob@example.org","vatId":null},"lines":[{"sku":"WID-001","qty":2,"unitCents":999},{"sku":"GAD-002","qty":1,"unitCents":1500}],"declared":{"netCents":3498,"vatCents":0,"grossCents":3498}}"""^^rdf:JSON "/orderId") string:jsonPointer "A200" .
#   ("urn:example:order:%s" "A200") string:format "urn:example:order:A200" .
#   <urn:example:order:A200> log:uri "urn:example:order:A200" .
#   ("""{"orderId":"A200","shipTo":{"country":"US"},"customer":{"email":"bob@example.org","vatId":null},"lines":[{"sku":"WID-001","qty":2,"unitCents":999},{"sku":"GAD-002","qty":1,"unitCents":1500}],"declared":{"netCents":3498,"vatCents":0,"grossCents":3498}}"""^^rdf:JSON "/lines") string:jsonPointer ("""{"sku":"WID-001","qty":2,"unitCents":999}"""^^rdf:JSON """{"sku":"GAD-002","qty":1,"unitCents":1500}"""^^rdf:JSON) .
#   ("""{"sku":"WID-001","qty":2,"unitCents":999}"""^^rdf:JSON """{"sku":"GAD-002","qty":1,"unitCents":1500}"""^^rdf:JSON) list:iterate (1 """{"sku":"GAD-002","qty":1,"unitCents":1500}"""^^rdf:JSON) .
#   ("""{"sku":"GAD-002","qty":1,"unitCents":1500}"""^^rdf:JSON "/sku") string:jsonPointer "GAD-002" .
#   ("""{"sku":"GAD-002","qty":1,"unitCents":1500}"""^^rdf:JSON "/qty") string:jsonPointer 1 .
#   ("""{"sku":"GAD-002","qty":1,"unitCents":1500}"""^^rdf:JSON "/unitCents") string:jsonPointer 1500 .
#   ex:Gadget a ex:Product .
#   ex:Gadget ex:sku "GAD-002" .
#   (1 1500) math:product 1500 .
#   ("urn:example:order:%s#line:%s" "A200" 1) string:format "urn:example:order:A200#line:1" .
#   <urn:example:order:A200#line:1> log:uri "urn:example:order:A200#line:1" .
#   "GAD-002" string:equalIgnoringCase "GAD-002" .
# via the schematic forward rule:
#   {
#     ex:feed ex:json ?J .
#     (?J "/orders") string:jsonPointer ?Orders .
#     ?Orders list:iterate (?OrderIndex ?OrderJson) .
#     (?OrderJson "/orderId") string:jsonPointer ?OrderId .
#     ("urn:example:order:%s" ?OrderId) string:format ?OrderUriStr .
#     ?Order log:uri ?OrderUriStr .
#     (?OrderJson "/lines") string:jsonPointer ?Lines .
#     ?Lines list:iterate (?LineIndex ?LineJson) .
#     (?LineJson "/sku") string:jsonPointer ?SkuJson .
#     (?LineJson "/qty") string:jsonPointer ?Qty .
#     (?LineJson "/unitCents") string:jsonPointer ?UnitCents .
#     ?Product a ex:Product .
#     ?Product ex:sku ?SkuCat .
#     (?Qty ?UnitCents) math:product ?NetCents .
#     ("urn:example:order:%s#line:%s" ?OrderId ?LineIndex) string:format ?LineUriStr .
#     ?Line log:uri ?LineUriStr .
#     ?SkuJson string:equalIgnoringCase ?SkuCat .
#   } => {
#     ?Order ex:line ?Line .
#     ?Line a ex:OrderLine .
#     ?Line ex:lineIndex ?LineIndex .
#     ?Line ex:product ?Product .
#     ?Line ex:sku ?SkuCat .
#     ?Line ex:qty ?Qty .
#     ?Line ex:unitCents ?UnitCents .
#     ?Line ex:netCents ?NetCents .
#   } .
# with substitution (on rule variables):
#   ?J = """{
#     "meta~data": { "batch": "2025-12-18" },
#     "orders": [
#     {
#     "orderId": "A100",
#     "shipTo": { "country": "BE" },
#     "customer": { "email": "Ada@Example.ORG", "vatId": null },
#     "lines": [
#     { "sku": "wid-001", "qty": 2, "unitCents": 999 },
#     { "sku": "GAD-002", "qty": 1, "unitCents": 1500 }
#     ],
#     "declared": { "netCents": 3498, "vatCents": 509, "grossCents": 4007 }
#     },
#     {
#     "orderId": "A200",
#     "shipTo": { "country": "US" },
#     "customer": { "email": "bob@example.org", "vatId": null },
#     "lines": [
#     { "sku": "WID-001", "qty": 2, "unitCents": 999 },
#     { "sku": "GAD-002", "qty": 1, "unitCents": 1500 }
#     ],
#     "declared": { "netCents": 3498, "vatCents": 0, "grossCents": 3498 }
#     },
#     {
#     "orderId": "A300",
#     "shipTo": { "country": "NL" },
#     "customer": { "email": "acct@company.nl", "vatId": "NL999999999B01" },
#     "lines": [
#     { "sku": "WID-001", "qty": 2, "unitCents": 999 },
#     { "sku": "GAD-002", "qty": 1, "unitCents": 1500 }
#     ],
#     "declared": { "netCents": 3498, "vatCents": 0, "grossCents": 3498 }
#     },
#     {
#     "orderId": "A301",
#     "shipTo": { "country": "NL" },
#     "customer": { "email": "billing@company.nl", "vatId": "NL999999999B01" },
#     "lines": [
#     { "sku": "WID-001", "qty": 2, "unitCents": 999 },
#     { "sku": "GAD-002", "qty": 1, "unitCents": 1500 }
#     ],
#     "declared": { "netCents": 3498, "vatCents": 0, "grossCents": 3498 }
#     },
#     {
#     "orderId": "A400",
#     "shipTo": { "country": "BE" },
#     "customer": { "email": "ada@other.example", "vatId": null },
#     "lines": [
#     { "sku": "WID-001", "qty": 2, "unitCents": 999 },
#     { "sku": "GAD-002", "qty": 1, "unitCents": 1500 }
#     ],
#     "declared": { "netCents": 3498, "vatCents": 508, "grossCents": 4006 }
#     }
#     ]
#   }"""^^rdf:JSON
#   ?Line = <urn:example:order:A200#line:1>
#   ?LineIndex = 1
#   ?LineJson = """{"sku":"GAD-002","qty":1,"unitCents":1500}"""^^rdf:JSON
#   ?LineUriStr = "urn:example:order:A200#line:1"
#   ?Lines = ("""{"sku":"WID-001","qty":2,"unitCents":999}"""^^rdf:JSON """{"sku":"GAD-002","qty":1,"unitCents":1500}"""^^rdf:JSON)
#   ?NetCents = 1500
#   ?Order = <urn:example:order:A200>
#   ?OrderId = "A200"
#   ?OrderIndex = 1
#   ?OrderJson = """{"orderId":"A200","shipTo":{"country":"US"},"customer":{"email":"bob@example.org","vatId":null},"lines":[{"sku":"WID-001","qty":2,"unitCents":999},{"sku":"GAD-002","qty":1,"unitCents":1500}],"declared":{"netCents":3498,"vatCents":0,"grossCents":3498}}"""^^rdf:JSON
#   ?OrderUriStr = "urn:example:order:A200"
#   ?Orders = ("""{"orderId":"A100","shipTo":{"country":"BE"},"customer":{"email":"Ada@Example.ORG","vatId":null},"lines":[{"sku":"wid-001","qty":2,"unitCents":999},{"sku":"GAD-002","qty":1,"unitCents":1500}],"declared":{"netCents":3498,"vatCents":509,"grossCents":4007}}"""^^rdf:JSON """{"orderId":"A200","shipTo":{"country":"US"},"customer":{"email":"bob@example.org","vatId":null},"lines":[{"sku":"WID-001","qty":2,"unitCents":999},{"sku":"GAD-002","qty":1,"unitCents":1500}],"declared":{"netCents":3498,"vatCents":0,"grossCents":3498}}"""^^rdf:JSON """{"orderId":"A300","shipTo":{"country":"NL"},"customer":{"email":"acct@company.nl","vatId":"NL999999999B01"},"lines":[{"sku":"WID-001","qty":2,"unitCents":999},{"sku":"GAD-002","qty":1,"unitCents":1500}],"declared":{"netCents":3498,"vatCents":0,"grossCents":3498}}"""^^rdf:JSON """{"orderId":"A301","shipTo":{"country":"NL"},"customer":{"email":"billing@company.nl","vatId":"NL999999999B01"},"lines":[{"sku":"WID-001","qty":2,"unitCents":999},{"sku":"GAD-002","qty":1,"unitCents":1500}],"declared":{"netCents":3498,"vatCents":0,"grossCents":3498}}"""^^rdf:JSON """{"orderId":"A400","shipTo":{"country":"BE"},"customer":{"email":"ada@other.example","vatId":null},"lines":[{"sku":"WID-001","qty":2,"unitCents":999},{"sku":"GAD-002","qty":1,"unitCents":1500}],"declared":{"netCents":3498,"vatCents":508,"grossCents":4006}}"""^^rdf:JSON)
#   ?Product = ex:Gadget
#   ?Qty = 1
#   ?SkuCat = "GAD-002"
#   ?SkuJson = "GAD-002"
#   ?UnitCents = 1500
# Therefore the derived triple above is entailed by the rules and facts.
# ----------------------------------------------------------------------

<urn:example:order:A200#line:1> ex:product ex:Gadget .

# ----------------------------------------------------------------------
# Proof for derived triple:
#   <urn:example:order:A200#line:1> ex:sku "GAD-002" .
# It holds because the following instance of the rule body is provable:
#   ex:feed ex:json """{
#     "meta~data": { "batch": "2025-12-18" },
#     "orders": [
#       {
#         "orderId": "A100",
#         "shipTo": { "country": "BE" },
#         "customer": { "email": "Ada@Example.ORG", "vatId": null },
#         "lines": [
#           { "sku": "wid-001", "qty": 2, "unitCents": 999 },
#           { "sku": "GAD-002", "qty": 1, "unitCents": 1500 }
#         ],
#         "declared": { "netCents": 3498, "vatCents": 509, "grossCents": 4007 }
#       },
#       {
#         "orderId": "A200",
#         "shipTo": { "country": "US" },
#         "customer": { "email": "bob@example.org", "vatId": null },
#         "lines": [
#           { "sku": "WID-001", "qty": 2, "unitCents": 999 },
#           { "sku": "GAD-002", "qty": 1, "unitCents": 1500 }
#         ],
#         "declared": { "netCents": 3498, "vatCents": 0, "grossCents": 3498 }
#       },
#       {
#         "orderId": "A300",
#         "shipTo": { "country": "NL" },
#         "customer": { "email": "acct@company.nl", "vatId": "NL999999999B01" },
#         "lines": [
#           { "sku": "WID-001", "qty": 2, "unitCents": 999 },
#           { "sku": "GAD-002", "qty": 1, "unitCents": 1500 }
#         ],
#         "declared": { "netCents": 3498, "vatCents": 0, "grossCents": 3498 }
#       },
#       {
#         "orderId": "A301",
#         "shipTo": { "country": "NL" },
#         "customer": { "email": "billing@company.nl", "vatId": "NL999999999B01" },
#         "lines": [
#           { "sku": "WID-001", "qty": 2, "unitCents": 999 },
#           { "sku": "GAD-002", "qty": 1, "unitCents": 1500 }
#         ],
#         "declared": { "netCents": 3498, "vatCents": 0, "grossCents": 3498 }
#       },
#       {
#         "orderId": "A400",
#         "shipTo": { "country": "BE" },
#         "customer": { "email": "ada@other.example", "vatId": null },
#         "lines": [
#           { "sku": "WID-001", "qty": 2, "unitCents": 999 },
#           { "sku": "GAD-002", "qty": 1, "unitCents": 1500 }
#         ],
#         "declared": { "netCents": 3498, "vatCents": 508, "grossCents": 4006 }
#       }
#     ]
#   }"""^^rdf:JSON .
#   ("""{
#     "meta~data": { "batch": "2025-12-18" },
#     "orders": [
#       {
#         "orderId": "A100",
#         "shipTo": { "country": "BE" },
#         "customer": { "email": "Ada@Example.ORG", "vatId": null },
#         "lines": [
#           { "sku": "wid-001", "qty": 2, "unitCents": 999 },
#           { "sku": "GAD-002", "qty": 1, "unitCents": 1500 }
#         ],
#         "declared": { "netCents": 3498, "vatCents": 509, "grossCents": 4007 }
#       },
#       {
#         "orderId": "A200",
#         "shipTo": { "country": "US" },
#         "customer": { "email": "bob@example.org", "vatId": null },
#         "lines": [
#           { "sku": "WID-001", "qty": 2, "unitCents": 999 },
#           { "sku": "GAD-002", "qty": 1, "unitCents": 1500 }
#         ],
#         "declared": { "netCents": 3498, "vatCents": 0, "grossCents": 3498 }
#       },
#       {
#         "orderId": "A300",
#         "shipTo": { "country": "NL" },
#         "customer": { "email": "acct@company.nl", "vatId": "NL999999999B01" },
#         "lines": [
#           { "sku": "WID-001", "qty": 2, "unitCents": 999 },
#           { "sku": "GAD-002", "qty": 1, "unitCents": 1500 }
#         ],
#         "declared": { "netCents": 3498, "vatCents": 0, "grossCents": 3498 }
#       },
#       {
#         "orderId": "A301",
#         "shipTo": { "country": "NL" },
#         "customer": { "email": "billing@company.nl", "vatId": "NL999999999B01" },
#         "lines": [
#           { "sku": "WID-001", "qty": 2, "unitCents": 999 },
#           { "sku": "GAD-002", "qty": 1, "unitCents": 1500 }
#         ],
#         "declared": { "netCents": 3498, "vatCents": 0, "grossCents": 3498 }
#       },
#       {
#         "orderId": "A400",
#         "shipTo": { "country": "BE" },
#         "customer": { "email": "ada@other.example", "vatId": null },
#         "lines": [
#           { "sku": "WID-001", "qty": 2, "unitCents": 999 },
#           { "sku": "GAD-002", "qty": 1, "unitCents": 1500 }
#         ],
#         "declared": { "netCents": 3498, "vatCents": 508, "grossCents": 4006 }
#       }
#     ]
#   }"""^^rdf:JSON "/orders") string:jsonPointer ("""{"orderId":"A100","shipTo":{"country":"BE"},"customer":{"email":"Ada@Example.ORG","vatId":null},"lines":[{"sku":"wid-001","qty":2,"unitCents":999},{"sku":"GAD-002","qty":1,"unitCents":1500}],"declared":{"netCents":3498,"vatCents":509,"grossCents":4007}}"""^^rdf:JSON """{"orderId":"A200","shipTo":{"country":"US"},"customer":{"email":"bob@example.org","vatId":null},"lines":[{"sku":"WID-001","qty":2,"unitCents":999},{"sku":"GAD-002","qty":1,"unitCents":1500}],"declared":{"netCents":3498,"vatCents":0,"grossCents":3498}}"""^^rdf:JSON """{"orderId":"A300","shipTo":{"country":"NL"},"customer":{"email":"acct@company.nl","vatId":"NL999999999B01"},"lines":[{"sku":"WID-001","qty":2,"unitCents":999},{"sku":"GAD-002","qty":1,"unitCents":1500}],"declared":{"netCents":3498,"vatCents":0,"grossCents":3498}}"""^^rdf:JSON """{"orderId":"A301","shipTo":{"country":"NL"},"customer":{"email":"billing@company.nl","vatId":"NL999999999B01"},"lines":[{"sku":"WID-001","qty":2,"unitCents":999},{"sku":"GAD-002","qty":1,"unitCents":1500}],"declared":{"netCents":3498,"vatCents":0,"grossCents":3498}}"""^^rdf:JSON """{"orderId":"A400","shipTo":{"country":"BE"},"customer":{"email":"ada@other.example","vatId":null},"lines":[{"sku":"WID-001","qty":2,"unitCents":999},{"sku":"GAD-002","qty":1,"unitCents":1500}],"declared":{"netCents":3498,"vatCents":508,"grossCents":4006}}"""^^rdf:JSON) .
#   ("""{"orderId":"A100","shipTo":{"country":"BE"},"customer":{"email":"Ada@Example.ORG","vatId":null},"lines":[{"sku":"wid-001","qty":2,"unitCents":999},{"sku":"GAD-002","qty":1,"unitCents":1500}],"declared":{"netCents":3498,"vatCents":509,"grossCents":4007}}"""^^rdf:JSON """{"orderId":"A200","shipTo":{"country":"US"},"customer":{"email":"bob@example.org","vatId":null},"lines":[{"sku":"WID-001","qty":2,"unitCents":999},{"sku":"GAD-002","qty":1,"unitCents":1500}],"declared":{"netCents":3498,"vatCents":0,"grossCents":3498}}"""^^rdf:JSON """{"orderId":"A300","shipTo":{"country":"NL"},"customer":{"email":"acct@company.nl","vatId":"NL999999999B01"},"lines":[{"sku":"WID-001","qty":2,"unitCents":999},{"sku":"GAD-002","qty":1,"unitCents":1500}],"declared":{"netCents":3498,"vatCents":0,"grossCents":3498}}"""^^rdf:JSON """{"orderId":"A301","shipTo":{"country":"NL"},"customer":{"email":"billing@company.nl","vatId":"NL999999999B01"},"lines":[{"sku":"WID-001","qty":2,"unitCents":999},{"sku":"GAD-002","qty":1,"unitCents":1500}],"declared":{"netCents":3498,"vatCents":0,"grossCents":3498}}"""^^rdf:JSON """{"orderId":"A400","shipTo":{"country":"BE"},"customer":{"email":"ada@other.example","vatId":null},"lines":[{"sku":"WID-001","qty":2,"unitCents":999},{"sku":"GAD-002","qty":1,"unitCents":1500}],"declared":{"netCents":3498,"vatCents":508,"grossCents":4006}}"""^^rdf:JSON) list:iterate (1 """{"orderId":"A200","shipTo":{"country":"US"},"customer":{"email":"bob@example.org","vatId":null},"lines":[{"sku":"WID-001","qty":2,"unitCents":999},{"sku":"GAD-002","qty":1,"unitCents":1500}],"declared":{"netCents":3498,"vatCents":0,"grossCents":3498}}"""^^rdf:JSON) .
#   ("""{"orderId":"A200","shipTo":{"country":"US"},"customer":{"email":"bob@example.org","vatId":null},"lines":[{"sku":"WID-001","qty":2,"unitCents":999},{"sku":"GAD-002","qty":1,"unitCents":1500}],"declared":{"netCents":3498,"vatCents":0,"grossCents":3498}}"""^^rdf:JSON "/orderId") string:jsonPointer "A200" .
#   ("urn:example:order:%s" "A200") string:format "urn:example:order:A200" .
#   <urn:example:order:A200> log:uri "urn:example:order:A200" .
#   ("""{"orderId":"A200","shipTo":{"country":"US"},"customer":{"email":"bob@example.org","vatId":null},"lines":[{"sku":"WID-001","qty":2,"unitCents":999},{"sku":"GAD-002","qty":1,"unitCents":1500}],"declared":{"netCents":3498,"vatCents":0,"grossCents":3498}}"""^^rdf:JSON "/lines") string:jsonPointer ("""{"sku":"WID-001","qty":2,"unitCents":999}"""^^rdf:JSON """{"sku":"GAD-002","qty":1,"unitCents":1500}"""^^rdf:JSON) .
#   ("""{"sku":"WID-001","qty":2,"unitCents":999}"""^^rdf:JSON """{"sku":"GAD-002","qty":1,"unitCents":1500}"""^^rdf:JSON) list:iterate (1 """{"sku":"GAD-002","qty":1,"unitCents":1500}"""^^rdf:JSON) .
#   ("""{"sku":"GAD-002","qty":1,"unitCents":1500}"""^^rdf:JSON "/sku") string:jsonPointer "GAD-002" .
#   ("""{"sku":"GAD-002","qty":1,"unitCents":1500}"""^^rdf:JSON "/qty") string:jsonPointer 1 .
#   ("""{"sku":"GAD-002","qty":1,"unitCents":1500}"""^^rdf:JSON "/unitCents") string:jsonPointer 1500 .
#   ex:Gadget a ex:Product .
#   ex:Gadget ex:sku "GAD-002" .
#   (1 1500) math:product 1500 .
#   ("urn:example:order:%s#line:%s" "A200" 1) string:format "urn:example:order:A200#line:1" .
#   <urn:example:order:A200#line:1> log:uri "urn:example:order:A200#line:1" .
#   "GAD-002" string:equalIgnoringCase "GAD-002" .
# via the schematic forward rule:
#   {
#     ex:feed ex:json ?J .
#     (?J "/orders") string:jsonPointer ?Orders .
#     ?Orders list:iterate (?OrderIndex ?OrderJson) .
#     (?OrderJson "/orderId") string:jsonPointer ?OrderId .
#     ("urn:example:order:%s" ?OrderId) string:format ?OrderUriStr .
#     ?Order log:uri ?OrderUriStr .
#     (?OrderJson "/lines") string:jsonPointer ?Lines .
#     ?Lines list:iterate (?LineIndex ?LineJson) .
#     (?LineJson "/sku") string:jsonPointer ?SkuJson .
#     (?LineJson "/qty") string:jsonPointer ?Qty .
#     (?LineJson "/unitCents") string:jsonPointer ?UnitCents .
#     ?Product a ex:Product .
#     ?Product ex:sku ?SkuCat .
#     (?Qty ?UnitCents) math:product ?NetCents .
#     ("urn:example:order:%s#line:%s" ?OrderId ?LineIndex) string:format ?LineUriStr .
#     ?Line log:uri ?LineUriStr .
#     ?SkuJson string:equalIgnoringCase ?SkuCat .
#   } => {
#     ?Order ex:line ?Line .
#     ?Line a ex:OrderLine .
#     ?Line ex:lineIndex ?LineIndex .
#     ?Line ex:product ?Product .
#     ?Line ex:sku ?SkuCat .
#     ?Line ex:qty ?Qty .
#     ?Line ex:unitCents ?UnitCents .
#     ?Line ex:netCents ?NetCents .
#   } .
# with substitution (on rule variables):
#   ?J = """{
#     "meta~data": { "batch": "2025-12-18" },
#     "orders": [
#     {
#     "orderId": "A100",
#     "shipTo": { "country": "BE" },
#     "customer": { "email": "Ada@Example.ORG", "vatId": null },
#     "lines": [
#     { "sku": "wid-001", "qty": 2, "unitCents": 999 },
#     { "sku": "GAD-002", "qty": 1, "unitCents": 1500 }
#     ],
#     "declared": { "netCents": 3498, "vatCents": 509, "grossCents": 4007 }
#     },
#     {
#     "orderId": "A200",
#     "shipTo": { "country": "US" },
#     "customer": { "email": "bob@example.org", "vatId": null },
#     "lines": [
#     { "sku": "WID-001", "qty": 2, "unitCents": 999 },
#     { "sku": "GAD-002", "qty": 1, "unitCents": 1500 }
#     ],
#     "declared": { "netCents": 3498, "vatCents": 0, "grossCents": 3498 }
#     },
#     {
#     "orderId": "A300",
#     "shipTo": { "country": "NL" },
#     "customer": { "email": "acct@company.nl", "vatId": "NL999999999B01" },
#     "lines": [
#     { "sku": "WID-001", "qty": 2, "unitCents": 999 },
#     { "sku": "GAD-002", "qty": 1, "unitCents": 1500 }
#     ],
#     "declared": { "netCents": 3498, "vatCents": 0, "grossCents": 3498 }
#     },
#     {
#     "orderId": "A301",
#     "shipTo": { "country": "NL" },
#     "customer": { "email": "billing@company.nl", "vatId": "NL999999999B01" },
#     "lines": [
#     { "sku": "WID-001", "qty": 2, "unitCents": 999 },
#     { "sku": "GAD-002", "qty": 1, "unitCents": 1500 }
#     ],
#     "declared": { "netCents": 3498, "vatCents": 0, "grossCents": 3498 }
#     },
#     {
#     "orderId": "A400",
#     "shipTo": { "country": "BE" },
#     "customer": { "email": "ada@other.example", "vatId": null },
#     "lines": [
#     { "sku": "WID-001", "qty": 2, "unitCents": 999 },
#     { "sku": "GAD-002", "qty": 1, "unitCents": 1500 }
#     ],
#     "declared": { "netCents": 3498, "vatCents": 508, "grossCents": 4006 }
#     }
#     ]
#   }"""^^rdf:JSON
#   ?Line = <urn:example:order:A200#line:1>
#   ?LineIndex = 1
#   ?LineJson = """{"sku":"GAD-002","qty":1,"unitCents":1500}"""^^rdf:JSON
#   ?LineUriStr = "urn:example:order:A200#line:1"
#   ?Lines = ("""{"sku":"WID-001","qty":2,"unitCents":999}"""^^rdf:JSON """{"sku":"GAD-002","qty":1,"unitCents":1500}"""^^rdf:JSON)
#   ?NetCents = 1500
#   ?Order = <urn:example:order:A200>
#   ?OrderId = "A200"
#   ?OrderIndex = 1
#   ?OrderJson = """{"orderId":"A200","shipTo":{"country":"US"},"customer":{"email":"bob@example.org","vatId":null},"lines":[{"sku":"WID-001","qty":2,"unitCents":999},{"sku":"GAD-002","qty":1,"unitCents":1500}],"declared":{"netCents":3498,"vatCents":0,"grossCents":3498}}"""^^rdf:JSON
#   ?OrderUriStr = "urn:example:order:A200"
#   ?Orders = ("""{"orderId":"A100","shipTo":{"country":"BE"},"customer":{"email":"Ada@Example.ORG","vatId":null},"lines":[{"sku":"wid-001","qty":2,"unitCents":999},{"sku":"GAD-002","qty":1,"unitCents":1500}],"declared":{"netCents":3498,"vatCents":509,"grossCents":4007}}"""^^rdf:JSON """{"orderId":"A200","shipTo":{"country":"US"},"customer":{"email":"bob@example.org","vatId":null},"lines":[{"sku":"WID-001","qty":2,"unitCents":999},{"sku":"GAD-002","qty":1,"unitCents":1500}],"declared":{"netCents":3498,"vatCents":0,"grossCents":3498}}"""^^rdf:JSON """{"orderId":"A300","shipTo":{"country":"NL"},"customer":{"email":"acct@company.nl","vatId":"NL999999999B01"},"lines":[{"sku":"WID-001","qty":2,"unitCents":999},{"sku":"GAD-002","qty":1,"unitCents":1500}],"declared":{"netCents":3498,"vatCents":0,"grossCents":3498}}"""^^rdf:JSON """{"orderId":"A301","shipTo":{"country":"NL"},"customer":{"email":"billing@company.nl","vatId":"NL999999999B01"},"lines":[{"sku":"WID-001","qty":2,"unitCents":999},{"sku":"GAD-002","qty":1,"unitCents":1500}],"declared":{"netCents":3498,"vatCents":0,"grossCents":3498}}"""^^rdf:JSON """{"orderId":"A400","shipTo":{"country":"BE"},"customer":{"email":"ada@other.example","vatId":null},"lines":[{"sku":"WID-001","qty":2,"unitCents":999},{"sku":"GAD-002","qty":1,"unitCents":1500}],"declared":{"netCents":3498,"vatCents":508,"grossCents":4006}}"""^^rdf:JSON)
#   ?Product = ex:Gadget
#   ?Qty = 1
#   ?SkuCat = "GAD-002"
#   ?SkuJson = "GAD-002"
#   ?UnitCents = 1500
# Therefore the derived triple above is entailed by the rules and facts.
# ----------------------------------------------------------------------

<urn:example:order:A200#line:1> ex:sku "GAD-002" .

# ----------------------------------------------------------------------
# Proof for derived triple:
#   <urn:example:order:A200#line:1> ex:qty 1 .
# It holds because the following instance of the rule body is provable:
#   ex:feed ex:json """{
#     "meta~data": { "batch": "2025-12-18" },
#     "orders": [
#       {
#         "orderId": "A100",
#         "shipTo": { "country": "BE" },
#         "customer": { "email": "Ada@Example.ORG", "vatId": null },
#         "lines": [
#           { "sku": "wid-001", "qty": 2, "unitCents": 999 },
#           { "sku": "GAD-002", "qty": 1, "unitCents": 1500 }
#         ],
#         "declared": { "netCents": 3498, "vatCents": 509, "grossCents": 4007 }
#       },
#       {
#         "orderId": "A200",
#         "shipTo": { "country": "US" },
#         "customer": { "email": "bob@example.org", "vatId": null },
#         "lines": [
#           { "sku": "WID-001", "qty": 2, "unitCents": 999 },
#           { "sku": "GAD-002", "qty": 1, "unitCents": 1500 }
#         ],
#         "declared": { "netCents": 3498, "vatCents": 0, "grossCents": 3498 }
#       },
#       {
#         "orderId": "A300",
#         "shipTo": { "country": "NL" },
#         "customer": { "email": "acct@company.nl", "vatId": "NL999999999B01" },
#         "lines": [
#           { "sku": "WID-001", "qty": 2, "unitCents": 999 },
#           { "sku": "GAD-002", "qty": 1, "unitCents": 1500 }
#         ],
#         "declared": { "netCents": 3498, "vatCents": 0, "grossCents": 3498 }
#       },
#       {
#         "orderId": "A301",
#         "shipTo": { "country": "NL" },
#         "customer": { "email": "billing@company.nl", "vatId": "NL999999999B01" },
#         "lines": [
#           { "sku": "WID-001", "qty": 2, "unitCents": 999 },
#           { "sku": "GAD-002", "qty": 1, "unitCents": 1500 }
#         ],
#         "declared": { "netCents": 3498, "vatCents": 0, "grossCents": 3498 }
#       },
#       {
#         "orderId": "A400",
#         "shipTo": { "country": "BE" },
#         "customer": { "email": "ada@other.example", "vatId": null },
#         "lines": [
#           { "sku": "WID-001", "qty": 2, "unitCents": 999 },
#           { "sku": "GAD-002", "qty": 1, "unitCents": 1500 }
#         ],
#         "declared": { "netCents": 3498, "vatCents": 508, "grossCents": 4006 }
#       }
#     ]
#   }"""^^rdf:JSON .
#   ("""{
#     "meta~data": { "batch": "2025-12-18" },
#     "orders": [
#       {
#         "orderId": "A100",
#         "shipTo": { "country": "BE" },
#         "customer": { "email": "Ada@Example.ORG", "vatId": null },
#         "lines": [
#           { "sku": "wid-001", "qty": 2, "unitCents": 999 },
#           { "sku": "GAD-002", "qty": 1, "unitCents": 1500 }
#         ],
#         "declared": { "netCents": 3498, "vatCents": 509, "grossCents": 4007 }
#       },
#       {
#         "orderId": "A200",
#         "shipTo": { "country": "US" },
#         "customer": { "email": "bob@example.org", "vatId": null },
#         "lines": [
#           { "sku": "WID-001", "qty": 2, "unitCents": 999 },
#           { "sku": "GAD-002", "qty": 1, "unitCents": 1500 }
#         ],
#         "declared": { "netCents": 3498, "vatCents": 0, "grossCents": 3498 }
#       },
#       {
#         "orderId": "A300",
#         "shipTo": { "country": "NL" },
#         "customer": { "email": "acct@company.nl", "vatId": "NL999999999B01" },
#         "lines": [
#           { "sku": "WID-001", "qty": 2, "unitCents": 999 },
#           { "sku": "GAD-002", "qty": 1, "unitCents": 1500 }
#         ],
#         "declared": { "netCents": 3498, "vatCents": 0, "grossCents": 3498 }
#       },
#       {
#         "orderId": "A301",
#         "shipTo": { "country": "NL" },
#         "customer": { "email": "billing@company.nl", "vatId": "NL999999999B01" },
#         "lines": [
#           { "sku": "WID-001", "qty": 2, "unitCents": 999 },
#           { "sku": "GAD-002", "qty": 1, "unitCents": 1500 }
#         ],
#         "declared": { "netCents": 3498, "vatCents": 0, "grossCents": 3498 }
#       },
#       {
#         "orderId": "A400",
#         "shipTo": { "country": "BE" },
#         "customer": { "email": "ada@other.example", "vatId": null },
#         "lines": [
#           { "sku": "WID-001", "qty": 2, "unitCents": 999 },
#           { "sku": "GAD-002", "qty": 1, "unitCents": 1500 }
#         ],
#         "declared": { "netCents": 3498, "vatCents": 508, "grossCents": 4006 }
#       }
#     ]
#   }"""^^rdf:JSON "/orders") string:jsonPointer ("""{"orderId":"A100","shipTo":{"country":"BE"},"customer":{"email":"Ada@Example.ORG","vatId":null},"lines":[{"sku":"wid-001","qty":2,"unitCents":999},{"sku":"GAD-002","qty":1,"unitCents":1500}],"declared":{"netCents":3498,"vatCents":509,"grossCents":4007}}"""^^rdf:JSON """{"orderId":"A200","shipTo":{"country":"US"},"customer":{"email":"bob@example.org","vatId":null},"lines":[{"sku":"WID-001","qty":2,"unitCents":999},{"sku":"GAD-002","qty":1,"unitCents":1500}],"declared":{"netCents":3498,"vatCents":0,"grossCents":3498}}"""^^rdf:JSON """{"orderId":"A300","shipTo":{"country":"NL"},"customer":{"email":"acct@company.nl","vatId":"NL999999999B01"},"lines":[{"sku":"WID-001","qty":2,"unitCents":999},{"sku":"GAD-002","qty":1,"unitCents":1500}],"declared":{"netCents":3498,"vatCents":0,"grossCents":3498}}"""^^rdf:JSON """{"orderId":"A301","shipTo":{"country":"NL"},"customer":{"email":"billing@company.nl","vatId":"NL999999999B01"},"lines":[{"sku":"WID-001","qty":2,"unitCents":999},{"sku":"GAD-002","qty":1,"unitCents":1500}],"declared":{"netCents":3498,"vatCents":0,"grossCents":3498}}"""^^rdf:JSON """{"orderId":"A400","shipTo":{"country":"BE"},"customer":{"email":"ada@other.example","vatId":null},"lines":[{"sku":"WID-001","qty":2,"unitCents":999},{"sku":"GAD-002","qty":1,"unitCents":1500}],"declared":{"netCents":3498,"vatCents":508,"grossCents":4006}}"""^^rdf:JSON) .
#   ("""{"orderId":"A100","shipTo":{"country":"BE"},"customer":{"email":"Ada@Example.ORG","vatId":null},"lines":[{"sku":"wid-001","qty":2,"unitCents":999},{"sku":"GAD-002","qty":1,"unitCents":1500}],"declared":{"netCents":3498,"vatCents":509,"grossCents":4007}}"""^^rdf:JSON """{"orderId":"A200","shipTo":{"country":"US"},"customer":{"email":"bob@example.org","vatId":null},"lines":[{"sku":"WID-001","qty":2,"unitCents":999},{"sku":"GAD-002","qty":1,"unitCents":1500}],"declared":{"netCents":3498,"vatCents":0,"grossCents":3498}}"""^^rdf:JSON """{"orderId":"A300","shipTo":{"country":"NL"},"customer":{"email":"acct@company.nl","vatId":"NL999999999B01"},"lines":[{"sku":"WID-001","qty":2,"unitCents":999},{"sku":"GAD-002","qty":1,"unitCents":1500}],"declared":{"netCents":3498,"vatCents":0,"grossCents":3498}}"""^^rdf:JSON """{"orderId":"A301","shipTo":{"country":"NL"},"customer":{"email":"billing@company.nl","vatId":"NL999999999B01"},"lines":[{"sku":"WID-001","qty":2,"unitCents":999},{"sku":"GAD-002","qty":1,"unitCents":1500}],"declared":{"netCents":3498,"vatCents":0,"grossCents":3498}}"""^^rdf:JSON """{"orderId":"A400","shipTo":{"country":"BE"},"customer":{"email":"ada@other.example","vatId":null},"lines":[{"sku":"WID-001","qty":2,"unitCents":999},{"sku":"GAD-002","qty":1,"unitCents":1500}],"declared":{"netCents":3498,"vatCents":508,"grossCents":4006}}"""^^rdf:JSON) list:iterate (1 """{"orderId":"A200","shipTo":{"country":"US"},"customer":{"email":"bob@example.org","vatId":null},"lines":[{"sku":"WID-001","qty":2,"unitCents":999},{"sku":"GAD-002","qty":1,"unitCents":1500}],"declared":{"netCents":3498,"vatCents":0,"grossCents":3498}}"""^^rdf:JSON) .
#   ("""{"orderId":"A200","shipTo":{"country":"US"},"customer":{"email":"bob@example.org","vatId":null},"lines":[{"sku":"WID-001","qty":2,"unitCents":999},{"sku":"GAD-002","qty":1,"unitCents":1500}],"declared":{"netCents":3498,"vatCents":0,"grossCents":3498}}"""^^rdf:JSON "/orderId") string:jsonPointer "A200" .
#   ("urn:example:order:%s" "A200") string:format "urn:example:order:A200" .
#   <urn:example:order:A200> log:uri "urn:example:order:A200" .
#   ("""{"orderId":"A200","shipTo":{"country":"US"},"customer":{"email":"bob@example.org","vatId":null},"lines":[{"sku":"WID-001","qty":2,"unitCents":999},{"sku":"GAD-002","qty":1,"unitCents":1500}],"declared":{"netCents":3498,"vatCents":0,"grossCents":3498}}"""^^rdf:JSON "/lines") string:jsonPointer ("""{"sku":"WID-001","qty":2,"unitCents":999}"""^^rdf:JSON """{"sku":"GAD-002","qty":1,"unitCents":1500}"""^^rdf:JSON) .
#   ("""{"sku":"WID-001","qty":2,"unitCents":999}"""^^rdf:JSON """{"sku":"GAD-002","qty":1,"unitCents":1500}"""^^rdf:JSON) list:iterate (1 """{"sku":"GAD-002","qty":1,"unitCents":1500}"""^^rdf:JSON) .
#   ("""{"sku":"GAD-002","qty":1,"unitCents":1500}"""^^rdf:JSON "/sku") string:jsonPointer "GAD-002" .
#   ("""{"sku":"GAD-002","qty":1,"unitCents":1500}"""^^rdf:JSON "/qty") string:jsonPointer 1 .
#   ("""{"sku":"GAD-002","qty":1,"unitCents":1500}"""^^rdf:JSON "/unitCents") string:jsonPointer 1500 .
#   ex:Gadget a ex:Product .
#   ex:Gadget ex:sku "GAD-002" .
#   (1 1500) math:product 1500 .
#   ("urn:example:order:%s#line:%s" "A200" 1) string:format "urn:example:order:A200#line:1" .
#   <urn:example:order:A200#line:1> log:uri "urn:example:order:A200#line:1" .
#   "GAD-002" string:equalIgnoringCase "GAD-002" .
# via the schematic forward rule:
#   {
#     ex:feed ex:json ?J .
#     (?J "/orders") string:jsonPointer ?Orders .
#     ?Orders list:iterate (?OrderIndex ?OrderJson) .
#     (?OrderJson "/orderId") string:jsonPointer ?OrderId .
#     ("urn:example:order:%s" ?OrderId) string:format ?OrderUriStr .
#     ?Order log:uri ?OrderUriStr .
#     (?OrderJson "/lines") string:jsonPointer ?Lines .
#     ?Lines list:iterate (?LineIndex ?LineJson) .
#     (?LineJson "/sku") string:jsonPointer ?SkuJson .
#     (?LineJson "/qty") string:jsonPointer ?Qty .
#     (?LineJson "/unitCents") string:jsonPointer ?UnitCents .
#     ?Product a ex:Product .
#     ?Product ex:sku ?SkuCat .
#     (?Qty ?UnitCents) math:product ?NetCents .
#     ("urn:example:order:%s#line:%s" ?OrderId ?LineIndex) string:format ?LineUriStr .
#     ?Line log:uri ?LineUriStr .
#     ?SkuJson string:equalIgnoringCase ?SkuCat .
#   } => {
#     ?Order ex:line ?Line .
#     ?Line a ex:OrderLine .
#     ?Line ex:lineIndex ?LineIndex .
#     ?Line ex:product ?Product .
#     ?Line ex:sku ?SkuCat .
#     ?Line ex:qty ?Qty .
#     ?Line ex:unitCents ?UnitCents .
#     ?Line ex:netCents ?NetCents .
#   } .
# with substitution (on rule variables):
#   ?J = """{
#     "meta~data": { "batch": "2025-12-18" },
#     "orders": [
#     {
#     "orderId": "A100",
#     "shipTo": { "country": "BE" },
#     "customer": { "email": "Ada@Example.ORG", "vatId": null },
#     "lines": [
#     { "sku": "wid-001", "qty": 2, "unitCents": 999 },
#     { "sku": "GAD-002", "qty": 1, "unitCents": 1500 }
#     ],
#     "declared": { "netCents": 3498, "vatCents": 509, "grossCents": 4007 }
#     },
#     {
#     "orderId": "A200",
#     "shipTo": { "country": "US" },
#     "customer": { "email": "bob@example.org", "vatId": null },
#     "lines": [
#     { "sku": "WID-001", "qty": 2, "unitCents": 999 },
#     { "sku": "GAD-002", "qty": 1, "unitCents": 1500 }
#     ],
#     "declared": { "netCents": 3498, "vatCents": 0, "grossCents": 3498 }
#     },
#     {
#     "orderId": "A300",
#     "shipTo": { "country": "NL" },
#     "customer": { "email": "acct@company.nl", "vatId": "NL999999999B01" },
#     "lines": [
#     { "sku": "WID-001", "qty": 2, "unitCents": 999 },
#     { "sku": "GAD-002", "qty": 1, "unitCents": 1500 }
#     ],
#     "declared": { "netCents": 3498, "vatCents": 0, "grossCents": 3498 }
#     },
#     {
#     "orderId": "A301",
#     "shipTo": { "country": "NL" },
#     "customer": { "email": "billing@company.nl", "vatId": "NL999999999B01" },
#     "lines": [
#     { "sku": "WID-001", "qty": 2, "unitCents": 999 },
#     { "sku": "GAD-002", "qty": 1, "unitCents": 1500 }
#     ],
#     "declared": { "netCents": 3498, "vatCents": 0, "grossCents": 3498 }
#     },
#     {
#     "orderId": "A400",
#     "shipTo": { "country": "BE" },
#     "customer": { "email": "ada@other.example", "vatId": null },
#     "lines": [
#     { "sku": "WID-001", "qty": 2, "unitCents": 999 },
#     { "sku": "GAD-002", "qty": 1, "unitCents": 1500 }
#     ],
#     "declared": { "netCents": 3498, "vatCents": 508, "grossCents": 4006 }
#     }
#     ]
#   }"""^^rdf:JSON
#   ?Line = <urn:example:order:A200#line:1>
#   ?LineIndex = 1
#   ?LineJson = """{"sku":"GAD-002","qty":1,"unitCents":1500}"""^^rdf:JSON
#   ?LineUriStr = "urn:example:order:A200#line:1"
#   ?Lines = ("""{"sku":"WID-001","qty":2,"unitCents":999}"""^^rdf:JSON """{"sku":"GAD-002","qty":1,"unitCents":1500}"""^^rdf:JSON)
#   ?NetCents = 1500
#   ?Order = <urn:example:order:A200>
#   ?OrderId = "A200"
#   ?OrderIndex = 1
#   ?OrderJson = """{"orderId":"A200","shipTo":{"country":"US"},"customer":{"email":"bob@example.org","vatId":null},"lines":[{"sku":"WID-001","qty":2,"unitCents":999},{"sku":"GAD-002","qty":1,"unitCents":1500}],"declared":{"netCents":3498,"vatCents":0,"grossCents":3498}}"""^^rdf:JSON
#   ?OrderUriStr = "urn:example:order:A200"
#   ?Orders = ("""{"orderId":"A100","shipTo":{"country":"BE"},"customer":{"email":"Ada@Example.ORG","vatId":null},"lines":[{"sku":"wid-001","qty":2,"unitCents":999},{"sku":"GAD-002","qty":1,"unitCents":1500}],"declared":{"netCents":3498,"vatCents":509,"grossCents":4007}}"""^^rdf:JSON """{"orderId":"A200","shipTo":{"country":"US"},"customer":{"email":"bob@example.org","vatId":null},"lines":[{"sku":"WID-001","qty":2,"unitCents":999},{"sku":"GAD-002","qty":1,"unitCents":1500}],"declared":{"netCents":3498,"vatCents":0,"grossCents":3498}}"""^^rdf:JSON """{"orderId":"A300","shipTo":{"country":"NL"},"customer":{"email":"acct@company.nl","vatId":"NL999999999B01"},"lines":[{"sku":"WID-001","qty":2,"unitCents":999},{"sku":"GAD-002","qty":1,"unitCents":1500}],"declared":{"netCents":3498,"vatCents":0,"grossCents":3498}}"""^^rdf:JSON """{"orderId":"A301","shipTo":{"country":"NL"},"customer":{"email":"billing@company.nl","vatId":"NL999999999B01"},"lines":[{"sku":"WID-001","qty":2,"unitCents":999},{"sku":"GAD-002","qty":1,"unitCents":1500}],"declared":{"netCents":3498,"vatCents":0,"grossCents":3498}}"""^^rdf:JSON """{"orderId":"A400","shipTo":{"country":"BE"},"customer":{"email":"ada@other.example","vatId":null},"lines":[{"sku":"WID-001","qty":2,"unitCents":999},{"sku":"GAD-002","qty":1,"unitCents":1500}],"declared":{"netCents":3498,"vatCents":508,"grossCents":4006}}"""^^rdf:JSON)
#   ?Product = ex:Gadget
#   ?Qty = 1
#   ?SkuCat = "GAD-002"
#   ?SkuJson = "GAD-002"
#   ?UnitCents = 1500
# Therefore the derived triple above is entailed by the rules and facts.
# ----------------------------------------------------------------------

<urn:example:order:A200#line:1> ex:qty 1 .

# ----------------------------------------------------------------------
# Proof for derived triple:
#   <urn:example:order:A200#line:1> ex:unitCents 1500 .
# It holds because the following instance of the rule body is provable:
#   ex:feed ex:json """{
#     "meta~data": { "batch": "2025-12-18" },
#     "orders": [
#       {
#         "orderId": "A100",
#         "shipTo": { "country": "BE" },
#         "customer": { "email": "Ada@Example.ORG", "vatId": null },
#         "lines": [
#           { "sku": "wid-001", "qty": 2, "unitCents": 999 },
#           { "sku": "GAD-002", "qty": 1, "unitCents": 1500 }
#         ],
#         "declared": { "netCents": 3498, "vatCents": 509, "grossCents": 4007 }
#       },
#       {
#         "orderId": "A200",
#         "shipTo": { "country": "US" },
#         "customer": { "email": "bob@example.org", "vatId": null },
#         "lines": [
#           { "sku": "WID-001", "qty": 2, "unitCents": 999 },
#           { "sku": "GAD-002", "qty": 1, "unitCents": 1500 }
#         ],
#         "declared": { "netCents": 3498, "vatCents": 0, "grossCents": 3498 }
#       },
#       {
#         "orderId": "A300",
#         "shipTo": { "country": "NL" },
#         "customer": { "email": "acct@company.nl", "vatId": "NL999999999B01" },
#         "lines": [
#           { "sku": "WID-001", "qty": 2, "unitCents": 999 },
#           { "sku": "GAD-002", "qty": 1, "unitCents": 1500 }
#         ],
#         "declared": { "netCents": 3498, "vatCents": 0, "grossCents": 3498 }
#       },
#       {
#         "orderId": "A301",
#         "shipTo": { "country": "NL" },
#         "customer": { "email": "billing@company.nl", "vatId": "NL999999999B01" },
#         "lines": [
#           { "sku": "WID-001", "qty": 2, "unitCents": 999 },
#           { "sku": "GAD-002", "qty": 1, "unitCents": 1500 }
#         ],
#         "declared": { "netCents": 3498, "vatCents": 0, "grossCents": 3498 }
#       },
#       {
#         "orderId": "A400",
#         "shipTo": { "country": "BE" },
#         "customer": { "email": "ada@other.example", "vatId": null },
#         "lines": [
#           { "sku": "WID-001", "qty": 2, "unitCents": 999 },
#           { "sku": "GAD-002", "qty": 1, "unitCents": 1500 }
#         ],
#         "declared": { "netCents": 3498, "vatCents": 508, "grossCents": 4006 }
#       }
#     ]
#   }"""^^rdf:JSON .
#   ("""{
#     "meta~data": { "batch": "2025-12-18" },
#     "orders": [
#       {
#         "orderId": "A100",
#         "shipTo": { "country": "BE" },
#         "customer": { "email": "Ada@Example.ORG", "vatId": null },
#         "lines": [
#           { "sku": "wid-001", "qty": 2, "unitCents": 999 },
#           { "sku": "GAD-002", "qty": 1, "unitCents": 1500 }
#         ],
#         "declared": { "netCents": 3498, "vatCents": 509, "grossCents": 4007 }
#       },
#       {
#         "orderId": "A200",
#         "shipTo": { "country": "US" },
#         "customer": { "email": "bob@example.org", "vatId": null },
#         "lines": [
#           { "sku": "WID-001", "qty": 2, "unitCents": 999 },
#           { "sku": "GAD-002", "qty": 1, "unitCents": 1500 }
#         ],
#         "declared": { "netCents": 3498, "vatCents": 0, "grossCents": 3498 }
#       },
#       {
#         "orderId": "A300",
#         "shipTo": { "country": "NL" },
#         "customer": { "email": "acct@company.nl", "vatId": "NL999999999B01" },
#         "lines": [
#           { "sku": "WID-001", "qty": 2, "unitCents": 999 },
#           { "sku": "GAD-002", "qty": 1, "unitCents": 1500 }
#         ],
#         "declared": { "netCents": 3498, "vatCents": 0, "grossCents": 3498 }
#       },
#       {
#         "orderId": "A301",
#         "shipTo": { "country": "NL" },
#         "customer": { "email": "billing@company.nl", "vatId": "NL999999999B01" },
#         "lines": [
#           { "sku": "WID-001", "qty": 2, "unitCents": 999 },
#           { "sku": "GAD-002", "qty": 1, "unitCents": 1500 }
#         ],
#         "declared": { "netCents": 3498, "vatCents": 0, "grossCents": 3498 }
#       },
#       {
#         "orderId": "A400",
#         "shipTo": { "country": "BE" },
#         "customer": { "email": "ada@other.example", "vatId": null },
#         "lines": [
#           { "sku": "WID-001", "qty": 2, "unitCents": 999 },
#           { "sku": "GAD-002", "qty": 1, "unitCents": 1500 }
#         ],
#         "declared": { "netCents": 3498, "vatCents": 508, "grossCents": 4006 }
#       }
#     ]
#   }"""^^rdf:JSON "/orders") string:jsonPointer ("""{"orderId":"A100","shipTo":{"country":"BE"},"customer":{"email":"Ada@Example.ORG","vatId":null},"lines":[{"sku":"wid-001","qty":2,"unitCents":999},{"sku":"GAD-002","qty":1,"unitCents":1500}],"declared":{"netCents":3498,"vatCents":509,"grossCents":4007}}"""^^rdf:JSON """{"orderId":"A200","shipTo":{"country":"US"},"customer":{"email":"bob@example.org","vatId":null},"lines":[{"sku":"WID-001","qty":2,"unitCents":999},{"sku":"GAD-002","qty":1,"unitCents":1500}],"declared":{"netCents":3498,"vatCents":0,"grossCents":3498}}"""^^rdf:JSON """{"orderId":"A300","shipTo":{"country":"NL"},"customer":{"email":"acct@company.nl","vatId":"NL999999999B01"},"lines":[{"sku":"WID-001","qty":2,"unitCents":999},{"sku":"GAD-002","qty":1,"unitCents":1500}],"declared":{"netCents":3498,"vatCents":0,"grossCents":3498}}"""^^rdf:JSON """{"orderId":"A301","shipTo":{"country":"NL"},"customer":{"email":"billing@company.nl","vatId":"NL999999999B01"},"lines":[{"sku":"WID-001","qty":2,"unitCents":999},{"sku":"GAD-002","qty":1,"unitCents":1500}],"declared":{"netCents":3498,"vatCents":0,"grossCents":3498}}"""^^rdf:JSON """{"orderId":"A400","shipTo":{"country":"BE"},"customer":{"email":"ada@other.example","vatId":null},"lines":[{"sku":"WID-001","qty":2,"unitCents":999},{"sku":"GAD-002","qty":1,"unitCents":1500}],"declared":{"netCents":3498,"vatCents":508,"grossCents":4006}}"""^^rdf:JSON) .
#   ("""{"orderId":"A100","shipTo":{"country":"BE"},"customer":{"email":"Ada@Example.ORG","vatId":null},"lines":[{"sku":"wid-001","qty":2,"unitCents":999},{"sku":"GAD-002","qty":1,"unitCents":1500}],"declared":{"netCents":3498,"vatCents":509,"grossCents":4007}}"""^^rdf:JSON """{"orderId":"A200","shipTo":{"country":"US"},"customer":{"email":"bob@example.org","vatId":null},"lines":[{"sku":"WID-001","qty":2,"unitCents":999},{"sku":"GAD-002","qty":1,"unitCents":1500}],"declared":{"netCents":3498,"vatCents":0,"grossCents":3498}}"""^^rdf:JSON """{"orderId":"A300","shipTo":{"country":"NL"},"customer":{"email":"acct@company.nl","vatId":"NL999999999B01"},"lines":[{"sku":"WID-001","qty":2,"unitCents":999},{"sku":"GAD-002","qty":1,"unitCents":1500}],"declared":{"netCents":3498,"vatCents":0,"grossCents":3498}}"""^^rdf:JSON """{"orderId":"A301","shipTo":{"country":"NL"},"customer":{"email":"billing@company.nl","vatId":"NL999999999B01"},"lines":[{"sku":"WID-001","qty":2,"unitCents":999},{"sku":"GAD-002","qty":1,"unitCents":1500}],"declared":{"netCents":3498,"vatCents":0,"grossCents":3498}}"""^^rdf:JSON """{"orderId":"A400","shipTo":{"country":"BE"},"customer":{"email":"ada@other.example","vatId":null},"lines":[{"sku":"WID-001","qty":2,"unitCents":999},{"sku":"GAD-002","qty":1,"unitCents":1500}],"declared":{"netCents":3498,"vatCents":508,"grossCents":4006}}"""^^rdf:JSON) list:iterate (1 """{"orderId":"A200","shipTo":{"country":"US"},"customer":{"email":"bob@example.org","vatId":null},"lines":[{"sku":"WID-001","qty":2,"unitCents":999},{"sku":"GAD-002","qty":1,"unitCents":1500}],"declared":{"netCents":3498,"vatCents":0,"grossCents":3498}}"""^^rdf:JSON) .
#   ("""{"orderId":"A200","shipTo":{"country":"US"},"customer":{"email":"bob@example.org","vatId":null},"lines":[{"sku":"WID-001","qty":2,"unitCents":999},{"sku":"GAD-002","qty":1,"unitCents":1500}],"declared":{"netCents":3498,"vatCents":0,"grossCents":3498}}"""^^rdf:JSON "/orderId") string:jsonPointer "A200" .
#   ("urn:example:order:%s" "A200") string:format "urn:example:order:A200" .
#   <urn:example:order:A200> log:uri "urn:example:order:A200" .
#   ("""{"orderId":"A200","shipTo":{"country":"US"},"customer":{"email":"bob@example.org","vatId":null},"lines":[{"sku":"WID-001","qty":2,"unitCents":999},{"sku":"GAD-002","qty":1,"unitCents":1500}],"declared":{"netCents":3498,"vatCents":0,"grossCents":3498}}"""^^rdf:JSON "/lines") string:jsonPointer ("""{"sku":"WID-001","qty":2,"unitCents":999}"""^^rdf:JSON """{"sku":"GAD-002","qty":1,"unitCents":1500}"""^^rdf:JSON) .
#   ("""{"sku":"WID-001","qty":2,"unitCents":999}"""^^rdf:JSON """{"sku":"GAD-002","qty":1,"unitCents":1500}"""^^rdf:JSON) list:iterate (1 """{"sku":"GAD-002","qty":1,"unitCents":1500}"""^^rdf:JSON) .
#   ("""{"sku":"GAD-002","qty":1,"unitCents":1500}"""^^rdf:JSON "/sku") string:jsonPointer "GAD-002" .
#   ("""{"sku":"GAD-002","qty":1,"unitCents":1500}"""^^rdf:JSON "/qty") string:jsonPointer 1 .
#   ("""{"sku":"GAD-002","qty":1,"unitCents":1500}"""^^rdf:JSON "/unitCents") string:jsonPointer 1500 .
#   ex:Gadget a ex:Product .
#   ex:Gadget ex:sku "GAD-002" .
#   (1 1500) math:product 1500 .
#   ("urn:example:order:%s#line:%s" "A200" 1) string:format "urn:example:order:A200#line:1" .
#   <urn:example:order:A200#line:1> log:uri "urn:example:order:A200#line:1" .
#   "GAD-002" string:equalIgnoringCase "GAD-002" .
# via the schematic forward rule:
#   {
#     ex:feed ex:json ?J .
#     (?J "/orders") string:jsonPointer ?Orders .
#     ?Orders list:iterate (?OrderIndex ?OrderJson) .
#     (?OrderJson "/orderId") string:jsonPointer ?OrderId .
#     ("urn:example:order:%s" ?OrderId) string:format ?OrderUriStr .
#     ?Order log:uri ?OrderUriStr .
#     (?OrderJson "/lines") string:jsonPointer ?Lines .
#     ?Lines list:iterate (?LineIndex ?LineJson) .
#     (?LineJson "/sku") string:jsonPointer ?SkuJson .
#     (?LineJson "/qty") string:jsonPointer ?Qty .
#     (?LineJson "/unitCents") string:jsonPointer ?UnitCents .
#     ?Product a ex:Product .
#     ?Product ex:sku ?SkuCat .
#     (?Qty ?UnitCents) math:product ?NetCents .
#     ("urn:example:order:%s#line:%s" ?OrderId ?LineIndex) string:format ?LineUriStr .
#     ?Line log:uri ?LineUriStr .
#     ?SkuJson string:equalIgnoringCase ?SkuCat .
#   } => {
#     ?Order ex:line ?Line .
#     ?Line a ex:OrderLine .
#     ?Line ex:lineIndex ?LineIndex .
#     ?Line ex:product ?Product .
#     ?Line ex:sku ?SkuCat .
#     ?Line ex:qty ?Qty .
#     ?Line ex:unitCents ?UnitCents .
#     ?Line ex:netCents ?NetCents .
#   } .
# with substitution (on rule variables):
#   ?J = """{
#     "meta~data": { "batch": "2025-12-18" },
#     "orders": [
#     {
#     "orderId": "A100",
#     "shipTo": { "country": "BE" },
#     "customer": { "email": "Ada@Example.ORG", "vatId": null },
#     "lines": [
#     { "sku": "wid-001", "qty": 2, "unitCents": 999 },
#     { "sku": "GAD-002", "qty": 1, "unitCents": 1500 }
#     ],
#     "declared": { "netCents": 3498, "vatCents": 509, "grossCents": 4007 }
#     },
#     {
#     "orderId": "A200",
#     "shipTo": { "country": "US" },
#     "customer": { "email": "bob@example.org", "vatId": null },
#     "lines": [
#     { "sku": "WID-001", "qty": 2, "unitCents": 999 },
#     { "sku": "GAD-002", "qty": 1, "unitCents": 1500 }
#     ],
#     "declared": { "netCents": 3498, "vatCents": 0, "grossCents": 3498 }
#     },
#     {
#     "orderId": "A300",
#     "shipTo": { "country": "NL" },
#     "customer": { "email": "acct@company.nl", "vatId": "NL999999999B01" },
#     "lines": [
#     { "sku": "WID-001", "qty": 2, "unitCents": 999 },
#     { "sku": "GAD-002", "qty": 1, "unitCents": 1500 }
#     ],
#     "declared": { "netCents": 3498, "vatCents": 0, "grossCents": 3498 }
#     },
#     {
#     "orderId": "A301",
#     "shipTo": { "country": "NL" },
#     "customer": { "email": "billing@company.nl", "vatId": "NL999999999B01" },
#     "lines": [
#     { "sku": "WID-001", "qty": 2, "unitCents": 999 },
#     { "sku": "GAD-002", "qty": 1, "unitCents": 1500 }
#     ],
#     "declared": { "netCents": 3498, "vatCents": 0, "grossCents": 3498 }
#     },
#     {
#     "orderId": "A400",
#     "shipTo": { "country": "BE" },
#     "customer": { "email": "ada@other.example", "vatId": null },
#     "lines": [
#     { "sku": "WID-001", "qty": 2, "unitCents": 999 },
#     { "sku": "GAD-002", "qty": 1, "unitCents": 1500 }
#     ],
#     "declared": { "netCents": 3498, "vatCents": 508, "grossCents": 4006 }
#     }
#     ]
#   }"""^^rdf:JSON
#   ?Line = <urn:example:order:A200#line:1>
#   ?LineIndex = 1
#   ?LineJson = """{"sku":"GAD-002","qty":1,"unitCents":1500}"""^^rdf:JSON
#   ?LineUriStr = "urn:example:order:A200#line:1"
#   ?Lines = ("""{"sku":"WID-001","qty":2,"unitCents":999}"""^^rdf:JSON """{"sku":"GAD-002","qty":1,"unitCents":1500}"""^^rdf:JSON)
#   ?NetCents = 1500
#   ?Order = <urn:example:order:A200>
#   ?OrderId = "A200"
#   ?OrderIndex = 1
#   ?OrderJson = """{"orderId":"A200","shipTo":{"country":"US"},"customer":{"email":"bob@example.org","vatId":null},"lines":[{"sku":"WID-001","qty":2,"unitCents":999},{"sku":"GAD-002","qty":1,"unitCents":1500}],"declared":{"netCents":3498,"vatCents":0,"grossCents":3498}}"""^^rdf:JSON
#   ?OrderUriStr = "urn:example:order:A200"
#   ?Orders = ("""{"orderId":"A100","shipTo":{"country":"BE"},"customer":{"email":"Ada@Example.ORG","vatId":null},"lines":[{"sku":"wid-001","qty":2,"unitCents":999},{"sku":"GAD-002","qty":1,"unitCents":1500}],"declared":{"netCents":3498,"vatCents":509,"grossCents":4007}}"""^^rdf:JSON """{"orderId":"A200","shipTo":{"country":"US"},"customer":{"email":"bob@example.org","vatId":null},"lines":[{"sku":"WID-001","qty":2,"unitCents":999},{"sku":"GAD-002","qty":1,"unitCents":1500}],"declared":{"netCents":3498,"vatCents":0,"grossCents":3498}}"""^^rdf:JSON """{"orderId":"A300","shipTo":{"country":"NL"},"customer":{"email":"acct@company.nl","vatId":"NL999999999B01"},"lines":[{"sku":"WID-001","qty":2,"unitCents":999},{"sku":"GAD-002","qty":1,"unitCents":1500}],"declared":{"netCents":3498,"vatCents":0,"grossCents":3498}}"""^^rdf:JSON """{"orderId":"A301","shipTo":{"country":"NL"},"customer":{"email":"billing@company.nl","vatId":"NL999999999B01"},"lines":[{"sku":"WID-001","qty":2,"unitCents":999},{"sku":"GAD-002","qty":1,"unitCents":1500}],"declared":{"netCents":3498,"vatCents":0,"grossCents":3498}}"""^^rdf:JSON """{"orderId":"A400","shipTo":{"country":"BE"},"customer":{"email":"ada@other.example","vatId":null},"lines":[{"sku":"WID-001","qty":2,"unitCents":999},{"sku":"GAD-002","qty":1,"unitCents":1500}],"declared":{"netCents":3498,"vatCents":508,"grossCents":4006}}"""^^rdf:JSON)
#   ?Product = ex:Gadget
#   ?Qty = 1
#   ?SkuCat = "GAD-002"
#   ?SkuJson = "GAD-002"
#   ?UnitCents = 1500
# Therefore the derived triple above is entailed by the rules and facts.
# ----------------------------------------------------------------------

<urn:example:order:A200#line:1> ex:unitCents 1500 .

# ----------------------------------------------------------------------
# Proof for derived triple:
#   <urn:example:order:A200#line:1> ex:netCents 1500 .
# It holds because the following instance of the rule body is provable:
#   ex:feed ex:json """{
#     "meta~data": { "batch": "2025-12-18" },
#     "orders": [
#       {
#         "orderId": "A100",
#         "shipTo": { "country": "BE" },
#         "customer": { "email": "Ada@Example.ORG", "vatId": null },
#         "lines": [
#           { "sku": "wid-001", "qty": 2, "unitCents": 999 },
#           { "sku": "GAD-002", "qty": 1, "unitCents": 1500 }
#         ],
#         "declared": { "netCents": 3498, "vatCents": 509, "grossCents": 4007 }
#       },
#       {
#         "orderId": "A200",
#         "shipTo": { "country": "US" },
#         "customer": { "email": "bob@example.org", "vatId": null },
#         "lines": [
#           { "sku": "WID-001", "qty": 2, "unitCents": 999 },
#           { "sku": "GAD-002", "qty": 1, "unitCents": 1500 }
#         ],
#         "declared": { "netCents": 3498, "vatCents": 0, "grossCents": 3498 }
#       },
#       {
#         "orderId": "A300",
#         "shipTo": { "country": "NL" },
#         "customer": { "email": "acct@company.nl", "vatId": "NL999999999B01" },
#         "lines": [
#           { "sku": "WID-001", "qty": 2, "unitCents": 999 },
#           { "sku": "GAD-002", "qty": 1, "unitCents": 1500 }
#         ],
#         "declared": { "netCents": 3498, "vatCents": 0, "grossCents": 3498 }
#       },
#       {
#         "orderId": "A301",
#         "shipTo": { "country": "NL" },
#         "customer": { "email": "billing@company.nl", "vatId": "NL999999999B01" },
#         "lines": [
#           { "sku": "WID-001", "qty": 2, "unitCents": 999 },
#           { "sku": "GAD-002", "qty": 1, "unitCents": 1500 }
#         ],
#         "declared": { "netCents": 3498, "vatCents": 0, "grossCents": 3498 }
#       },
#       {
#         "orderId": "A400",
#         "shipTo": { "country": "BE" },
#         "customer": { "email": "ada@other.example", "vatId": null },
#         "lines": [
#           { "sku": "WID-001", "qty": 2, "unitCents": 999 },
#           { "sku": "GAD-002", "qty": 1, "unitCents": 1500 }
#         ],
#         "declared": { "netCents": 3498, "vatCents": 508, "grossCents": 4006 }
#       }
#     ]
#   }"""^^rdf:JSON .
#   ("""{
#     "meta~data": { "batch": "2025-12-18" },
#     "orders": [
#       {
#         "orderId": "A100",
#         "shipTo": { "country": "BE" },
#         "customer": { "email": "Ada@Example.ORG", "vatId": null },
#         "lines": [
#           { "sku": "wid-001", "qty": 2, "unitCents": 999 },
#           { "sku": "GAD-002", "qty": 1, "unitCents": 1500 }
#         ],
#         "declared": { "netCents": 3498, "vatCents": 509, "grossCents": 4007 }
#       },
#       {
#         "orderId": "A200",
#         "shipTo": { "country": "US" },
#         "customer": { "email": "bob@example.org", "vatId": null },
#         "lines": [
#           { "sku": "WID-001", "qty": 2, "unitCents": 999 },
#           { "sku": "GAD-002", "qty": 1, "unitCents": 1500 }
#         ],
#         "declared": { "netCents": 3498, "vatCents": 0, "grossCents": 3498 }
#       },
#       {
#         "orderId": "A300",
#         "shipTo": { "country": "NL" },
#         "customer": { "email": "acct@company.nl", "vatId": "NL999999999B01" },
#         "lines": [
#           { "sku": "WID-001", "qty": 2, "unitCents": 999 },
#           { "sku": "GAD-002", "qty": 1, "unitCents": 1500 }
#         ],
#         "declared": { "netCents": 3498, "vatCents": 0, "grossCents": 3498 }
#       },
#       {
#         "orderId": "A301",
#         "shipTo": { "country": "NL" },
#         "customer": { "email": "billing@company.nl", "vatId": "NL999999999B01" },
#         "lines": [
#           { "sku": "WID-001", "qty": 2, "unitCents": 999 },
#           { "sku": "GAD-002", "qty": 1, "unitCents": 1500 }
#         ],
#         "declared": { "netCents": 3498, "vatCents": 0, "grossCents": 3498 }
#       },
#       {
#         "orderId": "A400",
#         "shipTo": { "country": "BE" },
#         "customer": { "email": "ada@other.example", "vatId": null },
#         "lines": [
#           { "sku": "WID-001", "qty": 2, "unitCents": 999 },
#           { "sku": "GAD-002", "qty": 1, "unitCents": 1500 }
#         ],
#         "declared": { "netCents": 3498, "vatCents": 508, "grossCents": 4006 }
#       }
#     ]
#   }"""^^rdf:JSON "/orders") string:jsonPointer ("""{"orderId":"A100","shipTo":{"country":"BE"},"customer":{"email":"Ada@Example.ORG","vatId":null},"lines":[{"sku":"wid-001","qty":2,"unitCents":999},{"sku":"GAD-002","qty":1,"unitCents":1500}],"declared":{"netCents":3498,"vatCents":509,"grossCents":4007}}"""^^rdf:JSON """{"orderId":"A200","shipTo":{"country":"US"},"customer":{"email":"bob@example.org","vatId":null},"lines":[{"sku":"WID-001","qty":2,"unitCents":999},{"sku":"GAD-002","qty":1,"unitCents":1500}],"declared":{"netCents":3498,"vatCents":0,"grossCents":3498}}"""^^rdf:JSON """{"orderId":"A300","shipTo":{"country":"NL"},"customer":{"email":"acct@company.nl","vatId":"NL999999999B01"},"lines":[{"sku":"WID-001","qty":2,"unitCents":999},{"sku":"GAD-002","qty":1,"unitCents":1500}],"declared":{"netCents":3498,"vatCents":0,"grossCents":3498}}"""^^rdf:JSON """{"orderId":"A301","shipTo":{"country":"NL"},"customer":{"email":"billing@company.nl","vatId":"NL999999999B01"},"lines":[{"sku":"WID-001","qty":2,"unitCents":999},{"sku":"GAD-002","qty":1,"unitCents":1500}],"declared":{"netCents":3498,"vatCents":0,"grossCents":3498}}"""^^rdf:JSON """{"orderId":"A400","shipTo":{"country":"BE"},"customer":{"email":"ada@other.example","vatId":null},"lines":[{"sku":"WID-001","qty":2,"unitCents":999},{"sku":"GAD-002","qty":1,"unitCents":1500}],"declared":{"netCents":3498,"vatCents":508,"grossCents":4006}}"""^^rdf:JSON) .
#   ("""{"orderId":"A100","shipTo":{"country":"BE"},"customer":{"email":"Ada@Example.ORG","vatId":null},"lines":[{"sku":"wid-001","qty":2,"unitCents":999},{"sku":"GAD-002","qty":1,"unitCents":1500}],"declared":{"netCents":3498,"vatCents":509,"grossCents":4007}}"""^^rdf:JSON """{"orderId":"A200","shipTo":{"country":"US"},"customer":{"email":"bob@example.org","vatId":null},"lines":[{"sku":"WID-001","qty":2,"unitCents":999},{"sku":"GAD-002","qty":1,"unitCents":1500}],"declared":{"netCents":3498,"vatCents":0,"grossCents":3498}}"""^^rdf:JSON """{"orderId":"A300","shipTo":{"country":"NL"},"customer":{"email":"acct@company.nl","vatId":"NL999999999B01"},"lines":[{"sku":"WID-001","qty":2,"unitCents":999},{"sku":"GAD-002","qty":1,"unitCents":1500}],"declared":{"netCents":3498,"vatCents":0,"grossCents":3498}}"""^^rdf:JSON """{"orderId":"A301","shipTo":{"country":"NL"},"customer":{"email":"billing@company.nl","vatId":"NL999999999B01"},"lines":[{"sku":"WID-001","qty":2,"unitCents":999},{"sku":"GAD-002","qty":1,"unitCents":1500}],"declared":{"netCents":3498,"vatCents":0,"grossCents":3498}}"""^^rdf:JSON """{"orderId":"A400","shipTo":{"country":"BE"},"customer":{"email":"ada@other.example","vatId":null},"lines":[{"sku":"WID-001","qty":2,"unitCents":999},{"sku":"GAD-002","qty":1,"unitCents":1500}],"declared":{"netCents":3498,"vatCents":508,"grossCents":4006}}"""^^rdf:JSON) list:iterate (1 """{"orderId":"A200","shipTo":{"country":"US"},"customer":{"email":"bob@example.org","vatId":null},"lines":[{"sku":"WID-001","qty":2,"unitCents":999},{"sku":"GAD-002","qty":1,"unitCents":1500}],"declared":{"netCents":3498,"vatCents":0,"grossCents":3498}}"""^^rdf:JSON) .
#   ("""{"orderId":"A200","shipTo":{"country":"US"},"customer":{"email":"bob@example.org","vatId":null},"lines":[{"sku":"WID-001","qty":2,"unitCents":999},{"sku":"GAD-002","qty":1,"unitCents":1500}],"declared":{"netCents":3498,"vatCents":0,"grossCents":3498}}"""^^rdf:JSON "/orderId") string:jsonPointer "A200" .
#   ("urn:example:order:%s" "A200") string:format "urn:example:order:A200" .
#   <urn:example:order:A200> log:uri "urn:example:order:A200" .
#   ("""{"orderId":"A200","shipTo":{"country":"US"},"customer":{"email":"bob@example.org","vatId":null},"lines":[{"sku":"WID-001","qty":2,"unitCents":999},{"sku":"GAD-002","qty":1,"unitCents":1500}],"declared":{"netCents":3498,"vatCents":0,"grossCents":3498}}"""^^rdf:JSON "/lines") string:jsonPointer ("""{"sku":"WID-001","qty":2,"unitCents":999}"""^^rdf:JSON """{"sku":"GAD-002","qty":1,"unitCents":1500}"""^^rdf:JSON) .
#   ("""{"sku":"WID-001","qty":2,"unitCents":999}"""^^rdf:JSON """{"sku":"GAD-002","qty":1,"unitCents":1500}"""^^rdf:JSON) list:iterate (1 """{"sku":"GAD-002","qty":1,"unitCents":1500}"""^^rdf:JSON) .
#   ("""{"sku":"GAD-002","qty":1,"unitCents":1500}"""^^rdf:JSON "/sku") string:jsonPointer "GAD-002" .
#   ("""{"sku":"GAD-002","qty":1,"unitCents":1500}"""^^rdf:JSON "/qty") string:jsonPointer 1 .
#   ("""{"sku":"GAD-002","qty":1,"unitCents":1500}"""^^rdf:JSON "/unitCents") string:jsonPointer 1500 .
#   ex:Gadget a ex:Product .
#   ex:Gadget ex:sku "GAD-002" .
#   (1 1500) math:product 1500 .
#   ("urn:example:order:%s#line:%s" "A200" 1) string:format "urn:example:order:A200#line:1" .
#   <urn:example:order:A200#line:1> log:uri "urn:example:order:A200#line:1" .
#   "GAD-002" string:equalIgnoringCase "GAD-002" .
# via the schematic forward rule:
#   {
#     ex:feed ex:json ?J .
#     (?J "/orders") string:jsonPointer ?Orders .
#     ?Orders list:iterate (?OrderIndex ?OrderJson) .
#     (?OrderJson "/orderId") string:jsonPointer ?OrderId .
#     ("urn:example:order:%s" ?OrderId) string:format ?OrderUriStr .
#     ?Order log:uri ?OrderUriStr .
#     (?OrderJson "/lines") string:jsonPointer ?Lines .
#     ?Lines list:iterate (?LineIndex ?LineJson) .
#     (?LineJson "/sku") string:jsonPointer ?SkuJson .
#     (?LineJson "/qty") string:jsonPointer ?Qty .
#     (?LineJson "/unitCents") string:jsonPointer ?UnitCents .
#     ?Product a ex:Product .
#     ?Product ex:sku ?SkuCat .
#     (?Qty ?UnitCents) math:product ?NetCents .
#     ("urn:example:order:%s#line:%s" ?OrderId ?LineIndex) string:format ?LineUriStr .
#     ?Line log:uri ?LineUriStr .
#     ?SkuJson string:equalIgnoringCase ?SkuCat .
#   } => {
#     ?Order ex:line ?Line .
#     ?Line a ex:OrderLine .
#     ?Line ex:lineIndex ?LineIndex .
#     ?Line ex:product ?Product .
#     ?Line ex:sku ?SkuCat .
#     ?Line ex:qty ?Qty .
#     ?Line ex:unitCents ?UnitCents .
#     ?Line ex:netCents ?NetCents .
#   } .
# with substitution (on rule variables):
#   ?J = """{
#     "meta~data": { "batch": "2025-12-18" },
#     "orders": [
#     {
#     "orderId": "A100",
#     "shipTo": { "country": "BE" },
#     "customer": { "email": "Ada@Example.ORG", "vatId": null },
#     "lines": [
#     { "sku": "wid-001", "qty": 2, "unitCents": 999 },
#     { "sku": "GAD-002", "qty": 1, "unitCents": 1500 }
#     ],
#     "declared": { "netCents": 3498, "vatCents": 509, "grossCents": 4007 }
#     },
#     {
#     "orderId": "A200",
#     "shipTo": { "country": "US" },
#     "customer": { "email": "bob@example.org", "vatId": null },
#     "lines": [
#     { "sku": "WID-001", "qty": 2, "unitCents": 999 },
#     { "sku": "GAD-002", "qty": 1, "unitCents": 1500 }
#     ],
#     "declared": { "netCents": 3498, "vatCents": 0, "grossCents": 3498 }
#     },
#     {
#     "orderId": "A300",
#     "shipTo": { "country": "NL" },
#     "customer": { "email": "acct@company.nl", "vatId": "NL999999999B01" },
#     "lines": [
#     { "sku": "WID-001", "qty": 2, "unitCents": 999 },
#     { "sku": "GAD-002", "qty": 1, "unitCents": 1500 }
#     ],
#     "declared": { "netCents": 3498, "vatCents": 0, "grossCents": 3498 }
#     },
#     {
#     "orderId": "A301",
#     "shipTo": { "country": "NL" },
#     "customer": { "email": "billing@company.nl", "vatId": "NL999999999B01" },
#     "lines": [
#     { "sku": "WID-001", "qty": 2, "unitCents": 999 },
#     { "sku": "GAD-002", "qty": 1, "unitCents": 1500 }
#     ],
#     "declared": { "netCents": 3498, "vatCents": 0, "grossCents": 3498 }
#     },
#     {
#     "orderId": "A400",
#     "shipTo": { "country": "BE" },
#     "customer": { "email": "ada@other.example", "vatId": null },
#     "lines": [
#     { "sku": "WID-001", "qty": 2, "unitCents": 999 },
#     { "sku": "GAD-002", "qty": 1, "unitCents": 1500 }
#     ],
#     "declared": { "netCents": 3498, "vatCents": 508, "grossCents": 4006 }
#     }
#     ]
#   }"""^^rdf:JSON
#   ?Line = <urn:example:order:A200#line:1>
#   ?LineIndex = 1
#   ?LineJson = """{"sku":"GAD-002","qty":1,"unitCents":1500}"""^^rdf:JSON
#   ?LineUriStr = "urn:example:order:A200#line:1"
#   ?Lines = ("""{"sku":"WID-001","qty":2,"unitCents":999}"""^^rdf:JSON """{"sku":"GAD-002","qty":1,"unitCents":1500}"""^^rdf:JSON)
#   ?NetCents = 1500
#   ?Order = <urn:example:order:A200>
#   ?OrderId = "A200"
#   ?OrderIndex = 1
#   ?OrderJson = """{"orderId":"A200","shipTo":{"country":"US"},"customer":{"email":"bob@example.org","vatId":null},"lines":[{"sku":"WID-001","qty":2,"unitCents":999},{"sku":"GAD-002","qty":1,"unitCents":1500}],"declared":{"netCents":3498,"vatCents":0,"grossCents":3498}}"""^^rdf:JSON
#   ?OrderUriStr = "urn:example:order:A200"
#   ?Orders = ("""{"orderId":"A100","shipTo":{"country":"BE"},"customer":{"email":"Ada@Example.ORG","vatId":null},"lines":[{"sku":"wid-001","qty":2,"unitCents":999},{"sku":"GAD-002","qty":1,"unitCents":1500}],"declared":{"netCents":3498,"vatCents":509,"grossCents":4007}}"""^^rdf:JSON """{"orderId":"A200","shipTo":{"country":"US"},"customer":{"email":"bob@example.org","vatId":null},"lines":[{"sku":"WID-001","qty":2,"unitCents":999},{"sku":"GAD-002","qty":1,"unitCents":1500}],"declared":{"netCents":3498,"vatCents":0,"grossCents":3498}}"""^^rdf:JSON """{"orderId":"A300","shipTo":{"country":"NL"},"customer":{"email":"acct@company.nl","vatId":"NL999999999B01"},"lines":[{"sku":"WID-001","qty":2,"unitCents":999},{"sku":"GAD-002","qty":1,"unitCents":1500}],"declared":{"netCents":3498,"vatCents":0,"grossCents":3498}}"""^^rdf:JSON """{"orderId":"A301","shipTo":{"country":"NL"},"customer":{"email":"billing@company.nl","vatId":"NL999999999B01"},"lines":[{"sku":"WID-001","qty":2,"unitCents":999},{"sku":"GAD-002","qty":1,"unitCents":1500}],"declared":{"netCents":3498,"vatCents":0,"grossCents":3498}}"""^^rdf:JSON """{"orderId":"A400","shipTo":{"country":"BE"},"customer":{"email":"ada@other.example","vatId":null},"lines":[{"sku":"WID-001","qty":2,"unitCents":999},{"sku":"GAD-002","qty":1,"unitCents":1500}],"declared":{"netCents":3498,"vatCents":508,"grossCents":4006}}"""^^rdf:JSON)
#   ?Product = ex:Gadget
#   ?Qty = 1
#   ?SkuCat = "GAD-002"
#   ?SkuJson = "GAD-002"
#   ?UnitCents = 1500
# Therefore the derived triple above is entailed by the rules and facts.
# ----------------------------------------------------------------------

<urn:example:order:A200#line:1> ex:netCents 1500 .

# ----------------------------------------------------------------------
# Proof for derived triple:
#   <urn:example:order:A200> ex:line <urn:example:order:A200#line:0> .
# It holds because the following instance of the rule body is provable:
#   ex:feed ex:json """{
#     "meta~data": { "batch": "2025-12-18" },
#     "orders": [
#       {
#         "orderId": "A100",
#         "shipTo": { "country": "BE" },
#         "customer": { "email": "Ada@Example.ORG", "vatId": null },
#         "lines": [
#           { "sku": "wid-001", "qty": 2, "unitCents": 999 },
#           { "sku": "GAD-002", "qty": 1, "unitCents": 1500 }
#         ],
#         "declared": { "netCents": 3498, "vatCents": 509, "grossCents": 4007 }
#       },
#       {
#         "orderId": "A200",
#         "shipTo": { "country": "US" },
#         "customer": { "email": "bob@example.org", "vatId": null },
#         "lines": [
#           { "sku": "WID-001", "qty": 2, "unitCents": 999 },
#           { "sku": "GAD-002", "qty": 1, "unitCents": 1500 }
#         ],
#         "declared": { "netCents": 3498, "vatCents": 0, "grossCents": 3498 }
#       },
#       {
#         "orderId": "A300",
#         "shipTo": { "country": "NL" },
#         "customer": { "email": "acct@company.nl", "vatId": "NL999999999B01" },
#         "lines": [
#           { "sku": "WID-001", "qty": 2, "unitCents": 999 },
#           { "sku": "GAD-002", "qty": 1, "unitCents": 1500 }
#         ],
#         "declared": { "netCents": 3498, "vatCents": 0, "grossCents": 3498 }
#       },
#       {
#         "orderId": "A301",
#         "shipTo": { "country": "NL" },
#         "customer": { "email": "billing@company.nl", "vatId": "NL999999999B01" },
#         "lines": [
#           { "sku": "WID-001", "qty": 2, "unitCents": 999 },
#           { "sku": "GAD-002", "qty": 1, "unitCents": 1500 }
#         ],
#         "declared": { "netCents": 3498, "vatCents": 0, "grossCents": 3498 }
#       },
#       {
#         "orderId": "A400",
#         "shipTo": { "country": "BE" },
#         "customer": { "email": "ada@other.example", "vatId": null },
#         "lines": [
#           { "sku": "WID-001", "qty": 2, "unitCents": 999 },
#           { "sku": "GAD-002", "qty": 1, "unitCents": 1500 }
#         ],
#         "declared": { "netCents": 3498, "vatCents": 508, "grossCents": 4006 }
#       }
#     ]
#   }"""^^rdf:JSON .
#   ("""{
#     "meta~data": { "batch": "2025-12-18" },
#     "orders": [
#       {
#         "orderId": "A100",
#         "shipTo": { "country": "BE" },
#         "customer": { "email": "Ada@Example.ORG", "vatId": null },
#         "lines": [
#           { "sku": "wid-001", "qty": 2, "unitCents": 999 },
#           { "sku": "GAD-002", "qty": 1, "unitCents": 1500 }
#         ],
#         "declared": { "netCents": 3498, "vatCents": 509, "grossCents": 4007 }
#       },
#       {
#         "orderId": "A200",
#         "shipTo": { "country": "US" },
#         "customer": { "email": "bob@example.org", "vatId": null },
#         "lines": [
#           { "sku": "WID-001", "qty": 2, "unitCents": 999 },
#           { "sku": "GAD-002", "qty": 1, "unitCents": 1500 }
#         ],
#         "declared": { "netCents": 3498, "vatCents": 0, "grossCents": 3498 }
#       },
#       {
#         "orderId": "A300",
#         "shipTo": { "country": "NL" },
#         "customer": { "email": "acct@company.nl", "vatId": "NL999999999B01" },
#         "lines": [
#           { "sku": "WID-001", "qty": 2, "unitCents": 999 },
#           { "sku": "GAD-002", "qty": 1, "unitCents": 1500 }
#         ],
#         "declared": { "netCents": 3498, "vatCents": 0, "grossCents": 3498 }
#       },
#       {
#         "orderId": "A301",
#         "shipTo": { "country": "NL" },
#         "customer": { "email": "billing@company.nl", "vatId": "NL999999999B01" },
#         "lines": [
#           { "sku": "WID-001", "qty": 2, "unitCents": 999 },
#           { "sku": "GAD-002", "qty": 1, "unitCents": 1500 }
#         ],
#         "declared": { "netCents": 3498, "vatCents": 0, "grossCents": 3498 }
#       },
#       {
#         "orderId": "A400",
#         "shipTo": { "country": "BE" },
#         "customer": { "email": "ada@other.example", "vatId": null },
#         "lines": [
#           { "sku": "WID-001", "qty": 2, "unitCents": 999 },
#           { "sku": "GAD-002", "qty": 1, "unitCents": 1500 }
#         ],
#         "declared": { "netCents": 3498, "vatCents": 508, "grossCents": 4006 }
#       }
#     ]
#   }"""^^rdf:JSON "/orders") string:jsonPointer ("""{"orderId":"A100","shipTo":{"country":"BE"},"customer":{"email":"Ada@Example.ORG","vatId":null},"lines":[{"sku":"wid-001","qty":2,"unitCents":999},{"sku":"GAD-002","qty":1,"unitCents":1500}],"declared":{"netCents":3498,"vatCents":509,"grossCents":4007}}"""^^rdf:JSON """{"orderId":"A200","shipTo":{"country":"US"},"customer":{"email":"bob@example.org","vatId":null},"lines":[{"sku":"WID-001","qty":2,"unitCents":999},{"sku":"GAD-002","qty":1,"unitCents":1500}],"declared":{"netCents":3498,"vatCents":0,"grossCents":3498}}"""^^rdf:JSON """{"orderId":"A300","shipTo":{"country":"NL"},"customer":{"email":"acct@company.nl","vatId":"NL999999999B01"},"lines":[{"sku":"WID-001","qty":2,"unitCents":999},{"sku":"GAD-002","qty":1,"unitCents":1500}],"declared":{"netCents":3498,"vatCents":0,"grossCents":3498}}"""^^rdf:JSON """{"orderId":"A301","shipTo":{"country":"NL"},"customer":{"email":"billing@company.nl","vatId":"NL999999999B01"},"lines":[{"sku":"WID-001","qty":2,"unitCents":999},{"sku":"GAD-002","qty":1,"unitCents":1500}],"declared":{"netCents":3498,"vatCents":0,"grossCents":3498}}"""^^rdf:JSON """{"orderId":"A400","shipTo":{"country":"BE"},"customer":{"email":"ada@other.example","vatId":null},"lines":[{"sku":"WID-001","qty":2,"unitCents":999},{"sku":"GAD-002","qty":1,"unitCents":1500}],"declared":{"netCents":3498,"vatCents":508,"grossCents":4006}}"""^^rdf:JSON) .
#   ("""{"orderId":"A100","shipTo":{"country":"BE"},"customer":{"email":"Ada@Example.ORG","vatId":null},"lines":[{"sku":"wid-001","qty":2,"unitCents":999},{"sku":"GAD-002","qty":1,"unitCents":1500}],"declared":{"netCents":3498,"vatCents":509,"grossCents":4007}}"""^^rdf:JSON """{"orderId":"A200","shipTo":{"country":"US"},"customer":{"email":"bob@example.org","vatId":null},"lines":[{"sku":"WID-001","qty":2,"unitCents":999},{"sku":"GAD-002","qty":1,"unitCents":1500}],"declared":{"netCents":3498,"vatCents":0,"grossCents":3498}}"""^^rdf:JSON """{"orderId":"A300","shipTo":{"country":"NL"},"customer":{"email":"acct@company.nl","vatId":"NL999999999B01"},"lines":[{"sku":"WID-001","qty":2,"unitCents":999},{"sku":"GAD-002","qty":1,"unitCents":1500}],"declared":{"netCents":3498,"vatCents":0,"grossCents":3498}}"""^^rdf:JSON """{"orderId":"A301","shipTo":{"country":"NL"},"customer":{"email":"billing@company.nl","vatId":"NL999999999B01"},"lines":[{"sku":"WID-001","qty":2,"unitCents":999},{"sku":"GAD-002","qty":1,"unitCents":1500}],"declared":{"netCents":3498,"vatCents":0,"grossCents":3498}}"""^^rdf:JSON """{"orderId":"A400","shipTo":{"country":"BE"},"customer":{"email":"ada@other.example","vatId":null},"lines":[{"sku":"WID-001","qty":2,"unitCents":999},{"sku":"GAD-002","qty":1,"unitCents":1500}],"declared":{"netCents":3498,"vatCents":508,"grossCents":4006}}"""^^rdf:JSON) list:iterate (1 """{"orderId":"A200","shipTo":{"country":"US"},"customer":{"email":"bob@example.org","vatId":null},"lines":[{"sku":"WID-001","qty":2,"unitCents":999},{"sku":"GAD-002","qty":1,"unitCents":1500}],"declared":{"netCents":3498,"vatCents":0,"grossCents":3498}}"""^^rdf:JSON) .
#   ("""{"orderId":"A200","shipTo":{"country":"US"},"customer":{"email":"bob@example.org","vatId":null},"lines":[{"sku":"WID-001","qty":2,"unitCents":999},{"sku":"GAD-002","qty":1,"unitCents":1500}],"declared":{"netCents":3498,"vatCents":0,"grossCents":3498}}"""^^rdf:JSON "/orderId") string:jsonPointer "A200" .
#   ("urn:example:order:%s" "A200") string:format "urn:example:order:A200" .
#   <urn:example:order:A200> log:uri "urn:example:order:A200" .
#   ("""{"orderId":"A200","shipTo":{"country":"US"},"customer":{"email":"bob@example.org","vatId":null},"lines":[{"sku":"WID-001","qty":2,"unitCents":999},{"sku":"GAD-002","qty":1,"unitCents":1500}],"declared":{"netCents":3498,"vatCents":0,"grossCents":3498}}"""^^rdf:JSON "/lines") string:jsonPointer ("""{"sku":"WID-001","qty":2,"unitCents":999}"""^^rdf:JSON """{"sku":"GAD-002","qty":1,"unitCents":1500}"""^^rdf:JSON) .
#   ("""{"sku":"WID-001","qty":2,"unitCents":999}"""^^rdf:JSON """{"sku":"GAD-002","qty":1,"unitCents":1500}"""^^rdf:JSON) list:iterate (0 """{"sku":"WID-001","qty":2,"unitCents":999}"""^^rdf:JSON) .
#   ("""{"sku":"WID-001","qty":2,"unitCents":999}"""^^rdf:JSON "/sku") string:jsonPointer "WID-001" .
#   ("""{"sku":"WID-001","qty":2,"unitCents":999}"""^^rdf:JSON "/qty") string:jsonPointer 2 .
#   ("""{"sku":"WID-001","qty":2,"unitCents":999}"""^^rdf:JSON "/unitCents") string:jsonPointer 999 .
#   ex:Widget a ex:Product .
#   ex:Widget ex:sku "WID-001" .
#   (2 999) math:product 1998 .
#   ("urn:example:order:%s#line:%s" "A200" 0) string:format "urn:example:order:A200#line:0" .
#   <urn:example:order:A200#line:0> log:uri "urn:example:order:A200#line:0" .
#   "WID-001" string:equalIgnoringCase "WID-001" .
# via the schematic forward rule:
#   {
#     ex:feed ex:json ?J .
#     (?J "/orders") string:jsonPointer ?Orders .
#     ?Orders list:iterate (?OrderIndex ?OrderJson) .
#     (?OrderJson "/orderId") string:jsonPointer ?OrderId .
#     ("urn:example:order:%s" ?OrderId) string:format ?OrderUriStr .
#     ?Order log:uri ?OrderUriStr .
#     (?OrderJson "/lines") string:jsonPointer ?Lines .
#     ?Lines list:iterate (?LineIndex ?LineJson) .
#     (?LineJson "/sku") string:jsonPointer ?SkuJson .
#     (?LineJson "/qty") string:jsonPointer ?Qty .
#     (?LineJson "/unitCents") string:jsonPointer ?UnitCents .
#     ?Product a ex:Product .
#     ?Product ex:sku ?SkuCat .
#     (?Qty ?UnitCents) math:product ?NetCents .
#     ("urn:example:order:%s#line:%s" ?OrderId ?LineIndex) string:format ?LineUriStr .
#     ?Line log:uri ?LineUriStr .
#     ?SkuJson string:equalIgnoringCase ?SkuCat .
#   } => {
#     ?Order ex:line ?Line .
#     ?Line a ex:OrderLine .
#     ?Line ex:lineIndex ?LineIndex .
#     ?Line ex:product ?Product .
#     ?Line ex:sku ?SkuCat .
#     ?Line ex:qty ?Qty .
#     ?Line ex:unitCents ?UnitCents .
#     ?Line ex:netCents ?NetCents .
#   } .
# with substitution (on rule variables):
#   ?J = """{
#     "meta~data": { "batch": "2025-12-18" },
#     "orders": [
#     {
#     "orderId": "A100",
#     "shipTo": { "country": "BE" },
#     "customer": { "email": "Ada@Example.ORG", "vatId": null },
#     "lines": [
#     { "sku": "wid-001", "qty": 2, "unitCents": 999 },
#     { "sku": "GAD-002", "qty": 1, "unitCents": 1500 }
#     ],
#     "declared": { "netCents": 3498, "vatCents": 509, "grossCents": 4007 }
#     },
#     {
#     "orderId": "A200",
#     "shipTo": { "country": "US" },
#     "customer": { "email": "bob@example.org", "vatId": null },
#     "lines": [
#     { "sku": "WID-001", "qty": 2, "unitCents": 999 },
#     { "sku": "GAD-002", "qty": 1, "unitCents": 1500 }
#     ],
#     "declared": { "netCents": 3498, "vatCents": 0, "grossCents": 3498 }
#     },
#     {
#     "orderId": "A300",
#     "shipTo": { "country": "NL" },
#     "customer": { "email": "acct@company.nl", "vatId": "NL999999999B01" },
#     "lines": [
#     { "sku": "WID-001", "qty": 2, "unitCents": 999 },
#     { "sku": "GAD-002", "qty": 1, "unitCents": 1500 }
#     ],
#     "declared": { "netCents": 3498, "vatCents": 0, "grossCents": 3498 }
#     },
#     {
#     "orderId": "A301",
#     "shipTo": { "country": "NL" },
#     "customer": { "email": "billing@company.nl", "vatId": "NL999999999B01" },
#     "lines": [
#     { "sku": "WID-001", "qty": 2, "unitCents": 999 },
#     { "sku": "GAD-002", "qty": 1, "unitCents": 1500 }
#     ],
#     "declared": { "netCents": 3498, "vatCents": 0, "grossCents": 3498 }
#     },
#     {
#     "orderId": "A400",
#     "shipTo": { "country": "BE" },
#     "customer": { "email": "ada@other.example", "vatId": null },
#     "lines": [
#     { "sku": "WID-001", "qty": 2, "unitCents": 999 },
#     { "sku": "GAD-002", "qty": 1, "unitCents": 1500 }
#     ],
#     "declared": { "netCents": 3498, "vatCents": 508, "grossCents": 4006 }
#     }
#     ]
#   }"""^^rdf:JSON
#   ?Line = <urn:example:order:A200#line:0>
#   ?LineIndex = 0
#   ?LineJson = """{"sku":"WID-001","qty":2,"unitCents":999}"""^^rdf:JSON
#   ?LineUriStr = "urn:example:order:A200#line:0"
#   ?Lines = ("""{"sku":"WID-001","qty":2,"unitCents":999}"""^^rdf:JSON """{"sku":"GAD-002","qty":1,"unitCents":1500}"""^^rdf:JSON)
#   ?NetCents = 1998
#   ?Order = <urn:example:order:A200>
#   ?OrderId = "A200"
#   ?OrderIndex = 1
#   ?OrderJson = """{"orderId":"A200","shipTo":{"country":"US"},"customer":{"email":"bob@example.org","vatId":null},"lines":[{"sku":"WID-001","qty":2,"unitCents":999},{"sku":"GAD-002","qty":1,"unitCents":1500}],"declared":{"netCents":3498,"vatCents":0,"grossCents":3498}}"""^^rdf:JSON
#   ?OrderUriStr = "urn:example:order:A200"
#   ?Orders = ("""{"orderId":"A100","shipTo":{"country":"BE"},"customer":{"email":"Ada@Example.ORG","vatId":null},"lines":[{"sku":"wid-001","qty":2,"unitCents":999},{"sku":"GAD-002","qty":1,"unitCents":1500}],"declared":{"netCents":3498,"vatCents":509,"grossCents":4007}}"""^^rdf:JSON """{"orderId":"A200","shipTo":{"country":"US"},"customer":{"email":"bob@example.org","vatId":null},"lines":[{"sku":"WID-001","qty":2,"unitCents":999},{"sku":"GAD-002","qty":1,"unitCents":1500}],"declared":{"netCents":3498,"vatCents":0,"grossCents":3498}}"""^^rdf:JSON """{"orderId":"A300","shipTo":{"country":"NL"},"customer":{"email":"acct@company.nl","vatId":"NL999999999B01"},"lines":[{"sku":"WID-001","qty":2,"unitCents":999},{"sku":"GAD-002","qty":1,"unitCents":1500}],"declared":{"netCents":3498,"vatCents":0,"grossCents":3498}}"""^^rdf:JSON """{"orderId":"A301","shipTo":{"country":"NL"},"customer":{"email":"billing@company.nl","vatId":"NL999999999B01"},"lines":[{"sku":"WID-001","qty":2,"unitCents":999},{"sku":"GAD-002","qty":1,"unitCents":1500}],"declared":{"netCents":3498,"vatCents":0,"grossCents":3498}}"""^^rdf:JSON """{"orderId":"A400","shipTo":{"country":"BE"},"customer":{"email":"ada@other.example","vatId":null},"lines":[{"sku":"WID-001","qty":2,"unitCents":999},{"sku":"GAD-002","qty":1,"unitCents":1500}],"declared":{"netCents":3498,"vatCents":508,"grossCents":4006}}"""^^rdf:JSON)
#   ?Product = ex:Widget
#   ?Qty = 2
#   ?SkuCat = "WID-001"
#   ?SkuJson = "WID-001"
#   ?UnitCents = 999
# Therefore the derived triple above is entailed by the rules and facts.
# ----------------------------------------------------------------------

<urn:example:order:A200> ex:line <urn:example:order:A200#line:0> .

# ----------------------------------------------------------------------
# Proof for derived triple:
#   <urn:example:order:A200#line:0> a ex:OrderLine .
# It holds because the following instance of the rule body is provable:
#   ex:feed ex:json """{
#     "meta~data": { "batch": "2025-12-18" },
#     "orders": [
#       {
#         "orderId": "A100",
#         "shipTo": { "country": "BE" },
#         "customer": { "email": "Ada@Example.ORG", "vatId": null },
#         "lines": [
#           { "sku": "wid-001", "qty": 2, "unitCents": 999 },
#           { "sku": "GAD-002", "qty": 1, "unitCents": 1500 }
#         ],
#         "declared": { "netCents": 3498, "vatCents": 509, "grossCents": 4007 }
#       },
#       {
#         "orderId": "A200",
#         "shipTo": { "country": "US" },
#         "customer": { "email": "bob@example.org", "vatId": null },
#         "lines": [
#           { "sku": "WID-001", "qty": 2, "unitCents": 999 },
#           { "sku": "GAD-002", "qty": 1, "unitCents": 1500 }
#         ],
#         "declared": { "netCents": 3498, "vatCents": 0, "grossCents": 3498 }
#       },
#       {
#         "orderId": "A300",
#         "shipTo": { "country": "NL" },
#         "customer": { "email": "acct@company.nl", "vatId": "NL999999999B01" },
#         "lines": [
#           { "sku": "WID-001", "qty": 2, "unitCents": 999 },
#           { "sku": "GAD-002", "qty": 1, "unitCents": 1500 }
#         ],
#         "declared": { "netCents": 3498, "vatCents": 0, "grossCents": 3498 }
#       },
#       {
#         "orderId": "A301",
#         "shipTo": { "country": "NL" },
#         "customer": { "email": "billing@company.nl", "vatId": "NL999999999B01" },
#         "lines": [
#           { "sku": "WID-001", "qty": 2, "unitCents": 999 },
#           { "sku": "GAD-002", "qty": 1, "unitCents": 1500 }
#         ],
#         "declared": { "netCents": 3498, "vatCents": 0, "grossCents": 3498 }
#       },
#       {
#         "orderId": "A400",
#         "shipTo": { "country": "BE" },
#         "customer": { "email": "ada@other.example", "vatId": null },
#         "lines": [
#           { "sku": "WID-001", "qty": 2, "unitCents": 999 },
#           { "sku": "GAD-002", "qty": 1, "unitCents": 1500 }
#         ],
#         "declared": { "netCents": 3498, "vatCents": 508, "grossCents": 4006 }
#       }
#     ]
#   }"""^^rdf:JSON .
#   ("""{
#     "meta~data": { "batch": "2025-12-18" },
#     "orders": [
#       {
#         "orderId": "A100",
#         "shipTo": { "country": "BE" },
#         "customer": { "email": "Ada@Example.ORG", "vatId": null },
#         "lines": [
#           { "sku": "wid-001", "qty": 2, "unitCents": 999 },
#           { "sku": "GAD-002", "qty": 1, "unitCents": 1500 }
#         ],
#         "declared": { "netCents": 3498, "vatCents": 509, "grossCents": 4007 }
#       },
#       {
#         "orderId": "A200",
#         "shipTo": { "country": "US" },
#         "customer": { "email": "bob@example.org", "vatId": null },
#         "lines": [
#           { "sku": "WID-001", "qty": 2, "unitCents": 999 },
#           { "sku": "GAD-002", "qty": 1, "unitCents": 1500 }
#         ],
#         "declared": { "netCents": 3498, "vatCents": 0, "grossCents": 3498 }
#       },
#       {
#         "orderId": "A300",
#         "shipTo": { "country": "NL" },
#         "customer": { "email": "acct@company.nl", "vatId": "NL999999999B01" },
#         "lines": [
#           { "sku": "WID-001", "qty": 2, "unitCents": 999 },
#           { "sku": "GAD-002", "qty": 1, "unitCents": 1500 }
#         ],
#         "declared": { "netCents": 3498, "vatCents": 0, "grossCents": 3498 }
#       },
#       {
#         "orderId": "A301",
#         "shipTo": { "country": "NL" },
#         "customer": { "email": "billing@company.nl", "vatId": "NL999999999B01" },
#         "lines": [
#           { "sku": "WID-001", "qty": 2, "unitCents": 999 },
#           { "sku": "GAD-002", "qty": 1, "unitCents": 1500 }
#         ],
#         "declared": { "netCents": 3498, "vatCents": 0, "grossCents": 3498 }
#       },
#       {
#         "orderId": "A400",
#         "shipTo": { "country": "BE" },
#         "customer": { "email": "ada@other.example", "vatId": null },
#         "lines": [
#           { "sku": "WID-001", "qty": 2, "unitCents": 999 },
#           { "sku": "GAD-002", "qty": 1, "unitCents": 1500 }
#         ],
#         "declared": { "netCents": 3498, "vatCents": 508, "grossCents": 4006 }
#       }
#     ]
#   }"""^^rdf:JSON "/orders") string:jsonPointer ("""{"orderId":"A100","shipTo":{"country":"BE"},"customer":{"email":"Ada@Example.ORG","vatId":null},"lines":[{"sku":"wid-001","qty":2,"unitCents":999},{"sku":"GAD-002","qty":1,"unitCents":1500}],"declared":{"netCents":3498,"vatCents":509,"grossCents":4007}}"""^^rdf:JSON """{"orderId":"A200","shipTo":{"country":"US"},"customer":{"email":"bob@example.org","vatId":null},"lines":[{"sku":"WID-001","qty":2,"unitCents":999},{"sku":"GAD-002","qty":1,"unitCents":1500}],"declared":{"netCents":3498,"vatCents":0,"grossCents":3498}}"""^^rdf:JSON """{"orderId":"A300","shipTo":{"country":"NL"},"customer":{"email":"acct@company.nl","vatId":"NL999999999B01"},"lines":[{"sku":"WID-001","qty":2,"unitCents":999},{"sku":"GAD-002","qty":1,"unitCents":1500}],"declared":{"netCents":3498,"vatCents":0,"grossCents":3498}}"""^^rdf:JSON """{"orderId":"A301","shipTo":{"country":"NL"},"customer":{"email":"billing@company.nl","vatId":"NL999999999B01"},"lines":[{"sku":"WID-001","qty":2,"unitCents":999},{"sku":"GAD-002","qty":1,"unitCents":1500}],"declared":{"netCents":3498,"vatCents":0,"grossCents":3498}}"""^^rdf:JSON """{"orderId":"A400","shipTo":{"country":"BE"},"customer":{"email":"ada@other.example","vatId":null},"lines":[{"sku":"WID-001","qty":2,"unitCents":999},{"sku":"GAD-002","qty":1,"unitCents":1500}],"declared":{"netCents":3498,"vatCents":508,"grossCents":4006}}"""^^rdf:JSON) .
#   ("""{"orderId":"A100","shipTo":{"country":"BE"},"customer":{"email":"Ada@Example.ORG","vatId":null},"lines":[{"sku":"wid-001","qty":2,"unitCents":999},{"sku":"GAD-002","qty":1,"unitCents":1500}],"declared":{"netCents":3498,"vatCents":509,"grossCents":4007}}"""^^rdf:JSON """{"orderId":"A200","shipTo":{"country":"US"},"customer":{"email":"bob@example.org","vatId":null},"lines":[{"sku":"WID-001","qty":2,"unitCents":999},{"sku":"GAD-002","qty":1,"unitCents":1500}],"declared":{"netCents":3498,"vatCents":0,"grossCents":3498}}"""^^rdf:JSON """{"orderId":"A300","shipTo":{"country":"NL"},"customer":{"email":"acct@company.nl","vatId":"NL999999999B01"},"lines":[{"sku":"WID-001","qty":2,"unitCents":999},{"sku":"GAD-002","qty":1,"unitCents":1500}],"declared":{"netCents":3498,"vatCents":0,"grossCents":3498}}"""^^rdf:JSON """{"orderId":"A301","shipTo":{"country":"NL"},"customer":{"email":"billing@company.nl","vatId":"NL999999999B01"},"lines":[{"sku":"WID-001","qty":2,"unitCents":999},{"sku":"GAD-002","qty":1,"unitCents":1500}],"declared":{"netCents":3498,"vatCents":0,"grossCents":3498}}"""^^rdf:JSON """{"orderId":"A400","shipTo":{"country":"BE"},"customer":{"email":"ada@other.example","vatId":null},"lines":[{"sku":"WID-001","qty":2,"unitCents":999},{"sku":"GAD-002","qty":1,"unitCents":1500}],"declared":{"netCents":3498,"vatCents":508,"grossCents":4006}}"""^^rdf:JSON) list:iterate (1 """{"orderId":"A200","shipTo":{"country":"US"},"customer":{"email":"bob@example.org","vatId":null},"lines":[{"sku":"WID-001","qty":2,"unitCents":999},{"sku":"GAD-002","qty":1,"unitCents":1500}],"declared":{"netCents":3498,"vatCents":0,"grossCents":3498}}"""^^rdf:JSON) .
#   ("""{"orderId":"A200","shipTo":{"country":"US"},"customer":{"email":"bob@example.org","vatId":null},"lines":[{"sku":"WID-001","qty":2,"unitCents":999},{"sku":"GAD-002","qty":1,"unitCents":1500}],"declared":{"netCents":3498,"vatCents":0,"grossCents":3498}}"""^^rdf:JSON "/orderId") string:jsonPointer "A200" .
#   ("urn:example:order:%s" "A200") string:format "urn:example:order:A200" .
#   <urn:example:order:A200> log:uri "urn:example:order:A200" .
#   ("""{"orderId":"A200","shipTo":{"country":"US"},"customer":{"email":"bob@example.org","vatId":null},"lines":[{"sku":"WID-001","qty":2,"unitCents":999},{"sku":"GAD-002","qty":1,"unitCents":1500}],"declared":{"netCents":3498,"vatCents":0,"grossCents":3498}}"""^^rdf:JSON "/lines") string:jsonPointer ("""{"sku":"WID-001","qty":2,"unitCents":999}"""^^rdf:JSON """{"sku":"GAD-002","qty":1,"unitCents":1500}"""^^rdf:JSON) .
#   ("""{"sku":"WID-001","qty":2,"unitCents":999}"""^^rdf:JSON """{"sku":"GAD-002","qty":1,"unitCents":1500}"""^^rdf:JSON) list:iterate (0 """{"sku":"WID-001","qty":2,"unitCents":999}"""^^rdf:JSON) .
#   ("""{"sku":"WID-001","qty":2,"unitCents":999}"""^^rdf:JSON "/sku") string:jsonPointer "WID-001" .
#   ("""{"sku":"WID-001","qty":2,"unitCents":999}"""^^rdf:JSON "/qty") string:jsonPointer 2 .
#   ("""{"sku":"WID-001","qty":2,"unitCents":999}"""^^rdf:JSON "/unitCents") string:jsonPointer 999 .
#   ex:Widget a ex:Product .
#   ex:Widget ex:sku "WID-001" .
#   (2 999) math:product 1998 .
#   ("urn:example:order:%s#line:%s" "A200" 0) string:format "urn:example:order:A200#line:0" .
#   <urn:example:order:A200#line:0> log:uri "urn:example:order:A200#line:0" .
#   "WID-001" string:equalIgnoringCase "WID-001" .
# via the schematic forward rule:
#   {
#     ex:feed ex:json ?J .
#     (?J "/orders") string:jsonPointer ?Orders .
#     ?Orders list:iterate (?OrderIndex ?OrderJson) .
#     (?OrderJson "/orderId") string:jsonPointer ?OrderId .
#     ("urn:example:order:%s" ?OrderId) string:format ?OrderUriStr .
#     ?Order log:uri ?OrderUriStr .
#     (?OrderJson "/lines") string:jsonPointer ?Lines .
#     ?Lines list:iterate (?LineIndex ?LineJson) .
#     (?LineJson "/sku") string:jsonPointer ?SkuJson .
#     (?LineJson "/qty") string:jsonPointer ?Qty .
#     (?LineJson "/unitCents") string:jsonPointer ?UnitCents .
#     ?Product a ex:Product .
#     ?Product ex:sku ?SkuCat .
#     (?Qty ?UnitCents) math:product ?NetCents .
#     ("urn:example:order:%s#line:%s" ?OrderId ?LineIndex) string:format ?LineUriStr .
#     ?Line log:uri ?LineUriStr .
#     ?SkuJson string:equalIgnoringCase ?SkuCat .
#   } => {
#     ?Order ex:line ?Line .
#     ?Line a ex:OrderLine .
#     ?Line ex:lineIndex ?LineIndex .
#     ?Line ex:product ?Product .
#     ?Line ex:sku ?SkuCat .
#     ?Line ex:qty ?Qty .
#     ?Line ex:unitCents ?UnitCents .
#     ?Line ex:netCents ?NetCents .
#   } .
# with substitution (on rule variables):
#   ?J = """{
#     "meta~data": { "batch": "2025-12-18" },
#     "orders": [
#     {
#     "orderId": "A100",
#     "shipTo": { "country": "BE" },
#     "customer": { "email": "Ada@Example.ORG", "vatId": null },
#     "lines": [
#     { "sku": "wid-001", "qty": 2, "unitCents": 999 },
#     { "sku": "GAD-002", "qty": 1, "unitCents": 1500 }
#     ],
#     "declared": { "netCents": 3498, "vatCents": 509, "grossCents": 4007 }
#     },
#     {
#     "orderId": "A200",
#     "shipTo": { "country": "US" },
#     "customer": { "email": "bob@example.org", "vatId": null },
#     "lines": [
#     { "sku": "WID-001", "qty": 2, "unitCents": 999 },
#     { "sku": "GAD-002", "qty": 1, "unitCents": 1500 }
#     ],
#     "declared": { "netCents": 3498, "vatCents": 0, "grossCents": 3498 }
#     },
#     {
#     "orderId": "A300",
#     "shipTo": { "country": "NL" },
#     "customer": { "email": "acct@company.nl", "vatId": "NL999999999B01" },
#     "lines": [
#     { "sku": "WID-001", "qty": 2, "unitCents": 999 },
#     { "sku": "GAD-002", "qty": 1, "unitCents": 1500 }
#     ],
#     "declared": { "netCents": 3498, "vatCents": 0, "grossCents": 3498 }
#     },
#     {
#     "orderId": "A301",
#     "shipTo": { "country": "NL" },
#     "customer": { "email": "billing@company.nl", "vatId": "NL999999999B01" },
#     "lines": [
#     { "sku": "WID-001", "qty": 2, "unitCents": 999 },
#     { "sku": "GAD-002", "qty": 1, "unitCents": 1500 }
#     ],
#     "declared": { "netCents": 3498, "vatCents": 0, "grossCents": 3498 }
#     },
#     {
#     "orderId": "A400",
#     "shipTo": { "country": "BE" },
#     "customer": { "email": "ada@other.example", "vatId": null },
#     "lines": [
#     { "sku": "WID-001", "qty": 2, "unitCents": 999 },
#     { "sku": "GAD-002", "qty": 1, "unitCents": 1500 }
#     ],
#     "declared": { "netCents": 3498, "vatCents": 508, "grossCents": 4006 }
#     }
#     ]
#   }"""^^rdf:JSON
#   ?Line = <urn:example:order:A200#line:0>
#   ?LineIndex = 0
#   ?LineJson = """{"sku":"WID-001","qty":2,"unitCents":999}"""^^rdf:JSON
#   ?LineUriStr = "urn:example:order:A200#line:0"
#   ?Lines = ("""{"sku":"WID-001","qty":2,"unitCents":999}"""^^rdf:JSON """{"sku":"GAD-002","qty":1,"unitCents":1500}"""^^rdf:JSON)
#   ?NetCents = 1998
#   ?Order = <urn:example:order:A200>
#   ?OrderId = "A200"
#   ?OrderIndex = 1
#   ?OrderJson = """{"orderId":"A200","shipTo":{"country":"US"},"customer":{"email":"bob@example.org","vatId":null},"lines":[{"sku":"WID-001","qty":2,"unitCents":999},{"sku":"GAD-002","qty":1,"unitCents":1500}],"declared":{"netCents":3498,"vatCents":0,"grossCents":3498}}"""^^rdf:JSON
#   ?OrderUriStr = "urn:example:order:A200"
#   ?Orders = ("""{"orderId":"A100","shipTo":{"country":"BE"},"customer":{"email":"Ada@Example.ORG","vatId":null},"lines":[{"sku":"wid-001","qty":2,"unitCents":999},{"sku":"GAD-002","qty":1,"unitCents":1500}],"declared":{"netCents":3498,"vatCents":509,"grossCents":4007}}"""^^rdf:JSON """{"orderId":"A200","shipTo":{"country":"US"},"customer":{"email":"bob@example.org","vatId":null},"lines":[{"sku":"WID-001","qty":2,"unitCents":999},{"sku":"GAD-002","qty":1,"unitCents":1500}],"declared":{"netCents":3498,"vatCents":0,"grossCents":3498}}"""^^rdf:JSON """{"orderId":"A300","shipTo":{"country":"NL"},"customer":{"email":"acct@company.nl","vatId":"NL999999999B01"},"lines":[{"sku":"WID-001","qty":2,"unitCents":999},{"sku":"GAD-002","qty":1,"unitCents":1500}],"declared":{"netCents":3498,"vatCents":0,"grossCents":3498}}"""^^rdf:JSON """{"orderId":"A301","shipTo":{"country":"NL"},"customer":{"email":"billing@company.nl","vatId":"NL999999999B01"},"lines":[{"sku":"WID-001","qty":2,"unitCents":999},{"sku":"GAD-002","qty":1,"unitCents":1500}],"declared":{"netCents":3498,"vatCents":0,"grossCents":3498}}"""^^rdf:JSON """{"orderId":"A400","shipTo":{"country":"BE"},"customer":{"email":"ada@other.example","vatId":null},"lines":[{"sku":"WID-001","qty":2,"unitCents":999},{"sku":"GAD-002","qty":1,"unitCents":1500}],"declared":{"netCents":3498,"vatCents":508,"grossCents":4006}}"""^^rdf:JSON)
#   ?Product = ex:Widget
#   ?Qty = 2
#   ?SkuCat = "WID-001"
#   ?SkuJson = "WID-001"
#   ?UnitCents = 999
# Therefore the derived triple above is entailed by the rules and facts.
# ----------------------------------------------------------------------

<urn:example:order:A200#line:0> a ex:OrderLine .

# ----------------------------------------------------------------------
# Proof for derived triple:
#   <urn:example:order:A200#line:0> ex:lineIndex 0 .
# It holds because the following instance of the rule body is provable:
#   ex:feed ex:json """{
#     "meta~data": { "batch": "2025-12-18" },
#     "orders": [
#       {
#         "orderId": "A100",
#         "shipTo": { "country": "BE" },
#         "customer": { "email": "Ada@Example.ORG", "vatId": null },
#         "lines": [
#           { "sku": "wid-001", "qty": 2, "unitCents": 999 },
#           { "sku": "GAD-002", "qty": 1, "unitCents": 1500 }
#         ],
#         "declared": { "netCents": 3498, "vatCents": 509, "grossCents": 4007 }
#       },
#       {
#         "orderId": "A200",
#         "shipTo": { "country": "US" },
#         "customer": { "email": "bob@example.org", "vatId": null },
#         "lines": [
#           { "sku": "WID-001", "qty": 2, "unitCents": 999 },
#           { "sku": "GAD-002", "qty": 1, "unitCents": 1500 }
#         ],
#         "declared": { "netCents": 3498, "vatCents": 0, "grossCents": 3498 }
#       },
#       {
#         "orderId": "A300",
#         "shipTo": { "country": "NL" },
#         "customer": { "email": "acct@company.nl", "vatId": "NL999999999B01" },
#         "lines": [
#           { "sku": "WID-001", "qty": 2, "unitCents": 999 },
#           { "sku": "GAD-002", "qty": 1, "unitCents": 1500 }
#         ],
#         "declared": { "netCents": 3498, "vatCents": 0, "grossCents": 3498 }
#       },
#       {
#         "orderId": "A301",
#         "shipTo": { "country": "NL" },
#         "customer": { "email": "billing@company.nl", "vatId": "NL999999999B01" },
#         "lines": [
#           { "sku": "WID-001", "qty": 2, "unitCents": 999 },
#           { "sku": "GAD-002", "qty": 1, "unitCents": 1500 }
#         ],
#         "declared": { "netCents": 3498, "vatCents": 0, "grossCents": 3498 }
#       },
#       {
#         "orderId": "A400",
#         "shipTo": { "country": "BE" },
#         "customer": { "email": "ada@other.example", "vatId": null },
#         "lines": [
#           { "sku": "WID-001", "qty": 2, "unitCents": 999 },
#           { "sku": "GAD-002", "qty": 1, "unitCents": 1500 }
#         ],
#         "declared": { "netCents": 3498, "vatCents": 508, "grossCents": 4006 }
#       }
#     ]
#   }"""^^rdf:JSON .
#   ("""{
#     "meta~data": { "batch": "2025-12-18" },
#     "orders": [
#       {
#         "orderId": "A100",
#         "shipTo": { "country": "BE" },
#         "customer": { "email": "Ada@Example.ORG", "vatId": null },
#         "lines": [
#           { "sku": "wid-001", "qty": 2, "unitCents": 999 },
#           { "sku": "GAD-002", "qty": 1, "unitCents": 1500 }
#         ],
#         "declared": { "netCents": 3498, "vatCents": 509, "grossCents": 4007 }
#       },
#       {
#         "orderId": "A200",
#         "shipTo": { "country": "US" },
#         "customer": { "email": "bob@example.org", "vatId": null },
#         "lines": [
#           { "sku": "WID-001", "qty": 2, "unitCents": 999 },
#           { "sku": "GAD-002", "qty": 1, "unitCents": 1500 }
#         ],
#         "declared": { "netCents": 3498, "vatCents": 0, "grossCents": 3498 }
#       },
#       {
#         "orderId": "A300",
#         "shipTo": { "country": "NL" },
#         "customer": { "email": "acct@company.nl", "vatId": "NL999999999B01" },
#         "lines": [
#           { "sku": "WID-001", "qty": 2, "unitCents": 999 },
#           { "sku": "GAD-002", "qty": 1, "unitCents": 1500 }
#         ],
#         "declared": { "netCents": 3498, "vatCents": 0, "grossCents": 3498 }
#       },
#       {
#         "orderId": "A301",
#         "shipTo": { "country": "NL" },
#         "customer": { "email": "billing@company.nl", "vatId": "NL999999999B01" },
#         "lines": [
#           { "sku": "WID-001", "qty": 2, "unitCents": 999 },
#           { "sku": "GAD-002", "qty": 1, "unitCents": 1500 }
#         ],
#         "declared": { "netCents": 3498, "vatCents": 0, "grossCents": 3498 }
#       },
#       {
#         "orderId": "A400",
#         "shipTo": { "country": "BE" },
#         "customer": { "email": "ada@other.example", "vatId": null },
#         "lines": [
#           { "sku": "WID-001", "qty": 2, "unitCents": 999 },
#           { "sku": "GAD-002", "qty": 1, "unitCents": 1500 }
#         ],
#         "declared": { "netCents": 3498, "vatCents": 508, "grossCents": 4006 }
#       }
#     ]
#   }"""^^rdf:JSON "/orders") string:jsonPointer ("""{"orderId":"A100","shipTo":{"country":"BE"},"customer":{"email":"Ada@Example.ORG","vatId":null},"lines":[{"sku":"wid-001","qty":2,"unitCents":999},{"sku":"GAD-002","qty":1,"unitCents":1500}],"declared":{"netCents":3498,"vatCents":509,"grossCents":4007}}"""^^rdf:JSON """{"orderId":"A200","shipTo":{"country":"US"},"customer":{"email":"bob@example.org","vatId":null},"lines":[{"sku":"WID-001","qty":2,"unitCents":999},{"sku":"GAD-002","qty":1,"unitCents":1500}],"declared":{"netCents":3498,"vatCents":0,"grossCents":3498}}"""^^rdf:JSON """{"orderId":"A300","shipTo":{"country":"NL"},"customer":{"email":"acct@company.nl","vatId":"NL999999999B01"},"lines":[{"sku":"WID-001","qty":2,"unitCents":999},{"sku":"GAD-002","qty":1,"unitCents":1500}],"declared":{"netCents":3498,"vatCents":0,"grossCents":3498}}"""^^rdf:JSON """{"orderId":"A301","shipTo":{"country":"NL"},"customer":{"email":"billing@company.nl","vatId":"NL999999999B01"},"lines":[{"sku":"WID-001","qty":2,"unitCents":999},{"sku":"GAD-002","qty":1,"unitCents":1500}],"declared":{"netCents":3498,"vatCents":0,"grossCents":3498}}"""^^rdf:JSON """{"orderId":"A400","shipTo":{"country":"BE"},"customer":{"email":"ada@other.example","vatId":null},"lines":[{"sku":"WID-001","qty":2,"unitCents":999},{"sku":"GAD-002","qty":1,"unitCents":1500}],"declared":{"netCents":3498,"vatCents":508,"grossCents":4006}}"""^^rdf:JSON) .
#   ("""{"orderId":"A100","shipTo":{"country":"BE"},"customer":{"email":"Ada@Example.ORG","vatId":null},"lines":[{"sku":"wid-001","qty":2,"unitCents":999},{"sku":"GAD-002","qty":1,"unitCents":1500}],"declared":{"netCents":3498,"vatCents":509,"grossCents":4007}}"""^^rdf:JSON """{"orderId":"A200","shipTo":{"country":"US"},"customer":{"email":"bob@example.org","vatId":null},"lines":[{"sku":"WID-001","qty":2,"unitCents":999},{"sku":"GAD-002","qty":1,"unitCents":1500}],"declared":{"netCents":3498,"vatCents":0,"grossCents":3498}}"""^^rdf:JSON """{"orderId":"A300","shipTo":{"country":"NL"},"customer":{"email":"acct@company.nl","vatId":"NL999999999B01"},"lines":[{"sku":"WID-001","qty":2,"unitCents":999},{"sku":"GAD-002","qty":1,"unitCents":1500}],"declared":{"netCents":3498,"vatCents":0,"grossCents":3498}}"""^^rdf:JSON """{"orderId":"A301","shipTo":{"country":"NL"},"customer":{"email":"billing@company.nl","vatId":"NL999999999B01"},"lines":[{"sku":"WID-001","qty":2,"unitCents":999},{"sku":"GAD-002","qty":1,"unitCents":1500}],"declared":{"netCents":3498,"vatCents":0,"grossCents":3498}}"""^^rdf:JSON """{"orderId":"A400","shipTo":{"country":"BE"},"customer":{"email":"ada@other.example","vatId":null},"lines":[{"sku":"WID-001","qty":2,"unitCents":999},{"sku":"GAD-002","qty":1,"unitCents":1500}],"declared":{"netCents":3498,"vatCents":508,"grossCents":4006}}"""^^rdf:JSON) list:iterate (1 """{"orderId":"A200","shipTo":{"country":"US"},"customer":{"email":"bob@example.org","vatId":null},"lines":[{"sku":"WID-001","qty":2,"unitCents":999},{"sku":"GAD-002","qty":1,"unitCents":1500}],"declared":{"netCents":3498,"vatCents":0,"grossCents":3498}}"""^^rdf:JSON) .
#   ("""{"orderId":"A200","shipTo":{"country":"US"},"customer":{"email":"bob@example.org","vatId":null},"lines":[{"sku":"WID-001","qty":2,"unitCents":999},{"sku":"GAD-002","qty":1,"unitCents":1500}],"declared":{"netCents":3498,"vatCents":0,"grossCents":3498}}"""^^rdf:JSON "/orderId") string:jsonPointer "A200" .
#   ("urn:example:order:%s" "A200") string:format "urn:example:order:A200" .
#   <urn:example:order:A200> log:uri "urn:example:order:A200" .
#   ("""{"orderId":"A200","shipTo":{"country":"US"},"customer":{"email":"bob@example.org","vatId":null},"lines":[{"sku":"WID-001","qty":2,"unitCents":999},{"sku":"GAD-002","qty":1,"unitCents":1500}],"declared":{"netCents":3498,"vatCents":0,"grossCents":3498}}"""^^rdf:JSON "/lines") string:jsonPointer ("""{"sku":"WID-001","qty":2,"unitCents":999}"""^^rdf:JSON """{"sku":"GAD-002","qty":1,"unitCents":1500}"""^^rdf:JSON) .
#   ("""{"sku":"WID-001","qty":2,"unitCents":999}"""^^rdf:JSON """{"sku":"GAD-002","qty":1,"unitCents":1500}"""^^rdf:JSON) list:iterate (0 """{"sku":"WID-001","qty":2,"unitCents":999}"""^^rdf:JSON) .
#   ("""{"sku":"WID-001","qty":2,"unitCents":999}"""^^rdf:JSON "/sku") string:jsonPointer "WID-001" .
#   ("""{"sku":"WID-001","qty":2,"unitCents":999}"""^^rdf:JSON "/qty") string:jsonPointer 2 .
#   ("""{"sku":"WID-001","qty":2,"unitCents":999}"""^^rdf:JSON "/unitCents") string:jsonPointer 999 .
#   ex:Widget a ex:Product .
#   ex:Widget ex:sku "WID-001" .
#   (2 999) math:product 1998 .
#   ("urn:example:order:%s#line:%s" "A200" 0) string:format "urn:example:order:A200#line:0" .
#   <urn:example:order:A200#line:0> log:uri "urn:example:order:A200#line:0" .
#   "WID-001" string:equalIgnoringCase "WID-001" .
# via the schematic forward rule:
#   {
#     ex:feed ex:json ?J .
#     (?J "/orders") string:jsonPointer ?Orders .
#     ?Orders list:iterate (?OrderIndex ?OrderJson) .
#     (?OrderJson "/orderId") string:jsonPointer ?OrderId .
#     ("urn:example:order:%s" ?OrderId) string:format ?OrderUriStr .
#     ?Order log:uri ?OrderUriStr .
#     (?OrderJson "/lines") string:jsonPointer ?Lines .
#     ?Lines list:iterate (?LineIndex ?LineJson) .
#     (?LineJson "/sku") string:jsonPointer ?SkuJson .
#     (?LineJson "/qty") string:jsonPointer ?Qty .
#     (?LineJson "/unitCents") string:jsonPointer ?UnitCents .
#     ?Product a ex:Product .
#     ?Product ex:sku ?SkuCat .
#     (?Qty ?UnitCents) math:product ?NetCents .
#     ("urn:example:order:%s#line:%s" ?OrderId ?LineIndex) string:format ?LineUriStr .
#     ?Line log:uri ?LineUriStr .
#     ?SkuJson string:equalIgnoringCase ?SkuCat .
#   } => {
#     ?Order ex:line ?Line .
#     ?Line a ex:OrderLine .
#     ?Line ex:lineIndex ?LineIndex .
#     ?Line ex:product ?Product .
#     ?Line ex:sku ?SkuCat .
#     ?Line ex:qty ?Qty .
#     ?Line ex:unitCents ?UnitCents .
#     ?Line ex:netCents ?NetCents .
#   } .
# with substitution (on rule variables):
#   ?J = """{
#     "meta~data": { "batch": "2025-12-18" },
#     "orders": [
#     {
#     "orderId": "A100",
#     "shipTo": { "country": "BE" },
#     "customer": { "email": "Ada@Example.ORG", "vatId": null },
#     "lines": [
#     { "sku": "wid-001", "qty": 2, "unitCents": 999 },
#     { "sku": "GAD-002", "qty": 1, "unitCents": 1500 }
#     ],
#     "declared": { "netCents": 3498, "vatCents": 509, "grossCents": 4007 }
#     },
#     {
#     "orderId": "A200",
#     "shipTo": { "country": "US" },
#     "customer": { "email": "bob@example.org", "vatId": null },
#     "lines": [
#     { "sku": "WID-001", "qty": 2, "unitCents": 999 },
#     { "sku": "GAD-002", "qty": 1, "unitCents": 1500 }
#     ],
#     "declared": { "netCents": 3498, "vatCents": 0, "grossCents": 3498 }
#     },
#     {
#     "orderId": "A300",
#     "shipTo": { "country": "NL" },
#     "customer": { "email": "acct@company.nl", "vatId": "NL999999999B01" },
#     "lines": [
#     { "sku": "WID-001", "qty": 2, "unitCents": 999 },
#     { "sku": "GAD-002", "qty": 1, "unitCents": 1500 }
#     ],
#     "declared": { "netCents": 3498, "vatCents": 0, "grossCents": 3498 }
#     },
#     {
#     "orderId": "A301",
#     "shipTo": { "country": "NL" },
#     "customer": { "email": "billing@company.nl", "vatId": "NL999999999B01" },
#     "lines": [
#     { "sku": "WID-001", "qty": 2, "unitCents": 999 },
#     { "sku": "GAD-002", "qty": 1, "unitCents": 1500 }
#     ],
#     "declared": { "netCents": 3498, "vatCents": 0, "grossCents": 3498 }
#     },
#     {
#     "orderId": "A400",
#     "shipTo": { "country": "BE" },
#     "customer": { "email": "ada@other.example", "vatId": null },
#     "lines": [
#     { "sku": "WID-001", "qty": 2, "unitCents": 999 },
#     { "sku": "GAD-002", "qty": 1, "unitCents": 1500 }
#     ],
#     "declared": { "netCents": 3498, "vatCents": 508, "grossCents": 4006 }
#     }
#     ]
#   }"""^^rdf:JSON
#   ?Line = <urn:example:order:A200#line:0>
#   ?LineIndex = 0
#   ?LineJson = """{"sku":"WID-001","qty":2,"unitCents":999}"""^^rdf:JSON
#   ?LineUriStr = "urn:example:order:A200#line:0"
#   ?Lines = ("""{"sku":"WID-001","qty":2,"unitCents":999}"""^^rdf:JSON """{"sku":"GAD-002","qty":1,"unitCents":1500}"""^^rdf:JSON)
#   ?NetCents = 1998
#   ?Order = <urn:example:order:A200>
#   ?OrderId = "A200"
#   ?OrderIndex = 1
#   ?OrderJson = """{"orderId":"A200","shipTo":{"country":"US"},"customer":{"email":"bob@example.org","vatId":null},"lines":[{"sku":"WID-001","qty":2,"unitCents":999},{"sku":"GAD-002","qty":1,"unitCents":1500}],"declared":{"netCents":3498,"vatCents":0,"grossCents":3498}}"""^^rdf:JSON
#   ?OrderUriStr = "urn:example:order:A200"
#   ?Orders = ("""{"orderId":"A100","shipTo":{"country":"BE"},"customer":{"email":"Ada@Example.ORG","vatId":null},"lines":[{"sku":"wid-001","qty":2,"unitCents":999},{"sku":"GAD-002","qty":1,"unitCents":1500}],"declared":{"netCents":3498,"vatCents":509,"grossCents":4007}}"""^^rdf:JSON """{"orderId":"A200","shipTo":{"country":"US"},"customer":{"email":"bob@example.org","vatId":null},"lines":[{"sku":"WID-001","qty":2,"unitCents":999},{"sku":"GAD-002","qty":1,"unitCents":1500}],"declared":{"netCents":3498,"vatCents":0,"grossCents":3498}}"""^^rdf:JSON """{"orderId":"A300","shipTo":{"country":"NL"},"customer":{"email":"acct@company.nl","vatId":"NL999999999B01"},"lines":[{"sku":"WID-001","qty":2,"unitCents":999},{"sku":"GAD-002","qty":1,"unitCents":1500}],"declared":{"netCents":3498,"vatCents":0,"grossCents":3498}}"""^^rdf:JSON """{"orderId":"A301","shipTo":{"country":"NL"},"customer":{"email":"billing@company.nl","vatId":"NL999999999B01"},"lines":[{"sku":"WID-001","qty":2,"unitCents":999},{"sku":"GAD-002","qty":1,"unitCents":1500}],"declared":{"netCents":3498,"vatCents":0,"grossCents":3498}}"""^^rdf:JSON """{"orderId":"A400","shipTo":{"country":"BE"},"customer":{"email":"ada@other.example","vatId":null},"lines":[{"sku":"WID-001","qty":2,"unitCents":999},{"sku":"GAD-002","qty":1,"unitCents":1500}],"declared":{"netCents":3498,"vatCents":508,"grossCents":4006}}"""^^rdf:JSON)
#   ?Product = ex:Widget
#   ?Qty = 2
#   ?SkuCat = "WID-001"
#   ?SkuJson = "WID-001"
#   ?UnitCents = 999
# Therefore the derived triple above is entailed by the rules and facts.
# ----------------------------------------------------------------------

<urn:example:order:A200#line:0> ex:lineIndex 0 .

# ----------------------------------------------------------------------
# Proof for derived triple:
#   <urn:example:order:A200#line:0> ex:product ex:Widget .
# It holds because the following instance of the rule body is provable:
#   ex:feed ex:json """{
#     "meta~data": { "batch": "2025-12-18" },
#     "orders": [
#       {
#         "orderId": "A100",
#         "shipTo": { "country": "BE" },
#         "customer": { "email": "Ada@Example.ORG", "vatId": null },
#         "lines": [
#           { "sku": "wid-001", "qty": 2, "unitCents": 999 },
#           { "sku": "GAD-002", "qty": 1, "unitCents": 1500 }
#         ],
#         "declared": { "netCents": 3498, "vatCents": 509, "grossCents": 4007 }
#       },
#       {
#         "orderId": "A200",
#         "shipTo": { "country": "US" },
#         "customer": { "email": "bob@example.org", "vatId": null },
#         "lines": [
#           { "sku": "WID-001", "qty": 2, "unitCents": 999 },
#           { "sku": "GAD-002", "qty": 1, "unitCents": 1500 }
#         ],
#         "declared": { "netCents": 3498, "vatCents": 0, "grossCents": 3498 }
#       },
#       {
#         "orderId": "A300",
#         "shipTo": { "country": "NL" },
#         "customer": { "email": "acct@company.nl", "vatId": "NL999999999B01" },
#         "lines": [
#           { "sku": "WID-001", "qty": 2, "unitCents": 999 },
#           { "sku": "GAD-002", "qty": 1, "unitCents": 1500 }
#         ],
#         "declared": { "netCents": 3498, "vatCents": 0, "grossCents": 3498 }
#       },
#       {
#         "orderId": "A301",
#         "shipTo": { "country": "NL" },
#         "customer": { "email": "billing@company.nl", "vatId": "NL999999999B01" },
#         "lines": [
#           { "sku": "WID-001", "qty": 2, "unitCents": 999 },
#           { "sku": "GAD-002", "qty": 1, "unitCents": 1500 }
#         ],
#         "declared": { "netCents": 3498, "vatCents": 0, "grossCents": 3498 }
#       },
#       {
#         "orderId": "A400",
#         "shipTo": { "country": "BE" },
#         "customer": { "email": "ada@other.example", "vatId": null },
#         "lines": [
#           { "sku": "WID-001", "qty": 2, "unitCents": 999 },
#           { "sku": "GAD-002", "qty": 1, "unitCents": 1500 }
#         ],
#         "declared": { "netCents": 3498, "vatCents": 508, "grossCents": 4006 }
#       }
#     ]
#   }"""^^rdf:JSON .
#   ("""{
#     "meta~data": { "batch": "2025-12-18" },
#     "orders": [
#       {
#         "orderId": "A100",
#         "shipTo": { "country": "BE" },
#         "customer": { "email": "Ada@Example.ORG", "vatId": null },
#         "lines": [
#           { "sku": "wid-001", "qty": 2, "unitCents": 999 },
#           { "sku": "GAD-002", "qty": 1, "unitCents": 1500 }
#         ],
#         "declared": { "netCents": 3498, "vatCents": 509, "grossCents": 4007 }
#       },
#       {
#         "orderId": "A200",
#         "shipTo": { "country": "US" },
#         "customer": { "email": "bob@example.org", "vatId": null },
#         "lines": [
#           { "sku": "WID-001", "qty": 2, "unitCents": 999 },
#           { "sku": "GAD-002", "qty": 1, "unitCents": 1500 }
#         ],
#         "declared": { "netCents": 3498, "vatCents": 0, "grossCents": 3498 }
#       },
#       {
#         "orderId": "A300",
#         "shipTo": { "country": "NL" },
#         "customer": { "email": "acct@company.nl", "vatId": "NL999999999B01" },
#         "lines": [
#           { "sku": "WID-001", "qty": 2, "unitCents": 999 },
#           { "sku": "GAD-002", "qty": 1, "unitCents": 1500 }
#         ],
#         "declared": { "netCents": 3498, "vatCents": 0, "grossCents": 3498 }
#       },
#       {
#         "orderId": "A301",
#         "shipTo": { "country": "NL" },
#         "customer": { "email": "billing@company.nl", "vatId": "NL999999999B01" },
#         "lines": [
#           { "sku": "WID-001", "qty": 2, "unitCents": 999 },
#           { "sku": "GAD-002", "qty": 1, "unitCents": 1500 }
#         ],
#         "declared": { "netCents": 3498, "vatCents": 0, "grossCents": 3498 }
#       },
#       {
#         "orderId": "A400",
#         "shipTo": { "country": "BE" },
#         "customer": { "email": "ada@other.example", "vatId": null },
#         "lines": [
#           { "sku": "WID-001", "qty": 2, "unitCents": 999 },
#           { "sku": "GAD-002", "qty": 1, "unitCents": 1500 }
#         ],
#         "declared": { "netCents": 3498, "vatCents": 508, "grossCents": 4006 }
#       }
#     ]
#   }"""^^rdf:JSON "/orders") string:jsonPointer ("""{"orderId":"A100","shipTo":{"country":"BE"},"customer":{"email":"Ada@Example.ORG","vatId":null},"lines":[{"sku":"wid-001","qty":2,"unitCents":999},{"sku":"GAD-002","qty":1,"unitCents":1500}],"declared":{"netCents":3498,"vatCents":509,"grossCents":4007}}"""^^rdf:JSON """{"orderId":"A200","shipTo":{"country":"US"},"customer":{"email":"bob@example.org","vatId":null},"lines":[{"sku":"WID-001","qty":2,"unitCents":999},{"sku":"GAD-002","qty":1,"unitCents":1500}],"declared":{"netCents":3498,"vatCents":0,"grossCents":3498}}"""^^rdf:JSON """{"orderId":"A300","shipTo":{"country":"NL"},"customer":{"email":"acct@company.nl","vatId":"NL999999999B01"},"lines":[{"sku":"WID-001","qty":2,"unitCents":999},{"sku":"GAD-002","qty":1,"unitCents":1500}],"declared":{"netCents":3498,"vatCents":0,"grossCents":3498}}"""^^rdf:JSON """{"orderId":"A301","shipTo":{"country":"NL"},"customer":{"email":"billing@company.nl","vatId":"NL999999999B01"},"lines":[{"sku":"WID-001","qty":2,"unitCents":999},{"sku":"GAD-002","qty":1,"unitCents":1500}],"declared":{"netCents":3498,"vatCents":0,"grossCents":3498}}"""^^rdf:JSON """{"orderId":"A400","shipTo":{"country":"BE"},"customer":{"email":"ada@other.example","vatId":null},"lines":[{"sku":"WID-001","qty":2,"unitCents":999},{"sku":"GAD-002","qty":1,"unitCents":1500}],"declared":{"netCents":3498,"vatCents":508,"grossCents":4006}}"""^^rdf:JSON) .
#   ("""{"orderId":"A100","shipTo":{"country":"BE"},"customer":{"email":"Ada@Example.ORG","vatId":null},"lines":[{"sku":"wid-001","qty":2,"unitCents":999},{"sku":"GAD-002","qty":1,"unitCents":1500}],"declared":{"netCents":3498,"vatCents":509,"grossCents":4007}}"""^^rdf:JSON """{"orderId":"A200","shipTo":{"country":"US"},"customer":{"email":"bob@example.org","vatId":null},"lines":[{"sku":"WID-001","qty":2,"unitCents":999},{"sku":"GAD-002","qty":1,"unitCents":1500}],"declared":{"netCents":3498,"vatCents":0,"grossCents":3498}}"""^^rdf:JSON """{"orderId":"A300","shipTo":{"country":"NL"},"customer":{"email":"acct@company.nl","vatId":"NL999999999B01"},"lines":[{"sku":"WID-001","qty":2,"unitCents":999},{"sku":"GAD-002","qty":1,"unitCents":1500}],"declared":{"netCents":3498,"vatCents":0,"grossCents":3498}}"""^^rdf:JSON """{"orderId":"A301","shipTo":{"country":"NL"},"customer":{"email":"billing@company.nl","vatId":"NL999999999B01"},"lines":[{"sku":"WID-001","qty":2,"unitCents":999},{"sku":"GAD-002","qty":1,"unitCents":1500}],"declared":{"netCents":3498,"vatCents":0,"grossCents":3498}}"""^^rdf:JSON """{"orderId":"A400","shipTo":{"country":"BE"},"customer":{"email":"ada@other.example","vatId":null},"lines":[{"sku":"WID-001","qty":2,"unitCents":999},{"sku":"GAD-002","qty":1,"unitCents":1500}],"declared":{"netCents":3498,"vatCents":508,"grossCents":4006}}"""^^rdf:JSON) list:iterate (1 """{"orderId":"A200","shipTo":{"country":"US"},"customer":{"email":"bob@example.org","vatId":null},"lines":[{"sku":"WID-001","qty":2,"unitCents":999},{"sku":"GAD-002","qty":1,"unitCents":1500}],"declared":{"netCents":3498,"vatCents":0,"grossCents":3498}}"""^^rdf:JSON) .
#   ("""{"orderId":"A200","shipTo":{"country":"US"},"customer":{"email":"bob@example.org","vatId":null},"lines":[{"sku":"WID-001","qty":2,"unitCents":999},{"sku":"GAD-002","qty":1,"unitCents":1500}],"declared":{"netCents":3498,"vatCents":0,"grossCents":3498}}"""^^rdf:JSON "/orderId") string:jsonPointer "A200" .
#   ("urn:example:order:%s" "A200") string:format "urn:example:order:A200" .
#   <urn:example:order:A200> log:uri "urn:example:order:A200" .
#   ("""{"orderId":"A200","shipTo":{"country":"US"},"customer":{"email":"bob@example.org","vatId":null},"lines":[{"sku":"WID-001","qty":2,"unitCents":999},{"sku":"GAD-002","qty":1,"unitCents":1500}],"declared":{"netCents":3498,"vatCents":0,"grossCents":3498}}"""^^rdf:JSON "/lines") string:jsonPointer ("""{"sku":"WID-001","qty":2,"unitCents":999}"""^^rdf:JSON """{"sku":"GAD-002","qty":1,"unitCents":1500}"""^^rdf:JSON) .
#   ("""{"sku":"WID-001","qty":2,"unitCents":999}"""^^rdf:JSON """{"sku":"GAD-002","qty":1,"unitCents":1500}"""^^rdf:JSON) list:iterate (0 """{"sku":"WID-001","qty":2,"unitCents":999}"""^^rdf:JSON) .
#   ("""{"sku":"WID-001","qty":2,"unitCents":999}"""^^rdf:JSON "/sku") string:jsonPointer "WID-001" .
#   ("""{"sku":"WID-001","qty":2,"unitCents":999}"""^^rdf:JSON "/qty") string:jsonPointer 2 .
#   ("""{"sku":"WID-001","qty":2,"unitCents":999}"""^^rdf:JSON "/unitCents") string:jsonPointer 999 .
#   ex:Widget a ex:Product .
#   ex:Widget ex:sku "WID-001" .
#   (2 999) math:product 1998 .
#   ("urn:example:order:%s#line:%s" "A200" 0) string:format "urn:example:order:A200#line:0" .
#   <urn:example:order:A200#line:0> log:uri "urn:example:order:A200#line:0" .
#   "WID-001" string:equalIgnoringCase "WID-001" .
# via the schematic forward rule:
#   {
#     ex:feed ex:json ?J .
#     (?J "/orders") string:jsonPointer ?Orders .
#     ?Orders list:iterate (?OrderIndex ?OrderJson) .
#     (?OrderJson "/orderId") string:jsonPointer ?OrderId .
#     ("urn:example:order:%s" ?OrderId) string:format ?OrderUriStr .
#     ?Order log:uri ?OrderUriStr .
#     (?OrderJson "/lines") string:jsonPointer ?Lines .
#     ?Lines list:iterate (?LineIndex ?LineJson) .
#     (?LineJson "/sku") string:jsonPointer ?SkuJson .
#     (?LineJson "/qty") string:jsonPointer ?Qty .
#     (?LineJson "/unitCents") string:jsonPointer ?UnitCents .
#     ?Product a ex:Product .
#     ?Product ex:sku ?SkuCat .
#     (?Qty ?UnitCents) math:product ?NetCents .
#     ("urn:example:order:%s#line:%s" ?OrderId ?LineIndex) string:format ?LineUriStr .
#     ?Line log:uri ?LineUriStr .
#     ?SkuJson string:equalIgnoringCase ?SkuCat .
#   } => {
#     ?Order ex:line ?Line .
#     ?Line a ex:OrderLine .
#     ?Line ex:lineIndex ?LineIndex .
#     ?Line ex:product ?Product .
#     ?Line ex:sku ?SkuCat .
#     ?Line ex:qty ?Qty .
#     ?Line ex:unitCents ?UnitCents .
#     ?Line ex:netCents ?NetCents .
#   } .
# with substitution (on rule variables):
#   ?J = """{
#     "meta~data": { "batch": "2025-12-18" },
#     "orders": [
#     {
#     "orderId": "A100",
#     "shipTo": { "country": "BE" },
#     "customer": { "email": "Ada@Example.ORG", "vatId": null },
#     "lines": [
#     { "sku": "wid-001", "qty": 2, "unitCents": 999 },
#     { "sku": "GAD-002", "qty": 1, "unitCents": 1500 }
#     ],
#     "declared": { "netCents": 3498, "vatCents": 509, "grossCents": 4007 }
#     },
#     {
#     "orderId": "A200",
#     "shipTo": { "country": "US" },
#     "customer": { "email": "bob@example.org", "vatId": null },
#     "lines": [
#     { "sku": "WID-001", "qty": 2, "unitCents": 999 },
#     { "sku": "GAD-002", "qty": 1, "unitCents": 1500 }
#     ],
#     "declared": { "netCents": 3498, "vatCents": 0, "grossCents": 3498 }
#     },
#     {
#     "orderId": "A300",
#     "shipTo": { "country": "NL" },
#     "customer": { "email": "acct@company.nl", "vatId": "NL999999999B01" },
#     "lines": [
#     { "sku": "WID-001", "qty": 2, "unitCents": 999 },
#     { "sku": "GAD-002", "qty": 1, "unitCents": 1500 }
#     ],
#     "declared": { "netCents": 3498, "vatCents": 0, "grossCents": 3498 }
#     },
#     {
#     "orderId": "A301",
#     "shipTo": { "country": "NL" },
#     "customer": { "email": "billing@company.nl", "vatId": "NL999999999B01" },
#     "lines": [
#     { "sku": "WID-001", "qty": 2, "unitCents": 999 },
#     { "sku": "GAD-002", "qty": 1, "unitCents": 1500 }
#     ],
#     "declared": { "netCents": 3498, "vatCents": 0, "grossCents": 3498 }
#     },
#     {
#     "orderId": "A400",
#     "shipTo": { "country": "BE" },
#     "customer": { "email": "ada@other.example", "vatId": null },
#     "lines": [
#     { "sku": "WID-001", "qty": 2, "unitCents": 999 },
#     { "sku": "GAD-002", "qty": 1, "unitCents": 1500 }
#     ],
#     "declared": { "netCents": 3498, "vatCents": 508, "grossCents": 4006 }
#     }
#     ]
#   }"""^^rdf:JSON
#   ?Line = <urn:example:order:A200#line:0>
#   ?LineIndex = 0
#   ?LineJson = """{"sku":"WID-001","qty":2,"unitCents":999}"""^^rdf:JSON
#   ?LineUriStr = "urn:example:order:A200#line:0"
#   ?Lines = ("""{"sku":"WID-001","qty":2,"unitCents":999}"""^^rdf:JSON """{"sku":"GAD-002","qty":1,"unitCents":1500}"""^^rdf:JSON)
#   ?NetCents = 1998
#   ?Order = <urn:example:order:A200>
#   ?OrderId = "A200"
#   ?OrderIndex = 1
#   ?OrderJson = """{"orderId":"A200","shipTo":{"country":"US"},"customer":{"email":"bob@example.org","vatId":null},"lines":[{"sku":"WID-001","qty":2,"unitCents":999},{"sku":"GAD-002","qty":1,"unitCents":1500}],"declared":{"netCents":3498,"vatCents":0,"grossCents":3498}}"""^^rdf:JSON
#   ?OrderUriStr = "urn:example:order:A200"
#   ?Orders = ("""{"orderId":"A100","shipTo":{"country":"BE"},"customer":{"email":"Ada@Example.ORG","vatId":null},"lines":[{"sku":"wid-001","qty":2,"unitCents":999},{"sku":"GAD-002","qty":1,"unitCents":1500}],"declared":{"netCents":3498,"vatCents":509,"grossCents":4007}}"""^^rdf:JSON """{"orderId":"A200","shipTo":{"country":"US"},"customer":{"email":"bob@example.org","vatId":null},"lines":[{"sku":"WID-001","qty":2,"unitCents":999},{"sku":"GAD-002","qty":1,"unitCents":1500}],"declared":{"netCents":3498,"vatCents":0,"grossCents":3498}}"""^^rdf:JSON """{"orderId":"A300","shipTo":{"country":"NL"},"customer":{"email":"acct@company.nl","vatId":"NL999999999B01"},"lines":[{"sku":"WID-001","qty":2,"unitCents":999},{"sku":"GAD-002","qty":1,"unitCents":1500}],"declared":{"netCents":3498,"vatCents":0,"grossCents":3498}}"""^^rdf:JSON """{"orderId":"A301","shipTo":{"country":"NL"},"customer":{"email":"billing@company.nl","vatId":"NL999999999B01"},"lines":[{"sku":"WID-001","qty":2,"unitCents":999},{"sku":"GAD-002","qty":1,"unitCents":1500}],"declared":{"netCents":3498,"vatCents":0,"grossCents":3498}}"""^^rdf:JSON """{"orderId":"A400","shipTo":{"country":"BE"},"customer":{"email":"ada@other.example","vatId":null},"lines":[{"sku":"WID-001","qty":2,"unitCents":999},{"sku":"GAD-002","qty":1,"unitCents":1500}],"declared":{"netCents":3498,"vatCents":508,"grossCents":4006}}"""^^rdf:JSON)
#   ?Product = ex:Widget
#   ?Qty = 2
#   ?SkuCat = "WID-001"
#   ?SkuJson = "WID-001"
#   ?UnitCents = 999
# Therefore the derived triple above is entailed by the rules and facts.
# ----------------------------------------------------------------------

<urn:example:order:A200#line:0> ex:product ex:Widget .

# ----------------------------------------------------------------------
# Proof for derived triple:
#   <urn:example:order:A200#line:0> ex:sku "WID-001" .
# It holds because the following instance of the rule body is provable:
#   ex:feed ex:json """{
#     "meta~data": { "batch": "2025-12-18" },
#     "orders": [
#       {
#         "orderId": "A100",
#         "shipTo": { "country": "BE" },
#         "customer": { "email": "Ada@Example.ORG", "vatId": null },
#         "lines": [
#           { "sku": "wid-001", "qty": 2, "unitCents": 999 },
#           { "sku": "GAD-002", "qty": 1, "unitCents": 1500 }
#         ],
#         "declared": { "netCents": 3498, "vatCents": 509, "grossCents": 4007 }
#       },
#       {
#         "orderId": "A200",
#         "shipTo": { "country": "US" },
#         "customer": { "email": "bob@example.org", "vatId": null },
#         "lines": [
#           { "sku": "WID-001", "qty": 2, "unitCents": 999 },
#           { "sku": "GAD-002", "qty": 1, "unitCents": 1500 }
#         ],
#         "declared": { "netCents": 3498, "vatCents": 0, "grossCents": 3498 }
#       },
#       {
#         "orderId": "A300",
#         "shipTo": { "country": "NL" },
#         "customer": { "email": "acct@company.nl", "vatId": "NL999999999B01" },
#         "lines": [
#           { "sku": "WID-001", "qty": 2, "unitCents": 999 },
#           { "sku": "GAD-002", "qty": 1, "unitCents": 1500 }
#         ],
#         "declared": { "netCents": 3498, "vatCents": 0, "grossCents": 3498 }
#       },
#       {
#         "orderId": "A301",
#         "shipTo": { "country": "NL" },
#         "customer": { "email": "billing@company.nl", "vatId": "NL999999999B01" },
#         "lines": [
#           { "sku": "WID-001", "qty": 2, "unitCents": 999 },
#           { "sku": "GAD-002", "qty": 1, "unitCents": 1500 }
#         ],
#         "declared": { "netCents": 3498, "vatCents": 0, "grossCents": 3498 }
#       },
#       {
#         "orderId": "A400",
#         "shipTo": { "country": "BE" },
#         "customer": { "email": "ada@other.example", "vatId": null },
#         "lines": [
#           { "sku": "WID-001", "qty": 2, "unitCents": 999 },
#           { "sku": "GAD-002", "qty": 1, "unitCents": 1500 }
#         ],
#         "declared": { "netCents": 3498, "vatCents": 508, "grossCents": 4006 }
#       }
#     ]
#   }"""^^rdf:JSON .
#   ("""{
#     "meta~data": { "batch": "2025-12-18" },
#     "orders": [
#       {
#         "orderId": "A100",
#         "shipTo": { "country": "BE" },
#         "customer": { "email": "Ada@Example.ORG", "vatId": null },
#         "lines": [
#           { "sku": "wid-001", "qty": 2, "unitCents": 999 },
#           { "sku": "GAD-002", "qty": 1, "unitCents": 1500 }
#         ],
#         "declared": { "netCents": 3498, "vatCents": 509, "grossCents": 4007 }
#       },
#       {
#         "orderId": "A200",
#         "shipTo": { "country": "US" },
#         "customer": { "email": "bob@example.org", "vatId": null },
#         "lines": [
#           { "sku": "WID-001", "qty": 2, "unitCents": 999 },
#           { "sku": "GAD-002", "qty": 1, "unitCents": 1500 }
#         ],
#         "declared": { "netCents": 3498, "vatCents": 0, "grossCents": 3498 }
#       },
#       {
#         "orderId": "A300",
#         "shipTo": { "country": "NL" },
#         "customer": { "email": "acct@company.nl", "vatId": "NL999999999B01" },
#         "lines": [
#           { "sku": "WID-001", "qty": 2, "unitCents": 999 },
#           { "sku": "GAD-002", "qty": 1, "unitCents": 1500 }
#         ],
#         "declared": { "netCents": 3498, "vatCents": 0, "grossCents": 3498 }
#       },
#       {
#         "orderId": "A301",
#         "shipTo": { "country": "NL" },
#         "customer": { "email": "billing@company.nl", "vatId": "NL999999999B01" },
#         "lines": [
#           { "sku": "WID-001", "qty": 2, "unitCents": 999 },
#           { "sku": "GAD-002", "qty": 1, "unitCents": 1500 }
#         ],
#         "declared": { "netCents": 3498, "vatCents": 0, "grossCents": 3498 }
#       },
#       {
#         "orderId": "A400",
#         "shipTo": { "country": "BE" },
#         "customer": { "email": "ada@other.example", "vatId": null },
#         "lines": [
#           { "sku": "WID-001", "qty": 2, "unitCents": 999 },
#           { "sku": "GAD-002", "qty": 1, "unitCents": 1500 }
#         ],
#         "declared": { "netCents": 3498, "vatCents": 508, "grossCents": 4006 }
#       }
#     ]
#   }"""^^rdf:JSON "/orders") string:jsonPointer ("""{"orderId":"A100","shipTo":{"country":"BE"},"customer":{"email":"Ada@Example.ORG","vatId":null},"lines":[{"sku":"wid-001","qty":2,"unitCents":999},{"sku":"GAD-002","qty":1,"unitCents":1500}],"declared":{"netCents":3498,"vatCents":509,"grossCents":4007}}"""^^rdf:JSON """{"orderId":"A200","shipTo":{"country":"US"},"customer":{"email":"bob@example.org","vatId":null},"lines":[{"sku":"WID-001","qty":2,"unitCents":999},{"sku":"GAD-002","qty":1,"unitCents":1500}],"declared":{"netCents":3498,"vatCents":0,"grossCents":3498}}"""^^rdf:JSON """{"orderId":"A300","shipTo":{"country":"NL"},"customer":{"email":"acct@company.nl","vatId":"NL999999999B01"},"lines":[{"sku":"WID-001","qty":2,"unitCents":999},{"sku":"GAD-002","qty":1,"unitCents":1500}],"declared":{"netCents":3498,"vatCents":0,"grossCents":3498}}"""^^rdf:JSON """{"orderId":"A301","shipTo":{"country":"NL"},"customer":{"email":"billing@company.nl","vatId":"NL999999999B01"},"lines":[{"sku":"WID-001","qty":2,"unitCents":999},{"sku":"GAD-002","qty":1,"unitCents":1500}],"declared":{"netCents":3498,"vatCents":0,"grossCents":3498}}"""^^rdf:JSON """{"orderId":"A400","shipTo":{"country":"BE"},"customer":{"email":"ada@other.example","vatId":null},"lines":[{"sku":"WID-001","qty":2,"unitCents":999},{"sku":"GAD-002","qty":1,"unitCents":1500}],"declared":{"netCents":3498,"vatCents":508,"grossCents":4006}}"""^^rdf:JSON) .
#   ("""{"orderId":"A100","shipTo":{"country":"BE"},"customer":{"email":"Ada@Example.ORG","vatId":null},"lines":[{"sku":"wid-001","qty":2,"unitCents":999},{"sku":"GAD-002","qty":1,"unitCents":1500}],"declared":{"netCents":3498,"vatCents":509,"grossCents":4007}}"""^^rdf:JSON """{"orderId":"A200","shipTo":{"country":"US"},"customer":{"email":"bob@example.org","vatId":null},"lines":[{"sku":"WID-001","qty":2,"unitCents":999},{"sku":"GAD-002","qty":1,"unitCents":1500}],"declared":{"netCents":3498,"vatCents":0,"grossCents":3498}}"""^^rdf:JSON """{"orderId":"A300","shipTo":{"country":"NL"},"customer":{"email":"acct@company.nl","vatId":"NL999999999B01"},"lines":[{"sku":"WID-001","qty":2,"unitCents":999},{"sku":"GAD-002","qty":1,"unitCents":1500}],"declared":{"netCents":3498,"vatCents":0,"grossCents":3498}}"""^^rdf:JSON """{"orderId":"A301","shipTo":{"country":"NL"},"customer":{"email":"billing@company.nl","vatId":"NL999999999B01"},"lines":[{"sku":"WID-001","qty":2,"unitCents":999},{"sku":"GAD-002","qty":1,"unitCents":1500}],"declared":{"netCents":3498,"vatCents":0,"grossCents":3498}}"""^^rdf:JSON """{"orderId":"A400","shipTo":{"country":"BE"},"customer":{"email":"ada@other.example","vatId":null},"lines":[{"sku":"WID-001","qty":2,"unitCents":999},{"sku":"GAD-002","qty":1,"unitCents":1500}],"declared":{"netCents":3498,"vatCents":508,"grossCents":4006}}"""^^rdf:JSON) list:iterate (1 """{"orderId":"A200","shipTo":{"country":"US"},"customer":{"email":"bob@example.org","vatId":null},"lines":[{"sku":"WID-001","qty":2,"unitCents":999},{"sku":"GAD-002","qty":1,"unitCents":1500}],"declared":{"netCents":3498,"vatCents":0,"grossCents":3498}}"""^^rdf:JSON) .
#   ("""{"orderId":"A200","shipTo":{"country":"US"},"customer":{"email":"bob@example.org","vatId":null},"lines":[{"sku":"WID-001","qty":2,"unitCents":999},{"sku":"GAD-002","qty":1,"unitCents":1500}],"declared":{"netCents":3498,"vatCents":0,"grossCents":3498}}"""^^rdf:JSON "/orderId") string:jsonPointer "A200" .
#   ("urn:example:order:%s" "A200") string:format "urn:example:order:A200" .
#   <urn:example:order:A200> log:uri "urn:example:order:A200" .
#   ("""{"orderId":"A200","shipTo":{"country":"US"},"customer":{"email":"bob@example.org","vatId":null},"lines":[{"sku":"WID-001","qty":2,"unitCents":999},{"sku":"GAD-002","qty":1,"unitCents":1500}],"declared":{"netCents":3498,"vatCents":0,"grossCents":3498}}"""^^rdf:JSON "/lines") string:jsonPointer ("""{"sku":"WID-001","qty":2,"unitCents":999}"""^^rdf:JSON """{"sku":"GAD-002","qty":1,"unitCents":1500}"""^^rdf:JSON) .
#   ("""{"sku":"WID-001","qty":2,"unitCents":999}"""^^rdf:JSON """{"sku":"GAD-002","qty":1,"unitCents":1500}"""^^rdf:JSON) list:iterate (0 """{"sku":"WID-001","qty":2,"unitCents":999}"""^^rdf:JSON) .
#   ("""{"sku":"WID-001","qty":2,"unitCents":999}"""^^rdf:JSON "/sku") string:jsonPointer "WID-001" .
#   ("""{"sku":"WID-001","qty":2,"unitCents":999}"""^^rdf:JSON "/qty") string:jsonPointer 2 .
#   ("""{"sku":"WID-001","qty":2,"unitCents":999}"""^^rdf:JSON "/unitCents") string:jsonPointer 999 .
#   ex:Widget a ex:Product .
#   ex:Widget ex:sku "WID-001" .
#   (2 999) math:product 1998 .
#   ("urn:example:order:%s#line:%s" "A200" 0) string:format "urn:example:order:A200#line:0" .
#   <urn:example:order:A200#line:0> log:uri "urn:example:order:A200#line:0" .
#   "WID-001" string:equalIgnoringCase "WID-001" .
# via the schematic forward rule:
#   {
#     ex:feed ex:json ?J .
#     (?J "/orders") string:jsonPointer ?Orders .
#     ?Orders list:iterate (?OrderIndex ?OrderJson) .
#     (?OrderJson "/orderId") string:jsonPointer ?OrderId .
#     ("urn:example:order:%s" ?OrderId) string:format ?OrderUriStr .
#     ?Order log:uri ?OrderUriStr .
#     (?OrderJson "/lines") string:jsonPointer ?Lines .
#     ?Lines list:iterate (?LineIndex ?LineJson) .
#     (?LineJson "/sku") string:jsonPointer ?SkuJson .
#     (?LineJson "/qty") string:jsonPointer ?Qty .
#     (?LineJson "/unitCents") string:jsonPointer ?UnitCents .
#     ?Product a ex:Product .
#     ?Product ex:sku ?SkuCat .
#     (?Qty ?UnitCents) math:product ?NetCents .
#     ("urn:example:order:%s#line:%s" ?OrderId ?LineIndex) string:format ?LineUriStr .
#     ?Line log:uri ?LineUriStr .
#     ?SkuJson string:equalIgnoringCase ?SkuCat .
#   } => {
#     ?Order ex:line ?Line .
#     ?Line a ex:OrderLine .
#     ?Line ex:lineIndex ?LineIndex .
#     ?Line ex:product ?Product .
#     ?Line ex:sku ?SkuCat .
#     ?Line ex:qty ?Qty .
#     ?Line ex:unitCents ?UnitCents .
#     ?Line ex:netCents ?NetCents .
#   } .
# with substitution (on rule variables):
#   ?J = """{
#     "meta~data": { "batch": "2025-12-18" },
#     "orders": [
#     {
#     "orderId": "A100",
#     "shipTo": { "country": "BE" },
#     "customer": { "email": "Ada@Example.ORG", "vatId": null },
#     "lines": [
#     { "sku": "wid-001", "qty": 2, "unitCents": 999 },
#     { "sku": "GAD-002", "qty": 1, "unitCents": 1500 }
#     ],
#     "declared": { "netCents": 3498, "vatCents": 509, "grossCents": 4007 }
#     },
#     {
#     "orderId": "A200",
#     "shipTo": { "country": "US" },
#     "customer": { "email": "bob@example.org", "vatId": null },
#     "lines": [
#     { "sku": "WID-001", "qty": 2, "unitCents": 999 },
#     { "sku": "GAD-002", "qty": 1, "unitCents": 1500 }
#     ],
#     "declared": { "netCents": 3498, "vatCents": 0, "grossCents": 3498 }
#     },
#     {
#     "orderId": "A300",
#     "shipTo": { "country": "NL" },
#     "customer": { "email": "acct@company.nl", "vatId": "NL999999999B01" },
#     "lines": [
#     { "sku": "WID-001", "qty": 2, "unitCents": 999 },
#     { "sku": "GAD-002", "qty": 1, "unitCents": 1500 }
#     ],
#     "declared": { "netCents": 3498, "vatCents": 0, "grossCents": 3498 }
#     },
#     {
#     "orderId": "A301",
#     "shipTo": { "country": "NL" },
#     "customer": { "email": "billing@company.nl", "vatId": "NL999999999B01" },
#     "lines": [
#     { "sku": "WID-001", "qty": 2, "unitCents": 999 },
#     { "sku": "GAD-002", "qty": 1, "unitCents": 1500 }
#     ],
#     "declared": { "netCents": 3498, "vatCents": 0, "grossCents": 3498 }
#     },
#     {
#     "orderId": "A400",
#     "shipTo": { "country": "BE" },
#     "customer": { "email": "ada@other.example", "vatId": null },
#     "lines": [
#     { "sku": "WID-001", "qty": 2, "unitCents": 999 },
#     { "sku": "GAD-002", "qty": 1, "unitCents": 1500 }
#     ],
#     "declared": { "netCents": 3498, "vatCents": 508, "grossCents": 4006 }
#     }
#     ]
#   }"""^^rdf:JSON
#   ?Line = <urn:example:order:A200#line:0>
#   ?LineIndex = 0
#   ?LineJson = """{"sku":"WID-001","qty":2,"unitCents":999}"""^^rdf:JSON
#   ?LineUriStr = "urn:example:order:A200#line:0"
#   ?Lines = ("""{"sku":"WID-001","qty":2,"unitCents":999}"""^^rdf:JSON """{"sku":"GAD-002","qty":1,"unitCents":1500}"""^^rdf:JSON)
#   ?NetCents = 1998
#   ?Order = <urn:example:order:A200>
#   ?OrderId = "A200"
#   ?OrderIndex = 1
#   ?OrderJson = """{"orderId":"A200","shipTo":{"country":"US"},"customer":{"email":"bob@example.org","vatId":null},"lines":[{"sku":"WID-001","qty":2,"unitCents":999},{"sku":"GAD-002","qty":1,"unitCents":1500}],"declared":{"netCents":3498,"vatCents":0,"grossCents":3498}}"""^^rdf:JSON
#   ?OrderUriStr = "urn:example:order:A200"
#   ?Orders = ("""{"orderId":"A100","shipTo":{"country":"BE"},"customer":{"email":"Ada@Example.ORG","vatId":null},"lines":[{"sku":"wid-001","qty":2,"unitCents":999},{"sku":"GAD-002","qty":1,"unitCents":1500}],"declared":{"netCents":3498,"vatCents":509,"grossCents":4007}}"""^^rdf:JSON """{"orderId":"A200","shipTo":{"country":"US"},"customer":{"email":"bob@example.org","vatId":null},"lines":[{"sku":"WID-001","qty":2,"unitCents":999},{"sku":"GAD-002","qty":1,"unitCents":1500}],"declared":{"netCents":3498,"vatCents":0,"grossCents":3498}}"""^^rdf:JSON """{"orderId":"A300","shipTo":{"country":"NL"},"customer":{"email":"acct@company.nl","vatId":"NL999999999B01"},"lines":[{"sku":"WID-001","qty":2,"unitCents":999},{"sku":"GAD-002","qty":1,"unitCents":1500}],"declared":{"netCents":3498,"vatCents":0,"grossCents":3498}}"""^^rdf:JSON """{"orderId":"A301","shipTo":{"country":"NL"},"customer":{"email":"billing@company.nl","vatId":"NL999999999B01"},"lines":[{"sku":"WID-001","qty":2,"unitCents":999},{"sku":"GAD-002","qty":1,"unitCents":1500}],"declared":{"netCents":3498,"vatCents":0,"grossCents":3498}}"""^^rdf:JSON """{"orderId":"A400","shipTo":{"country":"BE"},"customer":{"email":"ada@other.example","vatId":null},"lines":[{"sku":"WID-001","qty":2,"unitCents":999},{"sku":"GAD-002","qty":1,"unitCents":1500}],"declared":{"netCents":3498,"vatCents":508,"grossCents":4006}}"""^^rdf:JSON)
#   ?Product = ex:Widget
#   ?Qty = 2
#   ?SkuCat = "WID-001"
#   ?SkuJson = "WID-001"
#   ?UnitCents = 999
# Therefore the derived triple above is entailed by the rules and facts.
# ----------------------------------------------------------------------

<urn:example:order:A200#line:0> ex:sku "WID-001" .

# ----------------------------------------------------------------------
# Proof for derived triple:
#   <urn:example:order:A200#line:0> ex:qty 2 .
# It holds because the following instance of the rule body is provable:
#   ex:feed ex:json """{
#     "meta~data": { "batch": "2025-12-18" },
#     "orders": [
#       {
#         "orderId": "A100",
#         "shipTo": { "country": "BE" },
#         "customer": { "email": "Ada@Example.ORG", "vatId": null },
#         "lines": [
#           { "sku": "wid-001", "qty": 2, "unitCents": 999 },
#           { "sku": "GAD-002", "qty": 1, "unitCents": 1500 }
#         ],
#         "declared": { "netCents": 3498, "vatCents": 509, "grossCents": 4007 }
#       },
#       {
#         "orderId": "A200",
#         "shipTo": { "country": "US" },
#         "customer": { "email": "bob@example.org", "vatId": null },
#         "lines": [
#           { "sku": "WID-001", "qty": 2, "unitCents": 999 },
#           { "sku": "GAD-002", "qty": 1, "unitCents": 1500 }
#         ],
#         "declared": { "netCents": 3498, "vatCents": 0, "grossCents": 3498 }
#       },
#       {
#         "orderId": "A300",
#         "shipTo": { "country": "NL" },
#         "customer": { "email": "acct@company.nl", "vatId": "NL999999999B01" },
#         "lines": [
#           { "sku": "WID-001", "qty": 2, "unitCents": 999 },
#           { "sku": "GAD-002", "qty": 1, "unitCents": 1500 }
#         ],
#         "declared": { "netCents": 3498, "vatCents": 0, "grossCents": 3498 }
#       },
#       {
#         "orderId": "A301",
#         "shipTo": { "country": "NL" },
#         "customer": { "email": "billing@company.nl", "vatId": "NL999999999B01" },
#         "lines": [
#           { "sku": "WID-001", "qty": 2, "unitCents": 999 },
#           { "sku": "GAD-002", "qty": 1, "unitCents": 1500 }
#         ],
#         "declared": { "netCents": 3498, "vatCents": 0, "grossCents": 3498 }
#       },
#       {
#         "orderId": "A400",
#         "shipTo": { "country": "BE" },
#         "customer": { "email": "ada@other.example", "vatId": null },
#         "lines": [
#           { "sku": "WID-001", "qty": 2, "unitCents": 999 },
#           { "sku": "GAD-002", "qty": 1, "unitCents": 1500 }
#         ],
#         "declared": { "netCents": 3498, "vatCents": 508, "grossCents": 4006 }
#       }
#     ]
#   }"""^^rdf:JSON .
#   ("""{
#     "meta~data": { "batch": "2025-12-18" },
#     "orders": [
#       {
#         "orderId": "A100",
#         "shipTo": { "country": "BE" },
#         "customer": { "email": "Ada@Example.ORG", "vatId": null },
#         "lines": [
#           { "sku": "wid-001", "qty": 2, "unitCents": 999 },
#           { "sku": "GAD-002", "qty": 1, "unitCents": 1500 }
#         ],
#         "declared": { "netCents": 3498, "vatCents": 509, "grossCents": 4007 }
#       },
#       {
#         "orderId": "A200",
#         "shipTo": { "country": "US" },
#         "customer": { "email": "bob@example.org", "vatId": null },
#         "lines": [
#           { "sku": "WID-001", "qty": 2, "unitCents": 999 },
#           { "sku": "GAD-002", "qty": 1, "unitCents": 1500 }
#         ],
#         "declared": { "netCents": 3498, "vatCents": 0, "grossCents": 3498 }
#       },
#       {
#         "orderId": "A300",
#         "shipTo": { "country": "NL" },
#         "customer": { "email": "acct@company.nl", "vatId": "NL999999999B01" },
#         "lines": [
#           { "sku": "WID-001", "qty": 2, "unitCents": 999 },
#           { "sku": "GAD-002", "qty": 1, "unitCents": 1500 }
#         ],
#         "declared": { "netCents": 3498, "vatCents": 0, "grossCents": 3498 }
#       },
#       {
#         "orderId": "A301",
#         "shipTo": { "country": "NL" },
#         "customer": { "email": "billing@company.nl", "vatId": "NL999999999B01" },
#         "lines": [
#           { "sku": "WID-001", "qty": 2, "unitCents": 999 },
#           { "sku": "GAD-002", "qty": 1, "unitCents": 1500 }
#         ],
#         "declared": { "netCents": 3498, "vatCents": 0, "grossCents": 3498 }
#       },
#       {
#         "orderId": "A400",
#         "shipTo": { "country": "BE" },
#         "customer": { "email": "ada@other.example", "vatId": null },
#         "lines": [
#           { "sku": "WID-001", "qty": 2, "unitCents": 999 },
#           { "sku": "GAD-002", "qty": 1, "unitCents": 1500 }
#         ],
#         "declared": { "netCents": 3498, "vatCents": 508, "grossCents": 4006 }
#       }
#     ]
#   }"""^^rdf:JSON "/orders") string:jsonPointer ("""{"orderId":"A100","shipTo":{"country":"BE"},"customer":{"email":"Ada@Example.ORG","vatId":null},"lines":[{"sku":"wid-001","qty":2,"unitCents":999},{"sku":"GAD-002","qty":1,"unitCents":1500}],"declared":{"netCents":3498,"vatCents":509,"grossCents":4007}}"""^^rdf:JSON """{"orderId":"A200","shipTo":{"country":"US"},"customer":{"email":"bob@example.org","vatId":null},"lines":[{"sku":"WID-001","qty":2,"unitCents":999},{"sku":"GAD-002","qty":1,"unitCents":1500}],"declared":{"netCents":3498,"vatCents":0,"grossCents":3498}}"""^^rdf:JSON """{"orderId":"A300","shipTo":{"country":"NL"},"customer":{"email":"acct@company.nl","vatId":"NL999999999B01"},"lines":[{"sku":"WID-001","qty":2,"unitCents":999},{"sku":"GAD-002","qty":1,"unitCents":1500}],"declared":{"netCents":3498,"vatCents":0,"grossCents":3498}}"""^^rdf:JSON """{"orderId":"A301","shipTo":{"country":"NL"},"customer":{"email":"billing@company.nl","vatId":"NL999999999B01"},"lines":[{"sku":"WID-001","qty":2,"unitCents":999},{"sku":"GAD-002","qty":1,"unitCents":1500}],"declared":{"netCents":3498,"vatCents":0,"grossCents":3498}}"""^^rdf:JSON """{"orderId":"A400","shipTo":{"country":"BE"},"customer":{"email":"ada@other.example","vatId":null},"lines":[{"sku":"WID-001","qty":2,"unitCents":999},{"sku":"GAD-002","qty":1,"unitCents":1500}],"declared":{"netCents":3498,"vatCents":508,"grossCents":4006}}"""^^rdf:JSON) .
#   ("""{"orderId":"A100","shipTo":{"country":"BE"},"customer":{"email":"Ada@Example.ORG","vatId":null},"lines":[{"sku":"wid-001","qty":2,"unitCents":999},{"sku":"GAD-002","qty":1,"unitCents":1500}],"declared":{"netCents":3498,"vatCents":509,"grossCents":4007}}"""^^rdf:JSON """{"orderId":"A200","shipTo":{"country":"US"},"customer":{"email":"bob@example.org","vatId":null},"lines":[{"sku":"WID-001","qty":2,"unitCents":999},{"sku":"GAD-002","qty":1,"unitCents":1500}],"declared":{"netCents":3498,"vatCents":0,"grossCents":3498}}"""^^rdf:JSON """{"orderId":"A300","shipTo":{"country":"NL"},"customer":{"email":"acct@company.nl","vatId":"NL999999999B01"},"lines":[{"sku":"WID-001","qty":2,"unitCents":999},{"sku":"GAD-002","qty":1,"unitCents":1500}],"declared":{"netCents":3498,"vatCents":0,"grossCents":3498}}"""^^rdf:JSON """{"orderId":"A301","shipTo":{"country":"NL"},"customer":{"email":"billing@company.nl","vatId":"NL999999999B01"},"lines":[{"sku":"WID-001","qty":2,"unitCents":999},{"sku":"GAD-002","qty":1,"unitCents":1500}],"declared":{"netCents":3498,"vatCents":0,"grossCents":3498}}"""^^rdf:JSON """{"orderId":"A400","shipTo":{"country":"BE"},"customer":{"email":"ada@other.example","vatId":null},"lines":[{"sku":"WID-001","qty":2,"unitCents":999},{"sku":"GAD-002","qty":1,"unitCents":1500}],"declared":{"netCents":3498,"vatCents":508,"grossCents":4006}}"""^^rdf:JSON) list:iterate (1 """{"orderId":"A200","shipTo":{"country":"US"},"customer":{"email":"bob@example.org","vatId":null},"lines":[{"sku":"WID-001","qty":2,"unitCents":999},{"sku":"GAD-002","qty":1,"unitCents":1500}],"declared":{"netCents":3498,"vatCents":0,"grossCents":3498}}"""^^rdf:JSON) .
#   ("""{"orderId":"A200","shipTo":{"country":"US"},"customer":{"email":"bob@example.org","vatId":null},"lines":[{"sku":"WID-001","qty":2,"unitCents":999},{"sku":"GAD-002","qty":1,"unitCents":1500}],"declared":{"netCents":3498,"vatCents":0,"grossCents":3498}}"""^^rdf:JSON "/orderId") string:jsonPointer "A200" .
#   ("urn:example:order:%s" "A200") string:format "urn:example:order:A200" .
#   <urn:example:order:A200> log:uri "urn:example:order:A200" .
#   ("""{"orderId":"A200","shipTo":{"country":"US"},"customer":{"email":"bob@example.org","vatId":null},"lines":[{"sku":"WID-001","qty":2,"unitCents":999},{"sku":"GAD-002","qty":1,"unitCents":1500}],"declared":{"netCents":3498,"vatCents":0,"grossCents":3498}}"""^^rdf:JSON "/lines") string:jsonPointer ("""{"sku":"WID-001","qty":2,"unitCents":999}"""^^rdf:JSON """{"sku":"GAD-002","qty":1,"unitCents":1500}"""^^rdf:JSON) .
#   ("""{"sku":"WID-001","qty":2,"unitCents":999}"""^^rdf:JSON """{"sku":"GAD-002","qty":1,"unitCents":1500}"""^^rdf:JSON) list:iterate (0 """{"sku":"WID-001","qty":2,"unitCents":999}"""^^rdf:JSON) .
#   ("""{"sku":"WID-001","qty":2,"unitCents":999}"""^^rdf:JSON "/sku") string:jsonPointer "WID-001" .
#   ("""{"sku":"WID-001","qty":2,"unitCents":999}"""^^rdf:JSON "/qty") string:jsonPointer 2 .
#   ("""{"sku":"WID-001","qty":2,"unitCents":999}"""^^rdf:JSON "/unitCents") string:jsonPointer 999 .
#   ex:Widget a ex:Product .
#   ex:Widget ex:sku "WID-001" .
#   (2 999) math:product 1998 .
#   ("urn:example:order:%s#line:%s" "A200" 0) string:format "urn:example:order:A200#line:0" .
#   <urn:example:order:A200#line:0> log:uri "urn:example:order:A200#line:0" .
#   "WID-001" string:equalIgnoringCase "WID-001" .
# via the schematic forward rule:
#   {
#     ex:feed ex:json ?J .
#     (?J "/orders") string:jsonPointer ?Orders .
#     ?Orders list:iterate (?OrderIndex ?OrderJson) .
#     (?OrderJson "/orderId") string:jsonPointer ?OrderId .
#     ("urn:example:order:%s" ?OrderId) string:format ?OrderUriStr .
#     ?Order log:uri ?OrderUriStr .
#     (?OrderJson "/lines") string:jsonPointer ?Lines .
#     ?Lines list:iterate (?LineIndex ?LineJson) .
#     (?LineJson "/sku") string:jsonPointer ?SkuJson .
#     (?LineJson "/qty") string:jsonPointer ?Qty .
#     (?LineJson "/unitCents") string:jsonPointer ?UnitCents .
#     ?Product a ex:Product .
#     ?Product ex:sku ?SkuCat .
#     (?Qty ?UnitCents) math:product ?NetCents .
#     ("urn:example:order:%s#line:%s" ?OrderId ?LineIndex) string:format ?LineUriStr .
#     ?Line log:uri ?LineUriStr .
#     ?SkuJson string:equalIgnoringCase ?SkuCat .
#   } => {
#     ?Order ex:line ?Line .
#     ?Line a ex:OrderLine .
#     ?Line ex:lineIndex ?LineIndex .
#     ?Line ex:product ?Product .
#     ?Line ex:sku ?SkuCat .
#     ?Line ex:qty ?Qty .
#     ?Line ex:unitCents ?UnitCents .
#     ?Line ex:netCents ?NetCents .
#   } .
# with substitution (on rule variables):
#   ?J = """{
#     "meta~data": { "batch": "2025-12-18" },
#     "orders": [
#     {
#     "orderId": "A100",
#     "shipTo": { "country": "BE" },
#     "customer": { "email": "Ada@Example.ORG", "vatId": null },
#     "lines": [
#     { "sku": "wid-001", "qty": 2, "unitCents": 999 },
#     { "sku": "GAD-002", "qty": 1, "unitCents": 1500 }
#     ],
#     "declared": { "netCents": 3498, "vatCents": 509, "grossCents": 4007 }
#     },
#     {
#     "orderId": "A200",
#     "shipTo": { "country": "US" },
#     "customer": { "email": "bob@example.org", "vatId": null },
#     "lines": [
#     { "sku": "WID-001", "qty": 2, "unitCents": 999 },
#     { "sku": "GAD-002", "qty": 1, "unitCents": 1500 }
#     ],
#     "declared": { "netCents": 3498, "vatCents": 0, "grossCents": 3498 }
#     },
#     {
#     "orderId": "A300",
#     "shipTo": { "country": "NL" },
#     "customer": { "email": "acct@company.nl", "vatId": "NL999999999B01" },
#     "lines": [
#     { "sku": "WID-001", "qty": 2, "unitCents": 999 },
#     { "sku": "GAD-002", "qty": 1, "unitCents": 1500 }
#     ],
#     "declared": { "netCents": 3498, "vatCents": 0, "grossCents": 3498 }
#     },
#     {
#     "orderId": "A301",
#     "shipTo": { "country": "NL" },
#     "customer": { "email": "billing@company.nl", "vatId": "NL999999999B01" },
#     "lines": [
#     { "sku": "WID-001", "qty": 2, "unitCents": 999 },
#     { "sku": "GAD-002", "qty": 1, "unitCents": 1500 }
#     ],
#     "declared": { "netCents": 3498, "vatCents": 0, "grossCents": 3498 }
#     },
#     {
#     "orderId": "A400",
#     "shipTo": { "country": "BE" },
#     "customer": { "email": "ada@other.example", "vatId": null },
#     "lines": [
#     { "sku": "WID-001", "qty": 2, "unitCents": 999 },
#     { "sku": "GAD-002", "qty": 1, "unitCents": 1500 }
#     ],
#     "declared": { "netCents": 3498, "vatCents": 508, "grossCents": 4006 }
#     }
#     ]
#   }"""^^rdf:JSON
#   ?Line = <urn:example:order:A200#line:0>
#   ?LineIndex = 0
#   ?LineJson = """{"sku":"WID-001","qty":2,"unitCents":999}"""^^rdf:JSON
#   ?LineUriStr = "urn:example:order:A200#line:0"
#   ?Lines = ("""{"sku":"WID-001","qty":2,"unitCents":999}"""^^rdf:JSON """{"sku":"GAD-002","qty":1,"unitCents":1500}"""^^rdf:JSON)
#   ?NetCents = 1998
#   ?Order = <urn:example:order:A200>
#   ?OrderId = "A200"
#   ?OrderIndex = 1
#   ?OrderJson = """{"orderId":"A200","shipTo":{"country":"US"},"customer":{"email":"bob@example.org","vatId":null},"lines":[{"sku":"WID-001","qty":2,"unitCents":999},{"sku":"GAD-002","qty":1,"unitCents":1500}],"declared":{"netCents":3498,"vatCents":0,"grossCents":3498}}"""^^rdf:JSON
#   ?OrderUriStr = "urn:example:order:A200"
#   ?Orders = ("""{"orderId":"A100","shipTo":{"country":"BE"},"customer":{"email":"Ada@Example.ORG","vatId":null},"lines":[{"sku":"wid-001","qty":2,"unitCents":999},{"sku":"GAD-002","qty":1,"unitCents":1500}],"declared":{"netCents":3498,"vatCents":509,"grossCents":4007}}"""^^rdf:JSON """{"orderId":"A200","shipTo":{"country":"US"},"customer":{"email":"bob@example.org","vatId":null},"lines":[{"sku":"WID-001","qty":2,"unitCents":999},{"sku":"GAD-002","qty":1,"unitCents":1500}],"declared":{"netCents":3498,"vatCents":0,"grossCents":3498}}"""^^rdf:JSON """{"orderId":"A300","shipTo":{"country":"NL"},"customer":{"email":"acct@company.nl","vatId":"NL999999999B01"},"lines":[{"sku":"WID-001","qty":2,"unitCents":999},{"sku":"GAD-002","qty":1,"unitCents":1500}],"declared":{"netCents":3498,"vatCents":0,"grossCents":3498}}"""^^rdf:JSON """{"orderId":"A301","shipTo":{"country":"NL"},"customer":{"email":"billing@company.nl","vatId":"NL999999999B01"},"lines":[{"sku":"WID-001","qty":2,"unitCents":999},{"sku":"GAD-002","qty":1,"unitCents":1500}],"declared":{"netCents":3498,"vatCents":0,"grossCents":3498}}"""^^rdf:JSON """{"orderId":"A400","shipTo":{"country":"BE"},"customer":{"email":"ada@other.example","vatId":null},"lines":[{"sku":"WID-001","qty":2,"unitCents":999},{"sku":"GAD-002","qty":1,"unitCents":1500}],"declared":{"netCents":3498,"vatCents":508,"grossCents":4006}}"""^^rdf:JSON)
#   ?Product = ex:Widget
#   ?Qty = 2
#   ?SkuCat = "WID-001"
#   ?SkuJson = "WID-001"
#   ?UnitCents = 999
# Therefore the derived triple above is entailed by the rules and facts.
# ----------------------------------------------------------------------

<urn:example:order:A200#line:0> ex:qty 2 .

# ----------------------------------------------------------------------
# Proof for derived triple:
#   <urn:example:order:A200#line:0> ex:unitCents 999 .
# It holds because the following instance of the rule body is provable:
#   ex:feed ex:json """{
#     "meta~data": { "batch": "2025-12-18" },
#     "orders": [
#       {
#         "orderId": "A100",
#         "shipTo": { "country": "BE" },
#         "customer": { "email": "Ada@Example.ORG", "vatId": null },
#         "lines": [
#           { "sku": "wid-001", "qty": 2, "unitCents": 999 },
#           { "sku": "GAD-002", "qty": 1, "unitCents": 1500 }
#         ],
#         "declared": { "netCents": 3498, "vatCents": 509, "grossCents": 4007 }
#       },
#       {
#         "orderId": "A200",
#         "shipTo": { "country": "US" },
#         "customer": { "email": "bob@example.org", "vatId": null },
#         "lines": [
#           { "sku": "WID-001", "qty": 2, "unitCents": 999 },
#           { "sku": "GAD-002", "qty": 1, "unitCents": 1500 }
#         ],
#         "declared": { "netCents": 3498, "vatCents": 0, "grossCents": 3498 }
#       },
#       {
#         "orderId": "A300",
#         "shipTo": { "country": "NL" },
#         "customer": { "email": "acct@company.nl", "vatId": "NL999999999B01" },
#         "lines": [
#           { "sku": "WID-001", "qty": 2, "unitCents": 999 },
#           { "sku": "GAD-002", "qty": 1, "unitCents": 1500 }
#         ],
#         "declared": { "netCents": 3498, "vatCents": 0, "grossCents": 3498 }
#       },
#       {
#         "orderId": "A301",
#         "shipTo": { "country": "NL" },
#         "customer": { "email": "billing@company.nl", "vatId": "NL999999999B01" },
#         "lines": [
#           { "sku": "WID-001", "qty": 2, "unitCents": 999 },
#           { "sku": "GAD-002", "qty": 1, "unitCents": 1500 }
#         ],
#         "declared": { "netCents": 3498, "vatCents": 0, "grossCents": 3498 }
#       },
#       {
#         "orderId": "A400",
#         "shipTo": { "country": "BE" },
#         "customer": { "email": "ada@other.example", "vatId": null },
#         "lines": [
#           { "sku": "WID-001", "qty": 2, "unitCents": 999 },
#           { "sku": "GAD-002", "qty": 1, "unitCents": 1500 }
#         ],
#         "declared": { "netCents": 3498, "vatCents": 508, "grossCents": 4006 }
#       }
#     ]
#   }"""^^rdf:JSON .
#   ("""{
#     "meta~data": { "batch": "2025-12-18" },
#     "orders": [
#       {
#         "orderId": "A100",
#         "shipTo": { "country": "BE" },
#         "customer": { "email": "Ada@Example.ORG", "vatId": null },
#         "lines": [
#           { "sku": "wid-001", "qty": 2, "unitCents": 999 },
#           { "sku": "GAD-002", "qty": 1, "unitCents": 1500 }
#         ],
#         "declared": { "netCents": 3498, "vatCents": 509, "grossCents": 4007 }
#       },
#       {
#         "orderId": "A200",
#         "shipTo": { "country": "US" },
#         "customer": { "email": "bob@example.org", "vatId": null },
#         "lines": [
#           { "sku": "WID-001", "qty": 2, "unitCents": 999 },
#           { "sku": "GAD-002", "qty": 1, "unitCents": 1500 }
#         ],
#         "declared": { "netCents": 3498, "vatCents": 0, "grossCents": 3498 }
#       },
#       {
#         "orderId": "A300",
#         "shipTo": { "country": "NL" },
#         "customer": { "email": "acct@company.nl", "vatId": "NL999999999B01" },
#         "lines": [
#           { "sku": "WID-001", "qty": 2, "unitCents": 999 },
#           { "sku": "GAD-002", "qty": 1, "unitCents": 1500 }
#         ],
#         "declared": { "netCents": 3498, "vatCents": 0, "grossCents": 3498 }
#       },
#       {
#         "orderId": "A301",
#         "shipTo": { "country": "NL" },
#         "customer": { "email": "billing@company.nl", "vatId": "NL999999999B01" },
#         "lines": [
#           { "sku": "WID-001", "qty": 2, "unitCents": 999 },
#           { "sku": "GAD-002", "qty": 1, "unitCents": 1500 }
#         ],
#         "declared": { "netCents": 3498, "vatCents": 0, "grossCents": 3498 }
#       },
#       {
#         "orderId": "A400",
#         "shipTo": { "country": "BE" },
#         "customer": { "email": "ada@other.example", "vatId": null },
#         "lines": [
#           { "sku": "WID-001", "qty": 2, "unitCents": 999 },
#           { "sku": "GAD-002", "qty": 1, "unitCents": 1500 }
#         ],
#         "declared": { "netCents": 3498, "vatCents": 508, "grossCents": 4006 }
#       }
#     ]
#   }"""^^rdf:JSON "/orders") string:jsonPointer ("""{"orderId":"A100","shipTo":{"country":"BE"},"customer":{"email":"Ada@Example.ORG","vatId":null},"lines":[{"sku":"wid-001","qty":2,"unitCents":999},{"sku":"GAD-002","qty":1,"unitCents":1500}],"declared":{"netCents":3498,"vatCents":509,"grossCents":4007}}"""^^rdf:JSON """{"orderId":"A200","shipTo":{"country":"US"},"customer":{"email":"bob@example.org","vatId":null},"lines":[{"sku":"WID-001","qty":2,"unitCents":999},{"sku":"GAD-002","qty":1,"unitCents":1500}],"declared":{"netCents":3498,"vatCents":0,"grossCents":3498}}"""^^rdf:JSON """{"orderId":"A300","shipTo":{"country":"NL"},"customer":{"email":"acct@company.nl","vatId":"NL999999999B01"},"lines":[{"sku":"WID-001","qty":2,"unitCents":999},{"sku":"GAD-002","qty":1,"unitCents":1500}],"declared":{"netCents":3498,"vatCents":0,"grossCents":3498}}"""^^rdf:JSON """{"orderId":"A301","shipTo":{"country":"NL"},"customer":{"email":"billing@company.nl","vatId":"NL999999999B01"},"lines":[{"sku":"WID-001","qty":2,"unitCents":999},{"sku":"GAD-002","qty":1,"unitCents":1500}],"declared":{"netCents":3498,"vatCents":0,"grossCents":3498}}"""^^rdf:JSON """{"orderId":"A400","shipTo":{"country":"BE"},"customer":{"email":"ada@other.example","vatId":null},"lines":[{"sku":"WID-001","qty":2,"unitCents":999},{"sku":"GAD-002","qty":1,"unitCents":1500}],"declared":{"netCents":3498,"vatCents":508,"grossCents":4006}}"""^^rdf:JSON) .
#   ("""{"orderId":"A100","shipTo":{"country":"BE"},"customer":{"email":"Ada@Example.ORG","vatId":null},"lines":[{"sku":"wid-001","qty":2,"unitCents":999},{"sku":"GAD-002","qty":1,"unitCents":1500}],"declared":{"netCents":3498,"vatCents":509,"grossCents":4007}}"""^^rdf:JSON """{"orderId":"A200","shipTo":{"country":"US"},"customer":{"email":"bob@example.org","vatId":null},"lines":[{"sku":"WID-001","qty":2,"unitCents":999},{"sku":"GAD-002","qty":1,"unitCents":1500}],"declared":{"netCents":3498,"vatCents":0,"grossCents":3498}}"""^^rdf:JSON """{"orderId":"A300","shipTo":{"country":"NL"},"customer":{"email":"acct@company.nl","vatId":"NL999999999B01"},"lines":[{"sku":"WID-001","qty":2,"unitCents":999},{"sku":"GAD-002","qty":1,"unitCents":1500}],"declared":{"netCents":3498,"vatCents":0,"grossCents":3498}}"""^^rdf:JSON """{"orderId":"A301","shipTo":{"country":"NL"},"customer":{"email":"billing@company.nl","vatId":"NL999999999B01"},"lines":[{"sku":"WID-001","qty":2,"unitCents":999},{"sku":"GAD-002","qty":1,"unitCents":1500}],"declared":{"netCents":3498,"vatCents":0,"grossCents":3498}}"""^^rdf:JSON """{"orderId":"A400","shipTo":{"country":"BE"},"customer":{"email":"ada@other.example","vatId":null},"lines":[{"sku":"WID-001","qty":2,"unitCents":999},{"sku":"GAD-002","qty":1,"unitCents":1500}],"declared":{"netCents":3498,"vatCents":508,"grossCents":4006}}"""^^rdf:JSON) list:iterate (1 """{"orderId":"A200","shipTo":{"country":"US"},"customer":{"email":"bob@example.org","vatId":null},"lines":[{"sku":"WID-001","qty":2,"unitCents":999},{"sku":"GAD-002","qty":1,"unitCents":1500}],"declared":{"netCents":3498,"vatCents":0,"grossCents":3498}}"""^^rdf:JSON) .
#   ("""{"orderId":"A200","shipTo":{"country":"US"},"customer":{"email":"bob@example.org","vatId":null},"lines":[{"sku":"WID-001","qty":2,"unitCents":999},{"sku":"GAD-002","qty":1,"unitCents":1500}],"declared":{"netCents":3498,"vatCents":0,"grossCents":3498}}"""^^rdf:JSON "/orderId") string:jsonPointer "A200" .
#   ("urn:example:order:%s" "A200") string:format "urn:example:order:A200" .
#   <urn:example:order:A200> log:uri "urn:example:order:A200" .
#   ("""{"orderId":"A200","shipTo":{"country":"US"},"customer":{"email":"bob@example.org","vatId":null},"lines":[{"sku":"WID-001","qty":2,"unitCents":999},{"sku":"GAD-002","qty":1,"unitCents":1500}],"declared":{"netCents":3498,"vatCents":0,"grossCents":3498}}"""^^rdf:JSON "/lines") string:jsonPointer ("""{"sku":"WID-001","qty":2,"unitCents":999}"""^^rdf:JSON """{"sku":"GAD-002","qty":1,"unitCents":1500}"""^^rdf:JSON) .
#   ("""{"sku":"WID-001","qty":2,"unitCents":999}"""^^rdf:JSON """{"sku":"GAD-002","qty":1,"unitCents":1500}"""^^rdf:JSON) list:iterate (0 """{"sku":"WID-001","qty":2,"unitCents":999}"""^^rdf:JSON) .
#   ("""{"sku":"WID-001","qty":2,"unitCents":999}"""^^rdf:JSON "/sku") string:jsonPointer "WID-001" .
#   ("""{"sku":"WID-001","qty":2,"unitCents":999}"""^^rdf:JSON "/qty") string:jsonPointer 2 .
#   ("""{"sku":"WID-001","qty":2,"unitCents":999}"""^^rdf:JSON "/unitCents") string:jsonPointer 999 .
#   ex:Widget a ex:Product .
#   ex:Widget ex:sku "WID-001" .
#   (2 999) math:product 1998 .
#   ("urn:example:order:%s#line:%s" "A200" 0) string:format "urn:example:order:A200#line:0" .
#   <urn:example:order:A200#line:0> log:uri "urn:example:order:A200#line:0" .
#   "WID-001" string:equalIgnoringCase "WID-001" .
# via the schematic forward rule:
#   {
#     ex:feed ex:json ?J .
#     (?J "/orders") string:jsonPointer ?Orders .
#     ?Orders list:iterate (?OrderIndex ?OrderJson) .
#     (?OrderJson "/orderId") string:jsonPointer ?OrderId .
#     ("urn:example:order:%s" ?OrderId) string:format ?OrderUriStr .
#     ?Order log:uri ?OrderUriStr .
#     (?OrderJson "/lines") string:jsonPointer ?Lines .
#     ?Lines list:iterate (?LineIndex ?LineJson) .
#     (?LineJson "/sku") string:jsonPointer ?SkuJson .
#     (?LineJson "/qty") string:jsonPointer ?Qty .
#     (?LineJson "/unitCents") string:jsonPointer ?UnitCents .
#     ?Product a ex:Product .
#     ?Product ex:sku ?SkuCat .
#     (?Qty ?UnitCents) math:product ?NetCents .
#     ("urn:example:order:%s#line:%s" ?OrderId ?LineIndex) string:format ?LineUriStr .
#     ?Line log:uri ?LineUriStr .
#     ?SkuJson string:equalIgnoringCase ?SkuCat .
#   } => {
#     ?Order ex:line ?Line .
#     ?Line a ex:OrderLine .
#     ?Line ex:lineIndex ?LineIndex .
#     ?Line ex:product ?Product .
#     ?Line ex:sku ?SkuCat .
#     ?Line ex:qty ?Qty .
#     ?Line ex:unitCents ?UnitCents .
#     ?Line ex:netCents ?NetCents .
#   } .
# with substitution (on rule variables):
#   ?J = """{
#     "meta~data": { "batch": "2025-12-18" },
#     "orders": [
#     {
#     "orderId": "A100",
#     "shipTo": { "country": "BE" },
#     "customer": { "email": "Ada@Example.ORG", "vatId": null },
#     "lines": [
#     { "sku": "wid-001", "qty": 2, "unitCents": 999 },
#     { "sku": "GAD-002", "qty": 1, "unitCents": 1500 }
#     ],
#     "declared": { "netCents": 3498, "vatCents": 509, "grossCents": 4007 }
#     },
#     {
#     "orderId": "A200",
#     "shipTo": { "country": "US" },
#     "customer": { "email": "bob@example.org", "vatId": null },
#     "lines": [
#     { "sku": "WID-001", "qty": 2, "unitCents": 999 },
#     { "sku": "GAD-002", "qty": 1, "unitCents": 1500 }
#     ],
#     "declared": { "netCents": 3498, "vatCents": 0, "grossCents": 3498 }
#     },
#     {
#     "orderId": "A300",
#     "shipTo": { "country": "NL" },
#     "customer": { "email": "acct@company.nl", "vatId": "NL999999999B01" },
#     "lines": [
#     { "sku": "WID-001", "qty": 2, "unitCents": 999 },
#     { "sku": "GAD-002", "qty": 1, "unitCents": 1500 }
#     ],
#     "declared": { "netCents": 3498, "vatCents": 0, "grossCents": 3498 }
#     },
#     {
#     "orderId": "A301",
#     "shipTo": { "country": "NL" },
#     "customer": { "email": "billing@company.nl", "vatId": "NL999999999B01" },
#     "lines": [
#     { "sku": "WID-001", "qty": 2, "unitCents": 999 },
#     { "sku": "GAD-002", "qty": 1, "unitCents": 1500 }
#     ],
#     "declared": { "netCents": 3498, "vatCents": 0, "grossCents": 3498 }
#     },
#     {
#     "orderId": "A400",
#     "shipTo": { "country": "BE" },
#     "customer": { "email": "ada@other.example", "vatId": null },
#     "lines": [
#     { "sku": "WID-001", "qty": 2, "unitCents": 999 },
#     { "sku": "GAD-002", "qty": 1, "unitCents": 1500 }
#     ],
#     "declared": { "netCents": 3498, "vatCents": 508, "grossCents": 4006 }
#     }
#     ]
#   }"""^^rdf:JSON
#   ?Line = <urn:example:order:A200#line:0>
#   ?LineIndex = 0
#   ?LineJson = """{"sku":"WID-001","qty":2,"unitCents":999}"""^^rdf:JSON
#   ?LineUriStr = "urn:example:order:A200#line:0"
#   ?Lines = ("""{"sku":"WID-001","qty":2,"unitCents":999}"""^^rdf:JSON """{"sku":"GAD-002","qty":1,"unitCents":1500}"""^^rdf:JSON)
#   ?NetCents = 1998
#   ?Order = <urn:example:order:A200>
#   ?OrderId = "A200"
#   ?OrderIndex = 1
#   ?OrderJson = """{"orderId":"A200","shipTo":{"country":"US"},"customer":{"email":"bob@example.org","vatId":null},"lines":[{"sku":"WID-001","qty":2,"unitCents":999},{"sku":"GAD-002","qty":1,"unitCents":1500}],"declared":{"netCents":3498,"vatCents":0,"grossCents":3498}}"""^^rdf:JSON
#   ?OrderUriStr = "urn:example:order:A200"
#   ?Orders = ("""{"orderId":"A100","shipTo":{"country":"BE"},"customer":{"email":"Ada@Example.ORG","vatId":null},"lines":[{"sku":"wid-001","qty":2,"unitCents":999},{"sku":"GAD-002","qty":1,"unitCents":1500}],"declared":{"netCents":3498,"vatCents":509,"grossCents":4007}}"""^^rdf:JSON """{"orderId":"A200","shipTo":{"country":"US"},"customer":{"email":"bob@example.org","vatId":null},"lines":[{"sku":"WID-001","qty":2,"unitCents":999},{"sku":"GAD-002","qty":1,"unitCents":1500}],"declared":{"netCents":3498,"vatCents":0,"grossCents":3498}}"""^^rdf:JSON """{"orderId":"A300","shipTo":{"country":"NL"},"customer":{"email":"acct@company.nl","vatId":"NL999999999B01"},"lines":[{"sku":"WID-001","qty":2,"unitCents":999},{"sku":"GAD-002","qty":1,"unitCents":1500}],"declared":{"netCents":3498,"vatCents":0,"grossCents":3498}}"""^^rdf:JSON """{"orderId":"A301","shipTo":{"country":"NL"},"customer":{"email":"billing@company.nl","vatId":"NL999999999B01"},"lines":[{"sku":"WID-001","qty":2,"unitCents":999},{"sku":"GAD-002","qty":1,"unitCents":1500}],"declared":{"netCents":3498,"vatCents":0,"grossCents":3498}}"""^^rdf:JSON """{"orderId":"A400","shipTo":{"country":"BE"},"customer":{"email":"ada@other.example","vatId":null},"lines":[{"sku":"WID-001","qty":2,"unitCents":999},{"sku":"GAD-002","qty":1,"unitCents":1500}],"declared":{"netCents":3498,"vatCents":508,"grossCents":4006}}"""^^rdf:JSON)
#   ?Product = ex:Widget
#   ?Qty = 2
#   ?SkuCat = "WID-001"
#   ?SkuJson = "WID-001"
#   ?UnitCents = 999
# Therefore the derived triple above is entailed by the rules and facts.
# ----------------------------------------------------------------------

<urn:example:order:A200#line:0> ex:unitCents 999 .

# ----------------------------------------------------------------------
# Proof for derived triple:
#   <urn:example:order:A200#line:0> ex:netCents 1998 .
# It holds because the following instance of the rule body is provable:
#   ex:feed ex:json """{
#     "meta~data": { "batch": "2025-12-18" },
#     "orders": [
#       {
#         "orderId": "A100",
#         "shipTo": { "country": "BE" },
#         "customer": { "email": "Ada@Example.ORG", "vatId": null },
#         "lines": [
#           { "sku": "wid-001", "qty": 2, "unitCents": 999 },
#           { "sku": "GAD-002", "qty": 1, "unitCents": 1500 }
#         ],
#         "declared": { "netCents": 3498, "vatCents": 509, "grossCents": 4007 }
#       },
#       {
#         "orderId": "A200",
#         "shipTo": { "country": "US" },
#         "customer": { "email": "bob@example.org", "vatId": null },
#         "lines": [
#           { "sku": "WID-001", "qty": 2, "unitCents": 999 },
#           { "sku": "GAD-002", "qty": 1, "unitCents": 1500 }
#         ],
#         "declared": { "netCents": 3498, "vatCents": 0, "grossCents": 3498 }
#       },
#       {
#         "orderId": "A300",
#         "shipTo": { "country": "NL" },
#         "customer": { "email": "acct@company.nl", "vatId": "NL999999999B01" },
#         "lines": [
#           { "sku": "WID-001", "qty": 2, "unitCents": 999 },
#           { "sku": "GAD-002", "qty": 1, "unitCents": 1500 }
#         ],
#         "declared": { "netCents": 3498, "vatCents": 0, "grossCents": 3498 }
#       },
#       {
#         "orderId": "A301",
#         "shipTo": { "country": "NL" },
#         "customer": { "email": "billing@company.nl", "vatId": "NL999999999B01" },
#         "lines": [
#           { "sku": "WID-001", "qty": 2, "unitCents": 999 },
#           { "sku": "GAD-002", "qty": 1, "unitCents": 1500 }
#         ],
#         "declared": { "netCents": 3498, "vatCents": 0, "grossCents": 3498 }
#       },
#       {
#         "orderId": "A400",
#         "shipTo": { "country": "BE" },
#         "customer": { "email": "ada@other.example", "vatId": null },
#         "lines": [
#           { "sku": "WID-001", "qty": 2, "unitCents": 999 },
#           { "sku": "GAD-002", "qty": 1, "unitCents": 1500 }
#         ],
#         "declared": { "netCents": 3498, "vatCents": 508, "grossCents": 4006 }
#       }
#     ]
#   }"""^^rdf:JSON .
#   ("""{
#     "meta~data": { "batch": "2025-12-18" },
#     "orders": [
#       {
#         "orderId": "A100",
#         "shipTo": { "country": "BE" },
#         "customer": { "email": "Ada@Example.ORG", "vatId": null },
#         "lines": [
#           { "sku": "wid-001", "qty": 2, "unitCents": 999 },
#           { "sku": "GAD-002", "qty": 1, "unitCents": 1500 }
#         ],
#         "declared": { "netCents": 3498, "vatCents": 509, "grossCents": 4007 }
#       },
#       {
#         "orderId": "A200",
#         "shipTo": { "country": "US" },
#         "customer": { "email": "bob@example.org", "vatId": null },
#         "lines": [
#           { "sku": "WID-001", "qty": 2, "unitCents": 999 },
#           { "sku": "GAD-002", "qty": 1, "unitCents": 1500 }
#         ],
#         "declared": { "netCents": 3498, "vatCents": 0, "grossCents": 3498 }
#       },
#       {
#         "orderId": "A300",
#         "shipTo": { "country": "NL" },
#         "customer": { "email": "acct@company.nl", "vatId": "NL999999999B01" },
#         "lines": [
#           { "sku": "WID-001", "qty": 2, "unitCents": 999 },
#           { "sku": "GAD-002", "qty": 1, "unitCents": 1500 }
#         ],
#         "declared": { "netCents": 3498, "vatCents": 0, "grossCents": 3498 }
#       },
#       {
#         "orderId": "A301",
#         "shipTo": { "country": "NL" },
#         "customer": { "email": "billing@company.nl", "vatId": "NL999999999B01" },
#         "lines": [
#           { "sku": "WID-001", "qty": 2, "unitCents": 999 },
#           { "sku": "GAD-002", "qty": 1, "unitCents": 1500 }
#         ],
#         "declared": { "netCents": 3498, "vatCents": 0, "grossCents": 3498 }
#       },
#       {
#         "orderId": "A400",
#         "shipTo": { "country": "BE" },
#         "customer": { "email": "ada@other.example", "vatId": null },
#         "lines": [
#           { "sku": "WID-001", "qty": 2, "unitCents": 999 },
#           { "sku": "GAD-002", "qty": 1, "unitCents": 1500 }
#         ],
#         "declared": { "netCents": 3498, "vatCents": 508, "grossCents": 4006 }
#       }
#     ]
#   }"""^^rdf:JSON "/orders") string:jsonPointer ("""{"orderId":"A100","shipTo":{"country":"BE"},"customer":{"email":"Ada@Example.ORG","vatId":null},"lines":[{"sku":"wid-001","qty":2,"unitCents":999},{"sku":"GAD-002","qty":1,"unitCents":1500}],"declared":{"netCents":3498,"vatCents":509,"grossCents":4007}}"""^^rdf:JSON """{"orderId":"A200","shipTo":{"country":"US"},"customer":{"email":"bob@example.org","vatId":null},"lines":[{"sku":"WID-001","qty":2,"unitCents":999},{"sku":"GAD-002","qty":1,"unitCents":1500}],"declared":{"netCents":3498,"vatCents":0,"grossCents":3498}}"""^^rdf:JSON """{"orderId":"A300","shipTo":{"country":"NL"},"customer":{"email":"acct@company.nl","vatId":"NL999999999B01"},"lines":[{"sku":"WID-001","qty":2,"unitCents":999},{"sku":"GAD-002","qty":1,"unitCents":1500}],"declared":{"netCents":3498,"vatCents":0,"grossCents":3498}}"""^^rdf:JSON """{"orderId":"A301","shipTo":{"country":"NL"},"customer":{"email":"billing@company.nl","vatId":"NL999999999B01"},"lines":[{"sku":"WID-001","qty":2,"unitCents":999},{"sku":"GAD-002","qty":1,"unitCents":1500}],"declared":{"netCents":3498,"vatCents":0,"grossCents":3498}}"""^^rdf:JSON """{"orderId":"A400","shipTo":{"country":"BE"},"customer":{"email":"ada@other.example","vatId":null},"lines":[{"sku":"WID-001","qty":2,"unitCents":999},{"sku":"GAD-002","qty":1,"unitCents":1500}],"declared":{"netCents":3498,"vatCents":508,"grossCents":4006}}"""^^rdf:JSON) .
#   ("""{"orderId":"A100","shipTo":{"country":"BE"},"customer":{"email":"Ada@Example.ORG","vatId":null},"lines":[{"sku":"wid-001","qty":2,"unitCents":999},{"sku":"GAD-002","qty":1,"unitCents":1500}],"declared":{"netCents":3498,"vatCents":509,"grossCents":4007}}"""^^rdf:JSON """{"orderId":"A200","shipTo":{"country":"US"},"customer":{"email":"bob@example.org","vatId":null},"lines":[{"sku":"WID-001","qty":2,"unitCents":999},{"sku":"GAD-002","qty":1,"unitCents":1500}],"declared":{"netCents":3498,"vatCents":0,"grossCents":3498}}"""^^rdf:JSON """{"orderId":"A300","shipTo":{"country":"NL"},"customer":{"email":"acct@company.nl","vatId":"NL999999999B01"},"lines":[{"sku":"WID-001","qty":2,"unitCents":999},{"sku":"GAD-002","qty":1,"unitCents":1500}],"declared":{"netCents":3498,"vatCents":0,"grossCents":3498}}"""^^rdf:JSON """{"orderId":"A301","shipTo":{"country":"NL"},"customer":{"email":"billing@company.nl","vatId":"NL999999999B01"},"lines":[{"sku":"WID-001","qty":2,"unitCents":999},{"sku":"GAD-002","qty":1,"unitCents":1500}],"declared":{"netCents":3498,"vatCents":0,"grossCents":3498}}"""^^rdf:JSON """{"orderId":"A400","shipTo":{"country":"BE"},"customer":{"email":"ada@other.example","vatId":null},"lines":[{"sku":"WID-001","qty":2,"unitCents":999},{"sku":"GAD-002","qty":1,"unitCents":1500}],"declared":{"netCents":3498,"vatCents":508,"grossCents":4006}}"""^^rdf:JSON) list:iterate (1 """{"orderId":"A200","shipTo":{"country":"US"},"customer":{"email":"bob@example.org","vatId":null},"lines":[{"sku":"WID-001","qty":2,"unitCents":999},{"sku":"GAD-002","qty":1,"unitCents":1500}],"declared":{"netCents":3498,"vatCents":0,"grossCents":3498}}"""^^rdf:JSON) .
#   ("""{"orderId":"A200","shipTo":{"country":"US"},"customer":{"email":"bob@example.org","vatId":null},"lines":[{"sku":"WID-001","qty":2,"unitCents":999},{"sku":"GAD-002","qty":1,"unitCents":1500}],"declared":{"netCents":3498,"vatCents":0,"grossCents":3498}}"""^^rdf:JSON "/orderId") string:jsonPointer "A200" .
#   ("urn:example:order:%s" "A200") string:format "urn:example:order:A200" .
#   <urn:example:order:A200> log:uri "urn:example:order:A200" .
#   ("""{"orderId":"A200","shipTo":{"country":"US"},"customer":{"email":"bob@example.org","vatId":null},"lines":[{"sku":"WID-001","qty":2,"unitCents":999},{"sku":"GAD-002","qty":1,"unitCents":1500}],"declared":{"netCents":3498,"vatCents":0,"grossCents":3498}}"""^^rdf:JSON "/lines") string:jsonPointer ("""{"sku":"WID-001","qty":2,"unitCents":999}"""^^rdf:JSON """{"sku":"GAD-002","qty":1,"unitCents":1500}"""^^rdf:JSON) .
#   ("""{"sku":"WID-001","qty":2,"unitCents":999}"""^^rdf:JSON """{"sku":"GAD-002","qty":1,"unitCents":1500}"""^^rdf:JSON) list:iterate (0 """{"sku":"WID-001","qty":2,"unitCents":999}"""^^rdf:JSON) .
#   ("""{"sku":"WID-001","qty":2,"unitCents":999}"""^^rdf:JSON "/sku") string:jsonPointer "WID-001" .
#   ("""{"sku":"WID-001","qty":2,"unitCents":999}"""^^rdf:JSON "/qty") string:jsonPointer 2 .
#   ("""{"sku":"WID-001","qty":2,"unitCents":999}"""^^rdf:JSON "/unitCents") string:jsonPointer 999 .
#   ex:Widget a ex:Product .
#   ex:Widget ex:sku "WID-001" .
#   (2 999) math:product 1998 .
#   ("urn:example:order:%s#line:%s" "A200" 0) string:format "urn:example:order:A200#line:0" .
#   <urn:example:order:A200#line:0> log:uri "urn:example:order:A200#line:0" .
#   "WID-001" string:equalIgnoringCase "WID-001" .
# via the schematic forward rule:
#   {
#     ex:feed ex:json ?J .
#     (?J "/orders") string:jsonPointer ?Orders .
#     ?Orders list:iterate (?OrderIndex ?OrderJson) .
#     (?OrderJson "/orderId") string:jsonPointer ?OrderId .
#     ("urn:example:order:%s" ?OrderId) string:format ?OrderUriStr .
#     ?Order log:uri ?OrderUriStr .
#     (?OrderJson "/lines") string:jsonPointer ?Lines .
#     ?Lines list:iterate (?LineIndex ?LineJson) .
#     (?LineJson "/sku") string:jsonPointer ?SkuJson .
#     (?LineJson "/qty") string:jsonPointer ?Qty .
#     (?LineJson "/unitCents") string:jsonPointer ?UnitCents .
#     ?Product a ex:Product .
#     ?Product ex:sku ?SkuCat .
#     (?Qty ?UnitCents) math:product ?NetCents .
#     ("urn:example:order:%s#line:%s" ?OrderId ?LineIndex) string:format ?LineUriStr .
#     ?Line log:uri ?LineUriStr .
#     ?SkuJson string:equalIgnoringCase ?SkuCat .
#   } => {
#     ?Order ex:line ?Line .
#     ?Line a ex:OrderLine .
#     ?Line ex:lineIndex ?LineIndex .
#     ?Line ex:product ?Product .
#     ?Line ex:sku ?SkuCat .
#     ?Line ex:qty ?Qty .
#     ?Line ex:unitCents ?UnitCents .
#     ?Line ex:netCents ?NetCents .
#   } .
# with substitution (on rule variables):
#   ?J = """{
#     "meta~data": { "batch": "2025-12-18" },
#     "orders": [
#     {
#     "orderId": "A100",
#     "shipTo": { "country": "BE" },
#     "customer": { "email": "Ada@Example.ORG", "vatId": null },
#     "lines": [
#     { "sku": "wid-001", "qty": 2, "unitCents": 999 },
#     { "sku": "GAD-002", "qty": 1, "unitCents": 1500 }
#     ],
#     "declared": { "netCents": 3498, "vatCents": 509, "grossCents": 4007 }
#     },
#     {
#     "orderId": "A200",
#     "shipTo": { "country": "US" },
#     "customer": { "email": "bob@example.org", "vatId": null },
#     "lines": [
#     { "sku": "WID-001", "qty": 2, "unitCents": 999 },
#     { "sku": "GAD-002", "qty": 1, "unitCents": 1500 }
#     ],
#     "declared": { "netCents": 3498, "vatCents": 0, "grossCents": 3498 }
#     },
#     {
#     "orderId": "A300",
#     "shipTo": { "country": "NL" },
#     "customer": { "email": "acct@company.nl", "vatId": "NL999999999B01" },
#     "lines": [
#     { "sku": "WID-001", "qty": 2, "unitCents": 999 },
#     { "sku": "GAD-002", "qty": 1, "unitCents": 1500 }
#     ],
#     "declared": { "netCents": 3498, "vatCents": 0, "grossCents": 3498 }
#     },
#     {
#     "orderId": "A301",
#     "shipTo": { "country": "NL" },
#     "customer": { "email": "billing@company.nl", "vatId": "NL999999999B01" },
#     "lines": [
#     { "sku": "WID-001", "qty": 2, "unitCents": 999 },
#     { "sku": "GAD-002", "qty": 1, "unitCents": 1500 }
#     ],
#     "declared": { "netCents": 3498, "vatCents": 0, "grossCents": 3498 }
#     },
#     {
#     "orderId": "A400",
#     "shipTo": { "country": "BE" },
#     "customer": { "email": "ada@other.example", "vatId": null },
#     "lines": [
#     { "sku": "WID-001", "qty": 2, "unitCents": 999 },
#     { "sku": "GAD-002", "qty": 1, "unitCents": 1500 }
#     ],
#     "declared": { "netCents": 3498, "vatCents": 508, "grossCents": 4006 }
#     }
#     ]
#   }"""^^rdf:JSON
#   ?Line = <urn:example:order:A200#line:0>
#   ?LineIndex = 0
#   ?LineJson = """{"sku":"WID-001","qty":2,"unitCents":999}"""^^rdf:JSON
#   ?LineUriStr = "urn:example:order:A200#line:0"
#   ?Lines = ("""{"sku":"WID-001","qty":2,"unitCents":999}"""^^rdf:JSON """{"sku":"GAD-002","qty":1,"unitCents":1500}"""^^rdf:JSON)
#   ?NetCents = 1998
#   ?Order = <urn:example:order:A200>
#   ?OrderId = "A200"
#   ?OrderIndex = 1
#   ?OrderJson = """{"orderId":"A200","shipTo":{"country":"US"},"customer":{"email":"bob@example.org","vatId":null},"lines":[{"sku":"WID-001","qty":2,"unitCents":999},{"sku":"GAD-002","qty":1,"unitCents":1500}],"declared":{"netCents":3498,"vatCents":0,"grossCents":3498}}"""^^rdf:JSON
#   ?OrderUriStr = "urn:example:order:A200"
#   ?Orders = ("""{"orderId":"A100","shipTo":{"country":"BE"},"customer":{"email":"Ada@Example.ORG","vatId":null},"lines":[{"sku":"wid-001","qty":2,"unitCents":999},{"sku":"GAD-002","qty":1,"unitCents":1500}],"declared":{"netCents":3498,"vatCents":509,"grossCents":4007}}"""^^rdf:JSON """{"orderId":"A200","shipTo":{"country":"US"},"customer":{"email":"bob@example.org","vatId":null},"lines":[{"sku":"WID-001","qty":2,"unitCents":999},{"sku":"GAD-002","qty":1,"unitCents":1500}],"declared":{"netCents":3498,"vatCents":0,"grossCents":3498}}"""^^rdf:JSON """{"orderId":"A300","shipTo":{"country":"NL"},"customer":{"email":"acct@company.nl","vatId":"NL999999999B01"},"lines":[{"sku":"WID-001","qty":2,"unitCents":999},{"sku":"GAD-002","qty":1,"unitCents":1500}],"declared":{"netCents":3498,"vatCents":0,"grossCents":3498}}"""^^rdf:JSON """{"orderId":"A301","shipTo":{"country":"NL"},"customer":{"email":"billing@company.nl","vatId":"NL999999999B01"},"lines":[{"sku":"WID-001","qty":2,"unitCents":999},{"sku":"GAD-002","qty":1,"unitCents":1500}],"declared":{"netCents":3498,"vatCents":0,"grossCents":3498}}"""^^rdf:JSON """{"orderId":"A400","shipTo":{"country":"BE"},"customer":{"email":"ada@other.example","vatId":null},"lines":[{"sku":"WID-001","qty":2,"unitCents":999},{"sku":"GAD-002","qty":1,"unitCents":1500}],"declared":{"netCents":3498,"vatCents":508,"grossCents":4006}}"""^^rdf:JSON)
#   ?Product = ex:Widget
#   ?Qty = 2
#   ?SkuCat = "WID-001"
#   ?SkuJson = "WID-001"
#   ?UnitCents = 999
# Therefore the derived triple above is entailed by the rules and facts.
# ----------------------------------------------------------------------

<urn:example:order:A200#line:0> ex:netCents 1998 .

# ----------------------------------------------------------------------
# Proof for derived triple:
#   <urn:example:order:A100> ex:line <urn:example:order:A100#line:1> .
# It holds because the following instance of the rule body is provable:
#   ex:feed ex:json """{
#     "meta~data": { "batch": "2025-12-18" },
#     "orders": [
#       {
#         "orderId": "A100",
#         "shipTo": { "country": "BE" },
#         "customer": { "email": "Ada@Example.ORG", "vatId": null },
#         "lines": [
#           { "sku": "wid-001", "qty": 2, "unitCents": 999 },
#           { "sku": "GAD-002", "qty": 1, "unitCents": 1500 }
#         ],
#         "declared": { "netCents": 3498, "vatCents": 509, "grossCents": 4007 }
#       },
#       {
#         "orderId": "A200",
#         "shipTo": { "country": "US" },
#         "customer": { "email": "bob@example.org", "vatId": null },
#         "lines": [
#           { "sku": "WID-001", "qty": 2, "unitCents": 999 },
#           { "sku": "GAD-002", "qty": 1, "unitCents": 1500 }
#         ],
#         "declared": { "netCents": 3498, "vatCents": 0, "grossCents": 3498 }
#       },
#       {
#         "orderId": "A300",
#         "shipTo": { "country": "NL" },
#         "customer": { "email": "acct@company.nl", "vatId": "NL999999999B01" },
#         "lines": [
#           { "sku": "WID-001", "qty": 2, "unitCents": 999 },
#           { "sku": "GAD-002", "qty": 1, "unitCents": 1500 }
#         ],
#         "declared": { "netCents": 3498, "vatCents": 0, "grossCents": 3498 }
#       },
#       {
#         "orderId": "A301",
#         "shipTo": { "country": "NL" },
#         "customer": { "email": "billing@company.nl", "vatId": "NL999999999B01" },
#         "lines": [
#           { "sku": "WID-001", "qty": 2, "unitCents": 999 },
#           { "sku": "GAD-002", "qty": 1, "unitCents": 1500 }
#         ],
#         "declared": { "netCents": 3498, "vatCents": 0, "grossCents": 3498 }
#       },
#       {
#         "orderId": "A400",
#         "shipTo": { "country": "BE" },
#         "customer": { "email": "ada@other.example", "vatId": null },
#         "lines": [
#           { "sku": "WID-001", "qty": 2, "unitCents": 999 },
#           { "sku": "GAD-002", "qty": 1, "unitCents": 1500 }
#         ],
#         "declared": { "netCents": 3498, "vatCents": 508, "grossCents": 4006 }
#       }
#     ]
#   }"""^^rdf:JSON .
#   ("""{
#     "meta~data": { "batch": "2025-12-18" },
#     "orders": [
#       {
#         "orderId": "A100",
#         "shipTo": { "country": "BE" },
#         "customer": { "email": "Ada@Example.ORG", "vatId": null },
#         "lines": [
#           { "sku": "wid-001", "qty": 2, "unitCents": 999 },
#           { "sku": "GAD-002", "qty": 1, "unitCents": 1500 }
#         ],
#         "declared": { "netCents": 3498, "vatCents": 509, "grossCents": 4007 }
#       },
#       {
#         "orderId": "A200",
#         "shipTo": { "country": "US" },
#         "customer": { "email": "bob@example.org", "vatId": null },
#         "lines": [
#           { "sku": "WID-001", "qty": 2, "unitCents": 999 },
#           { "sku": "GAD-002", "qty": 1, "unitCents": 1500 }
#         ],
#         "declared": { "netCents": 3498, "vatCents": 0, "grossCents": 3498 }
#       },
#       {
#         "orderId": "A300",
#         "shipTo": { "country": "NL" },
#         "customer": { "email": "acct@company.nl", "vatId": "NL999999999B01" },
#         "lines": [
#           { "sku": "WID-001", "qty": 2, "unitCents": 999 },
#           { "sku": "GAD-002", "qty": 1, "unitCents": 1500 }
#         ],
#         "declared": { "netCents": 3498, "vatCents": 0, "grossCents": 3498 }
#       },
#       {
#         "orderId": "A301",
#         "shipTo": { "country": "NL" },
#         "customer": { "email": "billing@company.nl", "vatId": "NL999999999B01" },
#         "lines": [
#           { "sku": "WID-001", "qty": 2, "unitCents": 999 },
#           { "sku": "GAD-002", "qty": 1, "unitCents": 1500 }
#         ],
#         "declared": { "netCents": 3498, "vatCents": 0, "grossCents": 3498 }
#       },
#       {
#         "orderId": "A400",
#         "shipTo": { "country": "BE" },
#         "customer": { "email": "ada@other.example", "vatId": null },
#         "lines": [
#           { "sku": "WID-001", "qty": 2, "unitCents": 999 },
#           { "sku": "GAD-002", "qty": 1, "unitCents": 1500 }
#         ],
#         "declared": { "netCents": 3498, "vatCents": 508, "grossCents": 4006 }
#       }
#     ]
#   }"""^^rdf:JSON "/orders") string:jsonPointer ("""{"orderId":"A100","shipTo":{"country":"BE"},"customer":{"email":"Ada@Example.ORG","vatId":null},"lines":[{"sku":"wid-001","qty":2,"unitCents":999},{"sku":"GAD-002","qty":1,"unitCents":1500}],"declared":{"netCents":3498,"vatCents":509,"grossCents":4007}}"""^^rdf:JSON """{"orderId":"A200","shipTo":{"country":"US"},"customer":{"email":"bob@example.org","vatId":null},"lines":[{"sku":"WID-001","qty":2,"unitCents":999},{"sku":"GAD-002","qty":1,"unitCents":1500}],"declared":{"netCents":3498,"vatCents":0,"grossCents":3498}}"""^^rdf:JSON """{"orderId":"A300","shipTo":{"country":"NL"},"customer":{"email":"acct@company.nl","vatId":"NL999999999B01"},"lines":[{"sku":"WID-001","qty":2,"unitCents":999},{"sku":"GAD-002","qty":1,"unitCents":1500}],"declared":{"netCents":3498,"vatCents":0,"grossCents":3498}}"""^^rdf:JSON """{"orderId":"A301","shipTo":{"country":"NL"},"customer":{"email":"billing@company.nl","vatId":"NL999999999B01"},"lines":[{"sku":"WID-001","qty":2,"unitCents":999},{"sku":"GAD-002","qty":1,"unitCents":1500}],"declared":{"netCents":3498,"vatCents":0,"grossCents":3498}}"""^^rdf:JSON """{"orderId":"A400","shipTo":{"country":"BE"},"customer":{"email":"ada@other.example","vatId":null},"lines":[{"sku":"WID-001","qty":2,"unitCents":999},{"sku":"GAD-002","qty":1,"unitCents":1500}],"declared":{"netCents":3498,"vatCents":508,"grossCents":4006}}"""^^rdf:JSON) .
#   ("""{"orderId":"A100","shipTo":{"country":"BE"},"customer":{"email":"Ada@Example.ORG","vatId":null},"lines":[{"sku":"wid-001","qty":2,"unitCents":999},{"sku":"GAD-002","qty":1,"unitCents":1500}],"declared":{"netCents":3498,"vatCents":509,"grossCents":4007}}"""^^rdf:JSON """{"orderId":"A200","shipTo":{"country":"US"},"customer":{"email":"bob@example.org","vatId":null},"lines":[{"sku":"WID-001","qty":2,"unitCents":999},{"sku":"GAD-002","qty":1,"unitCents":1500}],"declared":{"netCents":3498,"vatCents":0,"grossCents":3498}}"""^^rdf:JSON """{"orderId":"A300","shipTo":{"country":"NL"},"customer":{"email":"acct@company.nl","vatId":"NL999999999B01"},"lines":[{"sku":"WID-001","qty":2,"unitCents":999},{"sku":"GAD-002","qty":1,"unitCents":1500}],"declared":{"netCents":3498,"vatCents":0,"grossCents":3498}}"""^^rdf:JSON """{"orderId":"A301","shipTo":{"country":"NL"},"customer":{"email":"billing@company.nl","vatId":"NL999999999B01"},"lines":[{"sku":"WID-001","qty":2,"unitCents":999},{"sku":"GAD-002","qty":1,"unitCents":1500}],"declared":{"netCents":3498,"vatCents":0,"grossCents":3498}}"""^^rdf:JSON """{"orderId":"A400","shipTo":{"country":"BE"},"customer":{"email":"ada@other.example","vatId":null},"lines":[{"sku":"WID-001","qty":2,"unitCents":999},{"sku":"GAD-002","qty":1,"unitCents":1500}],"declared":{"netCents":3498,"vatCents":508,"grossCents":4006}}"""^^rdf:JSON) list:iterate (0 """{"orderId":"A100","shipTo":{"country":"BE"},"customer":{"email":"Ada@Example.ORG","vatId":null},"lines":[{"sku":"wid-001","qty":2,"unitCents":999},{"sku":"GAD-002","qty":1,"unitCents":1500}],"declared":{"netCents":3498,"vatCents":509,"grossCents":4007}}"""^^rdf:JSON) .
#   ("""{"orderId":"A100","shipTo":{"country":"BE"},"customer":{"email":"Ada@Example.ORG","vatId":null},"lines":[{"sku":"wid-001","qty":2,"unitCents":999},{"sku":"GAD-002","qty":1,"unitCents":1500}],"declared":{"netCents":3498,"vatCents":509,"grossCents":4007}}"""^^rdf:JSON "/orderId") string:jsonPointer "A100" .
#   ("urn:example:order:%s" "A100") string:format "urn:example:order:A100" .
#   <urn:example:order:A100> log:uri "urn:example:order:A100" .
#   ("""{"orderId":"A100","shipTo":{"country":"BE"},"customer":{"email":"Ada@Example.ORG","vatId":null},"lines":[{"sku":"wid-001","qty":2,"unitCents":999},{"sku":"GAD-002","qty":1,"unitCents":1500}],"declared":{"netCents":3498,"vatCents":509,"grossCents":4007}}"""^^rdf:JSON "/lines") string:jsonPointer ("""{"sku":"wid-001","qty":2,"unitCents":999}"""^^rdf:JSON """{"sku":"GAD-002","qty":1,"unitCents":1500}"""^^rdf:JSON) .
#   ("""{"sku":"wid-001","qty":2,"unitCents":999}"""^^rdf:JSON """{"sku":"GAD-002","qty":1,"unitCents":1500}"""^^rdf:JSON) list:iterate (1 """{"sku":"GAD-002","qty":1,"unitCents":1500}"""^^rdf:JSON) .
#   ("""{"sku":"GAD-002","qty":1,"unitCents":1500}"""^^rdf:JSON "/sku") string:jsonPointer "GAD-002" .
#   ("""{"sku":"GAD-002","qty":1,"unitCents":1500}"""^^rdf:JSON "/qty") string:jsonPointer 1 .
#   ("""{"sku":"GAD-002","qty":1,"unitCents":1500}"""^^rdf:JSON "/unitCents") string:jsonPointer 1500 .
#   ex:Gadget a ex:Product .
#   ex:Gadget ex:sku "GAD-002" .
#   (1 1500) math:product 1500 .
#   ("urn:example:order:%s#line:%s" "A100" 1) string:format "urn:example:order:A100#line:1" .
#   <urn:example:order:A100#line:1> log:uri "urn:example:order:A100#line:1" .
#   "GAD-002" string:equalIgnoringCase "GAD-002" .
# via the schematic forward rule:
#   {
#     ex:feed ex:json ?J .
#     (?J "/orders") string:jsonPointer ?Orders .
#     ?Orders list:iterate (?OrderIndex ?OrderJson) .
#     (?OrderJson "/orderId") string:jsonPointer ?OrderId .
#     ("urn:example:order:%s" ?OrderId) string:format ?OrderUriStr .
#     ?Order log:uri ?OrderUriStr .
#     (?OrderJson "/lines") string:jsonPointer ?Lines .
#     ?Lines list:iterate (?LineIndex ?LineJson) .
#     (?LineJson "/sku") string:jsonPointer ?SkuJson .
#     (?LineJson "/qty") string:jsonPointer ?Qty .
#     (?LineJson "/unitCents") string:jsonPointer ?UnitCents .
#     ?Product a ex:Product .
#     ?Product ex:sku ?SkuCat .
#     (?Qty ?UnitCents) math:product ?NetCents .
#     ("urn:example:order:%s#line:%s" ?OrderId ?LineIndex) string:format ?LineUriStr .
#     ?Line log:uri ?LineUriStr .
#     ?SkuJson string:equalIgnoringCase ?SkuCat .
#   } => {
#     ?Order ex:line ?Line .
#     ?Line a ex:OrderLine .
#     ?Line ex:lineIndex ?LineIndex .
#     ?Line ex:product ?Product .
#     ?Line ex:sku ?SkuCat .
#     ?Line ex:qty ?Qty .
#     ?Line ex:unitCents ?UnitCents .
#     ?Line ex:netCents ?NetCents .
#   } .
# with substitution (on rule variables):
#   ?J = """{
#     "meta~data": { "batch": "2025-12-18" },
#     "orders": [
#     {
#     "orderId": "A100",
#     "shipTo": { "country": "BE" },
#     "customer": { "email": "Ada@Example.ORG", "vatId": null },
#     "lines": [
#     { "sku": "wid-001", "qty": 2, "unitCents": 999 },
#     { "sku": "GAD-002", "qty": 1, "unitCents": 1500 }
#     ],
#     "declared": { "netCents": 3498, "vatCents": 509, "grossCents": 4007 }
#     },
#     {
#     "orderId": "A200",
#     "shipTo": { "country": "US" },
#     "customer": { "email": "bob@example.org", "vatId": null },
#     "lines": [
#     { "sku": "WID-001", "qty": 2, "unitCents": 999 },
#     { "sku": "GAD-002", "qty": 1, "unitCents": 1500 }
#     ],
#     "declared": { "netCents": 3498, "vatCents": 0, "grossCents": 3498 }
#     },
#     {
#     "orderId": "A300",
#     "shipTo": { "country": "NL" },
#     "customer": { "email": "acct@company.nl", "vatId": "NL999999999B01" },
#     "lines": [
#     { "sku": "WID-001", "qty": 2, "unitCents": 999 },
#     { "sku": "GAD-002", "qty": 1, "unitCents": 1500 }
#     ],
#     "declared": { "netCents": 3498, "vatCents": 0, "grossCents": 3498 }
#     },
#     {
#     "orderId": "A301",
#     "shipTo": { "country": "NL" },
#     "customer": { "email": "billing@company.nl", "vatId": "NL999999999B01" },
#     "lines": [
#     { "sku": "WID-001", "qty": 2, "unitCents": 999 },
#     { "sku": "GAD-002", "qty": 1, "unitCents": 1500 }
#     ],
#     "declared": { "netCents": 3498, "vatCents": 0, "grossCents": 3498 }
#     },
#     {
#     "orderId": "A400",
#     "shipTo": { "country": "BE" },
#     "customer": { "email": "ada@other.example", "vatId": null },
#     "lines": [
#     { "sku": "WID-001", "qty": 2, "unitCents": 999 },
#     { "sku": "GAD-002", "qty": 1, "unitCents": 1500 }
#     ],
#     "declared": { "netCents": 3498, "vatCents": 508, "grossCents": 4006 }
#     }
#     ]
#   }"""^^rdf:JSON
#   ?Line = <urn:example:order:A100#line:1>
#   ?LineIndex = 1
#   ?LineJson = """{"sku":"GAD-002","qty":1,"unitCents":1500}"""^^rdf:JSON
#   ?LineUriStr = "urn:example:order:A100#line:1"
#   ?Lines = ("""{"sku":"wid-001","qty":2,"unitCents":999}"""^^rdf:JSON """{"sku":"GAD-002","qty":1,"unitCents":1500}"""^^rdf:JSON)
#   ?NetCents = 1500
#   ?Order = <urn:example:order:A100>
#   ?OrderId = "A100"
#   ?OrderIndex = 0
#   ?OrderJson = """{"orderId":"A100","shipTo":{"country":"BE"},"customer":{"email":"Ada@Example.ORG","vatId":null},"lines":[{"sku":"wid-001","qty":2,"unitCents":999},{"sku":"GAD-002","qty":1,"unitCents":1500}],"declared":{"netCents":3498,"vatCents":509,"grossCents":4007}}"""^^rdf:JSON
#   ?OrderUriStr = "urn:example:order:A100"
#   ?Orders = ("""{"orderId":"A100","shipTo":{"country":"BE"},"customer":{"email":"Ada@Example.ORG","vatId":null},"lines":[{"sku":"wid-001","qty":2,"unitCents":999},{"sku":"GAD-002","qty":1,"unitCents":1500}],"declared":{"netCents":3498,"vatCents":509,"grossCents":4007}}"""^^rdf:JSON """{"orderId":"A200","shipTo":{"country":"US"},"customer":{"email":"bob@example.org","vatId":null},"lines":[{"sku":"WID-001","qty":2,"unitCents":999},{"sku":"GAD-002","qty":1,"unitCents":1500}],"declared":{"netCents":3498,"vatCents":0,"grossCents":3498}}"""^^rdf:JSON """{"orderId":"A300","shipTo":{"country":"NL"},"customer":{"email":"acct@company.nl","vatId":"NL999999999B01"},"lines":[{"sku":"WID-001","qty":2,"unitCents":999},{"sku":"GAD-002","qty":1,"unitCents":1500}],"declared":{"netCents":3498,"vatCents":0,"grossCents":3498}}"""^^rdf:JSON """{"orderId":"A301","shipTo":{"country":"NL"},"customer":{"email":"billing@company.nl","vatId":"NL999999999B01"},"lines":[{"sku":"WID-001","qty":2,"unitCents":999},{"sku":"GAD-002","qty":1,"unitCents":1500}],"declared":{"netCents":3498,"vatCents":0,"grossCents":3498}}"""^^rdf:JSON """{"orderId":"A400","shipTo":{"country":"BE"},"customer":{"email":"ada@other.example","vatId":null},"lines":[{"sku":"WID-001","qty":2,"unitCents":999},{"sku":"GAD-002","qty":1,"unitCents":1500}],"declared":{"netCents":3498,"vatCents":508,"grossCents":4006}}"""^^rdf:JSON)
#   ?Product = ex:Gadget
#   ?Qty = 1
#   ?SkuCat = "GAD-002"
#   ?SkuJson = "GAD-002"
#   ?UnitCents = 1500
# Therefore the derived triple above is entailed by the rules and facts.
# ----------------------------------------------------------------------

<urn:example:order:A100> ex:line <urn:example:order:A100#line:1> .

# ----------------------------------------------------------------------
# Proof for derived triple:
#   <urn:example:order:A100#line:1> a ex:OrderLine .
# It holds because the following instance of the rule body is provable:
#   ex:feed ex:json """{
#     "meta~data": { "batch": "2025-12-18" },
#     "orders": [
#       {
#         "orderId": "A100",
#         "shipTo": { "country": "BE" },
#         "customer": { "email": "Ada@Example.ORG", "vatId": null },
#         "lines": [
#           { "sku": "wid-001", "qty": 2, "unitCents": 999 },
#           { "sku": "GAD-002", "qty": 1, "unitCents": 1500 }
#         ],
#         "declared": { "netCents": 3498, "vatCents": 509, "grossCents": 4007 }
#       },
#       {
#         "orderId": "A200",
#         "shipTo": { "country": "US" },
#         "customer": { "email": "bob@example.org", "vatId": null },
#         "lines": [
#           { "sku": "WID-001", "qty": 2, "unitCents": 999 },
#           { "sku": "GAD-002", "qty": 1, "unitCents": 1500 }
#         ],
#         "declared": { "netCents": 3498, "vatCents": 0, "grossCents": 3498 }
#       },
#       {
#         "orderId": "A300",
#         "shipTo": { "country": "NL" },
#         "customer": { "email": "acct@company.nl", "vatId": "NL999999999B01" },
#         "lines": [
#           { "sku": "WID-001", "qty": 2, "unitCents": 999 },
#           { "sku": "GAD-002", "qty": 1, "unitCents": 1500 }
#         ],
#         "declared": { "netCents": 3498, "vatCents": 0, "grossCents": 3498 }
#       },
#       {
#         "orderId": "A301",
#         "shipTo": { "country": "NL" },
#         "customer": { "email": "billing@company.nl", "vatId": "NL999999999B01" },
#         "lines": [
#           { "sku": "WID-001", "qty": 2, "unitCents": 999 },
#           { "sku": "GAD-002", "qty": 1, "unitCents": 1500 }
#         ],
#         "declared": { "netCents": 3498, "vatCents": 0, "grossCents": 3498 }
#       },
#       {
#         "orderId": "A400",
#         "shipTo": { "country": "BE" },
#         "customer": { "email": "ada@other.example", "vatId": null },
#         "lines": [
#           { "sku": "WID-001", "qty": 2, "unitCents": 999 },
#           { "sku": "GAD-002", "qty": 1, "unitCents": 1500 }
#         ],
#         "declared": { "netCents": 3498, "vatCents": 508, "grossCents": 4006 }
#       }
#     ]
#   }"""^^rdf:JSON .
#   ("""{
#     "meta~data": { "batch": "2025-12-18" },
#     "orders": [
#       {
#         "orderId": "A100",
#         "shipTo": { "country": "BE" },
#         "customer": { "email": "Ada@Example.ORG", "vatId": null },
#         "lines": [
#           { "sku": "wid-001", "qty": 2, "unitCents": 999 },
#           { "sku": "GAD-002", "qty": 1, "unitCents": 1500 }
#         ],
#         "declared": { "netCents": 3498, "vatCents": 509, "grossCents": 4007 }
#       },
#       {
#         "orderId": "A200",
#         "shipTo": { "country": "US" },
#         "customer": { "email": "bob@example.org", "vatId": null },
#         "lines": [
#           { "sku": "WID-001", "qty": 2, "unitCents": 999 },
#           { "sku": "GAD-002", "qty": 1, "unitCents": 1500 }
#         ],
#         "declared": { "netCents": 3498, "vatCents": 0, "grossCents": 3498 }
#       },
#       {
#         "orderId": "A300",
#         "shipTo": { "country": "NL" },
#         "customer": { "email": "acct@company.nl", "vatId": "NL999999999B01" },
#         "lines": [
#           { "sku": "WID-001", "qty": 2, "unitCents": 999 },
#           { "sku": "GAD-002", "qty": 1, "unitCents": 1500 }
#         ],
#         "declared": { "netCents": 3498, "vatCents": 0, "grossCents": 3498 }
#       },
#       {
#         "orderId": "A301",
#         "shipTo": { "country": "NL" },
#         "customer": { "email": "billing@company.nl", "vatId": "NL999999999B01" },
#         "lines": [
#           { "sku": "WID-001", "qty": 2, "unitCents": 999 },
#           { "sku": "GAD-002", "qty": 1, "unitCents": 1500 }
#         ],
#         "declared": { "netCents": 3498, "vatCents": 0, "grossCents": 3498 }
#       },
#       {
#         "orderId": "A400",
#         "shipTo": { "country": "BE" },
#         "customer": { "email": "ada@other.example", "vatId": null },
#         "lines": [
#           { "sku": "WID-001", "qty": 2, "unitCents": 999 },
#           { "sku": "GAD-002", "qty": 1, "unitCents": 1500 }
#         ],
#         "declared": { "netCents": 3498, "vatCents": 508, "grossCents": 4006 }
#       }
#     ]
#   }"""^^rdf:JSON "/orders") string:jsonPointer ("""{"orderId":"A100","shipTo":{"country":"BE"},"customer":{"email":"Ada@Example.ORG","vatId":null},"lines":[{"sku":"wid-001","qty":2,"unitCents":999},{"sku":"GAD-002","qty":1,"unitCents":1500}],"declared":{"netCents":3498,"vatCents":509,"grossCents":4007}}"""^^rdf:JSON """{"orderId":"A200","shipTo":{"country":"US"},"customer":{"email":"bob@example.org","vatId":null},"lines":[{"sku":"WID-001","qty":2,"unitCents":999},{"sku":"GAD-002","qty":1,"unitCents":1500}],"declared":{"netCents":3498,"vatCents":0,"grossCents":3498}}"""^^rdf:JSON """{"orderId":"A300","shipTo":{"country":"NL"},"customer":{"email":"acct@company.nl","vatId":"NL999999999B01"},"lines":[{"sku":"WID-001","qty":2,"unitCents":999},{"sku":"GAD-002","qty":1,"unitCents":1500}],"declared":{"netCents":3498,"vatCents":0,"grossCents":3498}}"""^^rdf:JSON """{"orderId":"A301","shipTo":{"country":"NL"},"customer":{"email":"billing@company.nl","vatId":"NL999999999B01"},"lines":[{"sku":"WID-001","qty":2,"unitCents":999},{"sku":"GAD-002","qty":1,"unitCents":1500}],"declared":{"netCents":3498,"vatCents":0,"grossCents":3498}}"""^^rdf:JSON """{"orderId":"A400","shipTo":{"country":"BE"},"customer":{"email":"ada@other.example","vatId":null},"lines":[{"sku":"WID-001","qty":2,"unitCents":999},{"sku":"GAD-002","qty":1,"unitCents":1500}],"declared":{"netCents":3498,"vatCents":508,"grossCents":4006}}"""^^rdf:JSON) .
#   ("""{"orderId":"A100","shipTo":{"country":"BE"},"customer":{"email":"Ada@Example.ORG","vatId":null},"lines":[{"sku":"wid-001","qty":2,"unitCents":999},{"sku":"GAD-002","qty":1,"unitCents":1500}],"declared":{"netCents":3498,"vatCents":509,"grossCents":4007}}"""^^rdf:JSON """{"orderId":"A200","shipTo":{"country":"US"},"customer":{"email":"bob@example.org","vatId":null},"lines":[{"sku":"WID-001","qty":2,"unitCents":999},{"sku":"GAD-002","qty":1,"unitCents":1500}],"declared":{"netCents":3498,"vatCents":0,"grossCents":3498}}"""^^rdf:JSON """{"orderId":"A300","shipTo":{"country":"NL"},"customer":{"email":"acct@company.nl","vatId":"NL999999999B01"},"lines":[{"sku":"WID-001","qty":2,"unitCents":999},{"sku":"GAD-002","qty":1,"unitCents":1500}],"declared":{"netCents":3498,"vatCents":0,"grossCents":3498}}"""^^rdf:JSON """{"orderId":"A301","shipTo":{"country":"NL"},"customer":{"email":"billing@company.nl","vatId":"NL999999999B01"},"lines":[{"sku":"WID-001","qty":2,"unitCents":999},{"sku":"GAD-002","qty":1,"unitCents":1500}],"declared":{"netCents":3498,"vatCents":0,"grossCents":3498}}"""^^rdf:JSON """{"orderId":"A400","shipTo":{"country":"BE"},"customer":{"email":"ada@other.example","vatId":null},"lines":[{"sku":"WID-001","qty":2,"unitCents":999},{"sku":"GAD-002","qty":1,"unitCents":1500}],"declared":{"netCents":3498,"vatCents":508,"grossCents":4006}}"""^^rdf:JSON) list:iterate (0 """{"orderId":"A100","shipTo":{"country":"BE"},"customer":{"email":"Ada@Example.ORG","vatId":null},"lines":[{"sku":"wid-001","qty":2,"unitCents":999},{"sku":"GAD-002","qty":1,"unitCents":1500}],"declared":{"netCents":3498,"vatCents":509,"grossCents":4007}}"""^^rdf:JSON) .
#   ("""{"orderId":"A100","shipTo":{"country":"BE"},"customer":{"email":"Ada@Example.ORG","vatId":null},"lines":[{"sku":"wid-001","qty":2,"unitCents":999},{"sku":"GAD-002","qty":1,"unitCents":1500}],"declared":{"netCents":3498,"vatCents":509,"grossCents":4007}}"""^^rdf:JSON "/orderId") string:jsonPointer "A100" .
#   ("urn:example:order:%s" "A100") string:format "urn:example:order:A100" .
#   <urn:example:order:A100> log:uri "urn:example:order:A100" .
#   ("""{"orderId":"A100","shipTo":{"country":"BE"},"customer":{"email":"Ada@Example.ORG","vatId":null},"lines":[{"sku":"wid-001","qty":2,"unitCents":999},{"sku":"GAD-002","qty":1,"unitCents":1500}],"declared":{"netCents":3498,"vatCents":509,"grossCents":4007}}"""^^rdf:JSON "/lines") string:jsonPointer ("""{"sku":"wid-001","qty":2,"unitCents":999}"""^^rdf:JSON """{"sku":"GAD-002","qty":1,"unitCents":1500}"""^^rdf:JSON) .
#   ("""{"sku":"wid-001","qty":2,"unitCents":999}"""^^rdf:JSON """{"sku":"GAD-002","qty":1,"unitCents":1500}"""^^rdf:JSON) list:iterate (1 """{"sku":"GAD-002","qty":1,"unitCents":1500}"""^^rdf:JSON) .
#   ("""{"sku":"GAD-002","qty":1,"unitCents":1500}"""^^rdf:JSON "/sku") string:jsonPointer "GAD-002" .
#   ("""{"sku":"GAD-002","qty":1,"unitCents":1500}"""^^rdf:JSON "/qty") string:jsonPointer 1 .
#   ("""{"sku":"GAD-002","qty":1,"unitCents":1500}"""^^rdf:JSON "/unitCents") string:jsonPointer 1500 .
#   ex:Gadget a ex:Product .
#   ex:Gadget ex:sku "GAD-002" .
#   (1 1500) math:product 1500 .
#   ("urn:example:order:%s#line:%s" "A100" 1) string:format "urn:example:order:A100#line:1" .
#   <urn:example:order:A100#line:1> log:uri "urn:example:order:A100#line:1" .
#   "GAD-002" string:equalIgnoringCase "GAD-002" .
# via the schematic forward rule:
#   {
#     ex:feed ex:json ?J .
#     (?J "/orders") string:jsonPointer ?Orders .
#     ?Orders list:iterate (?OrderIndex ?OrderJson) .
#     (?OrderJson "/orderId") string:jsonPointer ?OrderId .
#     ("urn:example:order:%s" ?OrderId) string:format ?OrderUriStr .
#     ?Order log:uri ?OrderUriStr .
#     (?OrderJson "/lines") string:jsonPointer ?Lines .
#     ?Lines list:iterate (?LineIndex ?LineJson) .
#     (?LineJson "/sku") string:jsonPointer ?SkuJson .
#     (?LineJson "/qty") string:jsonPointer ?Qty .
#     (?LineJson "/unitCents") string:jsonPointer ?UnitCents .
#     ?Product a ex:Product .
#     ?Product ex:sku ?SkuCat .
#     (?Qty ?UnitCents) math:product ?NetCents .
#     ("urn:example:order:%s#line:%s" ?OrderId ?LineIndex) string:format ?LineUriStr .
#     ?Line log:uri ?LineUriStr .
#     ?SkuJson string:equalIgnoringCase ?SkuCat .
#   } => {
#     ?Order ex:line ?Line .
#     ?Line a ex:OrderLine .
#     ?Line ex:lineIndex ?LineIndex .
#     ?Line ex:product ?Product .
#     ?Line ex:sku ?SkuCat .
#     ?Line ex:qty ?Qty .
#     ?Line ex:unitCents ?UnitCents .
#     ?Line ex:netCents ?NetCents .
#   } .
# with substitution (on rule variables):
#   ?J = """{
#     "meta~data": { "batch": "2025-12-18" },
#     "orders": [
#     {
#     "orderId": "A100",
#     "shipTo": { "country": "BE" },
#     "customer": { "email": "Ada@Example.ORG", "vatId": null },
#     "lines": [
#     { "sku": "wid-001", "qty": 2, "unitCents": 999 },
#     { "sku": "GAD-002", "qty": 1, "unitCents": 1500 }
#     ],
#     "declared": { "netCents": 3498, "vatCents": 509, "grossCents": 4007 }
#     },
#     {
#     "orderId": "A200",
#     "shipTo": { "country": "US" },
#     "customer": { "email": "bob@example.org", "vatId": null },
#     "lines": [
#     { "sku": "WID-001", "qty": 2, "unitCents": 999 },
#     { "sku": "GAD-002", "qty": 1, "unitCents": 1500 }
#     ],
#     "declared": { "netCents": 3498, "vatCents": 0, "grossCents": 3498 }
#     },
#     {
#     "orderId": "A300",
#     "shipTo": { "country": "NL" },
#     "customer": { "email": "acct@company.nl", "vatId": "NL999999999B01" },
#     "lines": [
#     { "sku": "WID-001", "qty": 2, "unitCents": 999 },
#     { "sku": "GAD-002", "qty": 1, "unitCents": 1500 }
#     ],
#     "declared": { "netCents": 3498, "vatCents": 0, "grossCents": 3498 }
#     },
#     {
#     "orderId": "A301",
#     "shipTo": { "country": "NL" },
#     "customer": { "email": "billing@company.nl", "vatId": "NL999999999B01" },
#     "lines": [
#     { "sku": "WID-001", "qty": 2, "unitCents": 999 },
#     { "sku": "GAD-002", "qty": 1, "unitCents": 1500 }
#     ],
#     "declared": { "netCents": 3498, "vatCents": 0, "grossCents": 3498 }
#     },
#     {
#     "orderId": "A400",
#     "shipTo": { "country": "BE" },
#     "customer": { "email": "ada@other.example", "vatId": null },
#     "lines": [
#     { "sku": "WID-001", "qty": 2, "unitCents": 999 },
#     { "sku": "GAD-002", "qty": 1, "unitCents": 1500 }
#     ],
#     "declared": { "netCents": 3498, "vatCents": 508, "grossCents": 4006 }
#     }
#     ]
#   }"""^^rdf:JSON
#   ?Line = <urn:example:order:A100#line:1>
#   ?LineIndex = 1
#   ?LineJson = """{"sku":"GAD-002","qty":1,"unitCents":1500}"""^^rdf:JSON
#   ?LineUriStr = "urn:example:order:A100#line:1"
#   ?Lines = ("""{"sku":"wid-001","qty":2,"unitCents":999}"""^^rdf:JSON """{"sku":"GAD-002","qty":1,"unitCents":1500}"""^^rdf:JSON)
#   ?NetCents = 1500
#   ?Order = <urn:example:order:A100>
#   ?OrderId = "A100"
#   ?OrderIndex = 0
#   ?OrderJson = """{"orderId":"A100","shipTo":{"country":"BE"},"customer":{"email":"Ada@Example.ORG","vatId":null},"lines":[{"sku":"wid-001","qty":2,"unitCents":999},{"sku":"GAD-002","qty":1,"unitCents":1500}],"declared":{"netCents":3498,"vatCents":509,"grossCents":4007}}"""^^rdf:JSON
#   ?OrderUriStr = "urn:example:order:A100"
#   ?Orders = ("""{"orderId":"A100","shipTo":{"country":"BE"},"customer":{"email":"Ada@Example.ORG","vatId":null},"lines":[{"sku":"wid-001","qty":2,"unitCents":999},{"sku":"GAD-002","qty":1,"unitCents":1500}],"declared":{"netCents":3498,"vatCents":509,"grossCents":4007}}"""^^rdf:JSON """{"orderId":"A200","shipTo":{"country":"US"},"customer":{"email":"bob@example.org","vatId":null},"lines":[{"sku":"WID-001","qty":2,"unitCents":999},{"sku":"GAD-002","qty":1,"unitCents":1500}],"declared":{"netCents":3498,"vatCents":0,"grossCents":3498}}"""^^rdf:JSON """{"orderId":"A300","shipTo":{"country":"NL"},"customer":{"email":"acct@company.nl","vatId":"NL999999999B01"},"lines":[{"sku":"WID-001","qty":2,"unitCents":999},{"sku":"GAD-002","qty":1,"unitCents":1500}],"declared":{"netCents":3498,"vatCents":0,"grossCents":3498}}"""^^rdf:JSON """{"orderId":"A301","shipTo":{"country":"NL"},"customer":{"email":"billing@company.nl","vatId":"NL999999999B01"},"lines":[{"sku":"WID-001","qty":2,"unitCents":999},{"sku":"GAD-002","qty":1,"unitCents":1500}],"declared":{"netCents":3498,"vatCents":0,"grossCents":3498}}"""^^rdf:JSON """{"orderId":"A400","shipTo":{"country":"BE"},"customer":{"email":"ada@other.example","vatId":null},"lines":[{"sku":"WID-001","qty":2,"unitCents":999},{"sku":"GAD-002","qty":1,"unitCents":1500}],"declared":{"netCents":3498,"vatCents":508,"grossCents":4006}}"""^^rdf:JSON)
#   ?Product = ex:Gadget
#   ?Qty = 1
#   ?SkuCat = "GAD-002"
#   ?SkuJson = "GAD-002"
#   ?UnitCents = 1500
# Therefore the derived triple above is entailed by the rules and facts.
# ----------------------------------------------------------------------

<urn:example:order:A100#line:1> a ex:OrderLine .

# ----------------------------------------------------------------------
# Proof for derived triple:
#   <urn:example:order:A100#line:1> ex:lineIndex 1 .
# It holds because the following instance of the rule body is provable:
#   ex:feed ex:json """{
#     "meta~data": { "batch": "2025-12-18" },
#     "orders": [
#       {
#         "orderId": "A100",
#         "shipTo": { "country": "BE" },
#         "customer": { "email": "Ada@Example.ORG", "vatId": null },
#         "lines": [
#           { "sku": "wid-001", "qty": 2, "unitCents": 999 },
#           { "sku": "GAD-002", "qty": 1, "unitCents": 1500 }
#         ],
#         "declared": { "netCents": 3498, "vatCents": 509, "grossCents": 4007 }
#       },
#       {
#         "orderId": "A200",
#         "shipTo": { "country": "US" },
#         "customer": { "email": "bob@example.org", "vatId": null },
#         "lines": [
#           { "sku": "WID-001", "qty": 2, "unitCents": 999 },
#           { "sku": "GAD-002", "qty": 1, "unitCents": 1500 }
#         ],
#         "declared": { "netCents": 3498, "vatCents": 0, "grossCents": 3498 }
#       },
#       {
#         "orderId": "A300",
#         "shipTo": { "country": "NL" },
#         "customer": { "email": "acct@company.nl", "vatId": "NL999999999B01" },
#         "lines": [
#           { "sku": "WID-001", "qty": 2, "unitCents": 999 },
#           { "sku": "GAD-002", "qty": 1, "unitCents": 1500 }
#         ],
#         "declared": { "netCents": 3498, "vatCents": 0, "grossCents": 3498 }
#       },
#       {
#         "orderId": "A301",
#         "shipTo": { "country": "NL" },
#         "customer": { "email": "billing@company.nl", "vatId": "NL999999999B01" },
#         "lines": [
#           { "sku": "WID-001", "qty": 2, "unitCents": 999 },
#           { "sku": "GAD-002", "qty": 1, "unitCents": 1500 }
#         ],
#         "declared": { "netCents": 3498, "vatCents": 0, "grossCents": 3498 }
#       },
#       {
#         "orderId": "A400",
#         "shipTo": { "country": "BE" },
#         "customer": { "email": "ada@other.example", "vatId": null },
#         "lines": [
#           { "sku": "WID-001", "qty": 2, "unitCents": 999 },
#           { "sku": "GAD-002", "qty": 1, "unitCents": 1500 }
#         ],
#         "declared": { "netCents": 3498, "vatCents": 508, "grossCents": 4006 }
#       }
#     ]
#   }"""^^rdf:JSON .
#   ("""{
#     "meta~data": { "batch": "2025-12-18" },
#     "orders": [
#       {
#         "orderId": "A100",
#         "shipTo": { "country": "BE" },
#         "customer": { "email": "Ada@Example.ORG", "vatId": null },
#         "lines": [
#           { "sku": "wid-001", "qty": 2, "unitCents": 999 },
#           { "sku": "GAD-002", "qty": 1, "unitCents": 1500 }
#         ],
#         "declared": { "netCents": 3498, "vatCents": 509, "grossCents": 4007 }
#       },
#       {
#         "orderId": "A200",
#         "shipTo": { "country": "US" },
#         "customer": { "email": "bob@example.org", "vatId": null },
#         "lines": [
#           { "sku": "WID-001", "qty": 2, "unitCents": 999 },
#           { "sku": "GAD-002", "qty": 1, "unitCents": 1500 }
#         ],
#         "declared": { "netCents": 3498, "vatCents": 0, "grossCents": 3498 }
#       },
#       {
#         "orderId": "A300",
#         "shipTo": { "country": "NL" },
#         "customer": { "email": "acct@company.nl", "vatId": "NL999999999B01" },
#         "lines": [
#           { "sku": "WID-001", "qty": 2, "unitCents": 999 },
#           { "sku": "GAD-002", "qty": 1, "unitCents": 1500 }
#         ],
#         "declared": { "netCents": 3498, "vatCents": 0, "grossCents": 3498 }
#       },
#       {
#         "orderId": "A301",
#         "shipTo": { "country": "NL" },
#         "customer": { "email": "billing@company.nl", "vatId": "NL999999999B01" },
#         "lines": [
#           { "sku": "WID-001", "qty": 2, "unitCents": 999 },
#           { "sku": "GAD-002", "qty": 1, "unitCents": 1500 }
#         ],
#         "declared": { "netCents": 3498, "vatCents": 0, "grossCents": 3498 }
#       },
#       {
#         "orderId": "A400",
#         "shipTo": { "country": "BE" },
#         "customer": { "email": "ada@other.example", "vatId": null },
#         "lines": [
#           { "sku": "WID-001", "qty": 2, "unitCents": 999 },
#           { "sku": "GAD-002", "qty": 1, "unitCents": 1500 }
#         ],
#         "declared": { "netCents": 3498, "vatCents": 508, "grossCents": 4006 }
#       }
#     ]
#   }"""^^rdf:JSON "/orders") string:jsonPointer ("""{"orderId":"A100","shipTo":{"country":"BE"},"customer":{"email":"Ada@Example.ORG","vatId":null},"lines":[{"sku":"wid-001","qty":2,"unitCents":999},{"sku":"GAD-002","qty":1,"unitCents":1500}],"declared":{"netCents":3498,"vatCents":509,"grossCents":4007}}"""^^rdf:JSON """{"orderId":"A200","shipTo":{"country":"US"},"customer":{"email":"bob@example.org","vatId":null},"lines":[{"sku":"WID-001","qty":2,"unitCents":999},{"sku":"GAD-002","qty":1,"unitCents":1500}],"declared":{"netCents":3498,"vatCents":0,"grossCents":3498}}"""^^rdf:JSON """{"orderId":"A300","shipTo":{"country":"NL"},"customer":{"email":"acct@company.nl","vatId":"NL999999999B01"},"lines":[{"sku":"WID-001","qty":2,"unitCents":999},{"sku":"GAD-002","qty":1,"unitCents":1500}],"declared":{"netCents":3498,"vatCents":0,"grossCents":3498}}"""^^rdf:JSON """{"orderId":"A301","shipTo":{"country":"NL"},"customer":{"email":"billing@company.nl","vatId":"NL999999999B01"},"lines":[{"sku":"WID-001","qty":2,"unitCents":999},{"sku":"GAD-002","qty":1,"unitCents":1500}],"declared":{"netCents":3498,"vatCents":0,"grossCents":3498}}"""^^rdf:JSON """{"orderId":"A400","shipTo":{"country":"BE"},"customer":{"email":"ada@other.example","vatId":null},"lines":[{"sku":"WID-001","qty":2,"unitCents":999},{"sku":"GAD-002","qty":1,"unitCents":1500}],"declared":{"netCents":3498,"vatCents":508,"grossCents":4006}}"""^^rdf:JSON) .
#   ("""{"orderId":"A100","shipTo":{"country":"BE"},"customer":{"email":"Ada@Example.ORG","vatId":null},"lines":[{"sku":"wid-001","qty":2,"unitCents":999},{"sku":"GAD-002","qty":1,"unitCents":1500}],"declared":{"netCents":3498,"vatCents":509,"grossCents":4007}}"""^^rdf:JSON """{"orderId":"A200","shipTo":{"country":"US"},"customer":{"email":"bob@example.org","vatId":null},"lines":[{"sku":"WID-001","qty":2,"unitCents":999},{"sku":"GAD-002","qty":1,"unitCents":1500}],"declared":{"netCents":3498,"vatCents":0,"grossCents":3498}}"""^^rdf:JSON """{"orderId":"A300","shipTo":{"country":"NL"},"customer":{"email":"acct@company.nl","vatId":"NL999999999B01"},"lines":[{"sku":"WID-001","qty":2,"unitCents":999},{"sku":"GAD-002","qty":1,"unitCents":1500}],"declared":{"netCents":3498,"vatCents":0,"grossCents":3498}}"""^^rdf:JSON """{"orderId":"A301","shipTo":{"country":"NL"},"customer":{"email":"billing@company.nl","vatId":"NL999999999B01"},"lines":[{"sku":"WID-001","qty":2,"unitCents":999},{"sku":"GAD-002","qty":1,"unitCents":1500}],"declared":{"netCents":3498,"vatCents":0,"grossCents":3498}}"""^^rdf:JSON """{"orderId":"A400","shipTo":{"country":"BE"},"customer":{"email":"ada@other.example","vatId":null},"lines":[{"sku":"WID-001","qty":2,"unitCents":999},{"sku":"GAD-002","qty":1,"unitCents":1500}],"declared":{"netCents":3498,"vatCents":508,"grossCents":4006}}"""^^rdf:JSON) list:iterate (0 """{"orderId":"A100","shipTo":{"country":"BE"},"customer":{"email":"Ada@Example.ORG","vatId":null},"lines":[{"sku":"wid-001","qty":2,"unitCents":999},{"sku":"GAD-002","qty":1,"unitCents":1500}],"declared":{"netCents":3498,"vatCents":509,"grossCents":4007}}"""^^rdf:JSON) .
#   ("""{"orderId":"A100","shipTo":{"country":"BE"},"customer":{"email":"Ada@Example.ORG","vatId":null},"lines":[{"sku":"wid-001","qty":2,"unitCents":999},{"sku":"GAD-002","qty":1,"unitCents":1500}],"declared":{"netCents":3498,"vatCents":509,"grossCents":4007}}"""^^rdf:JSON "/orderId") string:jsonPointer "A100" .
#   ("urn:example:order:%s" "A100") string:format "urn:example:order:A100" .
#   <urn:example:order:A100> log:uri "urn:example:order:A100" .
#   ("""{"orderId":"A100","shipTo":{"country":"BE"},"customer":{"email":"Ada@Example.ORG","vatId":null},"lines":[{"sku":"wid-001","qty":2,"unitCents":999},{"sku":"GAD-002","qty":1,"unitCents":1500}],"declared":{"netCents":3498,"vatCents":509,"grossCents":4007}}"""^^rdf:JSON "/lines") string:jsonPointer ("""{"sku":"wid-001","qty":2,"unitCents":999}"""^^rdf:JSON """{"sku":"GAD-002","qty":1,"unitCents":1500}"""^^rdf:JSON) .
#   ("""{"sku":"wid-001","qty":2,"unitCents":999}"""^^rdf:JSON """{"sku":"GAD-002","qty":1,"unitCents":1500}"""^^rdf:JSON) list:iterate (1 """{"sku":"GAD-002","qty":1,"unitCents":1500}"""^^rdf:JSON) .
#   ("""{"sku":"GAD-002","qty":1,"unitCents":1500}"""^^rdf:JSON "/sku") string:jsonPointer "GAD-002" .
#   ("""{"sku":"GAD-002","qty":1,"unitCents":1500}"""^^rdf:JSON "/qty") string:jsonPointer 1 .
#   ("""{"sku":"GAD-002","qty":1,"unitCents":1500}"""^^rdf:JSON "/unitCents") string:jsonPointer 1500 .
#   ex:Gadget a ex:Product .
#   ex:Gadget ex:sku "GAD-002" .
#   (1 1500) math:product 1500 .
#   ("urn:example:order:%s#line:%s" "A100" 1) string:format "urn:example:order:A100#line:1" .
#   <urn:example:order:A100#line:1> log:uri "urn:example:order:A100#line:1" .
#   "GAD-002" string:equalIgnoringCase "GAD-002" .
# via the schematic forward rule:
#   {
#     ex:feed ex:json ?J .
#     (?J "/orders") string:jsonPointer ?Orders .
#     ?Orders list:iterate (?OrderIndex ?OrderJson) .
#     (?OrderJson "/orderId") string:jsonPointer ?OrderId .
#     ("urn:example:order:%s" ?OrderId) string:format ?OrderUriStr .
#     ?Order log:uri ?OrderUriStr .
#     (?OrderJson "/lines") string:jsonPointer ?Lines .
#     ?Lines list:iterate (?LineIndex ?LineJson) .
#     (?LineJson "/sku") string:jsonPointer ?SkuJson .
#     (?LineJson "/qty") string:jsonPointer ?Qty .
#     (?LineJson "/unitCents") string:jsonPointer ?UnitCents .
#     ?Product a ex:Product .
#     ?Product ex:sku ?SkuCat .
#     (?Qty ?UnitCents) math:product ?NetCents .
#     ("urn:example:order:%s#line:%s" ?OrderId ?LineIndex) string:format ?LineUriStr .
#     ?Line log:uri ?LineUriStr .
#     ?SkuJson string:equalIgnoringCase ?SkuCat .
#   } => {
#     ?Order ex:line ?Line .
#     ?Line a ex:OrderLine .
#     ?Line ex:lineIndex ?LineIndex .
#     ?Line ex:product ?Product .
#     ?Line ex:sku ?SkuCat .
#     ?Line ex:qty ?Qty .
#     ?Line ex:unitCents ?UnitCents .
#     ?Line ex:netCents ?NetCents .
#   } .
# with substitution (on rule variables):
#   ?J = """{
#     "meta~data": { "batch": "2025-12-18" },
#     "orders": [
#     {
#     "orderId": "A100",
#     "shipTo": { "country": "BE" },
#     "customer": { "email": "Ada@Example.ORG", "vatId": null },
#     "lines": [
#     { "sku": "wid-001", "qty": 2, "unitCents": 999 },
#     { "sku": "GAD-002", "qty": 1, "unitCents": 1500 }
#     ],
#     "declared": { "netCents": 3498, "vatCents": 509, "grossCents": 4007 }
#     },
#     {
#     "orderId": "A200",
#     "shipTo": { "country": "US" },
#     "customer": { "email": "bob@example.org", "vatId": null },
#     "lines": [
#     { "sku": "WID-001", "qty": 2, "unitCents": 999 },
#     { "sku": "GAD-002", "qty": 1, "unitCents": 1500 }
#     ],
#     "declared": { "netCents": 3498, "vatCents": 0, "grossCents": 3498 }
#     },
#     {
#     "orderId": "A300",
#     "shipTo": { "country": "NL" },
#     "customer": { "email": "acct@company.nl", "vatId": "NL999999999B01" },
#     "lines": [
#     { "sku": "WID-001", "qty": 2, "unitCents": 999 },
#     { "sku": "GAD-002", "qty": 1, "unitCents": 1500 }
#     ],
#     "declared": { "netCents": 3498, "vatCents": 0, "grossCents": 3498 }
#     },
#     {
#     "orderId": "A301",
#     "shipTo": { "country": "NL" },
#     "customer": { "email": "billing@company.nl", "vatId": "NL999999999B01" },
#     "lines": [
#     { "sku": "WID-001", "qty": 2, "unitCents": 999 },
#     { "sku": "GAD-002", "qty": 1, "unitCents": 1500 }
#     ],
#     "declared": { "netCents": 3498, "vatCents": 0, "grossCents": 3498 }
#     },
#     {
#     "orderId": "A400",
#     "shipTo": { "country": "BE" },
#     "customer": { "email": "ada@other.example", "vatId": null },
#     "lines": [
#     { "sku": "WID-001", "qty": 2, "unitCents": 999 },
#     { "sku": "GAD-002", "qty": 1, "unitCents": 1500 }
#     ],
#     "declared": { "netCents": 3498, "vatCents": 508, "grossCents": 4006 }
#     }
#     ]
#   }"""^^rdf:JSON
#   ?Line = <urn:example:order:A100#line:1>
#   ?LineIndex = 1
#   ?LineJson = """{"sku":"GAD-002","qty":1,"unitCents":1500}"""^^rdf:JSON
#   ?LineUriStr = "urn:example:order:A100#line:1"
#   ?Lines = ("""{"sku":"wid-001","qty":2,"unitCents":999}"""^^rdf:JSON """{"sku":"GAD-002","qty":1,"unitCents":1500}"""^^rdf:JSON)
#   ?NetCents = 1500
#   ?Order = <urn:example:order:A100>
#   ?OrderId = "A100"
#   ?OrderIndex = 0
#   ?OrderJson = """{"orderId":"A100","shipTo":{"country":"BE"},"customer":{"email":"Ada@Example.ORG","vatId":null},"lines":[{"sku":"wid-001","qty":2,"unitCents":999},{"sku":"GAD-002","qty":1,"unitCents":1500}],"declared":{"netCents":3498,"vatCents":509,"grossCents":4007}}"""^^rdf:JSON
#   ?OrderUriStr = "urn:example:order:A100"
#   ?Orders = ("""{"orderId":"A100","shipTo":{"country":"BE"},"customer":{"email":"Ada@Example.ORG","vatId":null},"lines":[{"sku":"wid-001","qty":2,"unitCents":999},{"sku":"GAD-002","qty":1,"unitCents":1500}],"declared":{"netCents":3498,"vatCents":509,"grossCents":4007}}"""^^rdf:JSON """{"orderId":"A200","shipTo":{"country":"US"},"customer":{"email":"bob@example.org","vatId":null},"lines":[{"sku":"WID-001","qty":2,"unitCents":999},{"sku":"GAD-002","qty":1,"unitCents":1500}],"declared":{"netCents":3498,"vatCents":0,"grossCents":3498}}"""^^rdf:JSON """{"orderId":"A300","shipTo":{"country":"NL"},"customer":{"email":"acct@company.nl","vatId":"NL999999999B01"},"lines":[{"sku":"WID-001","qty":2,"unitCents":999},{"sku":"GAD-002","qty":1,"unitCents":1500}],"declared":{"netCents":3498,"vatCents":0,"grossCents":3498}}"""^^rdf:JSON """{"orderId":"A301","shipTo":{"country":"NL"},"customer":{"email":"billing@company.nl","vatId":"NL999999999B01"},"lines":[{"sku":"WID-001","qty":2,"unitCents":999},{"sku":"GAD-002","qty":1,"unitCents":1500}],"declared":{"netCents":3498,"vatCents":0,"grossCents":3498}}"""^^rdf:JSON """{"orderId":"A400","shipTo":{"country":"BE"},"customer":{"email":"ada@other.example","vatId":null},"lines":[{"sku":"WID-001","qty":2,"unitCents":999},{"sku":"GAD-002","qty":1,"unitCents":1500}],"declared":{"netCents":3498,"vatCents":508,"grossCents":4006}}"""^^rdf:JSON)
#   ?Product = ex:Gadget
#   ?Qty = 1
#   ?SkuCat = "GAD-002"
#   ?SkuJson = "GAD-002"
#   ?UnitCents = 1500
# Therefore the derived triple above is entailed by the rules and facts.
# ----------------------------------------------------------------------

<urn:example:order:A100#line:1> ex:lineIndex 1 .

# ----------------------------------------------------------------------
# Proof for derived triple:
#   <urn:example:order:A100#line:1> ex:product ex:Gadget .
# It holds because the following instance of the rule body is provable:
#   ex:feed ex:json """{
#     "meta~data": { "batch": "2025-12-18" },
#     "orders": [
#       {
#         "orderId": "A100",
#         "shipTo": { "country": "BE" },
#         "customer": { "email": "Ada@Example.ORG", "vatId": null },
#         "lines": [
#           { "sku": "wid-001", "qty": 2, "unitCents": 999 },
#           { "sku": "GAD-002", "qty": 1, "unitCents": 1500 }
#         ],
#         "declared": { "netCents": 3498, "vatCents": 509, "grossCents": 4007 }
#       },
#       {
#         "orderId": "A200",
#         "shipTo": { "country": "US" },
#         "customer": { "email": "bob@example.org", "vatId": null },
#         "lines": [
#           { "sku": "WID-001", "qty": 2, "unitCents": 999 },
#           { "sku": "GAD-002", "qty": 1, "unitCents": 1500 }
#         ],
#         "declared": { "netCents": 3498, "vatCents": 0, "grossCents": 3498 }
#       },
#       {
#         "orderId": "A300",
#         "shipTo": { "country": "NL" },
#         "customer": { "email": "acct@company.nl", "vatId": "NL999999999B01" },
#         "lines": [
#           { "sku": "WID-001", "qty": 2, "unitCents": 999 },
#           { "sku": "GAD-002", "qty": 1, "unitCents": 1500 }
#         ],
#         "declared": { "netCents": 3498, "vatCents": 0, "grossCents": 3498 }
#       },
#       {
#         "orderId": "A301",
#         "shipTo": { "country": "NL" },
#         "customer": { "email": "billing@company.nl", "vatId": "NL999999999B01" },
#         "lines": [
#           { "sku": "WID-001", "qty": 2, "unitCents": 999 },
#           { "sku": "GAD-002", "qty": 1, "unitCents": 1500 }
#         ],
#         "declared": { "netCents": 3498, "vatCents": 0, "grossCents": 3498 }
#       },
#       {
#         "orderId": "A400",
#         "shipTo": { "country": "BE" },
#         "customer": { "email": "ada@other.example", "vatId": null },
#         "lines": [
#           { "sku": "WID-001", "qty": 2, "unitCents": 999 },
#           { "sku": "GAD-002", "qty": 1, "unitCents": 1500 }
#         ],
#         "declared": { "netCents": 3498, "vatCents": 508, "grossCents": 4006 }
#       }
#     ]
#   }"""^^rdf:JSON .
#   ("""{
#     "meta~data": { "batch": "2025-12-18" },
#     "orders": [
#       {
#         "orderId": "A100",
#         "shipTo": { "country": "BE" },
#         "customer": { "email": "Ada@Example.ORG", "vatId": null },
#         "lines": [
#           { "sku": "wid-001", "qty": 2, "unitCents": 999 },
#           { "sku": "GAD-002", "qty": 1, "unitCents": 1500 }
#         ],
#         "declared": { "netCents": 3498, "vatCents": 509, "grossCents": 4007 }
#       },
#       {
#         "orderId": "A200",
#         "shipTo": { "country": "US" },
#         "customer": { "email": "bob@example.org", "vatId": null },
#         "lines": [
#           { "sku": "WID-001", "qty": 2, "unitCents": 999 },
#           { "sku": "GAD-002", "qty": 1, "unitCents": 1500 }
#         ],
#         "declared": { "netCents": 3498, "vatCents": 0, "grossCents": 3498 }
#       },
#       {
#         "orderId": "A300",
#         "shipTo": { "country": "NL" },
#         "customer": { "email": "acct@company.nl", "vatId": "NL999999999B01" },
#         "lines": [
#           { "sku": "WID-001", "qty": 2, "unitCents": 999 },
#           { "sku": "GAD-002", "qty": 1, "unitCents": 1500 }
#         ],
#         "declared": { "netCents": 3498, "vatCents": 0, "grossCents": 3498 }
#       },
#       {
#         "orderId": "A301",
#         "shipTo": { "country": "NL" },
#         "customer": { "email": "billing@company.nl", "vatId": "NL999999999B01" },
#         "lines": [
#           { "sku": "WID-001", "qty": 2, "unitCents": 999 },
#           { "sku": "GAD-002", "qty": 1, "unitCents": 1500 }
#         ],
#         "declared": { "netCents": 3498, "vatCents": 0, "grossCents": 3498 }
#       },
#       {
#         "orderId": "A400",
#         "shipTo": { "country": "BE" },
#         "customer": { "email": "ada@other.example", "vatId": null },
#         "lines": [
#           { "sku": "WID-001", "qty": 2, "unitCents": 999 },
#           { "sku": "GAD-002", "qty": 1, "unitCents": 1500 }
#         ],
#         "declared": { "netCents": 3498, "vatCents": 508, "grossCents": 4006 }
#       }
#     ]
#   }"""^^rdf:JSON "/orders") string:jsonPointer ("""{"orderId":"A100","shipTo":{"country":"BE"},"customer":{"email":"Ada@Example.ORG","vatId":null},"lines":[{"sku":"wid-001","qty":2,"unitCents":999},{"sku":"GAD-002","qty":1,"unitCents":1500}],"declared":{"netCents":3498,"vatCents":509,"grossCents":4007}}"""^^rdf:JSON """{"orderId":"A200","shipTo":{"country":"US"},"customer":{"email":"bob@example.org","vatId":null},"lines":[{"sku":"WID-001","qty":2,"unitCents":999},{"sku":"GAD-002","qty":1,"unitCents":1500}],"declared":{"netCents":3498,"vatCents":0,"grossCents":3498}}"""^^rdf:JSON """{"orderId":"A300","shipTo":{"country":"NL"},"customer":{"email":"acct@company.nl","vatId":"NL999999999B01"},"lines":[{"sku":"WID-001","qty":2,"unitCents":999},{"sku":"GAD-002","qty":1,"unitCents":1500}],"declared":{"netCents":3498,"vatCents":0,"grossCents":3498}}"""^^rdf:JSON """{"orderId":"A301","shipTo":{"country":"NL"},"customer":{"email":"billing@company.nl","vatId":"NL999999999B01"},"lines":[{"sku":"WID-001","qty":2,"unitCents":999},{"sku":"GAD-002","qty":1,"unitCents":1500}],"declared":{"netCents":3498,"vatCents":0,"grossCents":3498}}"""^^rdf:JSON """{"orderId":"A400","shipTo":{"country":"BE"},"customer":{"email":"ada@other.example","vatId":null},"lines":[{"sku":"WID-001","qty":2,"unitCents":999},{"sku":"GAD-002","qty":1,"unitCents":1500}],"declared":{"netCents":3498,"vatCents":508,"grossCents":4006}}"""^^rdf:JSON) .
#   ("""{"orderId":"A100","shipTo":{"country":"BE"},"customer":{"email":"Ada@Example.ORG","vatId":null},"lines":[{"sku":"wid-001","qty":2,"unitCents":999},{"sku":"GAD-002","qty":1,"unitCents":1500}],"declared":{"netCents":3498,"vatCents":509,"grossCents":4007}}"""^^rdf:JSON """{"orderId":"A200","shipTo":{"country":"US"},"customer":{"email":"bob@example.org","vatId":null},"lines":[{"sku":"WID-001","qty":2,"unitCents":999},{"sku":"GAD-002","qty":1,"unitCents":1500}],"declared":{"netCents":3498,"vatCents":0,"grossCents":3498}}"""^^rdf:JSON """{"orderId":"A300","shipTo":{"country":"NL"},"customer":{"email":"acct@company.nl","vatId":"NL999999999B01"},"lines":[{"sku":"WID-001","qty":2,"unitCents":999},{"sku":"GAD-002","qty":1,"unitCents":1500}],"declared":{"netCents":3498,"vatCents":0,"grossCents":3498}}"""^^rdf:JSON """{"orderId":"A301","shipTo":{"country":"NL"},"customer":{"email":"billing@company.nl","vatId":"NL999999999B01"},"lines":[{"sku":"WID-001","qty":2,"unitCents":999},{"sku":"GAD-002","qty":1,"unitCents":1500}],"declared":{"netCents":3498,"vatCents":0,"grossCents":3498}}"""^^rdf:JSON """{"orderId":"A400","shipTo":{"country":"BE"},"customer":{"email":"ada@other.example","vatId":null},"lines":[{"sku":"WID-001","qty":2,"unitCents":999},{"sku":"GAD-002","qty":1,"unitCents":1500}],"declared":{"netCents":3498,"vatCents":508,"grossCents":4006}}"""^^rdf:JSON) list:iterate (0 """{"orderId":"A100","shipTo":{"country":"BE"},"customer":{"email":"Ada@Example.ORG","vatId":null},"lines":[{"sku":"wid-001","qty":2,"unitCents":999},{"sku":"GAD-002","qty":1,"unitCents":1500}],"declared":{"netCents":3498,"vatCents":509,"grossCents":4007}}"""^^rdf:JSON) .
#   ("""{"orderId":"A100","shipTo":{"country":"BE"},"customer":{"email":"Ada@Example.ORG","vatId":null},"lines":[{"sku":"wid-001","qty":2,"unitCents":999},{"sku":"GAD-002","qty":1,"unitCents":1500}],"declared":{"netCents":3498,"vatCents":509,"grossCents":4007}}"""^^rdf:JSON "/orderId") string:jsonPointer "A100" .
#   ("urn:example:order:%s" "A100") string:format "urn:example:order:A100" .
#   <urn:example:order:A100> log:uri "urn:example:order:A100" .
#   ("""{"orderId":"A100","shipTo":{"country":"BE"},"customer":{"email":"Ada@Example.ORG","vatId":null},"lines":[{"sku":"wid-001","qty":2,"unitCents":999},{"sku":"GAD-002","qty":1,"unitCents":1500}],"declared":{"netCents":3498,"vatCents":509,"grossCents":4007}}"""^^rdf:JSON "/lines") string:jsonPointer ("""{"sku":"wid-001","qty":2,"unitCents":999}"""^^rdf:JSON """{"sku":"GAD-002","qty":1,"unitCents":1500}"""^^rdf:JSON) .
#   ("""{"sku":"wid-001","qty":2,"unitCents":999}"""^^rdf:JSON """{"sku":"GAD-002","qty":1,"unitCents":1500}"""^^rdf:JSON) list:iterate (1 """{"sku":"GAD-002","qty":1,"unitCents":1500}"""^^rdf:JSON) .
#   ("""{"sku":"GAD-002","qty":1,"unitCents":1500}"""^^rdf:JSON "/sku") string:jsonPointer "GAD-002" .
#   ("""{"sku":"GAD-002","qty":1,"unitCents":1500}"""^^rdf:JSON "/qty") string:jsonPointer 1 .
#   ("""{"sku":"GAD-002","qty":1,"unitCents":1500}"""^^rdf:JSON "/unitCents") string:jsonPointer 1500 .
#   ex:Gadget a ex:Product .
#   ex:Gadget ex:sku "GAD-002" .
#   (1 1500) math:product 1500 .
#   ("urn:example:order:%s#line:%s" "A100" 1) string:format "urn:example:order:A100#line:1" .
#   <urn:example:order:A100#line:1> log:uri "urn:example:order:A100#line:1" .
#   "GAD-002" string:equalIgnoringCase "GAD-002" .
# via the schematic forward rule:
#   {
#     ex:feed ex:json ?J .
#     (?J "/orders") string:jsonPointer ?Orders .
#     ?Orders list:iterate (?OrderIndex ?OrderJson) .
#     (?OrderJson "/orderId") string:jsonPointer ?OrderId .
#     ("urn:example:order:%s" ?OrderId) string:format ?OrderUriStr .
#     ?Order log:uri ?OrderUriStr .
#     (?OrderJson "/lines") string:jsonPointer ?Lines .
#     ?Lines list:iterate (?LineIndex ?LineJson) .
#     (?LineJson "/sku") string:jsonPointer ?SkuJson .
#     (?LineJson "/qty") string:jsonPointer ?Qty .
#     (?LineJson "/unitCents") string:jsonPointer ?UnitCents .
#     ?Product a ex:Product .
#     ?Product ex:sku ?SkuCat .
#     (?Qty ?UnitCents) math:product ?NetCents .
#     ("urn:example:order:%s#line:%s" ?OrderId ?LineIndex) string:format ?LineUriStr .
#     ?Line log:uri ?LineUriStr .
#     ?SkuJson string:equalIgnoringCase ?SkuCat .
#   } => {
#     ?Order ex:line ?Line .
#     ?Line a ex:OrderLine .
#     ?Line ex:lineIndex ?LineIndex .
#     ?Line ex:product ?Product .
#     ?Line ex:sku ?SkuCat .
#     ?Line ex:qty ?Qty .
#     ?Line ex:unitCents ?UnitCents .
#     ?Line ex:netCents ?NetCents .
#   } .
# with substitution (on rule variables):
#   ?J = """{
#     "meta~data": { "batch": "2025-12-18" },
#     "orders": [
#     {
#     "orderId": "A100",
#     "shipTo": { "country": "BE" },
#     "customer": { "email": "Ada@Example.ORG", "vatId": null },
#     "lines": [
#     { "sku": "wid-001", "qty": 2, "unitCents": 999 },
#     { "sku": "GAD-002", "qty": 1, "unitCents": 1500 }
#     ],
#     "declared": { "netCents": 3498, "vatCents": 509, "grossCents": 4007 }
#     },
#     {
#     "orderId": "A200",
#     "shipTo": { "country": "US" },
#     "customer": { "email": "bob@example.org", "vatId": null },
#     "lines": [
#     { "sku": "WID-001", "qty": 2, "unitCents": 999 },
#     { "sku": "GAD-002", "qty": 1, "unitCents": 1500 }
#     ],
#     "declared": { "netCents": 3498, "vatCents": 0, "grossCents": 3498 }
#     },
#     {
#     "orderId": "A300",
#     "shipTo": { "country": "NL" },
#     "customer": { "email": "acct@company.nl", "vatId": "NL999999999B01" },
#     "lines": [
#     { "sku": "WID-001", "qty": 2, "unitCents": 999 },
#     { "sku": "GAD-002", "qty": 1, "unitCents": 1500 }
#     ],
#     "declared": { "netCents": 3498, "vatCents": 0, "grossCents": 3498 }
#     },
#     {
#     "orderId": "A301",
#     "shipTo": { "country": "NL" },
#     "customer": { "email": "billing@company.nl", "vatId": "NL999999999B01" },
#     "lines": [
#     { "sku": "WID-001", "qty": 2, "unitCents": 999 },
#     { "sku": "GAD-002", "qty": 1, "unitCents": 1500 }
#     ],
#     "declared": { "netCents": 3498, "vatCents": 0, "grossCents": 3498 }
#     },
#     {
#     "orderId": "A400",
#     "shipTo": { "country": "BE" },
#     "customer": { "email": "ada@other.example", "vatId": null },
#     "lines": [
#     { "sku": "WID-001", "qty": 2, "unitCents": 999 },
#     { "sku": "GAD-002", "qty": 1, "unitCents": 1500 }
#     ],
#     "declared": { "netCents": 3498, "vatCents": 508, "grossCents": 4006 }
#     }
#     ]
#   }"""^^rdf:JSON
#   ?Line = <urn:example:order:A100#line:1>
#   ?LineIndex = 1
#   ?LineJson = """{"sku":"GAD-002","qty":1,"unitCents":1500}"""^^rdf:JSON
#   ?LineUriStr = "urn:example:order:A100#line:1"
#   ?Lines = ("""{"sku":"wid-001","qty":2,"unitCents":999}"""^^rdf:JSON """{"sku":"GAD-002","qty":1,"unitCents":1500}"""^^rdf:JSON)
#   ?NetCents = 1500
#   ?Order = <urn:example:order:A100>
#   ?OrderId = "A100"
#   ?OrderIndex = 0
#   ?OrderJson = """{"orderId":"A100","shipTo":{"country":"BE"},"customer":{"email":"Ada@Example.ORG","vatId":null},"lines":[{"sku":"wid-001","qty":2,"unitCents":999},{"sku":"GAD-002","qty":1,"unitCents":1500}],"declared":{"netCents":3498,"vatCents":509,"grossCents":4007}}"""^^rdf:JSON
#   ?OrderUriStr = "urn:example:order:A100"
#   ?Orders = ("""{"orderId":"A100","shipTo":{"country":"BE"},"customer":{"email":"Ada@Example.ORG","vatId":null},"lines":[{"sku":"wid-001","qty":2,"unitCents":999},{"sku":"GAD-002","qty":1,"unitCents":1500}],"declared":{"netCents":3498,"vatCents":509,"grossCents":4007}}"""^^rdf:JSON """{"orderId":"A200","shipTo":{"country":"US"},"customer":{"email":"bob@example.org","vatId":null},"lines":[{"sku":"WID-001","qty":2,"unitCents":999},{"sku":"GAD-002","qty":1,"unitCents":1500}],"declared":{"netCents":3498,"vatCents":0,"grossCents":3498}}"""^^rdf:JSON """{"orderId":"A300","shipTo":{"country":"NL"},"customer":{"email":"acct@company.nl","vatId":"NL999999999B01"},"lines":[{"sku":"WID-001","qty":2,"unitCents":999},{"sku":"GAD-002","qty":1,"unitCents":1500}],"declared":{"netCents":3498,"vatCents":0,"grossCents":3498}}"""^^rdf:JSON """{"orderId":"A301","shipTo":{"country":"NL"},"customer":{"email":"billing@company.nl","vatId":"NL999999999B01"},"lines":[{"sku":"WID-001","qty":2,"unitCents":999},{"sku":"GAD-002","qty":1,"unitCents":1500}],"declared":{"netCents":3498,"vatCents":0,"grossCents":3498}}"""^^rdf:JSON """{"orderId":"A400","shipTo":{"country":"BE"},"customer":{"email":"ada@other.example","vatId":null},"lines":[{"sku":"WID-001","qty":2,"unitCents":999},{"sku":"GAD-002","qty":1,"unitCents":1500}],"declared":{"netCents":3498,"vatCents":508,"grossCents":4006}}"""^^rdf:JSON)
#   ?Product = ex:Gadget
#   ?Qty = 1
#   ?SkuCat = "GAD-002"
#   ?SkuJson = "GAD-002"
#   ?UnitCents = 1500
# Therefore the derived triple above is entailed by the rules and facts.
# ----------------------------------------------------------------------

<urn:example:order:A100#line:1> ex:product ex:Gadget .

# ----------------------------------------------------------------------
# Proof for derived triple:
#   <urn:example:order:A100#line:1> ex:sku "GAD-002" .
# It holds because the following instance of the rule body is provable:
#   ex:feed ex:json """{
#     "meta~data": { "batch": "2025-12-18" },
#     "orders": [
#       {
#         "orderId": "A100",
#         "shipTo": { "country": "BE" },
#         "customer": { "email": "Ada@Example.ORG", "vatId": null },
#         "lines": [
#           { "sku": "wid-001", "qty": 2, "unitCents": 999 },
#           { "sku": "GAD-002", "qty": 1, "unitCents": 1500 }
#         ],
#         "declared": { "netCents": 3498, "vatCents": 509, "grossCents": 4007 }
#       },
#       {
#         "orderId": "A200",
#         "shipTo": { "country": "US" },
#         "customer": { "email": "bob@example.org", "vatId": null },
#         "lines": [
#           { "sku": "WID-001", "qty": 2, "unitCents": 999 },
#           { "sku": "GAD-002", "qty": 1, "unitCents": 1500 }
#         ],
#         "declared": { "netCents": 3498, "vatCents": 0, "grossCents": 3498 }
#       },
#       {
#         "orderId": "A300",
#         "shipTo": { "country": "NL" },
#         "customer": { "email": "acct@company.nl", "vatId": "NL999999999B01" },
#         "lines": [
#           { "sku": "WID-001", "qty": 2, "unitCents": 999 },
#           { "sku": "GAD-002", "qty": 1, "unitCents": 1500 }
#         ],
#         "declared": { "netCents": 3498, "vatCents": 0, "grossCents": 3498 }
#       },
#       {
#         "orderId": "A301",
#         "shipTo": { "country": "NL" },
#         "customer": { "email": "billing@company.nl", "vatId": "NL999999999B01" },
#         "lines": [
#           { "sku": "WID-001", "qty": 2, "unitCents": 999 },
#           { "sku": "GAD-002", "qty": 1, "unitCents": 1500 }
#         ],
#         "declared": { "netCents": 3498, "vatCents": 0, "grossCents": 3498 }
#       },
#       {
#         "orderId": "A400",
#         "shipTo": { "country": "BE" },
#         "customer": { "email": "ada@other.example", "vatId": null },
#         "lines": [
#           { "sku": "WID-001", "qty": 2, "unitCents": 999 },
#           { "sku": "GAD-002", "qty": 1, "unitCents": 1500 }
#         ],
#         "declared": { "netCents": 3498, "vatCents": 508, "grossCents": 4006 }
#       }
#     ]
#   }"""^^rdf:JSON .
#   ("""{
#     "meta~data": { "batch": "2025-12-18" },
#     "orders": [
#       {
#         "orderId": "A100",
#         "shipTo": { "country": "BE" },
#         "customer": { "email": "Ada@Example.ORG", "vatId": null },
#         "lines": [
#           { "sku": "wid-001", "qty": 2, "unitCents": 999 },
#           { "sku": "GAD-002", "qty": 1, "unitCents": 1500 }
#         ],
#         "declared": { "netCents": 3498, "vatCents": 509, "grossCents": 4007 }
#       },
#       {
#         "orderId": "A200",
#         "shipTo": { "country": "US" },
#         "customer": { "email": "bob@example.org", "vatId": null },
#         "lines": [
#           { "sku": "WID-001", "qty": 2, "unitCents": 999 },
#           { "sku": "GAD-002", "qty": 1, "unitCents": 1500 }
#         ],
#         "declared": { "netCents": 3498, "vatCents": 0, "grossCents": 3498 }
#       },
#       {
#         "orderId": "A300",
#         "shipTo": { "country": "NL" },
#         "customer": { "email": "acct@company.nl", "vatId": "NL999999999B01" },
#         "lines": [
#           { "sku": "WID-001", "qty": 2, "unitCents": 999 },
#           { "sku": "GAD-002", "qty": 1, "unitCents": 1500 }
#         ],
#         "declared": { "netCents": 3498, "vatCents": 0, "grossCents": 3498 }
#       },
#       {
#         "orderId": "A301",
#         "shipTo": { "country": "NL" },
#         "customer": { "email": "billing@company.nl", "vatId": "NL999999999B01" },
#         "lines": [
#           { "sku": "WID-001", "qty": 2, "unitCents": 999 },
#           { "sku": "GAD-002", "qty": 1, "unitCents": 1500 }
#         ],
#         "declared": { "netCents": 3498, "vatCents": 0, "grossCents": 3498 }
#       },
#       {
#         "orderId": "A400",
#         "shipTo": { "country": "BE" },
#         "customer": { "email": "ada@other.example", "vatId": null },
#         "lines": [
#           { "sku": "WID-001", "qty": 2, "unitCents": 999 },
#           { "sku": "GAD-002", "qty": 1, "unitCents": 1500 }
#         ],
#         "declared": { "netCents": 3498, "vatCents": 508, "grossCents": 4006 }
#       }
#     ]
#   }"""^^rdf:JSON "/orders") string:jsonPointer ("""{"orderId":"A100","shipTo":{"country":"BE"},"customer":{"email":"Ada@Example.ORG","vatId":null},"lines":[{"sku":"wid-001","qty":2,"unitCents":999},{"sku":"GAD-002","qty":1,"unitCents":1500}],"declared":{"netCents":3498,"vatCents":509,"grossCents":4007}}"""^^rdf:JSON """{"orderId":"A200","shipTo":{"country":"US"},"customer":{"email":"bob@example.org","vatId":null},"lines":[{"sku":"WID-001","qty":2,"unitCents":999},{"sku":"GAD-002","qty":1,"unitCents":1500}],"declared":{"netCents":3498,"vatCents":0,"grossCents":3498}}"""^^rdf:JSON """{"orderId":"A300","shipTo":{"country":"NL"},"customer":{"email":"acct@company.nl","vatId":"NL999999999B01"},"lines":[{"sku":"WID-001","qty":2,"unitCents":999},{"sku":"GAD-002","qty":1,"unitCents":1500}],"declared":{"netCents":3498,"vatCents":0,"grossCents":3498}}"""^^rdf:JSON """{"orderId":"A301","shipTo":{"country":"NL"},"customer":{"email":"billing@company.nl","vatId":"NL999999999B01"},"lines":[{"sku":"WID-001","qty":2,"unitCents":999},{"sku":"GAD-002","qty":1,"unitCents":1500}],"declared":{"netCents":3498,"vatCents":0,"grossCents":3498}}"""^^rdf:JSON """{"orderId":"A400","shipTo":{"country":"BE"},"customer":{"email":"ada@other.example","vatId":null},"lines":[{"sku":"WID-001","qty":2,"unitCents":999},{"sku":"GAD-002","qty":1,"unitCents":1500}],"declared":{"netCents":3498,"vatCents":508,"grossCents":4006}}"""^^rdf:JSON) .
#   ("""{"orderId":"A100","shipTo":{"country":"BE"},"customer":{"email":"Ada@Example.ORG","vatId":null},"lines":[{"sku":"wid-001","qty":2,"unitCents":999},{"sku":"GAD-002","qty":1,"unitCents":1500}],"declared":{"netCents":3498,"vatCents":509,"grossCents":4007}}"""^^rdf:JSON """{"orderId":"A200","shipTo":{"country":"US"},"customer":{"email":"bob@example.org","vatId":null},"lines":[{"sku":"WID-001","qty":2,"unitCents":999},{"sku":"GAD-002","qty":1,"unitCents":1500}],"declared":{"netCents":3498,"vatCents":0,"grossCents":3498}}"""^^rdf:JSON """{"orderId":"A300","shipTo":{"country":"NL"},"customer":{"email":"acct@company.nl","vatId":"NL999999999B01"},"lines":[{"sku":"WID-001","qty":2,"unitCents":999},{"sku":"GAD-002","qty":1,"unitCents":1500}],"declared":{"netCents":3498,"vatCents":0,"grossCents":3498}}"""^^rdf:JSON """{"orderId":"A301","shipTo":{"country":"NL"},"customer":{"email":"billing@company.nl","vatId":"NL999999999B01"},"lines":[{"sku":"WID-001","qty":2,"unitCents":999},{"sku":"GAD-002","qty":1,"unitCents":1500}],"declared":{"netCents":3498,"vatCents":0,"grossCents":3498}}"""^^rdf:JSON """{"orderId":"A400","shipTo":{"country":"BE"},"customer":{"email":"ada@other.example","vatId":null},"lines":[{"sku":"WID-001","qty":2,"unitCents":999},{"sku":"GAD-002","qty":1,"unitCents":1500}],"declared":{"netCents":3498,"vatCents":508,"grossCents":4006}}"""^^rdf:JSON) list:iterate (0 """{"orderId":"A100","shipTo":{"country":"BE"},"customer":{"email":"Ada@Example.ORG","vatId":null},"lines":[{"sku":"wid-001","qty":2,"unitCents":999},{"sku":"GAD-002","qty":1,"unitCents":1500}],"declared":{"netCents":3498,"vatCents":509,"grossCents":4007}}"""^^rdf:JSON) .
#   ("""{"orderId":"A100","shipTo":{"country":"BE"},"customer":{"email":"Ada@Example.ORG","vatId":null},"lines":[{"sku":"wid-001","qty":2,"unitCents":999},{"sku":"GAD-002","qty":1,"unitCents":1500}],"declared":{"netCents":3498,"vatCents":509,"grossCents":4007}}"""^^rdf:JSON "/orderId") string:jsonPointer "A100" .
#   ("urn:example:order:%s" "A100") string:format "urn:example:order:A100" .
#   <urn:example:order:A100> log:uri "urn:example:order:A100" .
#   ("""{"orderId":"A100","shipTo":{"country":"BE"},"customer":{"email":"Ada@Example.ORG","vatId":null},"lines":[{"sku":"wid-001","qty":2,"unitCents":999},{"sku":"GAD-002","qty":1,"unitCents":1500}],"declared":{"netCents":3498,"vatCents":509,"grossCents":4007}}"""^^rdf:JSON "/lines") string:jsonPointer ("""{"sku":"wid-001","qty":2,"unitCents":999}"""^^rdf:JSON """{"sku":"GAD-002","qty":1,"unitCents":1500}"""^^rdf:JSON) .
#   ("""{"sku":"wid-001","qty":2,"unitCents":999}"""^^rdf:JSON """{"sku":"GAD-002","qty":1,"unitCents":1500}"""^^rdf:JSON) list:iterate (1 """{"sku":"GAD-002","qty":1,"unitCents":1500}"""^^rdf:JSON) .
#   ("""{"sku":"GAD-002","qty":1,"unitCents":1500}"""^^rdf:JSON "/sku") string:jsonPointer "GAD-002" .
#   ("""{"sku":"GAD-002","qty":1,"unitCents":1500}"""^^rdf:JSON "/qty") string:jsonPointer 1 .
#   ("""{"sku":"GAD-002","qty":1,"unitCents":1500}"""^^rdf:JSON "/unitCents") string:jsonPointer 1500 .
#   ex:Gadget a ex:Product .
#   ex:Gadget ex:sku "GAD-002" .
#   (1 1500) math:product 1500 .
#   ("urn:example:order:%s#line:%s" "A100" 1) string:format "urn:example:order:A100#line:1" .
#   <urn:example:order:A100#line:1> log:uri "urn:example:order:A100#line:1" .
#   "GAD-002" string:equalIgnoringCase "GAD-002" .
# via the schematic forward rule:
#   {
#     ex:feed ex:json ?J .
#     (?J "/orders") string:jsonPointer ?Orders .
#     ?Orders list:iterate (?OrderIndex ?OrderJson) .
#     (?OrderJson "/orderId") string:jsonPointer ?OrderId .
#     ("urn:example:order:%s" ?OrderId) string:format ?OrderUriStr .
#     ?Order log:uri ?OrderUriStr .
#     (?OrderJson "/lines") string:jsonPointer ?Lines .
#     ?Lines list:iterate (?LineIndex ?LineJson) .
#     (?LineJson "/sku") string:jsonPointer ?SkuJson .
#     (?LineJson "/qty") string:jsonPointer ?Qty .
#     (?LineJson "/unitCents") string:jsonPointer ?UnitCents .
#     ?Product a ex:Product .
#     ?Product ex:sku ?SkuCat .
#     (?Qty ?UnitCents) math:product ?NetCents .
#     ("urn:example:order:%s#line:%s" ?OrderId ?LineIndex) string:format ?LineUriStr .
#     ?Line log:uri ?LineUriStr .
#     ?SkuJson string:equalIgnoringCase ?SkuCat .
#   } => {
#     ?Order ex:line ?Line .
#     ?Line a ex:OrderLine .
#     ?Line ex:lineIndex ?LineIndex .
#     ?Line ex:product ?Product .
#     ?Line ex:sku ?SkuCat .
#     ?Line ex:qty ?Qty .
#     ?Line ex:unitCents ?UnitCents .
#     ?Line ex:netCents ?NetCents .
#   } .
# with substitution (on rule variables):
#   ?J = """{
#     "meta~data": { "batch": "2025-12-18" },
#     "orders": [
#     {
#     "orderId": "A100",
#     "shipTo": { "country": "BE" },
#     "customer": { "email": "Ada@Example.ORG", "vatId": null },
#     "lines": [
#     { "sku": "wid-001", "qty": 2, "unitCents": 999 },
#     { "sku": "GAD-002", "qty": 1, "unitCents": 1500 }
#     ],
#     "declared": { "netCents": 3498, "vatCents": 509, "grossCents": 4007 }
#     },
#     {
#     "orderId": "A200",
#     "shipTo": { "country": "US" },
#     "customer": { "email": "bob@example.org", "vatId": null },
#     "lines": [
#     { "sku": "WID-001", "qty": 2, "unitCents": 999 },
#     { "sku": "GAD-002", "qty": 1, "unitCents": 1500 }
#     ],
#     "declared": { "netCents": 3498, "vatCents": 0, "grossCents": 3498 }
#     },
#     {
#     "orderId": "A300",
#     "shipTo": { "country": "NL" },
#     "customer": { "email": "acct@company.nl", "vatId": "NL999999999B01" },
#     "lines": [
#     { "sku": "WID-001", "qty": 2, "unitCents": 999 },
#     { "sku": "GAD-002", "qty": 1, "unitCents": 1500 }
#     ],
#     "declared": { "netCents": 3498, "vatCents": 0, "grossCents": 3498 }
#     },
#     {
#     "orderId": "A301",
#     "shipTo": { "country": "NL" },
#     "customer": { "email": "billing@company.nl", "vatId": "NL999999999B01" },
#     "lines": [
#     { "sku": "WID-001", "qty": 2, "unitCents": 999 },
#     { "sku": "GAD-002", "qty": 1, "unitCents": 1500 }
#     ],
#     "declared": { "netCents": 3498, "vatCents": 0, "grossCents": 3498 }
#     },
#     {
#     "orderId": "A400",
#     "shipTo": { "country": "BE" },
#     "customer": { "email": "ada@other.example", "vatId": null },
#     "lines": [
#     { "sku": "WID-001", "qty": 2, "unitCents": 999 },
#     { "sku": "GAD-002", "qty": 1, "unitCents": 1500 }
#     ],
#     "declared": { "netCents": 3498, "vatCents": 508, "grossCents": 4006 }
#     }
#     ]
#   }"""^^rdf:JSON
#   ?Line = <urn:example:order:A100#line:1>
#   ?LineIndex = 1
#   ?LineJson = """{"sku":"GAD-002","qty":1,"unitCents":1500}"""^^rdf:JSON
#   ?LineUriStr = "urn:example:order:A100#line:1"
#   ?Lines = ("""{"sku":"wid-001","qty":2,"unitCents":999}"""^^rdf:JSON """{"sku":"GAD-002","qty":1,"unitCents":1500}"""^^rdf:JSON)
#   ?NetCents = 1500
#   ?Order = <urn:example:order:A100>
#   ?OrderId = "A100"
#   ?OrderIndex = 0
#   ?OrderJson = """{"orderId":"A100","shipTo":{"country":"BE"},"customer":{"email":"Ada@Example.ORG","vatId":null},"lines":[{"sku":"wid-001","qty":2,"unitCents":999},{"sku":"GAD-002","qty":1,"unitCents":1500}],"declared":{"netCents":3498,"vatCents":509,"grossCents":4007}}"""^^rdf:JSON
#   ?OrderUriStr = "urn:example:order:A100"
#   ?Orders = ("""{"orderId":"A100","shipTo":{"country":"BE"},"customer":{"email":"Ada@Example.ORG","vatId":null},"lines":[{"sku":"wid-001","qty":2,"unitCents":999},{"sku":"GAD-002","qty":1,"unitCents":1500}],"declared":{"netCents":3498,"vatCents":509,"grossCents":4007}}"""^^rdf:JSON """{"orderId":"A200","shipTo":{"country":"US"},"customer":{"email":"bob@example.org","vatId":null},"lines":[{"sku":"WID-001","qty":2,"unitCents":999},{"sku":"GAD-002","qty":1,"unitCents":1500}],"declared":{"netCents":3498,"vatCents":0,"grossCents":3498}}"""^^rdf:JSON """{"orderId":"A300","shipTo":{"country":"NL"},"customer":{"email":"acct@company.nl","vatId":"NL999999999B01"},"lines":[{"sku":"WID-001","qty":2,"unitCents":999},{"sku":"GAD-002","qty":1,"unitCents":1500}],"declared":{"netCents":3498,"vatCents":0,"grossCents":3498}}"""^^rdf:JSON """{"orderId":"A301","shipTo":{"country":"NL"},"customer":{"email":"billing@company.nl","vatId":"NL999999999B01"},"lines":[{"sku":"WID-001","qty":2,"unitCents":999},{"sku":"GAD-002","qty":1,"unitCents":1500}],"declared":{"netCents":3498,"vatCents":0,"grossCents":3498}}"""^^rdf:JSON """{"orderId":"A400","shipTo":{"country":"BE"},"customer":{"email":"ada@other.example","vatId":null},"lines":[{"sku":"WID-001","qty":2,"unitCents":999},{"sku":"GAD-002","qty":1,"unitCents":1500}],"declared":{"netCents":3498,"vatCents":508,"grossCents":4006}}"""^^rdf:JSON)
#   ?Product = ex:Gadget
#   ?Qty = 1
#   ?SkuCat = "GAD-002"
#   ?SkuJson = "GAD-002"
#   ?UnitCents = 1500
# Therefore the derived triple above is entailed by the rules and facts.
# ----------------------------------------------------------------------

<urn:example:order:A100#line:1> ex:sku "GAD-002" .

# ----------------------------------------------------------------------
# Proof for derived triple:
#   <urn:example:order:A100#line:1> ex:qty 1 .
# It holds because the following instance of the rule body is provable:
#   ex:feed ex:json """{
#     "meta~data": { "batch": "2025-12-18" },
#     "orders": [
#       {
#         "orderId": "A100",
#         "shipTo": { "country": "BE" },
#         "customer": { "email": "Ada@Example.ORG", "vatId": null },
#         "lines": [
#           { "sku": "wid-001", "qty": 2, "unitCents": 999 },
#           { "sku": "GAD-002", "qty": 1, "unitCents": 1500 }
#         ],
#         "declared": { "netCents": 3498, "vatCents": 509, "grossCents": 4007 }
#       },
#       {
#         "orderId": "A200",
#         "shipTo": { "country": "US" },
#         "customer": { "email": "bob@example.org", "vatId": null },
#         "lines": [
#           { "sku": "WID-001", "qty": 2, "unitCents": 999 },
#           { "sku": "GAD-002", "qty": 1, "unitCents": 1500 }
#         ],
#         "declared": { "netCents": 3498, "vatCents": 0, "grossCents": 3498 }
#       },
#       {
#         "orderId": "A300",
#         "shipTo": { "country": "NL" },
#         "customer": { "email": "acct@company.nl", "vatId": "NL999999999B01" },
#         "lines": [
#           { "sku": "WID-001", "qty": 2, "unitCents": 999 },
#           { "sku": "GAD-002", "qty": 1, "unitCents": 1500 }
#         ],
#         "declared": { "netCents": 3498, "vatCents": 0, "grossCents": 3498 }
#       },
#       {
#         "orderId": "A301",
#         "shipTo": { "country": "NL" },
#         "customer": { "email": "billing@company.nl", "vatId": "NL999999999B01" },
#         "lines": [
#           { "sku": "WID-001", "qty": 2, "unitCents": 999 },
#           { "sku": "GAD-002", "qty": 1, "unitCents": 1500 }
#         ],
#         "declared": { "netCents": 3498, "vatCents": 0, "grossCents": 3498 }
#       },
#       {
#         "orderId": "A400",
#         "shipTo": { "country": "BE" },
#         "customer": { "email": "ada@other.example", "vatId": null },
#         "lines": [
#           { "sku": "WID-001", "qty": 2, "unitCents": 999 },
#           { "sku": "GAD-002", "qty": 1, "unitCents": 1500 }
#         ],
#         "declared": { "netCents": 3498, "vatCents": 508, "grossCents": 4006 }
#       }
#     ]
#   }"""^^rdf:JSON .
#   ("""{
#     "meta~data": { "batch": "2025-12-18" },
#     "orders": [
#       {
#         "orderId": "A100",
#         "shipTo": { "country": "BE" },
#         "customer": { "email": "Ada@Example.ORG", "vatId": null },
#         "lines": [
#           { "sku": "wid-001", "qty": 2, "unitCents": 999 },
#           { "sku": "GAD-002", "qty": 1, "unitCents": 1500 }
#         ],
#         "declared": { "netCents": 3498, "vatCents": 509, "grossCents": 4007 }
#       },
#       {
#         "orderId": "A200",
#         "shipTo": { "country": "US" },
#         "customer": { "email": "bob@example.org", "vatId": null },
#         "lines": [
#           { "sku": "WID-001", "qty": 2, "unitCents": 999 },
#           { "sku": "GAD-002", "qty": 1, "unitCents": 1500 }
#         ],
#         "declared": { "netCents": 3498, "vatCents": 0, "grossCents": 3498 }
#       },
#       {
#         "orderId": "A300",
#         "shipTo": { "country": "NL" },
#         "customer": { "email": "acct@company.nl", "vatId": "NL999999999B01" },
#         "lines": [
#           { "sku": "WID-001", "qty": 2, "unitCents": 999 },
#           { "sku": "GAD-002", "qty": 1, "unitCents": 1500 }
#         ],
#         "declared": { "netCents": 3498, "vatCents": 0, "grossCents": 3498 }
#       },
#       {
#         "orderId": "A301",
#         "shipTo": { "country": "NL" },
#         "customer": { "email": "billing@company.nl", "vatId": "NL999999999B01" },
#         "lines": [
#           { "sku": "WID-001", "qty": 2, "unitCents": 999 },
#           { "sku": "GAD-002", "qty": 1, "unitCents": 1500 }
#         ],
#         "declared": { "netCents": 3498, "vatCents": 0, "grossCents": 3498 }
#       },
#       {
#         "orderId": "A400",
#         "shipTo": { "country": "BE" },
#         "customer": { "email": "ada@other.example", "vatId": null },
#         "lines": [
#           { "sku": "WID-001", "qty": 2, "unitCents": 999 },
#           { "sku": "GAD-002", "qty": 1, "unitCents": 1500 }
#         ],
#         "declared": { "netCents": 3498, "vatCents": 508, "grossCents": 4006 }
#       }
#     ]
#   }"""^^rdf:JSON "/orders") string:jsonPointer ("""{"orderId":"A100","shipTo":{"country":"BE"},"customer":{"email":"Ada@Example.ORG","vatId":null},"lines":[{"sku":"wid-001","qty":2,"unitCents":999},{"sku":"GAD-002","qty":1,"unitCents":1500}],"declared":{"netCents":3498,"vatCents":509,"grossCents":4007}}"""^^rdf:JSON """{"orderId":"A200","shipTo":{"country":"US"},"customer":{"email":"bob@example.org","vatId":null},"lines":[{"sku":"WID-001","qty":2,"unitCents":999},{"sku":"GAD-002","qty":1,"unitCents":1500}],"declared":{"netCents":3498,"vatCents":0,"grossCents":3498}}"""^^rdf:JSON """{"orderId":"A300","shipTo":{"country":"NL"},"customer":{"email":"acct@company.nl","vatId":"NL999999999B01"},"lines":[{"sku":"WID-001","qty":2,"unitCents":999},{"sku":"GAD-002","qty":1,"unitCents":1500}],"declared":{"netCents":3498,"vatCents":0,"grossCents":3498}}"""^^rdf:JSON """{"orderId":"A301","shipTo":{"country":"NL"},"customer":{"email":"billing@company.nl","vatId":"NL999999999B01"},"lines":[{"sku":"WID-001","qty":2,"unitCents":999},{"sku":"GAD-002","qty":1,"unitCents":1500}],"declared":{"netCents":3498,"vatCents":0,"grossCents":3498}}"""^^rdf:JSON """{"orderId":"A400","shipTo":{"country":"BE"},"customer":{"email":"ada@other.example","vatId":null},"lines":[{"sku":"WID-001","qty":2,"unitCents":999},{"sku":"GAD-002","qty":1,"unitCents":1500}],"declared":{"netCents":3498,"vatCents":508,"grossCents":4006}}"""^^rdf:JSON) .
#   ("""{"orderId":"A100","shipTo":{"country":"BE"},"customer":{"email":"Ada@Example.ORG","vatId":null},"lines":[{"sku":"wid-001","qty":2,"unitCents":999},{"sku":"GAD-002","qty":1,"unitCents":1500}],"declared":{"netCents":3498,"vatCents":509,"grossCents":4007}}"""^^rdf:JSON """{"orderId":"A200","shipTo":{"country":"US"},"customer":{"email":"bob@example.org","vatId":null},"lines":[{"sku":"WID-001","qty":2,"unitCents":999},{"sku":"GAD-002","qty":1,"unitCents":1500}],"declared":{"netCents":3498,"vatCents":0,"grossCents":3498}}"""^^rdf:JSON """{"orderId":"A300","shipTo":{"country":"NL"},"customer":{"email":"acct@company.nl","vatId":"NL999999999B01"},"lines":[{"sku":"WID-001","qty":2,"unitCents":999},{"sku":"GAD-002","qty":1,"unitCents":1500}],"declared":{"netCents":3498,"vatCents":0,"grossCents":3498}}"""^^rdf:JSON """{"orderId":"A301","shipTo":{"country":"NL"},"customer":{"email":"billing@company.nl","vatId":"NL999999999B01"},"lines":[{"sku":"WID-001","qty":2,"unitCents":999},{"sku":"GAD-002","qty":1,"unitCents":1500}],"declared":{"netCents":3498,"vatCents":0,"grossCents":3498}}"""^^rdf:JSON """{"orderId":"A400","shipTo":{"country":"BE"},"customer":{"email":"ada@other.example","vatId":null},"lines":[{"sku":"WID-001","qty":2,"unitCents":999},{"sku":"GAD-002","qty":1,"unitCents":1500}],"declared":{"netCents":3498,"vatCents":508,"grossCents":4006}}"""^^rdf:JSON) list:iterate (0 """{"orderId":"A100","shipTo":{"country":"BE"},"customer":{"email":"Ada@Example.ORG","vatId":null},"lines":[{"sku":"wid-001","qty":2,"unitCents":999},{"sku":"GAD-002","qty":1,"unitCents":1500}],"declared":{"netCents":3498,"vatCents":509,"grossCents":4007}}"""^^rdf:JSON) .
#   ("""{"orderId":"A100","shipTo":{"country":"BE"},"customer":{"email":"Ada@Example.ORG","vatId":null},"lines":[{"sku":"wid-001","qty":2,"unitCents":999},{"sku":"GAD-002","qty":1,"unitCents":1500}],"declared":{"netCents":3498,"vatCents":509,"grossCents":4007}}"""^^rdf:JSON "/orderId") string:jsonPointer "A100" .
#   ("urn:example:order:%s" "A100") string:format "urn:example:order:A100" .
#   <urn:example:order:A100> log:uri "urn:example:order:A100" .
#   ("""{"orderId":"A100","shipTo":{"country":"BE"},"customer":{"email":"Ada@Example.ORG","vatId":null},"lines":[{"sku":"wid-001","qty":2,"unitCents":999},{"sku":"GAD-002","qty":1,"unitCents":1500}],"declared":{"netCents":3498,"vatCents":509,"grossCents":4007}}"""^^rdf:JSON "/lines") string:jsonPointer ("""{"sku":"wid-001","qty":2,"unitCents":999}"""^^rdf:JSON """{"sku":"GAD-002","qty":1,"unitCents":1500}"""^^rdf:JSON) .
#   ("""{"sku":"wid-001","qty":2,"unitCents":999}"""^^rdf:JSON """{"sku":"GAD-002","qty":1,"unitCents":1500}"""^^rdf:JSON) list:iterate (1 """{"sku":"GAD-002","qty":1,"unitCents":1500}"""^^rdf:JSON) .
#   ("""{"sku":"GAD-002","qty":1,"unitCents":1500}"""^^rdf:JSON "/sku") string:jsonPointer "GAD-002" .
#   ("""{"sku":"GAD-002","qty":1,"unitCents":1500}"""^^rdf:JSON "/qty") string:jsonPointer 1 .
#   ("""{"sku":"GAD-002","qty":1,"unitCents":1500}"""^^rdf:JSON "/unitCents") string:jsonPointer 1500 .
#   ex:Gadget a ex:Product .
#   ex:Gadget ex:sku "GAD-002" .
#   (1 1500) math:product 1500 .
#   ("urn:example:order:%s#line:%s" "A100" 1) string:format "urn:example:order:A100#line:1" .
#   <urn:example:order:A100#line:1> log:uri "urn:example:order:A100#line:1" .
#   "GAD-002" string:equalIgnoringCase "GAD-002" .
# via the schematic forward rule:
#   {
#     ex:feed ex:json ?J .
#     (?J "/orders") string:jsonPointer ?Orders .
#     ?Orders list:iterate (?OrderIndex ?OrderJson) .
#     (?OrderJson "/orderId") string:jsonPointer ?OrderId .
#     ("urn:example:order:%s" ?OrderId) string:format ?OrderUriStr .
#     ?Order log:uri ?OrderUriStr .
#     (?OrderJson "/lines") string:jsonPointer ?Lines .
#     ?Lines list:iterate (?LineIndex ?LineJson) .
#     (?LineJson "/sku") string:jsonPointer ?SkuJson .
#     (?LineJson "/qty") string:jsonPointer ?Qty .
#     (?LineJson "/unitCents") string:jsonPointer ?UnitCents .
#     ?Product a ex:Product .
#     ?Product ex:sku ?SkuCat .
#     (?Qty ?UnitCents) math:product ?NetCents .
#     ("urn:example:order:%s#line:%s" ?OrderId ?LineIndex) string:format ?LineUriStr .
#     ?Line log:uri ?LineUriStr .
#     ?SkuJson string:equalIgnoringCase ?SkuCat .
#   } => {
#     ?Order ex:line ?Line .
#     ?Line a ex:OrderLine .
#     ?Line ex:lineIndex ?LineIndex .
#     ?Line ex:product ?Product .
#     ?Line ex:sku ?SkuCat .
#     ?Line ex:qty ?Qty .
#     ?Line ex:unitCents ?UnitCents .
#     ?Line ex:netCents ?NetCents .
#   } .
# with substitution (on rule variables):
#   ?J = """{
#     "meta~data": { "batch": "2025-12-18" },
#     "orders": [
#     {
#     "orderId": "A100",
#     "shipTo": { "country": "BE" },
#     "customer": { "email": "Ada@Example.ORG", "vatId": null },
#     "lines": [
#     { "sku": "wid-001", "qty": 2, "unitCents": 999 },
#     { "sku": "GAD-002", "qty": 1, "unitCents": 1500 }
#     ],
#     "declared": { "netCents": 3498, "vatCents": 509, "grossCents": 4007 }
#     },
#     {
#     "orderId": "A200",
#     "shipTo": { "country": "US" },
#     "customer": { "email": "bob@example.org", "vatId": null },
#     "lines": [
#     { "sku": "WID-001", "qty": 2, "unitCents": 999 },
#     { "sku": "GAD-002", "qty": 1, "unitCents": 1500 }
#     ],
#     "declared": { "netCents": 3498, "vatCents": 0, "grossCents": 3498 }
#     },
#     {
#     "orderId": "A300",
#     "shipTo": { "country": "NL" },
#     "customer": { "email": "acct@company.nl", "vatId": "NL999999999B01" },
#     "lines": [
#     { "sku": "WID-001", "qty": 2, "unitCents": 999 },
#     { "sku": "GAD-002", "qty": 1, "unitCents": 1500 }
#     ],
#     "declared": { "netCents": 3498, "vatCents": 0, "grossCents": 3498 }
#     },
#     {
#     "orderId": "A301",
#     "shipTo": { "country": "NL" },
#     "customer": { "email": "billing@company.nl", "vatId": "NL999999999B01" },
#     "lines": [
#     { "sku": "WID-001", "qty": 2, "unitCents": 999 },
#     { "sku": "GAD-002", "qty": 1, "unitCents": 1500 }
#     ],
#     "declared": { "netCents": 3498, "vatCents": 0, "grossCents": 3498 }
#     },
#     {
#     "orderId": "A400",
#     "shipTo": { "country": "BE" },
#     "customer": { "email": "ada@other.example", "vatId": null },
#     "lines": [
#     { "sku": "WID-001", "qty": 2, "unitCents": 999 },
#     { "sku": "GAD-002", "qty": 1, "unitCents": 1500 }
#     ],
#     "declared": { "netCents": 3498, "vatCents": 508, "grossCents": 4006 }
#     }
#     ]
#   }"""^^rdf:JSON
#   ?Line = <urn:example:order:A100#line:1>
#   ?LineIndex = 1
#   ?LineJson = """{"sku":"GAD-002","qty":1,"unitCents":1500}"""^^rdf:JSON
#   ?LineUriStr = "urn:example:order:A100#line:1"
#   ?Lines = ("""{"sku":"wid-001","qty":2,"unitCents":999}"""^^rdf:JSON """{"sku":"GAD-002","qty":1,"unitCents":1500}"""^^rdf:JSON)
#   ?NetCents = 1500
#   ?Order = <urn:example:order:A100>
#   ?OrderId = "A100"
#   ?OrderIndex = 0
#   ?OrderJson = """{"orderId":"A100","shipTo":{"country":"BE"},"customer":{"email":"Ada@Example.ORG","vatId":null},"lines":[{"sku":"wid-001","qty":2,"unitCents":999},{"sku":"GAD-002","qty":1,"unitCents":1500}],"declared":{"netCents":3498,"vatCents":509,"grossCents":4007}}"""^^rdf:JSON
#   ?OrderUriStr = "urn:example:order:A100"
#   ?Orders = ("""{"orderId":"A100","shipTo":{"country":"BE"},"customer":{"email":"Ada@Example.ORG","vatId":null},"lines":[{"sku":"wid-001","qty":2,"unitCents":999},{"sku":"GAD-002","qty":1,"unitCents":1500}],"declared":{"netCents":3498,"vatCents":509,"grossCents":4007}}"""^^rdf:JSON """{"orderId":"A200","shipTo":{"country":"US"},"customer":{"email":"bob@example.org","vatId":null},"lines":[{"sku":"WID-001","qty":2,"unitCents":999},{"sku":"GAD-002","qty":1,"unitCents":1500}],"declared":{"netCents":3498,"vatCents":0,"grossCents":3498}}"""^^rdf:JSON """{"orderId":"A300","shipTo":{"country":"NL"},"customer":{"email":"acct@company.nl","vatId":"NL999999999B01"},"lines":[{"sku":"WID-001","qty":2,"unitCents":999},{"sku":"GAD-002","qty":1,"unitCents":1500}],"declared":{"netCents":3498,"vatCents":0,"grossCents":3498}}"""^^rdf:JSON """{"orderId":"A301","shipTo":{"country":"NL"},"customer":{"email":"billing@company.nl","vatId":"NL999999999B01"},"lines":[{"sku":"WID-001","qty":2,"unitCents":999},{"sku":"GAD-002","qty":1,"unitCents":1500}],"declared":{"netCents":3498,"vatCents":0,"grossCents":3498}}"""^^rdf:JSON """{"orderId":"A400","shipTo":{"country":"BE"},"customer":{"email":"ada@other.example","vatId":null},"lines":[{"sku":"WID-001","qty":2,"unitCents":999},{"sku":"GAD-002","qty":1,"unitCents":1500}],"declared":{"netCents":3498,"vatCents":508,"grossCents":4006}}"""^^rdf:JSON)
#   ?Product = ex:Gadget
#   ?Qty = 1
#   ?SkuCat = "GAD-002"
#   ?SkuJson = "GAD-002"
#   ?UnitCents = 1500
# Therefore the derived triple above is entailed by the rules and facts.
# ----------------------------------------------------------------------

<urn:example:order:A100#line:1> ex:qty 1 .

# ----------------------------------------------------------------------
# Proof for derived triple:
#   <urn:example:order:A100#line:1> ex:unitCents 1500 .
# It holds because the following instance of the rule body is provable:
#   ex:feed ex:json """{
#     "meta~data": { "batch": "2025-12-18" },
#     "orders": [
#       {
#         "orderId": "A100",
#         "shipTo": { "country": "BE" },
#         "customer": { "email": "Ada@Example.ORG", "vatId": null },
#         "lines": [
#           { "sku": "wid-001", "qty": 2, "unitCents": 999 },
#           { "sku": "GAD-002", "qty": 1, "unitCents": 1500 }
#         ],
#         "declared": { "netCents": 3498, "vatCents": 509, "grossCents": 4007 }
#       },
#       {
#         "orderId": "A200",
#         "shipTo": { "country": "US" },
#         "customer": { "email": "bob@example.org", "vatId": null },
#         "lines": [
#           { "sku": "WID-001", "qty": 2, "unitCents": 999 },
#           { "sku": "GAD-002", "qty": 1, "unitCents": 1500 }
#         ],
#         "declared": { "netCents": 3498, "vatCents": 0, "grossCents": 3498 }
#       },
#       {
#         "orderId": "A300",
#         "shipTo": { "country": "NL" },
#         "customer": { "email": "acct@company.nl", "vatId": "NL999999999B01" },
#         "lines": [
#           { "sku": "WID-001", "qty": 2, "unitCents": 999 },
#           { "sku": "GAD-002", "qty": 1, "unitCents": 1500 }
#         ],
#         "declared": { "netCents": 3498, "vatCents": 0, "grossCents": 3498 }
#       },
#       {
#         "orderId": "A301",
#         "shipTo": { "country": "NL" },
#         "customer": { "email": "billing@company.nl", "vatId": "NL999999999B01" },
#         "lines": [
#           { "sku": "WID-001", "qty": 2, "unitCents": 999 },
#           { "sku": "GAD-002", "qty": 1, "unitCents": 1500 }
#         ],
#         "declared": { "netCents": 3498, "vatCents": 0, "grossCents": 3498 }
#       },
#       {
#         "orderId": "A400",
#         "shipTo": { "country": "BE" },
#         "customer": { "email": "ada@other.example", "vatId": null },
#         "lines": [
#           { "sku": "WID-001", "qty": 2, "unitCents": 999 },
#           { "sku": "GAD-002", "qty": 1, "unitCents": 1500 }
#         ],
#         "declared": { "netCents": 3498, "vatCents": 508, "grossCents": 4006 }
#       }
#     ]
#   }"""^^rdf:JSON .
#   ("""{
#     "meta~data": { "batch": "2025-12-18" },
#     "orders": [
#       {
#         "orderId": "A100",
#         "shipTo": { "country": "BE" },
#         "customer": { "email": "Ada@Example.ORG", "vatId": null },
#         "lines": [
#           { "sku": "wid-001", "qty": 2, "unitCents": 999 },
#           { "sku": "GAD-002", "qty": 1, "unitCents": 1500 }
#         ],
#         "declared": { "netCents": 3498, "vatCents": 509, "grossCents": 4007 }
#       },
#       {
#         "orderId": "A200",
#         "shipTo": { "country": "US" },
#         "customer": { "email": "bob@example.org", "vatId": null },
#         "lines": [
#           { "sku": "WID-001", "qty": 2, "unitCents": 999 },
#           { "sku": "GAD-002", "qty": 1, "unitCents": 1500 }
#         ],
#         "declared": { "netCents": 3498, "vatCents": 0, "grossCents": 3498 }
#       },
#       {
#         "orderId": "A300",
#         "shipTo": { "country": "NL" },
#         "customer": { "email": "acct@company.nl", "vatId": "NL999999999B01" },
#         "lines": [
#           { "sku": "WID-001", "qty": 2, "unitCents": 999 },
#           { "sku": "GAD-002", "qty": 1, "unitCents": 1500 }
#         ],
#         "declared": { "netCents": 3498, "vatCents": 0, "grossCents": 3498 }
#       },
#       {
#         "orderId": "A301",
#         "shipTo": { "country": "NL" },
#         "customer": { "email": "billing@company.nl", "vatId": "NL999999999B01" },
#         "lines": [
#           { "sku": "WID-001", "qty": 2, "unitCents": 999 },
#           { "sku": "GAD-002", "qty": 1, "unitCents": 1500 }
#         ],
#         "declared": { "netCents": 3498, "vatCents": 0, "grossCents": 3498 }
#       },
#       {
#         "orderId": "A400",
#         "shipTo": { "country": "BE" },
#         "customer": { "email": "ada@other.example", "vatId": null },
#         "lines": [
#           { "sku": "WID-001", "qty": 2, "unitCents": 999 },
#           { "sku": "GAD-002", "qty": 1, "unitCents": 1500 }
#         ],
#         "declared": { "netCents": 3498, "vatCents": 508, "grossCents": 4006 }
#       }
#     ]
#   }"""^^rdf:JSON "/orders") string:jsonPointer ("""{"orderId":"A100","shipTo":{"country":"BE"},"customer":{"email":"Ada@Example.ORG","vatId":null},"lines":[{"sku":"wid-001","qty":2,"unitCents":999},{"sku":"GAD-002","qty":1,"unitCents":1500}],"declared":{"netCents":3498,"vatCents":509,"grossCents":4007}}"""^^rdf:JSON """{"orderId":"A200","shipTo":{"country":"US"},"customer":{"email":"bob@example.org","vatId":null},"lines":[{"sku":"WID-001","qty":2,"unitCents":999},{"sku":"GAD-002","qty":1,"unitCents":1500}],"declared":{"netCents":3498,"vatCents":0,"grossCents":3498}}"""^^rdf:JSON """{"orderId":"A300","shipTo":{"country":"NL"},"customer":{"email":"acct@company.nl","vatId":"NL999999999B01"},"lines":[{"sku":"WID-001","qty":2,"unitCents":999},{"sku":"GAD-002","qty":1,"unitCents":1500}],"declared":{"netCents":3498,"vatCents":0,"grossCents":3498}}"""^^rdf:JSON """{"orderId":"A301","shipTo":{"country":"NL"},"customer":{"email":"billing@company.nl","vatId":"NL999999999B01"},"lines":[{"sku":"WID-001","qty":2,"unitCents":999},{"sku":"GAD-002","qty":1,"unitCents":1500}],"declared":{"netCents":3498,"vatCents":0,"grossCents":3498}}"""^^rdf:JSON """{"orderId":"A400","shipTo":{"country":"BE"},"customer":{"email":"ada@other.example","vatId":null},"lines":[{"sku":"WID-001","qty":2,"unitCents":999},{"sku":"GAD-002","qty":1,"unitCents":1500}],"declared":{"netCents":3498,"vatCents":508,"grossCents":4006}}"""^^rdf:JSON) .
#   ("""{"orderId":"A100","shipTo":{"country":"BE"},"customer":{"email":"Ada@Example.ORG","vatId":null},"lines":[{"sku":"wid-001","qty":2,"unitCents":999},{"sku":"GAD-002","qty":1,"unitCents":1500}],"declared":{"netCents":3498,"vatCents":509,"grossCents":4007}}"""^^rdf:JSON """{"orderId":"A200","shipTo":{"country":"US"},"customer":{"email":"bob@example.org","vatId":null},"lines":[{"sku":"WID-001","qty":2,"unitCents":999},{"sku":"GAD-002","qty":1,"unitCents":1500}],"declared":{"netCents":3498,"vatCents":0,"grossCents":3498}}"""^^rdf:JSON """{"orderId":"A300","shipTo":{"country":"NL"},"customer":{"email":"acct@company.nl","vatId":"NL999999999B01"},"lines":[{"sku":"WID-001","qty":2,"unitCents":999},{"sku":"GAD-002","qty":1,"unitCents":1500}],"declared":{"netCents":3498,"vatCents":0,"grossCents":3498}}"""^^rdf:JSON """{"orderId":"A301","shipTo":{"country":"NL"},"customer":{"email":"billing@company.nl","vatId":"NL999999999B01"},"lines":[{"sku":"WID-001","qty":2,"unitCents":999},{"sku":"GAD-002","qty":1,"unitCents":1500}],"declared":{"netCents":3498,"vatCents":0,"grossCents":3498}}"""^^rdf:JSON """{"orderId":"A400","shipTo":{"country":"BE"},"customer":{"email":"ada@other.example","vatId":null},"lines":[{"sku":"WID-001","qty":2,"unitCents":999},{"sku":"GAD-002","qty":1,"unitCents":1500}],"declared":{"netCents":3498,"vatCents":508,"grossCents":4006}}"""^^rdf:JSON) list:iterate (0 """{"orderId":"A100","shipTo":{"country":"BE"},"customer":{"email":"Ada@Example.ORG","vatId":null},"lines":[{"sku":"wid-001","qty":2,"unitCents":999},{"sku":"GAD-002","qty":1,"unitCents":1500}],"declared":{"netCents":3498,"vatCents":509,"grossCents":4007}}"""^^rdf:JSON) .
#   ("""{"orderId":"A100","shipTo":{"country":"BE"},"customer":{"email":"Ada@Example.ORG","vatId":null},"lines":[{"sku":"wid-001","qty":2,"unitCents":999},{"sku":"GAD-002","qty":1,"unitCents":1500}],"declared":{"netCents":3498,"vatCents":509,"grossCents":4007}}"""^^rdf:JSON "/orderId") string:jsonPointer "A100" .
#   ("urn:example:order:%s" "A100") string:format "urn:example:order:A100" .
#   <urn:example:order:A100> log:uri "urn:example:order:A100" .
#   ("""{"orderId":"A100","shipTo":{"country":"BE"},"customer":{"email":"Ada@Example.ORG","vatId":null},"lines":[{"sku":"wid-001","qty":2,"unitCents":999},{"sku":"GAD-002","qty":1,"unitCents":1500}],"declared":{"netCents":3498,"vatCents":509,"grossCents":4007}}"""^^rdf:JSON "/lines") string:jsonPointer ("""{"sku":"wid-001","qty":2,"unitCents":999}"""^^rdf:JSON """{"sku":"GAD-002","qty":1,"unitCents":1500}"""^^rdf:JSON) .
#   ("""{"sku":"wid-001","qty":2,"unitCents":999}"""^^rdf:JSON """{"sku":"GAD-002","qty":1,"unitCents":1500}"""^^rdf:JSON) list:iterate (1 """{"sku":"GAD-002","qty":1,"unitCents":1500}"""^^rdf:JSON) .
#   ("""{"sku":"GAD-002","qty":1,"unitCents":1500}"""^^rdf:JSON "/sku") string:jsonPointer "GAD-002" .
#   ("""{"sku":"GAD-002","qty":1,"unitCents":1500}"""^^rdf:JSON "/qty") string:jsonPointer 1 .
#   ("""{"sku":"GAD-002","qty":1,"unitCents":1500}"""^^rdf:JSON "/unitCents") string:jsonPointer 1500 .
#   ex:Gadget a ex:Product .
#   ex:Gadget ex:sku "GAD-002" .
#   (1 1500) math:product 1500 .
#   ("urn:example:order:%s#line:%s" "A100" 1) string:format "urn:example:order:A100#line:1" .
#   <urn:example:order:A100#line:1> log:uri "urn:example:order:A100#line:1" .
#   "GAD-002" string:equalIgnoringCase "GAD-002" .
# via the schematic forward rule:
#   {
#     ex:feed ex:json ?J .
#     (?J "/orders") string:jsonPointer ?Orders .
#     ?Orders list:iterate (?OrderIndex ?OrderJson) .
#     (?OrderJson "/orderId") string:jsonPointer ?OrderId .
#     ("urn:example:order:%s" ?OrderId) string:format ?OrderUriStr .
#     ?Order log:uri ?OrderUriStr .
#     (?OrderJson "/lines") string:jsonPointer ?Lines .
#     ?Lines list:iterate (?LineIndex ?LineJson) .
#     (?LineJson "/sku") string:jsonPointer ?SkuJson .
#     (?LineJson "/qty") string:jsonPointer ?Qty .
#     (?LineJson "/unitCents") string:jsonPointer ?UnitCents .
#     ?Product a ex:Product .
#     ?Product ex:sku ?SkuCat .
#     (?Qty ?UnitCents) math:product ?NetCents .
#     ("urn:example:order:%s#line:%s" ?OrderId ?LineIndex) string:format ?LineUriStr .
#     ?Line log:uri ?LineUriStr .
#     ?SkuJson string:equalIgnoringCase ?SkuCat .
#   } => {
#     ?Order ex:line ?Line .
#     ?Line a ex:OrderLine .
#     ?Line ex:lineIndex ?LineIndex .
#     ?Line ex:product ?Product .
#     ?Line ex:sku ?SkuCat .
#     ?Line ex:qty ?Qty .
#     ?Line ex:unitCents ?UnitCents .
#     ?Line ex:netCents ?NetCents .
#   } .
# with substitution (on rule variables):
#   ?J = """{
#     "meta~data": { "batch": "2025-12-18" },
#     "orders": [
#     {
#     "orderId": "A100",
#     "shipTo": { "country": "BE" },
#     "customer": { "email": "Ada@Example.ORG", "vatId": null },
#     "lines": [
#     { "sku": "wid-001", "qty": 2, "unitCents": 999 },
#     { "sku": "GAD-002", "qty": 1, "unitCents": 1500 }
#     ],
#     "declared": { "netCents": 3498, "vatCents": 509, "grossCents": 4007 }
#     },
#     {
#     "orderId": "A200",
#     "shipTo": { "country": "US" },
#     "customer": { "email": "bob@example.org", "vatId": null },
#     "lines": [
#     { "sku": "WID-001", "qty": 2, "unitCents": 999 },
#     { "sku": "GAD-002", "qty": 1, "unitCents": 1500 }
#     ],
#     "declared": { "netCents": 3498, "vatCents": 0, "grossCents": 3498 }
#     },
#     {
#     "orderId": "A300",
#     "shipTo": { "country": "NL" },
#     "customer": { "email": "acct@company.nl", "vatId": "NL999999999B01" },
#     "lines": [
#     { "sku": "WID-001", "qty": 2, "unitCents": 999 },
#     { "sku": "GAD-002", "qty": 1, "unitCents": 1500 }
#     ],
#     "declared": { "netCents": 3498, "vatCents": 0, "grossCents": 3498 }
#     },
#     {
#     "orderId": "A301",
#     "shipTo": { "country": "NL" },
#     "customer": { "email": "billing@company.nl", "vatId": "NL999999999B01" },
#     "lines": [
#     { "sku": "WID-001", "qty": 2, "unitCents": 999 },
#     { "sku": "GAD-002", "qty": 1, "unitCents": 1500 }
#     ],
#     "declared": { "netCents": 3498, "vatCents": 0, "grossCents": 3498 }
#     },
#     {
#     "orderId": "A400",
#     "shipTo": { "country": "BE" },
#     "customer": { "email": "ada@other.example", "vatId": null },
#     "lines": [
#     { "sku": "WID-001", "qty": 2, "unitCents": 999 },
#     { "sku": "GAD-002", "qty": 1, "unitCents": 1500 }
#     ],
#     "declared": { "netCents": 3498, "vatCents": 508, "grossCents": 4006 }
#     }
#     ]
#   }"""^^rdf:JSON
#   ?Line = <urn:example:order:A100#line:1>
#   ?LineIndex = 1
#   ?LineJson = """{"sku":"GAD-002","qty":1,"unitCents":1500}"""^^rdf:JSON
#   ?LineUriStr = "urn:example:order:A100#line:1"
#   ?Lines = ("""{"sku":"wid-001","qty":2,"unitCents":999}"""^^rdf:JSON """{"sku":"GAD-002","qty":1,"unitCents":1500}"""^^rdf:JSON)
#   ?NetCents = 1500
#   ?Order = <urn:example:order:A100>
#   ?OrderId = "A100"
#   ?OrderIndex = 0
#   ?OrderJson = """{"orderId":"A100","shipTo":{"country":"BE"},"customer":{"email":"Ada@Example.ORG","vatId":null},"lines":[{"sku":"wid-001","qty":2,"unitCents":999},{"sku":"GAD-002","qty":1,"unitCents":1500}],"declared":{"netCents":3498,"vatCents":509,"grossCents":4007}}"""^^rdf:JSON
#   ?OrderUriStr = "urn:example:order:A100"
#   ?Orders = ("""{"orderId":"A100","shipTo":{"country":"BE"},"customer":{"email":"Ada@Example.ORG","vatId":null},"lines":[{"sku":"wid-001","qty":2,"unitCents":999},{"sku":"GAD-002","qty":1,"unitCents":1500}],"declared":{"netCents":3498,"vatCents":509,"grossCents":4007}}"""^^rdf:JSON """{"orderId":"A200","shipTo":{"country":"US"},"customer":{"email":"bob@example.org","vatId":null},"lines":[{"sku":"WID-001","qty":2,"unitCents":999},{"sku":"GAD-002","qty":1,"unitCents":1500}],"declared":{"netCents":3498,"vatCents":0,"grossCents":3498}}"""^^rdf:JSON """{"orderId":"A300","shipTo":{"country":"NL"},"customer":{"email":"acct@company.nl","vatId":"NL999999999B01"},"lines":[{"sku":"WID-001","qty":2,"unitCents":999},{"sku":"GAD-002","qty":1,"unitCents":1500}],"declared":{"netCents":3498,"vatCents":0,"grossCents":3498}}"""^^rdf:JSON """{"orderId":"A301","shipTo":{"country":"NL"},"customer":{"email":"billing@company.nl","vatId":"NL999999999B01"},"lines":[{"sku":"WID-001","qty":2,"unitCents":999},{"sku":"GAD-002","qty":1,"unitCents":1500}],"declared":{"netCents":3498,"vatCents":0,"grossCents":3498}}"""^^rdf:JSON """{"orderId":"A400","shipTo":{"country":"BE"},"customer":{"email":"ada@other.example","vatId":null},"lines":[{"sku":"WID-001","qty":2,"unitCents":999},{"sku":"GAD-002","qty":1,"unitCents":1500}],"declared":{"netCents":3498,"vatCents":508,"grossCents":4006}}"""^^rdf:JSON)
#   ?Product = ex:Gadget
#   ?Qty = 1
#   ?SkuCat = "GAD-002"
#   ?SkuJson = "GAD-002"
#   ?UnitCents = 1500
# Therefore the derived triple above is entailed by the rules and facts.
# ----------------------------------------------------------------------

<urn:example:order:A100#line:1> ex:unitCents 1500 .

# ----------------------------------------------------------------------
# Proof for derived triple:
#   <urn:example:order:A100#line:1> ex:netCents 1500 .
# It holds because the following instance of the rule body is provable:
#   ex:feed ex:json """{
#     "meta~data": { "batch": "2025-12-18" },
#     "orders": [
#       {
#         "orderId": "A100",
#         "shipTo": { "country": "BE" },
#         "customer": { "email": "Ada@Example.ORG", "vatId": null },
#         "lines": [
#           { "sku": "wid-001", "qty": 2, "unitCents": 999 },
#           { "sku": "GAD-002", "qty": 1, "unitCents": 1500 }
#         ],
#         "declared": { "netCents": 3498, "vatCents": 509, "grossCents": 4007 }
#       },
#       {
#         "orderId": "A200",
#         "shipTo": { "country": "US" },
#         "customer": { "email": "bob@example.org", "vatId": null },
#         "lines": [
#           { "sku": "WID-001", "qty": 2, "unitCents": 999 },
#           { "sku": "GAD-002", "qty": 1, "unitCents": 1500 }
#         ],
#         "declared": { "netCents": 3498, "vatCents": 0, "grossCents": 3498 }
#       },
#       {
#         "orderId": "A300",
#         "shipTo": { "country": "NL" },
#         "customer": { "email": "acct@company.nl", "vatId": "NL999999999B01" },
#         "lines": [
#           { "sku": "WID-001", "qty": 2, "unitCents": 999 },
#           { "sku": "GAD-002", "qty": 1, "unitCents": 1500 }
#         ],
#         "declared": { "netCents": 3498, "vatCents": 0, "grossCents": 3498 }
#       },
#       {
#         "orderId": "A301",
#         "shipTo": { "country": "NL" },
#         "customer": { "email": "billing@company.nl", "vatId": "NL999999999B01" },
#         "lines": [
#           { "sku": "WID-001", "qty": 2, "unitCents": 999 },
#           { "sku": "GAD-002", "qty": 1, "unitCents": 1500 }
#         ],
#         "declared": { "netCents": 3498, "vatCents": 0, "grossCents": 3498 }
#       },
#       {
#         "orderId": "A400",
#         "shipTo": { "country": "BE" },
#         "customer": { "email": "ada@other.example", "vatId": null },
#         "lines": [
#           { "sku": "WID-001", "qty": 2, "unitCents": 999 },
#           { "sku": "GAD-002", "qty": 1, "unitCents": 1500 }
#         ],
#         "declared": { "netCents": 3498, "vatCents": 508, "grossCents": 4006 }
#       }
#     ]
#   }"""^^rdf:JSON .
#   ("""{
#     "meta~data": { "batch": "2025-12-18" },
#     "orders": [
#       {
#         "orderId": "A100",
#         "shipTo": { "country": "BE" },
#         "customer": { "email": "Ada@Example.ORG", "vatId": null },
#         "lines": [
#           { "sku": "wid-001", "qty": 2, "unitCents": 999 },
#           { "sku": "GAD-002", "qty": 1, "unitCents": 1500 }
#         ],
#         "declared": { "netCents": 3498, "vatCents": 509, "grossCents": 4007 }
#       },
#       {
#         "orderId": "A200",
#         "shipTo": { "country": "US" },
#         "customer": { "email": "bob@example.org", "vatId": null },
#         "lines": [
#           { "sku": "WID-001", "qty": 2, "unitCents": 999 },
#           { "sku": "GAD-002", "qty": 1, "unitCents": 1500 }
#         ],
#         "declared": { "netCents": 3498, "vatCents": 0, "grossCents": 3498 }
#       },
#       {
#         "orderId": "A300",
#         "shipTo": { "country": "NL" },
#         "customer": { "email": "acct@company.nl", "vatId": "NL999999999B01" },
#         "lines": [
#           { "sku": "WID-001", "qty": 2, "unitCents": 999 },
#           { "sku": "GAD-002", "qty": 1, "unitCents": 1500 }
#         ],
#         "declared": { "netCents": 3498, "vatCents": 0, "grossCents": 3498 }
#       },
#       {
#         "orderId": "A301",
#         "shipTo": { "country": "NL" },
#         "customer": { "email": "billing@company.nl", "vatId": "NL999999999B01" },
#         "lines": [
#           { "sku": "WID-001", "qty": 2, "unitCents": 999 },
#           { "sku": "GAD-002", "qty": 1, "unitCents": 1500 }
#         ],
#         "declared": { "netCents": 3498, "vatCents": 0, "grossCents": 3498 }
#       },
#       {
#         "orderId": "A400",
#         "shipTo": { "country": "BE" },
#         "customer": { "email": "ada@other.example", "vatId": null },
#         "lines": [
#           { "sku": "WID-001", "qty": 2, "unitCents": 999 },
#           { "sku": "GAD-002", "qty": 1, "unitCents": 1500 }
#         ],
#         "declared": { "netCents": 3498, "vatCents": 508, "grossCents": 4006 }
#       }
#     ]
#   }"""^^rdf:JSON "/orders") string:jsonPointer ("""{"orderId":"A100","shipTo":{"country":"BE"},"customer":{"email":"Ada@Example.ORG","vatId":null},"lines":[{"sku":"wid-001","qty":2,"unitCents":999},{"sku":"GAD-002","qty":1,"unitCents":1500}],"declared":{"netCents":3498,"vatCents":509,"grossCents":4007}}"""^^rdf:JSON """{"orderId":"A200","shipTo":{"country":"US"},"customer":{"email":"bob@example.org","vatId":null},"lines":[{"sku":"WID-001","qty":2,"unitCents":999},{"sku":"GAD-002","qty":1,"unitCents":1500}],"declared":{"netCents":3498,"vatCents":0,"grossCents":3498}}"""^^rdf:JSON """{"orderId":"A300","shipTo":{"country":"NL"},"customer":{"email":"acct@company.nl","vatId":"NL999999999B01"},"lines":[{"sku":"WID-001","qty":2,"unitCents":999},{"sku":"GAD-002","qty":1,"unitCents":1500}],"declared":{"netCents":3498,"vatCents":0,"grossCents":3498}}"""^^rdf:JSON """{"orderId":"A301","shipTo":{"country":"NL"},"customer":{"email":"billing@company.nl","vatId":"NL999999999B01"},"lines":[{"sku":"WID-001","qty":2,"unitCents":999},{"sku":"GAD-002","qty":1,"unitCents":1500}],"declared":{"netCents":3498,"vatCents":0,"grossCents":3498}}"""^^rdf:JSON """{"orderId":"A400","shipTo":{"country":"BE"},"customer":{"email":"ada@other.example","vatId":null},"lines":[{"sku":"WID-001","qty":2,"unitCents":999},{"sku":"GAD-002","qty":1,"unitCents":1500}],"declared":{"netCents":3498,"vatCents":508,"grossCents":4006}}"""^^rdf:JSON) .
#   ("""{"orderId":"A100","shipTo":{"country":"BE"},"customer":{"email":"Ada@Example.ORG","vatId":null},"lines":[{"sku":"wid-001","qty":2,"unitCents":999},{"sku":"GAD-002","qty":1,"unitCents":1500}],"declared":{"netCents":3498,"vatCents":509,"grossCents":4007}}"""^^rdf:JSON """{"orderId":"A200","shipTo":{"country":"US"},"customer":{"email":"bob@example.org","vatId":null},"lines":[{"sku":"WID-001","qty":2,"unitCents":999},{"sku":"GAD-002","qty":1,"unitCents":1500}],"declared":{"netCents":3498,"vatCents":0,"grossCents":3498}}"""^^rdf:JSON """{"orderId":"A300","shipTo":{"country":"NL"},"customer":{"email":"acct@company.nl","vatId":"NL999999999B01"},"lines":[{"sku":"WID-001","qty":2,"unitCents":999},{"sku":"GAD-002","qty":1,"unitCents":1500}],"declared":{"netCents":3498,"vatCents":0,"grossCents":3498}}"""^^rdf:JSON """{"orderId":"A301","shipTo":{"country":"NL"},"customer":{"email":"billing@company.nl","vatId":"NL999999999B01"},"lines":[{"sku":"WID-001","qty":2,"unitCents":999},{"sku":"GAD-002","qty":1,"unitCents":1500}],"declared":{"netCents":3498,"vatCents":0,"grossCents":3498}}"""^^rdf:JSON """{"orderId":"A400","shipTo":{"country":"BE"},"customer":{"email":"ada@other.example","vatId":null},"lines":[{"sku":"WID-001","qty":2,"unitCents":999},{"sku":"GAD-002","qty":1,"unitCents":1500}],"declared":{"netCents":3498,"vatCents":508,"grossCents":4006}}"""^^rdf:JSON) list:iterate (0 """{"orderId":"A100","shipTo":{"country":"BE"},"customer":{"email":"Ada@Example.ORG","vatId":null},"lines":[{"sku":"wid-001","qty":2,"unitCents":999},{"sku":"GAD-002","qty":1,"unitCents":1500}],"declared":{"netCents":3498,"vatCents":509,"grossCents":4007}}"""^^rdf:JSON) .
#   ("""{"orderId":"A100","shipTo":{"country":"BE"},"customer":{"email":"Ada@Example.ORG","vatId":null},"lines":[{"sku":"wid-001","qty":2,"unitCents":999},{"sku":"GAD-002","qty":1,"unitCents":1500}],"declared":{"netCents":3498,"vatCents":509,"grossCents":4007}}"""^^rdf:JSON "/orderId") string:jsonPointer "A100" .
#   ("urn:example:order:%s" "A100") string:format "urn:example:order:A100" .
#   <urn:example:order:A100> log:uri "urn:example:order:A100" .
#   ("""{"orderId":"A100","shipTo":{"country":"BE"},"customer":{"email":"Ada@Example.ORG","vatId":null},"lines":[{"sku":"wid-001","qty":2,"unitCents":999},{"sku":"GAD-002","qty":1,"unitCents":1500}],"declared":{"netCents":3498,"vatCents":509,"grossCents":4007}}"""^^rdf:JSON "/lines") string:jsonPointer ("""{"sku":"wid-001","qty":2,"unitCents":999}"""^^rdf:JSON """{"sku":"GAD-002","qty":1,"unitCents":1500}"""^^rdf:JSON) .
#   ("""{"sku":"wid-001","qty":2,"unitCents":999}"""^^rdf:JSON """{"sku":"GAD-002","qty":1,"unitCents":1500}"""^^rdf:JSON) list:iterate (1 """{"sku":"GAD-002","qty":1,"unitCents":1500}"""^^rdf:JSON) .
#   ("""{"sku":"GAD-002","qty":1,"unitCents":1500}"""^^rdf:JSON "/sku") string:jsonPointer "GAD-002" .
#   ("""{"sku":"GAD-002","qty":1,"unitCents":1500}"""^^rdf:JSON "/qty") string:jsonPointer 1 .
#   ("""{"sku":"GAD-002","qty":1,"unitCents":1500}"""^^rdf:JSON "/unitCents") string:jsonPointer 1500 .
#   ex:Gadget a ex:Product .
#   ex:Gadget ex:sku "GAD-002" .
#   (1 1500) math:product 1500 .
#   ("urn:example:order:%s#line:%s" "A100" 1) string:format "urn:example:order:A100#line:1" .
#   <urn:example:order:A100#line:1> log:uri "urn:example:order:A100#line:1" .
#   "GAD-002" string:equalIgnoringCase "GAD-002" .
# via the schematic forward rule:
#   {
#     ex:feed ex:json ?J .
#     (?J "/orders") string:jsonPointer ?Orders .
#     ?Orders list:iterate (?OrderIndex ?OrderJson) .
#     (?OrderJson "/orderId") string:jsonPointer ?OrderId .
#     ("urn:example:order:%s" ?OrderId) string:format ?OrderUriStr .
#     ?Order log:uri ?OrderUriStr .
#     (?OrderJson "/lines") string:jsonPointer ?Lines .
#     ?Lines list:iterate (?LineIndex ?LineJson) .
#     (?LineJson "/sku") string:jsonPointer ?SkuJson .
#     (?LineJson "/qty") string:jsonPointer ?Qty .
#     (?LineJson "/unitCents") string:jsonPointer ?UnitCents .
#     ?Product a ex:Product .
#     ?Product ex:sku ?SkuCat .
#     (?Qty ?UnitCents) math:product ?NetCents .
#     ("urn:example:order:%s#line:%s" ?OrderId ?LineIndex) string:format ?LineUriStr .
#     ?Line log:uri ?LineUriStr .
#     ?SkuJson string:equalIgnoringCase ?SkuCat .
#   } => {
#     ?Order ex:line ?Line .
#     ?Line a ex:OrderLine .
#     ?Line ex:lineIndex ?LineIndex .
#     ?Line ex:product ?Product .
#     ?Line ex:sku ?SkuCat .
#     ?Line ex:qty ?Qty .
#     ?Line ex:unitCents ?UnitCents .
#     ?Line ex:netCents ?NetCents .
#   } .
# with substitution (on rule variables):
#   ?J = """{
#     "meta~data": { "batch": "2025-12-18" },
#     "orders": [
#     {
#     "orderId": "A100",
#     "shipTo": { "country": "BE" },
#     "customer": { "email": "Ada@Example.ORG", "vatId": null },
#     "lines": [
#     { "sku": "wid-001", "qty": 2, "unitCents": 999 },
#     { "sku": "GAD-002", "qty": 1, "unitCents": 1500 }
#     ],
#     "declared": { "netCents": 3498, "vatCents": 509, "grossCents": 4007 }
#     },
#     {
#     "orderId": "A200",
#     "shipTo": { "country": "US" },
#     "customer": { "email": "bob@example.org", "vatId": null },
#     "lines": [
#     { "sku": "WID-001", "qty": 2, "unitCents": 999 },
#     { "sku": "GAD-002", "qty": 1, "unitCents": 1500 }
#     ],
#     "declared": { "netCents": 3498, "vatCents": 0, "grossCents": 3498 }
#     },
#     {
#     "orderId": "A300",
#     "shipTo": { "country": "NL" },
#     "customer": { "email": "acct@company.nl", "vatId": "NL999999999B01" },
#     "lines": [
#     { "sku": "WID-001", "qty": 2, "unitCents": 999 },
#     { "sku": "GAD-002", "qty": 1, "unitCents": 1500 }
#     ],
#     "declared": { "netCents": 3498, "vatCents": 0, "grossCents": 3498 }
#     },
#     {
#     "orderId": "A301",
#     "shipTo": { "country": "NL" },
#     "customer": { "email": "billing@company.nl", "vatId": "NL999999999B01" },
#     "lines": [
#     { "sku": "WID-001", "qty": 2, "unitCents": 999 },
#     { "sku": "GAD-002", "qty": 1, "unitCents": 1500 }
#     ],
#     "declared": { "netCents": 3498, "vatCents": 0, "grossCents": 3498 }
#     },
#     {
#     "orderId": "A400",
#     "shipTo": { "country": "BE" },
#     "customer": { "email": "ada@other.example", "vatId": null },
#     "lines": [
#     { "sku": "WID-001", "qty": 2, "unitCents": 999 },
#     { "sku": "GAD-002", "qty": 1, "unitCents": 1500 }
#     ],
#     "declared": { "netCents": 3498, "vatCents": 508, "grossCents": 4006 }
#     }
#     ]
#   }"""^^rdf:JSON
#   ?Line = <urn:example:order:A100#line:1>
#   ?LineIndex = 1
#   ?LineJson = """{"sku":"GAD-002","qty":1,"unitCents":1500}"""^^rdf:JSON
#   ?LineUriStr = "urn:example:order:A100#line:1"
#   ?Lines = ("""{"sku":"wid-001","qty":2,"unitCents":999}"""^^rdf:JSON """{"sku":"GAD-002","qty":1,"unitCents":1500}"""^^rdf:JSON)
#   ?NetCents = 1500
#   ?Order = <urn:example:order:A100>
#   ?OrderId = "A100"
#   ?OrderIndex = 0
#   ?OrderJson = """{"orderId":"A100","shipTo":{"country":"BE"},"customer":{"email":"Ada@Example.ORG","vatId":null},"lines":[{"sku":"wid-001","qty":2,"unitCents":999},{"sku":"GAD-002","qty":1,"unitCents":1500}],"declared":{"netCents":3498,"vatCents":509,"grossCents":4007}}"""^^rdf:JSON
#   ?OrderUriStr = "urn:example:order:A100"
#   ?Orders = ("""{"orderId":"A100","shipTo":{"country":"BE"},"customer":{"email":"Ada@Example.ORG","vatId":null},"lines":[{"sku":"wid-001","qty":2,"unitCents":999},{"sku":"GAD-002","qty":1,"unitCents":1500}],"declared":{"netCents":3498,"vatCents":509,"grossCents":4007}}"""^^rdf:JSON """{"orderId":"A200","shipTo":{"country":"US"},"customer":{"email":"bob@example.org","vatId":null},"lines":[{"sku":"WID-001","qty":2,"unitCents":999},{"sku":"GAD-002","qty":1,"unitCents":1500}],"declared":{"netCents":3498,"vatCents":0,"grossCents":3498}}"""^^rdf:JSON """{"orderId":"A300","shipTo":{"country":"NL"},"customer":{"email":"acct@company.nl","vatId":"NL999999999B01"},"lines":[{"sku":"WID-001","qty":2,"unitCents":999},{"sku":"GAD-002","qty":1,"unitCents":1500}],"declared":{"netCents":3498,"vatCents":0,"grossCents":3498}}"""^^rdf:JSON """{"orderId":"A301","shipTo":{"country":"NL"},"customer":{"email":"billing@company.nl","vatId":"NL999999999B01"},"lines":[{"sku":"WID-001","qty":2,"unitCents":999},{"sku":"GAD-002","qty":1,"unitCents":1500}],"declared":{"netCents":3498,"vatCents":0,"grossCents":3498}}"""^^rdf:JSON """{"orderId":"A400","shipTo":{"country":"BE"},"customer":{"email":"ada@other.example","vatId":null},"lines":[{"sku":"WID-001","qty":2,"unitCents":999},{"sku":"GAD-002","qty":1,"unitCents":1500}],"declared":{"netCents":3498,"vatCents":508,"grossCents":4006}}"""^^rdf:JSON)
#   ?Product = ex:Gadget
#   ?Qty = 1
#   ?SkuCat = "GAD-002"
#   ?SkuJson = "GAD-002"
#   ?UnitCents = 1500
# Therefore the derived triple above is entailed by the rules and facts.
# ----------------------------------------------------------------------

<urn:example:order:A100#line:1> ex:netCents 1500 .

# ----------------------------------------------------------------------
# Proof for derived triple:
#   <urn:example:order:A100> ex:line <urn:example:order:A100#line:0> .
# It holds because the following instance of the rule body is provable:
#   ex:feed ex:json """{
#     "meta~data": { "batch": "2025-12-18" },
#     "orders": [
#       {
#         "orderId": "A100",
#         "shipTo": { "country": "BE" },
#         "customer": { "email": "Ada@Example.ORG", "vatId": null },
#         "lines": [
#           { "sku": "wid-001", "qty": 2, "unitCents": 999 },
#           { "sku": "GAD-002", "qty": 1, "unitCents": 1500 }
#         ],
#         "declared": { "netCents": 3498, "vatCents": 509, "grossCents": 4007 }
#       },
#       {
#         "orderId": "A200",
#         "shipTo": { "country": "US" },
#         "customer": { "email": "bob@example.org", "vatId": null },
#         "lines": [
#           { "sku": "WID-001", "qty": 2, "unitCents": 999 },
#           { "sku": "GAD-002", "qty": 1, "unitCents": 1500 }
#         ],
#         "declared": { "netCents": 3498, "vatCents": 0, "grossCents": 3498 }
#       },
#       {
#         "orderId": "A300",
#         "shipTo": { "country": "NL" },
#         "customer": { "email": "acct@company.nl", "vatId": "NL999999999B01" },
#         "lines": [
#           { "sku": "WID-001", "qty": 2, "unitCents": 999 },
#           { "sku": "GAD-002", "qty": 1, "unitCents": 1500 }
#         ],
#         "declared": { "netCents": 3498, "vatCents": 0, "grossCents": 3498 }
#       },
#       {
#         "orderId": "A301",
#         "shipTo": { "country": "NL" },
#         "customer": { "email": "billing@company.nl", "vatId": "NL999999999B01" },
#         "lines": [
#           { "sku": "WID-001", "qty": 2, "unitCents": 999 },
#           { "sku": "GAD-002", "qty": 1, "unitCents": 1500 }
#         ],
#         "declared": { "netCents": 3498, "vatCents": 0, "grossCents": 3498 }
#       },
#       {
#         "orderId": "A400",
#         "shipTo": { "country": "BE" },
#         "customer": { "email": "ada@other.example", "vatId": null },
#         "lines": [
#           { "sku": "WID-001", "qty": 2, "unitCents": 999 },
#           { "sku": "GAD-002", "qty": 1, "unitCents": 1500 }
#         ],
#         "declared": { "netCents": 3498, "vatCents": 508, "grossCents": 4006 }
#       }
#     ]
#   }"""^^rdf:JSON .
#   ("""{
#     "meta~data": { "batch": "2025-12-18" },
#     "orders": [
#       {
#         "orderId": "A100",
#         "shipTo": { "country": "BE" },
#         "customer": { "email": "Ada@Example.ORG", "vatId": null },
#         "lines": [
#           { "sku": "wid-001", "qty": 2, "unitCents": 999 },
#           { "sku": "GAD-002", "qty": 1, "unitCents": 1500 }
#         ],
#         "declared": { "netCents": 3498, "vatCents": 509, "grossCents": 4007 }
#       },
#       {
#         "orderId": "A200",
#         "shipTo": { "country": "US" },
#         "customer": { "email": "bob@example.org", "vatId": null },
#         "lines": [
#           { "sku": "WID-001", "qty": 2, "unitCents": 999 },
#           { "sku": "GAD-002", "qty": 1, "unitCents": 1500 }
#         ],
#         "declared": { "netCents": 3498, "vatCents": 0, "grossCents": 3498 }
#       },
#       {
#         "orderId": "A300",
#         "shipTo": { "country": "NL" },
#         "customer": { "email": "acct@company.nl", "vatId": "NL999999999B01" },
#         "lines": [
#           { "sku": "WID-001", "qty": 2, "unitCents": 999 },
#           { "sku": "GAD-002", "qty": 1, "unitCents": 1500 }
#         ],
#         "declared": { "netCents": 3498, "vatCents": 0, "grossCents": 3498 }
#       },
#       {
#         "orderId": "A301",
#         "shipTo": { "country": "NL" },
#         "customer": { "email": "billing@company.nl", "vatId": "NL999999999B01" },
#         "lines": [
#           { "sku": "WID-001", "qty": 2, "unitCents": 999 },
#           { "sku": "GAD-002", "qty": 1, "unitCents": 1500 }
#         ],
#         "declared": { "netCents": 3498, "vatCents": 0, "grossCents": 3498 }
#       },
#       {
#         "orderId": "A400",
#         "shipTo": { "country": "BE" },
#         "customer": { "email": "ada@other.example", "vatId": null },
#         "lines": [
#           { "sku": "WID-001", "qty": 2, "unitCents": 999 },
#           { "sku": "GAD-002", "qty": 1, "unitCents": 1500 }
#         ],
#         "declared": { "netCents": 3498, "vatCents": 508, "grossCents": 4006 }
#       }
#     ]
#   }"""^^rdf:JSON "/orders") string:jsonPointer ("""{"orderId":"A100","shipTo":{"country":"BE"},"customer":{"email":"Ada@Example.ORG","vatId":null},"lines":[{"sku":"wid-001","qty":2,"unitCents":999},{"sku":"GAD-002","qty":1,"unitCents":1500}],"declared":{"netCents":3498,"vatCents":509,"grossCents":4007}}"""^^rdf:JSON """{"orderId":"A200","shipTo":{"country":"US"},"customer":{"email":"bob@example.org","vatId":null},"lines":[{"sku":"WID-001","qty":2,"unitCents":999},{"sku":"GAD-002","qty":1,"unitCents":1500}],"declared":{"netCents":3498,"vatCents":0,"grossCents":3498}}"""^^rdf:JSON """{"orderId":"A300","shipTo":{"country":"NL"},"customer":{"email":"acct@company.nl","vatId":"NL999999999B01"},"lines":[{"sku":"WID-001","qty":2,"unitCents":999},{"sku":"GAD-002","qty":1,"unitCents":1500}],"declared":{"netCents":3498,"vatCents":0,"grossCents":3498}}"""^^rdf:JSON """{"orderId":"A301","shipTo":{"country":"NL"},"customer":{"email":"billing@company.nl","vatId":"NL999999999B01"},"lines":[{"sku":"WID-001","qty":2,"unitCents":999},{"sku":"GAD-002","qty":1,"unitCents":1500}],"declared":{"netCents":3498,"vatCents":0,"grossCents":3498}}"""^^rdf:JSON """{"orderId":"A400","shipTo":{"country":"BE"},"customer":{"email":"ada@other.example","vatId":null},"lines":[{"sku":"WID-001","qty":2,"unitCents":999},{"sku":"GAD-002","qty":1,"unitCents":1500}],"declared":{"netCents":3498,"vatCents":508,"grossCents":4006}}"""^^rdf:JSON) .
#   ("""{"orderId":"A100","shipTo":{"country":"BE"},"customer":{"email":"Ada@Example.ORG","vatId":null},"lines":[{"sku":"wid-001","qty":2,"unitCents":999},{"sku":"GAD-002","qty":1,"unitCents":1500}],"declared":{"netCents":3498,"vatCents":509,"grossCents":4007}}"""^^rdf:JSON """{"orderId":"A200","shipTo":{"country":"US"},"customer":{"email":"bob@example.org","vatId":null},"lines":[{"sku":"WID-001","qty":2,"unitCents":999},{"sku":"GAD-002","qty":1,"unitCents":1500}],"declared":{"netCents":3498,"vatCents":0,"grossCents":3498}}"""^^rdf:JSON """{"orderId":"A300","shipTo":{"country":"NL"},"customer":{"email":"acct@company.nl","vatId":"NL999999999B01"},"lines":[{"sku":"WID-001","qty":2,"unitCents":999},{"sku":"GAD-002","qty":1,"unitCents":1500}],"declared":{"netCents":3498,"vatCents":0,"grossCents":3498}}"""^^rdf:JSON """{"orderId":"A301","shipTo":{"country":"NL"},"customer":{"email":"billing@company.nl","vatId":"NL999999999B01"},"lines":[{"sku":"WID-001","qty":2,"unitCents":999},{"sku":"GAD-002","qty":1,"unitCents":1500}],"declared":{"netCents":3498,"vatCents":0,"grossCents":3498}}"""^^rdf:JSON """{"orderId":"A400","shipTo":{"country":"BE"},"customer":{"email":"ada@other.example","vatId":null},"lines":[{"sku":"WID-001","qty":2,"unitCents":999},{"sku":"GAD-002","qty":1,"unitCents":1500}],"declared":{"netCents":3498,"vatCents":508,"grossCents":4006}}"""^^rdf:JSON) list:iterate (0 """{"orderId":"A100","shipTo":{"country":"BE"},"customer":{"email":"Ada@Example.ORG","vatId":null},"lines":[{"sku":"wid-001","qty":2,"unitCents":999},{"sku":"GAD-002","qty":1,"unitCents":1500}],"declared":{"netCents":3498,"vatCents":509,"grossCents":4007}}"""^^rdf:JSON) .
#   ("""{"orderId":"A100","shipTo":{"country":"BE"},"customer":{"email":"Ada@Example.ORG","vatId":null},"lines":[{"sku":"wid-001","qty":2,"unitCents":999},{"sku":"GAD-002","qty":1,"unitCents":1500}],"declared":{"netCents":3498,"vatCents":509,"grossCents":4007}}"""^^rdf:JSON "/orderId") string:jsonPointer "A100" .
#   ("urn:example:order:%s" "A100") string:format "urn:example:order:A100" .
#   <urn:example:order:A100> log:uri "urn:example:order:A100" .
#   ("""{"orderId":"A100","shipTo":{"country":"BE"},"customer":{"email":"Ada@Example.ORG","vatId":null},"lines":[{"sku":"wid-001","qty":2,"unitCents":999},{"sku":"GAD-002","qty":1,"unitCents":1500}],"declared":{"netCents":3498,"vatCents":509,"grossCents":4007}}"""^^rdf:JSON "/lines") string:jsonPointer ("""{"sku":"wid-001","qty":2,"unitCents":999}"""^^rdf:JSON """{"sku":"GAD-002","qty":1,"unitCents":1500}"""^^rdf:JSON) .
#   ("""{"sku":"wid-001","qty":2,"unitCents":999}"""^^rdf:JSON """{"sku":"GAD-002","qty":1,"unitCents":1500}"""^^rdf:JSON) list:iterate (0 """{"sku":"wid-001","qty":2,"unitCents":999}"""^^rdf:JSON) .
#   ("""{"sku":"wid-001","qty":2,"unitCents":999}"""^^rdf:JSON "/sku") string:jsonPointer "wid-001" .
#   ("""{"sku":"wid-001","qty":2,"unitCents":999}"""^^rdf:JSON "/qty") string:jsonPointer 2 .
#   ("""{"sku":"wid-001","qty":2,"unitCents":999}"""^^rdf:JSON "/unitCents") string:jsonPointer 999 .
#   ex:Widget a ex:Product .
#   ex:Widget ex:sku "WID-001" .
#   (2 999) math:product 1998 .
#   ("urn:example:order:%s#line:%s" "A100" 0) string:format "urn:example:order:A100#line:0" .
#   <urn:example:order:A100#line:0> log:uri "urn:example:order:A100#line:0" .
#   "wid-001" string:equalIgnoringCase "WID-001" .
# via the schematic forward rule:
#   {
#     ex:feed ex:json ?J .
#     (?J "/orders") string:jsonPointer ?Orders .
#     ?Orders list:iterate (?OrderIndex ?OrderJson) .
#     (?OrderJson "/orderId") string:jsonPointer ?OrderId .
#     ("urn:example:order:%s" ?OrderId) string:format ?OrderUriStr .
#     ?Order log:uri ?OrderUriStr .
#     (?OrderJson "/lines") string:jsonPointer ?Lines .
#     ?Lines list:iterate (?LineIndex ?LineJson) .
#     (?LineJson "/sku") string:jsonPointer ?SkuJson .
#     (?LineJson "/qty") string:jsonPointer ?Qty .
#     (?LineJson "/unitCents") string:jsonPointer ?UnitCents .
#     ?Product a ex:Product .
#     ?Product ex:sku ?SkuCat .
#     (?Qty ?UnitCents) math:product ?NetCents .
#     ("urn:example:order:%s#line:%s" ?OrderId ?LineIndex) string:format ?LineUriStr .
#     ?Line log:uri ?LineUriStr .
#     ?SkuJson string:equalIgnoringCase ?SkuCat .
#   } => {
#     ?Order ex:line ?Line .
#     ?Line a ex:OrderLine .
#     ?Line ex:lineIndex ?LineIndex .
#     ?Line ex:product ?Product .
#     ?Line ex:sku ?SkuCat .
#     ?Line ex:qty ?Qty .
#     ?Line ex:unitCents ?UnitCents .
#     ?Line ex:netCents ?NetCents .
#   } .
# with substitution (on rule variables):
#   ?J = """{
#     "meta~data": { "batch": "2025-12-18" },
#     "orders": [
#     {
#     "orderId": "A100",
#     "shipTo": { "country": "BE" },
#     "customer": { "email": "Ada@Example.ORG", "vatId": null },
#     "lines": [
#     { "sku": "wid-001", "qty": 2, "unitCents": 999 },
#     { "sku": "GAD-002", "qty": 1, "unitCents": 1500 }
#     ],
#     "declared": { "netCents": 3498, "vatCents": 509, "grossCents": 4007 }
#     },
#     {
#     "orderId": "A200",
#     "shipTo": { "country": "US" },
#     "customer": { "email": "bob@example.org", "vatId": null },
#     "lines": [
#     { "sku": "WID-001", "qty": 2, "unitCents": 999 },
#     { "sku": "GAD-002", "qty": 1, "unitCents": 1500 }
#     ],
#     "declared": { "netCents": 3498, "vatCents": 0, "grossCents": 3498 }
#     },
#     {
#     "orderId": "A300",
#     "shipTo": { "country": "NL" },
#     "customer": { "email": "acct@company.nl", "vatId": "NL999999999B01" },
#     "lines": [
#     { "sku": "WID-001", "qty": 2, "unitCents": 999 },
#     { "sku": "GAD-002", "qty": 1, "unitCents": 1500 }
#     ],
#     "declared": { "netCents": 3498, "vatCents": 0, "grossCents": 3498 }
#     },
#     {
#     "orderId": "A301",
#     "shipTo": { "country": "NL" },
#     "customer": { "email": "billing@company.nl", "vatId": "NL999999999B01" },
#     "lines": [
#     { "sku": "WID-001", "qty": 2, "unitCents": 999 },
#     { "sku": "GAD-002", "qty": 1, "unitCents": 1500 }
#     ],
#     "declared": { "netCents": 3498, "vatCents": 0, "grossCents": 3498 }
#     },
#     {
#     "orderId": "A400",
#     "shipTo": { "country": "BE" },
#     "customer": { "email": "ada@other.example", "vatId": null },
#     "lines": [
#     { "sku": "WID-001", "qty": 2, "unitCents": 999 },
#     { "sku": "GAD-002", "qty": 1, "unitCents": 1500 }
#     ],
#     "declared": { "netCents": 3498, "vatCents": 508, "grossCents": 4006 }
#     }
#     ]
#   }"""^^rdf:JSON
#   ?Line = <urn:example:order:A100#line:0>
#   ?LineIndex = 0
#   ?LineJson = """{"sku":"wid-001","qty":2,"unitCents":999}"""^^rdf:JSON
#   ?LineUriStr = "urn:example:order:A100#line:0"
#   ?Lines = ("""{"sku":"wid-001","qty":2,"unitCents":999}"""^^rdf:JSON """{"sku":"GAD-002","qty":1,"unitCents":1500}"""^^rdf:JSON)
#   ?NetCents = 1998
#   ?Order = <urn:example:order:A100>
#   ?OrderId = "A100"
#   ?OrderIndex = 0
#   ?OrderJson = """{"orderId":"A100","shipTo":{"country":"BE"},"customer":{"email":"Ada@Example.ORG","vatId":null},"lines":[{"sku":"wid-001","qty":2,"unitCents":999},{"sku":"GAD-002","qty":1,"unitCents":1500}],"declared":{"netCents":3498,"vatCents":509,"grossCents":4007}}"""^^rdf:JSON
#   ?OrderUriStr = "urn:example:order:A100"
#   ?Orders = ("""{"orderId":"A100","shipTo":{"country":"BE"},"customer":{"email":"Ada@Example.ORG","vatId":null},"lines":[{"sku":"wid-001","qty":2,"unitCents":999},{"sku":"GAD-002","qty":1,"unitCents":1500}],"declared":{"netCents":3498,"vatCents":509,"grossCents":4007}}"""^^rdf:JSON """{"orderId":"A200","shipTo":{"country":"US"},"customer":{"email":"bob@example.org","vatId":null},"lines":[{"sku":"WID-001","qty":2,"unitCents":999},{"sku":"GAD-002","qty":1,"unitCents":1500}],"declared":{"netCents":3498,"vatCents":0,"grossCents":3498}}"""^^rdf:JSON """{"orderId":"A300","shipTo":{"country":"NL"},"customer":{"email":"acct@company.nl","vatId":"NL999999999B01"},"lines":[{"sku":"WID-001","qty":2,"unitCents":999},{"sku":"GAD-002","qty":1,"unitCents":1500}],"declared":{"netCents":3498,"vatCents":0,"grossCents":3498}}"""^^rdf:JSON """{"orderId":"A301","shipTo":{"country":"NL"},"customer":{"email":"billing@company.nl","vatId":"NL999999999B01"},"lines":[{"sku":"WID-001","qty":2,"unitCents":999},{"sku":"GAD-002","qty":1,"unitCents":1500}],"declared":{"netCents":3498,"vatCents":0,"grossCents":3498}}"""^^rdf:JSON """{"orderId":"A400","shipTo":{"country":"BE"},"customer":{"email":"ada@other.example","vatId":null},"lines":[{"sku":"WID-001","qty":2,"unitCents":999},{"sku":"GAD-002","qty":1,"unitCents":1500}],"declared":{"netCents":3498,"vatCents":508,"grossCents":4006}}"""^^rdf:JSON)
#   ?Product = ex:Widget
#   ?Qty = 2
#   ?SkuCat = "WID-001"
#   ?SkuJson = "wid-001"
#   ?UnitCents = 999
# Therefore the derived triple above is entailed by the rules and facts.
# ----------------------------------------------------------------------

<urn:example:order:A100> ex:line <urn:example:order:A100#line:0> .

# ----------------------------------------------------------------------
# Proof for derived triple:
#   <urn:example:order:A100#line:0> a ex:OrderLine .
# It holds because the following instance of the rule body is provable:
#   ex:feed ex:json """{
#     "meta~data": { "batch": "2025-12-18" },
#     "orders": [
#       {
#         "orderId": "A100",
#         "shipTo": { "country": "BE" },
#         "customer": { "email": "Ada@Example.ORG", "vatId": null },
#         "lines": [
#           { "sku": "wid-001", "qty": 2, "unitCents": 999 },
#           { "sku": "GAD-002", "qty": 1, "unitCents": 1500 }
#         ],
#         "declared": { "netCents": 3498, "vatCents": 509, "grossCents": 4007 }
#       },
#       {
#         "orderId": "A200",
#         "shipTo": { "country": "US" },
#         "customer": { "email": "bob@example.org", "vatId": null },
#         "lines": [
#           { "sku": "WID-001", "qty": 2, "unitCents": 999 },
#           { "sku": "GAD-002", "qty": 1, "unitCents": 1500 }
#         ],
#         "declared": { "netCents": 3498, "vatCents": 0, "grossCents": 3498 }
#       },
#       {
#         "orderId": "A300",
#         "shipTo": { "country": "NL" },
#         "customer": { "email": "acct@company.nl", "vatId": "NL999999999B01" },
#         "lines": [
#           { "sku": "WID-001", "qty": 2, "unitCents": 999 },
#           { "sku": "GAD-002", "qty": 1, "unitCents": 1500 }
#         ],
#         "declared": { "netCents": 3498, "vatCents": 0, "grossCents": 3498 }
#       },
#       {
#         "orderId": "A301",
#         "shipTo": { "country": "NL" },
#         "customer": { "email": "billing@company.nl", "vatId": "NL999999999B01" },
#         "lines": [
#           { "sku": "WID-001", "qty": 2, "unitCents": 999 },
#           { "sku": "GAD-002", "qty": 1, "unitCents": 1500 }
#         ],
#         "declared": { "netCents": 3498, "vatCents": 0, "grossCents": 3498 }
#       },
#       {
#         "orderId": "A400",
#         "shipTo": { "country": "BE" },
#         "customer": { "email": "ada@other.example", "vatId": null },
#         "lines": [
#           { "sku": "WID-001", "qty": 2, "unitCents": 999 },
#           { "sku": "GAD-002", "qty": 1, "unitCents": 1500 }
#         ],
#         "declared": { "netCents": 3498, "vatCents": 508, "grossCents": 4006 }
#       }
#     ]
#   }"""^^rdf:JSON .
#   ("""{
#     "meta~data": { "batch": "2025-12-18" },
#     "orders": [
#       {
#         "orderId": "A100",
#         "shipTo": { "country": "BE" },
#         "customer": { "email": "Ada@Example.ORG", "vatId": null },
#         "lines": [
#           { "sku": "wid-001", "qty": 2, "unitCents": 999 },
#           { "sku": "GAD-002", "qty": 1, "unitCents": 1500 }
#         ],
#         "declared": { "netCents": 3498, "vatCents": 509, "grossCents": 4007 }
#       },
#       {
#         "orderId": "A200",
#         "shipTo": { "country": "US" },
#         "customer": { "email": "bob@example.org", "vatId": null },
#         "lines": [
#           { "sku": "WID-001", "qty": 2, "unitCents": 999 },
#           { "sku": "GAD-002", "qty": 1, "unitCents": 1500 }
#         ],
#         "declared": { "netCents": 3498, "vatCents": 0, "grossCents": 3498 }
#       },
#       {
#         "orderId": "A300",
#         "shipTo": { "country": "NL" },
#         "customer": { "email": "acct@company.nl", "vatId": "NL999999999B01" },
#         "lines": [
#           { "sku": "WID-001", "qty": 2, "unitCents": 999 },
#           { "sku": "GAD-002", "qty": 1, "unitCents": 1500 }
#         ],
#         "declared": { "netCents": 3498, "vatCents": 0, "grossCents": 3498 }
#       },
#       {
#         "orderId": "A301",
#         "shipTo": { "country": "NL" },
#         "customer": { "email": "billing@company.nl", "vatId": "NL999999999B01" },
#         "lines": [
#           { "sku": "WID-001", "qty": 2, "unitCents": 999 },
#           { "sku": "GAD-002", "qty": 1, "unitCents": 1500 }
#         ],
#         "declared": { "netCents": 3498, "vatCents": 0, "grossCents": 3498 }
#       },
#       {
#         "orderId": "A400",
#         "shipTo": { "country": "BE" },
#         "customer": { "email": "ada@other.example", "vatId": null },
#         "lines": [
#           { "sku": "WID-001", "qty": 2, "unitCents": 999 },
#           { "sku": "GAD-002", "qty": 1, "unitCents": 1500 }
#         ],
#         "declared": { "netCents": 3498, "vatCents": 508, "grossCents": 4006 }
#       }
#     ]
#   }"""^^rdf:JSON "/orders") string:jsonPointer ("""{"orderId":"A100","shipTo":{"country":"BE"},"customer":{"email":"Ada@Example.ORG","vatId":null},"lines":[{"sku":"wid-001","qty":2,"unitCents":999},{"sku":"GAD-002","qty":1,"unitCents":1500}],"declared":{"netCents":3498,"vatCents":509,"grossCents":4007}}"""^^rdf:JSON """{"orderId":"A200","shipTo":{"country":"US"},"customer":{"email":"bob@example.org","vatId":null},"lines":[{"sku":"WID-001","qty":2,"unitCents":999},{"sku":"GAD-002","qty":1,"unitCents":1500}],"declared":{"netCents":3498,"vatCents":0,"grossCents":3498}}"""^^rdf:JSON """{"orderId":"A300","shipTo":{"country":"NL"},"customer":{"email":"acct@company.nl","vatId":"NL999999999B01"},"lines":[{"sku":"WID-001","qty":2,"unitCents":999},{"sku":"GAD-002","qty":1,"unitCents":1500}],"declared":{"netCents":3498,"vatCents":0,"grossCents":3498}}"""^^rdf:JSON """{"orderId":"A301","shipTo":{"country":"NL"},"customer":{"email":"billing@company.nl","vatId":"NL999999999B01"},"lines":[{"sku":"WID-001","qty":2,"unitCents":999},{"sku":"GAD-002","qty":1,"unitCents":1500}],"declared":{"netCents":3498,"vatCents":0,"grossCents":3498}}"""^^rdf:JSON """{"orderId":"A400","shipTo":{"country":"BE"},"customer":{"email":"ada@other.example","vatId":null},"lines":[{"sku":"WID-001","qty":2,"unitCents":999},{"sku":"GAD-002","qty":1,"unitCents":1500}],"declared":{"netCents":3498,"vatCents":508,"grossCents":4006}}"""^^rdf:JSON) .
#   ("""{"orderId":"A100","shipTo":{"country":"BE"},"customer":{"email":"Ada@Example.ORG","vatId":null},"lines":[{"sku":"wid-001","qty":2,"unitCents":999},{"sku":"GAD-002","qty":1,"unitCents":1500}],"declared":{"netCents":3498,"vatCents":509,"grossCents":4007}}"""^^rdf:JSON """{"orderId":"A200","shipTo":{"country":"US"},"customer":{"email":"bob@example.org","vatId":null},"lines":[{"sku":"WID-001","qty":2,"unitCents":999},{"sku":"GAD-002","qty":1,"unitCents":1500}],"declared":{"netCents":3498,"vatCents":0,"grossCents":3498}}"""^^rdf:JSON """{"orderId":"A300","shipTo":{"country":"NL"},"customer":{"email":"acct@company.nl","vatId":"NL999999999B01"},"lines":[{"sku":"WID-001","qty":2,"unitCents":999},{"sku":"GAD-002","qty":1,"unitCents":1500}],"declared":{"netCents":3498,"vatCents":0,"grossCents":3498}}"""^^rdf:JSON """{"orderId":"A301","shipTo":{"country":"NL"},"customer":{"email":"billing@company.nl","vatId":"NL999999999B01"},"lines":[{"sku":"WID-001","qty":2,"unitCents":999},{"sku":"GAD-002","qty":1,"unitCents":1500}],"declared":{"netCents":3498,"vatCents":0,"grossCents":3498}}"""^^rdf:JSON """{"orderId":"A400","shipTo":{"country":"BE"},"customer":{"email":"ada@other.example","vatId":null},"lines":[{"sku":"WID-001","qty":2,"unitCents":999},{"sku":"GAD-002","qty":1,"unitCents":1500}],"declared":{"netCents":3498,"vatCents":508,"grossCents":4006}}"""^^rdf:JSON) list:iterate (0 """{"orderId":"A100","shipTo":{"country":"BE"},"customer":{"email":"Ada@Example.ORG","vatId":null},"lines":[{"sku":"wid-001","qty":2,"unitCents":999},{"sku":"GAD-002","qty":1,"unitCents":1500}],"declared":{"netCents":3498,"vatCents":509,"grossCents":4007}}"""^^rdf:JSON) .
#   ("""{"orderId":"A100","shipTo":{"country":"BE"},"customer":{"email":"Ada@Example.ORG","vatId":null},"lines":[{"sku":"wid-001","qty":2,"unitCents":999},{"sku":"GAD-002","qty":1,"unitCents":1500}],"declared":{"netCents":3498,"vatCents":509,"grossCents":4007}}"""^^rdf:JSON "/orderId") string:jsonPointer "A100" .
#   ("urn:example:order:%s" "A100") string:format "urn:example:order:A100" .
#   <urn:example:order:A100> log:uri "urn:example:order:A100" .
#   ("""{"orderId":"A100","shipTo":{"country":"BE"},"customer":{"email":"Ada@Example.ORG","vatId":null},"lines":[{"sku":"wid-001","qty":2,"unitCents":999},{"sku":"GAD-002","qty":1,"unitCents":1500}],"declared":{"netCents":3498,"vatCents":509,"grossCents":4007}}"""^^rdf:JSON "/lines") string:jsonPointer ("""{"sku":"wid-001","qty":2,"unitCents":999}"""^^rdf:JSON """{"sku":"GAD-002","qty":1,"unitCents":1500}"""^^rdf:JSON) .
#   ("""{"sku":"wid-001","qty":2,"unitCents":999}"""^^rdf:JSON """{"sku":"GAD-002","qty":1,"unitCents":1500}"""^^rdf:JSON) list:iterate (0 """{"sku":"wid-001","qty":2,"unitCents":999}"""^^rdf:JSON) .
#   ("""{"sku":"wid-001","qty":2,"unitCents":999}"""^^rdf:JSON "/sku") string:jsonPointer "wid-001" .
#   ("""{"sku":"wid-001","qty":2,"unitCents":999}"""^^rdf:JSON "/qty") string:jsonPointer 2 .
#   ("""{"sku":"wid-001","qty":2,"unitCents":999}"""^^rdf:JSON "/unitCents") string:jsonPointer 999 .
#   ex:Widget a ex:Product .
#   ex:Widget ex:sku "WID-001" .
#   (2 999) math:product 1998 .
#   ("urn:example:order:%s#line:%s" "A100" 0) string:format "urn:example:order:A100#line:0" .
#   <urn:example:order:A100#line:0> log:uri "urn:example:order:A100#line:0" .
#   "wid-001" string:equalIgnoringCase "WID-001" .
# via the schematic forward rule:
#   {
#     ex:feed ex:json ?J .
#     (?J "/orders") string:jsonPointer ?Orders .
#     ?Orders list:iterate (?OrderIndex ?OrderJson) .
#     (?OrderJson "/orderId") string:jsonPointer ?OrderId .
#     ("urn:example:order:%s" ?OrderId) string:format ?OrderUriStr .
#     ?Order log:uri ?OrderUriStr .
#     (?OrderJson "/lines") string:jsonPointer ?Lines .
#     ?Lines list:iterate (?LineIndex ?LineJson) .
#     (?LineJson "/sku") string:jsonPointer ?SkuJson .
#     (?LineJson "/qty") string:jsonPointer ?Qty .
#     (?LineJson "/unitCents") string:jsonPointer ?UnitCents .
#     ?Product a ex:Product .
#     ?Product ex:sku ?SkuCat .
#     (?Qty ?UnitCents) math:product ?NetCents .
#     ("urn:example:order:%s#line:%s" ?OrderId ?LineIndex) string:format ?LineUriStr .
#     ?Line log:uri ?LineUriStr .
#     ?SkuJson string:equalIgnoringCase ?SkuCat .
#   } => {
#     ?Order ex:line ?Line .
#     ?Line a ex:OrderLine .
#     ?Line ex:lineIndex ?LineIndex .
#     ?Line ex:product ?Product .
#     ?Line ex:sku ?SkuCat .
#     ?Line ex:qty ?Qty .
#     ?Line ex:unitCents ?UnitCents .
#     ?Line ex:netCents ?NetCents .
#   } .
# with substitution (on rule variables):
#   ?J = """{
#     "meta~data": { "batch": "2025-12-18" },
#     "orders": [
#     {
#     "orderId": "A100",
#     "shipTo": { "country": "BE" },
#     "customer": { "email": "Ada@Example.ORG", "vatId": null },
#     "lines": [
#     { "sku": "wid-001", "qty": 2, "unitCents": 999 },
#     { "sku": "GAD-002", "qty": 1, "unitCents": 1500 }
#     ],
#     "declared": { "netCents": 3498, "vatCents": 509, "grossCents": 4007 }
#     },
#     {
#     "orderId": "A200",
#     "shipTo": { "country": "US" },
#     "customer": { "email": "bob@example.org", "vatId": null },
#     "lines": [
#     { "sku": "WID-001", "qty": 2, "unitCents": 999 },
#     { "sku": "GAD-002", "qty": 1, "unitCents": 1500 }
#     ],
#     "declared": { "netCents": 3498, "vatCents": 0, "grossCents": 3498 }
#     },
#     {
#     "orderId": "A300",
#     "shipTo": { "country": "NL" },
#     "customer": { "email": "acct@company.nl", "vatId": "NL999999999B01" },
#     "lines": [
#     { "sku": "WID-001", "qty": 2, "unitCents": 999 },
#     { "sku": "GAD-002", "qty": 1, "unitCents": 1500 }
#     ],
#     "declared": { "netCents": 3498, "vatCents": 0, "grossCents": 3498 }
#     },
#     {
#     "orderId": "A301",
#     "shipTo": { "country": "NL" },
#     "customer": { "email": "billing@company.nl", "vatId": "NL999999999B01" },
#     "lines": [
#     { "sku": "WID-001", "qty": 2, "unitCents": 999 },
#     { "sku": "GAD-002", "qty": 1, "unitCents": 1500 }
#     ],
#     "declared": { "netCents": 3498, "vatCents": 0, "grossCents": 3498 }
#     },
#     {
#     "orderId": "A400",
#     "shipTo": { "country": "BE" },
#     "customer": { "email": "ada@other.example", "vatId": null },
#     "lines": [
#     { "sku": "WID-001", "qty": 2, "unitCents": 999 },
#     { "sku": "GAD-002", "qty": 1, "unitCents": 1500 }
#     ],
#     "declared": { "netCents": 3498, "vatCents": 508, "grossCents": 4006 }
#     }
#     ]
#   }"""^^rdf:JSON
#   ?Line = <urn:example:order:A100#line:0>
#   ?LineIndex = 0
#   ?LineJson = """{"sku":"wid-001","qty":2,"unitCents":999}"""^^rdf:JSON
#   ?LineUriStr = "urn:example:order:A100#line:0"
#   ?Lines = ("""{"sku":"wid-001","qty":2,"unitCents":999}"""^^rdf:JSON """{"sku":"GAD-002","qty":1,"unitCents":1500}"""^^rdf:JSON)
#   ?NetCents = 1998
#   ?Order = <urn:example:order:A100>
#   ?OrderId = "A100"
#   ?OrderIndex = 0
#   ?OrderJson = """{"orderId":"A100","shipTo":{"country":"BE"},"customer":{"email":"Ada@Example.ORG","vatId":null},"lines":[{"sku":"wid-001","qty":2,"unitCents":999},{"sku":"GAD-002","qty":1,"unitCents":1500}],"declared":{"netCents":3498,"vatCents":509,"grossCents":4007}}"""^^rdf:JSON
#   ?OrderUriStr = "urn:example:order:A100"
#   ?Orders = ("""{"orderId":"A100","shipTo":{"country":"BE"},"customer":{"email":"Ada@Example.ORG","vatId":null},"lines":[{"sku":"wid-001","qty":2,"unitCents":999},{"sku":"GAD-002","qty":1,"unitCents":1500}],"declared":{"netCents":3498,"vatCents":509,"grossCents":4007}}"""^^rdf:JSON """{"orderId":"A200","shipTo":{"country":"US"},"customer":{"email":"bob@example.org","vatId":null},"lines":[{"sku":"WID-001","qty":2,"unitCents":999},{"sku":"GAD-002","qty":1,"unitCents":1500}],"declared":{"netCents":3498,"vatCents":0,"grossCents":3498}}"""^^rdf:JSON """{"orderId":"A300","shipTo":{"country":"NL"},"customer":{"email":"acct@company.nl","vatId":"NL999999999B01"},"lines":[{"sku":"WID-001","qty":2,"unitCents":999},{"sku":"GAD-002","qty":1,"unitCents":1500}],"declared":{"netCents":3498,"vatCents":0,"grossCents":3498}}"""^^rdf:JSON """{"orderId":"A301","shipTo":{"country":"NL"},"customer":{"email":"billing@company.nl","vatId":"NL999999999B01"},"lines":[{"sku":"WID-001","qty":2,"unitCents":999},{"sku":"GAD-002","qty":1,"unitCents":1500}],"declared":{"netCents":3498,"vatCents":0,"grossCents":3498}}"""^^rdf:JSON """{"orderId":"A400","shipTo":{"country":"BE"},"customer":{"email":"ada@other.example","vatId":null},"lines":[{"sku":"WID-001","qty":2,"unitCents":999},{"sku":"GAD-002","qty":1,"unitCents":1500}],"declared":{"netCents":3498,"vatCents":508,"grossCents":4006}}"""^^rdf:JSON)
#   ?Product = ex:Widget
#   ?Qty = 2
#   ?SkuCat = "WID-001"
#   ?SkuJson = "wid-001"
#   ?UnitCents = 999
# Therefore the derived triple above is entailed by the rules and facts.
# ----------------------------------------------------------------------

<urn:example:order:A100#line:0> a ex:OrderLine .

# ----------------------------------------------------------------------
# Proof for derived triple:
#   <urn:example:order:A100#line:0> ex:lineIndex 0 .
# It holds because the following instance of the rule body is provable:
#   ex:feed ex:json """{
#     "meta~data": { "batch": "2025-12-18" },
#     "orders": [
#       {
#         "orderId": "A100",
#         "shipTo": { "country": "BE" },
#         "customer": { "email": "Ada@Example.ORG", "vatId": null },
#         "lines": [
#           { "sku": "wid-001", "qty": 2, "unitCents": 999 },
#           { "sku": "GAD-002", "qty": 1, "unitCents": 1500 }
#         ],
#         "declared": { "netCents": 3498, "vatCents": 509, "grossCents": 4007 }
#       },
#       {
#         "orderId": "A200",
#         "shipTo": { "country": "US" },
#         "customer": { "email": "bob@example.org", "vatId": null },
#         "lines": [
#           { "sku": "WID-001", "qty": 2, "unitCents": 999 },
#           { "sku": "GAD-002", "qty": 1, "unitCents": 1500 }
#         ],
#         "declared": { "netCents": 3498, "vatCents": 0, "grossCents": 3498 }
#       },
#       {
#         "orderId": "A300",
#         "shipTo": { "country": "NL" },
#         "customer": { "email": "acct@company.nl", "vatId": "NL999999999B01" },
#         "lines": [
#           { "sku": "WID-001", "qty": 2, "unitCents": 999 },
#           { "sku": "GAD-002", "qty": 1, "unitCents": 1500 }
#         ],
#         "declared": { "netCents": 3498, "vatCents": 0, "grossCents": 3498 }
#       },
#       {
#         "orderId": "A301",
#         "shipTo": { "country": "NL" },
#         "customer": { "email": "billing@company.nl", "vatId": "NL999999999B01" },
#         "lines": [
#           { "sku": "WID-001", "qty": 2, "unitCents": 999 },
#           { "sku": "GAD-002", "qty": 1, "unitCents": 1500 }
#         ],
#         "declared": { "netCents": 3498, "vatCents": 0, "grossCents": 3498 }
#       },
#       {
#         "orderId": "A400",
#         "shipTo": { "country": "BE" },
#         "customer": { "email": "ada@other.example", "vatId": null },
#         "lines": [
#           { "sku": "WID-001", "qty": 2, "unitCents": 999 },
#           { "sku": "GAD-002", "qty": 1, "unitCents": 1500 }
#         ],
#         "declared": { "netCents": 3498, "vatCents": 508, "grossCents": 4006 }
#       }
#     ]
#   }"""^^rdf:JSON .
#   ("""{
#     "meta~data": { "batch": "2025-12-18" },
#     "orders": [
#       {
#         "orderId": "A100",
#         "shipTo": { "country": "BE" },
#         "customer": { "email": "Ada@Example.ORG", "vatId": null },
#         "lines": [
#           { "sku": "wid-001", "qty": 2, "unitCents": 999 },
#           { "sku": "GAD-002", "qty": 1, "unitCents": 1500 }
#         ],
#         "declared": { "netCents": 3498, "vatCents": 509, "grossCents": 4007 }
#       },
#       {
#         "orderId": "A200",
#         "shipTo": { "country": "US" },
#         "customer": { "email": "bob@example.org", "vatId": null },
#         "lines": [
#           { "sku": "WID-001", "qty": 2, "unitCents": 999 },
#           { "sku": "GAD-002", "qty": 1, "unitCents": 1500 }
#         ],
#         "declared": { "netCents": 3498, "vatCents": 0, "grossCents": 3498 }
#       },
#       {
#         "orderId": "A300",
#         "shipTo": { "country": "NL" },
#         "customer": { "email": "acct@company.nl", "vatId": "NL999999999B01" },
#         "lines": [
#           { "sku": "WID-001", "qty": 2, "unitCents": 999 },
#           { "sku": "GAD-002", "qty": 1, "unitCents": 1500 }
#         ],
#         "declared": { "netCents": 3498, "vatCents": 0, "grossCents": 3498 }
#       },
#       {
#         "orderId": "A301",
#         "shipTo": { "country": "NL" },
#         "customer": { "email": "billing@company.nl", "vatId": "NL999999999B01" },
#         "lines": [
#           { "sku": "WID-001", "qty": 2, "unitCents": 999 },
#           { "sku": "GAD-002", "qty": 1, "unitCents": 1500 }
#         ],
#         "declared": { "netCents": 3498, "vatCents": 0, "grossCents": 3498 }
#       },
#       {
#         "orderId": "A400",
#         "shipTo": { "country": "BE" },
#         "customer": { "email": "ada@other.example", "vatId": null },
#         "lines": [
#           { "sku": "WID-001", "qty": 2, "unitCents": 999 },
#           { "sku": "GAD-002", "qty": 1, "unitCents": 1500 }
#         ],
#         "declared": { "netCents": 3498, "vatCents": 508, "grossCents": 4006 }
#       }
#     ]
#   }"""^^rdf:JSON "/orders") string:jsonPointer ("""{"orderId":"A100","shipTo":{"country":"BE"},"customer":{"email":"Ada@Example.ORG","vatId":null},"lines":[{"sku":"wid-001","qty":2,"unitCents":999},{"sku":"GAD-002","qty":1,"unitCents":1500}],"declared":{"netCents":3498,"vatCents":509,"grossCents":4007}}"""^^rdf:JSON """{"orderId":"A200","shipTo":{"country":"US"},"customer":{"email":"bob@example.org","vatId":null},"lines":[{"sku":"WID-001","qty":2,"unitCents":999},{"sku":"GAD-002","qty":1,"unitCents":1500}],"declared":{"netCents":3498,"vatCents":0,"grossCents":3498}}"""^^rdf:JSON """{"orderId":"A300","shipTo":{"country":"NL"},"customer":{"email":"acct@company.nl","vatId":"NL999999999B01"},"lines":[{"sku":"WID-001","qty":2,"unitCents":999},{"sku":"GAD-002","qty":1,"unitCents":1500}],"declared":{"netCents":3498,"vatCents":0,"grossCents":3498}}"""^^rdf:JSON """{"orderId":"A301","shipTo":{"country":"NL"},"customer":{"email":"billing@company.nl","vatId":"NL999999999B01"},"lines":[{"sku":"WID-001","qty":2,"unitCents":999},{"sku":"GAD-002","qty":1,"unitCents":1500}],"declared":{"netCents":3498,"vatCents":0,"grossCents":3498}}"""^^rdf:JSON """{"orderId":"A400","shipTo":{"country":"BE"},"customer":{"email":"ada@other.example","vatId":null},"lines":[{"sku":"WID-001","qty":2,"unitCents":999},{"sku":"GAD-002","qty":1,"unitCents":1500}],"declared":{"netCents":3498,"vatCents":508,"grossCents":4006}}"""^^rdf:JSON) .
#   ("""{"orderId":"A100","shipTo":{"country":"BE"},"customer":{"email":"Ada@Example.ORG","vatId":null},"lines":[{"sku":"wid-001","qty":2,"unitCents":999},{"sku":"GAD-002","qty":1,"unitCents":1500}],"declared":{"netCents":3498,"vatCents":509,"grossCents":4007}}"""^^rdf:JSON """{"orderId":"A200","shipTo":{"country":"US"},"customer":{"email":"bob@example.org","vatId":null},"lines":[{"sku":"WID-001","qty":2,"unitCents":999},{"sku":"GAD-002","qty":1,"unitCents":1500}],"declared":{"netCents":3498,"vatCents":0,"grossCents":3498}}"""^^rdf:JSON """{"orderId":"A300","shipTo":{"country":"NL"},"customer":{"email":"acct@company.nl","vatId":"NL999999999B01"},"lines":[{"sku":"WID-001","qty":2,"unitCents":999},{"sku":"GAD-002","qty":1,"unitCents":1500}],"declared":{"netCents":3498,"vatCents":0,"grossCents":3498}}"""^^rdf:JSON """{"orderId":"A301","shipTo":{"country":"NL"},"customer":{"email":"billing@company.nl","vatId":"NL999999999B01"},"lines":[{"sku":"WID-001","qty":2,"unitCents":999},{"sku":"GAD-002","qty":1,"unitCents":1500}],"declared":{"netCents":3498,"vatCents":0,"grossCents":3498}}"""^^rdf:JSON """{"orderId":"A400","shipTo":{"country":"BE"},"customer":{"email":"ada@other.example","vatId":null},"lines":[{"sku":"WID-001","qty":2,"unitCents":999},{"sku":"GAD-002","qty":1,"unitCents":1500}],"declared":{"netCents":3498,"vatCents":508,"grossCents":4006}}"""^^rdf:JSON) list:iterate (0 """{"orderId":"A100","shipTo":{"country":"BE"},"customer":{"email":"Ada@Example.ORG","vatId":null},"lines":[{"sku":"wid-001","qty":2,"unitCents":999},{"sku":"GAD-002","qty":1,"unitCents":1500}],"declared":{"netCents":3498,"vatCents":509,"grossCents":4007}}"""^^rdf:JSON) .
#   ("""{"orderId":"A100","shipTo":{"country":"BE"},"customer":{"email":"Ada@Example.ORG","vatId":null},"lines":[{"sku":"wid-001","qty":2,"unitCents":999},{"sku":"GAD-002","qty":1,"unitCents":1500}],"declared":{"netCents":3498,"vatCents":509,"grossCents":4007}}"""^^rdf:JSON "/orderId") string:jsonPointer "A100" .
#   ("urn:example:order:%s" "A100") string:format "urn:example:order:A100" .
#   <urn:example:order:A100> log:uri "urn:example:order:A100" .
#   ("""{"orderId":"A100","shipTo":{"country":"BE"},"customer":{"email":"Ada@Example.ORG","vatId":null},"lines":[{"sku":"wid-001","qty":2,"unitCents":999},{"sku":"GAD-002","qty":1,"unitCents":1500}],"declared":{"netCents":3498,"vatCents":509,"grossCents":4007}}"""^^rdf:JSON "/lines") string:jsonPointer ("""{"sku":"wid-001","qty":2,"unitCents":999}"""^^rdf:JSON """{"sku":"GAD-002","qty":1,"unitCents":1500}"""^^rdf:JSON) .
#   ("""{"sku":"wid-001","qty":2,"unitCents":999}"""^^rdf:JSON """{"sku":"GAD-002","qty":1,"unitCents":1500}"""^^rdf:JSON) list:iterate (0 """{"sku":"wid-001","qty":2,"unitCents":999}"""^^rdf:JSON) .
#   ("""{"sku":"wid-001","qty":2,"unitCents":999}"""^^rdf:JSON "/sku") string:jsonPointer "wid-001" .
#   ("""{"sku":"wid-001","qty":2,"unitCents":999}"""^^rdf:JSON "/qty") string:jsonPointer 2 .
#   ("""{"sku":"wid-001","qty":2,"unitCents":999}"""^^rdf:JSON "/unitCents") string:jsonPointer 999 .
#   ex:Widget a ex:Product .
#   ex:Widget ex:sku "WID-001" .
#   (2 999) math:product 1998 .
#   ("urn:example:order:%s#line:%s" "A100" 0) string:format "urn:example:order:A100#line:0" .
#   <urn:example:order:A100#line:0> log:uri "urn:example:order:A100#line:0" .
#   "wid-001" string:equalIgnoringCase "WID-001" .
# via the schematic forward rule:
#   {
#     ex:feed ex:json ?J .
#     (?J "/orders") string:jsonPointer ?Orders .
#     ?Orders list:iterate (?OrderIndex ?OrderJson) .
#     (?OrderJson "/orderId") string:jsonPointer ?OrderId .
#     ("urn:example:order:%s" ?OrderId) string:format ?OrderUriStr .
#     ?Order log:uri ?OrderUriStr .
#     (?OrderJson "/lines") string:jsonPointer ?Lines .
#     ?Lines list:iterate (?LineIndex ?LineJson) .
#     (?LineJson "/sku") string:jsonPointer ?SkuJson .
#     (?LineJson "/qty") string:jsonPointer ?Qty .
#     (?LineJson "/unitCents") string:jsonPointer ?UnitCents .
#     ?Product a ex:Product .
#     ?Product ex:sku ?SkuCat .
#     (?Qty ?UnitCents) math:product ?NetCents .
#     ("urn:example:order:%s#line:%s" ?OrderId ?LineIndex) string:format ?LineUriStr .
#     ?Line log:uri ?LineUriStr .
#     ?SkuJson string:equalIgnoringCase ?SkuCat .
#   } => {
#     ?Order ex:line ?Line .
#     ?Line a ex:OrderLine .
#     ?Line ex:lineIndex ?LineIndex .
#     ?Line ex:product ?Product .
#     ?Line ex:sku ?SkuCat .
#     ?Line ex:qty ?Qty .
#     ?Line ex:unitCents ?UnitCents .
#     ?Line ex:netCents ?NetCents .
#   } .
# with substitution (on rule variables):
#   ?J = """{
#     "meta~data": { "batch": "2025-12-18" },
#     "orders": [
#     {
#     "orderId": "A100",
#     "shipTo": { "country": "BE" },
#     "customer": { "email": "Ada@Example.ORG", "vatId": null },
#     "lines": [
#     { "sku": "wid-001", "qty": 2, "unitCents": 999 },
#     { "sku": "GAD-002", "qty": 1, "unitCents": 1500 }
#     ],
#     "declared": { "netCents": 3498, "vatCents": 509, "grossCents": 4007 }
#     },
#     {
#     "orderId": "A200",
#     "shipTo": { "country": "US" },
#     "customer": { "email": "bob@example.org", "vatId": null },
#     "lines": [
#     { "sku": "WID-001", "qty": 2, "unitCents": 999 },
#     { "sku": "GAD-002", "qty": 1, "unitCents": 1500 }
#     ],
#     "declared": { "netCents": 3498, "vatCents": 0, "grossCents": 3498 }
#     },
#     {
#     "orderId": "A300",
#     "shipTo": { "country": "NL" },
#     "customer": { "email": "acct@company.nl", "vatId": "NL999999999B01" },
#     "lines": [
#     { "sku": "WID-001", "qty": 2, "unitCents": 999 },
#     { "sku": "GAD-002", "qty": 1, "unitCents": 1500 }
#     ],
#     "declared": { "netCents": 3498, "vatCents": 0, "grossCents": 3498 }
#     },
#     {
#     "orderId": "A301",
#     "shipTo": { "country": "NL" },
#     "customer": { "email": "billing@company.nl", "vatId": "NL999999999B01" },
#     "lines": [
#     { "sku": "WID-001", "qty": 2, "unitCents": 999 },
#     { "sku": "GAD-002", "qty": 1, "unitCents": 1500 }
#     ],
#     "declared": { "netCents": 3498, "vatCents": 0, "grossCents": 3498 }
#     },
#     {
#     "orderId": "A400",
#     "shipTo": { "country": "BE" },
#     "customer": { "email": "ada@other.example", "vatId": null },
#     "lines": [
#     { "sku": "WID-001", "qty": 2, "unitCents": 999 },
#     { "sku": "GAD-002", "qty": 1, "unitCents": 1500 }
#     ],
#     "declared": { "netCents": 3498, "vatCents": 508, "grossCents": 4006 }
#     }
#     ]
#   }"""^^rdf:JSON
#   ?Line = <urn:example:order:A100#line:0>
#   ?LineIndex = 0
#   ?LineJson = """{"sku":"wid-001","qty":2,"unitCents":999}"""^^rdf:JSON
#   ?LineUriStr = "urn:example:order:A100#line:0"
#   ?Lines = ("""{"sku":"wid-001","qty":2,"unitCents":999}"""^^rdf:JSON """{"sku":"GAD-002","qty":1,"unitCents":1500}"""^^rdf:JSON)
#   ?NetCents = 1998
#   ?Order = <urn:example:order:A100>
#   ?OrderId = "A100"
#   ?OrderIndex = 0
#   ?OrderJson = """{"orderId":"A100","shipTo":{"country":"BE"},"customer":{"email":"Ada@Example.ORG","vatId":null},"lines":[{"sku":"wid-001","qty":2,"unitCents":999},{"sku":"GAD-002","qty":1,"unitCents":1500}],"declared":{"netCents":3498,"vatCents":509,"grossCents":4007}}"""^^rdf:JSON
#   ?OrderUriStr = "urn:example:order:A100"
#   ?Orders = ("""{"orderId":"A100","shipTo":{"country":"BE"},"customer":{"email":"Ada@Example.ORG","vatId":null},"lines":[{"sku":"wid-001","qty":2,"unitCents":999},{"sku":"GAD-002","qty":1,"unitCents":1500}],"declared":{"netCents":3498,"vatCents":509,"grossCents":4007}}"""^^rdf:JSON """{"orderId":"A200","shipTo":{"country":"US"},"customer":{"email":"bob@example.org","vatId":null},"lines":[{"sku":"WID-001","qty":2,"unitCents":999},{"sku":"GAD-002","qty":1,"unitCents":1500}],"declared":{"netCents":3498,"vatCents":0,"grossCents":3498}}"""^^rdf:JSON """{"orderId":"A300","shipTo":{"country":"NL"},"customer":{"email":"acct@company.nl","vatId":"NL999999999B01"},"lines":[{"sku":"WID-001","qty":2,"unitCents":999},{"sku":"GAD-002","qty":1,"unitCents":1500}],"declared":{"netCents":3498,"vatCents":0,"grossCents":3498}}"""^^rdf:JSON """{"orderId":"A301","shipTo":{"country":"NL"},"customer":{"email":"billing@company.nl","vatId":"NL999999999B01"},"lines":[{"sku":"WID-001","qty":2,"unitCents":999},{"sku":"GAD-002","qty":1,"unitCents":1500}],"declared":{"netCents":3498,"vatCents":0,"grossCents":3498}}"""^^rdf:JSON """{"orderId":"A400","shipTo":{"country":"BE"},"customer":{"email":"ada@other.example","vatId":null},"lines":[{"sku":"WID-001","qty":2,"unitCents":999},{"sku":"GAD-002","qty":1,"unitCents":1500}],"declared":{"netCents":3498,"vatCents":508,"grossCents":4006}}"""^^rdf:JSON)
#   ?Product = ex:Widget
#   ?Qty = 2
#   ?SkuCat = "WID-001"
#   ?SkuJson = "wid-001"
#   ?UnitCents = 999
# Therefore the derived triple above is entailed by the rules and facts.
# ----------------------------------------------------------------------

<urn:example:order:A100#line:0> ex:lineIndex 0 .

# ----------------------------------------------------------------------
# Proof for derived triple:
#   <urn:example:order:A100#line:0> ex:product ex:Widget .
# It holds because the following instance of the rule body is provable:
#   ex:feed ex:json """{
#     "meta~data": { "batch": "2025-12-18" },
#     "orders": [
#       {
#         "orderId": "A100",
#         "shipTo": { "country": "BE" },
#         "customer": { "email": "Ada@Example.ORG", "vatId": null },
#         "lines": [
#           { "sku": "wid-001", "qty": 2, "unitCents": 999 },
#           { "sku": "GAD-002", "qty": 1, "unitCents": 1500 }
#         ],
#         "declared": { "netCents": 3498, "vatCents": 509, "grossCents": 4007 }
#       },
#       {
#         "orderId": "A200",
#         "shipTo": { "country": "US" },
#         "customer": { "email": "bob@example.org", "vatId": null },
#         "lines": [
#           { "sku": "WID-001", "qty": 2, "unitCents": 999 },
#           { "sku": "GAD-002", "qty": 1, "unitCents": 1500 }
#         ],
#         "declared": { "netCents": 3498, "vatCents": 0, "grossCents": 3498 }
#       },
#       {
#         "orderId": "A300",
#         "shipTo": { "country": "NL" },
#         "customer": { "email": "acct@company.nl", "vatId": "NL999999999B01" },
#         "lines": [
#           { "sku": "WID-001", "qty": 2, "unitCents": 999 },
#           { "sku": "GAD-002", "qty": 1, "unitCents": 1500 }
#         ],
#         "declared": { "netCents": 3498, "vatCents": 0, "grossCents": 3498 }
#       },
#       {
#         "orderId": "A301",
#         "shipTo": { "country": "NL" },
#         "customer": { "email": "billing@company.nl", "vatId": "NL999999999B01" },
#         "lines": [
#           { "sku": "WID-001", "qty": 2, "unitCents": 999 },
#           { "sku": "GAD-002", "qty": 1, "unitCents": 1500 }
#         ],
#         "declared": { "netCents": 3498, "vatCents": 0, "grossCents": 3498 }
#       },
#       {
#         "orderId": "A400",
#         "shipTo": { "country": "BE" },
#         "customer": { "email": "ada@other.example", "vatId": null },
#         "lines": [
#           { "sku": "WID-001", "qty": 2, "unitCents": 999 },
#           { "sku": "GAD-002", "qty": 1, "unitCents": 1500 }
#         ],
#         "declared": { "netCents": 3498, "vatCents": 508, "grossCents": 4006 }
#       }
#     ]
#   }"""^^rdf:JSON .
#   ("""{
#     "meta~data": { "batch": "2025-12-18" },
#     "orders": [
#       {
#         "orderId": "A100",
#         "shipTo": { "country": "BE" },
#         "customer": { "email": "Ada@Example.ORG", "vatId": null },
#         "lines": [
#           { "sku": "wid-001", "qty": 2, "unitCents": 999 },
#           { "sku": "GAD-002", "qty": 1, "unitCents": 1500 }
#         ],
#         "declared": { "netCents": 3498, "vatCents": 509, "grossCents": 4007 }
#       },
#       {
#         "orderId": "A200",
#         "shipTo": { "country": "US" },
#         "customer": { "email": "bob@example.org", "vatId": null },
#         "lines": [
#           { "sku": "WID-001", "qty": 2, "unitCents": 999 },
#           { "sku": "GAD-002", "qty": 1, "unitCents": 1500 }
#         ],
#         "declared": { "netCents": 3498, "vatCents": 0, "grossCents": 3498 }
#       },
#       {
#         "orderId": "A300",
#         "shipTo": { "country": "NL" },
#         "customer": { "email": "acct@company.nl", "vatId": "NL999999999B01" },
#         "lines": [
#           { "sku": "WID-001", "qty": 2, "unitCents": 999 },
#           { "sku": "GAD-002", "qty": 1, "unitCents": 1500 }
#         ],
#         "declared": { "netCents": 3498, "vatCents": 0, "grossCents": 3498 }
#       },
#       {
#         "orderId": "A301",
#         "shipTo": { "country": "NL" },
#         "customer": { "email": "billing@company.nl", "vatId": "NL999999999B01" },
#         "lines": [
#           { "sku": "WID-001", "qty": 2, "unitCents": 999 },
#           { "sku": "GAD-002", "qty": 1, "unitCents": 1500 }
#         ],
#         "declared": { "netCents": 3498, "vatCents": 0, "grossCents": 3498 }
#       },
#       {
#         "orderId": "A400",
#         "shipTo": { "country": "BE" },
#         "customer": { "email": "ada@other.example", "vatId": null },
#         "lines": [
#           { "sku": "WID-001", "qty": 2, "unitCents": 999 },
#           { "sku": "GAD-002", "qty": 1, "unitCents": 1500 }
#         ],
#         "declared": { "netCents": 3498, "vatCents": 508, "grossCents": 4006 }
#       }
#     ]
#   }"""^^rdf:JSON "/orders") string:jsonPointer ("""{"orderId":"A100","shipTo":{"country":"BE"},"customer":{"email":"Ada@Example.ORG","vatId":null},"lines":[{"sku":"wid-001","qty":2,"unitCents":999},{"sku":"GAD-002","qty":1,"unitCents":1500}],"declared":{"netCents":3498,"vatCents":509,"grossCents":4007}}"""^^rdf:JSON """{"orderId":"A200","shipTo":{"country":"US"},"customer":{"email":"bob@example.org","vatId":null},"lines":[{"sku":"WID-001","qty":2,"unitCents":999},{"sku":"GAD-002","qty":1,"unitCents":1500}],"declared":{"netCents":3498,"vatCents":0,"grossCents":3498}}"""^^rdf:JSON """{"orderId":"A300","shipTo":{"country":"NL"},"customer":{"email":"acct@company.nl","vatId":"NL999999999B01"},"lines":[{"sku":"WID-001","qty":2,"unitCents":999},{"sku":"GAD-002","qty":1,"unitCents":1500}],"declared":{"netCents":3498,"vatCents":0,"grossCents":3498}}"""^^rdf:JSON """{"orderId":"A301","shipTo":{"country":"NL"},"customer":{"email":"billing@company.nl","vatId":"NL999999999B01"},"lines":[{"sku":"WID-001","qty":2,"unitCents":999},{"sku":"GAD-002","qty":1,"unitCents":1500}],"declared":{"netCents":3498,"vatCents":0,"grossCents":3498}}"""^^rdf:JSON """{"orderId":"A400","shipTo":{"country":"BE"},"customer":{"email":"ada@other.example","vatId":null},"lines":[{"sku":"WID-001","qty":2,"unitCents":999},{"sku":"GAD-002","qty":1,"unitCents":1500}],"declared":{"netCents":3498,"vatCents":508,"grossCents":4006}}"""^^rdf:JSON) .
#   ("""{"orderId":"A100","shipTo":{"country":"BE"},"customer":{"email":"Ada@Example.ORG","vatId":null},"lines":[{"sku":"wid-001","qty":2,"unitCents":999},{"sku":"GAD-002","qty":1,"unitCents":1500}],"declared":{"netCents":3498,"vatCents":509,"grossCents":4007}}"""^^rdf:JSON """{"orderId":"A200","shipTo":{"country":"US"},"customer":{"email":"bob@example.org","vatId":null},"lines":[{"sku":"WID-001","qty":2,"unitCents":999},{"sku":"GAD-002","qty":1,"unitCents":1500}],"declared":{"netCents":3498,"vatCents":0,"grossCents":3498}}"""^^rdf:JSON """{"orderId":"A300","shipTo":{"country":"NL"},"customer":{"email":"acct@company.nl","vatId":"NL999999999B01"},"lines":[{"sku":"WID-001","qty":2,"unitCents":999},{"sku":"GAD-002","qty":1,"unitCents":1500}],"declared":{"netCents":3498,"vatCents":0,"grossCents":3498}}"""^^rdf:JSON """{"orderId":"A301","shipTo":{"country":"NL"},"customer":{"email":"billing@company.nl","vatId":"NL999999999B01"},"lines":[{"sku":"WID-001","qty":2,"unitCents":999},{"sku":"GAD-002","qty":1,"unitCents":1500}],"declared":{"netCents":3498,"vatCents":0,"grossCents":3498}}"""^^rdf:JSON """{"orderId":"A400","shipTo":{"country":"BE"},"customer":{"email":"ada@other.example","vatId":null},"lines":[{"sku":"WID-001","qty":2,"unitCents":999},{"sku":"GAD-002","qty":1,"unitCents":1500}],"declared":{"netCents":3498,"vatCents":508,"grossCents":4006}}"""^^rdf:JSON) list:iterate (0 """{"orderId":"A100","shipTo":{"country":"BE"},"customer":{"email":"Ada@Example.ORG","vatId":null},"lines":[{"sku":"wid-001","qty":2,"unitCents":999},{"sku":"GAD-002","qty":1,"unitCents":1500}],"declared":{"netCents":3498,"vatCents":509,"grossCents":4007}}"""^^rdf:JSON) .
#   ("""{"orderId":"A100","shipTo":{"country":"BE"},"customer":{"email":"Ada@Example.ORG","vatId":null},"lines":[{"sku":"wid-001","qty":2,"unitCents":999},{"sku":"GAD-002","qty":1,"unitCents":1500}],"declared":{"netCents":3498,"vatCents":509,"grossCents":4007}}"""^^rdf:JSON "/orderId") string:jsonPointer "A100" .
#   ("urn:example:order:%s" "A100") string:format "urn:example:order:A100" .
#   <urn:example:order:A100> log:uri "urn:example:order:A100" .
#   ("""{"orderId":"A100","shipTo":{"country":"BE"},"customer":{"email":"Ada@Example.ORG","vatId":null},"lines":[{"sku":"wid-001","qty":2,"unitCents":999},{"sku":"GAD-002","qty":1,"unitCents":1500}],"declared":{"netCents":3498,"vatCents":509,"grossCents":4007}}"""^^rdf:JSON "/lines") string:jsonPointer ("""{"sku":"wid-001","qty":2,"unitCents":999}"""^^rdf:JSON """{"sku":"GAD-002","qty":1,"unitCents":1500}"""^^rdf:JSON) .
#   ("""{"sku":"wid-001","qty":2,"unitCents":999}"""^^rdf:JSON """{"sku":"GAD-002","qty":1,"unitCents":1500}"""^^rdf:JSON) list:iterate (0 """{"sku":"wid-001","qty":2,"unitCents":999}"""^^rdf:JSON) .
#   ("""{"sku":"wid-001","qty":2,"unitCents":999}"""^^rdf:JSON "/sku") string:jsonPointer "wid-001" .
#   ("""{"sku":"wid-001","qty":2,"unitCents":999}"""^^rdf:JSON "/qty") string:jsonPointer 2 .
#   ("""{"sku":"wid-001","qty":2,"unitCents":999}"""^^rdf:JSON "/unitCents") string:jsonPointer 999 .
#   ex:Widget a ex:Product .
#   ex:Widget ex:sku "WID-001" .
#   (2 999) math:product 1998 .
#   ("urn:example:order:%s#line:%s" "A100" 0) string:format "urn:example:order:A100#line:0" .
#   <urn:example:order:A100#line:0> log:uri "urn:example:order:A100#line:0" .
#   "wid-001" string:equalIgnoringCase "WID-001" .
# via the schematic forward rule:
#   {
#     ex:feed ex:json ?J .
#     (?J "/orders") string:jsonPointer ?Orders .
#     ?Orders list:iterate (?OrderIndex ?OrderJson) .
#     (?OrderJson "/orderId") string:jsonPointer ?OrderId .
#     ("urn:example:order:%s" ?OrderId) string:format ?OrderUriStr .
#     ?Order log:uri ?OrderUriStr .
#     (?OrderJson "/lines") string:jsonPointer ?Lines .
#     ?Lines list:iterate (?LineIndex ?LineJson) .
#     (?LineJson "/sku") string:jsonPointer ?SkuJson .
#     (?LineJson "/qty") string:jsonPointer ?Qty .
#     (?LineJson "/unitCents") string:jsonPointer ?UnitCents .
#     ?Product a ex:Product .
#     ?Product ex:sku ?SkuCat .
#     (?Qty ?UnitCents) math:product ?NetCents .
#     ("urn:example:order:%s#line:%s" ?OrderId ?LineIndex) string:format ?LineUriStr .
#     ?Line log:uri ?LineUriStr .
#     ?SkuJson string:equalIgnoringCase ?SkuCat .
#   } => {
#     ?Order ex:line ?Line .
#     ?Line a ex:OrderLine .
#     ?Line ex:lineIndex ?LineIndex .
#     ?Line ex:product ?Product .
#     ?Line ex:sku ?SkuCat .
#     ?Line ex:qty ?Qty .
#     ?Line ex:unitCents ?UnitCents .
#     ?Line ex:netCents ?NetCents .
#   } .
# with substitution (on rule variables):
#   ?J = """{
#     "meta~data": { "batch": "2025-12-18" },
#     "orders": [
#     {
#     "orderId": "A100",
#     "shipTo": { "country": "BE" },
#     "customer": { "email": "Ada@Example.ORG", "vatId": null },
#     "lines": [
#     { "sku": "wid-001", "qty": 2, "unitCents": 999 },
#     { "sku": "GAD-002", "qty": 1, "unitCents": 1500 }
#     ],
#     "declared": { "netCents": 3498, "vatCents": 509, "grossCents": 4007 }
#     },
#     {
#     "orderId": "A200",
#     "shipTo": { "country": "US" },
#     "customer": { "email": "bob@example.org", "vatId": null },
#     "lines": [
#     { "sku": "WID-001", "qty": 2, "unitCents": 999 },
#     { "sku": "GAD-002", "qty": 1, "unitCents": 1500 }
#     ],
#     "declared": { "netCents": 3498, "vatCents": 0, "grossCents": 3498 }
#     },
#     {
#     "orderId": "A300",
#     "shipTo": { "country": "NL" },
#     "customer": { "email": "acct@company.nl", "vatId": "NL999999999B01" },
#     "lines": [
#     { "sku": "WID-001", "qty": 2, "unitCents": 999 },
#     { "sku": "GAD-002", "qty": 1, "unitCents": 1500 }
#     ],
#     "declared": { "netCents": 3498, "vatCents": 0, "grossCents": 3498 }
#     },
#     {
#     "orderId": "A301",
#     "shipTo": { "country": "NL" },
#     "customer": { "email": "billing@company.nl", "vatId": "NL999999999B01" },
#     "lines": [
#     { "sku": "WID-001", "qty": 2, "unitCents": 999 },
#     { "sku": "GAD-002", "qty": 1, "unitCents": 1500 }
#     ],
#     "declared": { "netCents": 3498, "vatCents": 0, "grossCents": 3498 }
#     },
#     {
#     "orderId": "A400",
#     "shipTo": { "country": "BE" },
#     "customer": { "email": "ada@other.example", "vatId": null },
#     "lines": [
#     { "sku": "WID-001", "qty": 2, "unitCents": 999 },
#     { "sku": "GAD-002", "qty": 1, "unitCents": 1500 }
#     ],
#     "declared": { "netCents": 3498, "vatCents": 508, "grossCents": 4006 }
#     }
#     ]
#   }"""^^rdf:JSON
#   ?Line = <urn:example:order:A100#line:0>
#   ?LineIndex = 0
#   ?LineJson = """{"sku":"wid-001","qty":2,"unitCents":999}"""^^rdf:JSON
#   ?LineUriStr = "urn:example:order:A100#line:0"
#   ?Lines = ("""{"sku":"wid-001","qty":2,"unitCents":999}"""^^rdf:JSON """{"sku":"GAD-002","qty":1,"unitCents":1500}"""^^rdf:JSON)
#   ?NetCents = 1998
#   ?Order = <urn:example:order:A100>
#   ?OrderId = "A100"
#   ?OrderIndex = 0
#   ?OrderJson = """{"orderId":"A100","shipTo":{"country":"BE"},"customer":{"email":"Ada@Example.ORG","vatId":null},"lines":[{"sku":"wid-001","qty":2,"unitCents":999},{"sku":"GAD-002","qty":1,"unitCents":1500}],"declared":{"netCents":3498,"vatCents":509,"grossCents":4007}}"""^^rdf:JSON
#   ?OrderUriStr = "urn:example:order:A100"
#   ?Orders = ("""{"orderId":"A100","shipTo":{"country":"BE"},"customer":{"email":"Ada@Example.ORG","vatId":null},"lines":[{"sku":"wid-001","qty":2,"unitCents":999},{"sku":"GAD-002","qty":1,"unitCents":1500}],"declared":{"netCents":3498,"vatCents":509,"grossCents":4007}}"""^^rdf:JSON """{"orderId":"A200","shipTo":{"country":"US"},"customer":{"email":"bob@example.org","vatId":null},"lines":[{"sku":"WID-001","qty":2,"unitCents":999},{"sku":"GAD-002","qty":1,"unitCents":1500}],"declared":{"netCents":3498,"vatCents":0,"grossCents":3498}}"""^^rdf:JSON """{"orderId":"A300","shipTo":{"country":"NL"},"customer":{"email":"acct@company.nl","vatId":"NL999999999B01"},"lines":[{"sku":"WID-001","qty":2,"unitCents":999},{"sku":"GAD-002","qty":1,"unitCents":1500}],"declared":{"netCents":3498,"vatCents":0,"grossCents":3498}}"""^^rdf:JSON """{"orderId":"A301","shipTo":{"country":"NL"},"customer":{"email":"billing@company.nl","vatId":"NL999999999B01"},"lines":[{"sku":"WID-001","qty":2,"unitCents":999},{"sku":"GAD-002","qty":1,"unitCents":1500}],"declared":{"netCents":3498,"vatCents":0,"grossCents":3498}}"""^^rdf:JSON """{"orderId":"A400","shipTo":{"country":"BE"},"customer":{"email":"ada@other.example","vatId":null},"lines":[{"sku":"WID-001","qty":2,"unitCents":999},{"sku":"GAD-002","qty":1,"unitCents":1500}],"declared":{"netCents":3498,"vatCents":508,"grossCents":4006}}"""^^rdf:JSON)
#   ?Product = ex:Widget
#   ?Qty = 2
#   ?SkuCat = "WID-001"
#   ?SkuJson = "wid-001"
#   ?UnitCents = 999
# Therefore the derived triple above is entailed by the rules and facts.
# ----------------------------------------------------------------------

<urn:example:order:A100#line:0> ex:product ex:Widget .

# ----------------------------------------------------------------------
# Proof for derived triple:
#   <urn:example:order:A100#line:0> ex:sku "WID-001" .
# It holds because the following instance of the rule body is provable:
#   ex:feed ex:json """{
#     "meta~data": { "batch": "2025-12-18" },
#     "orders": [
#       {
#         "orderId": "A100",
#         "shipTo": { "country": "BE" },
#         "customer": { "email": "Ada@Example.ORG", "vatId": null },
#         "lines": [
#           { "sku": "wid-001", "qty": 2, "unitCents": 999 },
#           { "sku": "GAD-002", "qty": 1, "unitCents": 1500 }
#         ],
#         "declared": { "netCents": 3498, "vatCents": 509, "grossCents": 4007 }
#       },
#       {
#         "orderId": "A200",
#         "shipTo": { "country": "US" },
#         "customer": { "email": "bob@example.org", "vatId": null },
#         "lines": [
#           { "sku": "WID-001", "qty": 2, "unitCents": 999 },
#           { "sku": "GAD-002", "qty": 1, "unitCents": 1500 }
#         ],
#         "declared": { "netCents": 3498, "vatCents": 0, "grossCents": 3498 }
#       },
#       {
#         "orderId": "A300",
#         "shipTo": { "country": "NL" },
#         "customer": { "email": "acct@company.nl", "vatId": "NL999999999B01" },
#         "lines": [
#           { "sku": "WID-001", "qty": 2, "unitCents": 999 },
#           { "sku": "GAD-002", "qty": 1, "unitCents": 1500 }
#         ],
#         "declared": { "netCents": 3498, "vatCents": 0, "grossCents": 3498 }
#       },
#       {
#         "orderId": "A301",
#         "shipTo": { "country": "NL" },
#         "customer": { "email": "billing@company.nl", "vatId": "NL999999999B01" },
#         "lines": [
#           { "sku": "WID-001", "qty": 2, "unitCents": 999 },
#           { "sku": "GAD-002", "qty": 1, "unitCents": 1500 }
#         ],
#         "declared": { "netCents": 3498, "vatCents": 0, "grossCents": 3498 }
#       },
#       {
#         "orderId": "A400",
#         "shipTo": { "country": "BE" },
#         "customer": { "email": "ada@other.example", "vatId": null },
#         "lines": [
#           { "sku": "WID-001", "qty": 2, "unitCents": 999 },
#           { "sku": "GAD-002", "qty": 1, "unitCents": 1500 }
#         ],
#         "declared": { "netCents": 3498, "vatCents": 508, "grossCents": 4006 }
#       }
#     ]
#   }"""^^rdf:JSON .
#   ("""{
#     "meta~data": { "batch": "2025-12-18" },
#     "orders": [
#       {
#         "orderId": "A100",
#         "shipTo": { "country": "BE" },
#         "customer": { "email": "Ada@Example.ORG", "vatId": null },
#         "lines": [
#           { "sku": "wid-001", "qty": 2, "unitCents": 999 },
#           { "sku": "GAD-002", "qty": 1, "unitCents": 1500 }
#         ],
#         "declared": { "netCents": 3498, "vatCents": 509, "grossCents": 4007 }
#       },
#       {
#         "orderId": "A200",
#         "shipTo": { "country": "US" },
#         "customer": { "email": "bob@example.org", "vatId": null },
#         "lines": [
#           { "sku": "WID-001", "qty": 2, "unitCents": 999 },
#           { "sku": "GAD-002", "qty": 1, "unitCents": 1500 }
#         ],
#         "declared": { "netCents": 3498, "vatCents": 0, "grossCents": 3498 }
#       },
#       {
#         "orderId": "A300",
#         "shipTo": { "country": "NL" },
#         "customer": { "email": "acct@company.nl", "vatId": "NL999999999B01" },
#         "lines": [
#           { "sku": "WID-001", "qty": 2, "unitCents": 999 },
#           { "sku": "GAD-002", "qty": 1, "unitCents": 1500 }
#         ],
#         "declared": { "netCents": 3498, "vatCents": 0, "grossCents": 3498 }
#       },
#       {
#         "orderId": "A301",
#         "shipTo": { "country": "NL" },
#         "customer": { "email": "billing@company.nl", "vatId": "NL999999999B01" },
#         "lines": [
#           { "sku": "WID-001", "qty": 2, "unitCents": 999 },
#           { "sku": "GAD-002", "qty": 1, "unitCents": 1500 }
#         ],
#         "declared": { "netCents": 3498, "vatCents": 0, "grossCents": 3498 }
#       },
#       {
#         "orderId": "A400",
#         "shipTo": { "country": "BE" },
#         "customer": { "email": "ada@other.example", "vatId": null },
#         "lines": [
#           { "sku": "WID-001", "qty": 2, "unitCents": 999 },
#           { "sku": "GAD-002", "qty": 1, "unitCents": 1500 }
#         ],
#         "declared": { "netCents": 3498, "vatCents": 508, "grossCents": 4006 }
#       }
#     ]
#   }"""^^rdf:JSON "/orders") string:jsonPointer ("""{"orderId":"A100","shipTo":{"country":"BE"},"customer":{"email":"Ada@Example.ORG","vatId":null},"lines":[{"sku":"wid-001","qty":2,"unitCents":999},{"sku":"GAD-002","qty":1,"unitCents":1500}],"declared":{"netCents":3498,"vatCents":509,"grossCents":4007}}"""^^rdf:JSON """{"orderId":"A200","shipTo":{"country":"US"},"customer":{"email":"bob@example.org","vatId":null},"lines":[{"sku":"WID-001","qty":2,"unitCents":999},{"sku":"GAD-002","qty":1,"unitCents":1500}],"declared":{"netCents":3498,"vatCents":0,"grossCents":3498}}"""^^rdf:JSON """{"orderId":"A300","shipTo":{"country":"NL"},"customer":{"email":"acct@company.nl","vatId":"NL999999999B01"},"lines":[{"sku":"WID-001","qty":2,"unitCents":999},{"sku":"GAD-002","qty":1,"unitCents":1500}],"declared":{"netCents":3498,"vatCents":0,"grossCents":3498}}"""^^rdf:JSON """{"orderId":"A301","shipTo":{"country":"NL"},"customer":{"email":"billing@company.nl","vatId":"NL999999999B01"},"lines":[{"sku":"WID-001","qty":2,"unitCents":999},{"sku":"GAD-002","qty":1,"unitCents":1500}],"declared":{"netCents":3498,"vatCents":0,"grossCents":3498}}"""^^rdf:JSON """{"orderId":"A400","shipTo":{"country":"BE"},"customer":{"email":"ada@other.example","vatId":null},"lines":[{"sku":"WID-001","qty":2,"unitCents":999},{"sku":"GAD-002","qty":1,"unitCents":1500}],"declared":{"netCents":3498,"vatCents":508,"grossCents":4006}}"""^^rdf:JSON) .
#   ("""{"orderId":"A100","shipTo":{"country":"BE"},"customer":{"email":"Ada@Example.ORG","vatId":null},"lines":[{"sku":"wid-001","qty":2,"unitCents":999},{"sku":"GAD-002","qty":1,"unitCents":1500}],"declared":{"netCents":3498,"vatCents":509,"grossCents":4007}}"""^^rdf:JSON """{"orderId":"A200","shipTo":{"country":"US"},"customer":{"email":"bob@example.org","vatId":null},"lines":[{"sku":"WID-001","qty":2,"unitCents":999},{"sku":"GAD-002","qty":1,"unitCents":1500}],"declared":{"netCents":3498,"vatCents":0,"grossCents":3498}}"""^^rdf:JSON """{"orderId":"A300","shipTo":{"country":"NL"},"customer":{"email":"acct@company.nl","vatId":"NL999999999B01"},"lines":[{"sku":"WID-001","qty":2,"unitCents":999},{"sku":"GAD-002","qty":1,"unitCents":1500}],"declared":{"netCents":3498,"vatCents":0,"grossCents":3498}}"""^^rdf:JSON """{"orderId":"A301","shipTo":{"country":"NL"},"customer":{"email":"billing@company.nl","vatId":"NL999999999B01"},"lines":[{"sku":"WID-001","qty":2,"unitCents":999},{"sku":"GAD-002","qty":1,"unitCents":1500}],"declared":{"netCents":3498,"vatCents":0,"grossCents":3498}}"""^^rdf:JSON """{"orderId":"A400","shipTo":{"country":"BE"},"customer":{"email":"ada@other.example","vatId":null},"lines":[{"sku":"WID-001","qty":2,"unitCents":999},{"sku":"GAD-002","qty":1,"unitCents":1500}],"declared":{"netCents":3498,"vatCents":508,"grossCents":4006}}"""^^rdf:JSON) list:iterate (0 """{"orderId":"A100","shipTo":{"country":"BE"},"customer":{"email":"Ada@Example.ORG","vatId":null},"lines":[{"sku":"wid-001","qty":2,"unitCents":999},{"sku":"GAD-002","qty":1,"unitCents":1500}],"declared":{"netCents":3498,"vatCents":509,"grossCents":4007}}"""^^rdf:JSON) .
#   ("""{"orderId":"A100","shipTo":{"country":"BE"},"customer":{"email":"Ada@Example.ORG","vatId":null},"lines":[{"sku":"wid-001","qty":2,"unitCents":999},{"sku":"GAD-002","qty":1,"unitCents":1500}],"declared":{"netCents":3498,"vatCents":509,"grossCents":4007}}"""^^rdf:JSON "/orderId") string:jsonPointer "A100" .
#   ("urn:example:order:%s" "A100") string:format "urn:example:order:A100" .
#   <urn:example:order:A100> log:uri "urn:example:order:A100" .
#   ("""{"orderId":"A100","shipTo":{"country":"BE"},"customer":{"email":"Ada@Example.ORG","vatId":null},"lines":[{"sku":"wid-001","qty":2,"unitCents":999},{"sku":"GAD-002","qty":1,"unitCents":1500}],"declared":{"netCents":3498,"vatCents":509,"grossCents":4007}}"""^^rdf:JSON "/lines") string:jsonPointer ("""{"sku":"wid-001","qty":2,"unitCents":999}"""^^rdf:JSON """{"sku":"GAD-002","qty":1,"unitCents":1500}"""^^rdf:JSON) .
#   ("""{"sku":"wid-001","qty":2,"unitCents":999}"""^^rdf:JSON """{"sku":"GAD-002","qty":1,"unitCents":1500}"""^^rdf:JSON) list:iterate (0 """{"sku":"wid-001","qty":2,"unitCents":999}"""^^rdf:JSON) .
#   ("""{"sku":"wid-001","qty":2,"unitCents":999}"""^^rdf:JSON "/sku") string:jsonPointer "wid-001" .
#   ("""{"sku":"wid-001","qty":2,"unitCents":999}"""^^rdf:JSON "/qty") string:jsonPointer 2 .
#   ("""{"sku":"wid-001","qty":2,"unitCents":999}"""^^rdf:JSON "/unitCents") string:jsonPointer 999 .
#   ex:Widget a ex:Product .
#   ex:Widget ex:sku "WID-001" .
#   (2 999) math:product 1998 .
#   ("urn:example:order:%s#line:%s" "A100" 0) string:format "urn:example:order:A100#line:0" .
#   <urn:example:order:A100#line:0> log:uri "urn:example:order:A100#line:0" .
#   "wid-001" string:equalIgnoringCase "WID-001" .
# via the schematic forward rule:
#   {
#     ex:feed ex:json ?J .
#     (?J "/orders") string:jsonPointer ?Orders .
#     ?Orders list:iterate (?OrderIndex ?OrderJson) .
#     (?OrderJson "/orderId") string:jsonPointer ?OrderId .
#     ("urn:example:order:%s" ?OrderId) string:format ?OrderUriStr .
#     ?Order log:uri ?OrderUriStr .
#     (?OrderJson "/lines") string:jsonPointer ?Lines .
#     ?Lines list:iterate (?LineIndex ?LineJson) .
#     (?LineJson "/sku") string:jsonPointer ?SkuJson .
#     (?LineJson "/qty") string:jsonPointer ?Qty .
#     (?LineJson "/unitCents") string:jsonPointer ?UnitCents .
#     ?Product a ex:Product .
#     ?Product ex:sku ?SkuCat .
#     (?Qty ?UnitCents) math:product ?NetCents .
#     ("urn:example:order:%s#line:%s" ?OrderId ?LineIndex) string:format ?LineUriStr .
#     ?Line log:uri ?LineUriStr .
#     ?SkuJson string:equalIgnoringCase ?SkuCat .
#   } => {
#     ?Order ex:line ?Line .
#     ?Line a ex:OrderLine .
#     ?Line ex:lineIndex ?LineIndex .
#     ?Line ex:product ?Product .
#     ?Line ex:sku ?SkuCat .
#     ?Line ex:qty ?Qty .
#     ?Line ex:unitCents ?UnitCents .
#     ?Line ex:netCents ?NetCents .
#   } .
# with substitution (on rule variables):
#   ?J = """{
#     "meta~data": { "batch": "2025-12-18" },
#     "orders": [
#     {
#     "orderId": "A100",
#     "shipTo": { "country": "BE" },
#     "customer": { "email": "Ada@Example.ORG", "vatId": null },
#     "lines": [
#     { "sku": "wid-001", "qty": 2, "unitCents": 999 },
#     { "sku": "GAD-002", "qty": 1, "unitCents": 1500 }
#     ],
#     "declared": { "netCents": 3498, "vatCents": 509, "grossCents": 4007 }
#     },
#     {
#     "orderId": "A200",
#     "shipTo": { "country": "US" },
#     "customer": { "email": "bob@example.org", "vatId": null },
#     "lines": [
#     { "sku": "WID-001", "qty": 2, "unitCents": 999 },
#     { "sku": "GAD-002", "qty": 1, "unitCents": 1500 }
#     ],
#     "declared": { "netCents": 3498, "vatCents": 0, "grossCents": 3498 }
#     },
#     {
#     "orderId": "A300",
#     "shipTo": { "country": "NL" },
#     "customer": { "email": "acct@company.nl", "vatId": "NL999999999B01" },
#     "lines": [
#     { "sku": "WID-001", "qty": 2, "unitCents": 999 },
#     { "sku": "GAD-002", "qty": 1, "unitCents": 1500 }
#     ],
#     "declared": { "netCents": 3498, "vatCents": 0, "grossCents": 3498 }
#     },
#     {
#     "orderId": "A301",
#     "shipTo": { "country": "NL" },
#     "customer": { "email": "billing@company.nl", "vatId": "NL999999999B01" },
#     "lines": [
#     { "sku": "WID-001", "qty": 2, "unitCents": 999 },
#     { "sku": "GAD-002", "qty": 1, "unitCents": 1500 }
#     ],
#     "declared": { "netCents": 3498, "vatCents": 0, "grossCents": 3498 }
#     },
#     {
#     "orderId": "A400",
#     "shipTo": { "country": "BE" },
#     "customer": { "email": "ada@other.example", "vatId": null },
#     "lines": [
#     { "sku": "WID-001", "qty": 2, "unitCents": 999 },
#     { "sku": "GAD-002", "qty": 1, "unitCents": 1500 }
#     ],
#     "declared": { "netCents": 3498, "vatCents": 508, "grossCents": 4006 }
#     }
#     ]
#   }"""^^rdf:JSON
#   ?Line = <urn:example:order:A100#line:0>
#   ?LineIndex = 0
#   ?LineJson = """{"sku":"wid-001","qty":2,"unitCents":999}"""^^rdf:JSON
#   ?LineUriStr = "urn:example:order:A100#line:0"
#   ?Lines = ("""{"sku":"wid-001","qty":2,"unitCents":999}"""^^rdf:JSON """{"sku":"GAD-002","qty":1,"unitCents":1500}"""^^rdf:JSON)
#   ?NetCents = 1998
#   ?Order = <urn:example:order:A100>
#   ?OrderId = "A100"
#   ?OrderIndex = 0
#   ?OrderJson = """{"orderId":"A100","shipTo":{"country":"BE"},"customer":{"email":"Ada@Example.ORG","vatId":null},"lines":[{"sku":"wid-001","qty":2,"unitCents":999},{"sku":"GAD-002","qty":1,"unitCents":1500}],"declared":{"netCents":3498,"vatCents":509,"grossCents":4007}}"""^^rdf:JSON
#   ?OrderUriStr = "urn:example:order:A100"
#   ?Orders = ("""{"orderId":"A100","shipTo":{"country":"BE"},"customer":{"email":"Ada@Example.ORG","vatId":null},"lines":[{"sku":"wid-001","qty":2,"unitCents":999},{"sku":"GAD-002","qty":1,"unitCents":1500}],"declared":{"netCents":3498,"vatCents":509,"grossCents":4007}}"""^^rdf:JSON """{"orderId":"A200","shipTo":{"country":"US"},"customer":{"email":"bob@example.org","vatId":null},"lines":[{"sku":"WID-001","qty":2,"unitCents":999},{"sku":"GAD-002","qty":1,"unitCents":1500}],"declared":{"netCents":3498,"vatCents":0,"grossCents":3498}}"""^^rdf:JSON """{"orderId":"A300","shipTo":{"country":"NL"},"customer":{"email":"acct@company.nl","vatId":"NL999999999B01"},"lines":[{"sku":"WID-001","qty":2,"unitCents":999},{"sku":"GAD-002","qty":1,"unitCents":1500}],"declared":{"netCents":3498,"vatCents":0,"grossCents":3498}}"""^^rdf:JSON """{"orderId":"A301","shipTo":{"country":"NL"},"customer":{"email":"billing@company.nl","vatId":"NL999999999B01"},"lines":[{"sku":"WID-001","qty":2,"unitCents":999},{"sku":"GAD-002","qty":1,"unitCents":1500}],"declared":{"netCents":3498,"vatCents":0,"grossCents":3498}}"""^^rdf:JSON """{"orderId":"A400","shipTo":{"country":"BE"},"customer":{"email":"ada@other.example","vatId":null},"lines":[{"sku":"WID-001","qty":2,"unitCents":999},{"sku":"GAD-002","qty":1,"unitCents":1500}],"declared":{"netCents":3498,"vatCents":508,"grossCents":4006}}"""^^rdf:JSON)
#   ?Product = ex:Widget
#   ?Qty = 2
#   ?SkuCat = "WID-001"
#   ?SkuJson = "wid-001"
#   ?UnitCents = 999
# Therefore the derived triple above is entailed by the rules and facts.
# ----------------------------------------------------------------------

<urn:example:order:A100#line:0> ex:sku "WID-001" .

# ----------------------------------------------------------------------
# Proof for derived triple:
#   <urn:example:order:A100#line:0> ex:qty 2 .
# It holds because the following instance of the rule body is provable:
#   ex:feed ex:json """{
#     "meta~data": { "batch": "2025-12-18" },
#     "orders": [
#       {
#         "orderId": "A100",
#         "shipTo": { "country": "BE" },
#         "customer": { "email": "Ada@Example.ORG", "vatId": null },
#         "lines": [
#           { "sku": "wid-001", "qty": 2, "unitCents": 999 },
#           { "sku": "GAD-002", "qty": 1, "unitCents": 1500 }
#         ],
#         "declared": { "netCents": 3498, "vatCents": 509, "grossCents": 4007 }
#       },
#       {
#         "orderId": "A200",
#         "shipTo": { "country": "US" },
#         "customer": { "email": "bob@example.org", "vatId": null },
#         "lines": [
#           { "sku": "WID-001", "qty": 2, "unitCents": 999 },
#           { "sku": "GAD-002", "qty": 1, "unitCents": 1500 }
#         ],
#         "declared": { "netCents": 3498, "vatCents": 0, "grossCents": 3498 }
#       },
#       {
#         "orderId": "A300",
#         "shipTo": { "country": "NL" },
#         "customer": { "email": "acct@company.nl", "vatId": "NL999999999B01" },
#         "lines": [
#           { "sku": "WID-001", "qty": 2, "unitCents": 999 },
#           { "sku": "GAD-002", "qty": 1, "unitCents": 1500 }
#         ],
#         "declared": { "netCents": 3498, "vatCents": 0, "grossCents": 3498 }
#       },
#       {
#         "orderId": "A301",
#         "shipTo": { "country": "NL" },
#         "customer": { "email": "billing@company.nl", "vatId": "NL999999999B01" },
#         "lines": [
#           { "sku": "WID-001", "qty": 2, "unitCents": 999 },
#           { "sku": "GAD-002", "qty": 1, "unitCents": 1500 }
#         ],
#         "declared": { "netCents": 3498, "vatCents": 0, "grossCents": 3498 }
#       },
#       {
#         "orderId": "A400",
#         "shipTo": { "country": "BE" },
#         "customer": { "email": "ada@other.example", "vatId": null },
#         "lines": [
#           { "sku": "WID-001", "qty": 2, "unitCents": 999 },
#           { "sku": "GAD-002", "qty": 1, "unitCents": 1500 }
#         ],
#         "declared": { "netCents": 3498, "vatCents": 508, "grossCents": 4006 }
#       }
#     ]
#   }"""^^rdf:JSON .
#   ("""{
#     "meta~data": { "batch": "2025-12-18" },
#     "orders": [
#       {
#         "orderId": "A100",
#         "shipTo": { "country": "BE" },
#         "customer": { "email": "Ada@Example.ORG", "vatId": null },
#         "lines": [
#           { "sku": "wid-001", "qty": 2, "unitCents": 999 },
#           { "sku": "GAD-002", "qty": 1, "unitCents": 1500 }
#         ],
#         "declared": { "netCents": 3498, "vatCents": 509, "grossCents": 4007 }
#       },
#       {
#         "orderId": "A200",
#         "shipTo": { "country": "US" },
#         "customer": { "email": "bob@example.org", "vatId": null },
#         "lines": [
#           { "sku": "WID-001", "qty": 2, "unitCents": 999 },
#           { "sku": "GAD-002", "qty": 1, "unitCents": 1500 }
#         ],
#         "declared": { "netCents": 3498, "vatCents": 0, "grossCents": 3498 }
#       },
#       {
#         "orderId": "A300",
#         "shipTo": { "country": "NL" },
#         "customer": { "email": "acct@company.nl", "vatId": "NL999999999B01" },
#         "lines": [
#           { "sku": "WID-001", "qty": 2, "unitCents": 999 },
#           { "sku": "GAD-002", "qty": 1, "unitCents": 1500 }
#         ],
#         "declared": { "netCents": 3498, "vatCents": 0, "grossCents": 3498 }
#       },
#       {
#         "orderId": "A301",
#         "shipTo": { "country": "NL" },
#         "customer": { "email": "billing@company.nl", "vatId": "NL999999999B01" },
#         "lines": [
#           { "sku": "WID-001", "qty": 2, "unitCents": 999 },
#           { "sku": "GAD-002", "qty": 1, "unitCents": 1500 }
#         ],
#         "declared": { "netCents": 3498, "vatCents": 0, "grossCents": 3498 }
#       },
#       {
#         "orderId": "A400",
#         "shipTo": { "country": "BE" },
#         "customer": { "email": "ada@other.example", "vatId": null },
#         "lines": [
#           { "sku": "WID-001", "qty": 2, "unitCents": 999 },
#           { "sku": "GAD-002", "qty": 1, "unitCents": 1500 }
#         ],
#         "declared": { "netCents": 3498, "vatCents": 508, "grossCents": 4006 }
#       }
#     ]
#   }"""^^rdf:JSON "/orders") string:jsonPointer ("""{"orderId":"A100","shipTo":{"country":"BE"},"customer":{"email":"Ada@Example.ORG","vatId":null},"lines":[{"sku":"wid-001","qty":2,"unitCents":999},{"sku":"GAD-002","qty":1,"unitCents":1500}],"declared":{"netCents":3498,"vatCents":509,"grossCents":4007}}"""^^rdf:JSON """{"orderId":"A200","shipTo":{"country":"US"},"customer":{"email":"bob@example.org","vatId":null},"lines":[{"sku":"WID-001","qty":2,"unitCents":999},{"sku":"GAD-002","qty":1,"unitCents":1500}],"declared":{"netCents":3498,"vatCents":0,"grossCents":3498}}"""^^rdf:JSON """{"orderId":"A300","shipTo":{"country":"NL"},"customer":{"email":"acct@company.nl","vatId":"NL999999999B01"},"lines":[{"sku":"WID-001","qty":2,"unitCents":999},{"sku":"GAD-002","qty":1,"unitCents":1500}],"declared":{"netCents":3498,"vatCents":0,"grossCents":3498}}"""^^rdf:JSON """{"orderId":"A301","shipTo":{"country":"NL"},"customer":{"email":"billing@company.nl","vatId":"NL999999999B01"},"lines":[{"sku":"WID-001","qty":2,"unitCents":999},{"sku":"GAD-002","qty":1,"unitCents":1500}],"declared":{"netCents":3498,"vatCents":0,"grossCents":3498}}"""^^rdf:JSON """{"orderId":"A400","shipTo":{"country":"BE"},"customer":{"email":"ada@other.example","vatId":null},"lines":[{"sku":"WID-001","qty":2,"unitCents":999},{"sku":"GAD-002","qty":1,"unitCents":1500}],"declared":{"netCents":3498,"vatCents":508,"grossCents":4006}}"""^^rdf:JSON) .
#   ("""{"orderId":"A100","shipTo":{"country":"BE"},"customer":{"email":"Ada@Example.ORG","vatId":null},"lines":[{"sku":"wid-001","qty":2,"unitCents":999},{"sku":"GAD-002","qty":1,"unitCents":1500}],"declared":{"netCents":3498,"vatCents":509,"grossCents":4007}}"""^^rdf:JSON """{"orderId":"A200","shipTo":{"country":"US"},"customer":{"email":"bob@example.org","vatId":null},"lines":[{"sku":"WID-001","qty":2,"unitCents":999},{"sku":"GAD-002","qty":1,"unitCents":1500}],"declared":{"netCents":3498,"vatCents":0,"grossCents":3498}}"""^^rdf:JSON """{"orderId":"A300","shipTo":{"country":"NL"},"customer":{"email":"acct@company.nl","vatId":"NL999999999B01"},"lines":[{"sku":"WID-001","qty":2,"unitCents":999},{"sku":"GAD-002","qty":1,"unitCents":1500}],"declared":{"netCents":3498,"vatCents":0,"grossCents":3498}}"""^^rdf:JSON """{"orderId":"A301","shipTo":{"country":"NL"},"customer":{"email":"billing@company.nl","vatId":"NL999999999B01"},"lines":[{"sku":"WID-001","qty":2,"unitCents":999},{"sku":"GAD-002","qty":1,"unitCents":1500}],"declared":{"netCents":3498,"vatCents":0,"grossCents":3498}}"""^^rdf:JSON """{"orderId":"A400","shipTo":{"country":"BE"},"customer":{"email":"ada@other.example","vatId":null},"lines":[{"sku":"WID-001","qty":2,"unitCents":999},{"sku":"GAD-002","qty":1,"unitCents":1500}],"declared":{"netCents":3498,"vatCents":508,"grossCents":4006}}"""^^rdf:JSON) list:iterate (0 """{"orderId":"A100","shipTo":{"country":"BE"},"customer":{"email":"Ada@Example.ORG","vatId":null},"lines":[{"sku":"wid-001","qty":2,"unitCents":999},{"sku":"GAD-002","qty":1,"unitCents":1500}],"declared":{"netCents":3498,"vatCents":509,"grossCents":4007}}"""^^rdf:JSON) .
#   ("""{"orderId":"A100","shipTo":{"country":"BE"},"customer":{"email":"Ada@Example.ORG","vatId":null},"lines":[{"sku":"wid-001","qty":2,"unitCents":999},{"sku":"GAD-002","qty":1,"unitCents":1500}],"declared":{"netCents":3498,"vatCents":509,"grossCents":4007}}"""^^rdf:JSON "/orderId") string:jsonPointer "A100" .
#   ("urn:example:order:%s" "A100") string:format "urn:example:order:A100" .
#   <urn:example:order:A100> log:uri "urn:example:order:A100" .
#   ("""{"orderId":"A100","shipTo":{"country":"BE"},"customer":{"email":"Ada@Example.ORG","vatId":null},"lines":[{"sku":"wid-001","qty":2,"unitCents":999},{"sku":"GAD-002","qty":1,"unitCents":1500}],"declared":{"netCents":3498,"vatCents":509,"grossCents":4007}}"""^^rdf:JSON "/lines") string:jsonPointer ("""{"sku":"wid-001","qty":2,"unitCents":999}"""^^rdf:JSON """{"sku":"GAD-002","qty":1,"unitCents":1500}"""^^rdf:JSON) .
#   ("""{"sku":"wid-001","qty":2,"unitCents":999}"""^^rdf:JSON """{"sku":"GAD-002","qty":1,"unitCents":1500}"""^^rdf:JSON) list:iterate (0 """{"sku":"wid-001","qty":2,"unitCents":999}"""^^rdf:JSON) .
#   ("""{"sku":"wid-001","qty":2,"unitCents":999}"""^^rdf:JSON "/sku") string:jsonPointer "wid-001" .
#   ("""{"sku":"wid-001","qty":2,"unitCents":999}"""^^rdf:JSON "/qty") string:jsonPointer 2 .
#   ("""{"sku":"wid-001","qty":2,"unitCents":999}"""^^rdf:JSON "/unitCents") string:jsonPointer 999 .
#   ex:Widget a ex:Product .
#   ex:Widget ex:sku "WID-001" .
#   (2 999) math:product 1998 .
#   ("urn:example:order:%s#line:%s" "A100" 0) string:format "urn:example:order:A100#line:0" .
#   <urn:example:order:A100#line:0> log:uri "urn:example:order:A100#line:0" .
#   "wid-001" string:equalIgnoringCase "WID-001" .
# via the schematic forward rule:
#   {
#     ex:feed ex:json ?J .
#     (?J "/orders") string:jsonPointer ?Orders .
#     ?Orders list:iterate (?OrderIndex ?OrderJson) .
#     (?OrderJson "/orderId") string:jsonPointer ?OrderId .
#     ("urn:example:order:%s" ?OrderId) string:format ?OrderUriStr .
#     ?Order log:uri ?OrderUriStr .
#     (?OrderJson "/lines") string:jsonPointer ?Lines .
#     ?Lines list:iterate (?LineIndex ?LineJson) .
#     (?LineJson "/sku") string:jsonPointer ?SkuJson .
#     (?LineJson "/qty") string:jsonPointer ?Qty .
#     (?LineJson "/unitCents") string:jsonPointer ?UnitCents .
#     ?Product a ex:Product .
#     ?Product ex:sku ?SkuCat .
#     (?Qty ?UnitCents) math:product ?NetCents .
#     ("urn:example:order:%s#line:%s" ?OrderId ?LineIndex) string:format ?LineUriStr .
#     ?Line log:uri ?LineUriStr .
#     ?SkuJson string:equalIgnoringCase ?SkuCat .
#   } => {
#     ?Order ex:line ?Line .
#     ?Line a ex:OrderLine .
#     ?Line ex:lineIndex ?LineIndex .
#     ?Line ex:product ?Product .
#     ?Line ex:sku ?SkuCat .
#     ?Line ex:qty ?Qty .
#     ?Line ex:unitCents ?UnitCents .
#     ?Line ex:netCents ?NetCents .
#   } .
# with substitution (on rule variables):
#   ?J = """{
#     "meta~data": { "batch": "2025-12-18" },
#     "orders": [
#     {
#     "orderId": "A100",
#     "shipTo": { "country": "BE" },
#     "customer": { "email": "Ada@Example.ORG", "vatId": null },
#     "lines": [
#     { "sku": "wid-001", "qty": 2, "unitCents": 999 },
#     { "sku": "GAD-002", "qty": 1, "unitCents": 1500 }
#     ],
#     "declared": { "netCents": 3498, "vatCents": 509, "grossCents": 4007 }
#     },
#     {
#     "orderId": "A200",
#     "shipTo": { "country": "US" },
#     "customer": { "email": "bob@example.org", "vatId": null },
#     "lines": [
#     { "sku": "WID-001", "qty": 2, "unitCents": 999 },
#     { "sku": "GAD-002", "qty": 1, "unitCents": 1500 }
#     ],
#     "declared": { "netCents": 3498, "vatCents": 0, "grossCents": 3498 }
#     },
#     {
#     "orderId": "A300",
#     "shipTo": { "country": "NL" },
#     "customer": { "email": "acct@company.nl", "vatId": "NL999999999B01" },
#     "lines": [
#     { "sku": "WID-001", "qty": 2, "unitCents": 999 },
#     { "sku": "GAD-002", "qty": 1, "unitCents": 1500 }
#     ],
#     "declared": { "netCents": 3498, "vatCents": 0, "grossCents": 3498 }
#     },
#     {
#     "orderId": "A301",
#     "shipTo": { "country": "NL" },
#     "customer": { "email": "billing@company.nl", "vatId": "NL999999999B01" },
#     "lines": [
#     { "sku": "WID-001", "qty": 2, "unitCents": 999 },
#     { "sku": "GAD-002", "qty": 1, "unitCents": 1500 }
#     ],
#     "declared": { "netCents": 3498, "vatCents": 0, "grossCents": 3498 }
#     },
#     {
#     "orderId": "A400",
#     "shipTo": { "country": "BE" },
#     "customer": { "email": "ada@other.example", "vatId": null },
#     "lines": [
#     { "sku": "WID-001", "qty": 2, "unitCents": 999 },
#     { "sku": "GAD-002", "qty": 1, "unitCents": 1500 }
#     ],
#     "declared": { "netCents": 3498, "vatCents": 508, "grossCents": 4006 }
#     }
#     ]
#   }"""^^rdf:JSON
#   ?Line = <urn:example:order:A100#line:0>
#   ?LineIndex = 0
#   ?LineJson = """{"sku":"wid-001","qty":2,"unitCents":999}"""^^rdf:JSON
#   ?LineUriStr = "urn:example:order:A100#line:0"
#   ?Lines = ("""{"sku":"wid-001","qty":2,"unitCents":999}"""^^rdf:JSON """{"sku":"GAD-002","qty":1,"unitCents":1500}"""^^rdf:JSON)
#   ?NetCents = 1998
#   ?Order = <urn:example:order:A100>
#   ?OrderId = "A100"
#   ?OrderIndex = 0
#   ?OrderJson = """{"orderId":"A100","shipTo":{"country":"BE"},"customer":{"email":"Ada@Example.ORG","vatId":null},"lines":[{"sku":"wid-001","qty":2,"unitCents":999},{"sku":"GAD-002","qty":1,"unitCents":1500}],"declared":{"netCents":3498,"vatCents":509,"grossCents":4007}}"""^^rdf:JSON
#   ?OrderUriStr = "urn:example:order:A100"
#   ?Orders = ("""{"orderId":"A100","shipTo":{"country":"BE"},"customer":{"email":"Ada@Example.ORG","vatId":null},"lines":[{"sku":"wid-001","qty":2,"unitCents":999},{"sku":"GAD-002","qty":1,"unitCents":1500}],"declared":{"netCents":3498,"vatCents":509,"grossCents":4007}}"""^^rdf:JSON """{"orderId":"A200","shipTo":{"country":"US"},"customer":{"email":"bob@example.org","vatId":null},"lines":[{"sku":"WID-001","qty":2,"unitCents":999},{"sku":"GAD-002","qty":1,"unitCents":1500}],"declared":{"netCents":3498,"vatCents":0,"grossCents":3498}}"""^^rdf:JSON """{"orderId":"A300","shipTo":{"country":"NL"},"customer":{"email":"acct@company.nl","vatId":"NL999999999B01"},"lines":[{"sku":"WID-001","qty":2,"unitCents":999},{"sku":"GAD-002","qty":1,"unitCents":1500}],"declared":{"netCents":3498,"vatCents":0,"grossCents":3498}}"""^^rdf:JSON """{"orderId":"A301","shipTo":{"country":"NL"},"customer":{"email":"billing@company.nl","vatId":"NL999999999B01"},"lines":[{"sku":"WID-001","qty":2,"unitCents":999},{"sku":"GAD-002","qty":1,"unitCents":1500}],"declared":{"netCents":3498,"vatCents":0,"grossCents":3498}}"""^^rdf:JSON """{"orderId":"A400","shipTo":{"country":"BE"},"customer":{"email":"ada@other.example","vatId":null},"lines":[{"sku":"WID-001","qty":2,"unitCents":999},{"sku":"GAD-002","qty":1,"unitCents":1500}],"declared":{"netCents":3498,"vatCents":508,"grossCents":4006}}"""^^rdf:JSON)
#   ?Product = ex:Widget
#   ?Qty = 2
#   ?SkuCat = "WID-001"
#   ?SkuJson = "wid-001"
#   ?UnitCents = 999
# Therefore the derived triple above is entailed by the rules and facts.
# ----------------------------------------------------------------------

<urn:example:order:A100#line:0> ex:qty 2 .

# ----------------------------------------------------------------------
# Proof for derived triple:
#   <urn:example:order:A100#line:0> ex:unitCents 999 .
# It holds because the following instance of the rule body is provable:
#   ex:feed ex:json """{
#     "meta~data": { "batch": "2025-12-18" },
#     "orders": [
#       {
#         "orderId": "A100",
#         "shipTo": { "country": "BE" },
#         "customer": { "email": "Ada@Example.ORG", "vatId": null },
#         "lines": [
#           { "sku": "wid-001", "qty": 2, "unitCents": 999 },
#           { "sku": "GAD-002", "qty": 1, "unitCents": 1500 }
#         ],
#         "declared": { "netCents": 3498, "vatCents": 509, "grossCents": 4007 }
#       },
#       {
#         "orderId": "A200",
#         "shipTo": { "country": "US" },
#         "customer": { "email": "bob@example.org", "vatId": null },
#         "lines": [
#           { "sku": "WID-001", "qty": 2, "unitCents": 999 },
#           { "sku": "GAD-002", "qty": 1, "unitCents": 1500 }
#         ],
#         "declared": { "netCents": 3498, "vatCents": 0, "grossCents": 3498 }
#       },
#       {
#         "orderId": "A300",
#         "shipTo": { "country": "NL" },
#         "customer": { "email": "acct@company.nl", "vatId": "NL999999999B01" },
#         "lines": [
#           { "sku": "WID-001", "qty": 2, "unitCents": 999 },
#           { "sku": "GAD-002", "qty": 1, "unitCents": 1500 }
#         ],
#         "declared": { "netCents": 3498, "vatCents": 0, "grossCents": 3498 }
#       },
#       {
#         "orderId": "A301",
#         "shipTo": { "country": "NL" },
#         "customer": { "email": "billing@company.nl", "vatId": "NL999999999B01" },
#         "lines": [
#           { "sku": "WID-001", "qty": 2, "unitCents": 999 },
#           { "sku": "GAD-002", "qty": 1, "unitCents": 1500 }
#         ],
#         "declared": { "netCents": 3498, "vatCents": 0, "grossCents": 3498 }
#       },
#       {
#         "orderId": "A400",
#         "shipTo": { "country": "BE" },
#         "customer": { "email": "ada@other.example", "vatId": null },
#         "lines": [
#           { "sku": "WID-001", "qty": 2, "unitCents": 999 },
#           { "sku": "GAD-002", "qty": 1, "unitCents": 1500 }
#         ],
#         "declared": { "netCents": 3498, "vatCents": 508, "grossCents": 4006 }
#       }
#     ]
#   }"""^^rdf:JSON .
#   ("""{
#     "meta~data": { "batch": "2025-12-18" },
#     "orders": [
#       {
#         "orderId": "A100",
#         "shipTo": { "country": "BE" },
#         "customer": { "email": "Ada@Example.ORG", "vatId": null },
#         "lines": [
#           { "sku": "wid-001", "qty": 2, "unitCents": 999 },
#           { "sku": "GAD-002", "qty": 1, "unitCents": 1500 }
#         ],
#         "declared": { "netCents": 3498, "vatCents": 509, "grossCents": 4007 }
#       },
#       {
#         "orderId": "A200",
#         "shipTo": { "country": "US" },
#         "customer": { "email": "bob@example.org", "vatId": null },
#         "lines": [
#           { "sku": "WID-001", "qty": 2, "unitCents": 999 },
#           { "sku": "GAD-002", "qty": 1, "unitCents": 1500 }
#         ],
#         "declared": { "netCents": 3498, "vatCents": 0, "grossCents": 3498 }
#       },
#       {
#         "orderId": "A300",
#         "shipTo": { "country": "NL" },
#         "customer": { "email": "acct@company.nl", "vatId": "NL999999999B01" },
#         "lines": [
#           { "sku": "WID-001", "qty": 2, "unitCents": 999 },
#           { "sku": "GAD-002", "qty": 1, "unitCents": 1500 }
#         ],
#         "declared": { "netCents": 3498, "vatCents": 0, "grossCents": 3498 }
#       },
#       {
#         "orderId": "A301",
#         "shipTo": { "country": "NL" },
#         "customer": { "email": "billing@company.nl", "vatId": "NL999999999B01" },
#         "lines": [
#           { "sku": "WID-001", "qty": 2, "unitCents": 999 },
#           { "sku": "GAD-002", "qty": 1, "unitCents": 1500 }
#         ],
#         "declared": { "netCents": 3498, "vatCents": 0, "grossCents": 3498 }
#       },
#       {
#         "orderId": "A400",
#         "shipTo": { "country": "BE" },
#         "customer": { "email": "ada@other.example", "vatId": null },
#         "lines": [
#           { "sku": "WID-001", "qty": 2, "unitCents": 999 },
#           { "sku": "GAD-002", "qty": 1, "unitCents": 1500 }
#         ],
#         "declared": { "netCents": 3498, "vatCents": 508, "grossCents": 4006 }
#       }
#     ]
#   }"""^^rdf:JSON "/orders") string:jsonPointer ("""{"orderId":"A100","shipTo":{"country":"BE"},"customer":{"email":"Ada@Example.ORG","vatId":null},"lines":[{"sku":"wid-001","qty":2,"unitCents":999},{"sku":"GAD-002","qty":1,"unitCents":1500}],"declared":{"netCents":3498,"vatCents":509,"grossCents":4007}}"""^^rdf:JSON """{"orderId":"A200","shipTo":{"country":"US"},"customer":{"email":"bob@example.org","vatId":null},"lines":[{"sku":"WID-001","qty":2,"unitCents":999},{"sku":"GAD-002","qty":1,"unitCents":1500}],"declared":{"netCents":3498,"vatCents":0,"grossCents":3498}}"""^^rdf:JSON """{"orderId":"A300","shipTo":{"country":"NL"},"customer":{"email":"acct@company.nl","vatId":"NL999999999B01"},"lines":[{"sku":"WID-001","qty":2,"unitCents":999},{"sku":"GAD-002","qty":1,"unitCents":1500}],"declared":{"netCents":3498,"vatCents":0,"grossCents":3498}}"""^^rdf:JSON """{"orderId":"A301","shipTo":{"country":"NL"},"customer":{"email":"billing@company.nl","vatId":"NL999999999B01"},"lines":[{"sku":"WID-001","qty":2,"unitCents":999},{"sku":"GAD-002","qty":1,"unitCents":1500}],"declared":{"netCents":3498,"vatCents":0,"grossCents":3498}}"""^^rdf:JSON """{"orderId":"A400","shipTo":{"country":"BE"},"customer":{"email":"ada@other.example","vatId":null},"lines":[{"sku":"WID-001","qty":2,"unitCents":999},{"sku":"GAD-002","qty":1,"unitCents":1500}],"declared":{"netCents":3498,"vatCents":508,"grossCents":4006}}"""^^rdf:JSON) .
#   ("""{"orderId":"A100","shipTo":{"country":"BE"},"customer":{"email":"Ada@Example.ORG","vatId":null},"lines":[{"sku":"wid-001","qty":2,"unitCents":999},{"sku":"GAD-002","qty":1,"unitCents":1500}],"declared":{"netCents":3498,"vatCents":509,"grossCents":4007}}"""^^rdf:JSON """{"orderId":"A200","shipTo":{"country":"US"},"customer":{"email":"bob@example.org","vatId":null},"lines":[{"sku":"WID-001","qty":2,"unitCents":999},{"sku":"GAD-002","qty":1,"unitCents":1500}],"declared":{"netCents":3498,"vatCents":0,"grossCents":3498}}"""^^rdf:JSON """{"orderId":"A300","shipTo":{"country":"NL"},"customer":{"email":"acct@company.nl","vatId":"NL999999999B01"},"lines":[{"sku":"WID-001","qty":2,"unitCents":999},{"sku":"GAD-002","qty":1,"unitCents":1500}],"declared":{"netCents":3498,"vatCents":0,"grossCents":3498}}"""^^rdf:JSON """{"orderId":"A301","shipTo":{"country":"NL"},"customer":{"email":"billing@company.nl","vatId":"NL999999999B01"},"lines":[{"sku":"WID-001","qty":2,"unitCents":999},{"sku":"GAD-002","qty":1,"unitCents":1500}],"declared":{"netCents":3498,"vatCents":0,"grossCents":3498}}"""^^rdf:JSON """{"orderId":"A400","shipTo":{"country":"BE"},"customer":{"email":"ada@other.example","vatId":null},"lines":[{"sku":"WID-001","qty":2,"unitCents":999},{"sku":"GAD-002","qty":1,"unitCents":1500}],"declared":{"netCents":3498,"vatCents":508,"grossCents":4006}}"""^^rdf:JSON) list:iterate (0 """{"orderId":"A100","shipTo":{"country":"BE"},"customer":{"email":"Ada@Example.ORG","vatId":null},"lines":[{"sku":"wid-001","qty":2,"unitCents":999},{"sku":"GAD-002","qty":1,"unitCents":1500}],"declared":{"netCents":3498,"vatCents":509,"grossCents":4007}}"""^^rdf:JSON) .
#   ("""{"orderId":"A100","shipTo":{"country":"BE"},"customer":{"email":"Ada@Example.ORG","vatId":null},"lines":[{"sku":"wid-001","qty":2,"unitCents":999},{"sku":"GAD-002","qty":1,"unitCents":1500}],"declared":{"netCents":3498,"vatCents":509,"grossCents":4007}}"""^^rdf:JSON "/orderId") string:jsonPointer "A100" .
#   ("urn:example:order:%s" "A100") string:format "urn:example:order:A100" .
#   <urn:example:order:A100> log:uri "urn:example:order:A100" .
#   ("""{"orderId":"A100","shipTo":{"country":"BE"},"customer":{"email":"Ada@Example.ORG","vatId":null},"lines":[{"sku":"wid-001","qty":2,"unitCents":999},{"sku":"GAD-002","qty":1,"unitCents":1500}],"declared":{"netCents":3498,"vatCents":509,"grossCents":4007}}"""^^rdf:JSON "/lines") string:jsonPointer ("""{"sku":"wid-001","qty":2,"unitCents":999}"""^^rdf:JSON """{"sku":"GAD-002","qty":1,"unitCents":1500}"""^^rdf:JSON) .
#   ("""{"sku":"wid-001","qty":2,"unitCents":999}"""^^rdf:JSON """{"sku":"GAD-002","qty":1,"unitCents":1500}"""^^rdf:JSON) list:iterate (0 """{"sku":"wid-001","qty":2,"unitCents":999}"""^^rdf:JSON) .
#   ("""{"sku":"wid-001","qty":2,"unitCents":999}"""^^rdf:JSON "/sku") string:jsonPointer "wid-001" .
#   ("""{"sku":"wid-001","qty":2,"unitCents":999}"""^^rdf:JSON "/qty") string:jsonPointer 2 .
#   ("""{"sku":"wid-001","qty":2,"unitCents":999}"""^^rdf:JSON "/unitCents") string:jsonPointer 999 .
#   ex:Widget a ex:Product .
#   ex:Widget ex:sku "WID-001" .
#   (2 999) math:product 1998 .
#   ("urn:example:order:%s#line:%s" "A100" 0) string:format "urn:example:order:A100#line:0" .
#   <urn:example:order:A100#line:0> log:uri "urn:example:order:A100#line:0" .
#   "wid-001" string:equalIgnoringCase "WID-001" .
# via the schematic forward rule:
#   {
#     ex:feed ex:json ?J .
#     (?J "/orders") string:jsonPointer ?Orders .
#     ?Orders list:iterate (?OrderIndex ?OrderJson) .
#     (?OrderJson "/orderId") string:jsonPointer ?OrderId .
#     ("urn:example:order:%s" ?OrderId) string:format ?OrderUriStr .
#     ?Order log:uri ?OrderUriStr .
#     (?OrderJson "/lines") string:jsonPointer ?Lines .
#     ?Lines list:iterate (?LineIndex ?LineJson) .
#     (?LineJson "/sku") string:jsonPointer ?SkuJson .
#     (?LineJson "/qty") string:jsonPointer ?Qty .
#     (?LineJson "/unitCents") string:jsonPointer ?UnitCents .
#     ?Product a ex:Product .
#     ?Product ex:sku ?SkuCat .
#     (?Qty ?UnitCents) math:product ?NetCents .
#     ("urn:example:order:%s#line:%s" ?OrderId ?LineIndex) string:format ?LineUriStr .
#     ?Line log:uri ?LineUriStr .
#     ?SkuJson string:equalIgnoringCase ?SkuCat .
#   } => {
#     ?Order ex:line ?Line .
#     ?Line a ex:OrderLine .
#     ?Line ex:lineIndex ?LineIndex .
#     ?Line ex:product ?Product .
#     ?Line ex:sku ?SkuCat .
#     ?Line ex:qty ?Qty .
#     ?Line ex:unitCents ?UnitCents .
#     ?Line ex:netCents ?NetCents .
#   } .
# with substitution (on rule variables):
#   ?J = """{
#     "meta~data": { "batch": "2025-12-18" },
#     "orders": [
#     {
#     "orderId": "A100",
#     "shipTo": { "country": "BE" },
#     "customer": { "email": "Ada@Example.ORG", "vatId": null },
#     "lines": [
#     { "sku": "wid-001", "qty": 2, "unitCents": 999 },
#     { "sku": "GAD-002", "qty": 1, "unitCents": 1500 }
#     ],
#     "declared": { "netCents": 3498, "vatCents": 509, "grossCents": 4007 }
#     },
#     {
#     "orderId": "A200",
#     "shipTo": { "country": "US" },
#     "customer": { "email": "bob@example.org", "vatId": null },
#     "lines": [
#     { "sku": "WID-001", "qty": 2, "unitCents": 999 },
#     { "sku": "GAD-002", "qty": 1, "unitCents": 1500 }
#     ],
#     "declared": { "netCents": 3498, "vatCents": 0, "grossCents": 3498 }
#     },
#     {
#     "orderId": "A300",
#     "shipTo": { "country": "NL" },
#     "customer": { "email": "acct@company.nl", "vatId": "NL999999999B01" },
#     "lines": [
#     { "sku": "WID-001", "qty": 2, "unitCents": 999 },
#     { "sku": "GAD-002", "qty": 1, "unitCents": 1500 }
#     ],
#     "declared": { "netCents": 3498, "vatCents": 0, "grossCents": 3498 }
#     },
#     {
#     "orderId": "A301",
#     "shipTo": { "country": "NL" },
#     "customer": { "email": "billing@company.nl", "vatId": "NL999999999B01" },
#     "lines": [
#     { "sku": "WID-001", "qty": 2, "unitCents": 999 },
#     { "sku": "GAD-002", "qty": 1, "unitCents": 1500 }
#     ],
#     "declared": { "netCents": 3498, "vatCents": 0, "grossCents": 3498 }
#     },
#     {
#     "orderId": "A400",
#     "shipTo": { "country": "BE" },
#     "customer": { "email": "ada@other.example", "vatId": null },
#     "lines": [
#     { "sku": "WID-001", "qty": 2, "unitCents": 999 },
#     { "sku": "GAD-002", "qty": 1, "unitCents": 1500 }
#     ],
#     "declared": { "netCents": 3498, "vatCents": 508, "grossCents": 4006 }
#     }
#     ]
#   }"""^^rdf:JSON
#   ?Line = <urn:example:order:A100#line:0>
#   ?LineIndex = 0
#   ?LineJson = """{"sku":"wid-001","qty":2,"unitCents":999}"""^^rdf:JSON
#   ?LineUriStr = "urn:example:order:A100#line:0"
#   ?Lines = ("""{"sku":"wid-001","qty":2,"unitCents":999}"""^^rdf:JSON """{"sku":"GAD-002","qty":1,"unitCents":1500}"""^^rdf:JSON)
#   ?NetCents = 1998
#   ?Order = <urn:example:order:A100>
#   ?OrderId = "A100"
#   ?OrderIndex = 0
#   ?OrderJson = """{"orderId":"A100","shipTo":{"country":"BE"},"customer":{"email":"Ada@Example.ORG","vatId":null},"lines":[{"sku":"wid-001","qty":2,"unitCents":999},{"sku":"GAD-002","qty":1,"unitCents":1500}],"declared":{"netCents":3498,"vatCents":509,"grossCents":4007}}"""^^rdf:JSON
#   ?OrderUriStr = "urn:example:order:A100"
#   ?Orders = ("""{"orderId":"A100","shipTo":{"country":"BE"},"customer":{"email":"Ada@Example.ORG","vatId":null},"lines":[{"sku":"wid-001","qty":2,"unitCents":999},{"sku":"GAD-002","qty":1,"unitCents":1500}],"declared":{"netCents":3498,"vatCents":509,"grossCents":4007}}"""^^rdf:JSON """{"orderId":"A200","shipTo":{"country":"US"},"customer":{"email":"bob@example.org","vatId":null},"lines":[{"sku":"WID-001","qty":2,"unitCents":999},{"sku":"GAD-002","qty":1,"unitCents":1500}],"declared":{"netCents":3498,"vatCents":0,"grossCents":3498}}"""^^rdf:JSON """{"orderId":"A300","shipTo":{"country":"NL"},"customer":{"email":"acct@company.nl","vatId":"NL999999999B01"},"lines":[{"sku":"WID-001","qty":2,"unitCents":999},{"sku":"GAD-002","qty":1,"unitCents":1500}],"declared":{"netCents":3498,"vatCents":0,"grossCents":3498}}"""^^rdf:JSON """{"orderId":"A301","shipTo":{"country":"NL"},"customer":{"email":"billing@company.nl","vatId":"NL999999999B01"},"lines":[{"sku":"WID-001","qty":2,"unitCents":999},{"sku":"GAD-002","qty":1,"unitCents":1500}],"declared":{"netCents":3498,"vatCents":0,"grossCents":3498}}"""^^rdf:JSON """{"orderId":"A400","shipTo":{"country":"BE"},"customer":{"email":"ada@other.example","vatId":null},"lines":[{"sku":"WID-001","qty":2,"unitCents":999},{"sku":"GAD-002","qty":1,"unitCents":1500}],"declared":{"netCents":3498,"vatCents":508,"grossCents":4006}}"""^^rdf:JSON)
#   ?Product = ex:Widget
#   ?Qty = 2
#   ?SkuCat = "WID-001"
#   ?SkuJson = "wid-001"
#   ?UnitCents = 999
# Therefore the derived triple above is entailed by the rules and facts.
# ----------------------------------------------------------------------

<urn:example:order:A100#line:0> ex:unitCents 999 .

# ----------------------------------------------------------------------
# Proof for derived triple:
#   <urn:example:order:A100#line:0> ex:netCents 1998 .
# It holds because the following instance of the rule body is provable:
#   ex:feed ex:json """{
#     "meta~data": { "batch": "2025-12-18" },
#     "orders": [
#       {
#         "orderId": "A100",
#         "shipTo": { "country": "BE" },
#         "customer": { "email": "Ada@Example.ORG", "vatId": null },
#         "lines": [
#           { "sku": "wid-001", "qty": 2, "unitCents": 999 },
#           { "sku": "GAD-002", "qty": 1, "unitCents": 1500 }
#         ],
#         "declared": { "netCents": 3498, "vatCents": 509, "grossCents": 4007 }
#       },
#       {
#         "orderId": "A200",
#         "shipTo": { "country": "US" },
#         "customer": { "email": "bob@example.org", "vatId": null },
#         "lines": [
#           { "sku": "WID-001", "qty": 2, "unitCents": 999 },
#           { "sku": "GAD-002", "qty": 1, "unitCents": 1500 }
#         ],
#         "declared": { "netCents": 3498, "vatCents": 0, "grossCents": 3498 }
#       },
#       {
#         "orderId": "A300",
#         "shipTo": { "country": "NL" },
#         "customer": { "email": "acct@company.nl", "vatId": "NL999999999B01" },
#         "lines": [
#           { "sku": "WID-001", "qty": 2, "unitCents": 999 },
#           { "sku": "GAD-002", "qty": 1, "unitCents": 1500 }
#         ],
#         "declared": { "netCents": 3498, "vatCents": 0, "grossCents": 3498 }
#       },
#       {
#         "orderId": "A301",
#         "shipTo": { "country": "NL" },
#         "customer": { "email": "billing@company.nl", "vatId": "NL999999999B01" },
#         "lines": [
#           { "sku": "WID-001", "qty": 2, "unitCents": 999 },
#           { "sku": "GAD-002", "qty": 1, "unitCents": 1500 }
#         ],
#         "declared": { "netCents": 3498, "vatCents": 0, "grossCents": 3498 }
#       },
#       {
#         "orderId": "A400",
#         "shipTo": { "country": "BE" },
#         "customer": { "email": "ada@other.example", "vatId": null },
#         "lines": [
#           { "sku": "WID-001", "qty": 2, "unitCents": 999 },
#           { "sku": "GAD-002", "qty": 1, "unitCents": 1500 }
#         ],
#         "declared": { "netCents": 3498, "vatCents": 508, "grossCents": 4006 }
#       }
#     ]
#   }"""^^rdf:JSON .
#   ("""{
#     "meta~data": { "batch": "2025-12-18" },
#     "orders": [
#       {
#         "orderId": "A100",
#         "shipTo": { "country": "BE" },
#         "customer": { "email": "Ada@Example.ORG", "vatId": null },
#         "lines": [
#           { "sku": "wid-001", "qty": 2, "unitCents": 999 },
#           { "sku": "GAD-002", "qty": 1, "unitCents": 1500 }
#         ],
#         "declared": { "netCents": 3498, "vatCents": 509, "grossCents": 4007 }
#       },
#       {
#         "orderId": "A200",
#         "shipTo": { "country": "US" },
#         "customer": { "email": "bob@example.org", "vatId": null },
#         "lines": [
#           { "sku": "WID-001", "qty": 2, "unitCents": 999 },
#           { "sku": "GAD-002", "qty": 1, "unitCents": 1500 }
#         ],
#         "declared": { "netCents": 3498, "vatCents": 0, "grossCents": 3498 }
#       },
#       {
#         "orderId": "A300",
#         "shipTo": { "country": "NL" },
#         "customer": { "email": "acct@company.nl", "vatId": "NL999999999B01" },
#         "lines": [
#           { "sku": "WID-001", "qty": 2, "unitCents": 999 },
#           { "sku": "GAD-002", "qty": 1, "unitCents": 1500 }
#         ],
#         "declared": { "netCents": 3498, "vatCents": 0, "grossCents": 3498 }
#       },
#       {
#         "orderId": "A301",
#         "shipTo": { "country": "NL" },
#         "customer": { "email": "billing@company.nl", "vatId": "NL999999999B01" },
#         "lines": [
#           { "sku": "WID-001", "qty": 2, "unitCents": 999 },
#           { "sku": "GAD-002", "qty": 1, "unitCents": 1500 }
#         ],
#         "declared": { "netCents": 3498, "vatCents": 0, "grossCents": 3498 }
#       },
#       {
#         "orderId": "A400",
#         "shipTo": { "country": "BE" },
#         "customer": { "email": "ada@other.example", "vatId": null },
#         "lines": [
#           { "sku": "WID-001", "qty": 2, "unitCents": 999 },
#           { "sku": "GAD-002", "qty": 1, "unitCents": 1500 }
#         ],
#         "declared": { "netCents": 3498, "vatCents": 508, "grossCents": 4006 }
#       }
#     ]
#   }"""^^rdf:JSON "/orders") string:jsonPointer ("""{"orderId":"A100","shipTo":{"country":"BE"},"customer":{"email":"Ada@Example.ORG","vatId":null},"lines":[{"sku":"wid-001","qty":2,"unitCents":999},{"sku":"GAD-002","qty":1,"unitCents":1500}],"declared":{"netCents":3498,"vatCents":509,"grossCents":4007}}"""^^rdf:JSON """{"orderId":"A200","shipTo":{"country":"US"},"customer":{"email":"bob@example.org","vatId":null},"lines":[{"sku":"WID-001","qty":2,"unitCents":999},{"sku":"GAD-002","qty":1,"unitCents":1500}],"declared":{"netCents":3498,"vatCents":0,"grossCents":3498}}"""^^rdf:JSON """{"orderId":"A300","shipTo":{"country":"NL"},"customer":{"email":"acct@company.nl","vatId":"NL999999999B01"},"lines":[{"sku":"WID-001","qty":2,"unitCents":999},{"sku":"GAD-002","qty":1,"unitCents":1500}],"declared":{"netCents":3498,"vatCents":0,"grossCents":3498}}"""^^rdf:JSON """{"orderId":"A301","shipTo":{"country":"NL"},"customer":{"email":"billing@company.nl","vatId":"NL999999999B01"},"lines":[{"sku":"WID-001","qty":2,"unitCents":999},{"sku":"GAD-002","qty":1,"unitCents":1500}],"declared":{"netCents":3498,"vatCents":0,"grossCents":3498}}"""^^rdf:JSON """{"orderId":"A400","shipTo":{"country":"BE"},"customer":{"email":"ada@other.example","vatId":null},"lines":[{"sku":"WID-001","qty":2,"unitCents":999},{"sku":"GAD-002","qty":1,"unitCents":1500}],"declared":{"netCents":3498,"vatCents":508,"grossCents":4006}}"""^^rdf:JSON) .
#   ("""{"orderId":"A100","shipTo":{"country":"BE"},"customer":{"email":"Ada@Example.ORG","vatId":null},"lines":[{"sku":"wid-001","qty":2,"unitCents":999},{"sku":"GAD-002","qty":1,"unitCents":1500}],"declared":{"netCents":3498,"vatCents":509,"grossCents":4007}}"""^^rdf:JSON """{"orderId":"A200","shipTo":{"country":"US"},"customer":{"email":"bob@example.org","vatId":null},"lines":[{"sku":"WID-001","qty":2,"unitCents":999},{"sku":"GAD-002","qty":1,"unitCents":1500}],"declared":{"netCents":3498,"vatCents":0,"grossCents":3498}}"""^^rdf:JSON """{"orderId":"A300","shipTo":{"country":"NL"},"customer":{"email":"acct@company.nl","vatId":"NL999999999B01"},"lines":[{"sku":"WID-001","qty":2,"unitCents":999},{"sku":"GAD-002","qty":1,"unitCents":1500}],"declared":{"netCents":3498,"vatCents":0,"grossCents":3498}}"""^^rdf:JSON """{"orderId":"A301","shipTo":{"country":"NL"},"customer":{"email":"billing@company.nl","vatId":"NL999999999B01"},"lines":[{"sku":"WID-001","qty":2,"unitCents":999},{"sku":"GAD-002","qty":1,"unitCents":1500}],"declared":{"netCents":3498,"vatCents":0,"grossCents":3498}}"""^^rdf:JSON """{"orderId":"A400","shipTo":{"country":"BE"},"customer":{"email":"ada@other.example","vatId":null},"lines":[{"sku":"WID-001","qty":2,"unitCents":999},{"sku":"GAD-002","qty":1,"unitCents":1500}],"declared":{"netCents":3498,"vatCents":508,"grossCents":4006}}"""^^rdf:JSON) list:iterate (0 """{"orderId":"A100","shipTo":{"country":"BE"},"customer":{"email":"Ada@Example.ORG","vatId":null},"lines":[{"sku":"wid-001","qty":2,"unitCents":999},{"sku":"GAD-002","qty":1,"unitCents":1500}],"declared":{"netCents":3498,"vatCents":509,"grossCents":4007}}"""^^rdf:JSON) .
#   ("""{"orderId":"A100","shipTo":{"country":"BE"},"customer":{"email":"Ada@Example.ORG","vatId":null},"lines":[{"sku":"wid-001","qty":2,"unitCents":999},{"sku":"GAD-002","qty":1,"unitCents":1500}],"declared":{"netCents":3498,"vatCents":509,"grossCents":4007}}"""^^rdf:JSON "/orderId") string:jsonPointer "A100" .
#   ("urn:example:order:%s" "A100") string:format "urn:example:order:A100" .
#   <urn:example:order:A100> log:uri "urn:example:order:A100" .
#   ("""{"orderId":"A100","shipTo":{"country":"BE"},"customer":{"email":"Ada@Example.ORG","vatId":null},"lines":[{"sku":"wid-001","qty":2,"unitCents":999},{"sku":"GAD-002","qty":1,"unitCents":1500}],"declared":{"netCents":3498,"vatCents":509,"grossCents":4007}}"""^^rdf:JSON "/lines") string:jsonPointer ("""{"sku":"wid-001","qty":2,"unitCents":999}"""^^rdf:JSON """{"sku":"GAD-002","qty":1,"unitCents":1500}"""^^rdf:JSON) .
#   ("""{"sku":"wid-001","qty":2,"unitCents":999}"""^^rdf:JSON """{"sku":"GAD-002","qty":1,"unitCents":1500}"""^^rdf:JSON) list:iterate (0 """{"sku":"wid-001","qty":2,"unitCents":999}"""^^rdf:JSON) .
#   ("""{"sku":"wid-001","qty":2,"unitCents":999}"""^^rdf:JSON "/sku") string:jsonPointer "wid-001" .
#   ("""{"sku":"wid-001","qty":2,"unitCents":999}"""^^rdf:JSON "/qty") string:jsonPointer 2 .
#   ("""{"sku":"wid-001","qty":2,"unitCents":999}"""^^rdf:JSON "/unitCents") string:jsonPointer 999 .
#   ex:Widget a ex:Product .
#   ex:Widget ex:sku "WID-001" .
#   (2 999) math:product 1998 .
#   ("urn:example:order:%s#line:%s" "A100" 0) string:format "urn:example:order:A100#line:0" .
#   <urn:example:order:A100#line:0> log:uri "urn:example:order:A100#line:0" .
#   "wid-001" string:equalIgnoringCase "WID-001" .
# via the schematic forward rule:
#   {
#     ex:feed ex:json ?J .
#     (?J "/orders") string:jsonPointer ?Orders .
#     ?Orders list:iterate (?OrderIndex ?OrderJson) .
#     (?OrderJson "/orderId") string:jsonPointer ?OrderId .
#     ("urn:example:order:%s" ?OrderId) string:format ?OrderUriStr .
#     ?Order log:uri ?OrderUriStr .
#     (?OrderJson "/lines") string:jsonPointer ?Lines .
#     ?Lines list:iterate (?LineIndex ?LineJson) .
#     (?LineJson "/sku") string:jsonPointer ?SkuJson .
#     (?LineJson "/qty") string:jsonPointer ?Qty .
#     (?LineJson "/unitCents") string:jsonPointer ?UnitCents .
#     ?Product a ex:Product .
#     ?Product ex:sku ?SkuCat .
#     (?Qty ?UnitCents) math:product ?NetCents .
#     ("urn:example:order:%s#line:%s" ?OrderId ?LineIndex) string:format ?LineUriStr .
#     ?Line log:uri ?LineUriStr .
#     ?SkuJson string:equalIgnoringCase ?SkuCat .
#   } => {
#     ?Order ex:line ?Line .
#     ?Line a ex:OrderLine .
#     ?Line ex:lineIndex ?LineIndex .
#     ?Line ex:product ?Product .
#     ?Line ex:sku ?SkuCat .
#     ?Line ex:qty ?Qty .
#     ?Line ex:unitCents ?UnitCents .
#     ?Line ex:netCents ?NetCents .
#   } .
# with substitution (on rule variables):
#   ?J = """{
#     "meta~data": { "batch": "2025-12-18" },
#     "orders": [
#     {
#     "orderId": "A100",
#     "shipTo": { "country": "BE" },
#     "customer": { "email": "Ada@Example.ORG", "vatId": null },
#     "lines": [
#     { "sku": "wid-001", "qty": 2, "unitCents": 999 },
#     { "sku": "GAD-002", "qty": 1, "unitCents": 1500 }
#     ],
#     "declared": { "netCents": 3498, "vatCents": 509, "grossCents": 4007 }
#     },
#     {
#     "orderId": "A200",
#     "shipTo": { "country": "US" },
#     "customer": { "email": "bob@example.org", "vatId": null },
#     "lines": [
#     { "sku": "WID-001", "qty": 2, "unitCents": 999 },
#     { "sku": "GAD-002", "qty": 1, "unitCents": 1500 }
#     ],
#     "declared": { "netCents": 3498, "vatCents": 0, "grossCents": 3498 }
#     },
#     {
#     "orderId": "A300",
#     "shipTo": { "country": "NL" },
#     "customer": { "email": "acct@company.nl", "vatId": "NL999999999B01" },
#     "lines": [
#     { "sku": "WID-001", "qty": 2, "unitCents": 999 },
#     { "sku": "GAD-002", "qty": 1, "unitCents": 1500 }
#     ],
#     "declared": { "netCents": 3498, "vatCents": 0, "grossCents": 3498 }
#     },
#     {
#     "orderId": "A301",
#     "shipTo": { "country": "NL" },
#     "customer": { "email": "billing@company.nl", "vatId": "NL999999999B01" },
#     "lines": [
#     { "sku": "WID-001", "qty": 2, "unitCents": 999 },
#     { "sku": "GAD-002", "qty": 1, "unitCents": 1500 }
#     ],
#     "declared": { "netCents": 3498, "vatCents": 0, "grossCents": 3498 }
#     },
#     {
#     "orderId": "A400",
#     "shipTo": { "country": "BE" },
#     "customer": { "email": "ada@other.example", "vatId": null },
#     "lines": [
#     { "sku": "WID-001", "qty": 2, "unitCents": 999 },
#     { "sku": "GAD-002", "qty": 1, "unitCents": 1500 }
#     ],
#     "declared": { "netCents": 3498, "vatCents": 508, "grossCents": 4006 }
#     }
#     ]
#   }"""^^rdf:JSON
#   ?Line = <urn:example:order:A100#line:0>
#   ?LineIndex = 0
#   ?LineJson = """{"sku":"wid-001","qty":2,"unitCents":999}"""^^rdf:JSON
#   ?LineUriStr = "urn:example:order:A100#line:0"
#   ?Lines = ("""{"sku":"wid-001","qty":2,"unitCents":999}"""^^rdf:JSON """{"sku":"GAD-002","qty":1,"unitCents":1500}"""^^rdf:JSON)
#   ?NetCents = 1998
#   ?Order = <urn:example:order:A100>
#   ?OrderId = "A100"
#   ?OrderIndex = 0
#   ?OrderJson = """{"orderId":"A100","shipTo":{"country":"BE"},"customer":{"email":"Ada@Example.ORG","vatId":null},"lines":[{"sku":"wid-001","qty":2,"unitCents":999},{"sku":"GAD-002","qty":1,"unitCents":1500}],"declared":{"netCents":3498,"vatCents":509,"grossCents":4007}}"""^^rdf:JSON
#   ?OrderUriStr = "urn:example:order:A100"
#   ?Orders = ("""{"orderId":"A100","shipTo":{"country":"BE"},"customer":{"email":"Ada@Example.ORG","vatId":null},"lines":[{"sku":"wid-001","qty":2,"unitCents":999},{"sku":"GAD-002","qty":1,"unitCents":1500}],"declared":{"netCents":3498,"vatCents":509,"grossCents":4007}}"""^^rdf:JSON """{"orderId":"A200","shipTo":{"country":"US"},"customer":{"email":"bob@example.org","vatId":null},"lines":[{"sku":"WID-001","qty":2,"unitCents":999},{"sku":"GAD-002","qty":1,"unitCents":1500}],"declared":{"netCents":3498,"vatCents":0,"grossCents":3498}}"""^^rdf:JSON """{"orderId":"A300","shipTo":{"country":"NL"},"customer":{"email":"acct@company.nl","vatId":"NL999999999B01"},"lines":[{"sku":"WID-001","qty":2,"unitCents":999},{"sku":"GAD-002","qty":1,"unitCents":1500}],"declared":{"netCents":3498,"vatCents":0,"grossCents":3498}}"""^^rdf:JSON """{"orderId":"A301","shipTo":{"country":"NL"},"customer":{"email":"billing@company.nl","vatId":"NL999999999B01"},"lines":[{"sku":"WID-001","qty":2,"unitCents":999},{"sku":"GAD-002","qty":1,"unitCents":1500}],"declared":{"netCents":3498,"vatCents":0,"grossCents":3498}}"""^^rdf:JSON """{"orderId":"A400","shipTo":{"country":"BE"},"customer":{"email":"ada@other.example","vatId":null},"lines":[{"sku":"WID-001","qty":2,"unitCents":999},{"sku":"GAD-002","qty":1,"unitCents":1500}],"declared":{"netCents":3498,"vatCents":508,"grossCents":4006}}"""^^rdf:JSON)
#   ?Product = ex:Widget
#   ?Qty = 2
#   ?SkuCat = "WID-001"
#   ?SkuJson = "wid-001"
#   ?UnitCents = 999
# Therefore the derived triple above is entailed by the rules and facts.
# ----------------------------------------------------------------------

<urn:example:order:A100#line:0> ex:netCents 1998 .

# ----------------------------------------------------------------------
# Proof for derived triple:
#   <urn:example:order:A200#line:0> ex:vatBps 0 .
# It holds because the following instance of the rule body is provable:
#   <urn:example:order:A200> a ex:Order .
#   <urn:example:order:A200> ex:shipCountry "US" .
#   ex:policy ex:euCountries ("BE" "NL" "DE" "FR" "LU") .
#   <urn:example:order:A200> ex:line <urn:example:order:A200#line:0> .
#   <urn:example:order:A200#line:0> ex:netCents 1998 .
#   ("BE" "NL" "DE" "FR" "LU") list:notMember "US" .
# via the schematic forward rule:
#   {
#     ?Order a ex:Order .
#     ?Order ex:shipCountry ?Country .
#     ex:policy ex:euCountries ?EU .
#     ?Order ex:line ?Line .
#     ?Line ex:netCents ?NetCents .
#     ?EU list:notMember ?Country .
#   } => {
#     ?Line ex:vatBps 0 .
#     ?Line ex:vatCents 0 .
#     ?Line ex:grossCents ?NetCents .
#     ?Line ex:vatReason ex:Export .
#   } .
# with substitution (on rule variables):
#   ?Country = "US"
#   ?EU = ("BE" "NL" "DE" "FR" "LU")
#   ?Line = <urn:example:order:A200#line:0>
#   ?NetCents = 1998
#   ?Order = <urn:example:order:A200>
# Therefore the derived triple above is entailed by the rules and facts.
# ----------------------------------------------------------------------

<urn:example:order:A200#line:0> ex:vatBps 0 .

# ----------------------------------------------------------------------
# Proof for derived triple:
#   <urn:example:order:A200#line:0> ex:vatCents 0 .
# It holds because the following instance of the rule body is provable:
#   <urn:example:order:A200> a ex:Order .
#   <urn:example:order:A200> ex:shipCountry "US" .
#   ex:policy ex:euCountries ("BE" "NL" "DE" "FR" "LU") .
#   <urn:example:order:A200> ex:line <urn:example:order:A200#line:0> .
#   <urn:example:order:A200#line:0> ex:netCents 1998 .
#   ("BE" "NL" "DE" "FR" "LU") list:notMember "US" .
# via the schematic forward rule:
#   {
#     ?Order a ex:Order .
#     ?Order ex:shipCountry ?Country .
#     ex:policy ex:euCountries ?EU .
#     ?Order ex:line ?Line .
#     ?Line ex:netCents ?NetCents .
#     ?EU list:notMember ?Country .
#   } => {
#     ?Line ex:vatBps 0 .
#     ?Line ex:vatCents 0 .
#     ?Line ex:grossCents ?NetCents .
#     ?Line ex:vatReason ex:Export .
#   } .
# with substitution (on rule variables):
#   ?Country = "US"
#   ?EU = ("BE" "NL" "DE" "FR" "LU")
#   ?Line = <urn:example:order:A200#line:0>
#   ?NetCents = 1998
#   ?Order = <urn:example:order:A200>
# Therefore the derived triple above is entailed by the rules and facts.
# ----------------------------------------------------------------------

<urn:example:order:A200#line:0> ex:vatCents 0 .

# ----------------------------------------------------------------------
# Proof for derived triple:
#   <urn:example:order:A200#line:0> ex:grossCents 1998 .
# It holds because the following instance of the rule body is provable:
#   <urn:example:order:A200> a ex:Order .
#   <urn:example:order:A200> ex:shipCountry "US" .
#   ex:policy ex:euCountries ("BE" "NL" "DE" "FR" "LU") .
#   <urn:example:order:A200> ex:line <urn:example:order:A200#line:0> .
#   <urn:example:order:A200#line:0> ex:netCents 1998 .
#   ("BE" "NL" "DE" "FR" "LU") list:notMember "US" .
# via the schematic forward rule:
#   {
#     ?Order a ex:Order .
#     ?Order ex:shipCountry ?Country .
#     ex:policy ex:euCountries ?EU .
#     ?Order ex:line ?Line .
#     ?Line ex:netCents ?NetCents .
#     ?EU list:notMember ?Country .
#   } => {
#     ?Line ex:vatBps 0 .
#     ?Line ex:vatCents 0 .
#     ?Line ex:grossCents ?NetCents .
#     ?Line ex:vatReason ex:Export .
#   } .
# with substitution (on rule variables):
#   ?Country = "US"
#   ?EU = ("BE" "NL" "DE" "FR" "LU")
#   ?Line = <urn:example:order:A200#line:0>
#   ?NetCents = 1998
#   ?Order = <urn:example:order:A200>
# Therefore the derived triple above is entailed by the rules and facts.
# ----------------------------------------------------------------------

<urn:example:order:A200#line:0> ex:grossCents 1998 .

# ----------------------------------------------------------------------
# Proof for derived triple:
#   <urn:example:order:A200#line:0> ex:vatReason ex:Export .
# It holds because the following instance of the rule body is provable:
#   <urn:example:order:A200> a ex:Order .
#   <urn:example:order:A200> ex:shipCountry "US" .
#   ex:policy ex:euCountries ("BE" "NL" "DE" "FR" "LU") .
#   <urn:example:order:A200> ex:line <urn:example:order:A200#line:0> .
#   <urn:example:order:A200#line:0> ex:netCents 1998 .
#   ("BE" "NL" "DE" "FR" "LU") list:notMember "US" .
# via the schematic forward rule:
#   {
#     ?Order a ex:Order .
#     ?Order ex:shipCountry ?Country .
#     ex:policy ex:euCountries ?EU .
#     ?Order ex:line ?Line .
#     ?Line ex:netCents ?NetCents .
#     ?EU list:notMember ?Country .
#   } => {
#     ?Line ex:vatBps 0 .
#     ?Line ex:vatCents 0 .
#     ?Line ex:grossCents ?NetCents .
#     ?Line ex:vatReason ex:Export .
#   } .
# with substitution (on rule variables):
#   ?Country = "US"
#   ?EU = ("BE" "NL" "DE" "FR" "LU")
#   ?Line = <urn:example:order:A200#line:0>
#   ?NetCents = 1998
#   ?Order = <urn:example:order:A200>
# Therefore the derived triple above is entailed by the rules and facts.
# ----------------------------------------------------------------------

<urn:example:order:A200#line:0> ex:vatReason ex:Export .

# ----------------------------------------------------------------------
# Proof for derived triple:
#   <urn:example:order:A200#line:1> ex:vatBps 0 .
# It holds because the following instance of the rule body is provable:
#   <urn:example:order:A200> a ex:Order .
#   <urn:example:order:A200> ex:shipCountry "US" .
#   ex:policy ex:euCountries ("BE" "NL" "DE" "FR" "LU") .
#   <urn:example:order:A200> ex:line <urn:example:order:A200#line:1> .
#   <urn:example:order:A200#line:1> ex:netCents 1500 .
#   ("BE" "NL" "DE" "FR" "LU") list:notMember "US" .
# via the schematic forward rule:
#   {
#     ?Order a ex:Order .
#     ?Order ex:shipCountry ?Country .
#     ex:policy ex:euCountries ?EU .
#     ?Order ex:line ?Line .
#     ?Line ex:netCents ?NetCents .
#     ?EU list:notMember ?Country .
#   } => {
#     ?Line ex:vatBps 0 .
#     ?Line ex:vatCents 0 .
#     ?Line ex:grossCents ?NetCents .
#     ?Line ex:vatReason ex:Export .
#   } .
# with substitution (on rule variables):
#   ?Country = "US"
#   ?EU = ("BE" "NL" "DE" "FR" "LU")
#   ?Line = <urn:example:order:A200#line:1>
#   ?NetCents = 1500
#   ?Order = <urn:example:order:A200>
# Therefore the derived triple above is entailed by the rules and facts.
# ----------------------------------------------------------------------

<urn:example:order:A200#line:1> ex:vatBps 0 .

# ----------------------------------------------------------------------
# Proof for derived triple:
#   <urn:example:order:A200#line:1> ex:vatCents 0 .
# It holds because the following instance of the rule body is provable:
#   <urn:example:order:A200> a ex:Order .
#   <urn:example:order:A200> ex:shipCountry "US" .
#   ex:policy ex:euCountries ("BE" "NL" "DE" "FR" "LU") .
#   <urn:example:order:A200> ex:line <urn:example:order:A200#line:1> .
#   <urn:example:order:A200#line:1> ex:netCents 1500 .
#   ("BE" "NL" "DE" "FR" "LU") list:notMember "US" .
# via the schematic forward rule:
#   {
#     ?Order a ex:Order .
#     ?Order ex:shipCountry ?Country .
#     ex:policy ex:euCountries ?EU .
#     ?Order ex:line ?Line .
#     ?Line ex:netCents ?NetCents .
#     ?EU list:notMember ?Country .
#   } => {
#     ?Line ex:vatBps 0 .
#     ?Line ex:vatCents 0 .
#     ?Line ex:grossCents ?NetCents .
#     ?Line ex:vatReason ex:Export .
#   } .
# with substitution (on rule variables):
#   ?Country = "US"
#   ?EU = ("BE" "NL" "DE" "FR" "LU")
#   ?Line = <urn:example:order:A200#line:1>
#   ?NetCents = 1500
#   ?Order = <urn:example:order:A200>
# Therefore the derived triple above is entailed by the rules and facts.
# ----------------------------------------------------------------------

<urn:example:order:A200#line:1> ex:vatCents 0 .

# ----------------------------------------------------------------------
# Proof for derived triple:
#   <urn:example:order:A200#line:1> ex:grossCents 1500 .
# It holds because the following instance of the rule body is provable:
#   <urn:example:order:A200> a ex:Order .
#   <urn:example:order:A200> ex:shipCountry "US" .
#   ex:policy ex:euCountries ("BE" "NL" "DE" "FR" "LU") .
#   <urn:example:order:A200> ex:line <urn:example:order:A200#line:1> .
#   <urn:example:order:A200#line:1> ex:netCents 1500 .
#   ("BE" "NL" "DE" "FR" "LU") list:notMember "US" .
# via the schematic forward rule:
#   {
#     ?Order a ex:Order .
#     ?Order ex:shipCountry ?Country .
#     ex:policy ex:euCountries ?EU .
#     ?Order ex:line ?Line .
#     ?Line ex:netCents ?NetCents .
#     ?EU list:notMember ?Country .
#   } => {
#     ?Line ex:vatBps 0 .
#     ?Line ex:vatCents 0 .
#     ?Line ex:grossCents ?NetCents .
#     ?Line ex:vatReason ex:Export .
#   } .
# with substitution (on rule variables):
#   ?Country = "US"
#   ?EU = ("BE" "NL" "DE" "FR" "LU")
#   ?Line = <urn:example:order:A200#line:1>
#   ?NetCents = 1500
#   ?Order = <urn:example:order:A200>
# Therefore the derived triple above is entailed by the rules and facts.
# ----------------------------------------------------------------------

<urn:example:order:A200#line:1> ex:grossCents 1500 .

# ----------------------------------------------------------------------
# Proof for derived triple:
#   <urn:example:order:A200#line:1> ex:vatReason ex:Export .
# It holds because the following instance of the rule body is provable:
#   <urn:example:order:A200> a ex:Order .
#   <urn:example:order:A200> ex:shipCountry "US" .
#   ex:policy ex:euCountries ("BE" "NL" "DE" "FR" "LU") .
#   <urn:example:order:A200> ex:line <urn:example:order:A200#line:1> .
#   <urn:example:order:A200#line:1> ex:netCents 1500 .
#   ("BE" "NL" "DE" "FR" "LU") list:notMember "US" .
# via the schematic forward rule:
#   {
#     ?Order a ex:Order .
#     ?Order ex:shipCountry ?Country .
#     ex:policy ex:euCountries ?EU .
#     ?Order ex:line ?Line .
#     ?Line ex:netCents ?NetCents .
#     ?EU list:notMember ?Country .
#   } => {
#     ?Line ex:vatBps 0 .
#     ?Line ex:vatCents 0 .
#     ?Line ex:grossCents ?NetCents .
#     ?Line ex:vatReason ex:Export .
#   } .
# with substitution (on rule variables):
#   ?Country = "US"
#   ?EU = ("BE" "NL" "DE" "FR" "LU")
#   ?Line = <urn:example:order:A200#line:1>
#   ?NetCents = 1500
#   ?Order = <urn:example:order:A200>
# Therefore the derived triple above is entailed by the rules and facts.
# ----------------------------------------------------------------------

<urn:example:order:A200#line:1> ex:vatReason ex:Export .

# ----------------------------------------------------------------------
# Proof for derived triple:
#   <urn:example:order:A300#line:0> ex:vatBps 0 .
# It holds because the following instance of the rule body is provable:
#   <urn:example:order:A300> a ex:Order .
#   <urn:example:order:A300> ex:shipCountry "NL" .
#   <urn:example:order:A300> ex:vatIdRaw "NL999999999B01" .
#   ex:policy ex:euCountries ("BE" "NL" "DE" "FR" "LU") .
#   ("BE" "NL" "DE" "FR" "LU") list:member "NL" .
#   <urn:example:order:A300> ex:line <urn:example:order:A300#line:0> .
#   <urn:example:order:A300#line:0> ex:netCents 1998 .
#   "NL999999999B01" string:notEqualIgnoringCase "null" .
# via the schematic forward rule:
#   {
#     ?Order a ex:Order .
#     ?Order ex:shipCountry ?Country .
#     ?Order ex:vatIdRaw ?VatIdRaw .
#     ex:policy ex:euCountries ?EU .
#     ?EU list:member ?Country .
#     ?Order ex:line ?Line .
#     ?Line ex:netCents ?NetCents .
#     ?VatIdRaw string:notEqualIgnoringCase "null" .
#   } => {
#     ?Line ex:vatBps 0 .
#     ?Line ex:vatCents 0 .
#     ?Line ex:grossCents ?NetCents .
#     ?Line ex:vatReason ex:ReverseCharge .
#   } .
# with substitution (on rule variables):
#   ?Country = "NL"
#   ?EU = ("BE" "NL" "DE" "FR" "LU")
#   ?Line = <urn:example:order:A300#line:0>
#   ?NetCents = 1998
#   ?Order = <urn:example:order:A300>
#   ?VatIdRaw = "NL999999999B01"
# Therefore the derived triple above is entailed by the rules and facts.
# ----------------------------------------------------------------------

<urn:example:order:A300#line:0> ex:vatBps 0 .

# ----------------------------------------------------------------------
# Proof for derived triple:
#   <urn:example:order:A300#line:0> ex:vatCents 0 .
# It holds because the following instance of the rule body is provable:
#   <urn:example:order:A300> a ex:Order .
#   <urn:example:order:A300> ex:shipCountry "NL" .
#   <urn:example:order:A300> ex:vatIdRaw "NL999999999B01" .
#   ex:policy ex:euCountries ("BE" "NL" "DE" "FR" "LU") .
#   ("BE" "NL" "DE" "FR" "LU") list:member "NL" .
#   <urn:example:order:A300> ex:line <urn:example:order:A300#line:0> .
#   <urn:example:order:A300#line:0> ex:netCents 1998 .
#   "NL999999999B01" string:notEqualIgnoringCase "null" .
# via the schematic forward rule:
#   {
#     ?Order a ex:Order .
#     ?Order ex:shipCountry ?Country .
#     ?Order ex:vatIdRaw ?VatIdRaw .
#     ex:policy ex:euCountries ?EU .
#     ?EU list:member ?Country .
#     ?Order ex:line ?Line .
#     ?Line ex:netCents ?NetCents .
#     ?VatIdRaw string:notEqualIgnoringCase "null" .
#   } => {
#     ?Line ex:vatBps 0 .
#     ?Line ex:vatCents 0 .
#     ?Line ex:grossCents ?NetCents .
#     ?Line ex:vatReason ex:ReverseCharge .
#   } .
# with substitution (on rule variables):
#   ?Country = "NL"
#   ?EU = ("BE" "NL" "DE" "FR" "LU")
#   ?Line = <urn:example:order:A300#line:0>
#   ?NetCents = 1998
#   ?Order = <urn:example:order:A300>
#   ?VatIdRaw = "NL999999999B01"
# Therefore the derived triple above is entailed by the rules and facts.
# ----------------------------------------------------------------------

<urn:example:order:A300#line:0> ex:vatCents 0 .

# ----------------------------------------------------------------------
# Proof for derived triple:
#   <urn:example:order:A300#line:0> ex:grossCents 1998 .
# It holds because the following instance of the rule body is provable:
#   <urn:example:order:A300> a ex:Order .
#   <urn:example:order:A300> ex:shipCountry "NL" .
#   <urn:example:order:A300> ex:vatIdRaw "NL999999999B01" .
#   ex:policy ex:euCountries ("BE" "NL" "DE" "FR" "LU") .
#   ("BE" "NL" "DE" "FR" "LU") list:member "NL" .
#   <urn:example:order:A300> ex:line <urn:example:order:A300#line:0> .
#   <urn:example:order:A300#line:0> ex:netCents 1998 .
#   "NL999999999B01" string:notEqualIgnoringCase "null" .
# via the schematic forward rule:
#   {
#     ?Order a ex:Order .
#     ?Order ex:shipCountry ?Country .
#     ?Order ex:vatIdRaw ?VatIdRaw .
#     ex:policy ex:euCountries ?EU .
#     ?EU list:member ?Country .
#     ?Order ex:line ?Line .
#     ?Line ex:netCents ?NetCents .
#     ?VatIdRaw string:notEqualIgnoringCase "null" .
#   } => {
#     ?Line ex:vatBps 0 .
#     ?Line ex:vatCents 0 .
#     ?Line ex:grossCents ?NetCents .
#     ?Line ex:vatReason ex:ReverseCharge .
#   } .
# with substitution (on rule variables):
#   ?Country = "NL"
#   ?EU = ("BE" "NL" "DE" "FR" "LU")
#   ?Line = <urn:example:order:A300#line:0>
#   ?NetCents = 1998
#   ?Order = <urn:example:order:A300>
#   ?VatIdRaw = "NL999999999B01"
# Therefore the derived triple above is entailed by the rules and facts.
# ----------------------------------------------------------------------

<urn:example:order:A300#line:0> ex:grossCents 1998 .

# ----------------------------------------------------------------------
# Proof for derived triple:
#   <urn:example:order:A300#line:0> ex:vatReason ex:ReverseCharge .
# It holds because the following instance of the rule body is provable:
#   <urn:example:order:A300> a ex:Order .
#   <urn:example:order:A300> ex:shipCountry "NL" .
#   <urn:example:order:A300> ex:vatIdRaw "NL999999999B01" .
#   ex:policy ex:euCountries ("BE" "NL" "DE" "FR" "LU") .
#   ("BE" "NL" "DE" "FR" "LU") list:member "NL" .
#   <urn:example:order:A300> ex:line <urn:example:order:A300#line:0> .
#   <urn:example:order:A300#line:0> ex:netCents 1998 .
#   "NL999999999B01" string:notEqualIgnoringCase "null" .
# via the schematic forward rule:
#   {
#     ?Order a ex:Order .
#     ?Order ex:shipCountry ?Country .
#     ?Order ex:vatIdRaw ?VatIdRaw .
#     ex:policy ex:euCountries ?EU .
#     ?EU list:member ?Country .
#     ?Order ex:line ?Line .
#     ?Line ex:netCents ?NetCents .
#     ?VatIdRaw string:notEqualIgnoringCase "null" .
#   } => {
#     ?Line ex:vatBps 0 .
#     ?Line ex:vatCents 0 .
#     ?Line ex:grossCents ?NetCents .
#     ?Line ex:vatReason ex:ReverseCharge .
#   } .
# with substitution (on rule variables):
#   ?Country = "NL"
#   ?EU = ("BE" "NL" "DE" "FR" "LU")
#   ?Line = <urn:example:order:A300#line:0>
#   ?NetCents = 1998
#   ?Order = <urn:example:order:A300>
#   ?VatIdRaw = "NL999999999B01"
# Therefore the derived triple above is entailed by the rules and facts.
# ----------------------------------------------------------------------

<urn:example:order:A300#line:0> ex:vatReason ex:ReverseCharge .

# ----------------------------------------------------------------------
# Proof for derived triple:
#   <urn:example:order:A300#line:1> ex:vatBps 0 .
# It holds because the following instance of the rule body is provable:
#   <urn:example:order:A300> a ex:Order .
#   <urn:example:order:A300> ex:shipCountry "NL" .
#   <urn:example:order:A300> ex:vatIdRaw "NL999999999B01" .
#   ex:policy ex:euCountries ("BE" "NL" "DE" "FR" "LU") .
#   ("BE" "NL" "DE" "FR" "LU") list:member "NL" .
#   <urn:example:order:A300> ex:line <urn:example:order:A300#line:1> .
#   <urn:example:order:A300#line:1> ex:netCents 1500 .
#   "NL999999999B01" string:notEqualIgnoringCase "null" .
# via the schematic forward rule:
#   {
#     ?Order a ex:Order .
#     ?Order ex:shipCountry ?Country .
#     ?Order ex:vatIdRaw ?VatIdRaw .
#     ex:policy ex:euCountries ?EU .
#     ?EU list:member ?Country .
#     ?Order ex:line ?Line .
#     ?Line ex:netCents ?NetCents .
#     ?VatIdRaw string:notEqualIgnoringCase "null" .
#   } => {
#     ?Line ex:vatBps 0 .
#     ?Line ex:vatCents 0 .
#     ?Line ex:grossCents ?NetCents .
#     ?Line ex:vatReason ex:ReverseCharge .
#   } .
# with substitution (on rule variables):
#   ?Country = "NL"
#   ?EU = ("BE" "NL" "DE" "FR" "LU")
#   ?Line = <urn:example:order:A300#line:1>
#   ?NetCents = 1500
#   ?Order = <urn:example:order:A300>
#   ?VatIdRaw = "NL999999999B01"
# Therefore the derived triple above is entailed by the rules and facts.
# ----------------------------------------------------------------------

<urn:example:order:A300#line:1> ex:vatBps 0 .

# ----------------------------------------------------------------------
# Proof for derived triple:
#   <urn:example:order:A300#line:1> ex:vatCents 0 .
# It holds because the following instance of the rule body is provable:
#   <urn:example:order:A300> a ex:Order .
#   <urn:example:order:A300> ex:shipCountry "NL" .
#   <urn:example:order:A300> ex:vatIdRaw "NL999999999B01" .
#   ex:policy ex:euCountries ("BE" "NL" "DE" "FR" "LU") .
#   ("BE" "NL" "DE" "FR" "LU") list:member "NL" .
#   <urn:example:order:A300> ex:line <urn:example:order:A300#line:1> .
#   <urn:example:order:A300#line:1> ex:netCents 1500 .
#   "NL999999999B01" string:notEqualIgnoringCase "null" .
# via the schematic forward rule:
#   {
#     ?Order a ex:Order .
#     ?Order ex:shipCountry ?Country .
#     ?Order ex:vatIdRaw ?VatIdRaw .
#     ex:policy ex:euCountries ?EU .
#     ?EU list:member ?Country .
#     ?Order ex:line ?Line .
#     ?Line ex:netCents ?NetCents .
#     ?VatIdRaw string:notEqualIgnoringCase "null" .
#   } => {
#     ?Line ex:vatBps 0 .
#     ?Line ex:vatCents 0 .
#     ?Line ex:grossCents ?NetCents .
#     ?Line ex:vatReason ex:ReverseCharge .
#   } .
# with substitution (on rule variables):
#   ?Country = "NL"
#   ?EU = ("BE" "NL" "DE" "FR" "LU")
#   ?Line = <urn:example:order:A300#line:1>
#   ?NetCents = 1500
#   ?Order = <urn:example:order:A300>
#   ?VatIdRaw = "NL999999999B01"
# Therefore the derived triple above is entailed by the rules and facts.
# ----------------------------------------------------------------------

<urn:example:order:A300#line:1> ex:vatCents 0 .

# ----------------------------------------------------------------------
# Proof for derived triple:
#   <urn:example:order:A300#line:1> ex:grossCents 1500 .
# It holds because the following instance of the rule body is provable:
#   <urn:example:order:A300> a ex:Order .
#   <urn:example:order:A300> ex:shipCountry "NL" .
#   <urn:example:order:A300> ex:vatIdRaw "NL999999999B01" .
#   ex:policy ex:euCountries ("BE" "NL" "DE" "FR" "LU") .
#   ("BE" "NL" "DE" "FR" "LU") list:member "NL" .
#   <urn:example:order:A300> ex:line <urn:example:order:A300#line:1> .
#   <urn:example:order:A300#line:1> ex:netCents 1500 .
#   "NL999999999B01" string:notEqualIgnoringCase "null" .
# via the schematic forward rule:
#   {
#     ?Order a ex:Order .
#     ?Order ex:shipCountry ?Country .
#     ?Order ex:vatIdRaw ?VatIdRaw .
#     ex:policy ex:euCountries ?EU .
#     ?EU list:member ?Country .
#     ?Order ex:line ?Line .
#     ?Line ex:netCents ?NetCents .
#     ?VatIdRaw string:notEqualIgnoringCase "null" .
#   } => {
#     ?Line ex:vatBps 0 .
#     ?Line ex:vatCents 0 .
#     ?Line ex:grossCents ?NetCents .
#     ?Line ex:vatReason ex:ReverseCharge .
#   } .
# with substitution (on rule variables):
#   ?Country = "NL"
#   ?EU = ("BE" "NL" "DE" "FR" "LU")
#   ?Line = <urn:example:order:A300#line:1>
#   ?NetCents = 1500
#   ?Order = <urn:example:order:A300>
#   ?VatIdRaw = "NL999999999B01"
# Therefore the derived triple above is entailed by the rules and facts.
# ----------------------------------------------------------------------

<urn:example:order:A300#line:1> ex:grossCents 1500 .

# ----------------------------------------------------------------------
# Proof for derived triple:
#   <urn:example:order:A300#line:1> ex:vatReason ex:ReverseCharge .
# It holds because the following instance of the rule body is provable:
#   <urn:example:order:A300> a ex:Order .
#   <urn:example:order:A300> ex:shipCountry "NL" .
#   <urn:example:order:A300> ex:vatIdRaw "NL999999999B01" .
#   ex:policy ex:euCountries ("BE" "NL" "DE" "FR" "LU") .
#   ("BE" "NL" "DE" "FR" "LU") list:member "NL" .
#   <urn:example:order:A300> ex:line <urn:example:order:A300#line:1> .
#   <urn:example:order:A300#line:1> ex:netCents 1500 .
#   "NL999999999B01" string:notEqualIgnoringCase "null" .
# via the schematic forward rule:
#   {
#     ?Order a ex:Order .
#     ?Order ex:shipCountry ?Country .
#     ?Order ex:vatIdRaw ?VatIdRaw .
#     ex:policy ex:euCountries ?EU .
#     ?EU list:member ?Country .
#     ?Order ex:line ?Line .
#     ?Line ex:netCents ?NetCents .
#     ?VatIdRaw string:notEqualIgnoringCase "null" .
#   } => {
#     ?Line ex:vatBps 0 .
#     ?Line ex:vatCents 0 .
#     ?Line ex:grossCents ?NetCents .
#     ?Line ex:vatReason ex:ReverseCharge .
#   } .
# with substitution (on rule variables):
#   ?Country = "NL"
#   ?EU = ("BE" "NL" "DE" "FR" "LU")
#   ?Line = <urn:example:order:A300#line:1>
#   ?NetCents = 1500
#   ?Order = <urn:example:order:A300>
#   ?VatIdRaw = "NL999999999B01"
# Therefore the derived triple above is entailed by the rules and facts.
# ----------------------------------------------------------------------

<urn:example:order:A300#line:1> ex:vatReason ex:ReverseCharge .

# ----------------------------------------------------------------------
# Proof for derived triple:
#   <urn:example:order:A301#line:0> ex:vatBps 0 .
# It holds because the following instance of the rule body is provable:
#   <urn:example:order:A301> a ex:Order .
#   <urn:example:order:A301> ex:shipCountry "NL" .
#   <urn:example:order:A301> ex:vatIdRaw "NL999999999B01" .
#   ex:policy ex:euCountries ("BE" "NL" "DE" "FR" "LU") .
#   ("BE" "NL" "DE" "FR" "LU") list:member "NL" .
#   <urn:example:order:A301> ex:line <urn:example:order:A301#line:0> .
#   <urn:example:order:A301#line:0> ex:netCents 1998 .
#   "NL999999999B01" string:notEqualIgnoringCase "null" .
# via the schematic forward rule:
#   {
#     ?Order a ex:Order .
#     ?Order ex:shipCountry ?Country .
#     ?Order ex:vatIdRaw ?VatIdRaw .
#     ex:policy ex:euCountries ?EU .
#     ?EU list:member ?Country .
#     ?Order ex:line ?Line .
#     ?Line ex:netCents ?NetCents .
#     ?VatIdRaw string:notEqualIgnoringCase "null" .
#   } => {
#     ?Line ex:vatBps 0 .
#     ?Line ex:vatCents 0 .
#     ?Line ex:grossCents ?NetCents .
#     ?Line ex:vatReason ex:ReverseCharge .
#   } .
# with substitution (on rule variables):
#   ?Country = "NL"
#   ?EU = ("BE" "NL" "DE" "FR" "LU")
#   ?Line = <urn:example:order:A301#line:0>
#   ?NetCents = 1998
#   ?Order = <urn:example:order:A301>
#   ?VatIdRaw = "NL999999999B01"
# Therefore the derived triple above is entailed by the rules and facts.
# ----------------------------------------------------------------------

<urn:example:order:A301#line:0> ex:vatBps 0 .

# ----------------------------------------------------------------------
# Proof for derived triple:
#   <urn:example:order:A301#line:0> ex:vatCents 0 .
# It holds because the following instance of the rule body is provable:
#   <urn:example:order:A301> a ex:Order .
#   <urn:example:order:A301> ex:shipCountry "NL" .
#   <urn:example:order:A301> ex:vatIdRaw "NL999999999B01" .
#   ex:policy ex:euCountries ("BE" "NL" "DE" "FR" "LU") .
#   ("BE" "NL" "DE" "FR" "LU") list:member "NL" .
#   <urn:example:order:A301> ex:line <urn:example:order:A301#line:0> .
#   <urn:example:order:A301#line:0> ex:netCents 1998 .
#   "NL999999999B01" string:notEqualIgnoringCase "null" .
# via the schematic forward rule:
#   {
#     ?Order a ex:Order .
#     ?Order ex:shipCountry ?Country .
#     ?Order ex:vatIdRaw ?VatIdRaw .
#     ex:policy ex:euCountries ?EU .
#     ?EU list:member ?Country .
#     ?Order ex:line ?Line .
#     ?Line ex:netCents ?NetCents .
#     ?VatIdRaw string:notEqualIgnoringCase "null" .
#   } => {
#     ?Line ex:vatBps 0 .
#     ?Line ex:vatCents 0 .
#     ?Line ex:grossCents ?NetCents .
#     ?Line ex:vatReason ex:ReverseCharge .
#   } .
# with substitution (on rule variables):
#   ?Country = "NL"
#   ?EU = ("BE" "NL" "DE" "FR" "LU")
#   ?Line = <urn:example:order:A301#line:0>
#   ?NetCents = 1998
#   ?Order = <urn:example:order:A301>
#   ?VatIdRaw = "NL999999999B01"
# Therefore the derived triple above is entailed by the rules and facts.
# ----------------------------------------------------------------------

<urn:example:order:A301#line:0> ex:vatCents 0 .

# ----------------------------------------------------------------------
# Proof for derived triple:
#   <urn:example:order:A301#line:0> ex:grossCents 1998 .
# It holds because the following instance of the rule body is provable:
#   <urn:example:order:A301> a ex:Order .
#   <urn:example:order:A301> ex:shipCountry "NL" .
#   <urn:example:order:A301> ex:vatIdRaw "NL999999999B01" .
#   ex:policy ex:euCountries ("BE" "NL" "DE" "FR" "LU") .
#   ("BE" "NL" "DE" "FR" "LU") list:member "NL" .
#   <urn:example:order:A301> ex:line <urn:example:order:A301#line:0> .
#   <urn:example:order:A301#line:0> ex:netCents 1998 .
#   "NL999999999B01" string:notEqualIgnoringCase "null" .
# via the schematic forward rule:
#   {
#     ?Order a ex:Order .
#     ?Order ex:shipCountry ?Country .
#     ?Order ex:vatIdRaw ?VatIdRaw .
#     ex:policy ex:euCountries ?EU .
#     ?EU list:member ?Country .
#     ?Order ex:line ?Line .
#     ?Line ex:netCents ?NetCents .
#     ?VatIdRaw string:notEqualIgnoringCase "null" .
#   } => {
#     ?Line ex:vatBps 0 .
#     ?Line ex:vatCents 0 .
#     ?Line ex:grossCents ?NetCents .
#     ?Line ex:vatReason ex:ReverseCharge .
#   } .
# with substitution (on rule variables):
#   ?Country = "NL"
#   ?EU = ("BE" "NL" "DE" "FR" "LU")
#   ?Line = <urn:example:order:A301#line:0>
#   ?NetCents = 1998
#   ?Order = <urn:example:order:A301>
#   ?VatIdRaw = "NL999999999B01"
# Therefore the derived triple above is entailed by the rules and facts.
# ----------------------------------------------------------------------

<urn:example:order:A301#line:0> ex:grossCents 1998 .

# ----------------------------------------------------------------------
# Proof for derived triple:
#   <urn:example:order:A301#line:0> ex:vatReason ex:ReverseCharge .
# It holds because the following instance of the rule body is provable:
#   <urn:example:order:A301> a ex:Order .
#   <urn:example:order:A301> ex:shipCountry "NL" .
#   <urn:example:order:A301> ex:vatIdRaw "NL999999999B01" .
#   ex:policy ex:euCountries ("BE" "NL" "DE" "FR" "LU") .
#   ("BE" "NL" "DE" "FR" "LU") list:member "NL" .
#   <urn:example:order:A301> ex:line <urn:example:order:A301#line:0> .
#   <urn:example:order:A301#line:0> ex:netCents 1998 .
#   "NL999999999B01" string:notEqualIgnoringCase "null" .
# via the schematic forward rule:
#   {
#     ?Order a ex:Order .
#     ?Order ex:shipCountry ?Country .
#     ?Order ex:vatIdRaw ?VatIdRaw .
#     ex:policy ex:euCountries ?EU .
#     ?EU list:member ?Country .
#     ?Order ex:line ?Line .
#     ?Line ex:netCents ?NetCents .
#     ?VatIdRaw string:notEqualIgnoringCase "null" .
#   } => {
#     ?Line ex:vatBps 0 .
#     ?Line ex:vatCents 0 .
#     ?Line ex:grossCents ?NetCents .
#     ?Line ex:vatReason ex:ReverseCharge .
#   } .
# with substitution (on rule variables):
#   ?Country = "NL"
#   ?EU = ("BE" "NL" "DE" "FR" "LU")
#   ?Line = <urn:example:order:A301#line:0>
#   ?NetCents = 1998
#   ?Order = <urn:example:order:A301>
#   ?VatIdRaw = "NL999999999B01"
# Therefore the derived triple above is entailed by the rules and facts.
# ----------------------------------------------------------------------

<urn:example:order:A301#line:0> ex:vatReason ex:ReverseCharge .

# ----------------------------------------------------------------------
# Proof for derived triple:
#   <urn:example:order:A301#line:1> ex:vatBps 0 .
# It holds because the following instance of the rule body is provable:
#   <urn:example:order:A301> a ex:Order .
#   <urn:example:order:A301> ex:shipCountry "NL" .
#   <urn:example:order:A301> ex:vatIdRaw "NL999999999B01" .
#   ex:policy ex:euCountries ("BE" "NL" "DE" "FR" "LU") .
#   ("BE" "NL" "DE" "FR" "LU") list:member "NL" .
#   <urn:example:order:A301> ex:line <urn:example:order:A301#line:1> .
#   <urn:example:order:A301#line:1> ex:netCents 1500 .
#   "NL999999999B01" string:notEqualIgnoringCase "null" .
# via the schematic forward rule:
#   {
#     ?Order a ex:Order .
#     ?Order ex:shipCountry ?Country .
#     ?Order ex:vatIdRaw ?VatIdRaw .
#     ex:policy ex:euCountries ?EU .
#     ?EU list:member ?Country .
#     ?Order ex:line ?Line .
#     ?Line ex:netCents ?NetCents .
#     ?VatIdRaw string:notEqualIgnoringCase "null" .
#   } => {
#     ?Line ex:vatBps 0 .
#     ?Line ex:vatCents 0 .
#     ?Line ex:grossCents ?NetCents .
#     ?Line ex:vatReason ex:ReverseCharge .
#   } .
# with substitution (on rule variables):
#   ?Country = "NL"
#   ?EU = ("BE" "NL" "DE" "FR" "LU")
#   ?Line = <urn:example:order:A301#line:1>
#   ?NetCents = 1500
#   ?Order = <urn:example:order:A301>
#   ?VatIdRaw = "NL999999999B01"
# Therefore the derived triple above is entailed by the rules and facts.
# ----------------------------------------------------------------------

<urn:example:order:A301#line:1> ex:vatBps 0 .

# ----------------------------------------------------------------------
# Proof for derived triple:
#   <urn:example:order:A301#line:1> ex:vatCents 0 .
# It holds because the following instance of the rule body is provable:
#   <urn:example:order:A301> a ex:Order .
#   <urn:example:order:A301> ex:shipCountry "NL" .
#   <urn:example:order:A301> ex:vatIdRaw "NL999999999B01" .
#   ex:policy ex:euCountries ("BE" "NL" "DE" "FR" "LU") .
#   ("BE" "NL" "DE" "FR" "LU") list:member "NL" .
#   <urn:example:order:A301> ex:line <urn:example:order:A301#line:1> .
#   <urn:example:order:A301#line:1> ex:netCents 1500 .
#   "NL999999999B01" string:notEqualIgnoringCase "null" .
# via the schematic forward rule:
#   {
#     ?Order a ex:Order .
#     ?Order ex:shipCountry ?Country .
#     ?Order ex:vatIdRaw ?VatIdRaw .
#     ex:policy ex:euCountries ?EU .
#     ?EU list:member ?Country .
#     ?Order ex:line ?Line .
#     ?Line ex:netCents ?NetCents .
#     ?VatIdRaw string:notEqualIgnoringCase "null" .
#   } => {
#     ?Line ex:vatBps 0 .
#     ?Line ex:vatCents 0 .
#     ?Line ex:grossCents ?NetCents .
#     ?Line ex:vatReason ex:ReverseCharge .
#   } .
# with substitution (on rule variables):
#   ?Country = "NL"
#   ?EU = ("BE" "NL" "DE" "FR" "LU")
#   ?Line = <urn:example:order:A301#line:1>
#   ?NetCents = 1500
#   ?Order = <urn:example:order:A301>
#   ?VatIdRaw = "NL999999999B01"
# Therefore the derived triple above is entailed by the rules and facts.
# ----------------------------------------------------------------------

<urn:example:order:A301#line:1> ex:vatCents 0 .

# ----------------------------------------------------------------------
# Proof for derived triple:
#   <urn:example:order:A301#line:1> ex:grossCents 1500 .
# It holds because the following instance of the rule body is provable:
#   <urn:example:order:A301> a ex:Order .
#   <urn:example:order:A301> ex:shipCountry "NL" .
#   <urn:example:order:A301> ex:vatIdRaw "NL999999999B01" .
#   ex:policy ex:euCountries ("BE" "NL" "DE" "FR" "LU") .
#   ("BE" "NL" "DE" "FR" "LU") list:member "NL" .
#   <urn:example:order:A301> ex:line <urn:example:order:A301#line:1> .
#   <urn:example:order:A301#line:1> ex:netCents 1500 .
#   "NL999999999B01" string:notEqualIgnoringCase "null" .
# via the schematic forward rule:
#   {
#     ?Order a ex:Order .
#     ?Order ex:shipCountry ?Country .
#     ?Order ex:vatIdRaw ?VatIdRaw .
#     ex:policy ex:euCountries ?EU .
#     ?EU list:member ?Country .
#     ?Order ex:line ?Line .
#     ?Line ex:netCents ?NetCents .
#     ?VatIdRaw string:notEqualIgnoringCase "null" .
#   } => {
#     ?Line ex:vatBps 0 .
#     ?Line ex:vatCents 0 .
#     ?Line ex:grossCents ?NetCents .
#     ?Line ex:vatReason ex:ReverseCharge .
#   } .
# with substitution (on rule variables):
#   ?Country = "NL"
#   ?EU = ("BE" "NL" "DE" "FR" "LU")
#   ?Line = <urn:example:order:A301#line:1>
#   ?NetCents = 1500
#   ?Order = <urn:example:order:A301>
#   ?VatIdRaw = "NL999999999B01"
# Therefore the derived triple above is entailed by the rules and facts.
# ----------------------------------------------------------------------

<urn:example:order:A301#line:1> ex:grossCents 1500 .

# ----------------------------------------------------------------------
# Proof for derived triple:
#   <urn:example:order:A301#line:1> ex:vatReason ex:ReverseCharge .
# It holds because the following instance of the rule body is provable:
#   <urn:example:order:A301> a ex:Order .
#   <urn:example:order:A301> ex:shipCountry "NL" .
#   <urn:example:order:A301> ex:vatIdRaw "NL999999999B01" .
#   ex:policy ex:euCountries ("BE" "NL" "DE" "FR" "LU") .
#   ("BE" "NL" "DE" "FR" "LU") list:member "NL" .
#   <urn:example:order:A301> ex:line <urn:example:order:A301#line:1> .
#   <urn:example:order:A301#line:1> ex:netCents 1500 .
#   "NL999999999B01" string:notEqualIgnoringCase "null" .
# via the schematic forward rule:
#   {
#     ?Order a ex:Order .
#     ?Order ex:shipCountry ?Country .
#     ?Order ex:vatIdRaw ?VatIdRaw .
#     ex:policy ex:euCountries ?EU .
#     ?EU list:member ?Country .
#     ?Order ex:line ?Line .
#     ?Line ex:netCents ?NetCents .
#     ?VatIdRaw string:notEqualIgnoringCase "null" .
#   } => {
#     ?Line ex:vatBps 0 .
#     ?Line ex:vatCents 0 .
#     ?Line ex:grossCents ?NetCents .
#     ?Line ex:vatReason ex:ReverseCharge .
#   } .
# with substitution (on rule variables):
#   ?Country = "NL"
#   ?EU = ("BE" "NL" "DE" "FR" "LU")
#   ?Line = <urn:example:order:A301#line:1>
#   ?NetCents = 1500
#   ?Order = <urn:example:order:A301>
#   ?VatIdRaw = "NL999999999B01"
# Therefore the derived triple above is entailed by the rules and facts.
# ----------------------------------------------------------------------

<urn:example:order:A301#line:1> ex:vatReason ex:ReverseCharge .

# ----------------------------------------------------------------------
# Proof for derived triple:
#   <urn:example:order:A100#line:0> ex:vatBps 2100 .
# It holds because the following instance of the rule body is provable:
#   <urn:example:order:A100> a ex:Order .
#   <urn:example:order:A100> ex:shipCountry "BE" .
#   <urn:example:order:A100> ex:vatIdRaw "null" .
#   ex:policy ex:euCountries ("BE" "NL" "DE" "FR" "LU") .
#   ("BE" "NL" "DE" "FR" "LU") list:member "BE" .
#   <urn:example:order:A100> ex:line <urn:example:order:A100#line:0> .
#   <urn:example:order:A100#line:0> ex:product ex:Widget .
#   <urn:example:order:A100#line:0> ex:netCents 1998 .
#   ex:Widget ex:vatBps 2100 .
#   (1998 2100) math:product 4195800 .
#   (4195800 10000) math:integerQuotient 419 .
#   (1998 419) math:sum 2417 .
# via the schematic forward rule:
#   {
#     ?Order a ex:Order .
#     ?Order ex:shipCountry ?Country .
#     ?Order ex:vatIdRaw "null" .
#     ex:policy ex:euCountries ?EU .
#     ?EU list:member ?Country .
#     ?Order ex:line ?Line .
#     ?Line ex:product ?Product .
#     ?Line ex:netCents ?NetCents .
#     ?Product ex:vatBps ?VatBps .
#     (?NetCents ?VatBps) math:product ?NetTimesBps .
#     (?NetTimesBps 10000) math:integerQuotient ?VatCents .
#     (?NetCents ?VatCents) math:sum ?GrossCents .
#   } => {
#     ?Line ex:vatBps ?VatBps .
#     ?Line ex:vatCents ?VatCents .
#     ?Line ex:grossCents ?GrossCents .
#     ?Line ex:vatReason ex:Domestic .
#   } .
# with substitution (on rule variables):
#   ?Country = "BE"
#   ?EU = ("BE" "NL" "DE" "FR" "LU")
#   ?GrossCents = 2417
#   ?Line = <urn:example:order:A100#line:0>
#   ?NetCents = 1998
#   ?NetTimesBps = 4195800
#   ?Order = <urn:example:order:A100>
#   ?Product = ex:Widget
#   ?VatBps = 2100
#   ?VatCents = 419
# Therefore the derived triple above is entailed by the rules and facts.
# ----------------------------------------------------------------------

<urn:example:order:A100#line:0> ex:vatBps 2100 .

# ----------------------------------------------------------------------
# Proof for derived triple:
#   <urn:example:order:A100#line:0> ex:vatCents 419 .
# It holds because the following instance of the rule body is provable:
#   <urn:example:order:A100> a ex:Order .
#   <urn:example:order:A100> ex:shipCountry "BE" .
#   <urn:example:order:A100> ex:vatIdRaw "null" .
#   ex:policy ex:euCountries ("BE" "NL" "DE" "FR" "LU") .
#   ("BE" "NL" "DE" "FR" "LU") list:member "BE" .
#   <urn:example:order:A100> ex:line <urn:example:order:A100#line:0> .
#   <urn:example:order:A100#line:0> ex:product ex:Widget .
#   <urn:example:order:A100#line:0> ex:netCents 1998 .
#   ex:Widget ex:vatBps 2100 .
#   (1998 2100) math:product 4195800 .
#   (4195800 10000) math:integerQuotient 419 .
#   (1998 419) math:sum 2417 .
# via the schematic forward rule:
#   {
#     ?Order a ex:Order .
#     ?Order ex:shipCountry ?Country .
#     ?Order ex:vatIdRaw "null" .
#     ex:policy ex:euCountries ?EU .
#     ?EU list:member ?Country .
#     ?Order ex:line ?Line .
#     ?Line ex:product ?Product .
#     ?Line ex:netCents ?NetCents .
#     ?Product ex:vatBps ?VatBps .
#     (?NetCents ?VatBps) math:product ?NetTimesBps .
#     (?NetTimesBps 10000) math:integerQuotient ?VatCents .
#     (?NetCents ?VatCents) math:sum ?GrossCents .
#   } => {
#     ?Line ex:vatBps ?VatBps .
#     ?Line ex:vatCents ?VatCents .
#     ?Line ex:grossCents ?GrossCents .
#     ?Line ex:vatReason ex:Domestic .
#   } .
# with substitution (on rule variables):
#   ?Country = "BE"
#   ?EU = ("BE" "NL" "DE" "FR" "LU")
#   ?GrossCents = 2417
#   ?Line = <urn:example:order:A100#line:0>
#   ?NetCents = 1998
#   ?NetTimesBps = 4195800
#   ?Order = <urn:example:order:A100>
#   ?Product = ex:Widget
#   ?VatBps = 2100
#   ?VatCents = 419
# Therefore the derived triple above is entailed by the rules and facts.
# ----------------------------------------------------------------------

<urn:example:order:A100#line:0> ex:vatCents 419 .

# ----------------------------------------------------------------------
# Proof for derived triple:
#   <urn:example:order:A100#line:0> ex:grossCents 2417 .
# It holds because the following instance of the rule body is provable:
#   <urn:example:order:A100> a ex:Order .
#   <urn:example:order:A100> ex:shipCountry "BE" .
#   <urn:example:order:A100> ex:vatIdRaw "null" .
#   ex:policy ex:euCountries ("BE" "NL" "DE" "FR" "LU") .
#   ("BE" "NL" "DE" "FR" "LU") list:member "BE" .
#   <urn:example:order:A100> ex:line <urn:example:order:A100#line:0> .
#   <urn:example:order:A100#line:0> ex:product ex:Widget .
#   <urn:example:order:A100#line:0> ex:netCents 1998 .
#   ex:Widget ex:vatBps 2100 .
#   (1998 2100) math:product 4195800 .
#   (4195800 10000) math:integerQuotient 419 .
#   (1998 419) math:sum 2417 .
# via the schematic forward rule:
#   {
#     ?Order a ex:Order .
#     ?Order ex:shipCountry ?Country .
#     ?Order ex:vatIdRaw "null" .
#     ex:policy ex:euCountries ?EU .
#     ?EU list:member ?Country .
#     ?Order ex:line ?Line .
#     ?Line ex:product ?Product .
#     ?Line ex:netCents ?NetCents .
#     ?Product ex:vatBps ?VatBps .
#     (?NetCents ?VatBps) math:product ?NetTimesBps .
#     (?NetTimesBps 10000) math:integerQuotient ?VatCents .
#     (?NetCents ?VatCents) math:sum ?GrossCents .
#   } => {
#     ?Line ex:vatBps ?VatBps .
#     ?Line ex:vatCents ?VatCents .
#     ?Line ex:grossCents ?GrossCents .
#     ?Line ex:vatReason ex:Domestic .
#   } .
# with substitution (on rule variables):
#   ?Country = "BE"
#   ?EU = ("BE" "NL" "DE" "FR" "LU")
#   ?GrossCents = 2417
#   ?Line = <urn:example:order:A100#line:0>
#   ?NetCents = 1998
#   ?NetTimesBps = 4195800
#   ?Order = <urn:example:order:A100>
#   ?Product = ex:Widget
#   ?VatBps = 2100
#   ?VatCents = 419
# Therefore the derived triple above is entailed by the rules and facts.
# ----------------------------------------------------------------------

<urn:example:order:A100#line:0> ex:grossCents 2417 .

# ----------------------------------------------------------------------
# Proof for derived triple:
#   <urn:example:order:A100#line:0> ex:vatReason ex:Domestic .
# It holds because the following instance of the rule body is provable:
#   <urn:example:order:A100> a ex:Order .
#   <urn:example:order:A100> ex:shipCountry "BE" .
#   <urn:example:order:A100> ex:vatIdRaw "null" .
#   ex:policy ex:euCountries ("BE" "NL" "DE" "FR" "LU") .
#   ("BE" "NL" "DE" "FR" "LU") list:member "BE" .
#   <urn:example:order:A100> ex:line <urn:example:order:A100#line:0> .
#   <urn:example:order:A100#line:0> ex:product ex:Widget .
#   <urn:example:order:A100#line:0> ex:netCents 1998 .
#   ex:Widget ex:vatBps 2100 .
#   (1998 2100) math:product 4195800 .
#   (4195800 10000) math:integerQuotient 419 .
#   (1998 419) math:sum 2417 .
# via the schematic forward rule:
#   {
#     ?Order a ex:Order .
#     ?Order ex:shipCountry ?Country .
#     ?Order ex:vatIdRaw "null" .
#     ex:policy ex:euCountries ?EU .
#     ?EU list:member ?Country .
#     ?Order ex:line ?Line .
#     ?Line ex:product ?Product .
#     ?Line ex:netCents ?NetCents .
#     ?Product ex:vatBps ?VatBps .
#     (?NetCents ?VatBps) math:product ?NetTimesBps .
#     (?NetTimesBps 10000) math:integerQuotient ?VatCents .
#     (?NetCents ?VatCents) math:sum ?GrossCents .
#   } => {
#     ?Line ex:vatBps ?VatBps .
#     ?Line ex:vatCents ?VatCents .
#     ?Line ex:grossCents ?GrossCents .
#     ?Line ex:vatReason ex:Domestic .
#   } .
# with substitution (on rule variables):
#   ?Country = "BE"
#   ?EU = ("BE" "NL" "DE" "FR" "LU")
#   ?GrossCents = 2417
#   ?Line = <urn:example:order:A100#line:0>
#   ?NetCents = 1998
#   ?NetTimesBps = 4195800
#   ?Order = <urn:example:order:A100>
#   ?Product = ex:Widget
#   ?VatBps = 2100
#   ?VatCents = 419
# Therefore the derived triple above is entailed by the rules and facts.
# ----------------------------------------------------------------------

<urn:example:order:A100#line:0> ex:vatReason ex:Domestic .

# ----------------------------------------------------------------------
# Proof for derived triple:
#   <urn:example:order:A100#line:1> ex:vatBps 600 .
# It holds because the following instance of the rule body is provable:
#   <urn:example:order:A100> a ex:Order .
#   <urn:example:order:A100> ex:shipCountry "BE" .
#   <urn:example:order:A100> ex:vatIdRaw "null" .
#   ex:policy ex:euCountries ("BE" "NL" "DE" "FR" "LU") .
#   ("BE" "NL" "DE" "FR" "LU") list:member "BE" .
#   <urn:example:order:A100> ex:line <urn:example:order:A100#line:1> .
#   <urn:example:order:A100#line:1> ex:product ex:Gadget .
#   <urn:example:order:A100#line:1> ex:netCents 1500 .
#   ex:Gadget ex:vatBps 600 .
#   (1500 600) math:product 900000 .
#   (900000 10000) math:integerQuotient 90 .
#   (1500 90) math:sum 1590 .
# via the schematic forward rule:
#   {
#     ?Order a ex:Order .
#     ?Order ex:shipCountry ?Country .
#     ?Order ex:vatIdRaw "null" .
#     ex:policy ex:euCountries ?EU .
#     ?EU list:member ?Country .
#     ?Order ex:line ?Line .
#     ?Line ex:product ?Product .
#     ?Line ex:netCents ?NetCents .
#     ?Product ex:vatBps ?VatBps .
#     (?NetCents ?VatBps) math:product ?NetTimesBps .
#     (?NetTimesBps 10000) math:integerQuotient ?VatCents .
#     (?NetCents ?VatCents) math:sum ?GrossCents .
#   } => {
#     ?Line ex:vatBps ?VatBps .
#     ?Line ex:vatCents ?VatCents .
#     ?Line ex:grossCents ?GrossCents .
#     ?Line ex:vatReason ex:Domestic .
#   } .
# with substitution (on rule variables):
#   ?Country = "BE"
#   ?EU = ("BE" "NL" "DE" "FR" "LU")
#   ?GrossCents = 1590
#   ?Line = <urn:example:order:A100#line:1>
#   ?NetCents = 1500
#   ?NetTimesBps = 900000
#   ?Order = <urn:example:order:A100>
#   ?Product = ex:Gadget
#   ?VatBps = 600
#   ?VatCents = 90
# Therefore the derived triple above is entailed by the rules and facts.
# ----------------------------------------------------------------------

<urn:example:order:A100#line:1> ex:vatBps 600 .

# ----------------------------------------------------------------------
# Proof for derived triple:
#   <urn:example:order:A100#line:1> ex:vatCents 90 .
# It holds because the following instance of the rule body is provable:
#   <urn:example:order:A100> a ex:Order .
#   <urn:example:order:A100> ex:shipCountry "BE" .
#   <urn:example:order:A100> ex:vatIdRaw "null" .
#   ex:policy ex:euCountries ("BE" "NL" "DE" "FR" "LU") .
#   ("BE" "NL" "DE" "FR" "LU") list:member "BE" .
#   <urn:example:order:A100> ex:line <urn:example:order:A100#line:1> .
#   <urn:example:order:A100#line:1> ex:product ex:Gadget .
#   <urn:example:order:A100#line:1> ex:netCents 1500 .
#   ex:Gadget ex:vatBps 600 .
#   (1500 600) math:product 900000 .
#   (900000 10000) math:integerQuotient 90 .
#   (1500 90) math:sum 1590 .
# via the schematic forward rule:
#   {
#     ?Order a ex:Order .
#     ?Order ex:shipCountry ?Country .
#     ?Order ex:vatIdRaw "null" .
#     ex:policy ex:euCountries ?EU .
#     ?EU list:member ?Country .
#     ?Order ex:line ?Line .
#     ?Line ex:product ?Product .
#     ?Line ex:netCents ?NetCents .
#     ?Product ex:vatBps ?VatBps .
#     (?NetCents ?VatBps) math:product ?NetTimesBps .
#     (?NetTimesBps 10000) math:integerQuotient ?VatCents .
#     (?NetCents ?VatCents) math:sum ?GrossCents .
#   } => {
#     ?Line ex:vatBps ?VatBps .
#     ?Line ex:vatCents ?VatCents .
#     ?Line ex:grossCents ?GrossCents .
#     ?Line ex:vatReason ex:Domestic .
#   } .
# with substitution (on rule variables):
#   ?Country = "BE"
#   ?EU = ("BE" "NL" "DE" "FR" "LU")
#   ?GrossCents = 1590
#   ?Line = <urn:example:order:A100#line:1>
#   ?NetCents = 1500
#   ?NetTimesBps = 900000
#   ?Order = <urn:example:order:A100>
#   ?Product = ex:Gadget
#   ?VatBps = 600
#   ?VatCents = 90
# Therefore the derived triple above is entailed by the rules and facts.
# ----------------------------------------------------------------------

<urn:example:order:A100#line:1> ex:vatCents 90 .

# ----------------------------------------------------------------------
# Proof for derived triple:
#   <urn:example:order:A100#line:1> ex:grossCents 1590 .
# It holds because the following instance of the rule body is provable:
#   <urn:example:order:A100> a ex:Order .
#   <urn:example:order:A100> ex:shipCountry "BE" .
#   <urn:example:order:A100> ex:vatIdRaw "null" .
#   ex:policy ex:euCountries ("BE" "NL" "DE" "FR" "LU") .
#   ("BE" "NL" "DE" "FR" "LU") list:member "BE" .
#   <urn:example:order:A100> ex:line <urn:example:order:A100#line:1> .
#   <urn:example:order:A100#line:1> ex:product ex:Gadget .
#   <urn:example:order:A100#line:1> ex:netCents 1500 .
#   ex:Gadget ex:vatBps 600 .
#   (1500 600) math:product 900000 .
#   (900000 10000) math:integerQuotient 90 .
#   (1500 90) math:sum 1590 .
# via the schematic forward rule:
#   {
#     ?Order a ex:Order .
#     ?Order ex:shipCountry ?Country .
#     ?Order ex:vatIdRaw "null" .
#     ex:policy ex:euCountries ?EU .
#     ?EU list:member ?Country .
#     ?Order ex:line ?Line .
#     ?Line ex:product ?Product .
#     ?Line ex:netCents ?NetCents .
#     ?Product ex:vatBps ?VatBps .
#     (?NetCents ?VatBps) math:product ?NetTimesBps .
#     (?NetTimesBps 10000) math:integerQuotient ?VatCents .
#     (?NetCents ?VatCents) math:sum ?GrossCents .
#   } => {
#     ?Line ex:vatBps ?VatBps .
#     ?Line ex:vatCents ?VatCents .
#     ?Line ex:grossCents ?GrossCents .
#     ?Line ex:vatReason ex:Domestic .
#   } .
# with substitution (on rule variables):
#   ?Country = "BE"
#   ?EU = ("BE" "NL" "DE" "FR" "LU")
#   ?GrossCents = 1590
#   ?Line = <urn:example:order:A100#line:1>
#   ?NetCents = 1500
#   ?NetTimesBps = 900000
#   ?Order = <urn:example:order:A100>
#   ?Product = ex:Gadget
#   ?VatBps = 600
#   ?VatCents = 90
# Therefore the derived triple above is entailed by the rules and facts.
# ----------------------------------------------------------------------

<urn:example:order:A100#line:1> ex:grossCents 1590 .

# ----------------------------------------------------------------------
# Proof for derived triple:
#   <urn:example:order:A100#line:1> ex:vatReason ex:Domestic .
# It holds because the following instance of the rule body is provable:
#   <urn:example:order:A100> a ex:Order .
#   <urn:example:order:A100> ex:shipCountry "BE" .
#   <urn:example:order:A100> ex:vatIdRaw "null" .
#   ex:policy ex:euCountries ("BE" "NL" "DE" "FR" "LU") .
#   ("BE" "NL" "DE" "FR" "LU") list:member "BE" .
#   <urn:example:order:A100> ex:line <urn:example:order:A100#line:1> .
#   <urn:example:order:A100#line:1> ex:product ex:Gadget .
#   <urn:example:order:A100#line:1> ex:netCents 1500 .
#   ex:Gadget ex:vatBps 600 .
#   (1500 600) math:product 900000 .
#   (900000 10000) math:integerQuotient 90 .
#   (1500 90) math:sum 1590 .
# via the schematic forward rule:
#   {
#     ?Order a ex:Order .
#     ?Order ex:shipCountry ?Country .
#     ?Order ex:vatIdRaw "null" .
#     ex:policy ex:euCountries ?EU .
#     ?EU list:member ?Country .
#     ?Order ex:line ?Line .
#     ?Line ex:product ?Product .
#     ?Line ex:netCents ?NetCents .
#     ?Product ex:vatBps ?VatBps .
#     (?NetCents ?VatBps) math:product ?NetTimesBps .
#     (?NetTimesBps 10000) math:integerQuotient ?VatCents .
#     (?NetCents ?VatCents) math:sum ?GrossCents .
#   } => {
#     ?Line ex:vatBps ?VatBps .
#     ?Line ex:vatCents ?VatCents .
#     ?Line ex:grossCents ?GrossCents .
#     ?Line ex:vatReason ex:Domestic .
#   } .
# with substitution (on rule variables):
#   ?Country = "BE"
#   ?EU = ("BE" "NL" "DE" "FR" "LU")
#   ?GrossCents = 1590
#   ?Line = <urn:example:order:A100#line:1>
#   ?NetCents = 1500
#   ?NetTimesBps = 900000
#   ?Order = <urn:example:order:A100>
#   ?Product = ex:Gadget
#   ?VatBps = 600
#   ?VatCents = 90
# Therefore the derived triple above is entailed by the rules and facts.
# ----------------------------------------------------------------------

<urn:example:order:A100#line:1> ex:vatReason ex:Domestic .

# ----------------------------------------------------------------------
# Proof for derived triple:
#   <urn:example:order:A400#line:0> ex:vatBps 2100 .
# It holds because the following instance of the rule body is provable:
#   <urn:example:order:A400> a ex:Order .
#   <urn:example:order:A400> ex:shipCountry "BE" .
#   <urn:example:order:A400> ex:vatIdRaw "null" .
#   ex:policy ex:euCountries ("BE" "NL" "DE" "FR" "LU") .
#   ("BE" "NL" "DE" "FR" "LU") list:member "BE" .
#   <urn:example:order:A400> ex:line <urn:example:order:A400#line:0> .
#   <urn:example:order:A400#line:0> ex:product ex:Widget .
#   <urn:example:order:A400#line:0> ex:netCents 1998 .
#   ex:Widget ex:vatBps 2100 .
#   (1998 2100) math:product 4195800 .
#   (4195800 10000) math:integerQuotient 419 .
#   (1998 419) math:sum 2417 .
# via the schematic forward rule:
#   {
#     ?Order a ex:Order .
#     ?Order ex:shipCountry ?Country .
#     ?Order ex:vatIdRaw "null" .
#     ex:policy ex:euCountries ?EU .
#     ?EU list:member ?Country .
#     ?Order ex:line ?Line .
#     ?Line ex:product ?Product .
#     ?Line ex:netCents ?NetCents .
#     ?Product ex:vatBps ?VatBps .
#     (?NetCents ?VatBps) math:product ?NetTimesBps .
#     (?NetTimesBps 10000) math:integerQuotient ?VatCents .
#     (?NetCents ?VatCents) math:sum ?GrossCents .
#   } => {
#     ?Line ex:vatBps ?VatBps .
#     ?Line ex:vatCents ?VatCents .
#     ?Line ex:grossCents ?GrossCents .
#     ?Line ex:vatReason ex:Domestic .
#   } .
# with substitution (on rule variables):
#   ?Country = "BE"
#   ?EU = ("BE" "NL" "DE" "FR" "LU")
#   ?GrossCents = 2417
#   ?Line = <urn:example:order:A400#line:0>
#   ?NetCents = 1998
#   ?NetTimesBps = 4195800
#   ?Order = <urn:example:order:A400>
#   ?Product = ex:Widget
#   ?VatBps = 2100
#   ?VatCents = 419
# Therefore the derived triple above is entailed by the rules and facts.
# ----------------------------------------------------------------------

<urn:example:order:A400#line:0> ex:vatBps 2100 .

# ----------------------------------------------------------------------
# Proof for derived triple:
#   <urn:example:order:A400#line:0> ex:vatCents 419 .
# It holds because the following instance of the rule body is provable:
#   <urn:example:order:A400> a ex:Order .
#   <urn:example:order:A400> ex:shipCountry "BE" .
#   <urn:example:order:A400> ex:vatIdRaw "null" .
#   ex:policy ex:euCountries ("BE" "NL" "DE" "FR" "LU") .
#   ("BE" "NL" "DE" "FR" "LU") list:member "BE" .
#   <urn:example:order:A400> ex:line <urn:example:order:A400#line:0> .
#   <urn:example:order:A400#line:0> ex:product ex:Widget .
#   <urn:example:order:A400#line:0> ex:netCents 1998 .
#   ex:Widget ex:vatBps 2100 .
#   (1998 2100) math:product 4195800 .
#   (4195800 10000) math:integerQuotient 419 .
#   (1998 419) math:sum 2417 .
# via the schematic forward rule:
#   {
#     ?Order a ex:Order .
#     ?Order ex:shipCountry ?Country .
#     ?Order ex:vatIdRaw "null" .
#     ex:policy ex:euCountries ?EU .
#     ?EU list:member ?Country .
#     ?Order ex:line ?Line .
#     ?Line ex:product ?Product .
#     ?Line ex:netCents ?NetCents .
#     ?Product ex:vatBps ?VatBps .
#     (?NetCents ?VatBps) math:product ?NetTimesBps .
#     (?NetTimesBps 10000) math:integerQuotient ?VatCents .
#     (?NetCents ?VatCents) math:sum ?GrossCents .
#   } => {
#     ?Line ex:vatBps ?VatBps .
#     ?Line ex:vatCents ?VatCents .
#     ?Line ex:grossCents ?GrossCents .
#     ?Line ex:vatReason ex:Domestic .
#   } .
# with substitution (on rule variables):
#   ?Country = "BE"
#   ?EU = ("BE" "NL" "DE" "FR" "LU")
#   ?GrossCents = 2417
#   ?Line = <urn:example:order:A400#line:0>
#   ?NetCents = 1998
#   ?NetTimesBps = 4195800
#   ?Order = <urn:example:order:A400>
#   ?Product = ex:Widget
#   ?VatBps = 2100
#   ?VatCents = 419
# Therefore the derived triple above is entailed by the rules and facts.
# ----------------------------------------------------------------------

<urn:example:order:A400#line:0> ex:vatCents 419 .

# ----------------------------------------------------------------------
# Proof for derived triple:
#   <urn:example:order:A400#line:0> ex:grossCents 2417 .
# It holds because the following instance of the rule body is provable:
#   <urn:example:order:A400> a ex:Order .
#   <urn:example:order:A400> ex:shipCountry "BE" .
#   <urn:example:order:A400> ex:vatIdRaw "null" .
#   ex:policy ex:euCountries ("BE" "NL" "DE" "FR" "LU") .
#   ("BE" "NL" "DE" "FR" "LU") list:member "BE" .
#   <urn:example:order:A400> ex:line <urn:example:order:A400#line:0> .
#   <urn:example:order:A400#line:0> ex:product ex:Widget .
#   <urn:example:order:A400#line:0> ex:netCents 1998 .
#   ex:Widget ex:vatBps 2100 .
#   (1998 2100) math:product 4195800 .
#   (4195800 10000) math:integerQuotient 419 .
#   (1998 419) math:sum 2417 .
# via the schematic forward rule:
#   {
#     ?Order a ex:Order .
#     ?Order ex:shipCountry ?Country .
#     ?Order ex:vatIdRaw "null" .
#     ex:policy ex:euCountries ?EU .
#     ?EU list:member ?Country .
#     ?Order ex:line ?Line .
#     ?Line ex:product ?Product .
#     ?Line ex:netCents ?NetCents .
#     ?Product ex:vatBps ?VatBps .
#     (?NetCents ?VatBps) math:product ?NetTimesBps .
#     (?NetTimesBps 10000) math:integerQuotient ?VatCents .
#     (?NetCents ?VatCents) math:sum ?GrossCents .
#   } => {
#     ?Line ex:vatBps ?VatBps .
#     ?Line ex:vatCents ?VatCents .
#     ?Line ex:grossCents ?GrossCents .
#     ?Line ex:vatReason ex:Domestic .
#   } .
# with substitution (on rule variables):
#   ?Country = "BE"
#   ?EU = ("BE" "NL" "DE" "FR" "LU")
#   ?GrossCents = 2417
#   ?Line = <urn:example:order:A400#line:0>
#   ?NetCents = 1998
#   ?NetTimesBps = 4195800
#   ?Order = <urn:example:order:A400>
#   ?Product = ex:Widget
#   ?VatBps = 2100
#   ?VatCents = 419
# Therefore the derived triple above is entailed by the rules and facts.
# ----------------------------------------------------------------------

<urn:example:order:A400#line:0> ex:grossCents 2417 .

# ----------------------------------------------------------------------
# Proof for derived triple:
#   <urn:example:order:A400#line:0> ex:vatReason ex:Domestic .
# It holds because the following instance of the rule body is provable:
#   <urn:example:order:A400> a ex:Order .
#   <urn:example:order:A400> ex:shipCountry "BE" .
#   <urn:example:order:A400> ex:vatIdRaw "null" .
#   ex:policy ex:euCountries ("BE" "NL" "DE" "FR" "LU") .
#   ("BE" "NL" "DE" "FR" "LU") list:member "BE" .
#   <urn:example:order:A400> ex:line <urn:example:order:A400#line:0> .
#   <urn:example:order:A400#line:0> ex:product ex:Widget .
#   <urn:example:order:A400#line:0> ex:netCents 1998 .
#   ex:Widget ex:vatBps 2100 .
#   (1998 2100) math:product 4195800 .
#   (4195800 10000) math:integerQuotient 419 .
#   (1998 419) math:sum 2417 .
# via the schematic forward rule:
#   {
#     ?Order a ex:Order .
#     ?Order ex:shipCountry ?Country .
#     ?Order ex:vatIdRaw "null" .
#     ex:policy ex:euCountries ?EU .
#     ?EU list:member ?Country .
#     ?Order ex:line ?Line .
#     ?Line ex:product ?Product .
#     ?Line ex:netCents ?NetCents .
#     ?Product ex:vatBps ?VatBps .
#     (?NetCents ?VatBps) math:product ?NetTimesBps .
#     (?NetTimesBps 10000) math:integerQuotient ?VatCents .
#     (?NetCents ?VatCents) math:sum ?GrossCents .
#   } => {
#     ?Line ex:vatBps ?VatBps .
#     ?Line ex:vatCents ?VatCents .
#     ?Line ex:grossCents ?GrossCents .
#     ?Line ex:vatReason ex:Domestic .
#   } .
# with substitution (on rule variables):
#   ?Country = "BE"
#   ?EU = ("BE" "NL" "DE" "FR" "LU")
#   ?GrossCents = 2417
#   ?Line = <urn:example:order:A400#line:0>
#   ?NetCents = 1998
#   ?NetTimesBps = 4195800
#   ?Order = <urn:example:order:A400>
#   ?Product = ex:Widget
#   ?VatBps = 2100
#   ?VatCents = 419
# Therefore the derived triple above is entailed by the rules and facts.
# ----------------------------------------------------------------------

<urn:example:order:A400#line:0> ex:vatReason ex:Domestic .

# ----------------------------------------------------------------------
# Proof for derived triple:
#   <urn:example:order:A400#line:1> ex:vatBps 600 .
# It holds because the following instance of the rule body is provable:
#   <urn:example:order:A400> a ex:Order .
#   <urn:example:order:A400> ex:shipCountry "BE" .
#   <urn:example:order:A400> ex:vatIdRaw "null" .
#   ex:policy ex:euCountries ("BE" "NL" "DE" "FR" "LU") .
#   ("BE" "NL" "DE" "FR" "LU") list:member "BE" .
#   <urn:example:order:A400> ex:line <urn:example:order:A400#line:1> .
#   <urn:example:order:A400#line:1> ex:product ex:Gadget .
#   <urn:example:order:A400#line:1> ex:netCents 1500 .
#   ex:Gadget ex:vatBps 600 .
#   (1500 600) math:product 900000 .
#   (900000 10000) math:integerQuotient 90 .
#   (1500 90) math:sum 1590 .
# via the schematic forward rule:
#   {
#     ?Order a ex:Order .
#     ?Order ex:shipCountry ?Country .
#     ?Order ex:vatIdRaw "null" .
#     ex:policy ex:euCountries ?EU .
#     ?EU list:member ?Country .
#     ?Order ex:line ?Line .
#     ?Line ex:product ?Product .
#     ?Line ex:netCents ?NetCents .
#     ?Product ex:vatBps ?VatBps .
#     (?NetCents ?VatBps) math:product ?NetTimesBps .
#     (?NetTimesBps 10000) math:integerQuotient ?VatCents .
#     (?NetCents ?VatCents) math:sum ?GrossCents .
#   } => {
#     ?Line ex:vatBps ?VatBps .
#     ?Line ex:vatCents ?VatCents .
#     ?Line ex:grossCents ?GrossCents .
#     ?Line ex:vatReason ex:Domestic .
#   } .
# with substitution (on rule variables):
#   ?Country = "BE"
#   ?EU = ("BE" "NL" "DE" "FR" "LU")
#   ?GrossCents = 1590
#   ?Line = <urn:example:order:A400#line:1>
#   ?NetCents = 1500
#   ?NetTimesBps = 900000
#   ?Order = <urn:example:order:A400>
#   ?Product = ex:Gadget
#   ?VatBps = 600
#   ?VatCents = 90
# Therefore the derived triple above is entailed by the rules and facts.
# ----------------------------------------------------------------------

<urn:example:order:A400#line:1> ex:vatBps 600 .

# ----------------------------------------------------------------------
# Proof for derived triple:
#   <urn:example:order:A400#line:1> ex:vatCents 90 .
# It holds because the following instance of the rule body is provable:
#   <urn:example:order:A400> a ex:Order .
#   <urn:example:order:A400> ex:shipCountry "BE" .
#   <urn:example:order:A400> ex:vatIdRaw "null" .
#   ex:policy ex:euCountries ("BE" "NL" "DE" "FR" "LU") .
#   ("BE" "NL" "DE" "FR" "LU") list:member "BE" .
#   <urn:example:order:A400> ex:line <urn:example:order:A400#line:1> .
#   <urn:example:order:A400#line:1> ex:product ex:Gadget .
#   <urn:example:order:A400#line:1> ex:netCents 1500 .
#   ex:Gadget ex:vatBps 600 .
#   (1500 600) math:product 900000 .
#   (900000 10000) math:integerQuotient 90 .
#   (1500 90) math:sum 1590 .
# via the schematic forward rule:
#   {
#     ?Order a ex:Order .
#     ?Order ex:shipCountry ?Country .
#     ?Order ex:vatIdRaw "null" .
#     ex:policy ex:euCountries ?EU .
#     ?EU list:member ?Country .
#     ?Order ex:line ?Line .
#     ?Line ex:product ?Product .
#     ?Line ex:netCents ?NetCents .
#     ?Product ex:vatBps ?VatBps .
#     (?NetCents ?VatBps) math:product ?NetTimesBps .
#     (?NetTimesBps 10000) math:integerQuotient ?VatCents .
#     (?NetCents ?VatCents) math:sum ?GrossCents .
#   } => {
#     ?Line ex:vatBps ?VatBps .
#     ?Line ex:vatCents ?VatCents .
#     ?Line ex:grossCents ?GrossCents .
#     ?Line ex:vatReason ex:Domestic .
#   } .
# with substitution (on rule variables):
#   ?Country = "BE"
#   ?EU = ("BE" "NL" "DE" "FR" "LU")
#   ?GrossCents = 1590
#   ?Line = <urn:example:order:A400#line:1>
#   ?NetCents = 1500
#   ?NetTimesBps = 900000
#   ?Order = <urn:example:order:A400>
#   ?Product = ex:Gadget
#   ?VatBps = 600
#   ?VatCents = 90
# Therefore the derived triple above is entailed by the rules and facts.
# ----------------------------------------------------------------------

<urn:example:order:A400#line:1> ex:vatCents 90 .

# ----------------------------------------------------------------------
# Proof for derived triple:
#   <urn:example:order:A400#line:1> ex:grossCents 1590 .
# It holds because the following instance of the rule body is provable:
#   <urn:example:order:A400> a ex:Order .
#   <urn:example:order:A400> ex:shipCountry "BE" .
#   <urn:example:order:A400> ex:vatIdRaw "null" .
#   ex:policy ex:euCountries ("BE" "NL" "DE" "FR" "LU") .
#   ("BE" "NL" "DE" "FR" "LU") list:member "BE" .
#   <urn:example:order:A400> ex:line <urn:example:order:A400#line:1> .
#   <urn:example:order:A400#line:1> ex:product ex:Gadget .
#   <urn:example:order:A400#line:1> ex:netCents 1500 .
#   ex:Gadget ex:vatBps 600 .
#   (1500 600) math:product 900000 .
#   (900000 10000) math:integerQuotient 90 .
#   (1500 90) math:sum 1590 .
# via the schematic forward rule:
#   {
#     ?Order a ex:Order .
#     ?Order ex:shipCountry ?Country .
#     ?Order ex:vatIdRaw "null" .
#     ex:policy ex:euCountries ?EU .
#     ?EU list:member ?Country .
#     ?Order ex:line ?Line .
#     ?Line ex:product ?Product .
#     ?Line ex:netCents ?NetCents .
#     ?Product ex:vatBps ?VatBps .
#     (?NetCents ?VatBps) math:product ?NetTimesBps .
#     (?NetTimesBps 10000) math:integerQuotient ?VatCents .
#     (?NetCents ?VatCents) math:sum ?GrossCents .
#   } => {
#     ?Line ex:vatBps ?VatBps .
#     ?Line ex:vatCents ?VatCents .
#     ?Line ex:grossCents ?GrossCents .
#     ?Line ex:vatReason ex:Domestic .
#   } .
# with substitution (on rule variables):
#   ?Country = "BE"
#   ?EU = ("BE" "NL" "DE" "FR" "LU")
#   ?GrossCents = 1590
#   ?Line = <urn:example:order:A400#line:1>
#   ?NetCents = 1500
#   ?NetTimesBps = 900000
#   ?Order = <urn:example:order:A400>
#   ?Product = ex:Gadget
#   ?VatBps = 600
#   ?VatCents = 90
# Therefore the derived triple above is entailed by the rules and facts.
# ----------------------------------------------------------------------

<urn:example:order:A400#line:1> ex:grossCents 1590 .

# ----------------------------------------------------------------------
# Proof for derived triple:
#   <urn:example:order:A400#line:1> ex:vatReason ex:Domestic .
# It holds because the following instance of the rule body is provable:
#   <urn:example:order:A400> a ex:Order .
#   <urn:example:order:A400> ex:shipCountry "BE" .
#   <urn:example:order:A400> ex:vatIdRaw "null" .
#   ex:policy ex:euCountries ("BE" "NL" "DE" "FR" "LU") .
#   ("BE" "NL" "DE" "FR" "LU") list:member "BE" .
#   <urn:example:order:A400> ex:line <urn:example:order:A400#line:1> .
#   <urn:example:order:A400#line:1> ex:product ex:Gadget .
#   <urn:example:order:A400#line:1> ex:netCents 1500 .
#   ex:Gadget ex:vatBps 600 .
#   (1500 600) math:product 900000 .
#   (900000 10000) math:integerQuotient 90 .
#   (1500 90) math:sum 1590 .
# via the schematic forward rule:
#   {
#     ?Order a ex:Order .
#     ?Order ex:shipCountry ?Country .
#     ?Order ex:vatIdRaw "null" .
#     ex:policy ex:euCountries ?EU .
#     ?EU list:member ?Country .
#     ?Order ex:line ?Line .
#     ?Line ex:product ?Product .
#     ?Line ex:netCents ?NetCents .
#     ?Product ex:vatBps ?VatBps .
#     (?NetCents ?VatBps) math:product ?NetTimesBps .
#     (?NetTimesBps 10000) math:integerQuotient ?VatCents .
#     (?NetCents ?VatCents) math:sum ?GrossCents .
#   } => {
#     ?Line ex:vatBps ?VatBps .
#     ?Line ex:vatCents ?VatCents .
#     ?Line ex:grossCents ?GrossCents .
#     ?Line ex:vatReason ex:Domestic .
#   } .
# with substitution (on rule variables):
#   ?Country = "BE"
#   ?EU = ("BE" "NL" "DE" "FR" "LU")
#   ?GrossCents = 1590
#   ?Line = <urn:example:order:A400#line:1>
#   ?NetCents = 1500
#   ?NetTimesBps = 900000
#   ?Order = <urn:example:order:A400>
#   ?Product = ex:Gadget
#   ?VatBps = 600
#   ?VatCents = 90
# Therefore the derived triple above is entailed by the rules and facts.
# ----------------------------------------------------------------------

<urn:example:order:A400#line:1> ex:vatReason ex:Domestic .

# ----------------------------------------------------------------------
# Proof for derived triple:
#   <urn:example:order:A100> ex:computedNetCents 3498 .
# It holds because the following instance of the rule body is provable:
#   <urn:example:order:A100> a ex:Order .
#   <urn:example:order:A100> ex:line <urn:example:order:A100#line:0> .
#   <urn:example:order:A100#line:0> ex:lineIndex 0 .
#   <urn:example:order:A100#line:0> ex:netCents 1998 .
#   <urn:example:order:A100#line:0> ex:vatCents 419 .
#   <urn:example:order:A100#line:0> ex:grossCents 2417 .
#   <urn:example:order:A100> ex:line <urn:example:order:A100#line:1> .
#   <urn:example:order:A100#line:1> ex:lineIndex 1 .
#   <urn:example:order:A100#line:1> ex:netCents 1500 .
#   <urn:example:order:A100#line:1> ex:vatCents 90 .
#   <urn:example:order:A100#line:1> ex:grossCents 1590 .
#   (1998 1500) math:sum 3498 .
#   (419 90) math:sum 509 .
#   (2417 1590) math:sum 4007 .
# via the schematic forward rule:
#   {
#     ?Order a ex:Order .
#     ?Order ex:line ?L0 .
#     ?L0 ex:lineIndex 0 .
#     ?L0 ex:netCents ?N0 .
#     ?L0 ex:vatCents ?V0 .
#     ?L0 ex:grossCents ?G0 .
#     ?Order ex:line ?L1 .
#     ?L1 ex:lineIndex 1 .
#     ?L1 ex:netCents ?N1 .
#     ?L1 ex:vatCents ?V1 .
#     ?L1 ex:grossCents ?G1 .
#     (?N0 ?N1) math:sum ?Net .
#     (?V0 ?V1) math:sum ?Vat .
#     (?G0 ?G1) math:sum ?Gross .
#   } => {
#     ?Order ex:computedNetCents ?Net .
#     ?Order ex:computedVatCents ?Vat .
#     ?Order ex:computedGrossCents ?Gross .
#   } .
# with substitution (on rule variables):
#   ?G0 = 2417
#   ?G1 = 1590
#   ?Gross = 4007
#   ?L0 = <urn:example:order:A100#line:0>
#   ?L1 = <urn:example:order:A100#line:1>
#   ?N0 = 1998
#   ?N1 = 1500
#   ?Net = 3498
#   ?Order = <urn:example:order:A100>
#   ?V0 = 419
#   ?V1 = 90
#   ?Vat = 509
# Therefore the derived triple above is entailed by the rules and facts.
# ----------------------------------------------------------------------

<urn:example:order:A100> ex:computedNetCents 3498 .

# ----------------------------------------------------------------------
# Proof for derived triple:
#   <urn:example:order:A100> ex:computedVatCents 509 .
# It holds because the following instance of the rule body is provable:
#   <urn:example:order:A100> a ex:Order .
#   <urn:example:order:A100> ex:line <urn:example:order:A100#line:0> .
#   <urn:example:order:A100#line:0> ex:lineIndex 0 .
#   <urn:example:order:A100#line:0> ex:netCents 1998 .
#   <urn:example:order:A100#line:0> ex:vatCents 419 .
#   <urn:example:order:A100#line:0> ex:grossCents 2417 .
#   <urn:example:order:A100> ex:line <urn:example:order:A100#line:1> .
#   <urn:example:order:A100#line:1> ex:lineIndex 1 .
#   <urn:example:order:A100#line:1> ex:netCents 1500 .
#   <urn:example:order:A100#line:1> ex:vatCents 90 .
#   <urn:example:order:A100#line:1> ex:grossCents 1590 .
#   (1998 1500) math:sum 3498 .
#   (419 90) math:sum 509 .
#   (2417 1590) math:sum 4007 .
# via the schematic forward rule:
#   {
#     ?Order a ex:Order .
#     ?Order ex:line ?L0 .
#     ?L0 ex:lineIndex 0 .
#     ?L0 ex:netCents ?N0 .
#     ?L0 ex:vatCents ?V0 .
#     ?L0 ex:grossCents ?G0 .
#     ?Order ex:line ?L1 .
#     ?L1 ex:lineIndex 1 .
#     ?L1 ex:netCents ?N1 .
#     ?L1 ex:vatCents ?V1 .
#     ?L1 ex:grossCents ?G1 .
#     (?N0 ?N1) math:sum ?Net .
#     (?V0 ?V1) math:sum ?Vat .
#     (?G0 ?G1) math:sum ?Gross .
#   } => {
#     ?Order ex:computedNetCents ?Net .
#     ?Order ex:computedVatCents ?Vat .
#     ?Order ex:computedGrossCents ?Gross .
#   } .
# with substitution (on rule variables):
#   ?G0 = 2417
#   ?G1 = 1590
#   ?Gross = 4007
#   ?L0 = <urn:example:order:A100#line:0>
#   ?L1 = <urn:example:order:A100#line:1>
#   ?N0 = 1998
#   ?N1 = 1500
#   ?Net = 3498
#   ?Order = <urn:example:order:A100>
#   ?V0 = 419
#   ?V1 = 90
#   ?Vat = 509
# Therefore the derived triple above is entailed by the rules and facts.
# ----------------------------------------------------------------------

<urn:example:order:A100> ex:computedVatCents 509 .

# ----------------------------------------------------------------------
# Proof for derived triple:
#   <urn:example:order:A100> ex:computedGrossCents 4007 .
# It holds because the following instance of the rule body is provable:
#   <urn:example:order:A100> a ex:Order .
#   <urn:example:order:A100> ex:line <urn:example:order:A100#line:0> .
#   <urn:example:order:A100#line:0> ex:lineIndex 0 .
#   <urn:example:order:A100#line:0> ex:netCents 1998 .
#   <urn:example:order:A100#line:0> ex:vatCents 419 .
#   <urn:example:order:A100#line:0> ex:grossCents 2417 .
#   <urn:example:order:A100> ex:line <urn:example:order:A100#line:1> .
#   <urn:example:order:A100#line:1> ex:lineIndex 1 .
#   <urn:example:order:A100#line:1> ex:netCents 1500 .
#   <urn:example:order:A100#line:1> ex:vatCents 90 .
#   <urn:example:order:A100#line:1> ex:grossCents 1590 .
#   (1998 1500) math:sum 3498 .
#   (419 90) math:sum 509 .
#   (2417 1590) math:sum 4007 .
# via the schematic forward rule:
#   {
#     ?Order a ex:Order .
#     ?Order ex:line ?L0 .
#     ?L0 ex:lineIndex 0 .
#     ?L0 ex:netCents ?N0 .
#     ?L0 ex:vatCents ?V0 .
#     ?L0 ex:grossCents ?G0 .
#     ?Order ex:line ?L1 .
#     ?L1 ex:lineIndex 1 .
#     ?L1 ex:netCents ?N1 .
#     ?L1 ex:vatCents ?V1 .
#     ?L1 ex:grossCents ?G1 .
#     (?N0 ?N1) math:sum ?Net .
#     (?V0 ?V1) math:sum ?Vat .
#     (?G0 ?G1) math:sum ?Gross .
#   } => {
#     ?Order ex:computedNetCents ?Net .
#     ?Order ex:computedVatCents ?Vat .
#     ?Order ex:computedGrossCents ?Gross .
#   } .
# with substitution (on rule variables):
#   ?G0 = 2417
#   ?G1 = 1590
#   ?Gross = 4007
#   ?L0 = <urn:example:order:A100#line:0>
#   ?L1 = <urn:example:order:A100#line:1>
#   ?N0 = 1998
#   ?N1 = 1500
#   ?Net = 3498
#   ?Order = <urn:example:order:A100>
#   ?V0 = 419
#   ?V1 = 90
#   ?Vat = 509
# Therefore the derived triple above is entailed by the rules and facts.
# ----------------------------------------------------------------------

<urn:example:order:A100> ex:computedGrossCents 4007 .

# ----------------------------------------------------------------------
# Proof for derived triple:
#   <urn:example:order:A200> ex:computedNetCents 3498 .
# It holds because the following instance of the rule body is provable:
#   <urn:example:order:A200> a ex:Order .
#   <urn:example:order:A200> ex:line <urn:example:order:A200#line:0> .
#   <urn:example:order:A200#line:0> ex:lineIndex 0 .
#   <urn:example:order:A200#line:0> ex:netCents 1998 .
#   <urn:example:order:A200#line:0> ex:vatCents 0 .
#   <urn:example:order:A200#line:0> ex:grossCents 1998 .
#   <urn:example:order:A200> ex:line <urn:example:order:A200#line:1> .
#   <urn:example:order:A200#line:1> ex:lineIndex 1 .
#   <urn:example:order:A200#line:1> ex:netCents 1500 .
#   <urn:example:order:A200#line:1> ex:vatCents 0 .
#   <urn:example:order:A200#line:1> ex:grossCents 1500 .
#   (1998 1500) math:sum 3498 .
#   (0 0) math:sum 0 .
#   (1998 1500) math:sum 3498 .
# via the schematic forward rule:
#   {
#     ?Order a ex:Order .
#     ?Order ex:line ?L0 .
#     ?L0 ex:lineIndex 0 .
#     ?L0 ex:netCents ?N0 .
#     ?L0 ex:vatCents ?V0 .
#     ?L0 ex:grossCents ?G0 .
#     ?Order ex:line ?L1 .
#     ?L1 ex:lineIndex 1 .
#     ?L1 ex:netCents ?N1 .
#     ?L1 ex:vatCents ?V1 .
#     ?L1 ex:grossCents ?G1 .
#     (?N0 ?N1) math:sum ?Net .
#     (?V0 ?V1) math:sum ?Vat .
#     (?G0 ?G1) math:sum ?Gross .
#   } => {
#     ?Order ex:computedNetCents ?Net .
#     ?Order ex:computedVatCents ?Vat .
#     ?Order ex:computedGrossCents ?Gross .
#   } .
# with substitution (on rule variables):
#   ?G0 = 1998
#   ?G1 = 1500
#   ?Gross = 3498
#   ?L0 = <urn:example:order:A200#line:0>
#   ?L1 = <urn:example:order:A200#line:1>
#   ?N0 = 1998
#   ?N1 = 1500
#   ?Net = 3498
#   ?Order = <urn:example:order:A200>
#   ?V0 = 0
#   ?V1 = 0
#   ?Vat = 0
# Therefore the derived triple above is entailed by the rules and facts.
# ----------------------------------------------------------------------

<urn:example:order:A200> ex:computedNetCents 3498 .

# ----------------------------------------------------------------------
# Proof for derived triple:
#   <urn:example:order:A200> ex:computedVatCents 0 .
# It holds because the following instance of the rule body is provable:
#   <urn:example:order:A200> a ex:Order .
#   <urn:example:order:A200> ex:line <urn:example:order:A200#line:0> .
#   <urn:example:order:A200#line:0> ex:lineIndex 0 .
#   <urn:example:order:A200#line:0> ex:netCents 1998 .
#   <urn:example:order:A200#line:0> ex:vatCents 0 .
#   <urn:example:order:A200#line:0> ex:grossCents 1998 .
#   <urn:example:order:A200> ex:line <urn:example:order:A200#line:1> .
#   <urn:example:order:A200#line:1> ex:lineIndex 1 .
#   <urn:example:order:A200#line:1> ex:netCents 1500 .
#   <urn:example:order:A200#line:1> ex:vatCents 0 .
#   <urn:example:order:A200#line:1> ex:grossCents 1500 .
#   (1998 1500) math:sum 3498 .
#   (0 0) math:sum 0 .
#   (1998 1500) math:sum 3498 .
# via the schematic forward rule:
#   {
#     ?Order a ex:Order .
#     ?Order ex:line ?L0 .
#     ?L0 ex:lineIndex 0 .
#     ?L0 ex:netCents ?N0 .
#     ?L0 ex:vatCents ?V0 .
#     ?L0 ex:grossCents ?G0 .
#     ?Order ex:line ?L1 .
#     ?L1 ex:lineIndex 1 .
#     ?L1 ex:netCents ?N1 .
#     ?L1 ex:vatCents ?V1 .
#     ?L1 ex:grossCents ?G1 .
#     (?N0 ?N1) math:sum ?Net .
#     (?V0 ?V1) math:sum ?Vat .
#     (?G0 ?G1) math:sum ?Gross .
#   } => {
#     ?Order ex:computedNetCents ?Net .
#     ?Order ex:computedVatCents ?Vat .
#     ?Order ex:computedGrossCents ?Gross .
#   } .
# with substitution (on rule variables):
#   ?G0 = 1998
#   ?G1 = 1500
#   ?Gross = 3498
#   ?L0 = <urn:example:order:A200#line:0>
#   ?L1 = <urn:example:order:A200#line:1>
#   ?N0 = 1998
#   ?N1 = 1500
#   ?Net = 3498
#   ?Order = <urn:example:order:A200>
#   ?V0 = 0
#   ?V1 = 0
#   ?Vat = 0
# Therefore the derived triple above is entailed by the rules and facts.
# ----------------------------------------------------------------------

<urn:example:order:A200> ex:computedVatCents 0 .

# ----------------------------------------------------------------------
# Proof for derived triple:
#   <urn:example:order:A200> ex:computedGrossCents 3498 .
# It holds because the following instance of the rule body is provable:
#   <urn:example:order:A200> a ex:Order .
#   <urn:example:order:A200> ex:line <urn:example:order:A200#line:0> .
#   <urn:example:order:A200#line:0> ex:lineIndex 0 .
#   <urn:example:order:A200#line:0> ex:netCents 1998 .
#   <urn:example:order:A200#line:0> ex:vatCents 0 .
#   <urn:example:order:A200#line:0> ex:grossCents 1998 .
#   <urn:example:order:A200> ex:line <urn:example:order:A200#line:1> .
#   <urn:example:order:A200#line:1> ex:lineIndex 1 .
#   <urn:example:order:A200#line:1> ex:netCents 1500 .
#   <urn:example:order:A200#line:1> ex:vatCents 0 .
#   <urn:example:order:A200#line:1> ex:grossCents 1500 .
#   (1998 1500) math:sum 3498 .
#   (0 0) math:sum 0 .
#   (1998 1500) math:sum 3498 .
# via the schematic forward rule:
#   {
#     ?Order a ex:Order .
#     ?Order ex:line ?L0 .
#     ?L0 ex:lineIndex 0 .
#     ?L0 ex:netCents ?N0 .
#     ?L0 ex:vatCents ?V0 .
#     ?L0 ex:grossCents ?G0 .
#     ?Order ex:line ?L1 .
#     ?L1 ex:lineIndex 1 .
#     ?L1 ex:netCents ?N1 .
#     ?L1 ex:vatCents ?V1 .
#     ?L1 ex:grossCents ?G1 .
#     (?N0 ?N1) math:sum ?Net .
#     (?V0 ?V1) math:sum ?Vat .
#     (?G0 ?G1) math:sum ?Gross .
#   } => {
#     ?Order ex:computedNetCents ?Net .
#     ?Order ex:computedVatCents ?Vat .
#     ?Order ex:computedGrossCents ?Gross .
#   } .
# with substitution (on rule variables):
#   ?G0 = 1998
#   ?G1 = 1500
#   ?Gross = 3498
#   ?L0 = <urn:example:order:A200#line:0>
#   ?L1 = <urn:example:order:A200#line:1>
#   ?N0 = 1998
#   ?N1 = 1500
#   ?Net = 3498
#   ?Order = <urn:example:order:A200>
#   ?V0 = 0
#   ?V1 = 0
#   ?Vat = 0
# Therefore the derived triple above is entailed by the rules and facts.
# ----------------------------------------------------------------------

<urn:example:order:A200> ex:computedGrossCents 3498 .

# ----------------------------------------------------------------------
# Proof for derived triple:
#   <urn:example:order:A300> ex:computedNetCents 3498 .
# It holds because the following instance of the rule body is provable:
#   <urn:example:order:A300> a ex:Order .
#   <urn:example:order:A300> ex:line <urn:example:order:A300#line:0> .
#   <urn:example:order:A300#line:0> ex:lineIndex 0 .
#   <urn:example:order:A300#line:0> ex:netCents 1998 .
#   <urn:example:order:A300#line:0> ex:vatCents 0 .
#   <urn:example:order:A300#line:0> ex:grossCents 1998 .
#   <urn:example:order:A300> ex:line <urn:example:order:A300#line:1> .
#   <urn:example:order:A300#line:1> ex:lineIndex 1 .
#   <urn:example:order:A300#line:1> ex:netCents 1500 .
#   <urn:example:order:A300#line:1> ex:vatCents 0 .
#   <urn:example:order:A300#line:1> ex:grossCents 1500 .
#   (1998 1500) math:sum 3498 .
#   (0 0) math:sum 0 .
#   (1998 1500) math:sum 3498 .
# via the schematic forward rule:
#   {
#     ?Order a ex:Order .
#     ?Order ex:line ?L0 .
#     ?L0 ex:lineIndex 0 .
#     ?L0 ex:netCents ?N0 .
#     ?L0 ex:vatCents ?V0 .
#     ?L0 ex:grossCents ?G0 .
#     ?Order ex:line ?L1 .
#     ?L1 ex:lineIndex 1 .
#     ?L1 ex:netCents ?N1 .
#     ?L1 ex:vatCents ?V1 .
#     ?L1 ex:grossCents ?G1 .
#     (?N0 ?N1) math:sum ?Net .
#     (?V0 ?V1) math:sum ?Vat .
#     (?G0 ?G1) math:sum ?Gross .
#   } => {
#     ?Order ex:computedNetCents ?Net .
#     ?Order ex:computedVatCents ?Vat .
#     ?Order ex:computedGrossCents ?Gross .
#   } .
# with substitution (on rule variables):
#   ?G0 = 1998
#   ?G1 = 1500
#   ?Gross = 3498
#   ?L0 = <urn:example:order:A300#line:0>
#   ?L1 = <urn:example:order:A300#line:1>
#   ?N0 = 1998
#   ?N1 = 1500
#   ?Net = 3498
#   ?Order = <urn:example:order:A300>
#   ?V0 = 0
#   ?V1 = 0
#   ?Vat = 0
# Therefore the derived triple above is entailed by the rules and facts.
# ----------------------------------------------------------------------

<urn:example:order:A300> ex:computedNetCents 3498 .

# ----------------------------------------------------------------------
# Proof for derived triple:
#   <urn:example:order:A300> ex:computedVatCents 0 .
# It holds because the following instance of the rule body is provable:
#   <urn:example:order:A300> a ex:Order .
#   <urn:example:order:A300> ex:line <urn:example:order:A300#line:0> .
#   <urn:example:order:A300#line:0> ex:lineIndex 0 .
#   <urn:example:order:A300#line:0> ex:netCents 1998 .
#   <urn:example:order:A300#line:0> ex:vatCents 0 .
#   <urn:example:order:A300#line:0> ex:grossCents 1998 .
#   <urn:example:order:A300> ex:line <urn:example:order:A300#line:1> .
#   <urn:example:order:A300#line:1> ex:lineIndex 1 .
#   <urn:example:order:A300#line:1> ex:netCents 1500 .
#   <urn:example:order:A300#line:1> ex:vatCents 0 .
#   <urn:example:order:A300#line:1> ex:grossCents 1500 .
#   (1998 1500) math:sum 3498 .
#   (0 0) math:sum 0 .
#   (1998 1500) math:sum 3498 .
# via the schematic forward rule:
#   {
#     ?Order a ex:Order .
#     ?Order ex:line ?L0 .
#     ?L0 ex:lineIndex 0 .
#     ?L0 ex:netCents ?N0 .
#     ?L0 ex:vatCents ?V0 .
#     ?L0 ex:grossCents ?G0 .
#     ?Order ex:line ?L1 .
#     ?L1 ex:lineIndex 1 .
#     ?L1 ex:netCents ?N1 .
#     ?L1 ex:vatCents ?V1 .
#     ?L1 ex:grossCents ?G1 .
#     (?N0 ?N1) math:sum ?Net .
#     (?V0 ?V1) math:sum ?Vat .
#     (?G0 ?G1) math:sum ?Gross .
#   } => {
#     ?Order ex:computedNetCents ?Net .
#     ?Order ex:computedVatCents ?Vat .
#     ?Order ex:computedGrossCents ?Gross .
#   } .
# with substitution (on rule variables):
#   ?G0 = 1998
#   ?G1 = 1500
#   ?Gross = 3498
#   ?L0 = <urn:example:order:A300#line:0>
#   ?L1 = <urn:example:order:A300#line:1>
#   ?N0 = 1998
#   ?N1 = 1500
#   ?Net = 3498
#   ?Order = <urn:example:order:A300>
#   ?V0 = 0
#   ?V1 = 0
#   ?Vat = 0
# Therefore the derived triple above is entailed by the rules and facts.
# ----------------------------------------------------------------------

<urn:example:order:A300> ex:computedVatCents 0 .

# ----------------------------------------------------------------------
# Proof for derived triple:
#   <urn:example:order:A300> ex:computedGrossCents 3498 .
# It holds because the following instance of the rule body is provable:
#   <urn:example:order:A300> a ex:Order .
#   <urn:example:order:A300> ex:line <urn:example:order:A300#line:0> .
#   <urn:example:order:A300#line:0> ex:lineIndex 0 .
#   <urn:example:order:A300#line:0> ex:netCents 1998 .
#   <urn:example:order:A300#line:0> ex:vatCents 0 .
#   <urn:example:order:A300#line:0> ex:grossCents 1998 .
#   <urn:example:order:A300> ex:line <urn:example:order:A300#line:1> .
#   <urn:example:order:A300#line:1> ex:lineIndex 1 .
#   <urn:example:order:A300#line:1> ex:netCents 1500 .
#   <urn:example:order:A300#line:1> ex:vatCents 0 .
#   <urn:example:order:A300#line:1> ex:grossCents 1500 .
#   (1998 1500) math:sum 3498 .
#   (0 0) math:sum 0 .
#   (1998 1500) math:sum 3498 .
# via the schematic forward rule:
#   {
#     ?Order a ex:Order .
#     ?Order ex:line ?L0 .
#     ?L0 ex:lineIndex 0 .
#     ?L0 ex:netCents ?N0 .
#     ?L0 ex:vatCents ?V0 .
#     ?L0 ex:grossCents ?G0 .
#     ?Order ex:line ?L1 .
#     ?L1 ex:lineIndex 1 .
#     ?L1 ex:netCents ?N1 .
#     ?L1 ex:vatCents ?V1 .
#     ?L1 ex:grossCents ?G1 .
#     (?N0 ?N1) math:sum ?Net .
#     (?V0 ?V1) math:sum ?Vat .
#     (?G0 ?G1) math:sum ?Gross .
#   } => {
#     ?Order ex:computedNetCents ?Net .
#     ?Order ex:computedVatCents ?Vat .
#     ?Order ex:computedGrossCents ?Gross .
#   } .
# with substitution (on rule variables):
#   ?G0 = 1998
#   ?G1 = 1500
#   ?Gross = 3498
#   ?L0 = <urn:example:order:A300#line:0>
#   ?L1 = <urn:example:order:A300#line:1>
#   ?N0 = 1998
#   ?N1 = 1500
#   ?Net = 3498
#   ?Order = <urn:example:order:A300>
#   ?V0 = 0
#   ?V1 = 0
#   ?Vat = 0
# Therefore the derived triple above is entailed by the rules and facts.
# ----------------------------------------------------------------------

<urn:example:order:A300> ex:computedGrossCents 3498 .

# ----------------------------------------------------------------------
# Proof for derived triple:
#   <urn:example:order:A301> ex:computedNetCents 3498 .
# It holds because the following instance of the rule body is provable:
#   <urn:example:order:A301> a ex:Order .
#   <urn:example:order:A301> ex:line <urn:example:order:A301#line:0> .
#   <urn:example:order:A301#line:0> ex:lineIndex 0 .
#   <urn:example:order:A301#line:0> ex:netCents 1998 .
#   <urn:example:order:A301#line:0> ex:vatCents 0 .
#   <urn:example:order:A301#line:0> ex:grossCents 1998 .
#   <urn:example:order:A301> ex:line <urn:example:order:A301#line:1> .
#   <urn:example:order:A301#line:1> ex:lineIndex 1 .
#   <urn:example:order:A301#line:1> ex:netCents 1500 .
#   <urn:example:order:A301#line:1> ex:vatCents 0 .
#   <urn:example:order:A301#line:1> ex:grossCents 1500 .
#   (1998 1500) math:sum 3498 .
#   (0 0) math:sum 0 .
#   (1998 1500) math:sum 3498 .
# via the schematic forward rule:
#   {
#     ?Order a ex:Order .
#     ?Order ex:line ?L0 .
#     ?L0 ex:lineIndex 0 .
#     ?L0 ex:netCents ?N0 .
#     ?L0 ex:vatCents ?V0 .
#     ?L0 ex:grossCents ?G0 .
#     ?Order ex:line ?L1 .
#     ?L1 ex:lineIndex 1 .
#     ?L1 ex:netCents ?N1 .
#     ?L1 ex:vatCents ?V1 .
#     ?L1 ex:grossCents ?G1 .
#     (?N0 ?N1) math:sum ?Net .
#     (?V0 ?V1) math:sum ?Vat .
#     (?G0 ?G1) math:sum ?Gross .
#   } => {
#     ?Order ex:computedNetCents ?Net .
#     ?Order ex:computedVatCents ?Vat .
#     ?Order ex:computedGrossCents ?Gross .
#   } .
# with substitution (on rule variables):
#   ?G0 = 1998
#   ?G1 = 1500
#   ?Gross = 3498
#   ?L0 = <urn:example:order:A301#line:0>
#   ?L1 = <urn:example:order:A301#line:1>
#   ?N0 = 1998
#   ?N1 = 1500
#   ?Net = 3498
#   ?Order = <urn:example:order:A301>
#   ?V0 = 0
#   ?V1 = 0
#   ?Vat = 0
# Therefore the derived triple above is entailed by the rules and facts.
# ----------------------------------------------------------------------

<urn:example:order:A301> ex:computedNetCents 3498 .

# ----------------------------------------------------------------------
# Proof for derived triple:
#   <urn:example:order:A301> ex:computedVatCents 0 .
# It holds because the following instance of the rule body is provable:
#   <urn:example:order:A301> a ex:Order .
#   <urn:example:order:A301> ex:line <urn:example:order:A301#line:0> .
#   <urn:example:order:A301#line:0> ex:lineIndex 0 .
#   <urn:example:order:A301#line:0> ex:netCents 1998 .
#   <urn:example:order:A301#line:0> ex:vatCents 0 .
#   <urn:example:order:A301#line:0> ex:grossCents 1998 .
#   <urn:example:order:A301> ex:line <urn:example:order:A301#line:1> .
#   <urn:example:order:A301#line:1> ex:lineIndex 1 .
#   <urn:example:order:A301#line:1> ex:netCents 1500 .
#   <urn:example:order:A301#line:1> ex:vatCents 0 .
#   <urn:example:order:A301#line:1> ex:grossCents 1500 .
#   (1998 1500) math:sum 3498 .
#   (0 0) math:sum 0 .
#   (1998 1500) math:sum 3498 .
# via the schematic forward rule:
#   {
#     ?Order a ex:Order .
#     ?Order ex:line ?L0 .
#     ?L0 ex:lineIndex 0 .
#     ?L0 ex:netCents ?N0 .
#     ?L0 ex:vatCents ?V0 .
#     ?L0 ex:grossCents ?G0 .
#     ?Order ex:line ?L1 .
#     ?L1 ex:lineIndex 1 .
#     ?L1 ex:netCents ?N1 .
#     ?L1 ex:vatCents ?V1 .
#     ?L1 ex:grossCents ?G1 .
#     (?N0 ?N1) math:sum ?Net .
#     (?V0 ?V1) math:sum ?Vat .
#     (?G0 ?G1) math:sum ?Gross .
#   } => {
#     ?Order ex:computedNetCents ?Net .
#     ?Order ex:computedVatCents ?Vat .
#     ?Order ex:computedGrossCents ?Gross .
#   } .
# with substitution (on rule variables):
#   ?G0 = 1998
#   ?G1 = 1500
#   ?Gross = 3498
#   ?L0 = <urn:example:order:A301#line:0>
#   ?L1 = <urn:example:order:A301#line:1>
#   ?N0 = 1998
#   ?N1 = 1500
#   ?Net = 3498
#   ?Order = <urn:example:order:A301>
#   ?V0 = 0
#   ?V1 = 0
#   ?Vat = 0
# Therefore the derived triple above is entailed by the rules and facts.
# ----------------------------------------------------------------------

<urn:example:order:A301> ex:computedVatCents 0 .

# ----------------------------------------------------------------------
# Proof for derived triple:
#   <urn:example:order:A301> ex:computedGrossCents 3498 .
# It holds because the following instance of the rule body is provable:
#   <urn:example:order:A301> a ex:Order .
#   <urn:example:order:A301> ex:line <urn:example:order:A301#line:0> .
#   <urn:example:order:A301#line:0> ex:lineIndex 0 .
#   <urn:example:order:A301#line:0> ex:netCents 1998 .
#   <urn:example:order:A301#line:0> ex:vatCents 0 .
#   <urn:example:order:A301#line:0> ex:grossCents 1998 .
#   <urn:example:order:A301> ex:line <urn:example:order:A301#line:1> .
#   <urn:example:order:A301#line:1> ex:lineIndex 1 .
#   <urn:example:order:A301#line:1> ex:netCents 1500 .
#   <urn:example:order:A301#line:1> ex:vatCents 0 .
#   <urn:example:order:A301#line:1> ex:grossCents 1500 .
#   (1998 1500) math:sum 3498 .
#   (0 0) math:sum 0 .
#   (1998 1500) math:sum 3498 .
# via the schematic forward rule:
#   {
#     ?Order a ex:Order .
#     ?Order ex:line ?L0 .
#     ?L0 ex:lineIndex 0 .
#     ?L0 ex:netCents ?N0 .
#     ?L0 ex:vatCents ?V0 .
#     ?L0 ex:grossCents ?G0 .
#     ?Order ex:line ?L1 .
#     ?L1 ex:lineIndex 1 .
#     ?L1 ex:netCents ?N1 .
#     ?L1 ex:vatCents ?V1 .
#     ?L1 ex:grossCents ?G1 .
#     (?N0 ?N1) math:sum ?Net .
#     (?V0 ?V1) math:sum ?Vat .
#     (?G0 ?G1) math:sum ?Gross .
#   } => {
#     ?Order ex:computedNetCents ?Net .
#     ?Order ex:computedVatCents ?Vat .
#     ?Order ex:computedGrossCents ?Gross .
#   } .
# with substitution (on rule variables):
#   ?G0 = 1998
#   ?G1 = 1500
#   ?Gross = 3498
#   ?L0 = <urn:example:order:A301#line:0>
#   ?L1 = <urn:example:order:A301#line:1>
#   ?N0 = 1998
#   ?N1 = 1500
#   ?Net = 3498
#   ?Order = <urn:example:order:A301>
#   ?V0 = 0
#   ?V1 = 0
#   ?Vat = 0
# Therefore the derived triple above is entailed by the rules and facts.
# ----------------------------------------------------------------------

<urn:example:order:A301> ex:computedGrossCents 3498 .

# ----------------------------------------------------------------------
# Proof for derived triple:
#   <urn:example:order:A400> ex:computedNetCents 3498 .
# It holds because the following instance of the rule body is provable:
#   <urn:example:order:A400> a ex:Order .
#   <urn:example:order:A400> ex:line <urn:example:order:A400#line:0> .
#   <urn:example:order:A400#line:0> ex:lineIndex 0 .
#   <urn:example:order:A400#line:0> ex:netCents 1998 .
#   <urn:example:order:A400#line:0> ex:vatCents 419 .
#   <urn:example:order:A400#line:0> ex:grossCents 2417 .
#   <urn:example:order:A400> ex:line <urn:example:order:A400#line:1> .
#   <urn:example:order:A400#line:1> ex:lineIndex 1 .
#   <urn:example:order:A400#line:1> ex:netCents 1500 .
#   <urn:example:order:A400#line:1> ex:vatCents 90 .
#   <urn:example:order:A400#line:1> ex:grossCents 1590 .
#   (1998 1500) math:sum 3498 .
#   (419 90) math:sum 509 .
#   (2417 1590) math:sum 4007 .
# via the schematic forward rule:
#   {
#     ?Order a ex:Order .
#     ?Order ex:line ?L0 .
#     ?L0 ex:lineIndex 0 .
#     ?L0 ex:netCents ?N0 .
#     ?L0 ex:vatCents ?V0 .
#     ?L0 ex:grossCents ?G0 .
#     ?Order ex:line ?L1 .
#     ?L1 ex:lineIndex 1 .
#     ?L1 ex:netCents ?N1 .
#     ?L1 ex:vatCents ?V1 .
#     ?L1 ex:grossCents ?G1 .
#     (?N0 ?N1) math:sum ?Net .
#     (?V0 ?V1) math:sum ?Vat .
#     (?G0 ?G1) math:sum ?Gross .
#   } => {
#     ?Order ex:computedNetCents ?Net .
#     ?Order ex:computedVatCents ?Vat .
#     ?Order ex:computedGrossCents ?Gross .
#   } .
# with substitution (on rule variables):
#   ?G0 = 2417
#   ?G1 = 1590
#   ?Gross = 4007
#   ?L0 = <urn:example:order:A400#line:0>
#   ?L1 = <urn:example:order:A400#line:1>
#   ?N0 = 1998
#   ?N1 = 1500
#   ?Net = 3498
#   ?Order = <urn:example:order:A400>
#   ?V0 = 419
#   ?V1 = 90
#   ?Vat = 509
# Therefore the derived triple above is entailed by the rules and facts.
# ----------------------------------------------------------------------

<urn:example:order:A400> ex:computedNetCents 3498 .

# ----------------------------------------------------------------------
# Proof for derived triple:
#   <urn:example:order:A400> ex:computedVatCents 509 .
# It holds because the following instance of the rule body is provable:
#   <urn:example:order:A400> a ex:Order .
#   <urn:example:order:A400> ex:line <urn:example:order:A400#line:0> .
#   <urn:example:order:A400#line:0> ex:lineIndex 0 .
#   <urn:example:order:A400#line:0> ex:netCents 1998 .
#   <urn:example:order:A400#line:0> ex:vatCents 419 .
#   <urn:example:order:A400#line:0> ex:grossCents 2417 .
#   <urn:example:order:A400> ex:line <urn:example:order:A400#line:1> .
#   <urn:example:order:A400#line:1> ex:lineIndex 1 .
#   <urn:example:order:A400#line:1> ex:netCents 1500 .
#   <urn:example:order:A400#line:1> ex:vatCents 90 .
#   <urn:example:order:A400#line:1> ex:grossCents 1590 .
#   (1998 1500) math:sum 3498 .
#   (419 90) math:sum 509 .
#   (2417 1590) math:sum 4007 .
# via the schematic forward rule:
#   {
#     ?Order a ex:Order .
#     ?Order ex:line ?L0 .
#     ?L0 ex:lineIndex 0 .
#     ?L0 ex:netCents ?N0 .
#     ?L0 ex:vatCents ?V0 .
#     ?L0 ex:grossCents ?G0 .
#     ?Order ex:line ?L1 .
#     ?L1 ex:lineIndex 1 .
#     ?L1 ex:netCents ?N1 .
#     ?L1 ex:vatCents ?V1 .
#     ?L1 ex:grossCents ?G1 .
#     (?N0 ?N1) math:sum ?Net .
#     (?V0 ?V1) math:sum ?Vat .
#     (?G0 ?G1) math:sum ?Gross .
#   } => {
#     ?Order ex:computedNetCents ?Net .
#     ?Order ex:computedVatCents ?Vat .
#     ?Order ex:computedGrossCents ?Gross .
#   } .
# with substitution (on rule variables):
#   ?G0 = 2417
#   ?G1 = 1590
#   ?Gross = 4007
#   ?L0 = <urn:example:order:A400#line:0>
#   ?L1 = <urn:example:order:A400#line:1>
#   ?N0 = 1998
#   ?N1 = 1500
#   ?Net = 3498
#   ?Order = <urn:example:order:A400>
#   ?V0 = 419
#   ?V1 = 90
#   ?Vat = 509
# Therefore the derived triple above is entailed by the rules and facts.
# ----------------------------------------------------------------------

<urn:example:order:A400> ex:computedVatCents 509 .

# ----------------------------------------------------------------------
# Proof for derived triple:
#   <urn:example:order:A400> ex:computedGrossCents 4007 .
# It holds because the following instance of the rule body is provable:
#   <urn:example:order:A400> a ex:Order .
#   <urn:example:order:A400> ex:line <urn:example:order:A400#line:0> .
#   <urn:example:order:A400#line:0> ex:lineIndex 0 .
#   <urn:example:order:A400#line:0> ex:netCents 1998 .
#   <urn:example:order:A400#line:0> ex:vatCents 419 .
#   <urn:example:order:A400#line:0> ex:grossCents 2417 .
#   <urn:example:order:A400> ex:line <urn:example:order:A400#line:1> .
#   <urn:example:order:A400#line:1> ex:lineIndex 1 .
#   <urn:example:order:A400#line:1> ex:netCents 1500 .
#   <urn:example:order:A400#line:1> ex:vatCents 90 .
#   <urn:example:order:A400#line:1> ex:grossCents 1590 .
#   (1998 1500) math:sum 3498 .
#   (419 90) math:sum 509 .
#   (2417 1590) math:sum 4007 .
# via the schematic forward rule:
#   {
#     ?Order a ex:Order .
#     ?Order ex:line ?L0 .
#     ?L0 ex:lineIndex 0 .
#     ?L0 ex:netCents ?N0 .
#     ?L0 ex:vatCents ?V0 .
#     ?L0 ex:grossCents ?G0 .
#     ?Order ex:line ?L1 .
#     ?L1 ex:lineIndex 1 .
#     ?L1 ex:netCents ?N1 .
#     ?L1 ex:vatCents ?V1 .
#     ?L1 ex:grossCents ?G1 .
#     (?N0 ?N1) math:sum ?Net .
#     (?V0 ?V1) math:sum ?Vat .
#     (?G0 ?G1) math:sum ?Gross .
#   } => {
#     ?Order ex:computedNetCents ?Net .
#     ?Order ex:computedVatCents ?Vat .
#     ?Order ex:computedGrossCents ?Gross .
#   } .
# with substitution (on rule variables):
#   ?G0 = 2417
#   ?G1 = 1590
#   ?Gross = 4007
#   ?L0 = <urn:example:order:A400#line:0>
#   ?L1 = <urn:example:order:A400#line:1>
#   ?N0 = 1998
#   ?N1 = 1500
#   ?Net = 3498
#   ?Order = <urn:example:order:A400>
#   ?V0 = 419
#   ?V1 = 90
#   ?Vat = 509
# Therefore the derived triple above is entailed by the rules and facts.
# ----------------------------------------------------------------------

<urn:example:order:A400> ex:computedGrossCents 4007 .

# ----------------------------------------------------------------------
# Proof for derived triple:
#   <urn:example:order:A100> a ex:OrderOk .
# It holds because the following instance of the rule body is provable:
#   <urn:example:order:A100> a ex:Order .
#   <urn:example:order:A100> ex:declaredNetCents 3498 .
#   <urn:example:order:A100> ex:declaredVatCents 509 .
#   <urn:example:order:A100> ex:declaredGrossCents 4007 .
#   <urn:example:order:A100> ex:computedNetCents 3498 .
#   <urn:example:order:A100> ex:computedVatCents 509 .
#   <urn:example:order:A100> ex:computedGrossCents 4007 .
#   3498 math:equalTo 3498 .
#   509 math:equalTo 509 .
#   4007 math:equalTo 4007 .
# via the schematic forward rule:
#   {
#     ?Order a ex:Order .
#     ?Order ex:declaredNetCents ?DN .
#     ?Order ex:declaredVatCents ?DV .
#     ?Order ex:declaredGrossCents ?DG .
#     ?Order ex:computedNetCents ?CN .
#     ?Order ex:computedVatCents ?CV .
#     ?Order ex:computedGrossCents ?CG .
#     ?DN math:equalTo ?CN .
#     ?DV math:equalTo ?CV .
#     ?DG math:equalTo ?CG .
#   } => {
#     ?Order a ex:OrderOk .
#   } .
# with substitution (on rule variables):
#   ?CG = 4007
#   ?CN = 3498
#   ?CV = 509
#   ?DG = 4007
#   ?DN = 3498
#   ?DV = 509
#   ?Order = <urn:example:order:A100>
# Therefore the derived triple above is entailed by the rules and facts.
# ----------------------------------------------------------------------

<urn:example:order:A100> a ex:OrderOk .

# ----------------------------------------------------------------------
# Proof for derived triple:
#   <urn:example:order:A200> a ex:OrderOk .
# It holds because the following instance of the rule body is provable:
#   <urn:example:order:A200> a ex:Order .
#   <urn:example:order:A200> ex:declaredNetCents 3498 .
#   <urn:example:order:A200> ex:declaredVatCents 0 .
#   <urn:example:order:A200> ex:declaredGrossCents 3498 .
#   <urn:example:order:A200> ex:computedNetCents 3498 .
#   <urn:example:order:A200> ex:computedVatCents 0 .
#   <urn:example:order:A200> ex:computedGrossCents 3498 .
#   3498 math:equalTo 3498 .
#   0 math:equalTo 0 .
#   3498 math:equalTo 3498 .
# via the schematic forward rule:
#   {
#     ?Order a ex:Order .
#     ?Order ex:declaredNetCents ?DN .
#     ?Order ex:declaredVatCents ?DV .
#     ?Order ex:declaredGrossCents ?DG .
#     ?Order ex:computedNetCents ?CN .
#     ?Order ex:computedVatCents ?CV .
#     ?Order ex:computedGrossCents ?CG .
#     ?DN math:equalTo ?CN .
#     ?DV math:equalTo ?CV .
#     ?DG math:equalTo ?CG .
#   } => {
#     ?Order a ex:OrderOk .
#   } .
# with substitution (on rule variables):
#   ?CG = 3498
#   ?CN = 3498
#   ?CV = 0
#   ?DG = 3498
#   ?DN = 3498
#   ?DV = 0
#   ?Order = <urn:example:order:A200>
# Therefore the derived triple above is entailed by the rules and facts.
# ----------------------------------------------------------------------

<urn:example:order:A200> a ex:OrderOk .

# ----------------------------------------------------------------------
# Proof for derived triple:
#   <urn:example:order:A300> a ex:OrderOk .
# It holds because the following instance of the rule body is provable:
#   <urn:example:order:A300> a ex:Order .
#   <urn:example:order:A300> ex:declaredNetCents 3498 .
#   <urn:example:order:A300> ex:declaredVatCents 0 .
#   <urn:example:order:A300> ex:declaredGrossCents 3498 .
#   <urn:example:order:A300> ex:computedNetCents 3498 .
#   <urn:example:order:A300> ex:computedVatCents 0 .
#   <urn:example:order:A300> ex:computedGrossCents 3498 .
#   3498 math:equalTo 3498 .
#   0 math:equalTo 0 .
#   3498 math:equalTo 3498 .
# via the schematic forward rule:
#   {
#     ?Order a ex:Order .
#     ?Order ex:declaredNetCents ?DN .
#     ?Order ex:declaredVatCents ?DV .
#     ?Order ex:declaredGrossCents ?DG .
#     ?Order ex:computedNetCents ?CN .
#     ?Order ex:computedVatCents ?CV .
#     ?Order ex:computedGrossCents ?CG .
#     ?DN math:equalTo ?CN .
#     ?DV math:equalTo ?CV .
#     ?DG math:equalTo ?CG .
#   } => {
#     ?Order a ex:OrderOk .
#   } .
# with substitution (on rule variables):
#   ?CG = 3498
#   ?CN = 3498
#   ?CV = 0
#   ?DG = 3498
#   ?DN = 3498
#   ?DV = 0
#   ?Order = <urn:example:order:A300>
# Therefore the derived triple above is entailed by the rules and facts.
# ----------------------------------------------------------------------

<urn:example:order:A300> a ex:OrderOk .

# ----------------------------------------------------------------------
# Proof for derived triple:
#   <urn:example:order:A301> a ex:OrderOk .
# It holds because the following instance of the rule body is provable:
#   <urn:example:order:A301> a ex:Order .
#   <urn:example:order:A301> ex:declaredNetCents 3498 .
#   <urn:example:order:A301> ex:declaredVatCents 0 .
#   <urn:example:order:A301> ex:declaredGrossCents 3498 .
#   <urn:example:order:A301> ex:computedNetCents 3498 .
#   <urn:example:order:A301> ex:computedVatCents 0 .
#   <urn:example:order:A301> ex:computedGrossCents 3498 .
#   3498 math:equalTo 3498 .
#   0 math:equalTo 0 .
#   3498 math:equalTo 3498 .
# via the schematic forward rule:
#   {
#     ?Order a ex:Order .
#     ?Order ex:declaredNetCents ?DN .
#     ?Order ex:declaredVatCents ?DV .
#     ?Order ex:declaredGrossCents ?DG .
#     ?Order ex:computedNetCents ?CN .
#     ?Order ex:computedVatCents ?CV .
#     ?Order ex:computedGrossCents ?CG .
#     ?DN math:equalTo ?CN .
#     ?DV math:equalTo ?CV .
#     ?DG math:equalTo ?CG .
#   } => {
#     ?Order a ex:OrderOk .
#   } .
# with substitution (on rule variables):
#   ?CG = 3498
#   ?CN = 3498
#   ?CV = 0
#   ?DG = 3498
#   ?DN = 3498
#   ?DV = 0
#   ?Order = <urn:example:order:A301>
# Therefore the derived triple above is entailed by the rules and facts.
# ----------------------------------------------------------------------

<urn:example:order:A301> a ex:OrderOk .

# ----------------------------------------------------------------------
# Proof for derived triple:
#   <urn:example:issue:A400:vat> a ex:Issue .
# It holds because the following instance of the rule body is provable:
#   <urn:example:order:A400> a ex:Order .
#   <urn:example:order:A400> ex:orderId "A400" .
#   <urn:example:order:A400> ex:declaredVatCents 508 .
#   <urn:example:order:A400> ex:computedVatCents 509 .
#   ("urn:example:issue:%s:vat" "A400") string:format "urn:example:issue:A400:vat" .
#   <urn:example:issue:A400:vat> log:uri "urn:example:issue:A400:vat" .
#   508 math:notEqualTo 509 .
# via the schematic forward rule:
#   {
#     ?Order a ex:Order .
#     ?Order ex:orderId ?Oid .
#     ?Order ex:declaredVatCents ?DV .
#     ?Order ex:computedVatCents ?CV .
#     ("urn:example:issue:%s:vat" ?Oid) string:format ?IssueUriStr .
#     ?Issue log:uri ?IssueUriStr .
#     ?DV math:notEqualTo ?CV .
#   } => {
#     ?Issue a ex:Issue .
#     ?Issue ex:onOrder ?Order .
#     ?Issue ex:field "vatCents" .
#     ?Issue ex:declared ?DV .
#     ?Issue ex:computed ?CV .
#     ?Order ex:hasIssue ?Issue .
#   } .
# with substitution (on rule variables):
#   ?CV = 509
#   ?DV = 508
#   ?Issue = <urn:example:issue:A400:vat>
#   ?IssueUriStr = "urn:example:issue:A400:vat"
#   ?Oid = "A400"
#   ?Order = <urn:example:order:A400>
# Therefore the derived triple above is entailed by the rules and facts.
# ----------------------------------------------------------------------

<urn:example:issue:A400:vat> a ex:Issue .

# ----------------------------------------------------------------------
# Proof for derived triple:
#   <urn:example:issue:A400:vat> ex:onOrder <urn:example:order:A400> .
# It holds because the following instance of the rule body is provable:
#   <urn:example:order:A400> a ex:Order .
#   <urn:example:order:A400> ex:orderId "A400" .
#   <urn:example:order:A400> ex:declaredVatCents 508 .
#   <urn:example:order:A400> ex:computedVatCents 509 .
#   ("urn:example:issue:%s:vat" "A400") string:format "urn:example:issue:A400:vat" .
#   <urn:example:issue:A400:vat> log:uri "urn:example:issue:A400:vat" .
#   508 math:notEqualTo 509 .
# via the schematic forward rule:
#   {
#     ?Order a ex:Order .
#     ?Order ex:orderId ?Oid .
#     ?Order ex:declaredVatCents ?DV .
#     ?Order ex:computedVatCents ?CV .
#     ("urn:example:issue:%s:vat" ?Oid) string:format ?IssueUriStr .
#     ?Issue log:uri ?IssueUriStr .
#     ?DV math:notEqualTo ?CV .
#   } => {
#     ?Issue a ex:Issue .
#     ?Issue ex:onOrder ?Order .
#     ?Issue ex:field "vatCents" .
#     ?Issue ex:declared ?DV .
#     ?Issue ex:computed ?CV .
#     ?Order ex:hasIssue ?Issue .
#   } .
# with substitution (on rule variables):
#   ?CV = 509
#   ?DV = 508
#   ?Issue = <urn:example:issue:A400:vat>
#   ?IssueUriStr = "urn:example:issue:A400:vat"
#   ?Oid = "A400"
#   ?Order = <urn:example:order:A400>
# Therefore the derived triple above is entailed by the rules and facts.
# ----------------------------------------------------------------------

<urn:example:issue:A400:vat> ex:onOrder <urn:example:order:A400> .

# ----------------------------------------------------------------------
# Proof for derived triple:
#   <urn:example:issue:A400:vat> ex:field "vatCents" .
# It holds because the following instance of the rule body is provable:
#   <urn:example:order:A400> a ex:Order .
#   <urn:example:order:A400> ex:orderId "A400" .
#   <urn:example:order:A400> ex:declaredVatCents 508 .
#   <urn:example:order:A400> ex:computedVatCents 509 .
#   ("urn:example:issue:%s:vat" "A400") string:format "urn:example:issue:A400:vat" .
#   <urn:example:issue:A400:vat> log:uri "urn:example:issue:A400:vat" .
#   508 math:notEqualTo 509 .
# via the schematic forward rule:
#   {
#     ?Order a ex:Order .
#     ?Order ex:orderId ?Oid .
#     ?Order ex:declaredVatCents ?DV .
#     ?Order ex:computedVatCents ?CV .
#     ("urn:example:issue:%s:vat" ?Oid) string:format ?IssueUriStr .
#     ?Issue log:uri ?IssueUriStr .
#     ?DV math:notEqualTo ?CV .
#   } => {
#     ?Issue a ex:Issue .
#     ?Issue ex:onOrder ?Order .
#     ?Issue ex:field "vatCents" .
#     ?Issue ex:declared ?DV .
#     ?Issue ex:computed ?CV .
#     ?Order ex:hasIssue ?Issue .
#   } .
# with substitution (on rule variables):
#   ?CV = 509
#   ?DV = 508
#   ?Issue = <urn:example:issue:A400:vat>
#   ?IssueUriStr = "urn:example:issue:A400:vat"
#   ?Oid = "A400"
#   ?Order = <urn:example:order:A400>
# Therefore the derived triple above is entailed by the rules and facts.
# ----------------------------------------------------------------------

<urn:example:issue:A400:vat> ex:field "vatCents" .

# ----------------------------------------------------------------------
# Proof for derived triple:
#   <urn:example:issue:A400:vat> ex:declared 508 .
# It holds because the following instance of the rule body is provable:
#   <urn:example:order:A400> a ex:Order .
#   <urn:example:order:A400> ex:orderId "A400" .
#   <urn:example:order:A400> ex:declaredVatCents 508 .
#   <urn:example:order:A400> ex:computedVatCents 509 .
#   ("urn:example:issue:%s:vat" "A400") string:format "urn:example:issue:A400:vat" .
#   <urn:example:issue:A400:vat> log:uri "urn:example:issue:A400:vat" .
#   508 math:notEqualTo 509 .
# via the schematic forward rule:
#   {
#     ?Order a ex:Order .
#     ?Order ex:orderId ?Oid .
#     ?Order ex:declaredVatCents ?DV .
#     ?Order ex:computedVatCents ?CV .
#     ("urn:example:issue:%s:vat" ?Oid) string:format ?IssueUriStr .
#     ?Issue log:uri ?IssueUriStr .
#     ?DV math:notEqualTo ?CV .
#   } => {
#     ?Issue a ex:Issue .
#     ?Issue ex:onOrder ?Order .
#     ?Issue ex:field "vatCents" .
#     ?Issue ex:declared ?DV .
#     ?Issue ex:computed ?CV .
#     ?Order ex:hasIssue ?Issue .
#   } .
# with substitution (on rule variables):
#   ?CV = 509
#   ?DV = 508
#   ?Issue = <urn:example:issue:A400:vat>
#   ?IssueUriStr = "urn:example:issue:A400:vat"
#   ?Oid = "A400"
#   ?Order = <urn:example:order:A400>
# Therefore the derived triple above is entailed by the rules and facts.
# ----------------------------------------------------------------------

<urn:example:issue:A400:vat> ex:declared 508 .

# ----------------------------------------------------------------------
# Proof for derived triple:
#   <urn:example:issue:A400:vat> ex:computed 509 .
# It holds because the following instance of the rule body is provable:
#   <urn:example:order:A400> a ex:Order .
#   <urn:example:order:A400> ex:orderId "A400" .
#   <urn:example:order:A400> ex:declaredVatCents 508 .
#   <urn:example:order:A400> ex:computedVatCents 509 .
#   ("urn:example:issue:%s:vat" "A400") string:format "urn:example:issue:A400:vat" .
#   <urn:example:issue:A400:vat> log:uri "urn:example:issue:A400:vat" .
#   508 math:notEqualTo 509 .
# via the schematic forward rule:
#   {
#     ?Order a ex:Order .
#     ?Order ex:orderId ?Oid .
#     ?Order ex:declaredVatCents ?DV .
#     ?Order ex:computedVatCents ?CV .
#     ("urn:example:issue:%s:vat" ?Oid) string:format ?IssueUriStr .
#     ?Issue log:uri ?IssueUriStr .
#     ?DV math:notEqualTo ?CV .
#   } => {
#     ?Issue a ex:Issue .
#     ?Issue ex:onOrder ?Order .
#     ?Issue ex:field "vatCents" .
#     ?Issue ex:declared ?DV .
#     ?Issue ex:computed ?CV .
#     ?Order ex:hasIssue ?Issue .
#   } .
# with substitution (on rule variables):
#   ?CV = 509
#   ?DV = 508
#   ?Issue = <urn:example:issue:A400:vat>
#   ?IssueUriStr = "urn:example:issue:A400:vat"
#   ?Oid = "A400"
#   ?Order = <urn:example:order:A400>
# Therefore the derived triple above is entailed by the rules and facts.
# ----------------------------------------------------------------------

<urn:example:issue:A400:vat> ex:computed 509 .

# ----------------------------------------------------------------------
# Proof for derived triple:
#   <urn:example:order:A400> ex:hasIssue <urn:example:issue:A400:vat> .
# It holds because the following instance of the rule body is provable:
#   <urn:example:order:A400> a ex:Order .
#   <urn:example:order:A400> ex:orderId "A400" .
#   <urn:example:order:A400> ex:declaredVatCents 508 .
#   <urn:example:order:A400> ex:computedVatCents 509 .
#   ("urn:example:issue:%s:vat" "A400") string:format "urn:example:issue:A400:vat" .
#   <urn:example:issue:A400:vat> log:uri "urn:example:issue:A400:vat" .
#   508 math:notEqualTo 509 .
# via the schematic forward rule:
#   {
#     ?Order a ex:Order .
#     ?Order ex:orderId ?Oid .
#     ?Order ex:declaredVatCents ?DV .
#     ?Order ex:computedVatCents ?CV .
#     ("urn:example:issue:%s:vat" ?Oid) string:format ?IssueUriStr .
#     ?Issue log:uri ?IssueUriStr .
#     ?DV math:notEqualTo ?CV .
#   } => {
#     ?Issue a ex:Issue .
#     ?Issue ex:onOrder ?Order .
#     ?Issue ex:field "vatCents" .
#     ?Issue ex:declared ?DV .
#     ?Issue ex:computed ?CV .
#     ?Order ex:hasIssue ?Issue .
#   } .
# with substitution (on rule variables):
#   ?CV = 509
#   ?DV = 508
#   ?Issue = <urn:example:issue:A400:vat>
#   ?IssueUriStr = "urn:example:issue:A400:vat"
#   ?Oid = "A400"
#   ?Order = <urn:example:order:A400>
# Therefore the derived triple above is entailed by the rules and facts.
# ----------------------------------------------------------------------

<urn:example:order:A400> ex:hasIssue <urn:example:issue:A400:vat> .

# ----------------------------------------------------------------------
# Proof for derived triple:
#   <urn:example:issue:A400:gross> a ex:Issue .
# It holds because the following instance of the rule body is provable:
#   <urn:example:order:A400> a ex:Order .
#   <urn:example:order:A400> ex:orderId "A400" .
#   <urn:example:order:A400> ex:declaredGrossCents 4006 .
#   <urn:example:order:A400> ex:computedGrossCents 4007 .
#   ("urn:example:issue:%s:gross" "A400") string:format "urn:example:issue:A400:gross" .
#   <urn:example:issue:A400:gross> log:uri "urn:example:issue:A400:gross" .
#   4006 math:notEqualTo 4007 .
# via the schematic forward rule:
#   {
#     ?Order a ex:Order .
#     ?Order ex:orderId ?Oid .
#     ?Order ex:declaredGrossCents ?DG .
#     ?Order ex:computedGrossCents ?CG .
#     ("urn:example:issue:%s:gross" ?Oid) string:format ?IssueUriStr .
#     ?Issue log:uri ?IssueUriStr .
#     ?DG math:notEqualTo ?CG .
#   } => {
#     ?Issue a ex:Issue .
#     ?Issue ex:onOrder ?Order .
#     ?Issue ex:field "grossCents" .
#     ?Issue ex:declared ?DG .
#     ?Issue ex:computed ?CG .
#     ?Order ex:hasIssue ?Issue .
#   } .
# with substitution (on rule variables):
#   ?CG = 4007
#   ?DG = 4006
#   ?Issue = <urn:example:issue:A400:gross>
#   ?IssueUriStr = "urn:example:issue:A400:gross"
#   ?Oid = "A400"
#   ?Order = <urn:example:order:A400>
# Therefore the derived triple above is entailed by the rules and facts.
# ----------------------------------------------------------------------

<urn:example:issue:A400:gross> a ex:Issue .

# ----------------------------------------------------------------------
# Proof for derived triple:
#   <urn:example:issue:A400:gross> ex:onOrder <urn:example:order:A400> .
# It holds because the following instance of the rule body is provable:
#   <urn:example:order:A400> a ex:Order .
#   <urn:example:order:A400> ex:orderId "A400" .
#   <urn:example:order:A400> ex:declaredGrossCents 4006 .
#   <urn:example:order:A400> ex:computedGrossCents 4007 .
#   ("urn:example:issue:%s:gross" "A400") string:format "urn:example:issue:A400:gross" .
#   <urn:example:issue:A400:gross> log:uri "urn:example:issue:A400:gross" .
#   4006 math:notEqualTo 4007 .
# via the schematic forward rule:
#   {
#     ?Order a ex:Order .
#     ?Order ex:orderId ?Oid .
#     ?Order ex:declaredGrossCents ?DG .
#     ?Order ex:computedGrossCents ?CG .
#     ("urn:example:issue:%s:gross" ?Oid) string:format ?IssueUriStr .
#     ?Issue log:uri ?IssueUriStr .
#     ?DG math:notEqualTo ?CG .
#   } => {
#     ?Issue a ex:Issue .
#     ?Issue ex:onOrder ?Order .
#     ?Issue ex:field "grossCents" .
#     ?Issue ex:declared ?DG .
#     ?Issue ex:computed ?CG .
#     ?Order ex:hasIssue ?Issue .
#   } .
# with substitution (on rule variables):
#   ?CG = 4007
#   ?DG = 4006
#   ?Issue = <urn:example:issue:A400:gross>
#   ?IssueUriStr = "urn:example:issue:A400:gross"
#   ?Oid = "A400"
#   ?Order = <urn:example:order:A400>
# Therefore the derived triple above is entailed by the rules and facts.
# ----------------------------------------------------------------------

<urn:example:issue:A400:gross> ex:onOrder <urn:example:order:A400> .

# ----------------------------------------------------------------------
# Proof for derived triple:
#   <urn:example:issue:A400:gross> ex:field "grossCents" .
# It holds because the following instance of the rule body is provable:
#   <urn:example:order:A400> a ex:Order .
#   <urn:example:order:A400> ex:orderId "A400" .
#   <urn:example:order:A400> ex:declaredGrossCents 4006 .
#   <urn:example:order:A400> ex:computedGrossCents 4007 .
#   ("urn:example:issue:%s:gross" "A400") string:format "urn:example:issue:A400:gross" .
#   <urn:example:issue:A400:gross> log:uri "urn:example:issue:A400:gross" .
#   4006 math:notEqualTo 4007 .
# via the schematic forward rule:
#   {
#     ?Order a ex:Order .
#     ?Order ex:orderId ?Oid .
#     ?Order ex:declaredGrossCents ?DG .
#     ?Order ex:computedGrossCents ?CG .
#     ("urn:example:issue:%s:gross" ?Oid) string:format ?IssueUriStr .
#     ?Issue log:uri ?IssueUriStr .
#     ?DG math:notEqualTo ?CG .
#   } => {
#     ?Issue a ex:Issue .
#     ?Issue ex:onOrder ?Order .
#     ?Issue ex:field "grossCents" .
#     ?Issue ex:declared ?DG .
#     ?Issue ex:computed ?CG .
#     ?Order ex:hasIssue ?Issue .
#   } .
# with substitution (on rule variables):
#   ?CG = 4007
#   ?DG = 4006
#   ?Issue = <urn:example:issue:A400:gross>
#   ?IssueUriStr = "urn:example:issue:A400:gross"
#   ?Oid = "A400"
#   ?Order = <urn:example:order:A400>
# Therefore the derived triple above is entailed by the rules and facts.
# ----------------------------------------------------------------------

<urn:example:issue:A400:gross> ex:field "grossCents" .

# ----------------------------------------------------------------------
# Proof for derived triple:
#   <urn:example:issue:A400:gross> ex:declared 4006 .
# It holds because the following instance of the rule body is provable:
#   <urn:example:order:A400> a ex:Order .
#   <urn:example:order:A400> ex:orderId "A400" .
#   <urn:example:order:A400> ex:declaredGrossCents 4006 .
#   <urn:example:order:A400> ex:computedGrossCents 4007 .
#   ("urn:example:issue:%s:gross" "A400") string:format "urn:example:issue:A400:gross" .
#   <urn:example:issue:A400:gross> log:uri "urn:example:issue:A400:gross" .
#   4006 math:notEqualTo 4007 .
# via the schematic forward rule:
#   {
#     ?Order a ex:Order .
#     ?Order ex:orderId ?Oid .
#     ?Order ex:declaredGrossCents ?DG .
#     ?Order ex:computedGrossCents ?CG .
#     ("urn:example:issue:%s:gross" ?Oid) string:format ?IssueUriStr .
#     ?Issue log:uri ?IssueUriStr .
#     ?DG math:notEqualTo ?CG .
#   } => {
#     ?Issue a ex:Issue .
#     ?Issue ex:onOrder ?Order .
#     ?Issue ex:field "grossCents" .
#     ?Issue ex:declared ?DG .
#     ?Issue ex:computed ?CG .
#     ?Order ex:hasIssue ?Issue .
#   } .
# with substitution (on rule variables):
#   ?CG = 4007
#   ?DG = 4006
#   ?Issue = <urn:example:issue:A400:gross>
#   ?IssueUriStr = "urn:example:issue:A400:gross"
#   ?Oid = "A400"
#   ?Order = <urn:example:order:A400>
# Therefore the derived triple above is entailed by the rules and facts.
# ----------------------------------------------------------------------

<urn:example:issue:A400:gross> ex:declared 4006 .

# ----------------------------------------------------------------------
# Proof for derived triple:
#   <urn:example:issue:A400:gross> ex:computed 4007 .
# It holds because the following instance of the rule body is provable:
#   <urn:example:order:A400> a ex:Order .
#   <urn:example:order:A400> ex:orderId "A400" .
#   <urn:example:order:A400> ex:declaredGrossCents 4006 .
#   <urn:example:order:A400> ex:computedGrossCents 4007 .
#   ("urn:example:issue:%s:gross" "A400") string:format "urn:example:issue:A400:gross" .
#   <urn:example:issue:A400:gross> log:uri "urn:example:issue:A400:gross" .
#   4006 math:notEqualTo 4007 .
# via the schematic forward rule:
#   {
#     ?Order a ex:Order .
#     ?Order ex:orderId ?Oid .
#     ?Order ex:declaredGrossCents ?DG .
#     ?Order ex:computedGrossCents ?CG .
#     ("urn:example:issue:%s:gross" ?Oid) string:format ?IssueUriStr .
#     ?Issue log:uri ?IssueUriStr .
#     ?DG math:notEqualTo ?CG .
#   } => {
#     ?Issue a ex:Issue .
#     ?Issue ex:onOrder ?Order .
#     ?Issue ex:field "grossCents" .
#     ?Issue ex:declared ?DG .
#     ?Issue ex:computed ?CG .
#     ?Order ex:hasIssue ?Issue .
#   } .
# with substitution (on rule variables):
#   ?CG = 4007
#   ?DG = 4006
#   ?Issue = <urn:example:issue:A400:gross>
#   ?IssueUriStr = "urn:example:issue:A400:gross"
#   ?Oid = "A400"
#   ?Order = <urn:example:order:A400>
# Therefore the derived triple above is entailed by the rules and facts.
# ----------------------------------------------------------------------

<urn:example:issue:A400:gross> ex:computed 4007 .

# ----------------------------------------------------------------------
# Proof for derived triple:
#   <urn:example:order:A400> ex:hasIssue <urn:example:issue:A400:gross> .
# It holds because the following instance of the rule body is provable:
#   <urn:example:order:A400> a ex:Order .
#   <urn:example:order:A400> ex:orderId "A400" .
#   <urn:example:order:A400> ex:declaredGrossCents 4006 .
#   <urn:example:order:A400> ex:computedGrossCents 4007 .
#   ("urn:example:issue:%s:gross" "A400") string:format "urn:example:issue:A400:gross" .
#   <urn:example:issue:A400:gross> log:uri "urn:example:issue:A400:gross" .
#   4006 math:notEqualTo 4007 .
# via the schematic forward rule:
#   {
#     ?Order a ex:Order .
#     ?Order ex:orderId ?Oid .
#     ?Order ex:declaredGrossCents ?DG .
#     ?Order ex:computedGrossCents ?CG .
#     ("urn:example:issue:%s:gross" ?Oid) string:format ?IssueUriStr .
#     ?Issue log:uri ?IssueUriStr .
#     ?DG math:notEqualTo ?CG .
#   } => {
#     ?Issue a ex:Issue .
#     ?Issue ex:onOrder ?Order .
#     ?Issue ex:field "grossCents" .
#     ?Issue ex:declared ?DG .
#     ?Issue ex:computed ?CG .
#     ?Order ex:hasIssue ?Issue .
#   } .
# with substitution (on rule variables):
#   ?CG = 4007
#   ?DG = 4006
#   ?Issue = <urn:example:issue:A400:gross>
#   ?IssueUriStr = "urn:example:issue:A400:gross"
#   ?Oid = "A400"
#   ?Order = <urn:example:order:A400>
# Therefore the derived triple above is entailed by the rules and facts.
# ----------------------------------------------------------------------

<urn:example:order:A400> ex:hasIssue <urn:example:issue:A400:gross> .

